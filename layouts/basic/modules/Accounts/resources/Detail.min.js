
Vtiger_Detail_Js("Accounts_Detail_Js",{accountHierarchyResponseCache:{},triggerAccountHierarchy:function(a){Accounts_Detail_Js.getAccountHierarchyResponseData(a).then(function(b){Accounts_Detail_Js.displayAccountHierarchyResponseData(b)})},getAccountHierarchyResponseData:function(b){var a=jQuery.Deferred();if(!(jQuery.isEmptyObject(Accounts_Detail_Js.accountHierarchyResponseCache))){a.resolve(Accounts_Detail_Js.accountHierarchyResponseCache)}else{AppConnector.request(b).then(function(c){Accounts_Detail_Js.accountHierarchyResponseCache=c;a.resolve(Accounts_Detail_Js.accountHierarchyResponseCache)})}return a.promise()},displayAccountHierarchyResponseData:function(b){var a=function(c){app.showScrollBar(jQuery("#hierarchyScroll"),{height:"300px",railVisible:true,size:"6px"})};app.showModalWindow(b,function(c){if(typeof a=="function"&&jQuery("#hierarchyScroll").height()>300){a(c)}})}},{getDeleteMessageKey:function(){return"LBL_RELATED_RECORD_DELETE_CONFIRMATION"},registerHierarchyRecordCount:function(){var a=$(".detailViewToolbar .hierarchy");if(a.length){var b=new Vtiger_Detail_Js();var c={module:app.getModuleName(),action:"RelationAjax",record:b.getRecordId(),mode:"getHierarchyCount",};AppConnector.request(c).then(function(d){if(d.success){$(".detailViewToolbar .hierarchy").append(' <span class="badge">'+d.result+"</span>")}})}},registerEvents:function(){this._super();this.registerHierarchyRecordCount()}});