
jQuery.Class("Vtiger_TreePopup_Js",{getInstance:function(){var c=app.getModuleName();var d=jQuery("#popUpClassName").val();if(typeof d!="undefined"){var b=d}else{var b=c+"_TreePopup_Js"}var e=Vtiger_TreePopup_Js;if(typeof window[b]!="undefined"){var a=new window[b]()}else{var a=new e()}return a}},{eventName:"",popupPageContentsContainer:false,jstreeInstance:false,setEventName:function(a){this.eventName=a},getEventName:function(){return this.eventName},getPopupPageContainer:function(){if(this.popupPageContentsContainer==false){this.popupPageContentsContainer=jQuery("#treePopupContainer")}return this.popupPageContentsContainer},done:function(a,d,b){if(typeof d=="undefined"||d.length<=0){d="postSelection"}if(typeof b=="undefined"){b=self}b.close();var c=JSON.stringify(a);c=c.replace(/\$\$/g,"$ $");jQuery.triggerParentEvent(d,c)},generateTree:function(){var b=this;if(b.jstreeInstance==false){var a=$("#treePopupValues").val();var c=JSON.parse(a);b.jstreeInstance=$("#treePopupContents");b.jstreeInstance.jstree({core:{data:c,themes:{name:"proton",responsive:true}}});b.jstreeInstance.on("select_node.jstree",function(d,e){b.registerSelect(e.node)})}return this.jstreeInstance},registerSelect:function(c){var b=this;var a={id:c.id,name:c.text};b.done(a,b.getEventName())},registerEvents:function(){this.generateTree()}});jQuery(document).ready(function(){var b=Vtiger_TreePopup_Js.getInstance();var a=jQuery(".triggerEventName").val();var c=(jQuery(document).height())+"px";jQuery("#popupPageContainer").css("height",c);b.setEventName(a);b.registerEvents();Vtiger_Helper_Js.showHorizontalTopScrollBar()});