
Vtiger_Edit_Js("OSSPasswords_Edit_Js",{},{registerRecordPreSaveEvent:function(b){var a=this;if(typeof b=="undefined"){b=this.getForm()}b.on(Vtiger_Edit_Js.recordPreSave,function(f,d){var c=b.find('[name="password"]').val();var h=b.find('[name="record"]').val();if(c=="**********"){var g={};g.data={module:"OSSPasswords",action:"GetPass",record:h};g.async=false;AppConnector.request(g).then(function(j){var e=j.result;if(e.success){var i=document.getElementById("OSSPasswords_editView_fieldName_password");i.value=e.password;i.onchange()}},function(i,e){});passwordStrength("","")}c=b.find('[name="password"]').val();var g={};g.data={module:"OSSPasswords",action:"CheckPass",password:c,id:h};g.async=false;g.dataType="json";AppConnector.request(g).then(function(e){if(e.result.success==false){var i={text:e.result.message,sticker:false,sticker_hover:false,type:"error"};Vtiger_Helper_Js.showPnotify(i);send=false}else{send=true;b.submit()}},function(i,e){send=false});if(send==false){return false}})},generatePassword:function(){var d=parseInt(jQuery("#minChars").val());var g=parseInt(jQuery("#maxChars").val());var f=jQuery("#allowedLetters").val();var h="";if(typeof(f)==="undefined"){f="!"}var b=f.split(",");if(typeof(d)==="undefined"){d=10}if(typeof(g)==="undefined"){g=15}var j=parseInt(Math.random()*(g-d)+d);var e=0;for(e=0;e<=j;e++){var a=parseInt(Math.random()*b.length);h+=b[a]}var c=jQuery('[name ="password"]');c.val(h);c.trigger("change")},registerButtonsEvents:function(){var a=this;$(".generatePass").click(function(){a.generatePassword()})},registerBasicEvents:function(a){this._super(a);this.registerButtonsEvents();this.registerRecordPreSaveEvent(a)}});