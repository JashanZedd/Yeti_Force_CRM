
jQuery.Class("SCalculations_Modal_Js",{},{registerChangeStatus:function(){var a=this;jQuery("#sCalculationsModal .changeStatus").on("click",function(c){var b=jQuery(c.currentTarget);b.closest(".modal").addClass("hide");a.updateStatus(b)})},updateStatus:function(c){var a=this;var d={module:"SCalculations",action:"UpdateStatus",record:c.data("id"),state:c.data("state")};app.hideModalWindow();var b=jQuery.progressIndicator({position:"html",blockInfo:{enabled:true}});AppConnector.request(d).then(function(g){if(g.success){var h=app.getViewName();if(h==="Detail"){if(app.getModuleName()=="SCalculations"){window.location.reload()}else{Vtiger_Detail_Js.reloadRelatedList()}}if(h=="List"){var f=new Vtiger_List_Js();f.getListViewRecords()}if(h=="DashBoard"){var e=new Vtiger_DashBoard_Js();e.getContainer().find('a[name="drefresh"]').trigger("click")}b.progressIndicator({mode:"hide"})}else{return false}})},registerHelpInfo:function(){var a=jQuery("#sCalculationsModal");var b=app.showPopoverElementView(a.find(".helpInfoPopover"),{trigger:"click",html:true});b.trigger("click").trigger("click");b.on("shown.bs.popover",function(g,d){var c=jQuery(g.currentTarget);var f=c.next();app.showScrollBar(f.find(".popover-content"),{height:"300px",railVisible:true,})})},registerEvents:function(){this.registerChangeStatus();this.registerHelpInfo();jQuery("#sCalculationsModal .convert").each(function(){var a=jQuery(this).text();jQuery(this).text(a)})}});jQuery(document).ready(function(b){var a=new SCalculations_Modal_Js();a.registerEvents()});