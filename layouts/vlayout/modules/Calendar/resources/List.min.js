
Vtiger_List_Js("Calendar_List_Js",{triggerMassEdit:function(a){Vtiger_List_Js.triggerMassAction(a,function(c){var b=c.find("#massEdit");b.validationEngine(app.validationEngineOptions);var d=Vtiger_List_Js.getInstance();var e=Vtiger_Edit_Js.getInstance();d.registerRecordAccessCheckEvent(b);e.registerBasicEvents(jQuery(c));d.postMassEdit(c)})},triggerImportAction:function(a){var b=jQuery.progressIndicator();AppConnector.request(a).then(function(c){b.progressIndicator({mode:"hide"});if(c){app.showModalWindow(c,function(d){jQuery("#ical_import").validationEngine(app.validationEngineOptions)})}})},triggerExportAction:function(a){var b=jQuery.progressIndicator();AppConnector.request(a).then(function(c){b.progressIndicator({mode:"hide"});if(c){app.showModalWindow(c,function(d){})}})}},{registerHoldFollowupOnEvent:function(){var b=this;var a=this.getListViewContentContainer();a.on("click",".holdFollowupOn",function(h){var g=jQuery(h.currentTarget);var d=g.closest("tr").data("id");var c="index.php?module=Calendar&view=QuickCreateFollowupAjax&record="+d;var f=jQuery.progressIndicator({});AppConnector.request(c).then(function(e){if(e){f.hide();app.showModalWindow(e,function(j){var i=j.find("form.followupCreateView");i.validationEngine(app.validationEngineOptions);app.registerEventForTimeFields(i);i.submit(function(k){var t=jQuery(this).find("button.btn-success");t.attr("disabled","disabled");f=jQuery.progressIndicator({});k.preventDefault();var v=i.validationEngine("validate");if(!v){t.removeAttr("disabled");f.hide();return false}var l=jQuery(this).find("[name='module']").val();var m=jQuery(this).find("[name='record']").val();var s=jQuery(this).find("[name='followup_date_start']").val();var r=jQuery(this).find("[name='followup_time_start']").val();var o=jQuery(this).find("[name='action']").val();var q=jQuery(this).find("[name='mode']").val();var u=jQuery(this).find("[name='defaultCallDuration']").val();var p=jQuery(this).find("[name='defaultOtherEventDuration']").val();var n={module:l,action:o,mode:q,record:m,followup_date_start:s,followup_time_start:r,defaultOtherEventDuration:p,defaultCallDuration:u};AppConnector.request(n).then(function(y){app.hideModalWindow();f.hide();if(y.result&&y.result.created){var z=jQuery("#orderBy").val();var x=jQuery("#sortOrder").val();var w={orderby:z,sortorder:x};jQuery("#recordsCount").val("");jQuery("#totalPageCount").text("");b.getListViewRecords(w).then(function(){b.updatePagination()})}})})})}else{f.hide();Vtiger_Helper_Js.showPnotify(app.vtranslate("JS_NO_EDIT_PERMISSION"))}});h.stopPropagation()})},registerMarkAsHeldEvent:function(){var b=this;var a=this.getListViewContentContainer();a.on("click",".markAsHeld",function(g){var f=jQuery(g.currentTarget);var d=f.closest("tr").data("id");f.popover("hide");var c=f.data("url");if(c&&typeof c!="undefined"){app.showModalWindow(null,c)}g.stopPropagation()})},registerEvents:function(){this._super();this.registerHoldFollowupOnEvent();this.registerMarkAsHeldEvent()}});