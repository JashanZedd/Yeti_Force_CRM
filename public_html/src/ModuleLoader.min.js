/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */
const o={modules:{},getPath:o=>"src"===o.substring(0,3)?o.substring(4).replace(/\\/gi,"/"):"src"===o.substring(2,5)?o.substring(6).replace(/\\/gi,"/"):"string"==typeof o?o.replace(/\\/gi,"/"):void console.error("unknown path",o),attachRoute(o,e,t){for(const t of o)t.name===e.parent?(void 0===t.children&&(t.children=[]),t.children.push(e)):void 0!==t.children&&this.attachRoute(t.children,e)},prepareRoutes(o,e){return e?e.map(e=>{const t={...e};return t.children=[],void 0===t.componentPath?t:("/"!==t.componentPath.substring(0,1)?t.component=(()=>(window.env.Env.dev&&console.log(`Loading ${this.getPath(o.path)}/${e.componentPath}`),import(`/src/${this.getPath(o.path)}/${e.componentPath}`))):t.component=(()=>(window.env.Env.dev&&console.log(`Loading /src/${e.componentPath.substring(1)}`),import(`/src/${e.componentPath.substring(1)}`))),void 0!==e.children&&this.prepareRoutes(o,e.children).forEach(o=>t.children.push(o)),t)}):[]},attachRoutes(o,e){this.prepareRoutes(e,void 0!==e?e.routes:[]).forEach(t=>{"string"==typeof t.parent?this.attachRoute(o,t,e):o.push(t)})},loadRoutes(o,e){for(const t of e)this.attachRoutes(o,t),void 0!==t.modules&&this.loadRoutes(o,t.modules);return o},getModule(o,e){for(let t of e){if(t.fullName===o)return t;if(void 0!==t.modules){let e=null;if(e=this.getModule(o,t.modules))return e}}return null},prepareStoreNames(o,e){const t=this.getModule(o,window.modules);if(void 0===t.store)return e;const n={...e};for(let o in e)if(void 0!==t.store[o]){n[o]={};for(let r in e[o])n[o][t.store[o][r]]=e[o][r]}return n},_flattenModules(o,e={components:{},modules:[]}){for(const t of o){if(void 0!==t.entry){const o=this.getPath(t.entry);e.components[t.name]={module:t,component:()=>(window.env.Env.dev&&console.log(`importing /src/${o}`),import(`/src/${o}`))},e.modules.push({component:e.components[t.name].component,...t})}void 0!==t.modules&&(e=this._flattenModules(t.modules,e))}return e},flattenModules(o,e=!0){const t=this._flattenModules(o);return t.modules.sort((o,e)=>e.priority-o.priority),e&&(t.modules=t.modules.filter(o=>!!o.autoLoad||(delete t.components[o.fullName],!1))),t}};"undefined"!=typeof window&&(window.ModuleLoader=o),"undefined"!=typeof global&&(global.ModuleLoader=o);export default o;