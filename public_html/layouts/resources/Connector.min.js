"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};window.AppConnector={requestPjax:function(params){return AppConnector._request(params,!0)},request:function(params,rawData){return AppConnector._request(params,!1,rawData)},_request:function(params,pjaxMode,rawData){var aDeferred=jQuery.Deferred();void 0===rawData&&(rawData=!1),void 0===pjaxMode&&(pjaxMode=!1),void 0===params&&(params={});var fullUrl="",index=void 0,callerParams=void 0;if(void 0===params.data||rawData){if("string"==typeof params){if(-1!==(index=(callerParams=fullUrl=params).indexOf("?"))){var subStr=callerParams.substr(0,index+1);callerParams=callerParams.replace(subStr,"")}}else callerParams=$.extend({},params);(params={}).data=callerParams}if((void 0===params.type||rawData)&&(params.type="POST"),(void 0===params.jsonp||rawData)&&(params.jsonp=!1),void 0===params.dataType||rawData){var data=params.data;params.dataType="json",data.hasOwnProperty("view")?params.dataType="html":"string"==typeof data&&-1!==data.indexOf("&view=")&&(params.dataType="html"),void 0!==params.url&&-1!==params.url.indexOf("&view=")&&(params.dataType="html")}if(void 0!==params.url&&-1!==params.url.indexOf("?")){fullUrl=params.url;var urlSplit=params.url.split("?"),queryString=urlSplit[1];params.url=urlSplit[0];var queryParameters=queryString.split("&");for(index=0;index<queryParameters.length;index++){var queryParamComponents=queryParameters[index].split("=");params.data[queryParamComponents[0]]=queryParamComponents[1]}}if((void 0===params.url||params.url.length<=0)&&(params.url="index.php"),params.success=function(data,status,jqXHR){null!==data&&"object"===(void 0===data?"undefined":_typeof(data))&&data.error&&(app.errorLog(data.error),data.error.message&&Vtiger_Helper_Js.showMessage({text:data.error.message,type:"error"})),aDeferred.resolve(data)},params.error=function(jqXHR,textStatus,errorThrown){if("logout"===jqXHR.getResponseHeader("yf-action")&&(window.location.href="index.php"),CONFIG.debug)if(406===jqXHR.status){var sep="-".repeat(150);console.warn("%cYetiForce debug mode!!!","color: red; font-family: sans-serif; font-size: 1.5em; font-weight: bolder; text-shadow: #000 1px 1px;"),console.error("Error: "+errorThrown,"\n"+sep+"\nTrace:\n"+sep+"\n"+(jqXHR.responseJSON?jqXHR.responseJSON.error.trace:""),"\n"+sep+"\nParams:\n"+sep+"\n"+JSON.stringify(params,null,"\t"))}else app.errorLog(jqXHR,textStatus,errorThrown);aDeferred.reject(textStatus,errorThrown,jqXHR)},""===params.data)return app.showNotify({type:"error",title:app.vtranslate("JS_ERROR")}),aDeferred.reject();if(jQuery.ajax(params),pjaxMode&&(void 0!==params.data.historyUrl&&(fullUrl=params.data.historyUrl),""===fullUrl?fullUrl="index.php?"+$.param(params.data):-1===fullUrl.indexOf("index.php?")&&(fullUrl="index.php?"+fullUrl),app.isWindowTop()&&history.pushState&&""!==fullUrl)){var currentHref=window.location.href;history.state||history.replaceState(currentHref,"title 1",currentHref),history.pushState(fullUrl,"title 2",fullUrl)}return aDeferred.promise()},requestForm:function(url){var params=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};app.openUrlMethodPost(url,params)}};
//# sourceMappingURL=Connector.min.js.map
