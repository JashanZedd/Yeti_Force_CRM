'use strict';

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) {
  return typeof obj;
} : function (obj) {
  return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
};

AppConnector={requestPjax:function b(a){return AppConnector._request(a,!0)},request:function c(a,b){return AppConnector._request(a,!1,b)},_request:function h(a,b,c){var d=jQuery.Deferred();"undefined"==typeof c&&(c=!1),"undefined"==typeof b&&(b=!1),"undefined"==typeof a&&(a={});var e,f,g="";if("undefined"==typeof a.data||c){if("string"!=typeof a)f=$.extend({},a);else if(f=g=a,e=f.indexOf("?"),-1!==e){var i=f.substr(0,e+1);f=f.replace(i,"");}a={},a.data=f;}if(("undefined"==typeof a.type||c)&&(a.type="POST"),("undefined"==typeof a.jsonp||c)&&(a.jsonp=!1),"undefined"==typeof a.dataType||c){var j=a.data;a.dataType="json",j.hasOwnProperty("view")?a.dataType="html":"string"==typeof j&&-1!==j.indexOf("&view=")&&(a.dataType="html"),"undefined"!=typeof a.url&&-1!==a.url.indexOf("&view=")&&(a.dataType="html");}if("undefined"!=typeof a.url&&-1!==a.url.indexOf("?")){g=a.url;var k=a.url.split("?"),l=k[1];a.url=k[0];var m=l.split("&");for(e=0;e<m.length;e++){var n=m[e],o=n.split("=");a.data[o[0]]=o[1];}}if(("undefined"==typeof a.url||0>=a.url.length)&&(a.url="index.php"),a.success=function(a){null!==a&&"object"===("undefined"==typeof a?"undefined":_typeof(a))&&a.error&&(app.errorLog(a.error),a.error.message&&Vtiger_Helper_Js.showMessage({text:a.error.message,type:"error"})),d.resolve(a);},a.error=function(b,c,e){var f=b.getResponseHeader("yf-action");if("logout"===f&&(window.location.href="index.php"),CONFIG.debug)if(406===b.status){console.warn("%cYetiForce debug mode!!!","color: red; font-family: sans-serif; font-size: 1.5em; font-weight: bolder; text-shadow: #000 1px 1px;"),console.error("Error: "+e,"\n------------------------------------------------------------------------------------------------------------------------------------------------------\nTrace:\n------------------------------------------------------------------------------------------------------------------------------------------------------\n"+b.responseJSON.error.trace,"\n------------------------------------------------------------------------------------------------------------------------------------------------------\nParams:\n------------------------------------------------------------------------------------------------------------------------------------------------------\n"+JSON.stringify(a,null,"\t"));}else app.errorLog(b,c,e);d.reject(c,e);},jQuery.ajax(a),b&&(""===g?g="index.php?"+$.param(a.data):-1===g.indexOf("index.php?")&&(g="index.php?"+g),history.pushState&&""!==g)){var p=window.location.href;history.state||history.replaceState(p,"title 1",p),history.pushState(g,"title 2",g);}return d.promise()},requestForm:function e(a,b){var c="<form action="+a+" method=\"POST\">";"undefined"!=typeof csrfMagicName&&(c+="<input type=\"hidden\" name=\""+csrfMagicName+"\"  value='"+csrfMagicToken+"'>"),"undefined"!=typeof b&&jQuery.each(b,function(a,b){c+="<input type=\"hidden\" name=\""+a+"\"  value='"+b+"'>";}),c+="</form>";var d=new jQuery(c);d.appendTo("body").submit();}};
//# sourceMappingURL=Connector.min.js.map
