{"version":3,"file":"app.min.js","sources":["app.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n * Contributor(s): YetiForce.com\n *************************************************************************************/\n'use strict';\n\nvar App = (window.App = {\n\tComponents: {\n\t\tTree: {\n\t\t\tBasic: class {\n\t\t\t\tconstructor(container = $('.js-tree-container')) {\n\t\t\t\t\tthis.treeInstance = false;\n\t\t\t\t\tthis.treeData = false;\n\t\t\t\t\tthis.generateTree(container);\n\t\t\t\t}\n\n\t\t\t\tgenerateTree(container) {\n\t\t\t\t\tconst slef = this;\n\t\t\t\t\tif (slef.treeInstance === false) {\n\t\t\t\t\t\tslef.treeInstance = container;\n\t\t\t\t\t\tslef.treeInstance\n\t\t\t\t\t\t\t.on('select_node.jstree', function(e, data) {\n\t\t\t\t\t\t\t\tif (data.event !== undefined && $(data.event.target).hasClass('jstree-checkbox')) {\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tdata.instance.select_node(data.node.children_d);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.on('deselect_node.jstree', function(e, data) {\n\t\t\t\t\t\t\t\tif (data.event !== undefined && $(data.event.target).hasClass('jstree-checkbox')) {\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tdata.instance.deselect_node(data.node.children_d);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.jstree({\n\t\t\t\t\t\t\t\tcore: {\n\t\t\t\t\t\t\t\t\tdata: slef.getRecords(container),\n\t\t\t\t\t\t\t\t\tthemes: {\n\t\t\t\t\t\t\t\t\t\tname: 'proton',\n\t\t\t\t\t\t\t\t\t\tresponsive: true\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tplugins: ['search', 'checkbox']\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.registerSearchEvent();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tregisterSearchEvent() {\n\t\t\t\t\tconst self = this;\n\t\t\t\t\tlet searchTimeout = false,\n\t\t\t\t\t\ttreeSearch = $('.js-tree-search');\n\t\t\t\t\ttreeSearch.on('keyup', () => {\n\t\t\t\t\t\tif (searchTimeout) {\n\t\t\t\t\t\t\tclearTimeout(searchTimeout);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsearchTimeout = setTimeout(function() {\n\t\t\t\t\t\t\tvar searchValue = treeSearch.val();\n\t\t\t\t\t\t\tself.treeInstance.jstree(true).search(searchValue);\n\t\t\t\t\t\t}, 250);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tgetRecords(container) {\n\t\t\t\t\tif (this.treeData === false && container !== 'undefined') {\n\t\t\t\t\t\tthis.treeData = JSON.parse(container.find('.js-tree-data').val());\n\t\t\t\t\t}\n\t\t\t\t\treturn this.treeData;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Quick create object used by Header.js and yf plugins\n\t\t *\n\t\t */\n\t\tQuickCreate: {\n\t\t\t/**\n\t\t\t * module quick create data cache\n\t\t\t */\n\t\t\tmoduleCache: {},\n\t\t\t/**\n\t\t\t * createRecord\n\t\t\t *\n\t\t\t * @param   {string}  moduleName\n\t\t\t * @param   {object}  params\n\t\t\t */\n\t\t\tcreateRecord(moduleName, params = {}) {\n\t\t\t\tif ('parentIframe' === CONFIG.modalTarget) {\n\t\t\t\t\twindow.parent.App.Components.QuickCreate.createRecord(moduleName, params);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tlet url = 'index.php?module=' + moduleName + '&view=QuickCreateAjax';\n\t\t\t\tif (undefined === params.callbackFunction) {\n\t\t\t\t\tparams.callbackFunction = function() {};\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\t(app.getViewName() === 'Detail' ||\n\t\t\t\t\t\t(app.getViewName() === 'Edit' && app.getRecordId() !== undefined)) &&\n\t\t\t\t\tapp.getParentModuleName() != 'Settings'\n\t\t\t\t) {\n\t\t\t\t\turl += '&sourceModule=' + app.getModuleName();\n\t\t\t\t\turl += '&sourceRecord=' + app.getRecordId();\n\t\t\t\t}\n\t\t\t\tconst progress = $.progressIndicator({ blockInfo: { enabled: true } });\n\t\t\t\tthis.getForm(url, moduleName, params).done(data => {\n\t\t\t\t\tthis.showModal(data, params);\n\t\t\t\t\tapp.registerEventForClockPicker();\n\t\t\t\t\tprogress.progressIndicator({\n\t\t\t\t\t\tmode: 'hide'\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t},\n\t\t\t/**\n\t\t\t * Get quick create form\n\t\t\t *\n\t\t\t * @param   {string}  url\n\t\t\t * @param   {string}  moduleName\n\t\t\t * @param   {object}  params\n\t\t\t *\n\t\t\t * @return  {Promise} aDeferred\n\t\t\t */\n\t\t\tgetForm(url, moduleName, params = {}) {\n\t\t\t\tconst aDeferred = $.Deferred();\n\t\t\t\tlet requestParams;\n\t\t\t\tlet isCacheActive = !params.noCache || undefined === params.noCache;\n\t\t\t\tif (isCacheActive) {\n\t\t\t\t\tif (App.Components.QuickCreate.moduleCache[moduleName]) {\n\t\t\t\t\t\taDeferred.resolve(App.Components.QuickCreate.moduleCache[moduleName]);\n\t\t\t\t\t\treturn aDeferred.promise();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\trequestParams = url;\n\t\t\t\tif (typeof params.data !== 'undefined') {\n\t\t\t\t\trequestParams = {};\n\t\t\t\t\trequestParams['data'] = params.data;\n\t\t\t\t\trequestParams['url'] = url;\n\t\t\t\t}\n\t\t\t\tAppConnector.request(requestParams).done(function(data) {\n\t\t\t\t\tif (isCacheActive) {\n\t\t\t\t\t\tApp.Components.QuickCreate.moduleCache[moduleName] = data;\n\t\t\t\t\t}\n\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t});\n\t\t\t\treturn aDeferred.promise();\n\t\t\t},\n\t\t\t/**\n\t\t\t * Show modal\n\t\t\t *\n\t\t\t * @param   {string}  html\n\t\t\t * @param   {object}  params\n\t\t\t */\n\t\t\tshowModal(html, params = {}) {\n\t\t\t\tapp.showModalWindow(html, container => {\n\t\t\t\t\tconst quickCreateForm = container.find('form[name=\"QuickCreate\"]');\n\t\t\t\t\tconst moduleName = quickCreateForm.find('[name=\"module\"]').val();\n\t\t\t\t\tconst editViewInstance = Vtiger_Edit_Js.getInstanceByModuleName(moduleName);\n\t\t\t\t\tconst moduleClassName = moduleName + '_QuickCreate_Js';\n\t\t\t\t\teditViewInstance.registerBasicEvents(quickCreateForm);\n\t\t\t\t\tif (typeof window[moduleClassName] !== 'undefined') {\n\t\t\t\t\t\tnew window[moduleClassName]().registerEvents(container);\n\t\t\t\t\t}\n\t\t\t\t\tquickCreateForm.validationEngine(app.validationEngineOptions);\n\t\t\t\t\tif (typeof params.callbackPostShown !== 'undefined') {\n\t\t\t\t\t\tparams.callbackPostShown(quickCreateForm);\n\t\t\t\t\t}\n\t\t\t\t\tthis.registerPostLoadEvents(quickCreateForm, params);\n\t\t\t\t\tthis.registerHelpInfo(quickCreateForm);\n\t\t\t\t});\n\t\t\t},\n\t\t\t/**\n\t\t\t * Register post load events\n\t\t\t *\n\t\t\t * @param   {object}  form jQuery\n\t\t\t * @param   {object}  params\n\t\t\t *\n\t\t\t * @return  {boolean}\n\t\t\t */\n\t\t\tregisterPostLoadEvents(form, params) {\n\t\t\t\tconst submitSuccessCallback = params.callbackFunction || function() {};\n\t\t\t\tconst goToFullFormCallBack = params.goToFullFormcallback || function() {};\n\t\t\t\tform.on('submit', e => {\n\t\t\t\t\tconst form = $(e.currentTarget);\n\t\t\t\t\tif (form.hasClass('not_validation')) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\tconst moduleName = form.find('[name=\"module\"]').val();\n\t\t\t\t\t//Form should submit only once for multiple clicks also\n\t\t\t\t\tif (typeof form.data('submit') !== 'undefined') {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (form.data('jqv').InvalidFields.length > 0) {\n\t\t\t\t\t\t\t//If validation fails, form should submit again\n\t\t\t\t\t\t\tform.removeData('submit');\n\t\t\t\t\t\t\t$.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t//Once the form is submiting add data attribute to that form element\n\t\t\t\t\t\t\tform.data('submit', 'true');\n\t\t\t\t\t\t\t$.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst recordPreSaveEvent = $.Event(Vtiger_Edit_Js.recordPreSave);\n\t\t\t\t\t\tform.trigger(recordPreSaveEvent, {\n\t\t\t\t\t\t\tvalue: 'edit',\n\t\t\t\t\t\t\tmodule: moduleName\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (!recordPreSaveEvent.isDefaultPrevented()) {\n\t\t\t\t\t\t\tconst moduleInstance = Vtiger_Edit_Js.getInstanceByModuleName(moduleName);\n\t\t\t\t\t\t\tconst saveHandler = !!moduleInstance.quickCreateSave\n\t\t\t\t\t\t\t\t? moduleInstance.quickCreateSave\n\t\t\t\t\t\t\t\t: this.save;\n\t\t\t\t\t\t\tlet progress = $.progressIndicator({\n\t\t\t\t\t\t\t\tmessage: app.vtranslate('JS_SAVE_LOADER_INFO'),\n\t\t\t\t\t\t\t\tposition: 'html',\n\t\t\t\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\t\t\t\tenabled: true\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tsaveHandler(form).done(data => {\n\t\t\t\t\t\t\t\tconst modalContainer = form.closest('.modalContainer');\n\t\t\t\t\t\t\t\tconst parentModuleName = app.getModuleName();\n\t\t\t\t\t\t\t\tconst viewName = app.getViewName();\n\t\t\t\t\t\t\t\tif (modalContainer.length) {\n\t\t\t\t\t\t\t\t\tapp.hideModalWindow(false, modalContainer[0].id);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (moduleName === parentModuleName && 'List' === viewName) {\n\t\t\t\t\t\t\t\t\tconst listInstance = new Vtiger_List_Js();\n\t\t\t\t\t\t\t\t\tlistInstance.getListViewRecords();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tsubmitSuccessCallback(data);\n\t\t\t\t\t\t\t\tapp.event.trigger('QuickCreate.AfterSaveFinal', data, form);\n\t\t\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\t\tif (data.success) {\n\t\t\t\t\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\t\t\t\t\ttext: app.vtranslate('JS_SAVE_NOTIFY_SUCCESS'),\n\t\t\t\t\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t//If validation fails in recordPreSaveEvent, form should submit again\n\t\t\t\t\t\t\tform.removeData('submit');\n\t\t\t\t\t\t\t$.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t}\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tform.find('.js-full-editlink').on('click', e => {\n\t\t\t\t\tconst form = $(e.currentTarget).closest('form');\n\t\t\t\t\tconst editViewUrl = $(e.currentTarget).data('url');\n\t\t\t\t\tgoToFullFormCallBack(form);\n\t\t\t\t\tthis.goToFullForm(form, editViewUrl);\n\t\t\t\t});\n\n\t\t\t\tthis.registerTabEvents(form);\n\t\t\t},\n\t\t\t/**\n\t\t\t * Register help info\n\t\t\t *\n\t\t\t * @param   {object}  container jQuery\n\t\t\t */\n\t\t\tregisterHelpInfo(container = $('form[name=\"QuickCreate\"]')) {\n\t\t\t\tapp.showPopoverElementView(container.find('.js-help-info'));\n\t\t\t},\n\t\t\t/**\n\t\t\t * Function to navigate from quick create to edit iew full form\n\t\t\t *\n\t\t\t * @param   {object}  form  jQuery\n\t\t\t */\n\t\t\tgoToFullForm(form) {\n\t\t\t\t//As formData contains information about both view and action removed action and directed to view\n\t\t\t\tform.find('input[name=\"action\"]').remove();\n\t\t\t\tform.append('<input type=\"hidden\" name=\"view\" value=\"Edit\" />');\n\t\t\t\t$.each(form.find('[data-validation-engine]'), function(key, data) {\n\t\t\t\t\t$(data).removeAttr('data-validation-engine');\n\t\t\t\t});\n\t\t\t\tform.addClass('not_validation');\n\t\t\t\tform.submit();\n\t\t\t},\n\t\t\t/**\n\t\t\t * Register tab events\n\t\t\t *\n\t\t\t * @param   {object}  form  jQuery\n\t\t\t */\n\t\t\tregisterTabEvents(form) {\n\t\t\t\tconst tabElements = form.find('.nav.nav-pills , .nav.nav-tabs').find('a');\n\t\t\t\t//This will remove the name attributes and assign it to data-element-name . We are doing this to avoid\n\t\t\t\t//Multiple element to send as in calendar\n\t\t\t\tconst quickCreateTabOnHide = function(target) {\n\t\t\t\t\t$(target)\n\t\t\t\t\t\t.find('[name]')\n\t\t\t\t\t\t.each(function(index, element) {\n\t\t\t\t\t\t\telement = $(element);\n\t\t\t\t\t\t\telement.attr('data-element-name', element.attr('name')).removeAttr('name');\n\t\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t\t//This will add the name attributes and get value from data-element-name . We are doing this to avoid\n\t\t\t\t//Multiple element to send as in calendar\n\t\t\t\tconst quickCreateTabOnShow = function(target) {\n\t\t\t\t\t$(target)\n\t\t\t\t\t\t.find('[data-element-name]')\n\t\t\t\t\t\t.each(function(index, element) {\n\t\t\t\t\t\t\telement = $(element);\n\t\t\t\t\t\t\telement.attr('name', element.attr('data-element-name')).removeAttr('data-element-name');\n\t\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t\ttabElements.on('click', function(e) {\n\t\t\t\t\tquickCreateTabOnHide(tabElements.not('[aria-expanded=\"false\"]').attr('data-target'));\n\t\t\t\t\tquickCreateTabOnShow($(this).attr('data-target'));\n\t\t\t\t\t//while switching tabs we have to clear the invalid fields list\n\t\t\t\t\tform.data('jqv').InvalidFields = [];\n\t\t\t\t});\n\t\t\t\t//To show aleady non active element , this we are doing so that on load we can remove name attributes for other fields\n\t\t\t\ttabElements.filter('a:not(.active)').each(function(e) {\n\t\t\t\t\tquickCreateTabOnHide($(this).attr('data-target'));\n\t\t\t\t});\n\t\t\t},\n\t\t\t/**\n\t\t\t * Save quick create form\n\t\t\t *\n\t\t\t * @param   {object}  form  jQuery\n\t\t\t *\n\t\t\t * @return  {Promise}        aDeferred\n\t\t\t */\n\t\t\tsave(form) {\n\t\t\t\tconst aDeferred = $.Deferred();\n\t\t\t\tconst quickCreateSaveUrl = form.serializeFormData();\n\t\t\t\tAppConnector.request(quickCreateSaveUrl).done(\n\t\t\t\t\tdata => {\n\t\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t\t},\n\t\t\t\t\t(textStatus, errorThrown) => {\n\t\t\t\t\t\taDeferred.reject(textStatus, errorThrown);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\treturn aDeferred.promise();\n\t\t\t}\n\t\t},\n\t\tQuickEdit: {\n\t\t\t/**\n\t\t\t * Show modal\n\t\t\t *\n\t\t\t * @param   {string}  html\n\t\t\t * @param   {object}  params\n\t\t\t */\n\t\t\tshowModal(params = {}) {\n\t\t\t\tconst self = this;\n\t\t\t\tparams['view'] = 'QuickEditModal';\n\t\t\t\tAppConnector.request(params).done(function(html) {\n\t\t\t\t\tapp.showModalWindow(html, container => {\n\t\t\t\t\t\tlet form = container.find('form[name=\"QuickEdit\"]');\n\t\t\t\t\t\tlet moduleName = form.find('[name=\"module\"]').val();\n\t\t\t\t\t\tlet editViewInstance = Vtiger_Edit_Js.getInstanceByModuleName(moduleName);\n\t\t\t\t\t\tlet moduleClassName = moduleName + '_QuickEdit_Js';\n\t\t\t\t\t\teditViewInstance.registerBasicEvents(form);\n\t\t\t\t\t\tif (typeof window[moduleClassName] !== 'undefined') {\n\t\t\t\t\t\t\tnew window[moduleClassName]().registerEvents(container);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tform.validationEngine(app.validationEngineOptions);\n\t\t\t\t\t\tif (typeof params.callbackPostShown !== 'undefined') {\n\t\t\t\t\t\t\tparams.callbackPostShown(form, params);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tself.registerPostLoadEvents(form, params);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t},\n\t\t\t/**\n\t\t\t * Register post load events\n\t\t\t *\n\t\t\t * @param   {object}  form jQuery\n\t\t\t * @param   {object}  params\n\t\t\t *\n\t\t\t * @return  {boolean}\n\t\t\t */\n\t\t\tregisterPostLoadEvents(form, params) {\n\t\t\t\tconst submitSuccessCallback = params.callbackFunction || function() {};\n\t\t\t\tform.on('submit', e => {\n\t\t\t\t\tconst form = $(e.currentTarget);\n\t\t\t\t\tif (form.hasClass('not_validation')) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\tconst moduleName = form.find('[name=\"module\"]').val();\n\t\t\t\t\t//Form should submit only once for multiple clicks also\n\t\t\t\t\tif (typeof form.data('submit') !== 'undefined') {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (form.data('jqv').InvalidFields.length > 0) {\n\t\t\t\t\t\t\t//If validation fails, form should submit again\n\t\t\t\t\t\t\tform.removeData('submit');\n\t\t\t\t\t\t\t$.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t//Once the form is submiting add data attribute to that form element\n\t\t\t\t\t\t\tform.data('submit', 'true');\n\t\t\t\t\t\t\t$.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst recordPreSaveEvent = $.Event(Vtiger_Edit_Js.recordPreSave);\n\t\t\t\t\t\tform.trigger(recordPreSaveEvent, {\n\t\t\t\t\t\t\tvalue: 'edit',\n\t\t\t\t\t\t\tmodule: moduleName\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (!recordPreSaveEvent.isDefaultPrevented()) {\n\t\t\t\t\t\t\tconst moduleInstance = Vtiger_Edit_Js.getInstanceByModuleName(moduleName);\n\t\t\t\t\t\t\tconst saveHandler = !!moduleInstance.quickEditSave\n\t\t\t\t\t\t\t\t? moduleInstance.quickEditSave\n\t\t\t\t\t\t\t\t: this.save;\n\t\t\t\t\t\t\tlet progress = $.progressIndicator({\n\t\t\t\t\t\t\t\tmessage: app.vtranslate('JS_SAVE_LOADER_INFO'),\n\t\t\t\t\t\t\t\tposition: 'html',\n\t\t\t\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\t\t\t\tenabled: true\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tsaveHandler(form).done(data => {\n\t\t\t\t\t\t\t\tconst modalContainer = form.closest('.modalContainer');\n\t\t\t\t\t\t\t\tconst parentModuleName = app.getModuleName();\n\t\t\t\t\t\t\t\tconst viewName = app.getViewName();\n\t\t\t\t\t\t\t\tif (modalContainer.length) {\n\t\t\t\t\t\t\t\t\tapp.hideModalWindow(false, modalContainer[0].id);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (moduleName === parentModuleName && 'List' === viewName) {\n\t\t\t\t\t\t\t\t\tconst listInstance = new Vtiger_List_Js();\n\t\t\t\t\t\t\t\t\tlistInstance.getListViewRecords();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tsubmitSuccessCallback(data);\n\t\t\t\t\t\t\t\tapp.event.trigger('QuickEdit.AfterSaveFinal', data, form);\n\t\t\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\t\tif (data.success) {\n\t\t\t\t\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\t\t\t\t\ttext: app.vtranslate('JS_SAVE_NOTIFY_SUCCESS'),\n\t\t\t\t\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif ('Detail' === viewName && app.getRecordId() === form.find('[name=\"record\"]').val()) {\n\t\t\t\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t//If validation fails in recordPreSaveEvent, form should submit again\n\t\t\t\t\t\t\tform.removeData('submit');\n\t\t\t\t\t\t\t$.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t}\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t/**\n\t\t\t * Save quick create form\n\t\t\t *\n\t\t\t * @param   {object}  form  jQuery\n\t\t\t *\n\t\t\t * @return  {Promise}        aDeferred\n\t\t\t */\n\t\t\tsave(form) {\n\t\t\t\tconst aDeferred = $.Deferred();\n\t\t\t\tconst quickCreateSaveUrl = form.serializeFormData();\n\t\t\t\tAppConnector.request(quickCreateSaveUrl).done(\n\t\t\t\t\tdata => {\n\t\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t\t},\n\t\t\t\t\t(textStatus, errorThrown) => {\n\t\t\t\t\t\taDeferred.reject(textStatus, errorThrown);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\treturn aDeferred.promise();\n\t\t\t}\n\t\t},\n\t\tScrollbar: {\n\t\t\tdefaults: {\n\t\t\t\tscrollbars: {\n\t\t\t\t\tautoHide: 'leave'\n\t\t\t\t}\n\t\t\t},\n\t\t\tpage: {\n\t\t\t\tinstance: {},\n\t\t\t\telement: null\n\t\t\t},\n\t\t\tinitPage() {\n\t\t\t\tlet scrollbarContainer = $('.mainBody');\n\t\t\t\tif (!scrollbarContainer.length) {\n\t\t\t\t\tscrollbarContainer = $('body');\n\t\t\t\t}\n\t\t\t\tthis.page.instance = this.y(scrollbarContainer);\n\t\t\t\tthis.page.element = $(this.page.instance.getElements().viewport);\n\t\t\t},\n\t\t\txy(element, options = {}) {\n\t\t\t\treturn element.overlayScrollbars(options).overlayScrollbars();\n\t\t\t},\n\t\t\ty(element, options) {\n\t\t\t\tconst yOptions = {\n\t\t\t\t\toverflowBehavior: {\n\t\t\t\t\t\tx: 'h'\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tconst mergedOptions = Object.assign(this.defaults, options, yOptions);\n\t\t\t\treturn element.overlayScrollbars(mergedOptions).overlayScrollbars();\n\t\t\t}\n\t\t}\n\t}\n});\n\nvar app = (window.app = {\n\t/**\n\t * variable stores client side language strings\n\t */\n\tlanguageString: [],\n\tbreakpoints: {\n\t\txs: 0,\n\t\tsm: 576,\n\t\tmd: 768,\n\t\tlg: 992,\n\t\txl: 1200,\n\t\txxl: 1300,\n\t\txxxl: 1700\n\t},\n\tcacheParams: [],\n\tmodalEvents: [],\n\tmousePosition: { x: 0, y: 0 },\n\tchildFrame: false,\n\ttouchDevice: false,\n\tevent: new (function() {\n\t\tthis.el = $({});\n\t\tthis.trigger = function() {\n\t\t\tthis.el.trigger(arguments[0], Array.prototype.slice.call(arguments, 1));\n\t\t};\n\t\tthis.on = function() {\n\t\t\tthis.el.on.apply(this.el, arguments);\n\t\t};\n\t\tthis.one = function() {\n\t\t\tthis.el.one.apply(this.el, arguments);\n\t\t};\n\t\tthis.off = function() {\n\t\t\tthis.el.off.apply(this.el, arguments);\n\t\t};\n\t})(),\n\t/**\n\t * Function to get the module name. This function will get the value from element which has id module\n\t * @return : string - module name\n\t */\n\tgetModuleName: function() {\n\t\treturn this.getMainParams('module');\n\t},\n\t/**\n\t * Function to get the module name. This function will get the value from element which has id module\n\t * @return : string - module name\n\t */\n\tgetParentModuleName: function() {\n\t\treturn this.getMainParams('parent');\n\t},\n\t/**\n\t * Function returns the current view name\n\t */\n\tgetViewName: function() {\n\t\treturn this.getMainParams('view');\n\t},\n\t/**\n\t * Function returns the record id\n\t */\n\tgetRecordId: function() {\n\t\tvar view = this.getViewName();\n\t\tvar recordId;\n\t\tif ($.inArray(view, ['Edit', 'PreferenceEdit', 'Detail', 'PreferenceDetail', 'DetailPreview']) !== -1) {\n\t\t\trecordId = this.getMainParams('recordId');\n\t\t}\n\t\treturn recordId;\n\t},\n\t/**\n\t * Function which will give you all details of the selected record\n\t * @params {object} params - an object of values like {'record' : recordId, 'module' : searchModule, 'fieldType' : 'email'}\n\t */\n\tgetRecordDetails: function(params) {\n\t\tlet aDeferred = $.Deferred();\n\t\tif (app.getParentModuleName() === 'Settings') {\n\t\t\tparams.parent = 'Settings';\n\t\t}\n\t\tAppConnector.request(Object.assign(params, { action: 'GetData' }))\n\t\t\t.done(function(data) {\n\t\t\t\tif (data.success) {\n\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t} else {\n\t\t\t\t\taDeferred.reject(data.message);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.fail(function(error) {\n\t\t\t\taDeferred.reject();\n\t\t\t});\n\t\treturn aDeferred.promise();\n\t},\n\t/**\n\t * Function to get language\n\t */\n\tgetLanguage: function() {\n\t\treturn $('body').data('language');\n\t},\n\t/**\n\t * Function to get page title\n\t */\n\tgetPageTitle: function() {\n\t\treturn document.title;\n\t},\n\t/**\n\t * Function gets current window parent\n\t * @returns {object}\n\t */\n\tgetWindowParent() {\n\t\tif (\n\t\t\ttypeof window.frames[0] !== 'undefined' &&\n\t\t\ttypeof window.frames[0].app !== 'undefined' &&\n\t\t\twindow.frames[0].app.childFrame\n\t\t) {\n\t\t\treturn window.frames[0];\n\t\t} else {\n\t\t\treturn window;\n\t\t}\n\t},\n\t/**\n\t * Check if current window is window top\n\t */\n\tisWindowTop() {\n\t\treturn window.top === window.self;\n\t},\n\t/**\n\t * Function gets current window parent\n\t * @returns {boolean}\n\t */\n\tisTouchDevice() {\n\t\tlet supportsTouch = false;\n\t\tif ('ontouchstart' in window) {\n\t\t\t// iOS & android\n\t\t\tsupportsTouch = true;\n\t\t} else if (window.navigator.msPointerEnabled) {\n\t\t\t// Win8\n\t\t\tsupportsTouch = true;\n\t\t} else if ('ontouchstart' in document.documentElement) {\n\t\t\t//additional check\n\t\t\tsupportsTouch = true;\n\t\t}\n\t\tif (supportsTouch) {\n\t\t\t//remove browser scrollbar visibility (doesn't work in firefox, edge and ie)\n\t\t\t$(\"<style type='text/css'> ::-webkit-scrollbar { display: none;} </style>\").appendTo('head');\n\t\t}\n\t\treturn supportsTouch;\n\t},\n\t/**\n\t * Check if string is json\n\t * @param {string} str\n\t * @returns {boolean}\n\t */\n\tisJsonString(str) {\n\t\ttry {\n\t\t\tJSON.parse(str);\n\t\t} catch (e) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t},\n\t/**\n\t * Function to set page title\n\t */\n\tsetPageTitle: function(title) {\n\t\tdocument.title = title;\n\t},\n\t/**\n\t * Function to get the contents container\n\t * @returns jQuery object\n\t */\n\tgetContentsContainer: function() {\n\t\treturn $('.bodyContents');\n\t},\n\thidePopover: function(element) {\n\t\tif (typeof element === 'undefined') {\n\t\t\telement = $('body .js-popover-tooltip');\n\t\t}\n\t\telement.popover('hide');\n\t},\n\thidePopoversAfterClick(popoverParent) {\n\t\tpopoverParent.on('mousedown', e => {\n\t\t\tsetTimeout(() => {\n\t\t\t\tpopoverParent.popover('hide');\n\t\t\t}, 100);\n\t\t});\n\t},\n\tregisterPopoverManualTrigger(element, manualTriggerDelay) {\n\t\tconst hideDelay = 500;\n\t\telement.on('mouseleave', e => {\n\t\t\tsetTimeout(() => {\n\t\t\t\tlet currentPopover = this.getBindedPopover(element);\n\t\t\t\tif (\n\t\t\t\t\t!$(':hover').filter(currentPopover).length &&\n\t\t\t\t\t!currentPopover.find('.js-popover-tooltip--record[aria-describedby]').length\n\t\t\t\t) {\n\t\t\t\t\tcurrentPopover.popover('hide');\n\t\t\t\t}\n\t\t\t}, hideDelay);\n\t\t});\n\n\t\telement.on('mouseenter', () => {\n\t\t\tsetTimeout(() => {\n\t\t\t\tif (element.is(':hover')) {\n\t\t\t\t\telement.popover('show');\n\t\t\t\t\tlet currentPopover = this.getBindedPopover(element);\n\t\t\t\t\tcurrentPopover.on('mouseleave', () => {\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t!$(':hover').filter(currentPopover).length &&\n\t\t\t\t\t\t\t\t!currentPopover.find('.js-popover-tooltip--record[aria-describedby]').length\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tcurrentPopover.popover('hide'); //close current popover\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (!$(':hover').filter($('.popover')).length) {\n\t\t\t\t\t\t\t\t$('.popover').popover('hide'); //close all popovers\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, hideDelay);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}, manualTriggerDelay);\n\t\t});\n\n\t\tapp.hidePopoversAfterClick(element);\n\t},\n\tisEllipsisActive(element) {\n\t\tlet clone = element\n\t\t\t.clone()\n\t\t\t.addClass('u-text-ellipsis--not-active')\n\t\t\t.css(element.css(['font-size', 'font-weight', 'font-family']))\n\t\t\t.appendTo('body');\n\t\tclone\n\t\t\t.find('.u-text-ellipsis')\n\t\t\t.removeClass('u-text-ellipsis')\n\t\t\t.addClass('u-text-ellipsis--not-active');\n\t\tif (clone.width() - 1 > element.width()) {\n\t\t\tclone.remove();\n\t\t\treturn true;\n\t\t}\n\t\tclone.remove();\n\t\treturn false;\n\t},\n\tshowPopoverElementView: function(selectElement = $('.js-popover-tooltip'), params = {}) {\n\t\tlet defaultParams = {\n\t\t\ttrigger: 'manual',\n\t\t\tmanualTriggerDelay: 500,\n\t\t\tplacement: 'auto',\n\t\t\thtml: true,\n\t\t\ttemplate:\n\t\t\t\t'<div class=\"popover\" role=\"tooltip\"><div class=\"arrow\"></div><h3 class=\"popover-header\"></h3><div class=\"popover-body\"></div></div>',\n\t\t\tcontainer: 'body',\n\t\t\tboundary: 'viewport',\n\t\t\tdelay: { show: 300, hide: 100 }\n\t\t};\n\t\tselectElement.each(function(index, domElement) {\n\t\t\tlet element = $(domElement);\n\t\t\tlet elementParams = $.extend(true, defaultParams, params, element.data());\n\t\t\tif (element.data('class')) {\n\t\t\t\telementParams.template =\n\t\t\t\t\t'<div class=\"popover ' +\n\t\t\t\t\telement.data('class') +\n\t\t\t\t\t'\" role=\"tooltip\"><div class=\"arrow\"></div><h3 class=\"popover-header\"></h3><div class=\"popover-body\"></div></div>';\n\t\t\t}\n\t\t\tif (element.hasClass('delay0')) {\n\t\t\t\telementParams.delay = { show: 0, hide: 0 };\n\t\t\t}\n\t\t\telement.popover(elementParams);\n\t\t\tif (elementParams.trigger === 'manual' || typeof elementParams.trigger === 'undefined') {\n\t\t\t\tapp.registerPopoverManualTrigger(element, elementParams.manualTriggerDelay);\n\t\t\t}\n\t\t\tif (elementParams.callbackShown) {\n\t\t\t\telement.on('shown.bs.popover', function(e) {\n\t\t\t\t\telementParams.callbackShown(e);\n\t\t\t\t});\n\t\t\t}\n\t\t\telement.addClass('popover-triggered');\n\t\t});\n\t\treturn selectElement;\n\t},\n\tregisterPopoverEllipsis({\n\t\telement = $('.js-popover-tooltip--ellipsis'),\n\t\tparams = { trigger: 'hover focus' },\n\t\tcontainer = $(window)\n\t} = {}) {\n\t\tconst self = this;\n\t\tparams = {\n\t\t\tcallbackShown: () => {\n\t\t\t\tself.setPopoverPosition(element, container);\n\t\t\t},\n\t\t\ttrigger: 'manual',\n\t\t\tplacement: 'right',\n\t\t\ttemplate:\n\t\t\t\t'<div class=\"popover js-popover--before-positioned\" role=\"tooltip\"><div class=\"popover-body\"></div></div>'\n\t\t};\n\t\tlet popoverText = element.find('.js-popover-text').length ? element.find('.js-popover-text') : element;\n\t\tif (!app.isEllipsisActive(popoverText)) {\n\t\t\telement.addClass('popover-triggered');\n\t\t\treturn;\n\t\t}\n\t\tapp.showPopoverElementView(element, params);\n\t},\n\tregisterPopoverEllipsisIcon(\n\t\tselectElement = $('.js-popover-tooltip--ellipsis-icon'),\n\t\tparams = { trigger: 'hover focus' }\n\t) {\n\t\tselectElement.each(function(index, domElement) {\n\t\t\tlet element = $(domElement);\n\t\t\tlet popoverText = element.find('.js-popover-text').length ? element.find('.js-popover-text') : element;\n\t\t\tif (!app.isEllipsisActive(popoverText)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet iconElement = element.find('.js-popover-icon');\n\t\t\tif (iconElement.length) {\n\t\t\t\telement.find('.js-popover-icon').removeClass('d-none');\n\t\t\t\tparams.selector = '.js-popover-icon';\n\t\t\t}\n\t\t\tapp.showPopoverElementView(element, params);\n\t\t});\n\t},\n\t/**\n\t * Register popover record\n\t * @param {jQuery} selectElement\n\t * @param {object} customParams\n\t */\n\tregisterPopoverRecord: function(\n\t\tselectElement = $('a.js-popover-tooltip--record'),\n\t\tcustomParams = {},\n\t\tcontainer = $(document)\n\t) {\n\t\tconst self = this;\n\t\tlet params = {\n\t\t\ttemplate:\n\t\t\t\t'<div class=\"popover c-popover--link js-popover--before-positioned\" role=\"tooltip\"><div class=\"popover-body\"></div></div>',\n\t\t\tcontent: '<div class=\"d-none\"></div>',\n\t\t\tmanualTriggerDelay: app.getMainParams('recordPopoverDelay'),\n\t\t\tplacement: 'right',\n\t\t\tcallbackShown: () => {\n\t\t\t\tif (!selectElement.attr('href')) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tlet link = new URL(selectElement.eq(0).attr('href'), window.location.origin);\n\t\t\t\tif (!link.searchParams.get('record') || !link.searchParams.get('view')) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tlet url = link.href;\n\t\t\t\turl = url.replace('view=', 'xview=') + '&view=RecordPopover';\n\t\t\t\tlet currentPopover = self.getBindedPopover(selectElement);\n\t\t\t\tlet popoverBody = currentPopover.find('.popover-body');\n\t\t\t\tpopoverBody.progressIndicator({});\n\t\t\t\tlet appendPopoverData = data => {\n\t\t\t\t\tpopoverBody.progressIndicator({ mode: 'hide' }).html(data);\n\t\t\t\t\tif (typeof customParams.callback === 'function') {\n\t\t\t\t\t\tcustomParams.callback(popoverBody);\n\t\t\t\t\t}\n\t\t\t\t\tself.setPopoverPosition(selectElement, container);\n\t\t\t\t};\n\t\t\t\tlet cacheData = window.popoverCache[url];\n\t\t\t\tif (typeof cacheData !== 'undefined') {\n\t\t\t\t\tappendPopoverData(cacheData);\n\t\t\t\t} else {\n\t\t\t\t\tAppConnector.request(url).done(data => {\n\t\t\t\t\t\twindow.popoverCache[url] = data;\n\t\t\t\t\t\tappendPopoverData(data);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tapp.showPopoverElementView(selectElement, params);\n\t},\n\t/**\n\t * Update popover record position (overwrite bootstrap positioning, failing on huge elements)\n\t * @param {jQuery} popover\n\t * @param {number} offsetLeft\n\t */\n\tsetPopoverPosition(popoverElement, container = $(window)) {\n\t\tlet popover = this.getBindedPopover(popoverElement);\n\t\tif (!popover.length) {\n\t\t\treturn;\n\t\t}\n\t\tconst iframeOffset = this.computePopoverIframeOffset(popoverElement);\n\t\tlet windowHeight = $(window).height(),\n\t\t\twindowWidth = $(window).width(),\n\t\t\tpopoverPadding = 10,\n\t\t\tpopoverBody = popover.find('.popover-body'),\n\t\t\tpopoverHeight = popoverBody.height(),\n\t\t\tpopoverWidth = popoverBody.width(),\n\t\t\toffsetTop = app.mousePosition.y + iframeOffset.top,\n\t\t\toffsetLeft = app.mousePosition.x + iframeOffset.left;\n\t\tif (popoverHeight + offsetTop + popoverPadding > windowHeight) {\n\t\t\toffsetTop = offsetTop - popoverHeight - popoverPadding;\n\t\t}\n\t\tif (popoverWidth + offsetLeft + popoverPadding > windowWidth) {\n\t\t\toffsetLeft = windowWidth - popoverWidth;\n\t\t}\n\t\tpopover.css({\n\t\t\ttransform: `translate3d(${offsetLeft}px, ${offsetTop}px, 0)`\n\t\t});\n\t\tpopover.removeClass('js-popover--before-positioned');\n\t\tpopoverElement.one('hide.bs.popover', () => {\n\t\t\tpopover.addClass('js-popover--before-positioned');\n\t\t});\n\t},\n\t/**\n\t * Compute popover iframe offset\n\t *\n\t * @param   {Object}  popoverElement  jquery\n\t *\n\t * @return  {Object}                  offset top and left\n\t */\n\tcomputePopoverIframeOffset(popoverElement) {\n\t\tlet iframeOffsetTop = 0;\n\t\tlet iframeOffsetLeft = 0;\n\t\tif (!$(document).find(popoverElement).length) {\n\t\t\tlet iframe = $(document).find('iframe');\n\t\t\tconst iframeOffset = iframe.offset();\n\t\t\tiframeOffsetTop += iframeOffset.top;\n\t\t\tiframeOffsetLeft += iframeOffset.left;\n\t\t\tif (!iframe.contents().find(popoverElement).length) {\n\t\t\t\tlet iframe2 = iframe.contents().find('iframe');\n\t\t\t\tconst iframeOffset2 = iframe2.offset();\n\t\t\t\tiframeOffsetTop += iframeOffset2.top;\n\t\t\t\tiframeOffsetLeft += iframeOffset2.left;\n\t\t\t}\n\t\t}\n\t\treturn { top: iframeOffsetTop, left: iframeOffsetLeft };\n\t},\n\t/**\n\t * Get binded popover\n\t * @param {jQuery} element\n\t * @returns {Mixed|jQuery|HTMLElement}\n\t */\n\tgetBindedPopover(element) {\n\t\treturn $(`#${element.attr('aria-describedby')}`);\n\t},\n\t/**\n\t * Function to check the maximum selection size of multiselect and update the results\n\t * @params <object> multiSelectElement\n\t * @params <object> select2 params\n\t */\n\tregisterChangeEventForMultiSelect: function(selectElement, params) {\n\t\tif (typeof selectElement === 'undefined') {\n\t\t\treturn;\n\t\t}\n\t\tvar instance = selectElement.data('select2');\n\t\tvar limit = params.maximumSelectionLength;\n\t\tselectElement.on('change', function(e) {\n\t\t\tvar data = instance.data();\n\t\t\tif ($.isArray(data) && data.length >= limit) {\n\t\t\t\tinstance.updateResults();\n\t\t\t}\n\t\t});\n\t},\n\t/**\n\t * Function to get data of the child elements in serialized format\n\t * @params <object> parentElement - element in which the data should be serialized. Can be selector , domelement or jquery object\n\t * @params <String> returnFormat - optional which will indicate which format return value should be valid values \"object\" and \"string\"\n\t * @return <object> - encoded string or value map\n\t */\n\tgetSerializedData: function(parentElement, returnFormat) {\n\t\tif (typeof returnFormat === 'undefined') {\n\t\t\treturnFormat = 'string';\n\t\t}\n\n\t\tparentElement = $(parentElement);\n\n\t\tvar encodedString = parentElement.children().serialize();\n\t\tif (returnFormat == 'string') {\n\t\t\treturn encodedString;\n\t\t}\n\t\tvar keyValueMap = {};\n\t\tvar valueList = encodedString.split('&');\n\n\t\tfor (var index in valueList) {\n\t\t\tvar keyValueString = valueList[index];\n\t\t\tvar keyValueArr = keyValueString.split('=');\n\t\t\tvar nameOfElement = keyValueArr[0];\n\t\t\tvar valueOfElement = keyValueArr[1];\n\t\t\tkeyValueMap[nameOfElement] = decodeURIComponent(valueOfElement);\n\t\t}\n\t\treturn keyValueMap;\n\t},\n\t/**\n\t * Function animates bootstrap modal with animate.css\n\t * @params: jQuery object with class .modal,\n\t * @params: string with animation name,\n\t * @params: string with animation name,\n\t */\n\tanimateModal(modal, openAnimation, closeAnimation) {\n\t\tmodal.on('show.bs.modal', function(e) {\n\t\t\tmodal.removeClass(`animated ${closeAnimation}`);\n\t\t\tmodal.addClass(`animated ${openAnimation}`);\n\t\t});\n\t\tmodal.on('hide.bs.modal', function(e) {\n\t\t\tmodal.removeClass(`animated ${openAnimation}`);\n\t\t\tmodal.addClass(`animated ${closeAnimation}`);\n\t\t});\n\t},\n\tshowModalData(data, container, paramsObject, cb, url, sendByAjaxCb) {\n\t\tconst thisInstance = this;\n\t\tlet params = {\n\t\t\tshow: true\n\t\t};\n\t\tif (!app.getMainParams('backgroundClosingModal')) {\n\t\t\tparams.backdrop = 'static';\n\t\t\tparams.keyboard = false;\n\t\t}\n\t\tif (typeof paramsObject === 'object') {\n\t\t\tcontainer.css(paramsObject);\n\t\t\tparams = $.extend(params, paramsObject);\n\t\t}\n\t\tcontainer.html(data);\n\t\tif (container.find('.modal').hasClass('static')) {\n\t\t\tparams.backdrop = 'static';\n\t\t}\n\t\t// In a modal dialog elements can be specified which can receive focus even though they are not descendants of the modal dialog.\n\t\t$.fn.modal.Constructor.prototype.enforceFocus = function(e) {\n\t\t\t$(document)\n\t\t\t\t.off('focusin.bs.modal') // guard against infinite focus loop\n\t\t\t\t.on(\n\t\t\t\t\t'focusin.bs.modal',\n\t\t\t\t\t$.proxy(function(e) {\n\t\t\t\t\t\tif ($(e.target).hasClass('select2-search__field')) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}, this)\n\t\t\t\t);\n\t\t};\n\t\tconst modalContainer = container.find('.modal:first');\n\t\tmodalContainer.one('shown.bs.modal', function() {\n\t\t\tcb(modalContainer);\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(modalContainer.find('select.select2'));\n\t\t\tApp.Fields.Date.register(modalContainer);\n\t\t\tnew App.Fields.Text.Editor(modalContainer.find('.js-editor'), {\n\t\t\t\theight: '5em',\n\t\t\t\ttoolbar: 'Min'\n\t\t\t});\n\t\t\tapp.registesterScrollbar(modalContainer);\n\t\t});\n\t\t$('body').append(container);\n\t\tmodalContainer.modal(params);\n\t\tthisInstance.registerModalEvents(modalContainer, sendByAjaxCb);\n\t\tthisInstance.registerDataTables(modalContainer.find('.dataTable'));\n\t},\n\tshowModalWindow: function(data, url, cb, paramsObject = {}) {\n\t\tif (!app.isCurrentWindowTarget('app.showModalWindow', arguments)) {\n\t\t\treturn false;\n\t\t}\n\t\tconst thisInstance = this;\n\t\tlet sendByAjaxCb;\n\t\tWindow.lastModalId =\n\t\t\t'modal_' +\n\t\t\tMath.random()\n\t\t\t\t.toString(36)\n\t\t\t\t.substr(2, 9);\n\t\t//null is also an object\n\t\tif (typeof data === 'object' && data != null && !(data instanceof $)) {\n\t\t\tif (data.id != undefined) {\n\t\t\t\tWindow.lastModalId = data.id;\n\t\t\t}\n\t\t\tparamsObject = data.css;\n\t\t\tcb = data.cb;\n\t\t\turl = data.url;\n\t\t\tif (data.sendByAjaxCb !== 'undefined') {\n\t\t\t\tsendByAjaxCb = data.sendByAjaxCb;\n\t\t\t}\n\t\t\tdata = data.data;\n\t\t}\n\t\tif (typeof url === 'function') {\n\t\t\tif (typeof cb === 'object') {\n\t\t\t\tparamsObject = cb;\n\t\t\t}\n\t\t\tcb = url;\n\t\t\turl = false;\n\t\t} else if (typeof url === 'object') {\n\t\t\tcb = function() {};\n\t\t\tparamsObject = url;\n\t\t\turl = false;\n\t\t}\n\t\tif (typeof cb !== 'function') {\n\t\t\tcb = function() {};\n\t\t}\n\t\tif (typeof sendByAjaxCb !== 'function') {\n\t\t\tsendByAjaxCb = function() {};\n\t\t}\n\t\tif (paramsObject !== undefined && paramsObject.modalId !== undefined) {\n\t\t\tWindow.lastModalId = paramsObject.modalId;\n\t\t}\n\t\t// prevent duplicate hash generation\n\t\tlet container = $('#' + Window.lastModalId);\n\t\tif (container.length) {\n\t\t\tcontainer.remove();\n\t\t}\n\t\tcontainer = $('<div></div>');\n\t\tcontainer.attr('id', Window.lastModalId).addClass('modalContainer js-modal-container');\n\t\tcontainer.one('hidden.bs.modal', function() {\n\t\t\tcontainer.remove();\n\t\t\tlet backdrop = $('.modal-backdrop');\n\t\t\tif (!$('.modal.show').length) {\n\t\t\t\tbackdrop.remove();\n\t\t\t}\n\t\t\tif (backdrop.length > 0) {\n\t\t\t\t$('body').addClass('modal-open');\n\t\t\t}\n\t\t});\n\t\tif (data) {\n\t\t\tthisInstance.showModalData(data, container, paramsObject, cb, url, sendByAjaxCb);\n\t\t} else {\n\t\t\t$.get(url).done(function(response) {\n\t\t\t\tthisInstance.showModalData(response, container, paramsObject, cb, url, sendByAjaxCb);\n\t\t\t});\n\t\t}\n\t\treturn container;\n\t},\n\t/**\n\t * Check if current window is target for a modal and trigger in correct window if not\n\t *\n\t * @param   {String}  sourceFunction  source function name in dot prop notation object\n\t * @param   {Array}  args            source function arguments\n\t *\n\t * @return  {Boolean}                  isCurrentWindowTarget\n\t */\n\tisCurrentWindowTarget(sourceFunction, args) {\n\t\tlet isCurrentWindowTarget = true;\n\t\tif (CONFIG.modalTarget === 'parentIframe') {\n\t\t\tthis.childFrame = true;\n\t\t\tsourceFunction = sourceFunction.split('.');\n\t\t\tsourceFunction.unshift('parent');\n\t\t\tsourceFunction = sourceFunction.reduce((o, i) => o[i], window);\n\t\t\tsourceFunction.apply(window.parent.app, args);\n\t\t\tisCurrentWindowTarget = false;\n\t\t}\n\t\treturn isCurrentWindowTarget;\n\t},\n\t/**\n\t * Function which you can use to hide the modal\n\t * This api assumes that we are using block ui plugin and uses unblock api to unblock it\n\t */\n\thideModalWindow: function(callback, id) {\n\t\tif (!app.isCurrentWindowTarget('app.hideModalWindow', arguments)) {\n\t\t\treturn false;\n\t\t}\n\t\tlet container;\n\t\tif (callback && typeof callback === 'object') {\n\t\t\tcontainer = callback;\n\t\t} else if (id == undefined) {\n\t\t\tcontainer = $('.modalContainer');\n\t\t} else {\n\t\t\tcontainer = $('#' + id);\n\t\t}\n\t\tif (container.length <= 0) {\n\t\t\treturn;\n\t\t}\n\t\tif (typeof callback !== 'function') {\n\t\t\tcallback = function() {};\n\t\t}\n\t\tlet modalContainer = container.find('.modal');\n\t\tmodalContainer.modal('hide');\n\t\tlet backdrop = $('.modal-backdrop:last');\n\t\tif ($('.modalContainer').length == 0 && backdrop.length) {\n\t\t\tbackdrop.remove();\n\t\t}\n\t\tmodalContainer.one('hidden.bs.modal', callback);\n\t},\n\tregisterModalController: function(modalId, modalContainer, cb) {\n\t\tlet windowParent = this.childFrame ? window.parent : window;\n\t\tif (modalId === undefined) {\n\t\t\tmodalId = Window.lastModalId;\n\t\t}\n\t\tif (modalContainer === undefined) {\n\t\t\tmodalContainer = $('#' + modalId + ' .js-modal-data');\n\t\t}\n\t\tlet modalClass = modalContainer.data('module') + '_' + modalContainer.data('view') + '_JS';\n\t\tif (typeof windowParent[modalClass] !== 'undefined') {\n\t\t\tlet instance = new windowParent[modalClass]();\n\t\t\tif (typeof cb === 'function') {\n\t\t\t\tcb(modalContainer, instance);\n\t\t\t}\n\t\t\tinstance.registerEvents(modalContainer);\n\t\t\tif (modalId && app.modalEvents[modalId]) {\n\t\t\t\tapp.modalEvents[modalId](modalContainer, instance);\n\t\t\t}\n\t\t}\n\t\tmodalClass = 'Base_' + modalContainer.data('view') + '_JS';\n\t\tif (typeof windowParent[modalClass] !== 'undefined') {\n\t\t\tlet instance = new windowParent[modalClass]();\n\t\t\tif (typeof cb === 'function') {\n\t\t\t\tcb(modalContainer, instance);\n\t\t\t}\n\t\t\tinstance.registerEvents(modalContainer);\n\t\t\tif (modalId && app.modalEvents[modalId]) {\n\t\t\t\tapp.modalEvents[modalId](modalContainer, instance);\n\t\t\t}\n\t\t}\n\t},\n\tregisterModalEvents: function(container, sendByAjaxCb) {\n\t\tvar form = container.find('form');\n\t\tvar validationForm = false;\n\t\tif (form.hasClass('validateForm')) {\n\t\t\tform.validationEngine(app.validationEngineOptions);\n\t\t\tvalidationForm = true;\n\t\t}\n\t\tif (form.hasClass('sendByAjax')) {\n\t\t\tform.on('submit', function(e) {\n\t\t\t\tvar save = true;\n\t\t\t\te.preventDefault();\n\t\t\t\tif (validationForm && form.data('jqv').InvalidFields.length > 0) {\n\t\t\t\t\tapp.formAlignmentAfterValidation(form);\n\t\t\t\t\tsave = false;\n\t\t\t\t}\n\t\t\t\tif (save) {\n\t\t\t\t\tvar progressIndicatorElement = $.progressIndicator({\n\t\t\t\t\t\tblockInfo: { enabled: true }\n\t\t\t\t\t});\n\t\t\t\t\tvar formData = form.serializeFormData();\n\t\t\t\t\tAppConnector.request(formData)\n\t\t\t\t\t\t.done(function(responseData) {\n\t\t\t\t\t\t\tsendByAjaxCb(formData, responseData);\n\t\t\t\t\t\t\tif (responseData.success && responseData.result) {\n\t\t\t\t\t\t\t\tif (responseData.result.notify) {\n\t\t\t\t\t\t\t\t\tVtiger_Helper_Js.showMessage(responseData.result.notify);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (responseData.result.procesStop) {\n\t\t\t\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.fail(function() {\n\t\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\tisHidden: function(element) {\n\t\tif (element.css('display') == 'none') {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n\tisInvisible: function(element) {\n\t\tif (element.css('visibility') == 'hidden') {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n\t/**\n\t * Default validation eninge options\n\t */\n\tvalidationEngineOptions: {\n\t\t// Avoid scroll decision and let it scroll up page when form is too big\n\t\t// Reference: http://www.position-absolute.com/articles/jquery-form-validator-because-form-validation-is-a-mess/\n\t\tscroll: false,\n\t\tpromptPosition: 'topLeft',\n\t\t//to support validation for select2 select box\n\t\tprettySelect: true,\n\t\tusePrefix: 's2id_'\n\t},\n\tvalidationEngineOptionsForRecord: {\n\t\tscroll: false,\n\t\tpromptPosition: 'topLeft',\n\t\t//to support validation for select2 select box\n\t\tprettySelect: true,\n\t\tusePrefix: 's2id_',\n\t\tvalidateNonVisibleFields: true,\n\t\tonBeforePromptType: function(field) {\n\t\t\tvar block = field.closest('.js-toggle-panel');\n\t\t\tif (block.find('.blockContent').is(':hidden')) {\n\t\t\t\tblock.find('.blockHeader').click();\n\t\t\t}\n\t\t}\n\t},\n\t/**\n\t * Default scroll options\n\t */\n\tscrollOptions: {\n\t\twheelSpeed: 0.1\n\t},\n\t/**\n\t * Function to push down the error message size when validation is invoked\n\t * @params : form Element\n\t */\n\tformAlignmentAfterValidation: function(form) {\n\t\t// to avoid hiding of error message under the fixed nav bar\n\t\tvar formError = form.find(\".formError:not('.greenPopup'):first\");\n\t\tif (formError.length > 0) {\n\t\t\tvar destination = formError.offset().top;\n\t\t\tvar resizedDestnation = destination - 105;\n\t\t\t$('html').animate(\n\t\t\t\t{\n\t\t\t\t\tscrollTop: resizedDestnation\n\t\t\t\t},\n\t\t\t\t'slow'\n\t\t\t);\n\t\t}\n\t},\n\tconvertToDatePickerFormat: function(dateFormat) {\n\t\tswitch (dateFormat) {\n\t\t\tcase 'yyyy-mm-dd':\n\t\t\t\treturn 'Y-m-d';\n\t\t\t\tbreak;\n\t\t\tcase 'mm-dd-yyyy':\n\t\t\t\treturn 'm-d-Y';\n\t\t\t\tbreak;\n\t\t\tcase 'dd-mm-yyyy':\n\t\t\t\treturn 'd-m-Y';\n\t\t\t\tbreak;\n\t\t\tcase 'yyyy.mm.dd':\n\t\t\t\treturn 'Y.m.d';\n\t\t\t\tbreak;\n\t\t\tcase 'mm.dd.yyyy':\n\t\t\t\treturn 'm.d.Y';\n\t\t\t\tbreak;\n\t\t\tcase 'dd.mm.yyyy':\n\t\t\t\treturn 'd.m.Y';\n\t\t\t\tbreak;\n\t\t\tcase 'yyyy/mm/dd':\n\t\t\t\treturn 'Y/m/d';\n\t\t\t\tbreak;\n\t\t\tcase 'mm/dd/yyyy':\n\t\t\t\treturn 'm/d/Y';\n\t\t\t\tbreak;\n\t\t\tcase 'dd/mm/yyyy':\n\t\t\t\treturn 'd/m/Y';\n\t\t\t\tbreak;\n\t\t}\n\t},\n\tconvertTojQueryDatePickerFormat: function(dateFormat) {\n\t\tlet i,\n\t\t\tdotMode = '-';\n\t\tif (dateFormat.indexOf('-') !== -1) {\n\t\t\tdotMode = '-';\n\t\t}\n\t\tif (dateFormat.indexOf('.') !== -1) {\n\t\t\tdotMode = '.';\n\t\t}\n\t\tif (dateFormat.indexOf('/') !== -1) {\n\t\t\tdotMode = '/';\n\t\t}\n\t\tlet splitDateFormat = dateFormat.split(dotMode);\n\t\tfor (i in splitDateFormat) {\n\t\t\tlet sectionDate = splitDateFormat[i];\n\t\t\tif (sectionDate.length === 4) {\n\t\t\t\tsplitDateFormat[i] = sectionDate.substring(0, 2);\n\t\t\t}\n\t\t}\n\t\treturn splitDateFormat.join(dotMode);\n\t},\n\t/*\n\t * Converts user formated date to database format yyyy-mm-dd\n\t */\n\tgetDateInDBInsertFormat: function(dateFormat, dateString) {\n\t\tvar i = 0;\n\t\tvar dotMode = '-';\n\t\tif (dateFormat.indexOf('-') !== -1) {\n\t\t\tdotMode = '-';\n\t\t} else if (dateFormat.indexOf('.') !== -1) {\n\t\t\tdotMode = '.';\n\t\t} else if (dateFormat.indexOf('/') !== -1) {\n\t\t\tdotMode = '/';\n\t\t}\n\t\tvar dateFormatParts = dateFormat.split(dotMode);\n\t\tvar day = '',\n\t\t\tmonth = '',\n\t\t\tyear = '';\n\t\tvar dateParts = dateString.split(dotMode);\n\t\tfor (i in dateFormatParts) {\n\t\t\tvar sectionDate = dateFormatParts[i];\n\t\t\tswitch (sectionDate) {\n\t\t\t\tcase 'dd':\n\t\t\t\t\tday = dateParts[i];\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'mm':\n\t\t\t\t\tmonth = dateParts[i];\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'yyyy':\n\t\t\t\t\tyear = dateParts[i];\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\treturn year + '-' + month + '-' + day;\n\t},\n\tregisterEventForDateFields: function(parentElement) {\n\t\tif (typeof parentElement === 'undefined') {\n\t\t\tparentElement = $('body');\n\t\t}\n\n\t\tparentElement = $(parentElement);\n\t\tlet element;\n\t\tif (parentElement.hasClass('dateField')) {\n\t\t\telement = parentElement;\n\t\t} else {\n\t\t\telement = $('.dateField', parentElement);\n\t\t}\n\t\telement.datepicker({ autoclose: true }).on('changeDate', function(ev) {\n\t\t\tlet currentElement = $(ev.currentTarget),\n\t\t\t\tdateFormat = currentElement.data('dateFormat').toUpperCase(),\n\t\t\t\tdate = $.datepicker.formatDate(moment(ev.date).format(dateFormat), ev.date);\n\t\t\tcurrentElement.val(date);\n\t\t});\n\t\tApp.Fields.Utils.hideMobileKeyboard(element);\n\t},\n\tregisterEventForClockPicker: function(timeInputs = $('.clockPicker')) {\n\t\tif (!timeInputs.hasClass('clockPicker')) {\n\t\t\ttimeInputs = timeInputs.find('.clockPicker');\n\t\t}\n\t\tif (!timeInputs.length) {\n\t\t\treturn;\n\t\t}\n\t\tlet params = {\n\t\t\tplacement: 'bottom',\n\t\t\tautoclose: true,\n\t\t\tminutestep: 5\n\t\t};\n\n\t\t$('.js-clock__btn').on('click', e => {\n\t\t\te.stopPropagation();\n\t\t\tlet tempElement = $(e.currentTarget)\n\t\t\t\t.closest('.time')\n\t\t\t\t.find('input.clockPicker');\n\t\t\tif (tempElement.attr('disabled') !== 'disabled' && tempElement.attr('readonly') !== 'readonly') {\n\t\t\t\ttempElement.clockpicker('show');\n\t\t\t}\n\t\t});\n\n\t\tlet formatTimeString = timeInput => {\n\t\t\tif (params.twelvehour) {\n\t\t\t\tlet meridiemTime = '';\n\t\t\t\tparams.afterDone = () => {\n\t\t\t\t\t//format time string after picking a value\n\t\t\t\t\tlet timeString = timeInput.val(),\n\t\t\t\t\t\ttimeStringFormatted = timeString.slice(0, timeString.length - 2) + ' ' + meridiemTime;\n\t\t\t\t\ttimeInput.val(timeStringFormatted);\n\t\t\t\t\tapp.event.trigger('Clockpicker.changed', timeInput);\n\t\t\t\t};\n\t\t\t\tparams.beforeHide = () => {\n\t\t\t\t\tmeridiemTime = $('.clockpicker-buttons-am-pm:visible')\n\t\t\t\t\t\t.find('a:not(.text-white-50)')\n\t\t\t\t\t\t.text();\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\tparams.afterDone = () => {\n\t\t\t\t\tapp.event.trigger('Clockpicker.changed', timeInput);\n\t\t\t\t};\n\t\t\t}\n\t\t};\n\n\t\ttimeInputs.each((i, e) => {\n\t\t\tlet timeInput = $(e);\n\t\t\tlet formatTime = timeInputs.data('format') || CONFIG.hourFormat;\n\t\t\tparams.twelvehour = parseInt(formatTime) === 12 ? true : false;\n\t\t\tformatTimeString(timeInput);\n\t\t\ttimeInput.clockpicker(params);\n\t\t});\n\t\tApp.Fields.Utils.hideMobileKeyboard(timeInputs);\n\t},\n\tregisterDataTables: function(table, options = {}) {\n\t\tif ($.fn.dataTable == undefined) {\n\t\t\treturn false;\n\t\t}\n\t\tif (table.length == 0) {\n\t\t\treturn false;\n\t\t}\n\t\t$.extend($.fn.dataTable.defaults, {\n\t\t\tlanguage: {\n\t\t\t\tsLengthMenu: app.vtranslate('JS_S_LENGTH_MENU'),\n\t\t\t\tsZeroRecords: app.vtranslate('JS_NO_RESULTS_FOUND'),\n\t\t\t\tsInfo: app.vtranslate('JS_S_INFO'),\n\t\t\t\tsInfoEmpty: app.vtranslate('JS_S_INFO_EMPTY'),\n\t\t\t\tsSearch: app.vtranslate('JS_SEARCH'),\n\t\t\t\tsEmptyTable: app.vtranslate('JS_NO_RESULTS_FOUND'),\n\t\t\t\tsInfoFiltered: app.vtranslate('JS_S_INFO_FILTERED'),\n\t\t\t\tsLoadingRecords: app.vtranslate('JS_LOADING_OF_RECORDS'),\n\t\t\t\tsProcessing: app.vtranslate('JS_LOADING_OF_RECORDS'),\n\t\t\t\toPaginate: {\n\t\t\t\t\tsFirst: app.vtranslate('JS_S_FIRST'),\n\t\t\t\t\tsPrevious: app.vtranslate('JS_S_PREVIOUS'),\n\t\t\t\t\tsNext: app.vtranslate('JS_S_NEXT'),\n\t\t\t\t\tsLast: app.vtranslate('JS_S_LAST')\n\t\t\t\t},\n\t\t\t\toAria: {\n\t\t\t\t\tsSortAscending: app.vtranslate('JS_S_SORT_ASCENDING'),\n\t\t\t\t\tsSortDescending: app.vtranslate('JS_S_SORT_DESCENDING')\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\treturn table.DataTable(options);\n\t},\n\t/**\n\t * Function to get the select2 element from the raw select element\n\t * @params: select element\n\t * @return : select2Element - corresponding select2 element\n\t */\n\tgetSelect2ElementFromSelect: function(selectElement) {\n\t\tvar selectId = selectElement.attr('id');\n\t\t//since select2 will add s2id_ to the id of select element\n\t\tvar select2EleId = 'select2-' + selectId + '-container';\n\t\treturn $('#' + select2EleId).closest('.select2-container');\n\t},\n\t/**\n\t * Function to set with of the element to parent width\n\t * @params : jQuery element for which the action to take place\n\t */\n\tsetInheritWidth: function(elements) {\n\t\t$(elements).each(function(index, element) {\n\t\t\tvar parentWidth = $(element)\n\t\t\t\t.parent()\n\t\t\t\t.width();\n\t\t\t$(element).width(parentWidth);\n\t\t});\n\t},\n\tshowNewScrollbar: function(element, options = { wheelPropagation: true }) {\n\t\tif (typeof element === 'undefined' || !element.length) return;\n\t\treturn new PerfectScrollbar(element[0], Object.assign(this.scrollOptions, options));\n\t},\n\tshowNewScrollbarTopBottomRight: function(element, options = {}) {\n\t\tif (typeof element === 'undefined' || !element.length) return;\n\t\toptions = Object.assign(this.scrollOptions, options);\n\t\tlet scrollbarTopLeftInit = new PerfectScrollbar(element[0], options);\n\t\tlet scrollbarTopElement = element.find('.ps__rail-x').first();\n\t\tscrollbarTopElement.css({\n\t\t\ttop: 0,\n\t\t\tbottom: 'auto'\n\t\t});\n\t\tscrollbarTopElement.find('.ps__thumb-x').css({\n\t\t\ttop: 2,\n\t\t\tbottom: 'auto'\n\t\t});\n\t\tlet scrollbarBottomRightInit = new PerfectScrollbar(element[0], options);\n\t\treturn [scrollbarTopLeftInit, scrollbarBottomRightInit];\n\t},\n\tshowNewScrollbarTopBottom: function(element, options = { wheelPropagation: true, suppressScrollY: true }) {\n\t\tif (typeof element === 'undefined' || !element.length) return;\n\t\toptions = Object.assign(this.scrollOptions, options);\n\t\tnew PerfectScrollbar(element[0], options);\n\t\tnew PerfectScrollbar(element[0], options);\n\t\tvar scrollbarTopElement = element.find('.ps__rail-x').first();\n\t\tscrollbarTopElement.css({\n\t\t\ttop: 0,\n\t\t\tbottom: 'auto'\n\t\t});\n\t\tscrollbarTopElement.find('.ps__thumb-x').css({\n\t\t\ttop: 2,\n\t\t\tbottom: 'auto'\n\t\t});\n\t},\n\tshowNewScrollbarTop: function(element, options = { wheelPropagation: true, suppressScrollY: true }) {\n\t\tif (typeof element === 'undefined' || !element.length) return;\n\t\toptions = Object.assign(this.scrollOptions, options);\n\t\tnew PerfectScrollbar(element[0], options);\n\t\tvar scrollbarTopElement = element.find('.ps__rail-x').first();\n\t\tscrollbarTopElement.css({\n\t\t\ttop: 0,\n\t\t\tbottom: 'auto'\n\t\t});\n\t\tscrollbarTopElement.find('.ps__thumb-x').css({\n\t\t\ttop: 2,\n\t\t\tbottom: 'auto'\n\t\t});\n\t},\n\tshowNewScrollbarLeft: function(element, options = { wheelPropagation: true }) {\n\t\tif (typeof element === 'undefined' || !element.length) return;\n\t\toptions = Object.assign(this.scrollOptions, options);\n\t\tnew PerfectScrollbar(element[0], options);\n\t\tvar scrollbarLeftElement = element.children('.ps__rail-y').first();\n\t\tscrollbarLeftElement.css({\n\t\t\tleft: 0,\n\t\t\tright: 'auto'\n\t\t});\n\t\tscrollbarLeftElement.find('.ps__thumb-y').css({\n\t\t\tleft: 2,\n\t\t\tright: 'auto'\n\t\t});\n\t},\n\tshowScrollBar: function(element, options = {}) {\n\t\tif (typeof options.height === 'undefined') options.height = element.css('height');\n\t\treturn element.slimScroll(options);\n\t},\n\t/**\n\t * Register middle scroll hack for scrollbar libraries\n\t * @param {jQuery} container\n\t */\n\tregisterMiddleClickScroll(container) {\n\t\tlet middleScroll = false;\n\t\tcontainer.on('mousedown', e => {\n\t\t\tlet clickedMouseButton = e.which; // get clicked button id\n\t\t\tif (clickedMouseButton == 2 && middleScroll == false) {\n\t\t\t\tmiddleScroll = true;\n\t\t\t\tlet mouseY = e.pageY,\n\t\t\t\t\tmouseX = e.pageX;\n\t\t\t\t$(document).on('mousemove', e => {\n\t\t\t\t\tif (middleScroll == true) {\n\t\t\t\t\t\t$('body').addClass('u-cursor-scroll-all');\n\t\t\t\t\t\tlet mouseMoveY = mouseY - e.pageY,\n\t\t\t\t\t\t\tscrollSlowerRate = 100, // higher number = slower scroll\n\t\t\t\t\t\t\tcontentScrollY = container.scrollTop(),\n\t\t\t\t\t\t\tscrollerY = contentScrollY - mouseMoveY - scrollSlowerRate,\n\t\t\t\t\t\t\tmouseMoveX = mouseX - e.pageX,\n\t\t\t\t\t\t\tcontentScrollX = container.scrollLeft(),\n\t\t\t\t\t\t\tscrollerX = contentScrollX - mouseMoveX - scrollSlowerRate;\n\t\t\t\t\t\tcontainer.scrollTop(scrollerY);\n\t\t\t\t\t\tcontainer.scrollLeft(scrollerX);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\tcontainer.on('mouseup', () => {\n\t\t\t$('body').removeClass('u-cursor-scroll-all');\n\t\t\tmiddleScroll = false;\n\t\t});\n\t},\n\t/**\n\t * Function returns translated string\n\t */\n\tvtranslate: function(key) {\n\t\tif (key in LANG) {\n\t\t\treturn LANG[key];\n\t\t}\n\t\treturn key;\n\t},\n\t/*\n\t * Cache API on client-side\n\t */\n\tcacheNSKey: function(key) {\n\t\t// Namespace in client-storage\n\t\treturn 'yf.' + key;\n\t},\n\tcacheGet: function(key) {\n\t\tkey = this.cacheNSKey(key);\n\t\treturn store.get(key);\n\t},\n\tcacheSet: function(key, value) {\n\t\tkey = this.cacheNSKey(key);\n\t\tstore.set(key, value);\n\t},\n\tcacheClear: function(key) {\n\t\tkey = this.cacheNSKey(key);\n\t\treturn store.remove(key);\n\t},\n\tmoduleCacheSet: function(key, value) {\n\t\tvar orgKey = key;\n\t\tkey = this.getModuleName() + '_' + key;\n\t\tthis.cacheSet(key, value);\n\n\t\tvar cacheKey = 'mCache' + this.getModuleName();\n\t\tvar moduleCache = this.cacheGet(cacheKey);\n\t\tif (moduleCache == null) {\n\t\t\tmoduleCache = [];\n\t\t} else {\n\t\t\tmoduleCache = moduleCache.split(',');\n\t\t}\n\t\tmoduleCache.push(orgKey);\n\t\tthis.cacheSet(cacheKey, Vtiger_Helper_Js.unique(moduleCache).join(','));\n\t},\n\tmoduleCacheGet: function(key) {\n\t\treturn this.cacheGet(this.getModuleName() + '_' + key);\n\t},\n\tmoduleCacheKeys: function() {\n\t\tvar cacheKey = 'mCache' + this.getModuleName();\n\t\tvar modules = this.cacheGet(cacheKey);\n\t\tif (modules) {\n\t\t\treturn modules.split(',');\n\t\t}\n\t\treturn [];\n\t},\n\tmoduleCacheClear: function(key) {\n\t\tvar thisInstance = this;\n\t\tvar moduleName = this.getModuleName();\n\t\tvar cacheKey = 'mCache' + moduleName;\n\t\tvar moduleCache = this.cacheGet(cacheKey);\n\t\tif (moduleCache == null) {\n\t\t\tmoduleCache = [];\n\t\t} else {\n\t\t\tmoduleCache = moduleCache.split(',');\n\t\t}\n\t\t$.each(moduleCache, function(index, value) {\n\t\t\tthisInstance.cacheClear(moduleName + '_' + value);\n\t\t});\n\t\tthisInstance.cacheClear(cacheKey);\n\t},\n\thtmlEncode: function(value) {\n\t\tif (value) {\n\t\t\treturn $('<div />')\n\t\t\t\t.text(value)\n\t\t\t\t.html();\n\t\t} else {\n\t\t\treturn '';\n\t\t}\n\t},\n\thtmlDecode: function(value) {\n\t\tif (value) {\n\t\t\treturn $('<div />')\n\t\t\t\t.html(value)\n\t\t\t\t.text();\n\t\t} else {\n\t\t\treturn '';\n\t\t}\n\t},\n\t/**\n\t * Function places an element at the center of the page\n\t * @param <jQuery Element> element\n\t */\n\tplaceAtCenter: function(element) {\n\t\telement.css('position', 'absolute');\n\t\telement.css('top', ($(window).height() - element.outerHeight()) / 2 + $(window).scrollTop() + 'px');\n\t\telement.css('left', ($(window).width() - element.outerWidth()) / 2 + $(window).scrollLeft() + 'px');\n\t},\n\tgetvalidationEngineOptions: function(select2Status) {\n\t\treturn Object.assign({}, app.validationEngineOptions);\n\t},\n\t/**\n\t * Function to notify UI page ready after AJAX changes.\n\t * This can help in re-registering the event handlers (which was done during ready event).\n\t */\n\tnotifyPostAjaxReady: function() {\n\t\t$(document).trigger('postajaxready');\n\t},\n\t/**\n\t * Listen to xready notiications.\n\t */\n\tlistenPostAjaxReady: function(callback) {\n\t\t$(document).on('postajaxready', callback);\n\t},\n\t/**\n\t * Form function handlers\n\t */\n\tsetFormValues: function(kv) {\n\t\tfor (var k in kv) {\n\t\t\t$(k).val(kv[k]);\n\t\t}\n\t},\n\tsetRTEValues: function(kv) {\n\t\tfor (var k in kv) {\n\t\t\tvar rte = CKEDITOR.instances[k];\n\t\t\tif (rte) rte.setData(kv[k]);\n\t\t}\n\t},\n\t/**\n\t * Function returns the javascript controller based on the current view\n\t */\n\tgetPageController: function() {\n\t\tif (window.pageController) {\n\t\t\treturn window.pageController;\n\t\t}\n\t\tconst moduleName = app.getModuleName();\n\t\tconst view = app.getViewName();\n\t\tconst parentModule = app.getParentModuleName();\n\t\tlet moduleClassName = parentModule + '_' + moduleName + '_' + view + '_Js';\n\t\tif (typeof window[moduleClassName] === 'undefined') {\n\t\t\tmoduleClassName = parentModule + '_Vtiger_' + view + '_Js';\n\t\t}\n\t\tif (typeof window[moduleClassName] === 'undefined') {\n\t\t\tmoduleClassName = moduleName + '_' + view + '_Js';\n\t\t}\n\t\tvar extendModules = $('#extendModules').val();\n\t\tif (typeof window[moduleClassName] === 'undefined' && extendModules != undefined) {\n\t\t\tmoduleClassName = extendModules + '_' + view + '_Js';\n\t\t}\n\t\tif (typeof window[moduleClassName] === 'undefined') {\n\t\t\tmoduleClassName = 'Vtiger_' + view + '_Js';\n\t\t}\n\t\tif (typeof window[moduleClassName] !== 'undefined') {\n\t\t\tif (typeof window[moduleClassName] === 'function') {\n\t\t\t\treturn (window.pageController = new window[moduleClassName]());\n\t\t\t}\n\t\t\tif (typeof window[moduleClassName] === 'object') {\n\t\t\t\treturn (window.pageController = window[moduleClassName]);\n\t\t\t}\n\t\t}\n\t\tlet moduleBaseClassName = parentModule + '_' + moduleName + '_' + 'Index_Js';\n\t\tif (typeof window[moduleBaseClassName] !== 'undefined') {\n\t\t\tif (typeof window[moduleBaseClassName] === 'function') {\n\t\t\t\treturn (window.pageController = new window[moduleBaseClassName]());\n\t\t\t}\n\t\t\tif (typeof window[moduleBaseClassName] === 'object') {\n\t\t\t\treturn (window.pageController = window[moduleBaseClassName]);\n\t\t\t}\n\t\t}\n\t},\n\t/**\n\t * Function to decode the encoded htmlentities values\n\t */\n\tgetDecodedValue: function(value) {\n\t\treturn $('<div></div>')\n\t\t\t.html(value)\n\t\t\t.text();\n\t},\n\tgetCookie: function(c_name) {\n\t\tvar c_value = document.cookie;\n\t\tvar c_start = c_value.indexOf(' ' + c_name + '=');\n\t\tif (c_start === -1) {\n\t\t\tc_start = c_value.indexOf(c_name + '=');\n\t\t}\n\t\tif (c_start === -1) {\n\t\t\tc_value = null;\n\t\t} else {\n\t\t\tc_start = c_value.indexOf('=', c_start) + 1;\n\t\t\tvar c_end = c_value.indexOf(';', c_start);\n\t\t\tif (c_end === -1) {\n\t\t\t\tc_end = c_value.length;\n\t\t\t}\n\t\t\tc_value = unescape(c_value.substring(c_start, c_end));\n\t\t}\n\t\treturn c_value;\n\t},\n\tsetCookie: function(c_name, value, exdays) {\n\t\tvar exdate = new Date();\n\t\texdate.setDate(exdate.getDate() + exdays);\n\t\tvar c_value = escape(value) + (exdays == null ? '' : '; expires=' + exdate.toUTCString());\n\t\tdocument.cookie = c_name + '=' + c_value;\n\t},\n\tgetUrlVar: function(varName) {\n\t\tvar getVar = function() {\n\t\t\tvar vars = {};\n\t\t\twindow.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m, key, value) {\n\t\t\t\tvars[key] = value;\n\t\t\t});\n\t\t\treturn vars;\n\t\t};\n\n\t\treturn getVar()[varName];\n\t},\n\tgetStringDate: function(date) {\n\t\tvar d = date.getDate();\n\t\tvar m = date.getMonth() + 1;\n\t\tvar y = date.getFullYear();\n\n\t\td = d <= 9 ? '0' + d : d;\n\t\tm = m <= 9 ? '0' + m : m;\n\t\treturn y + '-' + m + '-' + d;\n\t},\n\tformatDate: function(date) {\n\t\tvar y = date.getFullYear(),\n\t\t\tm = date.getMonth() + 1,\n\t\t\td = date.getDate(),\n\t\t\th = date.getHours(),\n\t\t\ti = date.getMinutes(),\n\t\t\ts = date.getSeconds();\n\t\treturn (\n\t\t\ty +\n\t\t\t'-' +\n\t\t\tthis.formatDateZ(m) +\n\t\t\t'-' +\n\t\t\tthis.formatDateZ(d) +\n\t\t\t' ' +\n\t\t\tthis.formatDateZ(h) +\n\t\t\t':' +\n\t\t\tthis.formatDateZ(i) +\n\t\t\t':' +\n\t\t\tthis.formatDateZ(s)\n\t\t);\n\t},\n\tformatDateZ: function(i) {\n\t\treturn i <= 9 ? '0' + i : i;\n\t},\n\thowManyDaysFromDate: function(time) {\n\t\tvar fromTime = time.getTime();\n\t\tvar today = new Date();\n\t\tvar toTime = new Date(today.getFullYear(), today.getMonth(), today.getDate()).getTime();\n\t\treturn Math.floor((toTime - fromTime) / (1000 * 60 * 60 * 24)) + 1;\n\t},\n\tsaveAjax: function(mode, param, addToParams) {\n\t\tvar aDeferred = $.Deferred();\n\t\tvar params = {};\n\t\tparams['module'] = app.getModuleName();\n\t\tparams['parent'] = app.getParentModuleName();\n\t\tparams['action'] = 'SaveAjax';\n\t\tif (mode) {\n\t\t\tparams['mode'] = mode;\n\t\t}\n\t\tparams['param'] = param;\n\t\tif (addToParams != undefined) {\n\t\t\tfor (var i in addToParams) {\n\t\t\t\tparams[i] = addToParams[i];\n\t\t\t}\n\t\t}\n\t\tAppConnector.request(params)\n\t\t\t.done(function(data) {\n\t\t\t\taDeferred.resolve(data);\n\t\t\t})\n\t\t\t.fail(function(textStatus, errorThrown) {\n\t\t\t\taDeferred.reject(textStatus, errorThrown);\n\t\t\t});\n\t\treturn aDeferred.promise();\n\t},\n\t/**\n\t * Hack for Safari breaking down, when sending empty file input\n\t * @param html\n\t */\n\tremoveEmptyFilesInput(form) {\n\t\tfor (let i = 0; i < form.elements.length; i++) {\n\t\t\tif (form.elements[i].type === 'file') {\n\t\t\t\tif (form.elements[i].value === '') {\n\t\t\t\t\tform.elements[i].parentNode.removeChild(form.elements[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tgetMainParams: function(param, json) {\n\t\tif (param in CONFIG) {\n\t\t\treturn CONFIG[param];\n\t\t}\n\t\tif (app.cacheParams[param] === undefined) {\n\t\t\tapp.cacheParams[param] = $('#' + param).val();\n\t\t}\n\t\tlet value = app.cacheParams[param];\n\t\tif (json) {\n\t\t\tif (value) {\n\t\t\t\tvalue = JSON.parse(value);\n\t\t\t} else {\n\t\t\t\tvalue = [];\n\t\t\t}\n\t\t}\n\t\treturn value;\n\t},\n\tsetMainParams: function(param, value) {\n\t\tapp.cacheParams[param] = value;\n\t\t$('#' + param).val(value);\n\t},\n\terrorLog: function(error, err, errorThrown) {\n\t\tif (!CONFIG.debug) {\n\t\t\treturn;\n\t\t}\n\t\tconsole.warn(\n\t\t\t'%cYetiForce debug mode!!!',\n\t\t\t'color: red; font-family: sans-serif; font-size: 1.5em; font-weight: bolder; text-shadow: #000 1px 1px;'\n\t\t);\n\t\tif (typeof error === 'object' && error.responseText) {\n\t\t\terror = error.responseText;\n\t\t}\n\t\tif (typeof error === 'object' && error.statusText) {\n\t\t\terror = error.statusText;\n\t\t}\n\t\tif (error) {\n\t\t\tconsole.error(error);\n\t\t}\n\t\tif (err && err !== 'error') {\n\t\t\tconsole.error(err);\n\t\t}\n\t\tif (errorThrown) {\n\t\t\tconsole.error(errorThrown);\n\t\t}\n\t},\n\tregisterQuickEditModal: function(container) {\n\t\tif (typeof container === 'undefined') {\n\t\t\tcontainer = $('body');\n\t\t}\n\t\tcontainer.on('click', '.js-quick-edit-modal', function(e) {\n\t\t\te.preventDefault();\n\t\t\tlet element = $(this);\n\t\t\tlet data = {\n\t\t\t\tmodule: element.data('module'),\n\t\t\t\trecord: element.data('record')\n\t\t\t};\n\t\t\tif (element.data('values')) {\n\t\t\t\t$.extend(data, element.data('values'));\n\t\t\t}\n\t\t\tif (element.data('mandatoryFields')) {\n\t\t\t\tdata.mandatoryFields = element.data('mandatoryFields');\n\t\t\t}\n\t\t\tif (element.data('showLayout')) {\n\t\t\t\tdata.showLayout = element.data('showLayout');\n\t\t\t}\n\t\t\tif (element.data('editFields')) {\n\t\t\t\tdata.editFields = element.data('editFields');\n\t\t\t}\n\t\t\tApp.Components.QuickEdit.showModal(data);\n\t\t});\n\t},\n\tregisterModal: function(container) {\n\t\tif (typeof container === 'undefined') {\n\t\t\tcontainer = $('body');\n\t\t}\n\t\tcontainer\n\t\t\t.off('click', 'button.showModal, a.showModal, .js-show-modal')\n\t\t\t.on('click', 'button.showModal, a.showModal, .js-show-modal', function(e) {\n\t\t\t\te.preventDefault();\n\t\t\t\tvar currentElement = $(e.currentTarget);\n\t\t\t\tvar url = currentElement.data('url');\n\n\t\t\t\tif (typeof url !== 'undefined') {\n\t\t\t\t\tif (currentElement.hasClass('js-popover-tooltip')) {\n\t\t\t\t\t\tcurrentElement.popover('hide');\n\t\t\t\t\t}\n\t\t\t\t\tif (currentElement.hasClass('disabledOnClick')) {\n\t\t\t\t\t\tcurrentElement.attr('disabled', true);\n\t\t\t\t\t}\n\t\t\t\t\tvar modalWindowParams = {\n\t\t\t\t\t\turl: url,\n\t\t\t\t\t\tcb: function(container) {\n\t\t\t\t\t\t\tvar call = currentElement.data('cb');\n\t\t\t\t\t\t\tif (typeof call !== 'undefined') {\n\t\t\t\t\t\t\t\tif (call.indexOf('.') !== -1) {\n\t\t\t\t\t\t\t\t\tvar callerArray = call.split('.');\n\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\ttypeof window[callerArray[0]] === 'object' ||\n\t\t\t\t\t\t\t\t\t\ttypeof window[callerArray[0]] === 'function'\n\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\twindow[callerArray[0]][callerArray[1]](container);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tif (typeof window[call] === 'function') {\n\t\t\t\t\t\t\t\t\t\twindow[call](container);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcurrentElement.removeAttr('disabled');\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\tif (currentElement.data('modalid')) {\n\t\t\t\t\t\tmodalWindowParams['id'] = currentElement.data('modalid');\n\t\t\t\t\t}\n\t\t\t\t\tapp.showModalWindow(modalWindowParams);\n\t\t\t\t}\n\t\t\t\te.stopPropagation();\n\t\t\t});\n\t},\n\tplaySound: function(action) {\n\t\tvar soundsConfig = app.getMainParams('sounds');\n\t\tif (soundsConfig['IS_ENABLED']) {\n\t\t\tvar audio = new Audio(app.getMainParams('soundFilesPath') + soundsConfig[action]);\n\t\t\taudio.play();\n\t\t}\n\t},\n\tregisterIframeAndMoreContent() {\n\t\tlet showMoreModal = e => {\n\t\t\te.preventDefault();\n\t\t\te.stopPropagation();\n\t\t\tconst btn = $(e.currentTarget);\n\t\t\tconst message = btn.data('iframe')\n\t\t\t\t? btn\n\t\t\t\t\t\t.siblings('iframe')\n\t\t\t\t\t\t.clone()\n\t\t\t\t\t\t.show()\n\t\t\t\t: btn\n\t\t\t\t\t\t.closest('.js-more-content')\n\t\t\t\t\t\t.find('.fullContent')\n\t\t\t\t\t\t.html();\n\t\t\tbootbox.dialog({\n\t\t\t\tmessage,\n\t\t\t\ttitle: '<span class=\"mdi mdi-overscan\"></span>  ' + app.vtranslate('JS_FULL_TEXT'),\n\t\t\t\tclassName: 'u-word-break modal-fullscreen',\n\t\t\t\tbuttons: {\n\t\t\t\t\tdanger: {\n\t\t\t\t\t\tlabel: '<span class=\"fas fa-times mr-1\"></span>' + app.vtranslate('JS_CLOSE'),\n\t\t\t\t\t\tclassName: 'btn-danger',\n\t\t\t\t\t\tcallback: function() {}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\t\t$('.js-more').on('click', showMoreModal);\n\t\t$(document).on('click', '.js-more', showMoreModal);\n\t},\n\tregisterIframeEvents(content) {\n\t\tcontent.find('.js-iframe-full-height').each(function() {\n\t\t\tlet iframe = $(this);\n\t\t\tiframe.on('load', e => {\n\t\t\t\tiframe.height(\n\t\t\t\t\tiframe\n\t\t\t\t\t\t.contents()\n\t\t\t\t\t\t.find('body')\n\t\t\t\t\t\t.height() + 50\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t\tcontent.find('.js-modal-iframe').each(function() {\n\t\t\tlet iframe = $(this);\n\t\t\tiframe.on('load', e => {\n\t\t\t\tlet height = iframe\n\t\t\t\t\t.contents()\n\t\t\t\t\t.find('body')\n\t\t\t\t\t.height();\n\t\t\t\tif (height && height < iframe.height()) {\n\t\t\t\t\tiframe.height(height + 50);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\tregisterMenu: function() {\n\t\tconst self = this;\n\t\tself.keyboard = { DOWN: 40, ESCAPE: 27, LEFT: 37, RIGHT: 39, SPACE: 32, UP: 38 };\n\t\tself.sidebarBtn = $('.js-sidebar-btn').first();\n\t\tself.sidebar = $('.js-sidebar').first();\n\t\tself.sidebarBtn.on('click', self.toggleSidebar.bind(self));\n\t\t$(`a.nav-link,[tabindex],input,select,textarea,button`).on('focus', e => {\n\t\t\tif (self.sidebarBtn[0] == e.target || self.sidebar.find(e.target).length) return;\n\t\t\tif (self.sidebar.find(':focus').length) {\n\t\t\t\tself.openSidebar();\n\t\t\t} else if (self.sidebar.hasClass('js-expand')) {\n\t\t\t\tself.closeSidebar();\n\t\t\t}\n\t\t});\n\t\tself.sidebar.on('mouseenter', self.openSidebar.bind(self)).on('mouseleave', self.closeSidebar.bind(self));\n\t\tself.sidebar.find('.js-menu__content').on('keydown', self.sidebarKeyboard.bind(self));\n\t\tself.sidebar.on('keydown', e => {\n\t\t\tif (e.which == self.keyboard.ESCAPE) {\n\t\t\t\tself.closeSidebar();\n\t\t\t\tif (self.sidebarBtn.is(':tabbable')) self.sidebarBtn.focus();\n\t\t\t\telse\n\t\t\t\t\t$(':tabbable')\n\t\t\t\t\t\t.eq(parseInt($(':tabbable').index(self.sidebar.find(':tabbable').last())) + 1)\n\t\t\t\t\t\t.focus();\n\t\t\t}\n\t\t});\n\t\tself.sidebar.find('.js-submenu').on('shown.bs.collapse', e => {\n\t\t\t$(e.target)\n\t\t\t\t.find(':tabbable')\n\t\t\t\t.first()\n\t\t\t\t.focus();\n\t\t});\n\t\t$('.js-submenu-toggler').on('click', e => {\n\t\t\tif (!$(e.currentTarget).hasClass('collapsed') && !$(e.target).closest('.toggler').length) {\n\t\t\t\twindow.location = $(e.currentTarget).attr('href');\n\t\t\t}\n\t\t});\n\t\tself.registerPinEvent();\n\t},\n\topenSidebar: function() {\n\t\tthis.sidebar.addClass('js-expand');\n\t\tthis.sidebarBtn.attr('aria-expanded', true);\n\t},\n\tcloseSidebar: function() {\n\t\tthis.sidebar.removeClass('js-expand');\n\t\tthis.sidebarBtn.attr('aria-expanded', false);\n\t},\n\ttoggleSidebar: function() {\n\t\tif (this.sidebar.hasClass('js-expand')) {\n\t\t\tthis.closeSidebar();\n\t\t} else {\n\t\t\tthis.openSidebar();\n\t\t\tthis.sidebar\n\t\t\t\t.find('.js-menu__content :tabbable')\n\t\t\t\t.first()\n\t\t\t\t.focus();\n\t\t}\n\t},\n\tregisterPinEvent: function() {\n\t\tconst self = this;\n\t\tlet pinButton = self.sidebar.find('.js-menu--pin');\n\t\tlet baseContainer = self.sidebar.closest('.js-base-container');\n\t\tpinButton.on('click', () => {\n\t\t\tlet hideMenu = 0;\n\t\t\tbaseContainer.removeClass('c-menu--animation');\n\t\t\tif (pinButton.attr('data-show') === '0') {\n\t\t\t\thideMenu = 'on';\n\t\t\t\tpinButton.removeClass('u-opacity-muted');\n\t\t\t\tbaseContainer.addClass('c-menu--open');\n\t\t\t\tself.sidebar.off('mouseleave mouseenter');\n\t\t\t} else {\n\t\t\t\tpinButton.addClass('u-opacity-muted');\n\t\t\t\tbaseContainer.removeClass('c-menu--open');\n\t\t\t\tself.sidebar\n\t\t\t\t\t.on('mouseenter', self.openSidebar.bind(self))\n\t\t\t\t\t.on('mouseleave', self.closeSidebar.bind(self));\n\t\t\t\tself.closeSidebar.bind(self);\n\t\t\t}\n\t\t\tAppConnector.request({\n\t\t\t\tmodule: 'Users',\n\t\t\t\taction: 'SaveAjax',\n\t\t\t\tfield: 'leftpanelhide',\n\t\t\t\trecord: CONFIG.userId,\n\t\t\t\tvalue: hideMenu\n\t\t\t}).done(function(responseData) {\n\t\t\t\tif (responseData.success && responseData.result) {\n\t\t\t\t\tpinButton.attr('data-show', hideMenu);\n\t\t\t\t}\n\t\t\t});\n\t\t\tsetTimeout(() => {\n\t\t\t\tbaseContainer.addClass('c-menu--animation');\n\t\t\t}, 300);\n\t\t});\n\t},\n\tsidebarKeyboard: function(e) {\n\t\tlet target = $(e.target);\n\t\tif (e.which == this.keyboard.LEFT) {\n\t\t\tif (target.hasClass('js-submenu-toggler') && !target.hasClass('collapsed')) {\n\t\t\t\ttarget.click();\n\t\t\t\treturn false;\n\t\t\t} else {\n\t\t\t\tlet toggler = $(e.target)\n\t\t\t\t\t.closest('.js-submenu')\n\t\t\t\t\t.prev('.js-submenu-toggler');\n\t\t\t\tif (toggler.length && !toggler.hasClass('collapsed')) {\n\t\t\t\t\ttoggler.click().focus();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (\n\t\t\t(target.hasClass('js-submenu-toggler') && e.which == this.keyboard.RIGHT && target.hasClass('collapsed')) ||\n\t\t\t(target.hasClass('js-submenu-toggler') && e.which == this.keyboard.SPACE)\n\t\t) {\n\t\t\ttarget.click();\n\t\t\treturn false;\n\t\t} else if (e.which == this.keyboard.UP) {\n\t\t\tthis.sidebar\n\t\t\t\t.find('.js-menu__content :tabbable')\n\t\t\t\t.eq(parseInt(this.sidebar.find('.js-menu__content :tabbable').index(target)) - 1)\n\t\t\t\t.focus();\n\t\t\treturn false;\n\t\t} else if (e.which == this.keyboard.DOWN) {\n\t\t\tthis.sidebar\n\t\t\t\t.find('.js-menu__content :tabbable')\n\t\t\t\t.eq(parseInt(this.sidebar.find('.js-menu__content :tabbable').index(target)) + 1)\n\t\t\t\t.focus();\n\t\t\treturn false;\n\t\t}\n\t},\n\tregisterTabdrop: function() {\n\t\tlet tabs = $('.js-tabdrop');\n\t\tif (!tabs.length) return;\n\t\tlet tab = tabs.find('> li');\n\t\ttab.each(function() {\n\t\t\t$(this).removeClass('d-none');\n\t\t});\n\t\ttabs.tabdrop({\n\t\t\ttext: app.vtranslate('JS_MORE')\n\t\t});\n\t\t//change position to the last element (wcag keyboard navigation)\n\t\tlet dropdown = tabs.find('> li.dropdown');\n\t\tdropdown.appendTo(tabs);\n\t\t//fix for toggle button text not changing\n\t\ttab.on('click', function(e) {\n\t\t\tsetTimeout(function() {\n\t\t\t\t$(window).trigger('resize');\n\t\t\t}, 500);\n\t\t});\n\t\t$(window).trigger('resize');\n\t},\n\tgetScreenHeight: function(percantage) {\n\t\tif (typeof percantage === 'undefined') {\n\t\t\tpercantage = 100;\n\t\t}\n\t\treturn ($(window).height() * percantage) / 100;\n\t},\n\tclearBrowsingHistory: function() {\n\t\tAppConnector.request({\n\t\t\tmodule: 'Home',\n\t\t\taction: 'BrowsingHistory'\n\t\t}).done(function(response) {\n\t\t\t$('.historyList').html(\n\t\t\t\t`<a class=\"item dropdown-item\" href=\"#\" role=\"listitem\">${app.vtranslate('JS_NO_RECORDS')}</a>`\n\t\t\t);\n\t\t});\n\t},\n\t/**\n\t * Open url in top window\n\t * @param string url\n\t */\n\topenUrl(url) {\n\t\tif (CONFIG.openUrlTarget === 'parentIframe') {\n\t\t\twindow.parent.location.href = url;\n\t\t} else {\n\t\t\twindow.location.href = url;\n\t\t}\n\t},\n\topenUrlMethodPost(url, postData = {}, formAttr = {}) {\n\t\t$.extend(formAttr, {\n\t\t\tmethod: 'post',\n\t\t\taction: url,\n\t\t\tstyle: 'display:none;'\n\t\t});\n\t\tlet form = $('<form></form>', formAttr);\n\t\tif (typeof csrfMagicName !== 'undefined') {\n\t\t\tpostData[csrfMagicName] = csrfMagicToken;\n\t\t}\n\t\t$.each(postData, (index, value) => {\n\t\t\tlet input = $(document.createElement('input'));\n\t\t\tinput.attr('type', 'hidden');\n\t\t\tinput.attr('name', index);\n\t\t\tinput.val(value);\n\t\t\tform.append(input);\n\t\t});\n\t\t$('body').append(form);\n\t\tform.submit();\n\t\tform.remove();\n\t},\n\t/**\n\t * Convert url string to object\n\t *\n\t * @param   {string}  url  example: index.php?module=LayoutEditor&parent=Settings\n\t *\n\t * @return  {object}       urlObject\n\t */\n\tconvertUrlToObject(url) {\n\t\tlet urlObject = {};\n\t\turl.split('index.php?')[1]\n\t\t\t.split('&')\n\t\t\t.forEach(el => {\n\t\t\t\tif (el.includes('=')) {\n\t\t\t\t\tlet values = el.split('=');\n\t\t\t\t\turlObject[values[0]] = values[1];\n\t\t\t\t}\n\t\t\t});\n\t\treturn urlObject;\n\t},\n\t/**\n\t * Convert object to url string\n\t *\n\t * @param   {object}  urlData\n\t * @param   {string}  entryFile\n\t *\n\t * @return  {string}          url\n\t */\n\tconvertObjectToUrl(urlData = {}, entryFile = 'index.php?') {\n\t\tlet url = entryFile;\n\t\tObject.keys(urlData).forEach(key => {\n\t\t\tlet value = urlData[key];\n\t\t\tif (typeof value === 'object' || (typeof value === 'string' && value.startsWith('<'))) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\turl += key + '=' + value + '&';\n\t\t});\n\t\treturn url;\n\t},\n\tshowConfirmation: function(data, element) {\n\t\tvar params = {};\n\t\tif (data) {\n\t\t\tparams = $.extend(params, data);\n\t\t}\n\t\tif (element) {\n\t\t\telement = $(element);\n\t\t\tif (!params.title) {\n\t\t\t\tparams.title = element.html() + ' ' + (element.data('content') ? element.data('content') : '');\n\t\t\t}\n\t\t\tif (!params.message) {\n\t\t\t\tparams.message = element.data('confirm');\n\t\t\t}\n\t\t\tif (!params.url) {\n\t\t\t\tparams.url = element.data('url');\n\t\t\t}\n\t\t}\n\t\tVtiger_Helper_Js.showConfirmationBox(params).done(function() {\n\t\t\tif (params.type == 'href') {\n\t\t\t\tAppConnector.request(params.url).done(function(data) {\n\t\t\t\t\tapp.openUrl(data.result);\n\t\t\t\t});\n\t\t\t} else if (params.type == 'reloadTab') {\n\t\t\t\tAppConnector.request(params.url).done(function(data) {\n\t\t\t\t\tVtiger_Detail_Js.getInstance().reloadTabContent();\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t},\n\tformatToHourText: function(decTime, type = 'short', withSeconds = false, withMinutes = true) {\n\t\tconst short = type === 'short';\n\t\tconst hour = Math.floor(decTime);\n\t\tconst min = Math.floor((decTime - hour) * 60);\n\t\tconst sec = Math.round(((decTime - hour) * 60 - min) * 60);\n\t\tlet result = '';\n\t\tif (hour) {\n\t\t\tresult += short ? hour + app.vtranslate('JS_H') : `${hour} ` + app.vtranslate('JS_H_LONG');\n\t\t}\n\t\tif ((hour || min) && withMinutes) {\n\t\t\tresult += short ? ` ${min}` + app.vtranslate('JS_M') : ` ${min} ` + app.vtranslate('JS_M_LONG');\n\t\t}\n\t\tif (withSeconds !== false) {\n\t\t\tresult += short ? ` ${sec}` + app.vtranslate('JS_S') : ` ${sec} ` + app.vtranslate('JS_S_LONG');\n\t\t}\n\t\tif (!hour && !min && withSeconds === false && withMinutes) {\n\t\t\tresult += short ? '0' + app.vtranslate('JS_M') : '0 ' + app.vtranslate('JS_M_LONG');\n\t\t}\n\t\tif (!hour && !min && withSeconds === false && !withMinutes) {\n\t\t\tresult += short ? '0' + app.vtranslate('JS_H') : '0 ' + app.vtranslate('JS_H_LONG');\n\t\t}\n\t\treturn result.trim();\n\t},\n\tshowRecordsList: function(params = {}, cb, afterShowModal) {\n\t\tif (!params.view) {\n\t\t\tparams.view = 'RecordsList';\n\t\t}\n\t\tthis.showRecordsListModal(params).done(function(modal) {\n\t\t\tif (typeof afterShowModal === 'function') {\n\t\t\t\tafterShowModal(modal);\n\t\t\t}\n\t\t\tapp.registerModalController(false, modal, cb);\n\t\t});\n\t},\n\t/**\n\t * Show records list modal\n\t * @param {object} params\n\t * @returns {Promise}\n\t */\n\tshowRecordsListModal: function(params) {\n\t\tconst aDeferred = $.Deferred();\n\t\tAppConnector.request(params)\n\t\t\t.done(function(requestData) {\n\t\t\t\tapp.showModalWindow(requestData, function(modal) {\n\t\t\t\t\taDeferred.resolve(modal);\n\t\t\t\t});\n\t\t\t})\n\t\t\t.fail(function(textStatus, errorThrown) {\n\t\t\t\taDeferred.reject(textStatus, errorThrown);\n\t\t\t});\n\t\treturn aDeferred.promise();\n\t},\n\t/**\n\t * Convert html content to base64 image\n\t * This function can be used in promise chain or with callback if specified\n\t *\n\t * @param {HTMLElement} element\n\t * @param {function} callback with imageString argument which contains an image in base64 string format\n\t * @param {object} options see: https://html2canvas.hertzen.com/configuration , imageType is our custom option\n\t * @return {Promise} with base64 string image as argument\n\t */\n\thtmlToImage(element, callback, options = { imageType: 'image/png', logging: false }) {\n\t\telement = $(element).get(0); // make sure we have HTMLElement not jQuery because it will not work\n\t\tconst imageType = options.imageType;\n\t\tdelete options.imageType;\n\t\treturn html2canvas(element, options).then(canvas => {\n\t\t\tconst base64Image = canvas.toDataURL(imageType);\n\t\t\tif (typeof callback === 'function') {\n\t\t\t\tcallback(base64Image);\n\t\t\t}\n\t\t\treturn base64Image;\n\t\t});\n\t},\n\tdecodeHTML(html) {\n\t\tvar txt = document.createElement('textarea');\n\t\ttxt.innerHTML = html;\n\t\treturn txt.value;\n\t},\n\tshowAlert: function(customParams) {\n\t\tlet userParams = customParams;\n\t\tif (typeof customParams === 'string') {\n\t\t\tuserParams = {};\n\t\t\tuserParams.text = customParams;\n\t\t}\n\t\tlet params = {\n\t\t\ttarget: document.body,\n\t\t\tdata: {\n\t\t\t\ttype: 'error',\n\t\t\t\thide: false,\n\t\t\t\tstack: {\n\t\t\t\t\tdir1: 'down',\n\t\t\t\t\tmodal: true,\n\t\t\t\t\tfirstpos1: 25\n\t\t\t\t},\n\t\t\t\tmodules: {\n\t\t\t\t\tConfirm: {\n\t\t\t\t\t\tconfirm: true,\n\t\t\t\t\t\tbuttons: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext: 'Ok',\n\t\t\t\t\t\t\t\tpromptTrigger: true,\n\t\t\t\t\t\t\t\tprimary: true,\n\t\t\t\t\t\t\t\tclick: function(notice) {\n\t\t\t\t\t\t\t\t\tnotice.close();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t},\n\t\t\t\t\tButtons: {\n\t\t\t\t\t\tcloser: false,\n\t\t\t\t\t\tsticker: false\n\t\t\t\t\t},\n\t\t\t\t\tHistory: {\n\t\t\t\t\t\thistory: false\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tif (typeof userParams !== 'undefined') {\n\t\t\tparams.data = $.extend(params.data, userParams);\n\t\t}\n\t\treturn new PNotify(params);\n\t},\n\tshowConfirmModal: function(customParams, confirmCallback = () => {}, cancelCallback = () => {}) {\n\t\tlet aDeferred = $.Deferred();\n\n\t\tlet userParams = customParams;\n\t\tif (typeof customParams === 'string') {\n\t\t\tuserParams = {};\n\t\t\tuserParams.text = customParams;\n\t\t}\n\t\tlet params = {\n\t\t\ttarget: document.body,\n\t\t\tdata: {\n\t\t\t\thide: false,\n\t\t\t\ticon: 'fas fa-question-circle',\n\t\t\t\tstack: {\n\t\t\t\t\tdir1: 'down',\n\t\t\t\t\tmodal: true,\n\t\t\t\t\tfirstpos1: 25\n\t\t\t\t},\n\t\t\t\tmodules: {\n\t\t\t\t\tConfirm: {\n\t\t\t\t\t\tconfirm: true,\n\t\t\t\t\t\tbuttons: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext: app.vtranslate('JS_OK'),\n\t\t\t\t\t\t\t\tprimary: true,\n\t\t\t\t\t\t\t\tpromptTrigger: true,\n\t\t\t\t\t\t\t\tclick: function(notice) {\n\t\t\t\t\t\t\t\t\tnotice.close();\n\t\t\t\t\t\t\t\t\tconfirmCallback();\n\t\t\t\t\t\t\t\t\taDeferred.resolve(true);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext: app.vtranslate('JS_CANCEL'),\n\t\t\t\t\t\t\t\tclick: function(notice) {\n\t\t\t\t\t\t\t\t\tnotice.close();\n\t\t\t\t\t\t\t\t\tcancelCallback();\n\t\t\t\t\t\t\t\t\taDeferred.resolve(false);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t},\n\t\t\t\t\tButtons: {\n\t\t\t\t\t\tcloser: false,\n\t\t\t\t\t\tsticker: false\n\t\t\t\t\t},\n\t\t\t\t\tHistory: {\n\t\t\t\t\t\thistory: false\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tif (typeof userParams !== 'undefined') {\n\t\t\tparams.data = $.extend(params.data, userParams);\n\t\t}\n\t\tnew PNotify(params);\n\t\treturn aDeferred.promise();\n\t},\n\tregistesterScrollbar(container) {\n\t\tcontainer.find('.js-scrollbar').each(function() {\n\t\t\tlet element = $(this),\n\t\t\t\tscrollbarFnName = element.data('scrollbarFnName');\n\n\t\t\tif (typeof app[scrollbarFnName] === 'function') {\n\t\t\t\tapp[scrollbarFnName](element);\n\t\t\t} else {\n\t\t\t\tapp.showNewScrollbar(element);\n\t\t\t}\n\t\t});\n\t},\n\tregisterPopover(container = $(document)) {\n\t\twindow.popoverCache = {};\n\t\tcontainer.on('mousemove', e => {\n\t\t\tapp.mousePosition = { x: e.pageX, y: e.pageY };\n\t\t});\n\t\tcontainer.on(\n\t\t\t'mouseenter',\n\t\t\t'.js-popover-tooltip, .js-popover-tooltip--record, .js-popover-tooltip--ellipsis, [data-field-type=\"reference\"], [data-field-type=\"multireference\"]',\n\t\t\te => {\n\t\t\t\tlet currentTarget = $(e.currentTarget);\n\t\t\t\tif (currentTarget.find('.js-popover-tooltip--record').length) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (!currentTarget.hasClass('popover-triggered')) {\n\t\t\t\t\tif (currentTarget.hasClass('js-popover-tooltip--record')) {\n\t\t\t\t\t\tapp.registerPopoverRecord(currentTarget, {}, container);\n\t\t\t\t\t\tcurrentTarget.trigger('mouseenter');\n\t\t\t\t\t} else if (\n\t\t\t\t\t\t!currentTarget.hasClass('js-popover-tooltip--record') &&\n\t\t\t\t\t\tcurrentTarget.data('field-type')\n\t\t\t\t\t) {\n\t\t\t\t\t\tapp.registerPopoverRecord(currentTarget.children('a'), {}, container); //popoverRecord on children doesn't need triggering\n\t\t\t\t\t} else if (\n\t\t\t\t\t\t!currentTarget.hasClass('js-popover-tooltip--record') &&\n\t\t\t\t\t\t!currentTarget.find('.js-popover-tooltip--record').length &&\n\t\t\t\t\t\t!currentTarget.data('field-type')\n\t\t\t\t\t) {\n\t\t\t\t\t\tif (currentTarget.hasClass('js-popover-tooltip--ellipsis')) {\n\t\t\t\t\t\t\tapp.registerPopoverEllipsis({ element: currentTarget, container });\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tapp.showPopoverElementView(currentTarget);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcurrentTarget.trigger('mouseenter');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t},\n\tshowNotify: function(params) {\n\t\tif (typeof params.type === 'undefined') {\n\t\t\tparams.type = 'info';\n\t\t}\n\t\tif (typeof params.title === 'undefined') {\n\t\t\tparams.title = app.vtranslate('JS_MESSAGE');\n\t\t}\n\t\tVtiger_Helper_Js.showPnotify(params);\n\t},\n\tshowDesktopNotification: function(params) {\n\t\tparams = $.extend(params, {\n\t\t\tmodules: {\n\t\t\t\tDesktop: {\n\t\t\t\t\tdesktop: true,\n\t\t\t\t\tfallback: false,\n\t\t\t\t\ticon: params.icon\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tPNotify.notice(params);\n\t},\n\t/**\n\t * Set Pnotify defaults options\n\t */\n\tsetPnotifyDefaultOptions() {\n\t\tPNotify.defaults.textTrusted = true; // *Trusted option enables html as parameter's value\n\t\tPNotify.defaults.titleTrusted = true;\n\t\tPNotify.defaults.styling = 'bootstrap4';\n\t\tPNotify.defaults.icons = 'fontawesome5';\n\t},\n\t/**\n\t * Register auto format number value\n\t */\n\tregisterFormatNumber() {\n\t\t$(document).on('focusout', '.js-format-numer', e => {\n\t\t\t$(e.currentTarget).formatNumber();\n\t\t});\n\t},\n\t/**\n\t * Register toggle icon click event\n\t * @param container\n\t */\n\tregisterToggleIconClick(container) {\n\t\tcontainer.on('click', '.js-toggle-icon, .js-toggle-icon__container', e => {\n\t\t\tlet icon = $(e.target);\n\t\t\tif (icon.hasClass('js-toggle-icon__container')) {\n\t\t\t\ticon = icon.find('.js-toggle-icon');\n\t\t\t}\n\t\t\tlet iconData = icon.data();\n\t\t\ticon.toggleClass(`${iconData.active} ${iconData.inactive}`);\n\t\t\te.stopPropagation();\n\t\t});\n\t},\n\tstripHtml(html) {\n\t\tconst temporalDiv = document.createElement('div');\n\t\ttemporalDiv.innerHTML = html;\n\t\treturn temporalDiv.textContent || temporalDiv.innerText || '';\n\t}\n});\nCKEDITOR.disableAutoInline = true;\n$(document).ready(function() {\n\tQuasar.iconSet.set(Quasar.iconSet.mdiV3);\n\tlet document = $(this);\n\tapp.registerToggleIconClick(document);\n\tapp.touchDevice = app.isTouchDevice();\n\tapp.setPnotifyDefaultOptions();\n\tApp.Fields.Picklist.changeSelectElementView();\n\tapp.registerPopoverEllipsisIcon();\n\tapp.registerPopover();\n\tapp.registerFormatNumber();\n\tapp.registerIframeAndMoreContent();\n\tapp.registerModal();\n\tapp.registerQuickEditModal();\n\tapp.registerMenu();\n\tapp.registerTabdrop();\n\tapp.registerIframeEvents(document);\n\tapp.registesterScrollbar(document);\n\tApp.Components.Scrollbar.initPage();\n\tString.prototype.toCamelCase = function() {\n\t\tlet value = this.valueOf();\n\t\treturn value.charAt(0).toUpperCase() + value.slice(1).toLowerCase();\n\t};\n\t// in IE resize option for textarea is not there, so we have to use .resizable() api\n\tif (/MSIE/.test(navigator.userAgent) || /Trident/.test(navigator.userAgent)) {\n\t\t$('textarea').resizable();\n\t}\n\t// Instantiate Page Controller\n\tlet pageController = app.getPageController();\n\tif (pageController) {\n\t\tpageController.registerEvents();\n\t}\n});\n(function($) {\n\t$.fn.getNumberFromValue = function() {\n\t\treturn App.Fields.Double.formatToDb($(this).val());\n\t};\n\t$.fn.getNumberFromText = function() {\n\t\treturn App.Fields.Double.formatToDb($(this).text());\n\t};\n\t$.fn.setValue = function(value, type = 'value') {\n\t\treturn App.Fields.Utils.setValue($(this), value, type);\n\t};\n\t$.fn.formatNumber = function() {\n\t\tlet element = $(this);\n\t\telement.val(App.Fields.Double.formatToDisplay(App.Fields.Double.formatToDb(element.val()), false));\n\t};\n\t$.fn.disable = function() {\n\t\tthis.attr('disabled', 'disabled');\n\t};\n\t$.fn.enable = function() {\n\t\tthis.removeAttr('disabled');\n\t};\n\t$.fn.serializeFormData = function() {\n\t\tlet form = $(this);\n\t\tfor (var instance in CKEDITOR.instances) {\n\t\t\tCKEDITOR.instances[instance].updateElement();\n\t\t}\n\t\tlet values = form.serializeArray();\n\t\tlet data = {};\n\t\tif (values) {\n\t\t\t$(values).each(function(k, v) {\n\t\t\t\tif (v.name in data && typeof data[v.name] !== 'object') {\n\t\t\t\t\tlet element = form.find('[name=\"' + v.name + '\"]');\n\t\t\t\t\t//Only for muti select element we need to send array of values\n\t\t\t\t\tif (element.is('select') && element.attr('multiple') != undefined) {\n\t\t\t\t\t\tlet prevValue = data[v.name];\n\t\t\t\t\t\tdata[v.name] = [];\n\t\t\t\t\t\tdata[v.name].push(prevValue);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (typeof data[v.name] === 'object') {\n\t\t\t\t\tdata[v.name].push(v.value);\n\t\t\t\t} else {\n\t\t\t\t\tdata[v.name] = v.value;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t// If data-type=\"autocomplete\", pickup data-value=\"...\" set\n\t\tlet autocompletes = $('[data-type=\"autocomplete\"]', $(this));\n\t\t$(autocompletes).each(function(i) {\n\t\t\tlet ac = $(autocompletes[i]);\n\t\t\tdata[ac.attr('name')] = ac.data('value');\n\t\t});\n\t\treturn data;\n\t};\n\t// Case-insensitive :icontains expression\n\t$.expr[':'].icontains = function(obj, index, meta, stack) {\n\t\treturn (\n\t\t\t(obj.textContent || obj.innerText || $(obj).text() || '').toLowerCase().indexOf(meta[3].toLowerCase()) !==\n\t\t\t-1\n\t\t);\n\t};\n\t$.fn.removeTextNode = function() {\n\t\t$(this)\n\t\t\t.contents()\n\t\t\t.filter(function() {\n\t\t\t\treturn this.nodeType == 3; //Node.TEXT_NODE\n\t\t\t})\n\t\t\t.remove();\n\t};\n\tbootbox.setLocale(CONFIG.langKey);\n})($);\n"],"names":["App","window","container","$","treeInstance","treeData","generateTree","this","on","e","data","undefined","event","target","hasClass","instance","select_node","node","children_d","deselect_node","jstree","getRecords","registerSearchEvent","self","searchTimeout","treeSearch","setTimeout","searchValue","val","search","JSON","parse","find","moduleName","params","CONFIG","modalTarget","url","callbackFunction","app","getViewName","getRecordId","getParentModuleName","getModuleName","progress","progressIndicator","blockInfo","enabled","getForm","done","showModal","registerEventForClockPicker","parent","Components","QuickCreate","createRecord","aDeferred","Deferred","requestParams","isCacheActive","noCache","moduleCache","resolve","promise","request","html","showModalWindow","quickCreateForm","moduleClassName","Vtiger_Edit_Js","getInstanceByModuleName","registerBasicEvents","registerEvents","validationEngine","validationEngineOptions","callbackPostShown","registerPostLoadEvents","registerHelpInfo","form","submitSuccessCallback","goToFullFormCallBack","goToFullFormcallback","currentTarget","InvalidFields","length","removeData","mode","preventDefault","recordPreSaveEvent","Event","recordPreSave","trigger","isDefaultPrevented","moduleInstance","saveHandler","quickCreateSave","_this3","save","vtranslate","modalContainer","closest","parentModuleName","viewName","hideModalWindow","id","Vtiger_List_Js","getListViewRecords","success","showPnotify","editViewUrl","goToFullForm","registerTabEvents","showPopoverElementView","remove","append","each","key","removeAttr","addClass","submit","tabElements","quickCreateTabOnHide","index","element","attr","not","filter","quickCreateSaveUrl","serializeFormData","textStatus","errorThrown","reject","quickEditSave","_this4","location","reload","scrollbarContainer","page","y","getElements","viewport","options","overlayScrollbars","mergedOptions","Object","assign","defaults","x","el","arguments","Array","prototype","slice","call","apply","one","off","getMainParams","recordId","view","inArray","action","message","fail","error","document","title","frames","childFrame","top","supportsTouch","navigator","msPointerEnabled","documentElement","appendTo","str","popover","popoverParent","manualTriggerDelay","currentPopover","_this5","getBindedPopover","is","hidePopoversAfterClick","clone","css","removeClass","width","selectElement","defaultParams","show","hide","domElement","elementParams","extend","template","delay","registerPopoverManualTrigger","callbackShown","setPopoverPosition","popoverText","isEllipsisActive","selector","customParams","link","URL","eq","origin","searchParams","get","href","replace","popoverBody","appendPopoverData","callback","cacheData","popoverCache","popoverElement","iframeOffset","computePopoverIframeOffset","windowHeight","height","windowWidth","popoverPadding","popoverHeight","popoverWidth","offsetTop","mousePosition","offsetLeft","left","iframeOffsetTop","iframeOffsetLeft","iframe","offset","contents","iframeOffset2","limit","maximumSelectionLength","isArray","updateResults","parentElement","returnFormat","encodedString","children","serialize","keyValueMap","valueList","split","keyValueArr","nameOfElement","valueOfElement","decodeURIComponent","modal","openAnimation","closeAnimation","paramsObject","cb","sendByAjaxCb","backdrop","keyboard","fn","Constructor","enforceFocus","proxy","Fields","Picklist","showSelect2ElementView","Date","register","Text","Editor","registesterScrollbar","registerModalEvents","registerDataTables","isCurrentWindowTarget","thisInstance","lastModalId","Math","random","toString","substr","modalId","Window","showModalData","response","sourceFunction","args","unshift","reduce","o","i","windowParent","modalClass","modalEvents","validationForm","formAlignmentAfterValidation","progressIndicatorElement","formData","responseData","result","notify","showMessage","procesStop","field","block","click","formError","resizedDestnation","animate","dateFormat","dotMode","indexOf","splitDateFormat","sectionDate","substring","join","dateString","dateFormatParts","day","month","year","dateParts","datepicker","autoclose","ev","currentElement","toUpperCase","date","formatDate","moment","format","Utils","hideMobileKeyboard","timeInputs","stopPropagation","tempElement","clockpicker","formatTimeString","twelvehour","meridiemTime","afterDone","timeString","timeInput","timeStringFormatted","beforeHide","text","formatTime","hourFormat","parseInt","table","dataTable","DataTable","selectId","elements","parentWidth","wheelPropagation","PerfectScrollbar","scrollOptions","scrollbarTopLeftInit","scrollbarTopElement","first","scrollbarBottomRightInit","suppressScrollY","scrollbarLeftElement","slimScroll","middleScroll","which","mouseY","pageY","mouseX","pageX","mouseMoveY","scrollerY","scrollTop","mouseMoveX","scrollerX","scrollLeft","LANG","cacheNSKey","store","value","set","orgKey","cacheSet","cacheKey","cacheGet","push","Vtiger_Helper_Js","unique","modules","cacheClear","outerHeight","outerWidth","select2Status","kv","k","rte","CKEDITOR","instances","setData","pageController","parentModule","extendModules","babelHelpers.typeof","moduleBaseClassName","c_name","c_value","cookie","c_start","c_end","unescape","exdays","exdate","setDate","getDate","escape","toUTCString","varName","vars","m","d","getMonth","getFullYear","h","getHours","getMinutes","s","getSeconds","formatDateZ","time","fromTime","getTime","today","toTime","floor","param","addToParams","type","parentNode","removeChild","json","cacheParams","err","debug","warn","responseText","statusText","mandatoryFields","showLayout","editFields","QuickEdit","modalWindowParams","callerArray","soundsConfig","Audio","play","showMoreModal","btn","siblings","dialog","content","DOWN","ESCAPE","LEFT","RIGHT","SPACE","UP","sidebarBtn","sidebar","toggleSidebar","bind","openSidebar","closeSidebar","sidebarKeyboard","focus","last","registerPinEvent","pinButton","baseContainer","hideMenu","userId","toggler","prev","tabs","tab","tabdrop","percantage","openUrlTarget","postData","formAttr","csrfMagicName","csrfMagicToken","input","createElement","urlObject","forEach","includes","values","urlData","entryFile","keys","startsWith","showConfirmationBox","openUrl","getInstance","reloadTabContent","decTime","withSeconds","withMinutes","short","hour","min","sec","round","trim","afterShowModal","showRecordsListModal","registerModalController","requestData","imageType","logging","html2canvas","then","base64Image","canvas","toDataURL","txt","innerHTML","userParams","body","notice","close","PNotify","confirmCallback","cancelCallback","scrollbarFnName","showNewScrollbar","registerPopoverRecord","registerPopoverEllipsis","icon","textTrusted","titleTrusted","styling","icons","formatNumber","iconData","toggleClass","active","inactive","temporalDiv","textContent","innerText","disableAutoInline","ready","iconSet","Quasar","mdiV3","registerToggleIconClick","touchDevice","isTouchDevice","setPnotifyDefaultOptions","changeSelectElementView","registerPopoverEllipsisIcon","registerPopover","registerFormatNumber","registerIframeAndMoreContent","registerModal","registerQuickEditModal","registerMenu","registerTabdrop","registerIframeEvents","Scrollbar","initPage","toCamelCase","valueOf","charAt","toLowerCase","test","userAgent","resizable","getPageController","getNumberFromValue","Double","formatToDb","getNumberFromText","setValue","formatToDisplay","disable","enable","updateElement","serializeArray","v","name","prevValue","autocompletes","ac","expr","icontains","obj","meta","stack","removeTextNode","nodeType","setLocale","langKey"],"mappings":"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"}