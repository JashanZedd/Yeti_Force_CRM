"use strict";var script={name:"Icon",props:{icon:{type:String,required:!0},size:{type:String,required:!1}}};function normalizeComponent(e,t,n,r,i,a,o,s,c,l){"boolean"!=typeof o&&(c=s,s=o,o=!1);var d,u="function"==typeof n?n.options:n;if(e&&e.render&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns,u._compiled=!0,i&&(u.functional=!0)),r&&(u._scopeId=r),a?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,c(e)),e&&e._registeredComponents&&e._registeredComponents.add(a)},u._ssrRegister=d):t&&(d=o?function(){t.call(this,l(this.$root.$options.shadowRoot))}:function(e){t.call(this,s(e))}),d)if(u.functional){var m=u.render;u.render=function(e,t){return d.call(t),m(e,t)}}else{var p=u.beforeCreate;u.beforeCreate=p?[].concat(p,d):[d]}return n}var normalizeComponent_1=normalizeComponent,isOldIE="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());function createInjector(e){return function(e,t){return addStyle(e,t)}}var HEAD=document.head||document.getElementsByTagName("head")[0],styles={};function addStyle(e,t){var n=isOldIE?t.media||"default":e,r=styles[n]||(styles[n]={ids:new Set,styles:[]});if(!r.ids.has(e)){r.ids.add(e);var i=t.source;if(t.map&&(i+="\n/*# sourceURL="+t.map.sources[0]+" */",i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t.map))))+" */"),r.element||(r.element=document.createElement("style"),r.element.type="text/css",t.media&&r.element.setAttribute("media",t.media),HEAD.appendChild(r.element)),"styleSheet"in r.element)r.styles.push(i),r.element.styleSheet.cssText=r.styles.filter(Boolean).join("\n");else{var a=r.ids.size-1,o=document.createTextNode(i),s=r.element.childNodes;s[a]&&r.element.removeChild(s[a]),s.length?r.element.insertBefore(o,s[a]):r.element.appendChild(o)}}}var browser=createInjector;const __vue_script__=script;var __vue_render__=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[/^mdi|^fa/.test(e.icon)?n("q-icon",{attrs:{name:e.icon,size:e.size,dense:""}}):e.icon.includes("/")?n("q-avatar",{attrs:{size:e.size}},[n("q-img",{attrs:{src:e.icon}})],1):n("q-icon",{class:[e.icon,"q-icon"],style:{"font-size":e.size}})],1)},__vue_staticRenderFns__=[];__vue_render__._withStripped=!0;const __vue_inject_styles__=function(e){e&&e("data-v-8becc55e_0",{source:"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",map:{version:3,sources:[],names:[],mappings:"",file:"Icon.vue"},media:void 0})},__vue_scope_id__="data-v-8becc55e",__vue_module_identifier__=void 0,__vue_is_functional_template__=!1;var Icon=normalizeComponent_1({render:__vue_render__,staticRenderFns:__vue_staticRenderFns__},__vue_inject_styles__,__vue_script__,__vue_scope_id__,!1,void 0,browser,void 0),script$1={name:"IconInfo",props:{customOptions:{type:Object,default:()=>({})}},data:()=>({searchInfoShow:!1,options:{iconSize:"inherit",tooltipFont:"14px",backgroundClass:"bg-primary"},tooltipId:`tooltip-id-${Quasar.utils.uid()}`}),created(){this.options=Object.assign(this.options,this.customOptions),document.addEventListener("click",e=>{!this.searchInfoShow||e.target.offsetParent.classList.contains(this.tooltipId)||e.target.classList.contains(this.tooltipId)||(this.searchInfoShow=!1)})}};const __vue_script__$1=script$1;var __vue_render__$1=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flex"},[n("q-icon",{class:["cursor-pointer",e.tooltipId],style:"font-size: "+e.options.iconSize+";",attrs:{name:e.searchInfoShow?"mdi-information":"mdi-information-outline"},on:{click:function(t){e.searchInfoShow=!e.searchInfoShow}}}),e._v(" "),n("div",[n("q-tooltip",{attrs:{"content-style":"font-size: "+e.options.tooltipFont,"content-class":[e.options.backgroundClass,e.tooltipId,"all-pointer-events"]},model:{value:e.searchInfoShow,callback:function(t){e.searchInfoShow=t},expression:"searchInfoShow"}},[e._t("default")],2)],1)],1)},__vue_staticRenderFns__$1=[];__vue_render__$1._withStripped=!0;const __vue_inject_styles__$1=function(e){e&&e("data-v-4ca201da_0",{source:"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",map:{version:3,sources:[],names:[],mappings:"",file:"IconInfo.vue"},media:void 0})},__vue_scope_id__$1="data-v-4ca201da",__vue_module_identifier__$1=void 0,__vue_is_functional_template__$1=!1;var IconInfo=normalizeComponent_1({render:__vue_render__$1,staticRenderFns:__vue_staticRenderFns__$1},__vue_inject_styles__$1,__vue_script__$1,"data-v-4ca201da",!1,void 0,browser,void 0),script$2={name:"Carousel",data:()=>({slide:0,height:"90vh",report:0,fullscreen:!1}),props:{record:{type:Object,required:!0}},watch:{fullscreen:function(e){e?this.$q.fullscreen.request():this.$q.fullscreen.exit()},"$q.fullscreen.isActive"(e){this.fullscreen=e}},methods:{onTransition(e){$(this.$refs.carousel.$el).find("img").css("max-width",$(this.$refs.carousel.$el).width()-17)}}};const __vue_script__$2=script$2;var __vue_render__$2=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("q-carousel",{ref:"carousel",class:["quasar-reset shadow-1 rounded-borders",e.fullscreen?"":"carousel-height"],attrs:{"transition-prev":"scale","transition-next":"scale",swipeable:"",animated:"","control-color":"black",navigation:"",padding:"",arrows:"",fullscreen:e.fullscreen},on:{"update:fullscreen":function(t){e.fullscreen=t},transition:e.onTransition},scopedSlots:e._u([{key:"control",fn:function(){return[n("q-carousel-control",{attrs:{position:"bottom-right",offset:[18,18]}},[n("q-btn",{attrs:{push:"",round:"",dense:"",color:"white","text-color":"primary",icon:e.fullscreen?"mdi-fullscreen-exit":"mdi-fullscreen"},on:{click:function(t){e.fullscreen=!e.fullscreen}}})],1)]},proxy:!0}]),model:{value:e.slide,callback:function(t){e.slide=t},expression:"slide"}},e._l(e.record.content,function(t,r){return n("q-carousel-slide",{key:r,staticClass:"column no-wrap flex-center",attrs:{name:r,fullscreen:e.fullscreen},on:{"update:fullscreen":function(t){e.fullscreen=t}}},[n("div",{staticClass:"full-height",domProps:{innerHTML:e._s(t)}})])}),1)],1)},__vue_staticRenderFns__$2=[];__vue_render__$2._withStripped=!0;const __vue_inject_styles__$2=function(e){e&&e("data-v-68991888_0",{source:"\n.carousel-height[data-v-68991888] {\r\n  height: max-content;\r\n  min-height: calc(100vh - 31.14px);\n}\r\n",map:{version:3,sources:["C:\\www\\YetiForceCRM\\public_html\\src\\layouts\\resources\\views\\KnowledgeBase\\components\\Carousel.vue"],names:[],mappings:";AA8FA;EACA,mBAAA;EACA,iCAAA;AACA",file:"Carousel.vue",sourcesContent:['ArticlesList\x3c!--\r\n/**\r\n * Carousel component\r\n *\r\n * @description Carousel component for knowledge base view\r\n * @license YetiForce Public License 3.0\r\n * @author Tomasz Poradzewski <t.poradzewski@yetiforce.com>\r\n */\r\n--\x3e\r\n<template>\r\n  <div>\r\n    <q-carousel\r\n      v-model="slide"\r\n      transition-prev="scale"\r\n      transition-next="scale"\r\n      swipeable\r\n      animated\r\n      control-color="black"\r\n      navigation\r\n      padding\r\n      arrows\r\n\r\n      :class="[\'quasar-reset shadow-1 rounded-borders\', !fullscreen ? \'carousel-height\' : \'\']"\r\n      :fullscreen.sync="fullscreen"\r\n      ref="carousel"\r\n      @transition="onTransition"\r\n    >\r\n      <q-carousel-slide\r\n        v-for="(slide, index) in record.content"\r\n        :name="index"\r\n        :key="index"\r\n        class="column no-wrap flex-center"\r\n        :fullscreen.sync="fullscreen"\r\n      >\r\n        <div class="full-height" v-html="slide"></div>\r\n      </q-carousel-slide>\r\n      <template v-slot:control>\r\n        <q-carousel-control position="bottom-right" :offset="[18, 18]">\r\n          <q-btn\r\n            push\r\n            round\r\n            dense\r\n            color="white"\r\n            text-color="primary"\r\n            :icon="fullscreen ? \'mdi-fullscreen-exit\' : \'mdi-fullscreen\'"\r\n            @click="fullscreen = !fullscreen"\r\n          />\r\n        </q-carousel-control>\r\n      </template>\r\n    </q-carousel>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \'Carousel\',\r\n  data() {\r\n    return {\r\n      slide: 0,\r\n      height: \'90vh\',\r\n      report: 0,\r\n      fullscreen: false\r\n    }\r\n  },\r\n  props: {\r\n    record: {\r\n      type: Object,\r\n      required: true\r\n    }\r\n  },\r\n  watch: {\r\n    fullscreen: function(val) {\r\n      if (val) {\r\n        this.$q.fullscreen.request()\r\n      } else {\r\n        this.$q.fullscreen.exit()\r\n      }\r\n    },\r\n    \'$q.fullscreen.isActive\'(val) {\r\n      this.fullscreen = val\r\n    }\r\n  },\r\n  methods: {\r\n    onTransition(size) {\r\n      const scrollbarWidth = 17\r\n      $(this.$refs.carousel.$el)\r\n        .find(\'img\')\r\n        .css(\'max-width\', $(this.$refs.carousel.$el).width() - scrollbarWidth)\r\n    }\r\n  }\r\n}\r\n<\/script>\r\n\r\n<style scoped>\r\n.carousel-height {\r\n  height: max-content;\r\n  min-height: calc(100vh - 31.14px);\r\n}\r\n</style>\r\n']},media:void 0})},__vue_scope_id__$2="data-v-68991888",__vue_module_identifier__$2=void 0,__vue_is_functional_template__$2=!1;var Carousel=normalizeComponent_1({render:__vue_render__$2,staticRenderFns:__vue_staticRenderFns__$2},__vue_inject_styles__$2,__vue_script__$2,"data-v-68991888",!1,void 0,browser,void 0),global$1="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};global$1.setTimeout,global$1.clearTimeout;var performance=global$1.performance||{},performanceNow=performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow||function(){return(new Date).getTime()};function applyMixin(e){if(Number(e.version.split(".")[0])>=2)e.mixin({beforeCreate:n});else{var t=e.prototype._init;e.prototype._init=function(e){void 0===e&&(e={}),e.init=e.init?[n].concat(e.init):n,t.call(this,e)}}function n(){var e=this.$options;e.store?this.$store="function"==typeof e.store?e.store():e.store:e.parent&&e.parent.$store&&(this.$store=e.parent.$store)}}var target="undefined"!=typeof window?window:void 0!==global$1?global$1:{},devtoolHook=target.__VUE_DEVTOOLS_GLOBAL_HOOK__;function devtoolPlugin(e){devtoolHook&&(e._devtoolHook=devtoolHook,devtoolHook.emit("vuex:init",e),devtoolHook.on("vuex:travel-to-state",function(t){e.replaceState(t)}),e.subscribe(function(e,t){devtoolHook.emit("vuex:mutation",e,t)}))}function forEachValue(e,t){Object.keys(e).forEach(function(n){return t(e[n],n)})}function isObject(e){return null!==e&&"object"==typeof e}function isPromise(e){return e&&"function"==typeof e.then}function partial(e,t){return function(){return e(t)}}var Module=function(e,t){this.runtime=t,this._children=Object.create(null),this._rawModule=e;var n=e.state;this.state=("function"==typeof n?n():n)||{}},prototypeAccessors={namespaced:{configurable:!0}};prototypeAccessors.namespaced.get=function(){return!!this._rawModule.namespaced},Module.prototype.addChild=function(e,t){this._children[e]=t},Module.prototype.removeChild=function(e){delete this._children[e]},Module.prototype.getChild=function(e){return this._children[e]},Module.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)},Module.prototype.forEachChild=function(e){forEachValue(this._children,e)},Module.prototype.forEachGetter=function(e){this._rawModule.getters&&forEachValue(this._rawModule.getters,e)},Module.prototype.forEachAction=function(e){this._rawModule.actions&&forEachValue(this._rawModule.actions,e)},Module.prototype.forEachMutation=function(e){this._rawModule.mutations&&forEachValue(this._rawModule.mutations,e)},Object.defineProperties(Module.prototype,prototypeAccessors);var Vue$1,ModuleCollection=function(e){this.register([],e,!1)};function update(e,t,n){if(t.update(n),n.modules)for(var r in n.modules){if(!t.getChild(r))return;update(e.concat(r),t.getChild(r),n.modules[r])}}ModuleCollection.prototype.get=function(e){return e.reduce(function(e,t){return e.getChild(t)},this.root)},ModuleCollection.prototype.getNamespace=function(e){var t=this.root;return e.reduce(function(e,n){return e+((t=t.getChild(n)).namespaced?n+"/":"")},"")},ModuleCollection.prototype.update=function(e){update([],this.root,e)},ModuleCollection.prototype.register=function(e,t,n){var r=this;void 0===n&&(n=!0);var i=new Module(t,n);0===e.length?this.root=i:this.get(e.slice(0,-1)).addChild(e[e.length-1],i);t.modules&&forEachValue(t.modules,function(t,i){r.register(e.concat(i),t,n)})},ModuleCollection.prototype.unregister=function(e){var t=this.get(e.slice(0,-1)),n=e[e.length-1];t.getChild(n).runtime&&t.removeChild(n)};var Store=function(e){var t=this;void 0===e&&(e={}),!Vue$1&&"undefined"!=typeof window&&window.Vue&&install(window.Vue);var n=e.plugins;void 0===n&&(n=[]);var r=e.strict;void 0===r&&(r=!1),this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new ModuleCollection(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._watcherVM=new Vue$1;var i=this,a=this.dispatch,o=this.commit;this.dispatch=function(e,t){return a.call(i,e,t)},this.commit=function(e,t,n){return o.call(i,e,t,n)},this.strict=r;var s=this._modules.root.state;installModule(this,s,[],this._modules.root),resetStoreVM(this,s),n.forEach(function(e){return e(t)}),(void 0!==e.devtools?e.devtools:Vue$1.config.devtools)&&devtoolPlugin(this)},prototypeAccessors$1={state:{configurable:!0}};function genericSubscribe(e,t){return t.indexOf(e)<0&&t.push(e),function(){var n=t.indexOf(e);n>-1&&t.splice(n,1)}}function resetStore(e,t){e._actions=Object.create(null),e._mutations=Object.create(null),e._wrappedGetters=Object.create(null),e._modulesNamespaceMap=Object.create(null);var n=e.state;installModule(e,n,[],e._modules.root,!0),resetStoreVM(e,n,t)}function resetStoreVM(e,t,n){var r=e._vm;e.getters={};var i=e._wrappedGetters,a={};forEachValue(i,function(t,n){a[n]=partial(t,e),Object.defineProperty(e.getters,n,{get:function(){return e._vm[n]},enumerable:!0})});var o=Vue$1.config.silent;Vue$1.config.silent=!0,e._vm=new Vue$1({data:{$$state:t},computed:a}),Vue$1.config.silent=o,e.strict&&enableStrictMode(e),r&&(n&&e._withCommit(function(){r._data.$$state=null}),Vue$1.nextTick(function(){return r.$destroy()}))}function installModule(e,t,n,r,i){var a=!n.length,o=e._modules.getNamespace(n);if(r.namespaced&&(e._modulesNamespaceMap[o]=r),!a&&!i){var s=getNestedState(t,n.slice(0,-1)),c=n[n.length-1];e._withCommit(function(){Vue$1.set(s,c,r.state)})}var l=r.context=makeLocalContext(e,o,n);r.forEachMutation(function(t,n){registerMutation(e,o+n,t,l)}),r.forEachAction(function(t,n){var r=t.root?n:o+n,i=t.handler||t;registerAction(e,r,i,l)}),r.forEachGetter(function(t,n){registerGetter(e,o+n,t,l)}),r.forEachChild(function(r,a){installModule(e,t,n.concat(a),r,i)})}function makeLocalContext(e,t,n){var r=""===t,i={dispatch:r?e.dispatch:function(n,r,i){var a=unifyObjectStyle(n,r,i),o=a.payload,s=a.options,c=a.type;return s&&s.root||(c=t+c),e.dispatch(c,o)},commit:r?e.commit:function(n,r,i){var a=unifyObjectStyle(n,r,i),o=a.payload,s=a.options,c=a.type;s&&s.root||(c=t+c),e.commit(c,o,s)}};return Object.defineProperties(i,{getters:{get:r?function(){return e.getters}:function(){return makeLocalGetters(e,t)}},state:{get:function(){return getNestedState(e.state,n)}}}),i}function makeLocalGetters(e,t){var n={},r=t.length;return Object.keys(e.getters).forEach(function(i){if(i.slice(0,r)===t){var a=i.slice(r);Object.defineProperty(n,a,{get:function(){return e.getters[i]},enumerable:!0})}}),n}function registerMutation(e,t,n,r){(e._mutations[t]||(e._mutations[t]=[])).push(function(t){n.call(e,r.state,t)})}function registerAction(e,t,n,r){(e._actions[t]||(e._actions[t]=[])).push(function(t,i){var a=n.call(e,{dispatch:r.dispatch,commit:r.commit,getters:r.getters,state:r.state,rootGetters:e.getters,rootState:e.state},t,i);return isPromise(a)||(a=Promise.resolve(a)),e._devtoolHook?a.catch(function(t){throw e._devtoolHook.emit("vuex:error",t),t}):a})}function registerGetter(e,t,n,r){e._wrappedGetters[t]||(e._wrappedGetters[t]=function(e){return n(r.state,r.getters,e.state,e.getters)})}function enableStrictMode(e){e._vm.$watch(function(){return this._data.$$state},function(){},{deep:!0,sync:!0})}function getNestedState(e,t){return t.length?t.reduce(function(e,t){return e[t]},e):e}function unifyObjectStyle(e,t,n){return isObject(e)&&e.type&&(n=t,t=e,e=e.type),{type:e,payload:t,options:n}}function install(e){Vue$1&&e===Vue$1||applyMixin(Vue$1=e)}prototypeAccessors$1.state.get=function(){return this._vm._data.$$state},prototypeAccessors$1.state.set=function(e){},Store.prototype.commit=function(e,t,n){var r=this,i=unifyObjectStyle(e,t,n),a=i.type,o=i.payload,s={type:a,payload:o},c=this._mutations[a];c&&(this._withCommit(function(){c.forEach(function(e){e(o)})}),this._subscribers.forEach(function(e){return e(s,r.state)}))},Store.prototype.dispatch=function(e,t){var n=this,r=unifyObjectStyle(e,t),i=r.type,a=r.payload,o={type:i,payload:a},s=this._actions[i];if(s){try{this._actionSubscribers.filter(function(e){return e.before}).forEach(function(e){return e.before(o,n.state)})}catch(e){}return(s.length>1?Promise.all(s.map(function(e){return e(a)})):s[0](a)).then(function(e){try{n._actionSubscribers.filter(function(e){return e.after}).forEach(function(e){return e.after(o,n.state)})}catch(e){}return e})}},Store.prototype.subscribe=function(e){return genericSubscribe(e,this._subscribers)},Store.prototype.subscribeAction=function(e){return genericSubscribe("function"==typeof e?{before:e}:e,this._actionSubscribers)},Store.prototype.watch=function(e,t,n){var r=this;return this._watcherVM.$watch(function(){return e(r.state,r.getters)},t,n)},Store.prototype.replaceState=function(e){var t=this;this._withCommit(function(){t._vm._data.$$state=e})},Store.prototype.registerModule=function(e,t,n){void 0===n&&(n={}),"string"==typeof e&&(e=[e]),this._modules.register(e,t),installModule(this,this.state,e,this._modules.get(e),n.preserveState),resetStoreVM(this,this.state)},Store.prototype.unregisterModule=function(e){var t=this;"string"==typeof e&&(e=[e]),this._modules.unregister(e),this._withCommit(function(){var n=getNestedState(t.state,e.slice(0,-1));Vue$1.delete(n,e[e.length-1])}),resetStore(this)},Store.prototype.hotUpdate=function(e){this._modules.update(e),resetStore(this,!0)},Store.prototype._withCommit=function(e){var t=this._committing;this._committing=!0,e(),this._committing=t},Object.defineProperties(Store.prototype,prototypeAccessors$1);var mapState=normalizeNamespace(function(e,t){var n={};return normalizeMap(t).forEach(function(t){var r=t.key,i=t.val;n[r]=function(){var t=this.$store.state,n=this.$store.getters;if(e){var r=getModuleByNamespace(this.$store,"mapState",e);if(!r)return;t=r.context.state,n=r.context.getters}return"function"==typeof i?i.call(this,t,n):t[i]},n[r].vuex=!0}),n}),mapMutations=normalizeNamespace(function(e,t){var n={};return normalizeMap(t).forEach(function(t){var r=t.key,i=t.val;n[r]=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];var r=this.$store.commit;if(e){var a=getModuleByNamespace(this.$store,"mapMutations",e);if(!a)return;r=a.context.commit}return"function"==typeof i?i.apply(this,[r].concat(t)):r.apply(this.$store,[i].concat(t))}}),n}),mapGetters=normalizeNamespace(function(e,t){var n={};return normalizeMap(t).forEach(function(t){var r=t.key,i=t.val;i=e+i,n[r]=function(){if(!e||getModuleByNamespace(this.$store,"mapGetters",e))return this.$store.getters[i]},n[r].vuex=!0}),n}),mapActions=normalizeNamespace(function(e,t){var n={};return normalizeMap(t).forEach(function(t){var r=t.key,i=t.val;n[r]=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];var r=this.$store.dispatch;if(e){var a=getModuleByNamespace(this.$store,"mapActions",e);if(!a)return;r=a.context.dispatch}return"function"==typeof i?i.apply(this,[r].concat(t)):r.apply(this.$store,[i].concat(t))}}),n}),createNamespacedHelpers=function(e){return{mapState:mapState.bind(null,e),mapGetters:mapGetters.bind(null,e),mapMutations:mapMutations.bind(null,e),mapActions:mapActions.bind(null,e)}};function normalizeMap(e){return Array.isArray(e)?e.map(function(e){return{key:e,val:e}}):Object.keys(e).map(function(t){return{key:t,val:e[t]}})}function normalizeNamespace(e){return function(t,n){return"string"!=typeof t?(n=t,t=""):"/"!==t.charAt(t.length-1)&&(t+="/"),e(t,n)}}function getModuleByNamespace(e,t,n){return e._modulesNamespaceMap[n]}var index_esm={Store:Store,install:install,version:"3.1.1",mapState:mapState,mapMutations:mapMutations,mapGetters:mapGetters,mapActions:mapActions,createNamespacedHelpers:createNamespacedHelpers};const{mapGetters:mapGetters$1,mapActions:mapActions$1}=createNamespacedHelpers("KnowledgeBase");var script$3={name:"ArticlesList",components:{Icon:Icon},props:{data:{type:Array,default:[]},title:{type:String,default:""}},data:()=>({pagination:{rowsPerPage:0},columns:[{name:"desc",required:!0,label:"Title",align:"left",field:e=>e.subject,format:e=>`${e}`,sortable:!0},{name:"short_time",align:"center",label:"Short time",field:"short_time",sortable:!0},{name:"introduction",align:"center",label:"Introduction",field:"introduction",sortable:!0}]}),computed:{...mapGetters$1(["tree","iconSize","moduleName"]),hasData(){return this.data.length}},methods:{...mapActions$1(["fetchRecord"]),onClickRecord(e){this.fetchRecord(e).then(()=>{this.$emit("onClickRecord",e)})}}};const __vue_script__$3=script$3;var __vue_render__$3=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"KnowledgeBase__ArticlesList"},[n("q-table",{attrs:{data:e.data,columns:e.columns,"row-key":"subject",grid:"","hide-header":"",pagination:e.pagination,title:e.title},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"item",fn:function(t){return[n("q-list",{staticClass:"full-width",attrs:{padding:""},on:{click:function(n){return n.preventDefault(),e.onClickRecord(t.row.id)}}},[n("q-item",{attrs:{clickable:""}},[n("q-item-section",{attrs:{avatar:""}},[n("q-icon",{attrs:{name:"mdi-text"}})],1),e._v(" "),n("q-item-section",[n("q-item-label",{staticClass:"text-primary"},[n("a",{staticClass:"js-popover-tooltip--record",attrs:{href:"index.php?module="+e.moduleName+"&view=Detail&record="+t.row.id}},[e._v("\n                "+e._s(t.row.subject)+"\n              ")])]),e._v(" "),n("q-item-label",{staticClass:"flex items-center",attrs:{overline:""}},[n("q-breadcrumbs",{staticClass:"mr-2 text-grey-8",attrs:{"active-color":"grey-8"}},[e._l(e.tree.categories[t.row.category].parentTree,function(t){return n("q-breadcrumbs-el",{key:e.tree.categories[t].label},[e.tree.categories[t].icon?n("icon",{staticClass:"q-mr-sm",attrs:{size:e.iconSize,icon:e.tree.categories[t].icon}}):e._e(),e._v("\n                  "+e._s(e.tree.categories[t].label)+"\n                ")],1)}),e._v(" "),n("q-tooltip",[e._v("\n                  "+e._s(e.translate("JS_CATEGORY"))+"\n                ")])],2),e._v("\n              | "+e._s(e.translate("JS_AUTHORED_BY"))+":\n              "),n("span",{staticClass:"q-ml-sm",domProps:{innerHTML:e._s(t.row.assigned_user_id)}})],1),e._v(" "),n("q-item-label",{attrs:{caption:""}},[e._v(e._s(t.row.introduction))])],1),e._v(" "),n("q-item-section",{attrs:{side:"",top:""}},[n("q-item-label",{attrs:{caption:""}},[e._v(e._s(t.row.short_time))]),e._v(" "),n("q-tooltip",[e._v("\n              "+e._s(t.row.full_time)+"\n            ")])],1)],1)],1)]}},{key:"bottom",fn:function(e){}}])}),e._v(" "),n("div",{class:["flex items-center q-px-lg q-py-sm",e.hasData?"hidden":""]},[n("q-icon",{staticClass:"q-mr-sm",attrs:{name:"mdi-alert-outline"}}),e._v("\n    "+e._s(e.translate("JS_NO_RESULTS_FOUND"))+"\n  ")],1)],1)},__vue_staticRenderFns__$3=[];__vue_render__$3._withStripped=!0;const __vue_inject_styles__$3=function(e){e&&e("data-v-4c51eff7_0",{source:"\n.KnowledgeBase__ArticlesList .q-table__bottom {\r\n  display: none !important;\n}\r\n",map:{version:3,sources:["C:\\www\\YetiForceCRM\\public_html\\src\\layouts\\resources\\views\\KnowledgeBase\\components\\ArticlesList.vue"],names:[],mappings:";AAiIA;EACA,wBAAA;AACA",file:"ArticlesList.vue",sourcesContent:['\x3c!--\r\n/**\r\n * ArticlesList component\r\n *\r\n * @description Articles list component\r\n * @license YetiForce Public License 3.0\r\n * @author Tomasz Poradzewski <t.poradzewski@yetiforce.com>\r\n */\r\n--\x3e\r\n<template>\r\n  <div class="KnowledgeBase__ArticlesList">\r\n    <q-table\r\n      :data="data"\r\n      :columns="columns"\r\n      row-key="subject"\r\n      grid\r\n      hide-header\r\n      :pagination.sync="pagination"\r\n      :title="title"\r\n    >\r\n      <template v-slot:item="props">\r\n        <q-list class="full-width" padding @click.prevent="onClickRecord(props.row.id)">\r\n          <q-item clickable>\r\n            <q-item-section avatar>\r\n              <q-icon name="mdi-text" />\r\n            </q-item-section>\r\n            <q-item-section>\r\n              <q-item-label class="text-primary">\r\n                <a\r\n                  class="js-popover-tooltip--record"\r\n                  :href="`index.php?module=${moduleName}&view=Detail&record=${props.row.id}`"\r\n                >\r\n                  {{ props.row.subject }}\r\n                </a>\r\n              </q-item-label>\r\n              <q-item-label class="flex items-center" overline>\r\n                <q-breadcrumbs class="mr-2 text-grey-8" active-color="grey-8">\r\n                  <q-breadcrumbs-el\r\n                    v-for="category in tree.categories[props.row.category].parentTree"\r\n                    :key="tree.categories[category].label"\r\n                  >\r\n                    <icon\r\n                      v-if="tree.categories[category].icon"\r\n                      :size="iconSize"\r\n                      :icon="tree.categories[category].icon"\r\n                      class="q-mr-sm"\r\n                    />\r\n                    {{ tree.categories[category].label }}\r\n                  </q-breadcrumbs-el>\r\n                  <q-tooltip>\r\n                    {{ translate(\'JS_CATEGORY\') }}\r\n                  </q-tooltip>\r\n                </q-breadcrumbs>\r\n                | {{ translate(\'JS_AUTHORED_BY\') }}:\r\n                <span v-html="props.row.assigned_user_id" class="q-ml-sm"></span>\r\n              </q-item-label>\r\n              <q-item-label caption>{{ props.row.introduction }}</q-item-label>\r\n            </q-item-section>\r\n            <q-item-section side top>\r\n              <q-item-label caption>{{ props.row.short_time }}</q-item-label>\r\n              <q-tooltip>\r\n                {{ props.row.full_time }}\r\n              </q-tooltip>\r\n            </q-item-section>\r\n          </q-item>\r\n        </q-list>\r\n      </template>\r\n      <template v-slot:bottom="props"> </template>\r\n    </q-table>\r\n    <div :class="[\'flex items-center q-px-lg q-py-sm\', hasData ? \'hidden\' : \'\']">\r\n      <q-icon name="mdi-alert-outline" class="q-mr-sm"></q-icon>\r\n      {{ translate(\'JS_NO_RESULTS_FOUND\') }}\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport Icon from \'../../../../../components/Icon.vue\'\r\nimport { createNamespacedHelpers } from \'vuex\'\r\nconst { mapGetters, mapActions } = createNamespacedHelpers(\'KnowledgeBase\')\r\nexport default {\r\n  name: \'ArticlesList\',\r\n  components: { Icon },\r\n  props: {\r\n    data: {\r\n      type: Array,\r\n      default: []\r\n    },\r\n    title: {\r\n      type: String,\r\n      default: \'\'\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      pagination: {\r\n        rowsPerPage: 0\r\n      },\r\n      columns: [\r\n        {\r\n          name: \'desc\',\r\n          required: true,\r\n          label: \'Title\',\r\n          align: \'left\',\r\n          field: row => row.subject,\r\n          format: val => `${val}`,\r\n          sortable: true\r\n        },\r\n        { name: \'short_time\', align: \'center\', label: \'Short time\', field: \'short_time\', sortable: true },\r\n        { name: \'introduction\', align: \'center\', label: \'Introduction\', field: \'introduction\', sortable: true }\r\n      ]\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters([\'tree\', \'iconSize\', \'moduleName\']),\r\n    hasData() {\r\n      return this.data.length\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapActions([\'fetchRecord\']),\r\n    onClickRecord(id) {\r\n      this.fetchRecord(id).then(() => {\r\n        this.$emit(\'onClickRecord\', id)\r\n      })\r\n    }\r\n  }\r\n}\r\n<\/script>\r\n<style>\r\n.KnowledgeBase__ArticlesList .q-table__bottom {\r\n  display: none !important;\r\n}\r\n</style>\r\n']},media:void 0})},__vue_scope_id__$3=void 0,__vue_module_identifier__$3=void 0,__vue_is_functional_template__$3=!1;var ArticlesList=normalizeComponent_1({render:__vue_render__$3,staticRenderFns:__vue_staticRenderFns__$3},__vue_inject_styles__$3,__vue_script__$3,void 0,!1,void 0,browser,void 0),script$4={props:{columnBlocks:{type:Array,required:!0}}};const __vue_script__$4=script$4;var __vue_render__$4=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"featured__container",style:{"-webkit-column-count":e.columnBlocks.length,"-moz-column-count":e.columnBlocks.length,"column-count":e.columnBlocks.length}},[e._l(e.columnBlocks,function(t){return[n("div",{key:t,staticClass:"featured__block"},[e._t("default",null,{relatedBlock:t})],2)]})],2)},__vue_staticRenderFns__$4=[];__vue_render__$4._withStripped=!0;const __vue_inject_styles__$4=function(e){e&&e("data-v-15b77657_0",{source:"\n.featured__container[data-v-15b77657] {\r\n  -webkit-column-width: 27rem;\r\n  -moz-column-width: 27rem;\r\n  column-width: 27rem;\n}\n.featured__block[data-v-15b77657] {\r\n  width: 100%;\r\n  padding-bottom: 16px;\r\n  -webkit-column-break-inside: avoid;\r\n  page-break-inside: avoid;\r\n  break-inside: avoid-column;\n}\r\n",map:{version:3,sources:["C:\\www\\YetiForceCRM\\public_html\\src\\layouts\\resources\\views\\KnowledgeBase\\components\\RelatedColumns.vue"],names:[],mappings:";AAsCA;EACA,2BAAA;EACA,wBAAA;EACA,mBAAA;AACA;AACA;EACA,WAAA;EACA,oBAAA;EACA,kCAAA;EACA,wBAAA;EACA,0BAAA;AACA",file:"RelatedColumns.vue",sourcesContent:['\x3c!--\r\n/**\r\n * RelatedColumns component\r\n *\r\n * @description Records columns component\r\n * @license YetiForce Public License 3.0\r\n * @author Tomasz Poradzewski <t.poradzewski@yetiforce.com>\r\n */\r\n--\x3e\r\n<template>\r\n  <div\r\n    class="featured__container"\r\n    :style="{\r\n      \'-webkit-column-count\': columnBlocks.length,\r\n      \'-moz-column-count\': columnBlocks.length,\r\n      \'column-count\': columnBlocks.length\r\n    }"\r\n  >\r\n    <template v-for="relatedBlock in columnBlocks">\r\n      <div class="featured__block" :key="relatedBlock">\r\n        <slot :relatedBlock="relatedBlock"></slot>\r\n      </div>\r\n    </template>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: {\r\n    columnBlocks: {\r\n      type: Array,\r\n      required: true\r\n    }\r\n  }\r\n}\r\n<\/script>\r\n\r\n<style scoped>\r\n.featured__container {\r\n  -webkit-column-width: 27rem;\r\n  -moz-column-width: 27rem;\r\n  column-width: 27rem;\r\n}\r\n.featured__block {\r\n  width: 100%;\r\n  padding-bottom: 16px;\r\n  -webkit-column-break-inside: avoid;\r\n  page-break-inside: avoid;\r\n  break-inside: avoid-column;\r\n}\r\n</style>\r\n']},media:void 0})},__vue_scope_id__$4="data-v-15b77657",__vue_module_identifier__$4=void 0,__vue_is_functional_template__$4=!1;var RelatedColumns=normalizeComponent_1({render:__vue_render__$4,staticRenderFns:__vue_staticRenderFns__$4},__vue_inject_styles__$4,__vue_script__$4,"data-v-15b77657",!1,void 0,browser,void 0);function unwrapExports(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var dist=createCommonjsModule(function(e,t){window,e.exports=function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=44)}({0:function(e,t,n){var r=n(16);"string"==typeof r&&(r=[[e.i,r,""]]);var i={transform:void 0};n(5)(r,i),r.locals&&(e.exports=r.locals)},1:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r={y:{t:"top",m:"marginTop",b:"bottom"},x:{l:"left",m:"marginLeft",r:"right"}};t.default={name:"vue-drag-resize",props:{parentScaleX:{type:Number,default:1},parentScaleY:{type:Number,default:1},isActive:{type:Boolean,default:!1},preventActiveBehavior:{type:Boolean,default:!1},isDraggable:{type:Boolean,default:!0},isResizable:{type:Boolean,default:!0},aspectRatio:{type:Boolean,default:!1},parentLimitation:{type:Boolean,default:!1},parentW:{type:Number,default:0,validator:function(e){return e>=0}},parentH:{type:Number,default:0,validator:function(e){return e>=0}},w:{type:Number,default:100,validator:function(e){return e>0}},h:{type:Number,default:100,validator:function(e){return e>0}},minw:{type:Number,default:50,validator:function(e){return e>0}},minh:{type:Number,default:50,validator:function(e){return e>0}},x:{type:Number,default:0,validator:function(e){return"number"==typeof e}},y:{type:Number,default:0,validator:function(e){return"number"==typeof e}},z:{type:[String,Number],default:"auto",validator:function(e){return"string"==typeof e?"auto"===e:e>=0}},dragHandle:{type:String,default:null},dragCancel:{type:String,default:null},sticks:{type:Array,default:function(){return["tl","tm","tr","mr","br","bm","bl","ml"]}},axis:{type:String,default:"both",validator:function(e){return-1!==["x","y","both","none"].indexOf(e)}}},data:function(){return{active:this.isActive,rawWidth:this.w,rawHeight:this.h,rawLeft:this.x,rawTop:this.y,rawRight:null,rawBottom:null,zIndex:this.z,aspectFactor:this.w/this.h,parentWidth:null,parentHeight:null,left:this.x,top:this.y,right:null,bottom:null,minWidth:this.minw,minHeight:this.minh}},created:function(){this.stickDrag=!1,this.bodyDrag=!1,this.stickAxis=null,this.stickStartPos={mouseX:0,mouseY:0,x:0,y:0,w:0,h:0},this.limits={minLeft:null,maxLeft:null,minRight:null,maxRight:null,minTop:null,maxTop:null,minBottom:null,maxBottom:null},this.currentStick=[]},mounted:function(){if(this.parentElement=this.$el.parentNode,this.parentWidth=this.parentW?this.parentW:this.parentElement.clientWidth,this.parentHeight=this.parentH?this.parentH:this.parentElement.clientHeight,this.rawRight=this.parentWidth-this.rawWidth-this.rawLeft,this.rawBottom=this.parentHeight-this.rawHeight-this.rawTop,document.documentElement.addEventListener("mousemove",this.move),document.documentElement.addEventListener("mouseup",this.up),document.documentElement.addEventListener("mouseleave",this.up),document.documentElement.addEventListener("mousedown",this.deselect),document.documentElement.addEventListener("touchmove",this.move,!0),document.documentElement.addEventListener("touchend touchcancel",this.up,!0),document.documentElement.addEventListener("touchstart",this.up,!0),this.dragHandle){var e=Array.prototype.slice.call(this.$el.querySelectorAll(this.dragHandle));for(var t in e)e[t].setAttribute("data-drag-handle",this._uid)}if(this.dragCancel){var n=Array.prototype.slice.call(this.$el.querySelectorAll(this.dragCancel));for(var r in n)n[r].setAttribute("data-drag-cancel",this._uid)}},beforeDestroy:function(){document.documentElement.removeEventListener("mousemove",this.move),document.documentElement.removeEventListener("mouseup",this.up),document.documentElement.removeEventListener("mouseleave",this.up),document.documentElement.removeEventListener("mousedown",this.deselect),document.documentElement.removeEventListener("touchmove",this.move,!0),document.documentElement.removeEventListener("touchend touchcancel",this.up,!0),document.documentElement.removeEventListener("touchstart",this.up,!0)},methods:{deselect:function(){this.preventActiveBehavior||(this.active=!1)},move:function(e){(this.stickDrag||this.bodyDrag)&&(e.stopPropagation(),this.stickDrag&&this.stickMove(e),this.bodyDrag&&this.bodyMove(e))},up:function(e){this.stickDrag&&this.stickUp(e),this.bodyDrag&&this.bodyUp(e)},bodyDown:function(e){var t=e.target||e.srcElement;this.preventActiveBehavior||(this.active=!0),e.button&&0!==e.button||(this.$emit("clicked",e),this.isDraggable&&this.active&&(this.dragHandle&&t.getAttribute("data-drag-handle")!==this._uid.toString()||this.dragCancel&&t.getAttribute("data-drag-cancel")===this._uid.toString()||(this.bodyDrag=!0,this.stickStartPos.mouseX=e.pageX||e.touches[0].pageX,this.stickStartPos.mouseY=e.pageY||e.touches[0].pageY,this.stickStartPos.left=this.left,this.stickStartPos.right=this.right,this.stickStartPos.top=this.top,this.stickStartPos.bottom=this.bottom,this.parentLimitation&&(this.limits=this.calcDragLimitation()))))},calcDragLimitation:function(){var e=this.parentWidth,t=this.parentHeight;return{minLeft:0,maxLeft:e-this.width,minRight:0,maxRight:e-this.width,minTop:0,maxTop:t-this.height,minBottom:0,maxBottom:t-this.height}},bodyMove:function(e){var t=this.stickStartPos,n={x:("y"!==this.axis&&"none"!==this.axis?t.mouseX-(e.pageX||e.touches[0].pageX):0)/this.parentScaleX,y:("x"!==this.axis&&"none"!==this.axis?t.mouseY-(e.pageY||e.touches[0].pageY):0)/this.parentScaleY};this.rawTop=t.top-n.y,this.rawBottom=t.bottom+n.y,this.rawLeft=t.left-n.x,this.rawRight=t.right+n.x,this.$emit("dragging",this.rect)},bodyUp:function(){this.bodyDrag=!1,this.$emit("dragging",this.rect),this.$emit("dragstop",this.rect),this.stickStartPos={mouseX:0,mouseY:0,x:0,y:0,w:0,h:0},this.limits={minLeft:null,maxLeft:null,minRight:null,maxRight:null,minTop:null,maxTop:null,minBottom:null,maxBottom:null}},stickDown:function(e,t){if(this.isResizable&&this.active){switch(this.stickDrag=!0,this.stickStartPos.mouseX=t.pageX||t.touches[0].pageX,this.stickStartPos.mouseY=t.pageY||t.touches[0].pageY,this.stickStartPos.left=this.left,this.stickStartPos.right=this.right,this.stickStartPos.top=this.top,this.stickStartPos.bottom=this.bottom,this.currentStick=e.split(""),this.stickAxis=null,this.currentStick[0]){case"b":case"t":this.stickAxis="y"}switch(this.currentStick[1]){case"r":case"l":this.stickAxis="y"===this.stickAxis?"xy":"x"}this.limits=this.calcResizeLimitation()}},calcResizeLimitation:function(){var e=this.minWidth,t=this.minHeight,n=this.aspectFactor,r=this.width,i=this.height,a=this.bottom,o=this.top,s=this.left,c=this.right,l=this.stickAxis,d=this.parentLimitation?0:null;this.aspectRatio&&(e/t>n?t=e/n:e=n*t);var u={minLeft:d,maxLeft:s+(r-e),minRight:d,maxRight:c+(r-e),minTop:d,maxTop:o+(i-t),minBottom:d,maxBottom:a+(i-t)};if(this.aspectRatio){var m={minLeft:s-Math.min(o,a)*n*2,maxLeft:s+(i-t)/2*n*2,minRight:c-Math.min(o,a)*n*2,maxRight:c+(i-t)/2*n*2,minTop:o-Math.min(s,c)/n*2,maxTop:o+(r-e)/2/n*2,minBottom:a-Math.min(s,c)/n*2,maxBottom:a+(r-e)/2/n*2};"x"===l?u={minLeft:Math.max(u.minLeft,m.minLeft),maxLeft:Math.min(u.maxLeft,m.maxLeft),minRight:Math.max(u.minRight,m.minRight),maxRight:Math.min(u.maxRight,m.maxRight)}:"y"===l&&(u={minTop:Math.max(u.minTop,m.minTop),maxTop:Math.min(u.maxTop,m.maxTop),minBottom:Math.max(u.minBottom,m.minBottom),maxBottom:Math.min(u.maxBottom,m.maxBottom)})}return u},stickMove:function(e){var t=this.stickStartPos,n={x:(t.mouseX-(e.pageX||e.touches[0].pageX))/this.parentScaleX,y:(t.mouseY-(e.pageY||e.touches[0].pageY))/this.parentScaleY};switch(this.currentStick[0]){case"b":this.rawBottom=t.bottom+n.y;break;case"t":this.rawTop=t.top-n.y}switch(this.currentStick[1]){case"r":this.rawRight=t.right+n.x;break;case"l":this.rawLeft=t.left-n.x}this.$emit("resizing",this.rect)},stickUp:function(){this.stickDrag=!1,this.stickStartPos={mouseX:0,mouseY:0,x:0,y:0,w:0,h:0},this.limits={minLeft:null,maxLeft:null,minRight:null,maxRight:null,minTop:null,maxTop:null,minBottom:null,maxBottom:null},this.rawTop=this.top,this.rawBottom=this.bottom,this.rawLeft=this.left,this.rawRight=this.right,this.stickAxis=null,this.$emit("resizing",this.rect),this.$emit("resizestop",this.rect)},aspectRatioCorrection:function(){if(this.aspectRatio){var e=this.bottom,t=this.top,n=this.left,r=this.right,i=this.width,a=this.height,o=this.aspectFactor,s=this.currentStick;if(i/a>o){var c=o*a;"l"===s[1]?this.left=n+i-c:this.right=r+i-c}else{var l=i/o;"t"===s[0]?this.top=t+a-l:this.bottom=e+a-l}}}},computed:{style:function(){return{top:this.top+"px",left:this.left+"px",width:this.width+"px",height:this.height+"px",zIndex:this.zIndex}},vdrStick:function(){var e=this;return function(t){var n={width:8/e.parentScaleX+"px",height:8/e.parentScaleY+"px"};return n[r.y[t[0]]]=8/e.parentScaleX/-2+"px",n[r.x[t[1]]]=8/e.parentScaleX/-2+"px",n}},width:function(){return this.parentWidth-this.left-this.right},height:function(){return this.parentHeight-this.top-this.bottom},rect:function(){return{left:Math.round(this.left),top:Math.round(this.top),width:Math.round(this.width),height:Math.round(this.height)}}},watch:{rawLeft:function(e){var t=this.limits,n=this.stickAxis,r=this.aspectFactor,i=this.aspectRatio,a=this.left,o=this.bottom,s=this.top;if(null!==t.minLeft&&e<t.minLeft?e=t.minLeft:null!==t.maxLeft&&t.maxLeft<e&&(e=t.maxLeft),i&&"x"===n){var c=a-e;this.rawTop=s-c/r/2,this.rawBottom=o-c/r/2}this.left=e},rawRight:function(e){var t=this.limits,n=this.stickAxis,r=this.aspectFactor,i=this.aspectRatio,a=this.right,o=this.bottom,s=this.top;if(null!==t.minRight&&e<t.minRight?e=t.minRight:null!==t.maxRight&&t.maxRight<e&&(e=t.maxRight),i&&"x"===n){var c=a-e;this.rawTop=s-c/r/2,this.rawBottom=o-c/r/2}this.right=e},rawTop:function(e){var t=this.limits,n=this.stickAxis,r=this.aspectFactor,i=this.aspectRatio,a=this.right,o=this.left,s=this.top;if(null!==t.minTop&&e<t.minTop?e=t.minTop:null!==t.maxTop&&t.maxTop<e&&(e=t.maxTop),i&&"y"===n){var c=s-e;this.rawLeft=o-c*r/2,this.rawRight=a-c*r/2}this.top=e},rawBottom:function(e){var t=this.limits,n=this.stickAxis,r=this.aspectFactor,i=this.aspectRatio,a=this.right,o=this.left,s=this.bottom;if(null!==t.minBottom&&e<t.minBottom?e=t.minBottom:null!==t.maxBottom&&t.maxBottom<e&&(e=t.maxBottom),i&&"y"===n){var c=s-e;this.rawLeft=o-c*r/2,this.rawRight=a-c*r/2}this.bottom=e},width:function(){this.aspectRatioCorrection()},height:function(){this.aspectRatioCorrection()},active:function(e){e?this.$emit("activated"):this.$emit("deactivated")},isActive:function(e){this.active=e},z:function(e){(e>=0||"auto"===e)&&(this.zIndex=e)},aspectRatio:function(e){e&&(this.aspectFactor=this.width/this.height)},minw:function(e){e>0&&e<=this.width&&(this.minWidth=e)},minh:function(e){e>0&&e<=this.height&&(this.minHeight=e)},x:function(){if(!this.stickDrag&&!this.bodyDrag){this.parentLimitation&&(this.limits=this.calcDragLimitation());var e=this.x-this.left;this.rawLeft=this.x,this.rawRight=this.right-e}},y:function(){if(!this.stickDrag&&!this.bodyDrag){this.parentLimitation&&(this.limits=this.calcDragLimitation());var e=this.y-this.top;this.rawTop=this.y,this.rawBottom=this.bottom-e}},w:function(){if(!this.stickDrag&&!this.bodyDrag){this.currentStick=["m","r"],this.stickAxis="x",this.parentLimitation&&(this.limits=this.calcResizeLimitation());var e=this.width-this.w;this.rawRight=this.right+e}},h:function(){if(!this.stickDrag&&!this.bodyDrag){this.currentStick=["b","m"],this.stickAxis="y",this.parentLimitation&&(this.limits=this.calcResizeLimitation());var e=this.height-this.h;this.rawBottom=this.bottom+e}},parentW:function(e){this.right=e-this.width-this.left,this.parentWidth=e},parentH:function(e){this.bottom=e-this.height-this.top,this.parentHeight=e}}}},15:function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var i,a=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(a)?e:(i=0===a.indexOf("//")?a:0===a.indexOf("/")?n+a:r+a.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")})}},16:function(e,t,n){(e.exports=n(6)(!1)).push([e.i,'\n.vdr,.vdr.active:before{position:absolute;-webkit-box-sizing:border-box;box-sizing:border-box\n}\n.vdr.active:before{content:"";width:100%;height:100%;top:0;left:0;outline:1px dashed #d6d6d6\n}\n.vdr-stick{-webkit-box-sizing:border-box;box-sizing:border-box;position:absolute;font-size:1px;background:#fff;border:1px solid #6c6c6c;-webkit-box-shadow:0 0 2px #bbb;box-shadow:0 0 2px #bbb\n}\n.inactive .vdr-stick{display:none\n}\n.vdr-stick-br,.vdr-stick-tl{cursor:nwse-resize\n}\n.vdr-stick-bm,.vdr-stick-tm{left:50%;cursor:ns-resize\n}\n.vdr-stick-bl,.vdr-stick-tr{cursor:nesw-resize\n}\n.vdr-stick-ml,.vdr-stick-mr{top:50%;cursor:ew-resize\n}\n.vdr-stick.not-resizable{display:none\n}',""])},17:function(e,t,n){var r=n(0),i=n.n(r);i.a},18:function(e,t,n){n.r(t);var r=n(4),i=n(2);for(var a in i)"default"!==a&&function(e){n.d(t,e,function(){return i[e]})}(a);var o=(n(17),n(3)),s=Object(o.a)(i.default,r.a,r.b,!1,null,null,null);s.options.__file="src/components/vue-drag-resize.vue",t.default=s.exports},2:function(e,t,n){n.r(t);var r=n(1),i=n.n(r);for(var a in r)"default"!==a&&function(e){n.d(t,e,function(){return r[e]})}(a);t.default=i.a},3:function(e,t,n){function r(e,t,n,r,i,a,o,s){var c,l="function"==typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=n,l._compiled=!0),r&&(l.functional=!0),a&&(l._scopeId="data-v-"+a),o?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},l._ssrRegister=c):i&&(c=s?function(){i.call(this,this.$root.$options.shadowRoot)}:i),c)if(l.functional){l._injectStyles=c;var d=l.render;l.render=function(e,t){return c.call(t),d(e,t)}}else{var u=l.beforeCreate;l.beforeCreate=u?[].concat(u,c):[c]}return{exports:e,options:l}}n.d(t,"a",function(){return r})},4:function(e,t,n){var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"vdr",class:e.active||e.isActive?"active":"inactive",style:e.style,on:{mousedown:function(t){t.stopPropagation(),t.preventDefault(),e.bodyDown(t)},touchstart:function(t){t.stopPropagation(),t.preventDefault(),e.bodyDown(t)}}},[e._t("default"),e._v(" "),e._l(e.sticks,function(t){return n("div",{staticClass:"vdr-stick",class:["vdr-stick-"+t,e.isResizable?"":"not-resizable"],style:e.vdrStick(t),on:{mousedown:function(n){n.stopPropagation(),n.preventDefault(),e.stickDown(t,n)},touchstart:function(n){n.stopPropagation(),n.preventDefault(),e.stickDown(t,n)}}})})],2)},i=[];r._withStripped=!0,n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i})},44:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(18);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return function(e){return e&&e.__esModule?e:{default:e}}(r).default}})},5:function(e,t,n){function r(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=m[r.id];if(i){i.refs++;for(var a=0;a<i.parts.length;a++)i.parts[a](r.parts[a]);for(;a<r.parts.length;a++)i.parts.push(d(r.parts[a],t))}else{for(var o=[],a=0;a<r.parts.length;a++)o.push(d(r.parts[a],t));m[r.id]={id:r.id,refs:1,parts:o}}}}function i(e,t){for(var n=[],r={},i=0;i<e.length;i++){var a=e[i],o=t.base?a[0]+t.base:a[0],s=a[1],c=a[2],l=a[3],d={css:s,media:c,sourceMap:l};r[o]?r[o].parts.push(d):n.push(r[o]={id:o,parts:[d]})}return n}function a(e,t){var n=h(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=f[f.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),f.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function o(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=f.indexOf(e);t>=0&&f.splice(t,1)}function s(e){var t=document.createElement("style");return e.attrs.type="text/css",l(t,e.attrs),a(e,t),t}function c(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",l(t,e.attrs),a(e,t),t}function l(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function d(e,t){var n,r,i,a;if(t.transform&&e.css){if(!(a=t.transform(e.css)))return function(){};e.css=a}if(t.singleton){var l=v++;n=_||(_=s(t)),r=u.bind(null,n,l,!1),i=u.bind(null,n,l,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=c(t),r=function(e,t,n){var r=n.css,i=n.sourceMap,a=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||a)&&(r=g(r)),i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var o=new Blob([r],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(o),s&&URL.revokeObjectURL(s)}.bind(null,n,t),i=function(){o(n),n.href&&URL.revokeObjectURL(n.href)}):(n=s(t),r=function(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),i=function(){o(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}function u(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=b(t,i);else{var a=document.createTextNode(i),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(a,o[t]):e.appendChild(a)}}var m={},p=function(e){var t;return function(){return void 0===t&&(t=function(){return window&&document&&document.all&&!window.atob}.apply(this,arguments)),t}}(),h=function(e){var t={};return function(e){return void 0===t[e]&&(t[e]=function(e){return document.querySelector(e)}.call(this,e)),t[e]}}(),_=null,v=0,f=[],g=n(15);e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||(t.singleton=p()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=i(e,t);return r(n,t),function(e){for(var a=[],o=0;o<n.length;o++){var s=n[o],c=m[s.id];c.refs--,a.push(c)}e&&r(i(e,t),t);for(var o=0;o<a.length;o++){var c=a[o];if(0===c.refs){for(var l=0;l<c.parts.length;l++)c.parts[l]();delete m[c.id]}}}};var b=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},6:function(e,t){function n(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var i=function(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}(r);return[n].concat(r.sources.map(function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"})).concat([i]).join("\n")}return[n].join("\n")}e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var r=n(t,e);return t[2]?"@media "+t[2]+"{"+r+"}":r}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var a=this[i][0];"number"==typeof a&&(r[a]=!0)}for(i=0;i<e.length;i++){var o=e[i];"number"==typeof o[0]&&r[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),t.push(o))}},t}}})}),VueDragResize=unwrapExports(dist),dist_1=dist.VueDragResize;const{mapGetters:mapGetters$2}=createNamespacedHelpers("KnowledgeBase");var script$5={name:"DragResize",components:{VueDragResize:VueDragResize},props:{maximized:{type:Boolean,required:!0},coordinates:{type:Object,required:!0}},data:()=>({active:!1}),methods:{resize(e){this.coordinates={width:e.width,height:e.height,top:e.top,left:e.left},this.$emit("onChangeCoordinates",this.coordinates)},onActivated(){$(this.$refs.resize.$el).find(".vdr-stick").addClass("mdi mdi-resize-bottom-right q-btn q-btn--dense q-btn--round q-icon contrast-50")},onFocusElement(e){e.target.focus()}},mounted(){this.active=!0}};const __vue_script__$5=script$5;var __vue_render__$5=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.$q.platform.is.desktop?n("vue-drag-resize",{ref:"resize",class:[e.maximized?"fit position-sticky":"modal-mini","overflow-hidden"],attrs:{isActive:e.active,isResizable:!0,isDraggable:!e.maximized,dragHandle:".js-drag",sticks:["br"],x:e.coordinates.left,y:e.coordinates.top,w:e.coordinates.width,h:e.coordinates.height},on:{activated:e.onActivated,resizing:e.resize,dragging:e.resize}},[n("div",{staticClass:"fit",on:{mousedown:function(t){return e.onFocusElement(t)},touchstart:function(t){return e.onFocusElement(t)}}},[e._t("default")],2)]):n("div",{staticClass:"fit"},[e._t("default")],2)],1)},__vue_staticRenderFns__$5=[];__vue_render__$5._withStripped=!0;const __vue_inject_styles__$5=function(e){e&&e("data-v-48d81b3d_0",{source:"\n.modal-mini {\r\n  max-height: unset !important;\r\n  max-width: unset !important;\n}\n.vdr-stick.q-icon:before {\r\n  font-size: 1.718em;\r\n  left: -5px;\r\n  position: relative;\r\n  bottom: 5px;\n}\n.vdr-stick.q-icon {\r\n  bottom: 9px !important;\r\n  right: 25px !important;\r\n  font-size: 14px;\r\n  background: none;\r\n  border: none;\r\n  box-shadow: 0 1px 5px rgba(0, 0, 0, 0.2), 0 2px 2px rgba(0, 0, 0, 0.14), 0 3px 1px -2px rgba(0, 0, 0, 0.12);\r\n  display: none;\r\n  cursor: nwse-resize !important;\r\n  position: absolute !important;\n}\n.vdr.active {\r\n  font-weight: unset;\n}\n.modal-mini .vdr-stick {\r\n  display: inline-flex;\n}\r\n",map:{version:3,sources:["C:\\www\\YetiForceCRM\\public_html\\src\\layouts\\resources\\views\\KnowledgeBase\\components\\DragResize.vue"],names:[],mappings:";AAsFA;EACA,4BAAA;EACA,2BAAA;AACA;AACA;EACA,kBAAA;EACA,UAAA;EACA,kBAAA;EACA,WAAA;AACA;AACA;EACA,sBAAA;EACA,sBAAA;EACA,eAAA;EACA,gBAAA;EACA,YAAA;EACA,2GAAA;EACA,aAAA;EACA,8BAAA;EACA,6BAAA;AACA;AACA;EACA,kBAAA;AACA;AACA;EACA,oBAAA;AACA",file:"DragResize.vue",sourcesContent:['\x3c!--\r\n/**\r\n * DragResize component\r\n *\r\n * @description Use of vue-drag-resize\r\n * @license YetiForce Public License 3.0\r\n * @author Tomasz Poradzewski <t.poradzewski@yetiforce.com>\r\n */\r\n--\x3e\r\n<template>\r\n  <div>\r\n    <vue-drag-resize\r\n      v-if="$q.platform.is.desktop"\r\n      :isActive="active"\r\n      @activated="onActivated"\r\n      :isResizable="true"\r\n      :isDraggable="!maximized"\r\n      v-on:resizing="resize"\r\n      v-on:dragging="resize"\r\n      dragHandle=".js-drag"\r\n      :sticks="[\'br\']"\r\n      :x="coordinates.left"\r\n      :y="coordinates.top"\r\n      :w="coordinates.width"\r\n      :h="coordinates.height"\r\n      :class="[maximized ? \'fit position-sticky\' : \'modal-mini\', \'overflow-hidden\']"\r\n      ref="resize"\r\n    >\r\n      <div class="fit" @mousedown="onFocusElement($event)" @touchstart="onFocusElement($event)">\r\n        <slot></slot>\r\n      </div>\r\n    </vue-drag-resize>\r\n    <div class="fit" v-else>\r\n      <slot></slot>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport VueDragResize from \'vue-drag-resize\'\r\nimport { createNamespacedHelpers } from \'vuex\'\r\nconst { mapGetters } = createNamespacedHelpers(\'KnowledgeBase\')\r\nexport default {\r\n  name: \'DragResize\',\r\n  components: { VueDragResize },\r\n  props: {\r\n    maximized: {\r\n      type: Boolean,\r\n      required: true\r\n    },\r\n    coordinates: {\r\n      type: Object,\r\n      required: true\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      active: false\r\n    }\r\n  },\r\n  methods: {\r\n    resize(newRect) {\r\n      this.coordinates = {\r\n        width: newRect.width,\r\n        height: newRect.height,\r\n        top: newRect.top,\r\n        left: newRect.left\r\n      }\r\n      this.$emit(\'onChangeCoordinates\', this.coordinates)\r\n    },\r\n    onActivated() {\r\n      $(this.$refs.resize.$el)\r\n        .find(\'.vdr-stick\')\r\n        .addClass(\'mdi mdi-resize-bottom-right q-btn q-btn--dense q-btn--round q-icon contrast-50\')\r\n    },\r\n    onFocusElement(event) {\r\n      event.target.focus()\r\n    }\r\n  },\r\n  mounted() {\r\n    this.active = true\r\n  }\r\n}\r\n<\/script>\r\n\r\n<style>\r\n.modal-mini {\r\n  max-height: unset !important;\r\n  max-width: unset !important;\r\n}\r\n.vdr-stick.q-icon:before {\r\n  font-size: 1.718em;\r\n  left: -5px;\r\n  position: relative;\r\n  bottom: 5px;\r\n}\r\n.vdr-stick.q-icon {\r\n  bottom: 9px !important;\r\n  right: 25px !important;\r\n  font-size: 14px;\r\n  background: none;\r\n  border: none;\r\n  box-shadow: 0 1px 5px rgba(0, 0, 0, 0.2), 0 2px 2px rgba(0, 0, 0, 0.14), 0 3px 1px -2px rgba(0, 0, 0, 0.12);\r\n  display: none;\r\n  cursor: nwse-resize !important;\r\n  position: absolute !important;\r\n}\r\n.vdr.active {\r\n  font-weight: unset;\r\n}\r\n.modal-mini .vdr-stick {\r\n  display: inline-flex;\r\n}\r\n</style>\r\n']},media:void 0})},__vue_scope_id__$5=void 0,__vue_module_identifier__$5=void 0,__vue_is_functional_template__$5=!1;var DragResize=normalizeComponent_1({render:__vue_render__$5,staticRenderFns:__vue_staticRenderFns__$5},__vue_inject_styles__$5,__vue_script__$5,void 0,!1,void 0,browser,void 0);const{mapGetters:mapGetters$3,mapActions:mapActions$2}=createNamespacedHelpers("KnowledgeBase");var script$6={name:"ArticlePreviewContent",components:{Icon:Icon,Carousel:Carousel,ArticlesList:ArticlesList,RelatedColumns:RelatedColumns},props:{height:{type:Number,default:0},previewMaximized:{type:Boolean,true:0}},computed:{...mapGetters$3(["tree","record","iconSize"]),relatedRecords(){if(this.record){return Object.keys(this.record.related.dynamic).map(e=>0!==this.record.related.dynamic[e].length&&e).filter(function(e){return"string"==typeof e})}return[]},hasRelatedArticles(){return!!this.record&&0!==this.record.related.base.Articles.length},hasRelatedComments(){return!!this.record&&0!==this.record.related.base.ModComments.length}},watch:{previewMaximized(){this.$emit("onMaximizedToggle",this.previewMaximized)}},methods:{...mapActions$2(["fetchCategories","fetchRecord","initState"]),onResize(e){void 0!==this.$refs.content&&$(this.$refs.content).find("img").css("max-width",e.width)}}};const __vue_script__$6=script$6;var __vue_render__$6=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-card",{staticClass:"KnowledgeBase__ArticlePreview fit"},[n("q-bar",{staticClass:"bg-yeti text-white dialog-header",attrs:{dark:""}},[n("div",{staticClass:"flex items-center"},[n("div",{staticClass:"flex items-center no-wrap ellipsis q-mr-sm-sm"},[n("q-icon",{staticClass:"q-mr-sm",attrs:{name:"mdi-text"}}),e._v("\n        "+e._s(e.record.subject)+"\n      ")],1),e._v(" "),n("div",{staticClass:"flex items-center text-grey-4 small"},[n("div",{staticClass:"flex items-center"},[n("q-icon",{attrs:{name:e.tree.topCategory.icon,size:"15px"}}),e._v(" "),n("q-icon",{attrs:{size:"1.5em",name:"mdi-chevron-right"}}),e._v(" "),n("span",{staticClass:"flex items-center",domProps:{innerHTML:e._s(e.record.category)}}),e._v(" "),n("q-tooltip",[e._v("\n            "+e._s(e.translate("JS_CATEGORY"))+"\n          ")])],1),e._v(" "),n("q-separator",{attrs:{dark:"",vertical:"",spaced:""}}),e._v(" "),n("div",[n("q-icon",{attrs:{name:"mdi-calendar-clock",size:"15px"}}),e._v("\n          "+e._s(e.record.short_createdtime)+"\n          "),n("q-tooltip",[e._v("\n            "+e._s(e.translate("JS_CREATED")+": "+e.record.full_createdtime)+"\n          ")])],1),e._v(" "),e.record.short_modifiedtime?[n("div",[n("q-icon",{attrs:{name:"mdi-square-edit-outline",size:"15px"}}),e._v("\n            "+e._s(e.record.short_modifiedtime)+"\n            "),n("q-tooltip",[e._v("\n              "+e._s(e.translate("JS_MODIFIED")+": "+e.record.full_modifiedtime)+"\n            ")])],1)]:e._e(),e._v(" "),e.record.accountId?[n("q-separator",{attrs:{dark:"",vertical:"",spaced:""}}),e._v(" "),n("icon",{attrs:{icon:"userIcon-Accounts",size:"15px"}}),e._v(" "),n("a",{staticClass:"js-popover-tooltip--record ellipsis q-ml-xs text-grey-4",attrs:{href:"index.php?module=Accounts&view=Detail&record="+e.record.accountId}},[e._v(e._s(e.record.accountName)+"\n          ")])]:e._e()],2)]),e._v(" "),n("q-space"),e._v(" "),e._t("header-right",[e.$q.platform.is.desktop?[n("a",{directives:[{name:"show",rawName:"v-show",value:!e.previewMaximized,expression:"!previewMaximized"}],staticClass:"flex grabbable text-decoration-none text-white",attrs:{href:"#"}},[n("q-icon",{staticClass:"js-drag",attrs:{name:"mdi-drag",size:"19px"}})],1),e._v(" "),n("q-btn",{attrs:{dense:"",flat:"",icon:e.previewMaximized?"mdi-window-restore":"mdi-window-maximize"},on:{click:function(t){e.previewMaximized=!e.previewMaximized}}},[n("q-tooltip",[e._v(e._s(e.previewMaximized?e.translate("JS_MINIMIZE"):e.translate("JS_MAXIMIZE")))])],1)]:e._e(),e._v(" "),n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"mdi-close"}},[n("q-tooltip",[e._v(e._s(e.translate("JS_CLOSE")))])],1)])],2),e._v(" "),n("q-card-section",{class:["scroll",e.previewMaximized?"modal-full-height":""],style:e.height?{"max-height":e.height-31.14+"px"}:{}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.record.introduction,expression:"record.introduction"}]},[n("div",{staticClass:"text-subtitle2 text-bold"},[e._v(e._s(e.record.introduction))])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.record.content,expression:"record.content"}]},[n("q-resize-observer",{on:{resize:e.onResize}}),e._v(" "),n("div",{ref:"content"},["PLL_PRESENTATION"===e.record.view&&e.record.content.length>1?n("carousel",{attrs:{record:e.record}}):n("div",[n("q-separator"),e._v(" "),n("div",{domProps:{innerHTML:e._s("object"==typeof e.record.content?e.record.content[0]:e.record.content)}})],1)],1)],1),e._v(" "),e.hasRelatedComments?n("div",[n("q-separator"),e._v(" "),n("div",{staticClass:"q-pa-md q-table__title"},[e._v(e._s(e.translate("JS_COMMENTS")))]),e._v(" "),n("q-list",{attrs:{padding:""}},e._l(e.record.related.base.ModComments,function(t,r){return n("q-item",{key:r},[n("q-item-section",{attrs:{avatar:"",top:""}},[n("q-avatar",{attrs:{size:"iconSize"}},[void 0!==t.avatar.url?n("img",{attrs:{src:t.avatar.url}}):n("q-icon",{attrs:{name:"mdi-account"}})],1)],1),e._v(" "),n("q-item-section",[n("q-item-label",[n("a",{staticClass:"js-popover-tooltip--record",attrs:{href:"index.php?module=Users&view=Detail&record="+t.userid}},[e._v(e._s(t.userName)+"\n              ")])]),e._v(" "),n("q-item-label",[n("div",{domProps:{innerHTML:e._s(t.comment)}})])],1),e._v(" "),n("q-item-section",{attrs:{side:"",top:""}},[n("q-item-label",{attrs:{caption:""}},[e._v(e._s(t.modifiedShort))]),e._v(" "),n("q-tooltip",{attrs:{anchor:"top middle",self:"center middle"}},[e._v("\n              "+e._s(e.translate("JS_MODIFIED")+": "+t.modifiedFull)+"\n            ")])],1)],1)}),1)],1):e._e(),e._v(" "),e.hasRelatedArticles?n("div",[n("q-separator"),e._v(" "),e.record.related?n("articles-list",{attrs:{data:e.record.related.base.Articles,title:e.translate("JS_RELATED_ARTICLES")}}):e._e()],1):e._e(),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.relatedRecords.length,expression:"relatedRecords.length"}]},[n("q-separator"),e._v(" "),n("div",{staticClass:"q-pa-md q-table__title"},[e._v(e._s(e.translate("JS_RELATED_RECORDS")))]),e._v(" "),n("related-columns",{attrs:{columnBlocks:e.relatedRecords},scopedSlots:e._u([{key:"default",fn:function(t){return[n("q-list",{attrs:{bordered:"",padding:"",dense:""}},[n("q-item",{staticClass:"text-black flex",attrs:{header:"",clickable:""}},[n("icon",{staticClass:"mr-2",attrs:{icon:"userIcon-"+t.relatedBlock,size:e.iconSize}}),e._v("\n              "+e._s(e.record.translations[t.relatedBlock])+"\n            ")],1),e._v(" "),e._l(e.record.related.dynamic[t.relatedBlock],function(r,i){return n("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:i,staticClass:"text-subtitle2",attrs:{clickable:""}},[n("q-item-section",{staticClass:"align-items-center flex-row no-wrap justify-content-start"},[n("a",{staticClass:"js-popover-tooltip--record ellipsis",attrs:{href:"index.php?module="+t.relatedBlock+"&view=Detail&record="+i}},[e._v("\n                  "+e._s(r)+"\n                ")])])],1)})],2)]}}])})],1)])],1)},__vue_staticRenderFns__$6=[];__vue_render__$6._withStripped=!0;const __vue_inject_styles__$6=function(e){e&&e("data-v-76597fb2_0",{source:"\n.dialog-header {\n  padding-top: 3px !important;\n  padding-bottom: 3px !important;\n  height: unset !important;\n}\n.modal-full-height {\n  max-height: calc(100vh - 31.14px) !important;\n}\n.grabbable:hover {\n  cursor: move;\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n}\n.grabbable:active {\n  cursor: grabbing;\n  cursor: -moz-grabbing;\n  cursor: -webkit-grabbing;\n}\n.contrast-50 {\n  filter: contrast(50%);\n}\n",map:{version:3,sources:["C:\\www\\YetiForceCRM\\public_html\\src\\layouts\\resources\\views\\KnowledgeBase\\components\\ArticlePreviewContent.vue"],names:[],mappings:";AA8NA;EACA,2BAAA;EACA,8BAAA;EACA,wBAAA;AACA;AACA;EACA,4CAAA;AACA;AACA;EACA,YAAA;EACA,YAAA;EACA,iBAAA;EACA,oBAAA;AACA;AACA;EACA,gBAAA;EACA,qBAAA;EACA,wBAAA;AACA;AACA;EACA,qBAAA;AACA",file:"ArticlePreviewContent.vue",sourcesContent:['\x3c!--\n/**\n * ArticlePreviewContent component\n *\n * @description Part of q-dialog\n * @license YetiForce Public License 3.0\n * @author Tomasz Poradzewski <t.poradzewski@yetiforce.com>\n */\n--\x3e\n<template>\n  <q-card class="KnowledgeBase__ArticlePreview fit">\n    <q-bar dark class="bg-yeti text-white dialog-header">\n      <div class="flex items-center">\n        <div class="flex items-center no-wrap ellipsis q-mr-sm-sm">\n          <q-icon name="mdi-text" class="q-mr-sm" />\n          {{ record.subject }}\n        </div>\n        <div class="flex items-center text-grey-4 small">\n          <div class="flex items-center">\n            <q-icon :name="tree.topCategory.icon" size="15px"></q-icon>\n            <q-icon size="1.5em" name="mdi-chevron-right" />\n            <span v-html="record.category" class="flex items-center"></span>\n            <q-tooltip>\n              {{ translate(\'JS_CATEGORY\') }}\n            </q-tooltip>\n          </div>\n          <q-separator dark vertical spaced />\n          <div>\n            <q-icon name="mdi-calendar-clock" size="15px"></q-icon>\n            {{ record.short_createdtime }}\n            <q-tooltip>\n              {{ translate(\'JS_CREATED\') + \': \' + record.full_createdtime }}\n            </q-tooltip>\n          </div>\n          <template v-if="record.short_modifiedtime">\n            <div>\n              <q-icon name="mdi-square-edit-outline" size="15px"></q-icon>\n              {{ record.short_modifiedtime }}\n              <q-tooltip>\n                {{ translate(\'JS_MODIFIED\') + \': \' + record.full_modifiedtime }}\n              </q-tooltip>\n            </div>\n          </template>\n          <template v-if="record.accountId">\n            <q-separator dark vertical spaced />\n            <icon icon="userIcon-Accounts" size="15px"></icon>\n            <a\n              class="js-popover-tooltip--record ellipsis q-ml-xs text-grey-4"\n              :href="`index.php?module=Accounts&view=Detail&record=${record.accountId}`"\n              >{{ record.accountName }}\n            </a>\n          </template>\n        </div>\n      </div>\n      <q-space />\n      <slot name="header-right">\n        <template v-if="$q.platform.is.desktop">\n          <a v-show="!previewMaximized" class="flex grabbable text-decoration-none text-white" href="#">\n            <q-icon class="js-drag" name="mdi-drag" size="19px" />\n          </a>\n          <q-btn\n            dense\n            flat\n            :icon="previewMaximized ? \'mdi-window-restore\' : \'mdi-window-maximize\'"\n            @click="previewMaximized = !previewMaximized"\n          >\n            <q-tooltip>{{ previewMaximized ? translate(\'JS_MINIMIZE\') : translate(\'JS_MAXIMIZE\') }}</q-tooltip>\n          </q-btn>\n        </template>\n        <q-btn dense flat icon="mdi-close" v-close-popup>\n          <q-tooltip>{{ translate(\'JS_CLOSE\') }}</q-tooltip>\n        </q-btn>\n      </slot>\n    </q-bar>\n    <q-card-section\n      :class="[\'scroll\', previewMaximized ? \'modal-full-height\' : \'\']"\n      :style="height ? { \'max-height\': `${height - 31.14}px` } : {}"\n    >\n      <div v-show="record.introduction">\n        <div class="text-subtitle2 text-bold">{{ record.introduction }}</div>\n      </div>\n      <div v-show="record.content">\n        <q-resize-observer @resize="onResize" />\n        <div ref="content">\n          <carousel v-if="record.view === \'PLL_PRESENTATION\' && record.content.length > 1" :record="record" />\n          <div v-else>\n            <q-separator />\n            <div v-html="typeof record.content === \'object\' ? record.content[0] : record.content"></div>\n          </div>\n        </div>\n      </div>\n      <div v-if="hasRelatedComments">\n        <q-separator />\n        <div class="q-pa-md q-table__title">{{ translate(\'JS_COMMENTS\') }}</div>\n        <q-list padding>\n          <q-item v-for="(relatedRecord, relatedRecordId) in record.related.base.ModComments" :key="relatedRecordId">\n            <q-item-section avatar top>\n              <q-avatar size="iconSize">\n                <img v-if="relatedRecord.avatar.url !== undefined" :src="relatedRecord.avatar.url" />\n                <q-icon v-else name="mdi-account" />\n              </q-avatar>\n            </q-item-section>\n            <q-item-section>\n              <q-item-label>\n                <a\n                  class="js-popover-tooltip--record"\n                  :href="`index.php?module=Users&view=Detail&record=${relatedRecord.userid}`"\n                  >{{ relatedRecord.userName }}\n                </a>\n              </q-item-label>\n              <q-item-label><div v-html="relatedRecord.comment"></div></q-item-label>\n            </q-item-section>\n            <q-item-section side top>\n              <q-item-label caption>{{ relatedRecord.modifiedShort }}</q-item-label>\n              <q-tooltip anchor="top middle" self="center middle">\n                {{ translate(\'JS_MODIFIED\') + \': \' + relatedRecord.modifiedFull }}\n              </q-tooltip>\n            </q-item-section>\n          </q-item>\n        </q-list>\n      </div>\n      <div v-if="hasRelatedArticles">\n        <q-separator />\n        <articles-list\n          v-if="record.related"\n          :data="record.related.base.Articles"\n          :title="translate(\'JS_RELATED_ARTICLES\')"\n        />\n      </div>\n      <div v-show="relatedRecords.length">\n        <q-separator />\n        <div class="q-pa-md q-table__title">{{ translate(\'JS_RELATED_RECORDS\') }}</div>\n        <related-columns :columnBlocks="relatedRecords">\n          <template v-slot:default="slotProps">\n            <q-list bordered padding dense>\n              <q-item header clickable class="text-black flex">\n                <icon :icon="\'userIcon-\' + slotProps.relatedBlock" :size="iconSize" class="mr-2"></icon>\n                {{ record.translations[slotProps.relatedBlock] }}\n              </q-item>\n              <q-item\n                clickable\n                v-for="(relatedRecord, relatedRecordId) in record.related.dynamic[slotProps.relatedBlock]"\n                :key="relatedRecordId"\n                class="text-subtitle2"\n                v-ripple\n              >\n                <q-item-section class="align-items-center flex-row no-wrap justify-content-start">\n                  <a\n                    class="js-popover-tooltip--record ellipsis"\n                    :href="`index.php?module=${slotProps.relatedBlock}&view=Detail&record=${relatedRecordId}`"\n                  >\n                    {{ relatedRecord }}\n                  </a>\n                </q-item-section>\n              </q-item>\n            </q-list>\n          </template>\n        </related-columns>\n      </div>\n    </q-card-section>\n  </q-card>\n</template>\n<script>\nimport Icon from \'../../../../../components/Icon.vue\'\nimport Carousel from \'./Carousel.vue\'\nimport ArticlesList from \'./ArticlesList.vue\'\nimport RelatedColumns from \'./RelatedColumns.vue\'\n\nimport { createNamespacedHelpers } from \'vuex\'\nconst { mapGetters, mapActions } = createNamespacedHelpers(\'KnowledgeBase\')\nexport default {\n  name: \'ArticlePreviewContent\',\n  components: { Icon, Carousel, ArticlesList, RelatedColumns },\n  props: {\n    height: {\n      type: Number,\n      default: 0\n    },\n    previewMaximized: {\n      type: Boolean,\n      true: 0\n    }\n  },\n  computed: {\n    ...mapGetters([\'tree\', \'record\', \'iconSize\']),\n    relatedRecords() {\n      if (this.record) {\n        let arr = Object.keys(this.record.related.dynamic).map(key => {\n          return this.record.related.dynamic[key].length !== 0 ? key : false\n        })\n        return arr.filter(function(item) {\n          return typeof item === \'string\'\n        })\n      } else {\n        return []\n      }\n    },\n    hasRelatedArticles() {\n      return this.record ? this.record.related.base.Articles.length !== 0 : false\n    },\n    hasRelatedComments() {\n      return this.record ? this.record.related.base.ModComments.length !== 0 : false\n    }\n  },\n  watch: {\n    previewMaximized() {\n      this.$emit(\'onMaximizedToggle\', this.previewMaximized)\n    }\n  },\n  methods: {\n    ...mapActions([\'fetchCategories\', \'fetchRecord\', \'initState\']),\n    onResize(size) {\n      if (this.$refs.content !== undefined) {\n        $(this.$refs.content)\n          .find(\'img\')\n          .css(\'max-width\', size.width)\n      }\n    }\n  }\n}\n<\/script>\n<style>\n.dialog-header {\n  padding-top: 3px !important;\n  padding-bottom: 3px !important;\n  height: unset !important;\n}\n.modal-full-height {\n  max-height: calc(100vh - 31.14px) !important;\n}\n.grabbable:hover {\n  cursor: move;\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n}\n.grabbable:active {\n  cursor: grabbing;\n  cursor: -moz-grabbing;\n  cursor: -webkit-grabbing;\n}\n.contrast-50 {\n  filter: contrast(50%);\n}\n</style>\n']},media:void 0})},__vue_scope_id__$6=void 0,__vue_module_identifier__$6=void 0,__vue_is_functional_template__$6=!1;var ArticlePreviewContent=normalizeComponent_1({render:__vue_render__$6,staticRenderFns:__vue_staticRenderFns__$6},__vue_inject_styles__$6,__vue_script__$6,void 0,!1,void 0,browser,void 0);const{mapGetters:mapGetters$4}=createNamespacedHelpers("KnowledgeBase");var script$7={name:"ArticlePreview",components:{ArticlePreviewContent:ArticlePreviewContent,DragResize:DragResize},props:{isDragResize:{type:Boolean,default:!0},maximizedOnly:{type:Boolean,default:!1},previewDialog:{type:Boolean,default:!1}},data:()=>({coordinates:{width:Quasar.plugins.Screen.width-100,height:Quasar.plugins.Screen.height-100,top:0,left:Quasar.plugins.Screen.width-(Quasar.plugins.Screen.width-50)},previewMaximized:!0}),watch:{previewDialog(){this.$emit("onDialogToggle",this.previewDialog)}},methods:{onChangeCoordinates:function(e){this.coordinates=e},onMaximizedToggle(e){this.previewMaximized=e}}};const __vue_script__$7=script$7;var __vue_render__$7=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-dialog",{attrs:{maximized:!!e.maximizedOnly||e.previewMaximized,"transition-show":"slide-up","transition-hide":"slide-down","content-class":"quasar-reset"},model:{value:e.previewDialog,callback:function(t){e.previewDialog=t},expression:"previewDialog"}},[e.isDragResize?n("drag-resize",{attrs:{coordinates:e.coordinates,maximized:e.previewMaximized},on:{onChangeCoordinates:e.onChangeCoordinates}},[n("article-preview-content",{attrs:{height:e.coordinates.height,previewMaximized:e.previewMaximized},on:{onMaximizedToggle:e.onMaximizedToggle}})],1):n("article-preview-content",[n("template",{slot:"header-right"},[e._t("header-right")],2)],2)],1)},__vue_staticRenderFns__$7=[];__vue_render__$7._withStripped=!0;const __vue_inject_styles__$7=function(e){e&&e("data-v-4d136050_0",{source:"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",map:{version:3,sources:[],names:[],mappings:"",file:"ArticlePreview.vue"},media:void 0})},__vue_scope_id__$7=void 0,__vue_module_identifier__$7=void 0,__vue_is_functional_template__$7=!1;var ArticlePreview=normalizeComponent_1({render:__vue_render__$7,staticRenderFns:__vue_staticRenderFns__$7},__vue_inject_styles__$7,__vue_script__$7,void 0,!1,void 0,browser,void 0);const{mapGetters:mapGetters$5}=createNamespacedHelpers("KnowledgeBase");var script$8={name:"CategoriesList",components:{Icon:Icon},props:{activeCategory:{type:String,required:!0},data:{type:Object,required:!0}},computed:{...mapGetters$5(["tree","iconSize","defaultTreeIcon"])},methods:{fetchParentCategoryData(){let e="";const t=this.tree.categories[this.activeCategory].parentTree;1!==t.length&&(e=t[t.length-2]),this.$emit("fetchData",e)}}};const __vue_script__$8=script$8;var __vue_render__$8=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-list",[n("q-item",{directives:[{name:"show",rawName:"v-show",value:""===e.activeCategory,expression:"activeCategory === ''"}],attrs:{active:""}},[n("q-item-section",{attrs:{avatar:""}},[n("q-icon",{attrs:{name:e.tree.topCategory.icon,size:e.iconSize}})],1),e._v(" "),n("q-item-section",[e._v(e._s(e.translate(e.tree.topCategory.label)))])],1),e._v(" "),""!==e.activeCategory?n("q-item",{attrs:{clickable:"",active:""},on:{click:function(t){return e.fetchParentCategoryData()}}},[n("q-item-section",{attrs:{avatar:""}},[n("icon",{attrs:{size:e.iconSize,icon:e.tree.categories[e.activeCategory].icon||e.defaultTreeIcon}})],1),e._v(" "),n("q-item-section",[e._v(e._s(e.tree.categories[e.activeCategory].label))]),e._v(" "),n("q-item-section",{attrs:{avatar:""}},[n("q-icon",{attrs:{name:"mdi-chevron-left"}})],1)],1):e._e(),e._v(" "),e._l(e.data.categories,function(t,r){return n("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:r,attrs:{clickable:""},on:{click:function(n){return e.$emit("fetchData",t)}}},[n("q-item-section",{attrs:{avatar:""}},[n("icon",{attrs:{size:e.iconSize,icon:e.tree.categories[t].icon||e.defaultTreeIcon}})],1),e._v(" "),n("q-item-section",[e._v(e._s(e.tree.categories[t].label))]),e._v(" "),n("q-item-section",{attrs:{avatar:""}},[n("q-icon",{attrs:{name:"mdi-chevron-right"}})],1)],1)})],2)},__vue_staticRenderFns__$8=[];__vue_render__$8._withStripped=!0;const __vue_inject_styles__$8=function(e){e&&e("data-v-4093082a_0",{source:"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",map:{version:3,sources:[],names:[],mappings:"",file:"CategoriesList.vue"},media:void 0})},__vue_scope_id__$8=void 0,__vue_module_identifier__$8=void 0,__vue_is_functional_template__$8=!1;var CategoriesList=normalizeComponent_1({render:__vue_render__$8,staticRenderFns:__vue_staticRenderFns__$8},__vue_inject_styles__$8,__vue_script__$8,void 0,!1,void 0,browser,void 0);const{mapGetters:mapGetters$6,mapActions:mapActions$3}=createNamespacedHelpers("KnowledgeBase");var script$9={name:"KnowledgeBase",components:{Icon:Icon,IconInfo:IconInfo,Carousel:Carousel,ArticlesList:ArticlesList,ArticlePreview:ArticlePreview,RelatedColumns:RelatedColumns,CategoriesList:CategoriesList},props:{coordinates:{type:Object,default:()=>({width:0,height:0,top:0,left:0})}},data:()=>({drawerBehaviour:"desktop",miniState:!1,left:!0,filter:"",accountSearch:"",categorySearch:!1,searchData:!1,activeCategory:"",activeAccount:"",previewDialog:!1,tab:"categories",showAccounts:!1,data:{categories:[],records:[],featured:{}},accountsData:{categories:[],records:[],featured:{}},accounts:[]}),computed:{...mapGetters$6(["tree","record","iconSize","moduleName","maximized","defaultTreeIcon"]),accountsList(){return""===this.accountSearch?this.accounts:this.accounts.filter(e=>e.name.toLowerCase().includes(this.accountSearch.toLowerCase()))},selectedTabData(){return"categories"===this.tab?this.data:this.accountsData},searchDataArray(){return this.searchData?this.searchData:[]},featuredCategories(){if(void 0===this.selectedTabData.featured.length&&this.selectedTabData.categories){return this.selectedTabData.categories.map(e=>!!this.selectedTabData.featured[e]&&e).filter(function(e){return"string"==typeof e})}return[]},inputFocus:{set:e=>!1,get(){return this.filter.length>0}}},methods:{...mapActions$3(["fetchRecord","fetchCategories"]),onTabChange(e){0===this.accounts.length&&"accounts"===e&&this.fetchAccounts()},fetchAccounts(){const e=$.Deferred(),t=$.progressIndicator({blockInfo:{enabled:!0}});return AppConnector.request({module:this.moduleName,action:"KnowledgeBaseAjax",mode:"getAccounts"}).done(n=>{let r=n.result;r&&(r=Object.keys(r).map(function(e){return{name:r[e],id:e}})),this.accounts=r,t.progressIndicator({mode:"hide"}),e.resolve(r)})},search(){this.filter.length>=3?this.debouncedSearch():this.searchData=!1},clearSearch(){this.filter="",this.searchData=!1},fetchData(e="",t=""){const n=$.Deferred();null!==e&&(this.activeCategory=e);const r=$.progressIndicator({blockInfo:{enabled:!0}});return AppConnector.request({module:this.moduleName,action:"KnowledgeBaseAjax",mode:"list",category:e,accountid:t}).done(e=>{let i=e.result;i.showAccounts&&(this.showAccounts=!0),i.records&&(i.records=Object.keys(i.records).map(function(e){return{...i.records[e],id:e}})),""!==t?this.accountsData=i:this.data=i,r.progressIndicator({mode:"hide"}),n.resolve(i)})},openQuickCreateModal(){(new window.Vtiger_Header_Js).quickCreateModule(this.moduleName)},showArticlePreview(e){this.fetchRecord(e).then(()=>{this.previewDialog=!0})},toggleDrawer(){this.$q.platform.is.desktop&&(!this.coordinates.width||this.coordinates.width>700)?this.miniState=!this.miniState:this.left=!this.left},onDialogToggle(e){this.previewDialog=e}},async created(){await this.fetchCategories(),await this.fetchData()},mounted(){this.debouncedSearch=Quasar.utils.debounce(()=>{if(this.filter.length<3)return;const e=$.Deferred(),t=$.progressIndicator({blockInfo:{enabled:!0}});AppConnector.request({module:this.moduleName,action:"KnowledgeBaseAjax",mode:"search",value:this.filter,category:this.categorySearch?this.activeCategory:""}).done(n=>{let r=n.result;return r&&(r=Object.keys(r).map(function(e){return{...r[e],id:e}})),this.searchData=r,e.resolve(r),t.progressIndicator({mode:"hide"}),r})},1e3)}};const __vue_script__$9=script$9;var __vue_render__$9=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"KnowledgeBase h-100"},[n("q-layout",{staticClass:"absolute",style:e.coordinates.height&&!e.maximized?{"max-height":e.coordinates.height-31.14+"px"}:{},attrs:{view:"hHh Lpr fFf",container:""}},[n("q-header",{staticClass:"bg-white text-primary",attrs:{elevated:""}},[n("q-toolbar",{staticClass:"flex-md-nowrap flex-wrap items-center q-gutter-x-md q-gutter-y-sm q-pl-md q-pr-none q-py-xs"},[n("div",{class:["flex items-center no-wrap flex-md-grow-1 q-mr-sm-sm",e.searchData?"invisible":""]},[n("q-btn",{attrs:{dense:"",round:"",push:"",icon:"mdi-menu"},on:{click:function(t){return e.toggleDrawer()}}},[n("q-tooltip",[e._v(e._s(e.translate("JS_TOGGLE_CATEGORY_MENU")))])],1),e._v(" "),n("q-breadcrumbs",{directives:[{name:"show",rawName:"v-show",value:"categories"===e.tab,expression:"tab === 'categories'"}],staticClass:"ml-2",scopedSlots:e._u([{key:"separator",fn:function(){return[n("q-icon",{attrs:{size:"1.5em",name:"mdi-chevron-right"}})]},proxy:!0}])},[e._v(" "),n("q-breadcrumbs-el",{class:[""===e.activeCategory?"text-black":"cursor-pointer"],attrs:{icon:e.tree.topCategory.icon,label:e.translate(e.tree.topCategory.label)},on:{click:function(t){""!==e.activeCategory&&e.fetchData()}}}),e._v(" "),""!==e.activeCategory?e._l(e.tree.categories[e.activeCategory].parentTree,function(t,r){return n("q-breadcrumbs-el",{key:r,class:[r===e.tree.categories[e.activeCategory].parentTree.length-1?"text-black":"cursor-pointer"],on:{click:function(n){r!==e.tree.categories[e.activeCategory].parentTree.length-1&&e.fetchData(t)}}},[e.tree.categories[t].icon?n("icon",{staticClass:"q-mr-sm",attrs:{size:e.iconSize,icon:e.tree.categories[t].icon}}):e._e(),e._v("\n                "+e._s(e.tree.categories[t].label)+"\n              ")],1)}):e._e()],2),e._v(" "),n("q-breadcrumbs",{directives:[{name:"show",rawName:"v-show",value:"accounts"===e.tab,expression:"tab === 'accounts'"}],staticClass:"ml-2"},[""!==e.activeAccount?n("q-breadcrumbs-el",{staticClass:"text-black"},[n("icon",{staticClass:"q-mr-sm",attrs:{size:e.iconSize,icon:"userIcon-Accounts"}}),e._v("\n              "+e._s(e.activeAccount)+"\n            ")],1):e._e()],1)],1),e._v(" "),n("div",{staticClass:"tree-search flex flex-grow-1 no-wrap order-sm-none order-xs-last"},[n("q-input",{staticClass:"full-width",attrs:{placeholder:e.translate("JS_SEARCH_PLACEHOLDER"),rounded:"",outlined:"",type:"search",autofocus:""},on:{input:e.search},scopedSlots:e._u([{key:"prepend",fn:function(){return[n("q-icon",{attrs:{name:"mdi-magnify"}}),e._v(" "),n("q-tooltip",{attrs:{anchor:"top middle",self:"center middle"},model:{value:e.inputFocus,callback:function(t){e.inputFocus=t},expression:"inputFocus"}},[e._v(e._s(e.translate("JS_INPUT_TOO_SHORT").replace("_LENGTH_","3")))])]},proxy:!0},{key:"append",fn:function(){return[""!==e.filter?n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"mdi-close"},on:{click:function(t){return t.stopPropagation(),e.clearSearch()}}}):e._e(),e._v(" "),n("div",{staticClass:"flex items-center q-ml-sm"},[n("icon-info",{attrs:{customOptions:{iconSize:"21px"}}},[n("div",{staticStyle:{"white-space":"pre-line"},domProps:{innerHTML:e._s(e.translate("JS_FULL_TEXT_SEARCH_INFO"))}})])],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:""!==e.activeCategory,expression:"activeCategory !== ''"}],staticClass:"flex"},[n("q-toggle",{attrs:{icon:"mdi-file-tree"},model:{value:e.categorySearch,callback:function(t){e.categorySearch=t},expression:"categorySearch"}}),e._v(" "),n("q-tooltip",[e._v(e._s(e.translate("JS_SEARCH_CURRENT_CATEGORY")))])],1)]},proxy:!0}]),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})],1),e._v(" "),n("div",{staticClass:"flex-md-grow-1 flex justify-end q-ml-sm-sm"},[n("q-btn",{attrs:{round:"",dense:"",color:"white","text-color":"primary",icon:"mdi-plus"},on:{click:function(t){return e.openQuickCreateModal()}}},[n("q-tooltip",[e._v(e._s(e.translate("JS_QUICK_CREATE")))])],1)],1)])],1),e._v(" "),n("q-drawer",{directives:[{name:"show",rawName:"v-show",value:!e.searchData,expression:"!searchData"}],ref:"drawer",attrs:{side:"left",elevated:"",mini:!!e.$q.platform.is.desktop&&e.miniState,width:e.searchData?0:250,breakpoint:700,"content-class":"bg-white text-black","content-style":"overflow: hidden !important"},model:{value:e.left,callback:function(t){e.left=t},expression:"left"}},[e.showAccounts?[n("q-tabs",{staticClass:"text-grey",attrs:{dense:"","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},on:{input:e.onTabChange},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[n("q-tab",{attrs:{name:"categories",label:e.translate("JS_CATEGORIES")}}),e._v(" "),n("q-tab",{attrs:{name:"accounts",label:e.translate("JS_ACCOUNTS")}})],1),e._v(" "),n("q-tab-panels",{staticStyle:{height:"calc(100% - 36px)"},attrs:{animated:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[n("q-tab-panel",{attrs:{name:"categories"}},[n("q-scroll-area",{staticClass:"fit"},[n("categories-list",{attrs:{data:e.data,activeCategory:e.activeCategory},on:{fetchData:e.fetchData}})],1)],1),e._v(" "),n("q-tab-panel",{attrs:{name:"accounts"}},[n("div",{staticClass:"q-px-sm"},[n("q-input",{attrs:{placeholder:e.translate("JS_SEARCH_PLACEHOLDER"),dense:""},scopedSlots:e._u([{key:"prepend",fn:function(){return[n("q-icon",{attrs:{name:"mdi-magnify",size:"16px"}})]},proxy:!0},{key:"append",fn:function(){return[n("q-icon",{directives:[{name:"show",rawName:"v-show",value:""!==e.accountSearch,expression:"accountSearch !== ''"}],staticClass:"cursor-pointer",attrs:{name:"mdi-close",size:"16px"},on:{click:function(t){e.accountSearch=""}}})]},proxy:!0}],null,!1,107416869),model:{value:e.accountSearch,callback:function(t){e.accountSearch=t},expression:"accountSearch"}})],1),e._v(" "),n("q-scroll-area",{staticStyle:{height:"calc(100% - 56px)"}},[n("q-list",e._l(e.accountsList,function(t){return n("q-item",{key:t,attrs:{active:e.activeAccount===t.name,clickable:""},on:{click:function(n){e.fetchData(null,t.id),e.activeAccount=t.name}}},[n("q-item-section",[e._v(e._s(t.name))]),e._v(" "),n("q-item-section",{attrs:{avatar:""}},[n("a",{staticClass:"js-popover-tooltip--record ellipsis",attrs:{href:"index.php?module=Accounts&view=Detail&record="+t.id},on:{click:function(e){e.preventDefault()}}},[n("q-icon",{attrs:{name:"mdi-link"}})],1)])],1)}),1)],1)],1)],1)]:n("q-scroll-area",{staticClass:"fit"},[n("categories-list",{attrs:{data:e.data,activeCategory:e.activeCategory},on:{fetchData:e.fetchData}})],1)],2),e._v(" "),n("q-page-container",[n("q-page",{staticClass:"q-pa-sm"},[n("div",{directives:[{name:"show",rawName:"v-show",value:!e.searchData,expression:"!searchData"}]},[n("related-columns",{directives:[{name:"show",rawName:"v-show",value:e.featuredCategories.length,expression:"featuredCategories.length"}],staticClass:"q-pa-sm",attrs:{columnBlocks:e.featuredCategories},scopedSlots:e._u([{key:"default",fn:function(t){return[n("q-list",{attrs:{bordered:"",padding:"",dense:""}},[n("q-item",{staticClass:"text-black flex",attrs:{header:"",clickable:""},on:{click:function(n){return e.fetchData(t.relatedBlock)}}},[n("icon",{staticClass:"mr-2",attrs:{icon:e.tree.categories[t.relatedBlock].icon,size:e.iconSize}}),e._v("\n                  "+e._s(e.tree.categories[t.relatedBlock].label)+"\n                ")],1),e._v(" "),e._l(e.selectedTabData.featured[t.relatedBlock],function(t){return n("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:t.id,staticClass:"text-subtitle2",attrs:{clickable:""},on:{click:function(n){return n.preventDefault(),e.showArticlePreview(t.id)}}},[n("q-item-section",{staticClass:"align-items-center flex-row no-wrap justify-content-start"},[n("q-icon",{staticClass:"mr-2",attrs:{name:"mdi-star",size:e.iconSize}}),e._v(" "),n("a",{staticClass:"js-popover-tooltip--record ellipsis",attrs:{href:"index.php?module="+e.moduleName+"&view=Detail&record="+t.id}},[e._v(e._s(t.subject))])],1)],1)})],2)]}}])}),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:""!==e.activeCategory||"accounts"===e.tab,expression:"activeCategory !== '' || tab === 'accounts'"}]},[n("q-separator",{directives:[{name:"show",rawName:"v-show",value:e.featuredCategories.length,expression:"featuredCategories.length"}]}),e._v(" "),n("articles-list",{attrs:{data:e.selectedTabData.records,title:e.translate("JS_ARTICLES")},on:{onClickRecord:function(t){e.previewDialog=!0}}})],1)],1),e._v(" "),n("articles-list",{directives:[{name:"show",rawName:"v-show",value:e.searchData,expression:"searchData"}],attrs:{data:e.searchDataArray,title:e.translate("JS_ARTICLES")},on:{onClickRecord:function(t){e.previewDialog=!0}}})],1)],1)],1),e._v(" "),n("article-preview",{attrs:{isDragResize:!0,previewDialog:e.previewDialog},on:{onDialogToggle:e.onDialogToggle}})],1)},__vue_staticRenderFns__$9=[];__vue_render__$9._withStripped=!0;const __vue_inject_styles__$9=function(e){e&&e("data-v-c038261e_0",{source:"\n.tree-search {\n  min-width: 320px;\n  width: 50%;\n}\n.tree-search .q-field__control,\n.tree-search .q-field__marginal {\n  height: 40px;\n}\n",map:{version:3,sources:["C:\\www\\YetiForceCRM\\public_html\\src\\layouts\\resources\\views\\KnowledgeBase\\KnowledgeBase.vue"],names:[],mappings:";AAkcA;EACA,gBAAA;EACA,UAAA;AACA;AACA;;EAEA,YAAA;AACA",file:"KnowledgeBase.vue",sourcesContent:['\x3c!--\n/**\n * KnowledgeBase component\n *\n * @description Knowledge base view root component\n * @license YetiForce Public License 3.0\n * @author Tomasz Poradzewski <t.poradzewski@yetiforce.com>\n */\n--\x3e\n<template>\n  <div class="KnowledgeBase h-100">\n    <q-layout\n      view="hHh Lpr fFf"\n      container\n      class="absolute"\n      :style="coordinates.height && !maximized ? { \'max-height\': `${coordinates.height - 31.14}px` } : {}"\n    >\n      <q-header elevated class="bg-white text-primary">\n        <q-toolbar class="flex-md-nowrap flex-wrap items-center q-gutter-x-md q-gutter-y-sm q-pl-md q-pr-none q-py-xs">\n          <div :class="[\'flex items-center no-wrap flex-md-grow-1 q-mr-sm-sm\', searchData ? \'invisible\' : \'\']">\n            <q-btn dense round push icon="mdi-menu" @click="toggleDrawer()">\n              <q-tooltip>{{ translate(\'JS_TOGGLE_CATEGORY_MENU\') }}</q-tooltip>\n            </q-btn>\n            <q-breadcrumbs class="ml-2" v-show="tab === \'categories\'">\n              <template v-slot:separator>\n                <q-icon size="1.5em" name="mdi-chevron-right" />\n              </template>\n              <q-breadcrumbs-el\n                :icon="tree.topCategory.icon"\n                :label="translate(tree.topCategory.label)"\n                @click="activeCategory === \'\' ? \'\' : fetchData()"\n                :class="[activeCategory === \'\' ? \'text-black\' : \'cursor-pointer\']"\n              />\n              <template v-if="activeCategory !== \'\'">\n                <q-breadcrumbs-el\n                  v-for="(category, index) in tree.categories[activeCategory].parentTree"\n                  :key="index"\n                  :class="[\n                    index === tree.categories[activeCategory].parentTree.length - 1 ? \'text-black\' : \'cursor-pointer\'\n                  ]"\n                  @click="index === tree.categories[activeCategory].parentTree.length - 1 ? \'\' : fetchData(category)"\n                >\n                  <icon\n                    v-if="tree.categories[category].icon"\n                    :size="iconSize"\n                    :icon="tree.categories[category].icon"\n                    class="q-mr-sm"\n                  ></icon>\n                  {{ tree.categories[category].label }}\n                </q-breadcrumbs-el>\n              </template>\n            </q-breadcrumbs>\n            <q-breadcrumbs class="ml-2" v-show="tab === \'accounts\'">\n              <q-breadcrumbs-el v-if="activeAccount !== \'\'" class="text-black">\n                <icon :size="iconSize" :icon="\'userIcon-Accounts\'" class="q-mr-sm"></icon>\n                {{ activeAccount }}\n              </q-breadcrumbs-el>\n            </q-breadcrumbs>\n          </div>\n          <div class="tree-search flex flex-grow-1 no-wrap order-sm-none order-xs-last">\n            <q-input\n              class="full-width"\n              v-model="filter"\n              :placeholder="translate(\'JS_SEARCH_PLACEHOLDER\')"\n              rounded\n              outlined\n              type="search"\n              @input="search"\n              autofocus\n            >\n              <template v-slot:prepend>\n                <q-icon name="mdi-magnify" />\n                <q-tooltip v-model="inputFocus" anchor="top middle" self="center middle">{{\n                  translate(\'JS_INPUT_TOO_SHORT\').replace(\'_LENGTH_\', \'3\')\n                }}</q-tooltip>\n              </template>\n              <template v-slot:append>\n                <q-icon v-if="filter !== \'\'" name="mdi-close" @click.stop="clearSearch()" class="cursor-pointer" />\n                <div class="flex items-center q-ml-sm">\n                  <icon-info :customOptions="{ iconSize: \'21px\' }">\n                    <div style="white-space: pre-line;" v-html="translate(\'JS_FULL_TEXT_SEARCH_INFO\')"></div>\n                  </icon-info>\n                </div>\n                <div v-show="activeCategory !== \'\'" class="flex">\n                  <q-toggle v-model="categorySearch" icon="mdi-file-tree" />\n                  <q-tooltip>{{ translate(\'JS_SEARCH_CURRENT_CATEGORY\') }}</q-tooltip>\n                </div>\n              </template>\n            </q-input>\n          </div>\n          <div class="flex-md-grow-1 flex justify-end q-ml-sm-sm">\n            <q-btn round dense color="white" text-color="primary" icon="mdi-plus" @click="openQuickCreateModal()">\n              <q-tooltip>{{ translate(\'JS_QUICK_CREATE\') }}</q-tooltip>\n            </q-btn>\n          </div>\n        </q-toolbar>\n      </q-header>\n      <q-drawer\n        v-show="!searchData"\n        v-model="left"\n        side="left"\n        elevated\n        :mini="$q.platform.is.desktop ? miniState : false"\n        :width="searchData ? 0 : 250"\n        :breakpoint="700"\n        content-class="bg-white text-black"\n        ref="drawer"\n        content-style="overflow: hidden !important"\n      >\n        <template v-if="showAccounts">\n          <q-tabs\n            v-model="tab"\n            dense\n            class="text-grey"\n            active-color="primary"\n            indicator-color="primary"\n            align="justify"\n            narrow-indicator\n            @input="onTabChange"\n          >\n            <q-tab name="categories" :label="translate(\'JS_CATEGORIES\')" />\n            <q-tab name="accounts" :label="translate(\'JS_ACCOUNTS\')" />\n          </q-tabs>\n          <q-tab-panels v-model="tab" animated style="height: calc(100% - 36px)">\n            <q-tab-panel name="categories">\n              <q-scroll-area class="fit">\n                <categories-list :data="data" :activeCategory="activeCategory" @fetchData="fetchData" />\n              </q-scroll-area>\n            </q-tab-panel>\n            <q-tab-panel name="accounts">\n              <div class="q-px-sm">\n                <q-input v-model="accountSearch" :placeholder="translate(\'JS_SEARCH_PLACEHOLDER\')" dense>\n                  <template v-slot:prepend>\n                    <q-icon name="mdi-magnify" size="16px" />\n                  </template>\n                  <template v-slot:append>\n                    <q-icon\n                      v-show="accountSearch !== \'\'"\n                      name="mdi-close"\n                      @click="accountSearch = \'\'"\n                      class="cursor-pointer"\n                      size="16px"\n                    />\n                  </template>\n                </q-input>\n              </div>\n              <q-scroll-area style="height: calc(100% - 56px)">\n                <q-list>\n                  <q-item\n                    v-for="account in accountsList"\n                    :active="activeAccount === account.name"\n                    :key="account"\n                    @click="\n                      fetchData(null, account.id)\n                      activeAccount = account.name\n                    "\n                    clickable\n                  >\n                    <q-item-section>{{ account.name }}</q-item-section>\n                    <q-item-section avatar>\n                      <a\n                        class="js-popover-tooltip--record ellipsis"\n                        @click.prevent=""\n                        :href="`index.php?module=Accounts&view=Detail&record=${account.id}`"\n                      >\n                        <q-icon name="mdi-link" />\n                      </a>\n                    </q-item-section>\n                  </q-item>\n                </q-list>\n              </q-scroll-area>\n            </q-tab-panel>\n          </q-tab-panels>\n        </template>\n        <q-scroll-area v-else class="fit">\n          <categories-list :data="data" :activeCategory="activeCategory" @fetchData="fetchData" />\n        </q-scroll-area>\n      </q-drawer>\n      <q-page-container>\n        <q-page class="q-pa-sm">\n          <div v-show="!searchData">\n            <related-columns v-show="featuredCategories.length" :columnBlocks="featuredCategories" class="q-pa-sm">\n              <template v-slot:default="slotProps">\n                <q-list bordered padding dense>\n                  <q-item header clickable class="text-black flex" @click="fetchData(slotProps.relatedBlock)">\n                    <icon :icon="tree.categories[slotProps.relatedBlock].icon" :size="iconSize" class="mr-2"></icon>\n                    {{ tree.categories[slotProps.relatedBlock].label }}\n                  </q-item>\n                  <q-item\n                    clickable\n                    v-for="featuredValue in selectedTabData.featured[slotProps.relatedBlock]"\n                    :key="featuredValue.id"\n                    class="text-subtitle2"\n                    v-ripple\n                    @click.prevent="showArticlePreview(featuredValue.id)"\n                  >\n                    <q-item-section class="align-items-center flex-row no-wrap justify-content-start">\n                      <q-icon name="mdi-star" :size="iconSize" class="mr-2"></q-icon>\n                      <a\n                        class="js-popover-tooltip--record ellipsis"\n                        :href="`index.php?module=${moduleName}&view=Detail&record=${featuredValue.id}`"\n                        >{{ featuredValue.subject }}</a\n                      >\n                    </q-item-section>\n                  </q-item>\n                </q-list>\n              </template>\n            </related-columns>\n            <div v-show="activeCategory !== \'\' || tab === \'accounts\'">\n              <q-separator v-show="featuredCategories.length" />\n              <articles-list\n                :data="selectedTabData.records"\n                :title="translate(\'JS_ARTICLES\')"\n                @onClickRecord="previewDialog = true"\n              />\n            </div>\n          </div>\n          <articles-list\n            v-show="searchData"\n            :data="searchDataArray"\n            :title="translate(\'JS_ARTICLES\')"\n            @onClickRecord="previewDialog = true"\n          />\n        </q-page>\n      </q-page-container>\n    </q-layout>\n    <article-preview :isDragResize="true" :previewDialog="previewDialog" @onDialogToggle="onDialogToggle" />\n  </div>\n</template>\n<script>\nimport Icon from \'../../../../components/Icon.vue\'\nimport IconInfo from \'../../../../components/IconInfo.vue\'\nimport Carousel from \'./components/Carousel.vue\'\nimport ArticlesList from \'./components/ArticlesList.vue\'\nimport RelatedColumns from \'./components/RelatedColumns.vue\'\nimport ArticlePreview from \'./components/ArticlePreview.vue\'\nimport CategoriesList from \'./components/CategoriesList.vue\'\nimport { createNamespacedHelpers } from \'vuex\'\n\nconst { mapGetters, mapActions } = createNamespacedHelpers(\'KnowledgeBase\')\nexport default {\n  name: \'KnowledgeBase\',\n  components: { Icon, IconInfo, Carousel, ArticlesList, ArticlePreview, RelatedColumns, CategoriesList },\n  props: {\n    coordinates: {\n      type: Object,\n      default: () => {\n        return {\n          width: 0,\n          height: 0,\n          top: 0,\n          left: 0\n        }\n      }\n    }\n  },\n  data() {\n    return {\n      drawerBehaviour: \'desktop\',\n      miniState: false,\n      left: true,\n      filter: \'\',\n      accountSearch: \'\',\n      categorySearch: false,\n      searchData: false,\n      activeCategory: \'\',\n      activeAccount: \'\',\n      previewDialog: false,\n      tab: \'categories\',\n      showAccounts: false,\n      data: {\n        categories: [],\n        records: [],\n        featured: {}\n      },\n      accountsData: {\n        categories: [],\n        records: [],\n        featured: {}\n      },\n      accounts: []\n    }\n  },\n  computed: {\n    ...mapGetters([\'tree\', \'record\', \'iconSize\', \'moduleName\', \'maximized\', \'defaultTreeIcon\']),\n    accountsList() {\n      if (this.accountSearch === \'\') {\n        return this.accounts\n      } else {\n        return this.accounts.filter(account => {\n          return account.name.toLowerCase().includes(this.accountSearch.toLowerCase())\n        })\n      }\n    },\n    selectedTabData() {\n      return this.tab === \'categories\' ? this.data : this.accountsData\n    },\n    searchDataArray() {\n      return this.searchData ? this.searchData : []\n    },\n    featuredCategories() {\n      if (typeof this.selectedTabData.featured.length === \'undefined\' && this.selectedTabData.categories) {\n        let arr = this.selectedTabData.categories.map(e => {\n          return this.selectedTabData.featured[e] ? e : false\n        })\n        return arr.filter(function(item) {\n          return typeof item === \'string\'\n        })\n      } else {\n        return []\n      }\n    },\n    inputFocus: {\n      set(val) {\n        return false\n      },\n      get() {\n        return this.filter.length > 0\n      }\n    }\n  },\n  methods: {\n    ...mapActions([\'fetchRecord\', \'fetchCategories\']),\n    onTabChange(tabName) {\n      if (this.accounts.length === 0 && tabName === \'accounts\') {\n        this.fetchAccounts()\n      }\n    },\n    fetchAccounts() {\n      const aDeferred = $.Deferred()\n      const progressIndicatorElement = $.progressIndicator({\n        blockInfo: { enabled: true }\n      })\n      return AppConnector.request({\n        module: this.moduleName,\n        action: \'KnowledgeBaseAjax\',\n        mode: \'getAccounts\'\n      }).done(data => {\n        let listData = data.result\n        if (listData) {\n          listData = Object.keys(listData).map(function(key) {\n            return { name: listData[key], id: key }\n          })\n        }\n        this.accounts = listData\n        progressIndicatorElement.progressIndicator({ mode: \'hide\' })\n        aDeferred.resolve(listData)\n      })\n    },\n    search() {\n      if (this.filter.length >= 3) {\n        this.debouncedSearch()\n      } else {\n        this.searchData = false\n      }\n    },\n    clearSearch() {\n      this.filter = \'\'\n      this.searchData = false\n    },\n    fetchData(category = \'\', accountId = \'\') {\n      const aDeferred = $.Deferred()\n      if (category !== null) {\n        this.activeCategory = category\n      }\n      const progressIndicatorElement = $.progressIndicator({\n        blockInfo: { enabled: true }\n      })\n      return AppConnector.request({\n        module: this.moduleName,\n        action: \'KnowledgeBaseAjax\',\n        mode: \'list\',\n        category: category,\n        accountid: accountId\n      }).done(data => {\n        let listData = data.result\n        if (listData.showAccounts) {\n          this.showAccounts = true\n        }\n        if (listData.records) {\n          listData.records = Object.keys(listData.records).map(function(key) {\n            return { ...listData.records[key], id: key }\n          })\n        }\n        if (accountId !== \'\') {\n          this.accountsData = listData\n        } else {\n          this.data = listData\n        }\n        progressIndicatorElement.progressIndicator({ mode: \'hide\' })\n        aDeferred.resolve(listData)\n      })\n    },\n    openQuickCreateModal() {\n      const headerInstance = new window.Vtiger_Header_Js()\n      headerInstance.quickCreateModule(this.moduleName)\n    },\n    showArticlePreview(id) {\n      this.fetchRecord(id).then(() => {\n        this.previewDialog = true\n      })\n    },\n    toggleDrawer() {\n      if (this.$q.platform.is.desktop && (!this.coordinates.width || this.coordinates.width > 700)) {\n        this.miniState = !this.miniState\n      } else {\n        this.left = !this.left\n      }\n    },\n    onDialogToggle(val) {\n      this.previewDialog = val\n    }\n  },\n  async created() {\n    await this.fetchCategories()\n    await this.fetchData()\n  },\n  mounted() {\n    const debounceDelay = 1000\n    this.debouncedSearch = Quasar.utils.debounce(() => {\n      if (this.filter.length < 3) {\n        return\n      }\n      const aDeferred = $.Deferred()\n      const progressIndicatorElement = $.progressIndicator({\n        blockInfo: { enabled: true }\n      })\n      AppConnector.request({\n        module: this.moduleName,\n        action: \'KnowledgeBaseAjax\',\n        mode: \'search\',\n        value: this.filter,\n        category: this.categorySearch ? this.activeCategory : \'\'\n      }).done(data => {\n        let listData = data.result\n        if (listData) {\n          listData = Object.keys(listData).map(function(key) {\n            return { ...listData[key], id: key }\n          })\n        }\n        this.searchData = listData\n        aDeferred.resolve(listData)\n        progressIndicatorElement.progressIndicator({ mode: \'hide\' })\n        return listData\n      })\n    }, debounceDelay)\n  }\n}\n<\/script>\n<style>\n.tree-search {\n  min-width: 320px;\n  width: 50%;\n}\n.tree-search .q-field__control,\n.tree-search .q-field__marginal {\n  height: 40px;\n}\n</style>\n']},media:void 0})},__vue_scope_id__$9=void 0,__vue_module_identifier__$9=void 0,__vue_is_functional_template__$9=!1;var KnowledgeBaseComponent=normalizeComponent_1({render:__vue_render__$9,staticRenderFns:__vue_staticRenderFns__$9},__vue_inject_styles__$9,__vue_script__$9,void 0,!1,void 0,browser,void 0);const{mapGetters:mapGetters$7,mapActions:mapActions$4}=createNamespacedHelpers("KnowledgeBase");var script$a={name:"KnowledgeBaseModal",components:{KnowledgeBase:KnowledgeBaseComponent,DragResize:DragResize},data:()=>({coordinates:{width:Quasar.plugins.Screen.width-100,height:Quasar.plugins.Screen.height-100,top:0,left:Quasar.plugins.Screen.width-(Quasar.plugins.Screen.width-50)}}),computed:{...mapGetters$7(["maximized","moduleName"]),dialog:{set(e){this.$store.commit("KnowledgeBase/setDialog",e)},get(){return this.$store.getters["KnowledgeBase/dialog"]}},maximized:{set(e){this.$store.commit("KnowledgeBase/setMaximized",e)},get(){return this.$store.getters["KnowledgeBase/maximized"]}}},methods:{...mapActions$4(["fetchCategories","initState"]),onChangeCoordinates:function(e){this.coordinates=e}},async created(){await this.initState(this.$options.state)}};const __vue_script__$a=script$a;var __vue_render__$a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-dialog",{attrs:{maximized:e.maximized,"transition-show":"slide-up","transition-hide":"slide-down","content-class":"quasar-reset"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("drag-resize",{attrs:{coordinates:e.coordinates,maximized:e.maximized},on:{onChangeCoordinates:e.onChangeCoordinates}},[n("q-card",{staticClass:"KnowledgeBaseModal full-height"},[n("q-bar",{staticClass:"bg-yeti text-white dialog-header",attrs:{dark:""}},[n("div",{staticClass:"flex items-center"},[n("div",{staticClass:"flex items-center no-wrap ellipsis q-mr-sm-sm"},[n("span",{class:["userIcon-"+e.moduleName,"q-mr-sm"]}),e._v("\n            "+e._s(e.translate("JS_"+e.moduleName.toUpperCase()))+"\n          ")])]),e._v(" "),n("q-space"),e._v(" "),e.$q.platform.is.desktop?[n("a",{directives:[{name:"show",rawName:"v-show",value:!e.maximized,expression:"!maximized"}],staticClass:"flex grabbable text-decoration-none text-white",attrs:{href:"#"}},[n("q-icon",{staticClass:"js-drag",attrs:{name:"mdi-drag",size:"19px"}})],1),e._v(" "),n("q-btn",{attrs:{dense:"",flat:"",icon:e.maximized?"mdi-window-restore":"mdi-window-maximize"},on:{click:function(t){e.maximized=!e.maximized}}},[n("q-tooltip",[e._v(e._s(e.maximized?e.translate("JS_MINIMIZE"):e.translate("JS_MAXIMIZE")))])],1)]:e._e(),e._v(" "),n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"mdi-close"}},[n("q-tooltip",[e._v(e._s(e.translate("JS_CLOSE")))])],1)],2),e._v(" "),n("div",[n("knowledge-base",{attrs:{coordinates:e.coordinates}})],1)],1)],1)],1)},__vue_staticRenderFns__$a=[];__vue_render__$a._withStripped=!0;const __vue_inject_styles__$a=function(e){e&&e("data-v-173ed6d9_0",{source:"\n.dialog-header {\r\n  padding-top: 3px !important;\r\n  padding-bottom: 3px !important;\r\n  height: unset !important;\n}\n.modal-full-height {\r\n  max-height: calc(100vh - 31.14px) !important;\n}\n.grabbable:hover {\r\n  cursor: move;\r\n  cursor: grab;\r\n  cursor: -moz-grab;\r\n  cursor: -webkit-grab;\n}\n.grabbable:active {\r\n  cursor: grabbing;\r\n  cursor: -moz-grabbing;\r\n  cursor: -webkit-grabbing;\n}\n.contrast-50 {\r\n  filter: contrast(50%);\n}\r\n",map:{version:3,sources:["C:\\www\\YetiForceCRM\\public_html\\src\\layouts\\resources\\views\\KnowledgeBase\\KnowledgeBaseModal.vue"],names:[],mappings:";AAqGA;EACA,2BAAA;EACA,8BAAA;EACA,wBAAA;AACA;AACA;EACA,4CAAA;AACA;AACA;EACA,YAAA;EACA,YAAA;EACA,iBAAA;EACA,oBAAA;AACA;AACA;EACA,gBAAA;EACA,qBAAA;EACA,wBAAA;AACA;AACA;EACA,qBAAA;AACA",file:"KnowledgeBaseModal.vue",sourcesContent:['\x3c!--\r\n/**\r\n * KnowledgeBaseModal component\r\n *\r\n * @description KnowledgeBaseModal parent component\r\n * @license YetiForce Public License 3.0\r\n * @author Tomasz Poradzewski <t.poradzewski@yetiforce.com>\r\n */\r\n--\x3e\r\n<template>\r\n  <q-dialog\r\n    v-model="dialog"\r\n    :maximized="maximized"\r\n    transition-show="slide-up"\r\n    transition-hide="slide-down"\r\n    content-class="quasar-reset"\r\n\r\n  >\r\n    <drag-resize :coordinates="coordinates" v-on:onChangeCoordinates="onChangeCoordinates" :maximized="maximized">\r\n      <q-card class="KnowledgeBaseModal full-height">\r\n        <q-bar dark class="bg-yeti text-white dialog-header">\r\n          <div class="flex items-center">\r\n            <div class="flex items-center no-wrap ellipsis q-mr-sm-sm">\r\n              <span :class="[`userIcon-${moduleName}`, \'q-mr-sm\']"></span>\r\n              {{ translate(`JS_${moduleName.toUpperCase()}`) }}\r\n            </div>\r\n          </div>\r\n          <q-space />\r\n          <template v-if="$q.platform.is.desktop">\r\n            <a v-show="!maximized" class="flex grabbable text-decoration-none text-white" href="#">\r\n              <q-icon class="js-drag" name="mdi-drag" size="19px" />\r\n            </a>\r\n            <q-btn\r\n              dense\r\n              flat\r\n              :icon="maximized ? \'mdi-window-restore\' : \'mdi-window-maximize\'"\r\n              @click="maximized = !maximized"\r\n            >\r\n              <q-tooltip>{{ maximized ? translate(\'JS_MINIMIZE\') : translate(\'JS_MAXIMIZE\') }}</q-tooltip>\r\n            </q-btn>\r\n          </template>\r\n          <q-btn dense flat icon="mdi-close" v-close-popup>\r\n            <q-tooltip>{{ translate(\'JS_CLOSE\') }}</q-tooltip>\r\n          </q-btn>\r\n        </q-bar>\r\n        <div>\r\n          <knowledge-base :coordinates="coordinates" />\r\n        </div>\r\n      </q-card>\r\n    </drag-resize>\r\n  </q-dialog>\r\n</template>\r\n<script>\r\nimport DragResize from \'./components/DragResize.vue\'\r\nimport KnowledgeBase from \'./KnowledgeBase.vue\'\r\nimport { createNamespacedHelpers } from \'vuex\'\r\nconst { mapGetters, mapActions } = createNamespacedHelpers(\'KnowledgeBase\')\r\nexport default {\r\n  name: \'KnowledgeBaseModal\',\r\n  components: { KnowledgeBase, DragResize },\r\n  data() {\r\n    return {\r\n      coordinates: {\r\n        width: Quasar.plugins.Screen.width - 100,\r\n        height: Quasar.plugins.Screen.height - 100,\r\n        top: 0,\r\n        left: Quasar.plugins.Screen.width - (Quasar.plugins.Screen.width - 100 / 2)\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters([\'maximized\', \'moduleName\']),\r\n    dialog: {\r\n      set(val) {\r\n        this.$store.commit(\'KnowledgeBase/setDialog\', val)\r\n      },\r\n      get() {\r\n        return this.$store.getters[\'KnowledgeBase/dialog\']\r\n      }\r\n    },\r\n    maximized: {\r\n      set(val) {\r\n        this.$store.commit(\'KnowledgeBase/setMaximized\', val)\r\n      },\r\n      get() {\r\n        return this.$store.getters[\'KnowledgeBase/maximized\']\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapActions([\'fetchCategories\', \'initState\']),\r\n    onChangeCoordinates: function(coordinates) {\r\n      this.coordinates = coordinates\r\n    }\r\n  },\r\n  async created() {\r\n    await this.initState(this.$options.state)\r\n  }\r\n}\r\n<\/script>\r\n<style>\r\n.dialog-header {\r\n  padding-top: 3px !important;\r\n  padding-bottom: 3px !important;\r\n  height: unset !important;\r\n}\r\n.modal-full-height {\r\n  max-height: calc(100vh - 31.14px) !important;\r\n}\r\n.grabbable:hover {\r\n  cursor: move;\r\n  cursor: grab;\r\n  cursor: -moz-grab;\r\n  cursor: -webkit-grab;\r\n}\r\n.grabbable:active {\r\n  cursor: grabbing;\r\n  cursor: -moz-grabbing;\r\n  cursor: -webkit-grabbing;\r\n}\r\n.contrast-50 {\r\n  filter: contrast(50%);\r\n}\r\n</style>\r\n']},media:void 0})},__vue_scope_id__$a=void 0,__vue_module_identifier__$a=void 0,__vue_is_functional_template__$a=!1;var KnowledgeBaseModal=normalizeComponent_1({render:__vue_render__$a,staticRenderFns:__vue_staticRenderFns__$a},__vue_inject_styles__$a,__vue_script__$a,void 0,!1,void 0,browser,void 0);const{mapGetters:mapGetters$8,mapActions:mapActions$5}=createNamespacedHelpers("KnowledgeBase");var script$b={name:"ArticlePreviewModal",components:{ArticlePreview:ArticlePreview},methods:{hideModal(){app.hideModalWindow(),this.initState({record:!1}),this.$destroy()},...mapActions$5(["fetchCategories","fetchRecord","initState"])},async created(){await this.initState(this.$options.state),await this.fetchCategories(),await this.fetchRecord(this.$options.state.recordId),document.addEventListener("keyup",e=>{27===e.keyCode&&this.hideModal()})}};const __vue_script__$b=script$b;var __vue_render__$b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("article-preview",{attrs:{isDragResize:!1,maximizedOnly:!0,previewDialog:!0}},[n("template",{slot:"header-right"},[n("q-btn",{attrs:{dense:"",flat:"",icon:"mdi-close"},on:{click:function(t){return e.hideModal()}}},[n("q-tooltip",[e._v(e._s(e.translate("JS_CLOSE")))])],1)],1)],2)},__vue_staticRenderFns__$b=[];__vue_render__$b._withStripped=!0;const __vue_inject_styles__$b=function(e){e&&e("data-v-0bca4218_0",{source:"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",map:{version:3,sources:[],names:[],mappings:"",file:"ArticlePreviewModal.vue"},media:void 0})},__vue_scope_id__$b=void 0,__vue_module_identifier__$b=void 0,__vue_is_functional_template__$b=!1;var ArticlePreviewComponent=normalizeComponent_1({render:__vue_render__$b,staticRenderFns:__vue_staticRenderFns__$b},__vue_inject_styles__$b,__vue_script__$b,void 0,!1,void 0,browser,void 0);const state={defaultTreeIcon:"mdi-subdirectory-arrow-right",record:!1,dialog:!1,maximized:!0,moduleName:"",iconSize:"18px",tree:{topCategory:{icon:"mdi-file-tree",label:"JS_MAIN_CATEGORIES"},categories:{}}},getters={moduleName:e=>e.moduleName,record:e=>e.record,dialog:e=>e.dialog,maximized:e=>e.maximized,previewDialog:e=>e.previewDialog,previewMaximized:e=>e.previewMaximized,coordinates:e=>e.coordinates,iconSize:e=>e.iconSize,tree:e=>e.tree,defaultTreeIcon:e=>e.defaultTreeIcon},actions={fetchRecord({state:e,commit:t,getters:n},r){const i=$.Deferred(),a=$.progressIndicator({blockInfo:{enabled:!0}});return AppConnector.request({module:n.moduleName,action:"KnowledgeBaseAjax",mode:"detail",record:r}).done(e=>{let n=e.result;n.related.base.Articles&&(n.related.base.Articles=Object.keys(n.related.base.Articles).map(function(e){return{...n.related.base.Articles[e],id:e}})),t("setRecord",n),a.progressIndicator({mode:"hide"}),i.resolve(n)})},fetchCategories({state:e,commit:t,getters:n}){const r=$.Deferred();return AppConnector.request({module:n.moduleName,action:"KnowledgeBaseAjax",mode:"categories"}).done(e=>{t("setTreeCategories",e.result),r.resolve(e.result)})},initState({state:e,commit:t},n){t("setState",n)}},mutations={setState(e,t){e=Object.assign(e,t)},setRecord(e,t){e.record=t},setDialog(e,t){e.dialog=t},setMaximized(e,t){e.maximized=t},setCoordinates(e,t){e.coordinates=t},setTreeCategories(e,t){e.tree.categories=t}};var KnowledgeBase={namespaced:!0,state:state,getters:getters,actions:actions,mutations:mutations};Vue.use(index_esm);const debug=!1,vuexStore=new index_esm.Store({modules:{KnowledgeBase:KnowledgeBase},strict:!1}),{mapActions:mapActions$6}=createNamespacedHelpers("KnowledgeBase");Vue.mixin({methods:{translate:e=>app.vtranslate(e)}}),window.KnowledgeBase={component:KnowledgeBaseComponent,mount:e=>(KnowledgeBaseComponent.state=e.state,new Vue({store:vuexStore,render:e=>e(KnowledgeBaseComponent),methods:{...mapActions$6(["fetchCategories","initState"])},async created(){await this.initState(e.state)}}).$mount(e.el))},window.ArticlePreviewVueComponent={component:ArticlePreviewComponent,mount:e=>(ArticlePreviewComponent.state=e.state,new Vue({store:vuexStore,render:e=>e(ArticlePreviewComponent)}).$mount(e.el))},window.KnowledgeBaseModalVueComponent={component:KnowledgeBaseModal,mount:e=>(KnowledgeBaseModal.state=e.state,new Vue({store:vuexStore,render:e=>e(KnowledgeBaseModal)}).$mount(e.el))};
//# sourceMappingURL=KnowledgeBase.vue.js.map
