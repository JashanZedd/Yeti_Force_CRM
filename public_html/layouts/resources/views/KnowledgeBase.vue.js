"use strict";var script={name:"Icon",props:{icon:{type:String,required:!0},size:{type:String,required:!1}}};function normalizeComponent(e,t,r,n,i,o,a,s,c,l){"boolean"!=typeof a&&(c=s,s=a,a=!1);var d,u="function"==typeof r?r.options:r;if(e&&e.render&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns,u._compiled=!0,i&&(u.functional=!0)),n&&(u._scopeId=n),o?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,c(e)),e&&e._registeredComponents&&e._registeredComponents.add(o)},u._ssrRegister=d):t&&(d=a?function(){t.call(this,l(this.$root.$options.shadowRoot))}:function(e){t.call(this,s(e))}),d)if(u.functional){var m=u.render;u.render=function(e,t){return d.call(t),m(e,t)}}else{var p=u.beforeCreate;u.beforeCreate=p?[].concat(p,d):[d]}return r}var normalizeComponent_1=normalizeComponent,isOldIE="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());function createInjector(e){return function(e,t){return addStyle(e,t)}}var HEAD=document.head||document.getElementsByTagName("head")[0],styles={};function addStyle(e,t){var r=isOldIE?t.media||"default":e,n=styles[r]||(styles[r]={ids:new Set,styles:[]});if(!n.ids.has(e)){n.ids.add(e);var i=t.source;if(t.map&&(i+="\n/*# sourceURL="+t.map.sources[0]+" */",i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t.map))))+" */"),n.element||(n.element=document.createElement("style"),n.element.type="text/css",t.media&&n.element.setAttribute("media",t.media),HEAD.appendChild(n.element)),"styleSheet"in n.element)n.styles.push(i),n.element.styleSheet.cssText=n.styles.filter(Boolean).join("\n");else{var o=n.ids.size-1,a=document.createTextNode(i),s=n.element.childNodes;s[o]&&n.element.removeChild(s[o]),s.length?n.element.insertBefore(a,s[o]):n.element.appendChild(a)}}}var browser=createInjector;const __vue_script__=script;var __vue_render__=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[/^mdi|^fa/.test(e.icon)?r("q-icon",{attrs:{name:e.icon,size:e.size,dense:""}}):e.icon.includes("/")?r("q-avatar",{attrs:{size:e.size}},[r("q-img",{attrs:{src:e.icon}})],1):r("q-icon",{class:[e.icon,"q-icon"],style:{"font-size":e.size}})],1)},__vue_staticRenderFns__=[];__vue_render__._withStripped=!0;const __vue_inject_styles__=function(e){e&&e("data-v-8becc55e_0",{source:"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",map:{version:3,sources:[],names:[],mappings:"",file:"Icon.vue"},media:void 0})},__vue_scope_id__="data-v-8becc55e",__vue_module_identifier__=void 0,__vue_is_functional_template__=!1;var Icon=normalizeComponent_1({render:__vue_render__,staticRenderFns:__vue_staticRenderFns__},__vue_inject_styles__,__vue_script__,__vue_scope_id__,!1,void 0,browser,void 0),script$1={name:"IconInfo",props:{customOptions:{type:Object,default:()=>({})}},data:()=>({searchInfoShow:!1,options:{iconSize:"inherit",tooltipFont:"14px",backgroundClass:"bg-primary"}}),created(){this.options=Object.assign(this.options,this.customOptions)}};const __vue_script__$1=script$1;var __vue_render__$1=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"flex"},[r("q-icon",{staticClass:"cursor-pointer",style:"font-size: "+e.options.iconSize+";",attrs:{name:e.searchInfoShow?"mdi-information":"mdi-information-outline"},on:{click:function(t){e.searchInfoShow=!e.searchInfoShow}}}),e._v(" "),r("div",[r("q-tooltip",{attrs:{"content-style":"font-size: "+e.options.tooltipFont,"content-class":e.options.backgroundClass},model:{value:e.searchInfoShow,callback:function(t){e.searchInfoShow=t},expression:"searchInfoShow"}},[e._t("default")],2)],1)],1)},__vue_staticRenderFns__$1=[];__vue_render__$1._withStripped=!0;const __vue_inject_styles__$1=function(e){e&&e("data-v-86776cde_0",{source:"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",map:{version:3,sources:[],names:[],mappings:"",file:"IconInfo.vue"},media:void 0})},__vue_scope_id__$1="data-v-86776cde",__vue_module_identifier__$1=void 0,__vue_is_functional_template__$1=!1;var IconInfo=normalizeComponent_1({render:__vue_render__$1,staticRenderFns:__vue_staticRenderFns__$1},__vue_inject_styles__$1,__vue_script__$1,"data-v-86776cde",!1,void 0,browser,void 0),script$2={name:"Carousel",data:()=>({slide:0,height:"90vh",report:0,fullscreen:!1}),props:{record:{type:Object,required:!0}},watch:{fullscreen:function(e){e?this.$q.fullscreen.request():this.$q.fullscreen.exit()},"$q.fullscreen.isActive"(e){this.fullscreen=e}},methods:{onTransition(e){$(this.$refs.carousel.$el).find("img").css("max-width",$(this.$refs.carousel.$el).width()-17)}}};const __vue_script__$2=script$2;var __vue_render__$2=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("q-carousel",{ref:"carousel",class:["quasar-reset shadow-1 rounded-borders",e.fullscreen?"":"carousel-height"],attrs:{"transition-prev":"scale","transition-next":"scale",swipeable:"",animated:"","control-color":"black",navigation:"",padding:"",arrows:"",fullscreen:e.fullscreen},on:{"update:fullscreen":function(t){e.fullscreen=t},transition:e.onTransition},scopedSlots:e._u([{key:"control",fn:function(){return[r("q-carousel-control",{attrs:{position:"bottom-right",offset:[18,18]}},[r("q-btn",{attrs:{push:"",round:"",dense:"",color:"white","text-color":"primary",icon:e.fullscreen?"mdi-fullscreen-exit":"mdi-fullscreen"},on:{click:function(t){e.fullscreen=!e.fullscreen}}})],1)]},proxy:!0}]),model:{value:e.slide,callback:function(t){e.slide=t},expression:"slide"}},e._l(e.record.content,function(t,n){return r("q-carousel-slide",{key:n,staticClass:"column no-wrap flex-center",attrs:{name:n,fullscreen:e.fullscreen},on:{"update:fullscreen":function(t){e.fullscreen=t}}},[r("div",{staticClass:"full-height",domProps:{innerHTML:e._s(t)}})])}),1)],1)},__vue_staticRenderFns__$2=[];__vue_render__$2._withStripped=!0;const __vue_inject_styles__$2=function(e){e&&e("data-v-7829b25e_0",{source:"\n.carousel-height[data-v-7829b25e] {\r\n  height: max-content;\r\n  min-height: calc(100vh - 31.14px);\n}\r\n",map:{version:3,sources:["C:\\www\\YetiForceCRM\\public_html\\src\\layouts\\resources\\views\\KnowledgeBase\\components\\Carousel.vue"],names:[],mappings:";AA6FA;EACA,mBAAA;EACA,iCAAA;AACA",file:"Carousel.vue",sourcesContent:['RecordsList\x3c!--\r\n/**\r\n * Carousel component\r\n *\r\n * @description Carousel component for knowledge base view\r\n * @license YetiForce Public License 3.0\r\n * @author Tomasz Poradzewski <t.poradzewski@yetiforce.com>\r\n */\r\n--\x3e\r\n<template>\r\n  <div>\r\n    <q-carousel\r\n      v-model="slide"\r\n      transition-prev="scale"\r\n      transition-next="scale"\r\n      swipeable\r\n      animated\r\n      control-color="black"\r\n      navigation\r\n      padding\r\n      arrows\r\n      :class="[\'quasar-reset shadow-1 rounded-borders\', !fullscreen ? \'carousel-height\' : \'\']"\r\n      :fullscreen.sync="fullscreen"\r\n      ref="carousel"\r\n      @transition="onTransition"\r\n    >\r\n      <q-carousel-slide\r\n        v-for="(slide, index) in record.content"\r\n        :name="index"\r\n        :key="index"\r\n        class="column no-wrap flex-center"\r\n        :fullscreen.sync="fullscreen"\r\n      >\r\n        <div class="full-height" v-html="slide"></div>\r\n      </q-carousel-slide>\r\n      <template v-slot:control>\r\n        <q-carousel-control position="bottom-right" :offset="[18, 18]">\r\n          <q-btn\r\n            push\r\n            round\r\n            dense\r\n            color="white"\r\n            text-color="primary"\r\n            :icon="fullscreen ? \'mdi-fullscreen-exit\' : \'mdi-fullscreen\'"\r\n            @click="fullscreen = !fullscreen"\r\n          />\r\n        </q-carousel-control>\r\n      </template>\r\n    </q-carousel>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \'Carousel\',\r\n  data() {\r\n    return {\r\n      slide: 0,\r\n      height: \'90vh\',\r\n      report: 0,\r\n      fullscreen: false\r\n    }\r\n  },\r\n  props: {\r\n    record: {\r\n      type: Object,\r\n      required: true\r\n    }\r\n  },\r\n  watch: {\r\n    fullscreen: function(val) {\r\n      if (val) {\r\n        this.$q.fullscreen.request()\r\n      } else {\r\n        this.$q.fullscreen.exit()\r\n      }\r\n    },\r\n    \'$q.fullscreen.isActive\'(val) {\r\n      this.fullscreen = val\r\n    }\r\n  },\r\n  methods: {\r\n    onTransition(size) {\r\n      const scrollbarWidth = 17\r\n      $(this.$refs.carousel.$el)\r\n        .find(\'img\')\r\n        .css(\'max-width\', $(this.$refs.carousel.$el).width() - scrollbarWidth)\r\n    }\r\n  }\r\n}\r\n<\/script>\r\n\r\n<style scoped>\r\n.carousel-height {\r\n  height: max-content;\r\n  min-height: calc(100vh - 31.14px);\r\n}\r\n</style>\r\n']},media:void 0})},__vue_scope_id__$2="data-v-7829b25e",__vue_module_identifier__$2=void 0,__vue_is_functional_template__$2=!1;var Carousel=normalizeComponent_1({render:__vue_render__$2,staticRenderFns:__vue_staticRenderFns__$2},__vue_inject_styles__$2,__vue_script__$2,"data-v-7829b25e",!1,void 0,browser,void 0),global$1="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};global$1.setTimeout,global$1.clearTimeout;var performance=global$1.performance||{},performanceNow=performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow||function(){return(new Date).getTime()};function applyMixin(e){if(Number(e.version.split(".")[0])>=2)e.mixin({beforeCreate:r});else{var t=e.prototype._init;e.prototype._init=function(e){void 0===e&&(e={}),e.init=e.init?[r].concat(e.init):r,t.call(this,e)}}function r(){var e=this.$options;e.store?this.$store="function"==typeof e.store?e.store():e.store:e.parent&&e.parent.$store&&(this.$store=e.parent.$store)}}var target="undefined"!=typeof window?window:void 0!==global$1?global$1:{},devtoolHook=target.__VUE_DEVTOOLS_GLOBAL_HOOK__;function devtoolPlugin(e){devtoolHook&&(e._devtoolHook=devtoolHook,devtoolHook.emit("vuex:init",e),devtoolHook.on("vuex:travel-to-state",function(t){e.replaceState(t)}),e.subscribe(function(e,t){devtoolHook.emit("vuex:mutation",e,t)}))}function forEachValue(e,t){Object.keys(e).forEach(function(r){return t(e[r],r)})}function isObject(e){return null!==e&&"object"==typeof e}function isPromise(e){return e&&"function"==typeof e.then}function partial(e,t){return function(){return e(t)}}var Module=function(e,t){this.runtime=t,this._children=Object.create(null),this._rawModule=e;var r=e.state;this.state=("function"==typeof r?r():r)||{}},prototypeAccessors={namespaced:{configurable:!0}};prototypeAccessors.namespaced.get=function(){return!!this._rawModule.namespaced},Module.prototype.addChild=function(e,t){this._children[e]=t},Module.prototype.removeChild=function(e){delete this._children[e]},Module.prototype.getChild=function(e){return this._children[e]},Module.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)},Module.prototype.forEachChild=function(e){forEachValue(this._children,e)},Module.prototype.forEachGetter=function(e){this._rawModule.getters&&forEachValue(this._rawModule.getters,e)},Module.prototype.forEachAction=function(e){this._rawModule.actions&&forEachValue(this._rawModule.actions,e)},Module.prototype.forEachMutation=function(e){this._rawModule.mutations&&forEachValue(this._rawModule.mutations,e)},Object.defineProperties(Module.prototype,prototypeAccessors);var Vue$1,ModuleCollection=function(e){this.register([],e,!1)};function update(e,t,r){if(t.update(r),r.modules)for(var n in r.modules){if(!t.getChild(n))return;update(e.concat(n),t.getChild(n),r.modules[n])}}ModuleCollection.prototype.get=function(e){return e.reduce(function(e,t){return e.getChild(t)},this.root)},ModuleCollection.prototype.getNamespace=function(e){var t=this.root;return e.reduce(function(e,r){return e+((t=t.getChild(r)).namespaced?r+"/":"")},"")},ModuleCollection.prototype.update=function(e){update([],this.root,e)},ModuleCollection.prototype.register=function(e,t,r){var n=this;void 0===r&&(r=!0);var i=new Module(t,r);0===e.length?this.root=i:this.get(e.slice(0,-1)).addChild(e[e.length-1],i);t.modules&&forEachValue(t.modules,function(t,i){n.register(e.concat(i),t,r)})},ModuleCollection.prototype.unregister=function(e){var t=this.get(e.slice(0,-1)),r=e[e.length-1];t.getChild(r).runtime&&t.removeChild(r)};var Store=function(e){var t=this;void 0===e&&(e={}),!Vue$1&&"undefined"!=typeof window&&window.Vue&&install(window.Vue);var r=e.plugins;void 0===r&&(r=[]);var n=e.strict;void 0===n&&(n=!1),this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new ModuleCollection(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._watcherVM=new Vue$1;var i=this,o=this.dispatch,a=this.commit;this.dispatch=function(e,t){return o.call(i,e,t)},this.commit=function(e,t,r){return a.call(i,e,t,r)},this.strict=n;var s=this._modules.root.state;installModule(this,s,[],this._modules.root),resetStoreVM(this,s),r.forEach(function(e){return e(t)}),(void 0!==e.devtools?e.devtools:Vue$1.config.devtools)&&devtoolPlugin(this)},prototypeAccessors$1={state:{configurable:!0}};function genericSubscribe(e,t){return t.indexOf(e)<0&&t.push(e),function(){var r=t.indexOf(e);r>-1&&t.splice(r,1)}}function resetStore(e,t){e._actions=Object.create(null),e._mutations=Object.create(null),e._wrappedGetters=Object.create(null),e._modulesNamespaceMap=Object.create(null);var r=e.state;installModule(e,r,[],e._modules.root,!0),resetStoreVM(e,r,t)}function resetStoreVM(e,t,r){var n=e._vm;e.getters={};var i=e._wrappedGetters,o={};forEachValue(i,function(t,r){o[r]=partial(t,e),Object.defineProperty(e.getters,r,{get:function(){return e._vm[r]},enumerable:!0})});var a=Vue$1.config.silent;Vue$1.config.silent=!0,e._vm=new Vue$1({data:{$$state:t},computed:o}),Vue$1.config.silent=a,e.strict&&enableStrictMode(e),n&&(r&&e._withCommit(function(){n._data.$$state=null}),Vue$1.nextTick(function(){return n.$destroy()}))}function installModule(e,t,r,n,i){var o=!r.length,a=e._modules.getNamespace(r);if(n.namespaced&&(e._modulesNamespaceMap[a]=n),!o&&!i){var s=getNestedState(t,r.slice(0,-1)),c=r[r.length-1];e._withCommit(function(){Vue$1.set(s,c,n.state)})}var l=n.context=makeLocalContext(e,a,r);n.forEachMutation(function(t,r){registerMutation(e,a+r,t,l)}),n.forEachAction(function(t,r){var n=t.root?r:a+r,i=t.handler||t;registerAction(e,n,i,l)}),n.forEachGetter(function(t,r){registerGetter(e,a+r,t,l)}),n.forEachChild(function(n,o){installModule(e,t,r.concat(o),n,i)})}function makeLocalContext(e,t,r){var n=""===t,i={dispatch:n?e.dispatch:function(r,n,i){var o=unifyObjectStyle(r,n,i),a=o.payload,s=o.options,c=o.type;return s&&s.root||(c=t+c),e.dispatch(c,a)},commit:n?e.commit:function(r,n,i){var o=unifyObjectStyle(r,n,i),a=o.payload,s=o.options,c=o.type;s&&s.root||(c=t+c),e.commit(c,a,s)}};return Object.defineProperties(i,{getters:{get:n?function(){return e.getters}:function(){return makeLocalGetters(e,t)}},state:{get:function(){return getNestedState(e.state,r)}}}),i}function makeLocalGetters(e,t){var r={},n=t.length;return Object.keys(e.getters).forEach(function(i){if(i.slice(0,n)===t){var o=i.slice(n);Object.defineProperty(r,o,{get:function(){return e.getters[i]},enumerable:!0})}}),r}function registerMutation(e,t,r,n){(e._mutations[t]||(e._mutations[t]=[])).push(function(t){r.call(e,n.state,t)})}function registerAction(e,t,r,n){(e._actions[t]||(e._actions[t]=[])).push(function(t,i){var o=r.call(e,{dispatch:n.dispatch,commit:n.commit,getters:n.getters,state:n.state,rootGetters:e.getters,rootState:e.state},t,i);return isPromise(o)||(o=Promise.resolve(o)),e._devtoolHook?o.catch(function(t){throw e._devtoolHook.emit("vuex:error",t),t}):o})}function registerGetter(e,t,r,n){e._wrappedGetters[t]||(e._wrappedGetters[t]=function(e){return r(n.state,n.getters,e.state,e.getters)})}function enableStrictMode(e){e._vm.$watch(function(){return this._data.$$state},function(){},{deep:!0,sync:!0})}function getNestedState(e,t){return t.length?t.reduce(function(e,t){return e[t]},e):e}function unifyObjectStyle(e,t,r){return isObject(e)&&e.type&&(r=t,t=e,e=e.type),{type:e,payload:t,options:r}}function install(e){Vue$1&&e===Vue$1||applyMixin(Vue$1=e)}prototypeAccessors$1.state.get=function(){return this._vm._data.$$state},prototypeAccessors$1.state.set=function(e){},Store.prototype.commit=function(e,t,r){var n=this,i=unifyObjectStyle(e,t,r),o=i.type,a=i.payload,s={type:o,payload:a},c=this._mutations[o];c&&(this._withCommit(function(){c.forEach(function(e){e(a)})}),this._subscribers.forEach(function(e){return e(s,n.state)}))},Store.prototype.dispatch=function(e,t){var r=this,n=unifyObjectStyle(e,t),i=n.type,o=n.payload,a={type:i,payload:o},s=this._actions[i];if(s){try{this._actionSubscribers.filter(function(e){return e.before}).forEach(function(e){return e.before(a,r.state)})}catch(e){}return(s.length>1?Promise.all(s.map(function(e){return e(o)})):s[0](o)).then(function(e){try{r._actionSubscribers.filter(function(e){return e.after}).forEach(function(e){return e.after(a,r.state)})}catch(e){}return e})}},Store.prototype.subscribe=function(e){return genericSubscribe(e,this._subscribers)},Store.prototype.subscribeAction=function(e){return genericSubscribe("function"==typeof e?{before:e}:e,this._actionSubscribers)},Store.prototype.watch=function(e,t,r){var n=this;return this._watcherVM.$watch(function(){return e(n.state,n.getters)},t,r)},Store.prototype.replaceState=function(e){var t=this;this._withCommit(function(){t._vm._data.$$state=e})},Store.prototype.registerModule=function(e,t,r){void 0===r&&(r={}),"string"==typeof e&&(e=[e]),this._modules.register(e,t),installModule(this,this.state,e,this._modules.get(e),r.preserveState),resetStoreVM(this,this.state)},Store.prototype.unregisterModule=function(e){var t=this;"string"==typeof e&&(e=[e]),this._modules.unregister(e),this._withCommit(function(){var r=getNestedState(t.state,e.slice(0,-1));Vue$1.delete(r,e[e.length-1])}),resetStore(this)},Store.prototype.hotUpdate=function(e){this._modules.update(e),resetStore(this,!0)},Store.prototype._withCommit=function(e){var t=this._committing;this._committing=!0,e(),this._committing=t},Object.defineProperties(Store.prototype,prototypeAccessors$1);var mapState=normalizeNamespace(function(e,t){var r={};return normalizeMap(t).forEach(function(t){var n=t.key,i=t.val;r[n]=function(){var t=this.$store.state,r=this.$store.getters;if(e){var n=getModuleByNamespace(this.$store,"mapState",e);if(!n)return;t=n.context.state,r=n.context.getters}return"function"==typeof i?i.call(this,t,r):t[i]},r[n].vuex=!0}),r}),mapMutations=normalizeNamespace(function(e,t){var r={};return normalizeMap(t).forEach(function(t){var n=t.key,i=t.val;r[n]=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];var n=this.$store.commit;if(e){var o=getModuleByNamespace(this.$store,"mapMutations",e);if(!o)return;n=o.context.commit}return"function"==typeof i?i.apply(this,[n].concat(t)):n.apply(this.$store,[i].concat(t))}}),r}),mapGetters=normalizeNamespace(function(e,t){var r={};return normalizeMap(t).forEach(function(t){var n=t.key,i=t.val;i=e+i,r[n]=function(){if(!e||getModuleByNamespace(this.$store,"mapGetters",e))return this.$store.getters[i]},r[n].vuex=!0}),r}),mapActions=normalizeNamespace(function(e,t){var r={};return normalizeMap(t).forEach(function(t){var n=t.key,i=t.val;r[n]=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];var n=this.$store.dispatch;if(e){var o=getModuleByNamespace(this.$store,"mapActions",e);if(!o)return;n=o.context.dispatch}return"function"==typeof i?i.apply(this,[n].concat(t)):n.apply(this.$store,[i].concat(t))}}),r}),createNamespacedHelpers=function(e){return{mapState:mapState.bind(null,e),mapGetters:mapGetters.bind(null,e),mapMutations:mapMutations.bind(null,e),mapActions:mapActions.bind(null,e)}};function normalizeMap(e){return Array.isArray(e)?e.map(function(e){return{key:e,val:e}}):Object.keys(e).map(function(t){return{key:t,val:e[t]}})}function normalizeNamespace(e){return function(t,r){return"string"!=typeof t?(r=t,t=""):"/"!==t.charAt(t.length-1)&&(t+="/"),e(t,r)}}function getModuleByNamespace(e,t,r){return e._modulesNamespaceMap[r]}var index_esm={Store:Store,install:install,version:"3.1.1",mapState:mapState,mapMutations:mapMutations,mapGetters:mapGetters,mapActions:mapActions,createNamespacedHelpers:createNamespacedHelpers};const{mapGetters:mapGetters$1,mapActions:mapActions$1}=createNamespacedHelpers("KnowledgeBase");var script$3={name:"RecordsList",components:{Icon:Icon},props:{data:{type:Array,default:[]},title:{type:String,default:""}},data:()=>({pagination:{rowsPerPage:0},columns:[{name:"desc",required:!0,label:"Title",align:"left",field:e=>e.subject,format:e=>`${e}`,sortable:!0},{name:"short_time",align:"center",label:"Short time",field:"short_time",sortable:!0},{name:"introduction",align:"center",label:"Introduction",field:"introduction",sortable:!0}]}),computed:{...mapGetters$1(["tree","iconSize","moduleName"]),hasData(){return this.data.length}},methods:{...mapActions$1(["fetchRecord"])}};const __vue_script__$3=script$3;var __vue_render__$3=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"KnowledgeBase__RecordsList"},[r("q-table",{attrs:{data:e.data,columns:e.columns,"row-key":"subject",grid:"","hide-header":"",pagination:e.pagination,title:e.title},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"item",fn:function(t){return[r("q-list",{staticClass:"full-width",attrs:{padding:""},on:{click:function(r){return r.preventDefault(),e.fetchRecord(t.row.id)}}},[r("q-item",{attrs:{clickable:""}},[r("q-item-section",{attrs:{avatar:""}},[r("q-icon",{attrs:{name:"mdi-text"}})],1),e._v(" "),r("q-item-section",[r("q-item-label",{staticClass:"text-primary"},[r("a",{staticClass:"js-popover-tooltip--record",attrs:{href:"index.php?module="+e.moduleName+"&view=Detail&record="+t.row.id}},[e._v("\n                "+e._s(t.row.subject)+"\n              ")])]),e._v(" "),r("q-item-label",{staticClass:"flex items-center",attrs:{overline:""}},[r("q-breadcrumbs",{staticClass:"mr-2 text-grey-8",attrs:{"active-color":"grey-8"}},[e._l(e.tree.categories[t.row.category].parentTree,function(t){return r("q-breadcrumbs-el",{key:e.tree.categories[t].label},[e.tree.categories[t].icon?r("icon",{staticClass:"q-mr-sm",attrs:{size:e.iconSize,icon:e.tree.categories[t].icon}}):e._e(),e._v("\n                  "+e._s(e.tree.categories[t].label)+"\n                ")],1)}),e._v(" "),r("q-tooltip",[e._v("\n                  "+e._s(e.translate("JS_CATEGORY"))+"\n                ")])],2),e._v("\n              | "+e._s(e.translate("JS_AUTHORED_BY"))+":\n              "),r("span",{staticClass:"q-ml-sm",domProps:{innerHTML:e._s(t.row.assigned_user_id)}})],1),e._v(" "),r("q-item-label",{attrs:{caption:""}},[e._v(e._s(t.row.introduction))])],1),e._v(" "),r("q-item-section",{attrs:{side:"",top:""}},[r("q-item-label",{attrs:{caption:""}},[e._v(e._s(t.row.short_time))]),e._v(" "),r("q-tooltip",[e._v("\n              "+e._s(t.row.full_time)+"\n            ")])],1)],1)],1)]}},{key:"bottom",fn:function(e){}}])}),e._v(" "),r("div",{class:["flex items-center q-px-lg q-py-sm",e.hasData?"hidden":""]},[r("q-icon",{staticClass:"q-mr-sm",attrs:{name:"mdi-alert-outline"}}),e._v("\n    "+e._s(e.translate("JS_NO_RESULTS_FOUND"))+"\n  ")],1)],1)},__vue_staticRenderFns__$3=[];__vue_render__$3._withStripped=!0;const __vue_inject_styles__$3=function(e){e&&e("data-v-45ed785b_0",{source:"\n.KnowledgeBase__RecordsList .q-table__bottom {\r\n  display: none !important;\n}\r\n",map:{version:3,sources:["C:\\www\\YetiForceCRM\\public_html\\src\\layouts\\resources\\views\\KnowledgeBase\\components\\RecordsList.vue"],names:[],mappings:";AA4HA;EACA,wBAAA;AACA",file:"RecordsList.vue",sourcesContent:['\x3c!--\r\n/**\r\n * RecordsList component\r\n *\r\n * @description Records list component\r\n * @license YetiForce Public License 3.0\r\n * @author Tomasz Poradzewski <t.poradzewski@yetiforce.com>\r\n */\r\n--\x3e\r\n<template>\r\n  <div class="KnowledgeBase__RecordsList">\r\n    <q-table\r\n      :data="data"\r\n      :columns="columns"\r\n      row-key="subject"\r\n      grid\r\n      hide-header\r\n      :pagination.sync="pagination"\r\n      :title="title"\r\n    >\r\n      <template v-slot:item="props">\r\n        <q-list class="full-width" padding @click.prevent="fetchRecord(props.row.id)">\r\n          <q-item clickable>\r\n            <q-item-section avatar>\r\n              <q-icon name="mdi-text" />\r\n            </q-item-section>\r\n            <q-item-section>\r\n              <q-item-label class="text-primary">\r\n                <a\r\n                  class="js-popover-tooltip--record"\r\n                  :href="`index.php?module=${moduleName}&view=Detail&record=${props.row.id}`"\r\n                >\r\n                  {{ props.row.subject }}\r\n                </a>\r\n              </q-item-label>\r\n              <q-item-label class="flex items-center" overline>\r\n                <q-breadcrumbs class="mr-2 text-grey-8" active-color="grey-8">\r\n                  <q-breadcrumbs-el\r\n                    v-for="category in tree.categories[props.row.category].parentTree"\r\n                    :key="tree.categories[category].label"\r\n                  >\r\n                    <icon\r\n                      v-if="tree.categories[category].icon"\r\n                      :size="iconSize"\r\n                      :icon="tree.categories[category].icon"\r\n                      class="q-mr-sm"\r\n                    />\r\n                    {{ tree.categories[category].label }}\r\n                  </q-breadcrumbs-el>\r\n                  <q-tooltip>\r\n                    {{ translate(\'JS_CATEGORY\') }}\r\n                  </q-tooltip>\r\n                </q-breadcrumbs>\r\n                | {{ translate(\'JS_AUTHORED_BY\') }}:\r\n                <span v-html="props.row.assigned_user_id" class="q-ml-sm"></span>\r\n              </q-item-label>\r\n              <q-item-label caption>{{ props.row.introduction }}</q-item-label>\r\n            </q-item-section>\r\n            <q-item-section side top>\r\n              <q-item-label caption>{{ props.row.short_time }}</q-item-label>\r\n              <q-tooltip>\r\n                {{ props.row.full_time }}\r\n              </q-tooltip>\r\n            </q-item-section>\r\n          </q-item>\r\n        </q-list>\r\n      </template>\r\n      <template v-slot:bottom="props"> </template>\r\n    </q-table>\r\n    <div :class="[\'flex items-center q-px-lg q-py-sm\', hasData ? \'hidden\' : \'\']">\r\n      <q-icon name="mdi-alert-outline" class="q-mr-sm"></q-icon>\r\n      {{ translate(\'JS_NO_RESULTS_FOUND\') }}\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport Icon from \'../../../../../components/Icon.vue\'\r\nimport { createNamespacedHelpers } from \'vuex\'\r\nconst { mapGetters, mapActions } = createNamespacedHelpers(\'KnowledgeBase\')\r\nexport default {\r\n  name: \'RecordsList\',\r\n  components: { Icon },\r\n  props: {\r\n    data: {\r\n      type: Array,\r\n      default: []\r\n    },\r\n    title: {\r\n      type: String,\r\n      default: \'\'\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      pagination: {\r\n        rowsPerPage: 0\r\n      },\r\n      columns: [\r\n        {\r\n          name: \'desc\',\r\n          required: true,\r\n          label: \'Title\',\r\n          align: \'left\',\r\n          field: row => row.subject,\r\n          format: val => `${val}`,\r\n          sortable: true\r\n        },\r\n        { name: \'short_time\', align: \'center\', label: \'Short time\', field: \'short_time\', sortable: true },\r\n        { name: \'introduction\', align: \'center\', label: \'Introduction\', field: \'introduction\', sortable: true }\r\n      ]\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters([\'tree\', \'iconSize\', \'moduleName\']),\r\n    hasData() {\r\n      return this.data.length\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapActions([\'fetchRecord\'])\r\n  }\r\n}\r\n<\/script>\r\n<style>\r\n.KnowledgeBase__RecordsList .q-table__bottom {\r\n  display: none !important;\r\n}\r\n</style>\r\n']},media:void 0})},__vue_scope_id__$3=void 0,__vue_module_identifier__$3=void 0,__vue_is_functional_template__$3=!1;var RecordsList=normalizeComponent_1({render:__vue_render__$3,staticRenderFns:__vue_staticRenderFns__$3},__vue_inject_styles__$3,__vue_script__$3,void 0,!1,void 0,browser,void 0);function unwrapExports(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var dist=createCommonjsModule(function(e,t){window,e.exports=function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=44)}({0:function(e,t,r){var n=r(16);"string"==typeof n&&(n=[[e.i,n,""]]);var i={transform:void 0};r(5)(n,i),n.locals&&(e.exports=n.locals)},1:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n={y:{t:"top",m:"marginTop",b:"bottom"},x:{l:"left",m:"marginLeft",r:"right"}};t.default={name:"vue-drag-resize",props:{parentScaleX:{type:Number,default:1},parentScaleY:{type:Number,default:1},isActive:{type:Boolean,default:!1},preventActiveBehavior:{type:Boolean,default:!1},isDraggable:{type:Boolean,default:!0},isResizable:{type:Boolean,default:!0},aspectRatio:{type:Boolean,default:!1},parentLimitation:{type:Boolean,default:!1},parentW:{type:Number,default:0,validator:function(e){return e>=0}},parentH:{type:Number,default:0,validator:function(e){return e>=0}},w:{type:Number,default:100,validator:function(e){return e>0}},h:{type:Number,default:100,validator:function(e){return e>0}},minw:{type:Number,default:50,validator:function(e){return e>0}},minh:{type:Number,default:50,validator:function(e){return e>0}},x:{type:Number,default:0,validator:function(e){return"number"==typeof e}},y:{type:Number,default:0,validator:function(e){return"number"==typeof e}},z:{type:[String,Number],default:"auto",validator:function(e){return"string"==typeof e?"auto"===e:e>=0}},dragHandle:{type:String,default:null},dragCancel:{type:String,default:null},sticks:{type:Array,default:function(){return["tl","tm","tr","mr","br","bm","bl","ml"]}},axis:{type:String,default:"both",validator:function(e){return-1!==["x","y","both","none"].indexOf(e)}}},data:function(){return{active:this.isActive,rawWidth:this.w,rawHeight:this.h,rawLeft:this.x,rawTop:this.y,rawRight:null,rawBottom:null,zIndex:this.z,aspectFactor:this.w/this.h,parentWidth:null,parentHeight:null,left:this.x,top:this.y,right:null,bottom:null,minWidth:this.minw,minHeight:this.minh}},created:function(){this.stickDrag=!1,this.bodyDrag=!1,this.stickAxis=null,this.stickStartPos={mouseX:0,mouseY:0,x:0,y:0,w:0,h:0},this.limits={minLeft:null,maxLeft:null,minRight:null,maxRight:null,minTop:null,maxTop:null,minBottom:null,maxBottom:null},this.currentStick=[]},mounted:function(){if(this.parentElement=this.$el.parentNode,this.parentWidth=this.parentW?this.parentW:this.parentElement.clientWidth,this.parentHeight=this.parentH?this.parentH:this.parentElement.clientHeight,this.rawRight=this.parentWidth-this.rawWidth-this.rawLeft,this.rawBottom=this.parentHeight-this.rawHeight-this.rawTop,document.documentElement.addEventListener("mousemove",this.move),document.documentElement.addEventListener("mouseup",this.up),document.documentElement.addEventListener("mouseleave",this.up),document.documentElement.addEventListener("mousedown",this.deselect),document.documentElement.addEventListener("touchmove",this.move,!0),document.documentElement.addEventListener("touchend touchcancel",this.up,!0),document.documentElement.addEventListener("touchstart",this.up,!0),this.dragHandle){var e=Array.prototype.slice.call(this.$el.querySelectorAll(this.dragHandle));for(var t in e)e[t].setAttribute("data-drag-handle",this._uid)}if(this.dragCancel){var r=Array.prototype.slice.call(this.$el.querySelectorAll(this.dragCancel));for(var n in r)r[n].setAttribute("data-drag-cancel",this._uid)}},beforeDestroy:function(){document.documentElement.removeEventListener("mousemove",this.move),document.documentElement.removeEventListener("mouseup",this.up),document.documentElement.removeEventListener("mouseleave",this.up),document.documentElement.removeEventListener("mousedown",this.deselect),document.documentElement.removeEventListener("touchmove",this.move,!0),document.documentElement.removeEventListener("touchend touchcancel",this.up,!0),document.documentElement.removeEventListener("touchstart",this.up,!0)},methods:{deselect:function(){this.preventActiveBehavior||(this.active=!1)},move:function(e){(this.stickDrag||this.bodyDrag)&&(e.stopPropagation(),this.stickDrag&&this.stickMove(e),this.bodyDrag&&this.bodyMove(e))},up:function(e){this.stickDrag&&this.stickUp(e),this.bodyDrag&&this.bodyUp(e)},bodyDown:function(e){var t=e.target||e.srcElement;this.preventActiveBehavior||(this.active=!0),e.button&&0!==e.button||(this.$emit("clicked",e),this.isDraggable&&this.active&&(this.dragHandle&&t.getAttribute("data-drag-handle")!==this._uid.toString()||this.dragCancel&&t.getAttribute("data-drag-cancel")===this._uid.toString()||(this.bodyDrag=!0,this.stickStartPos.mouseX=e.pageX||e.touches[0].pageX,this.stickStartPos.mouseY=e.pageY||e.touches[0].pageY,this.stickStartPos.left=this.left,this.stickStartPos.right=this.right,this.stickStartPos.top=this.top,this.stickStartPos.bottom=this.bottom,this.parentLimitation&&(this.limits=this.calcDragLimitation()))))},calcDragLimitation:function(){var e=this.parentWidth,t=this.parentHeight;return{minLeft:0,maxLeft:e-this.width,minRight:0,maxRight:e-this.width,minTop:0,maxTop:t-this.height,minBottom:0,maxBottom:t-this.height}},bodyMove:function(e){var t=this.stickStartPos,r={x:("y"!==this.axis&&"none"!==this.axis?t.mouseX-(e.pageX||e.touches[0].pageX):0)/this.parentScaleX,y:("x"!==this.axis&&"none"!==this.axis?t.mouseY-(e.pageY||e.touches[0].pageY):0)/this.parentScaleY};this.rawTop=t.top-r.y,this.rawBottom=t.bottom+r.y,this.rawLeft=t.left-r.x,this.rawRight=t.right+r.x,this.$emit("dragging",this.rect)},bodyUp:function(){this.bodyDrag=!1,this.$emit("dragging",this.rect),this.$emit("dragstop",this.rect),this.stickStartPos={mouseX:0,mouseY:0,x:0,y:0,w:0,h:0},this.limits={minLeft:null,maxLeft:null,minRight:null,maxRight:null,minTop:null,maxTop:null,minBottom:null,maxBottom:null}},stickDown:function(e,t){if(this.isResizable&&this.active){switch(this.stickDrag=!0,this.stickStartPos.mouseX=t.pageX||t.touches[0].pageX,this.stickStartPos.mouseY=t.pageY||t.touches[0].pageY,this.stickStartPos.left=this.left,this.stickStartPos.right=this.right,this.stickStartPos.top=this.top,this.stickStartPos.bottom=this.bottom,this.currentStick=e.split(""),this.stickAxis=null,this.currentStick[0]){case"b":case"t":this.stickAxis="y"}switch(this.currentStick[1]){case"r":case"l":this.stickAxis="y"===this.stickAxis?"xy":"x"}this.limits=this.calcResizeLimitation()}},calcResizeLimitation:function(){var e=this.minWidth,t=this.minHeight,r=this.aspectFactor,n=this.width,i=this.height,o=this.bottom,a=this.top,s=this.left,c=this.right,l=this.stickAxis,d=this.parentLimitation?0:null;this.aspectRatio&&(e/t>r?t=e/r:e=r*t);var u={minLeft:d,maxLeft:s+(n-e),minRight:d,maxRight:c+(n-e),minTop:d,maxTop:a+(i-t),minBottom:d,maxBottom:o+(i-t)};if(this.aspectRatio){var m={minLeft:s-Math.min(a,o)*r*2,maxLeft:s+(i-t)/2*r*2,minRight:c-Math.min(a,o)*r*2,maxRight:c+(i-t)/2*r*2,minTop:a-Math.min(s,c)/r*2,maxTop:a+(n-e)/2/r*2,minBottom:o-Math.min(s,c)/r*2,maxBottom:o+(n-e)/2/r*2};"x"===l?u={minLeft:Math.max(u.minLeft,m.minLeft),maxLeft:Math.min(u.maxLeft,m.maxLeft),minRight:Math.max(u.minRight,m.minRight),maxRight:Math.min(u.maxRight,m.maxRight)}:"y"===l&&(u={minTop:Math.max(u.minTop,m.minTop),maxTop:Math.min(u.maxTop,m.maxTop),minBottom:Math.max(u.minBottom,m.minBottom),maxBottom:Math.min(u.maxBottom,m.maxBottom)})}return u},stickMove:function(e){var t=this.stickStartPos,r={x:(t.mouseX-(e.pageX||e.touches[0].pageX))/this.parentScaleX,y:(t.mouseY-(e.pageY||e.touches[0].pageY))/this.parentScaleY};switch(this.currentStick[0]){case"b":this.rawBottom=t.bottom+r.y;break;case"t":this.rawTop=t.top-r.y}switch(this.currentStick[1]){case"r":this.rawRight=t.right+r.x;break;case"l":this.rawLeft=t.left-r.x}this.$emit("resizing",this.rect)},stickUp:function(){this.stickDrag=!1,this.stickStartPos={mouseX:0,mouseY:0,x:0,y:0,w:0,h:0},this.limits={minLeft:null,maxLeft:null,minRight:null,maxRight:null,minTop:null,maxTop:null,minBottom:null,maxBottom:null},this.rawTop=this.top,this.rawBottom=this.bottom,this.rawLeft=this.left,this.rawRight=this.right,this.stickAxis=null,this.$emit("resizing",this.rect),this.$emit("resizestop",this.rect)},aspectRatioCorrection:function(){if(this.aspectRatio){var e=this.bottom,t=this.top,r=this.left,n=this.right,i=this.width,o=this.height,a=this.aspectFactor,s=this.currentStick;if(i/o>a){var c=a*o;"l"===s[1]?this.left=r+i-c:this.right=n+i-c}else{var l=i/a;"t"===s[0]?this.top=t+o-l:this.bottom=e+o-l}}}},computed:{style:function(){return{top:this.top+"px",left:this.left+"px",width:this.width+"px",height:this.height+"px",zIndex:this.zIndex}},vdrStick:function(){var e=this;return function(t){var r={width:8/e.parentScaleX+"px",height:8/e.parentScaleY+"px"};return r[n.y[t[0]]]=8/e.parentScaleX/-2+"px",r[n.x[t[1]]]=8/e.parentScaleX/-2+"px",r}},width:function(){return this.parentWidth-this.left-this.right},height:function(){return this.parentHeight-this.top-this.bottom},rect:function(){return{left:Math.round(this.left),top:Math.round(this.top),width:Math.round(this.width),height:Math.round(this.height)}}},watch:{rawLeft:function(e){var t=this.limits,r=this.stickAxis,n=this.aspectFactor,i=this.aspectRatio,o=this.left,a=this.bottom,s=this.top;if(null!==t.minLeft&&e<t.minLeft?e=t.minLeft:null!==t.maxLeft&&t.maxLeft<e&&(e=t.maxLeft),i&&"x"===r){var c=o-e;this.rawTop=s-c/n/2,this.rawBottom=a-c/n/2}this.left=e},rawRight:function(e){var t=this.limits,r=this.stickAxis,n=this.aspectFactor,i=this.aspectRatio,o=this.right,a=this.bottom,s=this.top;if(null!==t.minRight&&e<t.minRight?e=t.minRight:null!==t.maxRight&&t.maxRight<e&&(e=t.maxRight),i&&"x"===r){var c=o-e;this.rawTop=s-c/n/2,this.rawBottom=a-c/n/2}this.right=e},rawTop:function(e){var t=this.limits,r=this.stickAxis,n=this.aspectFactor,i=this.aspectRatio,o=this.right,a=this.left,s=this.top;if(null!==t.minTop&&e<t.minTop?e=t.minTop:null!==t.maxTop&&t.maxTop<e&&(e=t.maxTop),i&&"y"===r){var c=s-e;this.rawLeft=a-c*n/2,this.rawRight=o-c*n/2}this.top=e},rawBottom:function(e){var t=this.limits,r=this.stickAxis,n=this.aspectFactor,i=this.aspectRatio,o=this.right,a=this.left,s=this.bottom;if(null!==t.minBottom&&e<t.minBottom?e=t.minBottom:null!==t.maxBottom&&t.maxBottom<e&&(e=t.maxBottom),i&&"y"===r){var c=s-e;this.rawLeft=a-c*n/2,this.rawRight=o-c*n/2}this.bottom=e},width:function(){this.aspectRatioCorrection()},height:function(){this.aspectRatioCorrection()},active:function(e){e?this.$emit("activated"):this.$emit("deactivated")},isActive:function(e){this.active=e},z:function(e){(e>=0||"auto"===e)&&(this.zIndex=e)},aspectRatio:function(e){e&&(this.aspectFactor=this.width/this.height)},minw:function(e){e>0&&e<=this.width&&(this.minWidth=e)},minh:function(e){e>0&&e<=this.height&&(this.minHeight=e)},x:function(){if(!this.stickDrag&&!this.bodyDrag){this.parentLimitation&&(this.limits=this.calcDragLimitation());var e=this.x-this.left;this.rawLeft=this.x,this.rawRight=this.right-e}},y:function(){if(!this.stickDrag&&!this.bodyDrag){this.parentLimitation&&(this.limits=this.calcDragLimitation());var e=this.y-this.top;this.rawTop=this.y,this.rawBottom=this.bottom-e}},w:function(){if(!this.stickDrag&&!this.bodyDrag){this.currentStick=["m","r"],this.stickAxis="x",this.parentLimitation&&(this.limits=this.calcResizeLimitation());var e=this.width-this.w;this.rawRight=this.right+e}},h:function(){if(!this.stickDrag&&!this.bodyDrag){this.currentStick=["b","m"],this.stickAxis="y",this.parentLimitation&&(this.limits=this.calcResizeLimitation());var e=this.height-this.h;this.rawBottom=this.bottom+e}},parentW:function(e){this.right=e-this.width-this.left,this.parentWidth=e},parentH:function(e){this.bottom=e-this.height-this.top,this.parentHeight=e}}}},15:function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var r=t.protocol+"//"+t.host,n=r+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var i,o=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(o)?e:(i=0===o.indexOf("//")?o:0===o.indexOf("/")?r+o:n+o.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")})}},16:function(e,t,r){(e.exports=r(6)(!1)).push([e.i,'\n.vdr,.vdr.active:before{position:absolute;-webkit-box-sizing:border-box;box-sizing:border-box\n}\n.vdr.active:before{content:"";width:100%;height:100%;top:0;left:0;outline:1px dashed #d6d6d6\n}\n.vdr-stick{-webkit-box-sizing:border-box;box-sizing:border-box;position:absolute;font-size:1px;background:#fff;border:1px solid #6c6c6c;-webkit-box-shadow:0 0 2px #bbb;box-shadow:0 0 2px #bbb\n}\n.inactive .vdr-stick{display:none\n}\n.vdr-stick-br,.vdr-stick-tl{cursor:nwse-resize\n}\n.vdr-stick-bm,.vdr-stick-tm{left:50%;cursor:ns-resize\n}\n.vdr-stick-bl,.vdr-stick-tr{cursor:nesw-resize\n}\n.vdr-stick-ml,.vdr-stick-mr{top:50%;cursor:ew-resize\n}\n.vdr-stick.not-resizable{display:none\n}',""])},17:function(e,t,r){var n=r(0),i=r.n(n);i.a},18:function(e,t,r){r.r(t);var n=r(4),i=r(2);for(var o in i)"default"!==o&&function(e){r.d(t,e,function(){return i[e]})}(o);var a=(r(17),r(3)),s=Object(a.a)(i.default,n.a,n.b,!1,null,null,null);s.options.__file="src/components/vue-drag-resize.vue",t.default=s.exports},2:function(e,t,r){r.r(t);var n=r(1),i=r.n(n);for(var o in n)"default"!==o&&function(e){r.d(t,e,function(){return n[e]})}(o);t.default=i.a},3:function(e,t,r){function n(e,t,r,n,i,o,a,s){var c,l="function"==typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=r,l._compiled=!0),n&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),a?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},l._ssrRegister=c):i&&(c=s?function(){i.call(this,this.$root.$options.shadowRoot)}:i),c)if(l.functional){l._injectStyles=c;var d=l.render;l.render=function(e,t){return c.call(t),d(e,t)}}else{var u=l.beforeCreate;l.beforeCreate=u?[].concat(u,c):[c]}return{exports:e,options:l}}r.d(t,"a",function(){return n})},4:function(e,t,r){var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"vdr",class:e.active||e.isActive?"active":"inactive",style:e.style,on:{mousedown:function(t){t.stopPropagation(),t.preventDefault(),e.bodyDown(t)},touchstart:function(t){t.stopPropagation(),t.preventDefault(),e.bodyDown(t)}}},[e._t("default"),e._v(" "),e._l(e.sticks,function(t){return r("div",{staticClass:"vdr-stick",class:["vdr-stick-"+t,e.isResizable?"":"not-resizable"],style:e.vdrStick(t),on:{mousedown:function(r){r.stopPropagation(),r.preventDefault(),e.stickDown(t,r)},touchstart:function(r){r.stopPropagation(),r.preventDefault(),e.stickDown(t,r)}}})})],2)},i=[];n._withStripped=!0,r.d(t,"a",function(){return n}),r.d(t,"b",function(){return i})},44:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r(18);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return function(e){return e&&e.__esModule?e:{default:e}}(n).default}})},5:function(e,t,r){function n(e,t){for(var r=0;r<e.length;r++){var n=e[r],i=m[n.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](n.parts[o]);for(;o<n.parts.length;o++)i.parts.push(d(n.parts[o],t))}else{for(var a=[],o=0;o<n.parts.length;o++)a.push(d(n.parts[o],t));m[n.id]={id:n.id,refs:1,parts:a}}}}function i(e,t){for(var r=[],n={},i=0;i<e.length;i++){var o=e[i],a=t.base?o[0]+t.base:o[0],s=o[1],c=o[2],l=o[3],d={css:s,media:c,sourceMap:l};n[a]?n[a].parts.push(d):r.push(n[a]={id:a,parts:[d]})}return r}function o(e,t){var r=h(e.insertInto);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=v[v.length-1];if("top"===e.insertAt)n?n.nextSibling?r.insertBefore(t,n.nextSibling):r.appendChild(t):r.insertBefore(t,r.firstChild),v.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");r.appendChild(t)}}function a(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=v.indexOf(e);t>=0&&v.splice(t,1)}function s(e){var t=document.createElement("style");return e.attrs.type="text/css",l(t,e.attrs),o(e,t),t}function c(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",l(t,e.attrs),o(e,t),t}function l(e,t){Object.keys(t).forEach(function(r){e.setAttribute(r,t[r])})}function d(e,t){var r,n,i,o;if(t.transform&&e.css){if(!(o=t.transform(e.css)))return function(){};e.css=o}if(t.singleton){var l=_++;r=f||(f=s(t)),n=u.bind(null,r,l,!1),i=u.bind(null,r,l,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(r=c(t),n=function(e,t,r){var n=r.css,i=r.sourceMap,o=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||o)&&(n=g(n)),i&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([n],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,r,t),i=function(){a(r),r.href&&URL.revokeObjectURL(r.href)}):(r=s(t),n=function(e,t){var r=t.css,n=t.media;if(n&&e.setAttribute("media",n),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}.bind(null,r),i=function(){a(r)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else i()}}function u(e,t,r,n){var i=r?"":n.css;if(e.styleSheet)e.styleSheet.cssText=b(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}var m={},p=function(e){var t;return function(){return void 0===t&&(t=function(){return window&&document&&document.all&&!window.atob}.apply(this,arguments)),t}}(),h=function(e){var t={};return function(e){return void 0===t[e]&&(t[e]=function(e){return document.querySelector(e)}.call(this,e)),t[e]}}(),f=null,_=0,v=[],g=r(15);e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||(t.singleton=p()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var r=i(e,t);return n(r,t),function(e){for(var o=[],a=0;a<r.length;a++){var s=r[a],c=m[s.id];c.refs--,o.push(c)}e&&n(i(e,t),t);for(var a=0;a<o.length;a++){var c=o[a];if(0===c.refs){for(var l=0;l<c.parts.length;l++)c.parts[l]();delete m[c.id]}}}};var b=function(){var e=[];return function(t,r){return e[t]=r,e.filter(Boolean).join("\n")}}()},6:function(e,t){function r(e,t){var r=e[1]||"",n=e[3];if(!n)return r;if(t&&"function"==typeof btoa){var i=function(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}(n);return[r].concat(n.sources.map(function(e){return"/*# sourceURL="+n.sourceRoot+e+" */"})).concat([i]).join("\n")}return[r].join("\n")}e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=r(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n}).join("")},t.i=function(e,r){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(n[o]=!0)}for(i=0;i<e.length;i++){var a=e[i];"number"==typeof a[0]&&n[a[0]]||(r&&!a[2]?a[2]=r:r&&(a[2]="("+a[2]+") and ("+r+")"),t.push(a))}},t}}})}),VueDragResize=unwrapExports(dist),dist_1=dist.VueDragResize;const{mapGetters:mapGetters$2}=createNamespacedHelpers("KnowledgeBase");var script$4={name:"DragResize",components:{VueDragResize:VueDragResize},computed:{...mapGetters$2(["maximized"]),coordinates:{set(e){this.$store.commit("KnowledgeBase/setCoordinates",e)},get(){return this.$store.getters["KnowledgeBase/coordinates"]}}},methods:{resize(e){this.coordinates={width:e.width,height:e.height,top:e.top,left:e.left}},onActivated(){$(this.$refs.resize.$el).find(".vdr-stick").addClass("mdi mdi-resize-bottom-right q-btn q-btn--dense q-btn--round q-icon contrast-50")}}};const __vue_script__$4=script$4;var __vue_render__$4=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("vue-drag-resize",{ref:"resize",class:[e.maximized?"fit position-sticky":"modal-mini","overflow-hidden"],attrs:{isResizable:!0,isDraggable:!e.maximized,dragHandle:".js-drag",sticks:["br"],x:e.coordinates.left,y:e.coordinates.top,w:e.coordinates.width,h:e.coordinates.height},on:{activated:e.onActivated,resizing:e.resize,dragging:e.resize}},[e._t("default",null,{height:e.coordinates.height})],2)],1)},__vue_staticRenderFns__$4=[];__vue_render__$4._withStripped=!0;const __vue_inject_styles__$4=function(e){e&&e("data-v-707afad8_0",{source:"\n.modal-mini {\r\n  max-height: unset !important;\r\n  max-width: unset !important;\n}\n.vdr-stick.q-icon:before {\r\n  font-size: 1.718em;\r\n  left: -5px;\r\n  position: relative;\r\n  bottom: 5px;\n}\n.vdr-stick.q-icon {\r\n  bottom: 9px !important;\r\n  right: 25px !important;\r\n  font-size: 14px;\r\n  background: none;\r\n  border: none;\r\n  box-shadow: 0 1px 5px rgba(0, 0, 0, 0.2), 0 2px 2px rgba(0, 0, 0, 0.14), 0 3px 1px -2px rgba(0, 0, 0, 0.12);\r\n  display: none;\r\n  cursor: nwse-resize !important;\r\n  position: absolute !important;\n}\n.vdr.active {\r\n  font-weight: unset;\n}\n.modal-mini .vdr-stick {\r\n  display: inline-flex;\n}\r\n",map:{version:3,sources:["C:\\www\\YetiForceCRM\\public_html\\src\\layouts\\resources\\views\\KnowledgeBase\\components\\DragResize.vue"],names:[],mappings:";AAoEA;EACA,4BAAA;EACA,2BAAA;AACA;AACA;EACA,kBAAA;EACA,UAAA;EACA,kBAAA;EACA,WAAA;AACA;AACA;EACA,sBAAA;EACA,sBAAA;EACA,eAAA;EACA,gBAAA;EACA,YAAA;EACA,2GAAA;EACA,aAAA;EACA,8BAAA;EACA,6BAAA;AACA;AACA;EACA,kBAAA;AACA;AACA;EACA,oBAAA;AACA",file:"DragResize.vue",sourcesContent:['\x3c!--\r\n/**\r\n * DragResize component\r\n *\r\n * @description Use of vue-drag-resize\r\n * @license YetiForce Public License 3.0\r\n * @author Tomasz Poradzewski <t.poradzewski@yetiforce.com>\r\n */\r\n--\x3e\r\n<template>\r\n  <div>\r\n    <vue-drag-resize\r\n      @activated="onActivated"\r\n      :isResizable="true"\r\n      :isDraggable="!maximized"\r\n      v-on:resizing="resize"\r\n      v-on:dragging="resize"\r\n      dragHandle=".js-drag"\r\n      :sticks="[\'br\']"\r\n      :x="coordinates.left"\r\n      :y="coordinates.top"\r\n      :w="coordinates.width"\r\n      :h="coordinates.height"\r\n      :class="[maximized ? \'fit position-sticky\' : \'modal-mini\', \'overflow-hidden\']"\r\n      ref="resize"\r\n    >\r\n      <slot :height="coordinates.height"></slot>\r\n    </vue-drag-resize>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport VueDragResize from \'vue-drag-resize\'\r\nimport { createNamespacedHelpers } from \'vuex\'\r\nconst { mapGetters } = createNamespacedHelpers(\'KnowledgeBase\')\r\nexport default {\r\n  name: \'DragResize\',\r\n  components: { VueDragResize },\r\n  computed: {\r\n    ...mapGetters([\'maximized\']),\r\n    coordinates: {\r\n      set(val) {\r\n        this.$store.commit(\'KnowledgeBase/setCoordinates\', val)\r\n      },\r\n      get() {\r\n        return this.$store.getters[\'KnowledgeBase/coordinates\']\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    resize(newRect) {\r\n      this.coordinates = {\r\n        width: newRect.width,\r\n        height: newRect.height,\r\n        top: newRect.top,\r\n        left: newRect.left\r\n      }\r\n    },\r\n    onActivated() {\r\n      $(this.$refs.resize.$el)\r\n        .find(\'.vdr-stick\')\r\n        .addClass(\'mdi mdi-resize-bottom-right q-btn q-btn--dense q-btn--round q-icon contrast-50\')\r\n    }\r\n  }\r\n}\r\n<\/script>\r\n\r\n<style>\r\n.modal-mini {\r\n  max-height: unset !important;\r\n  max-width: unset !important;\r\n}\r\n.vdr-stick.q-icon:before {\r\n  font-size: 1.718em;\r\n  left: -5px;\r\n  position: relative;\r\n  bottom: 5px;\r\n}\r\n.vdr-stick.q-icon {\r\n  bottom: 9px !important;\r\n  right: 25px !important;\r\n  font-size: 14px;\r\n  background: none;\r\n  border: none;\r\n  box-shadow: 0 1px 5px rgba(0, 0, 0, 0.2), 0 2px 2px rgba(0, 0, 0, 0.14), 0 3px 1px -2px rgba(0, 0, 0, 0.12);\r\n  display: none;\r\n  cursor: nwse-resize !important;\r\n  position: absolute !important;\r\n}\r\n.vdr.active {\r\n  font-weight: unset;\r\n}\r\n.modal-mini .vdr-stick {\r\n  display: inline-flex;\r\n}\r\n</style>\r\n']},media:void 0})},__vue_scope_id__$4=void 0,__vue_module_identifier__$4=void 0,__vue_is_functional_template__$4=!1;var DragResize=normalizeComponent_1({render:__vue_render__$4,staticRenderFns:__vue_staticRenderFns__$4},__vue_inject_styles__$4,__vue_script__$4,void 0,!1,void 0,browser,void 0);const{mapGetters:mapGetters$3,mapActions:mapActions$2}=createNamespacedHelpers("KnowledgeBase");var script$5={name:"RecordPreviewContent",components:{Icon:Icon,Carousel:Carousel,RecordsList:RecordsList},props:{height:{type:Number,default:0}},computed:{...mapGetters$3(["tree","record","iconSize"]),maximized:{set(e){this.$store.commit("KnowledgeBase/setMaximized",e)},get(){return this.$store.getters["KnowledgeBase/maximized"]}},hasRelatedRecords(){if(this.record)return Object.keys(this.record.related).some(e=>"Articles"!==e&&"ModComments"!==e&&void 0===this.record.related[e].length)},relatedColClass(){if(this.record){let e=0,t="col";return Object.keys(this.record.related).forEach(t=>{"Articles"!==t&&"ModComments"!==t&&void 0===this.record.related[t].length&&e++}),2===e?t="col-sm-6":3===e&&(t="col-sm-6 col-md-4"),t}},hasRelatedArticles(){return!!this.record&&0!==this.record.related.Articles.length},hasRelatedComments(){return!!this.record&&0!==this.record.related.ModComments.length}},methods:{...mapActions$2(["fetchCategories","fetchData","fetchRecord","initState"]),onResize(e){void 0!==this.$refs.content&&$(this.$refs.content).find("img").css("max-width",e.width)}}};const __vue_script__$5=script$5;var __vue_render__$5=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("q-card",{staticClass:"KnowledgeBase__RecordPreview"},[r("q-bar",{staticClass:"bg-yeti text-white dialog-header",attrs:{dark:""}},[r("div",{staticClass:"flex items-center"},[r("div",{staticClass:"flex items-center no-wrap ellipsis q-mr-sm-sm"},[r("q-icon",{staticClass:"q-mr-sm",attrs:{name:"mdi-text"}}),e._v("\n        "+e._s(e.record.subject)+"\n      ")],1),e._v(" "),r("div",{staticClass:"flex items-center text-grey-4 small"},[r("div",{staticClass:"flex items-center"},[r("q-icon",{attrs:{name:e.tree.topCategory.icon,size:"15px"}}),e._v(" "),r("q-icon",{attrs:{size:"1.5em",name:"mdi-chevron-right"}}),e._v(" "),r("span",{staticClass:"flex items-center",domProps:{innerHTML:e._s(e.record.category)}}),e._v(" "),r("q-tooltip",[e._v("\n            "+e._s(e.translate("JS_CATEGORY"))+"\n          ")])],1),e._v(" "),r("q-separator",{attrs:{dark:"",vertical:"",spaced:""}}),e._v(" "),r("div",[r("q-icon",{attrs:{name:"mdi-calendar-clock",size:"15px"}}),e._v("\n          "+e._s(e.record.short_createdtime)+"\n          "),r("q-tooltip",[e._v("\n            "+e._s(e.translate("JS_CREATED")+": "+e.record.full_createdtime)+"\n          ")])],1),e._v(" "),e.record.short_modifiedtime?[r("q-separator",{attrs:{dark:"",vertical:"",spaced:""}}),e._v(" "),r("div",[r("q-icon",{attrs:{name:"mdi-square-edit-outline",size:"15px"}}),e._v("\n            "+e._s(e.record.short_modifiedtime)+"\n            "),r("q-tooltip",[e._v("\n              "+e._s(e.translate("JS_MODIFIED")+": "+e.record.full_modifiedtime)+"\n            ")])],1)]:e._e()],2)]),e._v(" "),r("q-space"),e._v(" "),e._t("header-right",[r("a",{directives:[{name:"show",rawName:"v-show",value:!e.maximized,expression:"!maximized"}],staticClass:"flex grabbable text-decoration-none text-white",attrs:{href:"#"}},[r("q-icon",{staticClass:"js-drag",attrs:{name:"mdi-drag",size:"19px"}})],1),e._v(" "),r("q-btn",{attrs:{dense:"",flat:"",icon:e.maximized?"mdi-window-restore":"mdi-window-maximize"},on:{click:function(t){e.maximized=!e.maximized}}},[r("q-tooltip",[e._v(e._s(e.maximized?e.translate("JS_MINIMIZE"):e.translate("JS_MAXIMIZE")))])],1),e._v(" "),r("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"mdi-close"}},[r("q-tooltip",[e._v(e._s(e.translate("JS_CLOSE")))])],1)])],2),e._v(" "),r("q-card-section",{class:["scroll",e.maximized?"modal-full-height":""],style:e.height?{"max-height":e.height-31.14+"px"}:{}},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.record.introduction,expression:"record.introduction"}]},[r("div",{staticClass:"text-subtitle2 text-bold"},[e._v(e._s(e.record.introduction))])]),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:e.record.content,expression:"record.content"}]},[r("q-resize-observer",{on:{resize:e.onResize}}),e._v(" "),r("div",{ref:"content"},["PLL_PRESENTATION"===e.record.view&&e.record.content.length>1?r("carousel",{attrs:{record:e.record}}):r("div",[r("q-separator"),e._v(" "),r("div",{domProps:{innerHTML:e._s("object"==typeof e.record.content?e.record.content[0]:e.record.content)}})],1)],1)],1),e._v(" "),e.hasRelatedArticles?r("div",[r("q-separator"),e._v(" "),e.record.related?r("records-list",{attrs:{data:e.record.related.Articles,title:e.translate("JS_RELATED_ARTICLES")}}):e._e()],1):e._e(),e._v(" "),e.hasRelatedRecords?r("div",[r("q-separator"),e._v(" "),r("div",{staticClass:"q-pa-md q-table__title"},[e._v(e._s(e.translate("JS_RELATED_RECORDS")))]),e._v(" "),r("div",{staticClass:"q-pa-sm row items-start q-col-gutter-md"},[e._l(e.record.related,function(t,n){return["Articles"!==n&&"ModComments"!==n&&void 0===t.length?r("div",{key:n,class:[e.relatedColClass]},[r("q-list",{attrs:{bordered:"",padding:"",dense:""}},[r("q-item",{staticClass:"text-black flex",attrs:{header:"",clickable:""}},[r("icon",{staticClass:"mr-2",attrs:{icon:"userIcon-"+n,size:e.iconSize}}),e._v("\n                "+e._s(e.record.translations[n])+"\n              ")],1),e._v(" "),e._l(t,function(t,i){return r("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:i,staticClass:"text-subtitle2",attrs:{clickable:""}},[r("q-item-section",{staticClass:"align-items-center flex-row no-wrap justify-content-start"},[r("a",{staticClass:"js-popover-tooltip--record ellipsis",attrs:{href:"index.php?module="+n+"&view=Detail&record="+i}},[e._v("\n                    "+e._s(t)+"\n                  ")])])],1)})],2)],1):e._e()]})],2)],1):e._e(),e._v(" "),e.hasRelatedComments?r("div",[r("q-separator"),e._v(" "),r("div",{staticClass:"q-pa-md q-table__title"},[e._v(e._s(e.translate("JS_COMMENTS")))]),e._v(" "),r("q-list",{attrs:{padding:""}},e._l(e.record.related.ModComments,function(t,n){return r("q-item",{key:n},[r("q-item-section",{attrs:{avatar:"",top:""}},[r("q-avatar",{attrs:{size:"iconSize"}},[void 0!==t.avatar.url?r("img",{attrs:{src:t.avatar.url}}):r("q-icon",{attrs:{name:"mdi-account"}})],1)],1),e._v(" "),r("q-item-section",[r("q-item-label",[r("a",{staticClass:"js-popover-tooltip--record",attrs:{href:"index.php?module=Users&view=Detail&record="+t.userid}},[e._v(e._s(t.userName)+"\n              ")])]),e._v(" "),r("q-item-label",[r("div",{domProps:{innerHTML:e._s(t.comment)}})])],1),e._v(" "),r("q-item-section",{attrs:{side:"",top:""}},[r("q-item-label",{attrs:{caption:""}},[e._v(e._s(t.modifiedShort))]),e._v(" "),r("q-tooltip",{attrs:{anchor:"top middle",self:"center middle"}},[e._v("\n              "+e._s(e.translate("JS_MODIFIED")+": "+t.modifiedFull)+"\n            ")])],1)],1)}),1)],1):e._e()])],1)},__vue_staticRenderFns__$5=[];__vue_render__$5._withStripped=!0;const __vue_inject_styles__$5=function(e){e&&e("data-v-48ce58e0_0",{source:"\n.dialog-header {\r\n  padding-top: 3px !important;\r\n  padding-bottom: 3px !important;\r\n  height: unset !important;\n}\n.modal-full-height {\r\n  max-height: calc(100vh - 31.14px) !important;\n}\n.grabbable:hover {\r\n  cursor: move;\r\n  cursor: grab;\r\n  cursor: -moz-grab;\r\n  cursor: -webkit-grab;\n}\n.grabbable:active {\r\n  cursor: grabbing;\r\n  cursor: -moz-grabbing;\r\n  cursor: -webkit-grabbing;\n}\n.contrast-50 {\r\n  filter: contrast(50%);\n}\r\n",map:{version:3,sources:["C:\\www\\YetiForceCRM\\public_html\\src\\layouts\\resources\\views\\KnowledgeBase\\components\\RecordPreviewContent.vue"],names:[],mappings:";AA+NA;EACA,2BAAA;EACA,8BAAA;EACA,wBAAA;AACA;AACA;EACA,4CAAA;AACA;AACA;EACA,YAAA;EACA,YAAA;EACA,iBAAA;EACA,oBAAA;AACA;AACA;EACA,gBAAA;EACA,qBAAA;EACA,wBAAA;AACA;AACA;EACA,qBAAA;AACA",file:"RecordPreviewContent.vue",sourcesContent:['\x3c!--\r\n/**\r\n * RecordPreviewContent component\r\n *\r\n * @description Part of q-dialog\r\n * @license YetiForce Public License 3.0\r\n * @author Tomasz Poradzewski <t.poradzewski@yetiforce.com>\r\n */\r\n--\x3e\r\n<template>\r\n  <q-card class="KnowledgeBase__RecordPreview">\r\n    <q-bar dark class="bg-yeti text-white dialog-header">\r\n      <div class="flex items-center">\r\n        <div class="flex items-center no-wrap ellipsis q-mr-sm-sm">\r\n          <q-icon name="mdi-text" class="q-mr-sm" />\r\n          {{ record.subject }}\r\n        </div>\r\n        <div class="flex items-center text-grey-4 small">\r\n          <div class="flex items-center">\r\n            <q-icon :name="tree.topCategory.icon" size="15px"></q-icon>\r\n            <q-icon size="1.5em" name="mdi-chevron-right" />\r\n            <span v-html="record.category" class="flex items-center"></span>\r\n            <q-tooltip>\r\n              {{ translate(\'JS_CATEGORY\') }}\r\n            </q-tooltip>\r\n          </div>\r\n          <q-separator dark vertical spaced />\r\n          <div>\r\n            <q-icon name="mdi-calendar-clock" size="15px"></q-icon>\r\n            {{ record.short_createdtime }}\r\n            <q-tooltip>\r\n              {{ translate(\'JS_CREATED\') + \': \' + record.full_createdtime }}\r\n            </q-tooltip>\r\n          </div>\r\n          <template v-if="record.short_modifiedtime">\r\n            <q-separator dark vertical spaced />\r\n            <div>\r\n              <q-icon name="mdi-square-edit-outline" size="15px"></q-icon>\r\n              {{ record.short_modifiedtime }}\r\n              <q-tooltip>\r\n                {{ translate(\'JS_MODIFIED\') + \': \' + record.full_modifiedtime }}\r\n              </q-tooltip>\r\n            </div>\r\n          </template>\r\n        </div>\r\n      </div>\r\n      <q-space />\r\n      <slot name="header-right">\r\n        <a v-show="!maximized" class="flex grabbable text-decoration-none text-white" href="#">\r\n          <q-icon class="js-drag" name="mdi-drag" size="19px" />\r\n        </a>\r\n        <q-btn\r\n          dense\r\n          flat\r\n          :icon="maximized ? \'mdi-window-restore\' : \'mdi-window-maximize\'"\r\n          @click="maximized = !maximized"\r\n        >\r\n          <q-tooltip>{{ maximized ? translate(\'JS_MINIMIZE\') : translate(\'JS_MAXIMIZE\') }}</q-tooltip>\r\n        </q-btn>\r\n        <q-btn dense flat icon="mdi-close" v-close-popup>\r\n          <q-tooltip>{{ translate(\'JS_CLOSE\') }}</q-tooltip>\r\n        </q-btn>\r\n      </slot>\r\n    </q-bar>\r\n    <q-card-section\r\n      :class="[\'scroll\', maximized ? \'modal-full-height\' : \'\']"\r\n      :style="height ? { \'max-height\': `${height - 31.14}px` } : {}"\r\n    >\r\n      <div v-show="record.introduction">\r\n        <div class="text-subtitle2 text-bold">{{ record.introduction }}</div>\r\n      </div>\r\n      <div v-show="record.content">\r\n        <q-resize-observer @resize="onResize" />\r\n        <div ref="content">\r\n          <carousel v-if="record.view === \'PLL_PRESENTATION\' && record.content.length > 1" :record="record" />\r\n          <div v-else>\r\n            <q-separator />\r\n            <div v-html="typeof record.content === \'object\' ? record.content[0] : record.content"></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div v-if="hasRelatedArticles">\r\n        <q-separator />\r\n        <records-list v-if="record.related" :data="record.related.Articles" :title="translate(\'JS_RELATED_ARTICLES\')" />\r\n      </div>\r\n      <div v-if="hasRelatedRecords">\r\n        <q-separator />\r\n        <div class="q-pa-md q-table__title">{{ translate(\'JS_RELATED_RECORDS\') }}</div>\r\n        <div class="q-pa-sm row items-start q-col-gutter-md">\r\n          <template v-for="(moduleRecords, parentModule) in record.related">\r\n            <div\r\n              v-if="parentModule !== \'Articles\' && parentModule !== \'ModComments\' && moduleRecords.length === undefined"\r\n              :class="[relatedColClass]"\r\n              :key="parentModule"\r\n            >\r\n              <q-list bordered padding dense>\r\n                <q-item header clickable class="text-black flex">\r\n                  <icon :icon="\'userIcon-\' + parentModule" :size="iconSize" class="mr-2"></icon>\r\n                  {{ record.translations[parentModule] }}\r\n                </q-item>\r\n                <q-item\r\n                  clickable\r\n                  v-for="(relatedRecord, relatedRecordId) in moduleRecords"\r\n                  :key="relatedRecordId"\r\n                  class="text-subtitle2"\r\n                  v-ripple\r\n                >\r\n                  <q-item-section class="align-items-center flex-row no-wrap justify-content-start">\r\n                    <a\r\n                      class="js-popover-tooltip--record ellipsis"\r\n                      :href="`index.php?module=${parentModule}&view=Detail&record=${relatedRecordId}`"\r\n                    >\r\n                      {{ relatedRecord }}\r\n                    </a>\r\n                  </q-item-section>\r\n                </q-item>\r\n              </q-list>\r\n            </div>\r\n          </template>\r\n        </div>\r\n      </div>\r\n      <div v-if="hasRelatedComments">\r\n        <q-separator />\r\n        <div class="q-pa-md q-table__title">{{ translate(\'JS_COMMENTS\') }}</div>\r\n        <q-list padding>\r\n          <q-item v-for="(relatedRecord, relatedRecordId) in record.related.ModComments" :key="relatedRecordId">\r\n            <q-item-section avatar top>\r\n              <q-avatar size="iconSize">\r\n                <img v-if="relatedRecord.avatar.url !== undefined" :src="relatedRecord.avatar.url" />\r\n                <q-icon v-else name="mdi-account" />\r\n              </q-avatar>\r\n            </q-item-section>\r\n            <q-item-section>\r\n              <q-item-label>\r\n                <a\r\n                  class="js-popover-tooltip--record"\r\n                  :href="`index.php?module=Users&view=Detail&record=${relatedRecord.userid}`"\r\n                  >{{ relatedRecord.userName }}\r\n                </a>\r\n              </q-item-label>\r\n              <q-item-label><div v-html="relatedRecord.comment"></div></q-item-label>\r\n            </q-item-section>\r\n            <q-item-section side top>\r\n              <q-item-label caption>{{ relatedRecord.modifiedShort }}</q-item-label>\r\n              <q-tooltip anchor="top middle" self="center middle">\r\n                {{ translate(\'JS_MODIFIED\') + \': \' + relatedRecord.modifiedFull }}\r\n              </q-tooltip>\r\n            </q-item-section>\r\n          </q-item>\r\n        </q-list>\r\n      </div>\r\n    </q-card-section>\r\n  </q-card>\r\n</template>\r\n<script>\r\nimport Icon from \'../../../../../components/Icon.vue\'\r\nimport Carousel from \'./Carousel.vue\'\r\nimport RecordsList from \'./RecordsList.vue\'\r\nimport { createNamespacedHelpers } from \'vuex\'\r\nconst { mapGetters, mapActions } = createNamespacedHelpers(\'KnowledgeBase\')\r\nexport default {\r\n  name: \'RecordPreviewContent\',\r\n  components: { Icon, Carousel, RecordsList },\r\n  props: {\r\n    height: {\r\n      type: Number,\r\n      default: 0\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters([\'tree\', \'record\', \'iconSize\']),\r\n    maximized: {\r\n      set(val) {\r\n        this.$store.commit(\'KnowledgeBase/setMaximized\', val)\r\n      },\r\n      get() {\r\n        return this.$store.getters[\'KnowledgeBase/maximized\']\r\n      }\r\n    },\r\n    hasRelatedRecords() {\r\n      if (this.record) {\r\n        return Object.keys(this.record.related).some(obj => {\r\n          return obj !== \'Articles\' && obj !== \'ModComments\' && this.record.related[obj].length === undefined\r\n        })\r\n      }\r\n    },\r\n    relatedColClass() {\r\n      if (this.record) {\r\n        let relatedModules = 0\r\n        let relatedColClass = \'col\'\r\n        Object.keys(this.record.related).forEach(key => {\r\n          if (key !== \'Articles\' && key !== \'ModComments\' && this.record.related[key].length === undefined) {\r\n            relatedModules++\r\n          }\r\n        })\r\n        if (relatedModules === 2) {\r\n          relatedColClass = \'col-sm-6\'\r\n        } else if (relatedModules === 3) {\r\n          relatedColClass = \'col-sm-6 col-md-4\'\r\n        }\r\n        return relatedColClass\r\n      }\r\n    },\r\n    hasRelatedArticles() {\r\n      return this.record ? this.record.related.Articles.length !== 0 : false\r\n    },\r\n    hasRelatedComments() {\r\n      return this.record ? this.record.related.ModComments.length !== 0 : false\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapActions([\'fetchCategories\', \'fetchData\', \'fetchRecord\', \'initState\']),\r\n    onResize(size) {\r\n      if (this.$refs.content !== undefined) {\r\n        $(this.$refs.content)\r\n          .find(\'img\')\r\n          .css(\'max-width\', size.width)\r\n      }\r\n    }\r\n  }\r\n}\r\n<\/script>\r\n<style>\r\n.dialog-header {\r\n  padding-top: 3px !important;\r\n  padding-bottom: 3px !important;\r\n  height: unset !important;\r\n}\r\n.modal-full-height {\r\n  max-height: calc(100vh - 31.14px) !important;\r\n}\r\n.grabbable:hover {\r\n  cursor: move;\r\n  cursor: grab;\r\n  cursor: -moz-grab;\r\n  cursor: -webkit-grab;\r\n}\r\n.grabbable:active {\r\n  cursor: grabbing;\r\n  cursor: -moz-grabbing;\r\n  cursor: -webkit-grabbing;\r\n}\r\n.contrast-50 {\r\n  filter: contrast(50%);\r\n}\r\n</style>\r\n']},media:void 0})},__vue_scope_id__$5=void 0,__vue_module_identifier__$5=void 0,__vue_is_functional_template__$5=!1;var RecordPreviewContent=normalizeComponent_1({render:__vue_render__$5,staticRenderFns:__vue_staticRenderFns__$5},__vue_inject_styles__$5,__vue_script__$5,void 0,!1,void 0,browser,void 0);const{mapGetters:mapGetters$4}=createNamespacedHelpers("KnowledgeBase");var script$6={name:"RecordPreview",components:{RecordPreviewContent:RecordPreviewContent,DragResize:DragResize},props:{isDragResize:{type:Boolean,default:!0}},computed:{...mapGetters$4(["maximized"]),dialog:{set(e){this.$store.commit("KnowledgeBase/setDialog",e)},get(){return this.$store.getters["KnowledgeBase/dialog"]}}}};const __vue_script__$6=script$6;var __vue_render__$6=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("q-dialog",{attrs:{maximized:e.maximized,"transition-show":"slide-up","transition-hide":"slide-down","content-class":"quasar-reset"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[e.isDragResize&&!e.$q.platform.is.mobile?r("drag-resize",{scopedSlots:e._u([{key:"default",fn:function(e){return[r("record-preview-content",{attrs:{height:e.height}})]}}],null,!1,147791843)}):r("record-preview-content",[r("template",{slot:"header-right"},[e._t("header-right")],2)],2)],1)},__vue_staticRenderFns__$6=[];__vue_render__$6._withStripped=!0;const __vue_inject_styles__$6=function(e){e&&e("data-v-8668106c_0",{source:"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",map:{version:3,sources:[],names:[],mappings:"",file:"RecordPreview.vue"},media:void 0})},__vue_scope_id__$6=void 0,__vue_module_identifier__$6=void 0,__vue_is_functional_template__$6=!1;var RecordPreview=normalizeComponent_1({render:__vue_render__$6,staticRenderFns:__vue_staticRenderFns__$6},__vue_inject_styles__$6,__vue_script__$6,void 0,!1,void 0,browser,void 0);const{mapGetters:mapGetters$5,mapActions:mapActions$3}=createNamespacedHelpers("KnowledgeBase");var script$7={name:"KnowledgeBase",components:{Icon:Icon,IconInfo:IconInfo,Carousel:Carousel,RecordsList:RecordsList,RecordPreview:RecordPreview},data:()=>({defaultTreeIcon:"mdi-subdirectory-arrow-right",miniState:!1,left:!0,filter:"",categorySearch:!1,searchData:!1}),computed:{...mapGetters$5(["tree","record","iconSize","moduleName"]),searchDataArray(){return this.searchData?this.searchData:[]},inputFocus:{set:e=>!1,get(){return this.filter.length>0}}},methods:{search(){this.filter.length>=3?this.debouncedSearch():this.searchData=!1},clearSearch(){this.filter="",this.searchData=!1},fetchParentCategoryData(){let e="";const t=this.tree.categories[this.tree.activeCategory].parentTree;1!==t.length&&(e=t[t.length-2]),this.fetchData(e)},openQuickCreateModal(){(new window.Vtiger_Header_Js).quickCreateModule(this.moduleName)},...mapActions$3(["fetchCategories","fetchData","fetchRecord","initState"])},async created(){await this.initState(this.$options.state),await this.fetchCategories(),await this.fetchData()},mounted(){this.debouncedSearch=Quasar.utils.debounce(()=>{if(this.filter.length<3)return;const e=$.Deferred(),t=$.progressIndicator({blockInfo:{enabled:!0}});AppConnector.request({module:this.moduleName,action:"KnowledgeBaseAjax",mode:"search",value:this.filter,category:this.categorySearch?this.tree.activeCategory:""}).done(r=>{let n=r.result;return n&&(n=Object.keys(n).map(function(e){return{...n[e],id:e}})),this.searchData=n,e.resolve(n),t.progressIndicator({mode:"hide"}),n})},1e3)}};const __vue_script__$7=script$7;var __vue_render__$7=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"KnowledgeBase h-100"},[r("q-layout",{staticClass:"absolute",attrs:{view:"hHh Lpr fFf",container:""}},[r("q-header",{staticClass:"bg-white text-primary",attrs:{elevated:""}},[r("q-toolbar",{staticClass:"q-py-xs flex-wrap flex-md-nowrap"},[r("div",{directives:[{name:"show",rawName:"v-show",value:!e.searchData,expression:"!searchData"}],staticClass:"flex items-center no-wrap q-mr-auto q-mr-sm-sm"},[r("q-btn",{attrs:{dense:"",round:"",push:"",icon:"mdi-menu"},on:{click:function(t){e.$q.platform.is.desktop?e.miniState=!e.miniState:e.left=!e.left}}},[r("q-tooltip",[e._v(e._s(e.translate("JS_TOGGLE_CATEGORY_MENU")))])],1),e._v(" "),r("q-breadcrumbs",{staticClass:"ml-2",scopedSlots:e._u([{key:"separator",fn:function(){return[r("q-icon",{attrs:{size:"1.5em",name:"mdi-chevron-right"}})]},proxy:!0}])},[e._v(" "),r("q-breadcrumbs-el",{class:[""===e.tree.activeCategory?"text-black":"cursor-pointer"],attrs:{icon:e.tree.topCategory.icon,label:e.translate(e.tree.topCategory.label)},on:{click:function(t){""!==e.tree.activeCategory&&e.fetchData()}}}),e._v(" "),""!==e.tree.activeCategory?e._l(e.tree.categories[e.tree.activeCategory].parentTree,function(t,n){return r("q-breadcrumbs-el",{key:n,class:[n===e.tree.categories[e.tree.activeCategory].parentTree.length-1?"text-black":"cursor-pointer"],on:{click:function(r){n!==e.tree.categories[e.tree.activeCategory].parentTree.length-1&&e.fetchData(t)}}},[e.tree.categories[t].icon?r("icon",{staticClass:"q-mr-sm",attrs:{size:e.iconSize,icon:e.tree.categories[t].icon}}):e._e(),e._v("\n                "+e._s(e.tree.categories[t].label)+"\n              ")],1)}):e._e()],2)],1),e._v(" "),r("div",{staticClass:"mx-auto tree-search flex no-wrap order-sm-none order-xs-last q-pt-sm-none q-pt-xs-xs"},[r("q-input",{staticClass:"full-width",attrs:{placeholder:e.translate("JS_SEARCH_PLACEHOLDER"),rounded:"",outlined:"",type:"search"},on:{input:e.search},scopedSlots:e._u([{key:"prepend",fn:function(){return[r("q-icon",{attrs:{name:"mdi-magnify"}}),e._v(" "),r("q-tooltip",{attrs:{anchor:"top middle",self:"center middle"},model:{value:e.inputFocus,callback:function(t){e.inputFocus=t},expression:"inputFocus"}},[e._v(e._s(e.translate("JS_INPUT_TOO_SHORT").replace("_LENGTH_","3")))])]},proxy:!0},{key:"append",fn:function(){return[""!==e.filter?r("q-icon",{staticClass:"cursor-pointer",attrs:{name:"mdi-close"},on:{click:function(t){return t.stopPropagation(),e.clearSearch()}}}):e._e(),e._v(" "),r("div",{staticClass:"flex items-center q-ml-sm"},[r("icon-info",{attrs:{customOptions:{iconSize:"21px"}}},[r("div",{staticStyle:{"white-space":"pre-line"},domProps:{innerHTML:e._s(e.translate("JS_FULL_TEXT_SEARCH_INFO"))}})])],1),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:""!==e.tree.activeCategory,expression:"tree.activeCategory !== ''"}],staticClass:"flex"},[r("q-toggle",{attrs:{icon:"mdi-file-tree"},model:{value:e.categorySearch,callback:function(t){e.categorySearch=t},expression:"categorySearch"}}),e._v(" "),r("q-tooltip",[e._v(e._s(e.translate("JS_SEARCH_CURRENT_CATEGORY")))])],1)]},proxy:!0}]),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})],1),e._v(" "),r("div",{staticClass:"q-ml-auto q-ml-sm-sm"},[r("q-btn",{attrs:{round:"",dense:"",color:"white","text-color":"primary",icon:"mdi-plus"},on:{click:function(t){return e.openQuickCreateModal()}}},[r("q-tooltip",[e._v(e._s(e.translate("JS_QUICK_CREATE")))])],1)],1)])],1),e._v(" "),r("q-drawer",{directives:[{name:"show",rawName:"v-show",value:!e.searchData,expression:"!searchData"}],attrs:{side:"left",elevated:"",mini:!!e.$q.platform.is.desktop&&e.miniState,width:e.searchData?0:250,breakpoint:700,"content-class":"bg-white text-black"},model:{value:e.left,callback:function(t){e.left=t},expression:"left"}},[r("q-scroll-area",{staticClass:"fit"},[r("q-list",[r("q-item",{directives:[{name:"show",rawName:"v-show",value:""===e.tree.activeCategory,expression:"tree.activeCategory === ''"}],attrs:{active:""}},[r("q-item-section",{attrs:{avatar:""}},[r("q-icon",{attrs:{name:e.tree.topCategory.icon,size:e.iconSize}})],1),e._v(" "),r("q-item-section",[e._v(e._s(e.translate(e.tree.topCategory.label)))])],1),e._v(" "),""!==e.tree.activeCategory?r("q-item",{attrs:{clickable:"",active:""},on:{click:function(t){return e.fetchParentCategoryData()}}},[r("q-item-section",{attrs:{avatar:""}},[r("icon",{attrs:{size:e.iconSize,icon:e.tree.categories[e.tree.activeCategory].icon||e.defaultTreeIcon}})],1),e._v(" "),r("q-item-section",[e._v(e._s(e.tree.categories[e.tree.activeCategory].label))]),e._v(" "),r("q-item-section",{attrs:{avatar:""}},[r("q-icon",{attrs:{name:"mdi-chevron-left"}})],1)],1):e._e(),e._v(" "),e._l(e.tree.data.categories,function(t,n){return r("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:n,attrs:{clickable:""},on:{click:function(r){return e.fetchData(t)}}},[r("q-item-section",{attrs:{avatar:""}},[r("icon",{attrs:{size:e.iconSize,icon:e.tree.categories[t].icon||e.defaultTreeIcon}})],1),e._v(" "),r("q-item-section",[e._v(e._s(e.tree.categories[t].label))]),e._v(" "),r("q-item-section",{attrs:{avatar:""}},[r("q-icon",{attrs:{name:"mdi-chevron-right"}})],1)],1)})],2)],1)],1),e._v(" "),r("q-page-container",[r("q-page",{staticClass:"q-pa-sm"},[r("div",{directives:[{name:"show",rawName:"v-show",value:!e.searchData,expression:"!searchData"}]},[r("div",{directives:[{name:"show",rawName:"v-show",value:void 0===e.tree.data.featured.length,expression:"typeof tree.data.featured.length === 'undefined'"}],staticClass:"q-pa-sm featured-container items-start q-gutter-md"},[e._l(e.tree.data.categories,function(t,n){return[e.tree.data.featured[t]?r("q-list",{key:n,attrs:{bordered:"",padding:"",dense:""}},[r("q-item",{staticClass:"text-black flex",attrs:{header:"",clickable:""},on:{click:function(r){return e.fetchData(t)}}},[r("icon",{staticClass:"mr-2",attrs:{icon:e.tree.categories[t].icon,size:e.iconSize}}),e._v("\n                  "+e._s(e.tree.categories[t].label)+"\n                ")],1),e._v(" "),e._l(e.tree.data.featured[t],function(t){return r("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:t.id,staticClass:"text-subtitle2",attrs:{clickable:""},on:{click:function(r){return r.preventDefault(),e.fetchRecord(t.id)}}},[r("q-item-section",{staticClass:"align-items-center flex-row no-wrap justify-content-start"},[r("q-icon",{staticClass:"mr-2",attrs:{name:"mdi-star",size:e.iconSize}}),e._v(" "),r("a",{staticClass:"js-popover-tooltip--record ellipsis",attrs:{href:"index.php?module="+e.moduleName+"&view=Detail&record="+t.id}},[e._v(e._s(t.subject))])],1)],1)})],2):e._e()]})],2),e._v(" "),r("records-list",{directives:[{name:"show",rawName:"v-show",value:""!==e.tree.activeCategory,expression:"tree.activeCategory !== ''"}],attrs:{data:e.tree.data.records,title:e.translate("JS_ARTICLES")}})],1),e._v(" "),r("records-list",{directives:[{name:"show",rawName:"v-show",value:e.searchData,expression:"searchData"}],attrs:{data:e.searchDataArray,title:e.translate("JS_ARTICLES")}})],1)],1)],1),e._v(" "),r("record-preview",{attrs:{isDragResize:!0}})],1)},__vue_staticRenderFns__$7=[];__vue_render__$7._withStripped=!0;const __vue_inject_styles__$7=function(e){e&&e("data-v-4d4f4598_0",{source:"\n.tree-search {\r\n  min-width: 320px;\r\n  width: 50%;\n}\n.tree-search .q-field__control,\r\n.tree-search .q-field__marginal {\r\n  height: 40px;\n}\n.featured-container {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));\r\n  grid-auto-flow: dense;\n}\r\n",map:{version:3,sources:["C:\\www\\YetiForceCRM\\public_html\\src\\layouts\\resources\\views\\KnowledgeBase\\KnowledgeBase.vue"],names:[],mappings:";AA4UA;EACA,gBAAA;EACA,UAAA;AACA;AACA;;EAEA,YAAA;AACA;AACA;EACA,aAAA;EACA,4DAAA;EACA,qBAAA;AACA",file:"KnowledgeBase.vue",sourcesContent:['\x3c!--\r\n/**\r\n * KnowledgeBase component\r\n *\r\n * @description Knowledge base view root component\r\n * @license YetiForce Public License 3.0\r\n * @author Tomasz Poradzewski <t.poradzewski@yetiforce.com>\r\n */\r\n--\x3e\r\n<template>\r\n  <div class="KnowledgeBase h-100">\r\n    <q-layout view="hHh Lpr fFf" container class="absolute">\r\n      <q-header elevated class="bg-white text-primary">\r\n        <q-toolbar class="q-py-xs flex-wrap flex-md-nowrap">\r\n          <div v-show="!searchData" class="flex items-center no-wrap q-mr-auto q-mr-sm-sm">\r\n            <q-btn\r\n              dense\r\n              round\r\n              push\r\n              icon="mdi-menu"\r\n              @click="$q.platform.is.desktop ? (miniState = !miniState) : (left = !left)"\r\n            >\r\n              <q-tooltip>{{ translate(\'JS_TOGGLE_CATEGORY_MENU\') }}</q-tooltip>\r\n            </q-btn>\r\n            <q-breadcrumbs class="ml-2">\r\n              <template v-slot:separator>\r\n                <q-icon size="1.5em" name="mdi-chevron-right"/>\r\n              </template>\r\n              <q-breadcrumbs-el\r\n                :icon="tree.topCategory.icon"\r\n                :label="translate(tree.topCategory.label)"\r\n                @click="tree.activeCategory === \'\' ? \'\' : fetchData()"\r\n                :class="[tree.activeCategory === \'\' ? \'text-black\' : \'cursor-pointer\']"\r\n              />\r\n              <template v-if="tree.activeCategory !== \'\'">\r\n                <q-breadcrumbs-el\r\n                  v-for="(category, index) in tree.categories[tree.activeCategory].parentTree"\r\n                  :key="index"\r\n                  :class="[\r\n                    index === tree.categories[tree.activeCategory].parentTree.length - 1\r\n                      ? \'text-black\'\r\n                      : \'cursor-pointer\'\r\n                  ]"\r\n                  @click="\r\n                    index === tree.categories[tree.activeCategory].parentTree.length - 1 ? \'\' : fetchData(category)\r\n                  "\r\n                >\r\n                  <icon\r\n                    v-if="tree.categories[category].icon"\r\n                    :size="iconSize"\r\n                    :icon="tree.categories[category].icon"\r\n                    class="q-mr-sm"\r\n                  ></icon>\r\n                  {{ tree.categories[category].label }}\r\n                </q-breadcrumbs-el>\r\n              </template>\r\n            </q-breadcrumbs>\r\n          </div>\r\n          <div\r\n            class="mx-auto tree-search flex no-wrap order-sm-none order-xs-last q-pt-sm-none q-pt-xs-xs"\r\n          >\r\n            <q-input\r\n              class="full-width"\r\n              v-model="filter"\r\n              :placeholder="translate(\'JS_SEARCH_PLACEHOLDER\')"\r\n              rounded\r\n              outlined\r\n              type="search"\r\n              @input="search"\r\n            >\r\n              <template v-slot:prepend>\r\n                <q-icon name="mdi-magnify"/>\r\n                <q-tooltip\r\n                  v-model="inputFocus"\r\n                  anchor="top middle"\r\n                  self="center middle"\r\n                >{{ translate(\'JS_INPUT_TOO_SHORT\').replace(\'_LENGTH_\', \'3\') }}</q-tooltip>\r\n              </template>\r\n              <template v-slot:append>\r\n                <q-icon\r\n                  v-if="filter !== \'\'"\r\n                  name="mdi-close"\r\n                  @click.stop="clearSearch()"\r\n                  class="cursor-pointer"\r\n                />\r\n                <div class="flex items-center q-ml-sm">\r\n                  <icon-info :customOptions="{ iconSize: \'21px\' }">\r\n                    <div\r\n                      style="white-space: pre-line;"\r\n                      v-html="translate(\'JS_FULL_TEXT_SEARCH_INFO\')"\r\n                    ></div>\r\n                  </icon-info>\r\n                </div>\r\n                <div v-show="tree.activeCategory !== \'\'" class="flex">\r\n                  <q-toggle v-model="categorySearch" icon="mdi-file-tree"/>\r\n                  <q-tooltip>{{ translate(\'JS_SEARCH_CURRENT_CATEGORY\') }}</q-tooltip>\r\n                </div>\r\n              </template>\r\n            </q-input>\r\n          </div>\r\n          <div class="q-ml-auto q-ml-sm-sm">\r\n            <q-btn\r\n              round\r\n              dense\r\n              color="white"\r\n              text-color="primary"\r\n              icon="mdi-plus"\r\n              @click="openQuickCreateModal()"\r\n            >\r\n              <q-tooltip>{{ translate(\'JS_QUICK_CREATE\') }}</q-tooltip>\r\n            </q-btn>\r\n          </div>\r\n        </q-toolbar>\r\n      </q-header>\r\n      <q-drawer\r\n        v-show="!searchData"\r\n        v-model="left"\r\n        side="left"\r\n        elevated\r\n        :mini="$q.platform.is.desktop ? miniState : false"\r\n        :width="searchData ? 0 : 250"\r\n        :breakpoint="700"\r\n        content-class="bg-white text-black"\r\n      >\r\n        <q-scroll-area class="fit">\r\n          <q-list>\r\n            <q-item v-show="tree.activeCategory === \'\'" active>\r\n              <q-item-section avatar>\r\n                <q-icon :name="tree.topCategory.icon" :size="iconSize"/>\r\n              </q-item-section>\r\n              <q-item-section>{{ translate(tree.topCategory.label) }}</q-item-section>\r\n            </q-item>\r\n            <q-item\r\n              v-if="tree.activeCategory !== \'\'"\r\n              clickable\r\n              active\r\n              @click="fetchParentCategoryData()"\r\n            >\r\n              <q-item-section avatar>\r\n                <icon\r\n                  :size="iconSize"\r\n                  :icon="tree.categories[tree.activeCategory].icon || defaultTreeIcon"\r\n                />\r\n              </q-item-section>\r\n              <q-item-section>{{ tree.categories[tree.activeCategory].label }}</q-item-section>\r\n              <q-item-section avatar>\r\n                <q-icon name="mdi-chevron-left"/>\r\n              </q-item-section>\r\n            </q-item>\r\n            <q-item\r\n              v-for="(categoryValue, categoryKey) in tree.data.categories"\r\n              :key="categoryKey"\r\n              clickable\r\n              v-ripple\r\n              @click="fetchData(categoryValue)"\r\n            >\r\n              <q-item-section avatar>\r\n                <icon\r\n                  :size="iconSize"\r\n                  :icon="tree.categories[categoryValue].icon || defaultTreeIcon"\r\n                />\r\n              </q-item-section>\r\n              <q-item-section>{{ tree.categories[categoryValue].label }}</q-item-section>\r\n              <q-item-section avatar>\r\n                <q-icon name="mdi-chevron-right"/>\r\n              </q-item-section>\r\n            </q-item>\r\n          </q-list>\r\n        </q-scroll-area>\r\n      </q-drawer>\r\n      <q-page-container>\r\n        <q-page class="q-pa-sm">\r\n          <div v-show="!searchData">\r\n            <div\r\n              v-show="typeof tree.data.featured.length === \'undefined\'"\r\n              class="q-pa-sm featured-container items-start q-gutter-md"\r\n            >\r\n              <template v-for="(categoryValue, categoryKey) in tree.data.categories">\r\n                <q-list\r\n                  bordered\r\n                  padding\r\n                  dense\r\n                  v-if="tree.data.featured[categoryValue]"\r\n                  :key="categoryKey"\r\n                >\r\n                  <q-item\r\n                    header\r\n                    clickable\r\n                    class="text-black flex"\r\n                    @click="fetchData(categoryValue)"\r\n                  >\r\n                    <icon :icon="tree.categories[categoryValue].icon" :size="iconSize" class="mr-2"></icon>\r\n                    {{ tree.categories[categoryValue].label }}\r\n                  </q-item>\r\n                  <q-item\r\n                    clickable\r\n                    v-for="featuredValue in tree.data.featured[categoryValue]"\r\n                    :key="featuredValue.id"\r\n                    class="text-subtitle2"\r\n                    v-ripple\r\n                    @click.prevent="fetchRecord(featuredValue.id)"\r\n                  >\r\n                    <q-item-section\r\n                      class="align-items-center flex-row no-wrap justify-content-start"\r\n                    >\r\n                      <q-icon name="mdi-star" :size="iconSize" class="mr-2"></q-icon>\r\n                      <a\r\n                        class="js-popover-tooltip--record ellipsis"\r\n                        :href="`index.php?module=${moduleName}&view=Detail&record=${featuredValue.id}`"\r\n                      >{{ featuredValue.subject }}</a>\r\n                    </q-item-section>\r\n                  </q-item>\r\n                </q-list>\r\n              </template>\r\n            </div>\r\n            <records-list\r\n              v-show="tree.activeCategory !== \'\'"\r\n              :data="tree.data.records"\r\n              :title="translate(\'JS_ARTICLES\')"\r\n            />\r\n          </div>\r\n          <records-list\r\n            v-show="searchData"\r\n            :data="searchDataArray"\r\n            :title="translate(\'JS_ARTICLES\')"\r\n          />\r\n        </q-page>\r\n      </q-page-container>\r\n    </q-layout>\r\n    <record-preview :isDragResize="true"/>\r\n  </div>\r\n</template>\r\n<script>\r\nimport Icon from \'../../../../components/Icon.vue\'\r\nimport IconInfo from \'../../../../components/IconInfo.vue\'\r\nimport Carousel from \'./components/Carousel.vue\'\r\nimport RecordsList from \'./components/RecordsList.vue\'\r\nimport RecordPreview from \'./components/RecordPreview.vue\'\r\nimport { createNamespacedHelpers } from \'vuex\'\r\n\r\nconst { mapGetters, mapActions } = createNamespacedHelpers(\'KnowledgeBase\')\r\nexport default {\r\n  name: \'KnowledgeBase\',\r\n  components: { Icon, IconInfo, Carousel, RecordsList, RecordPreview },\r\n  data() {\r\n    return {\r\n      defaultTreeIcon: \'mdi-subdirectory-arrow-right\',\r\n      miniState: false,\r\n      left: true,\r\n      filter: \'\',\r\n      categorySearch: false,\r\n      searchData: false\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters([\'tree\', \'record\', \'iconSize\', \'moduleName\']),\r\n    searchDataArray() {\r\n      return this.searchData ? this.searchData : []\r\n    },\r\n    inputFocus: {\r\n      set(val) {\r\n        return false\r\n      },\r\n      get() {\r\n        return this.filter.length > 0\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    search() {\r\n      if (this.filter.length >= 3) {\r\n        this.debouncedSearch()\r\n      } else {\r\n        this.searchData = false\r\n      }\r\n    },\r\n    clearSearch() {\r\n      this.filter = \'\'\r\n      this.searchData = false\r\n    },\r\n    fetchParentCategoryData() {\r\n      let parentCategory = \'\'\r\n      const parentTreeArray = this.tree.categories[this.tree.activeCategory].parentTree\r\n      if (parentTreeArray.length !== 1) {\r\n        parentCategory = parentTreeArray[parentTreeArray.length - 2]\r\n      }\r\n      this.fetchData(parentCategory)\r\n    },\r\n    openQuickCreateModal() {\r\n      const headerInstance = new window.Vtiger_Header_Js()\r\n      headerInstance.quickCreateModule(this.moduleName)\r\n    },\r\n    ...mapActions([\'fetchCategories\', \'fetchData\', \'fetchRecord\', \'initState\'])\r\n  },\r\n  async created() {\r\n    await this.initState(this.$options.state)\r\n    await this.fetchCategories()\r\n    await this.fetchData()\r\n  },\r\n  mounted() {\r\n    const debounceDelay = 1000\r\n    this.debouncedSearch = Quasar.utils.debounce(() => {\r\n      if (this.filter.length < 3) {\r\n        return\r\n      }\r\n      const aDeferred = $.Deferred()\r\n      const progressIndicatorElement = $.progressIndicator({\r\n        blockInfo: { enabled: true }\r\n      })\r\n      AppConnector.request({\r\n        module: this.moduleName,\r\n        action: \'KnowledgeBaseAjax\',\r\n        mode: \'search\',\r\n        value: this.filter,\r\n        category: this.categorySearch ? this.tree.activeCategory : \'\'\r\n      }).done(data => {\r\n        let listData = data.result\r\n        if (listData) {\r\n          listData = Object.keys(listData).map(function(key) {\r\n            return { ...listData[key], id: key }\r\n          })\r\n        }\r\n        this.searchData = listData\r\n        aDeferred.resolve(listData)\r\n        progressIndicatorElement.progressIndicator({ mode: \'hide\' })\r\n        return listData\r\n      })\r\n    }, debounceDelay)\r\n  }\r\n}\r\n<\/script>\r\n<style>\r\n.tree-search {\r\n  min-width: 320px;\r\n  width: 50%;\r\n}\r\n.tree-search .q-field__control,\r\n.tree-search .q-field__marginal {\r\n  height: 40px;\r\n}\r\n.featured-container {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));\r\n  grid-auto-flow: dense;\r\n}\r\n</style>\r\n']},media:void 0})},__vue_scope_id__$7=void 0,__vue_module_identifier__$7=void 0,__vue_is_functional_template__$7=!1;var KnowledgeBaseComponent=normalizeComponent_1({render:__vue_render__$7,staticRenderFns:__vue_staticRenderFns__$7},__vue_inject_styles__$7,__vue_script__$7,void 0,!1,void 0,browser,void 0);const{mapGetters:mapGetters$6,mapActions:mapActions$4}=createNamespacedHelpers("KnowledgeBase");var script$8={name:"RecordPreviewModal",components:{RecordPreview:RecordPreview},methods:{hideModal(){app.hideModalWindow(),this.$destroy()},...mapActions$4(["fetchCategories","fetchRecord","initState"])},async created(){await this.initState(this.$options.state),await this.fetchCategories(),await this.fetchRecord(this.$options.state.recordId),document.addEventListener("keyup",e=>{27===e.keyCode&&this.hideModal()})}};const __vue_script__$8=script$8;var __vue_render__$8=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("record-preview",{attrs:{isDragResize:!1}},[r("template",{slot:"header-right"},[r("q-btn",{attrs:{dense:"",flat:"",icon:"mdi-close"},on:{click:function(t){return e.hideModal()}}},[r("q-tooltip",[e._v(e._s(e.translate("JS_CLOSE")))])],1)],1)],2)},__vue_staticRenderFns__$8=[];__vue_render__$8._withStripped=!0;const __vue_inject_styles__$8=function(e){e&&e("data-v-6afbb53c_0",{source:"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",map:{version:3,sources:[],names:[],mappings:"",file:"RecordPreviewModal.vue"},media:void 0})},__vue_scope_id__$8=void 0,__vue_module_identifier__$8=void 0,__vue_is_functional_template__$8=!1;var RecordPreviewComponent=normalizeComponent_1({render:__vue_render__$8,staticRenderFns:__vue_staticRenderFns__$8},__vue_inject_styles__$8,__vue_script__$8,void 0,!1,void 0,browser,void 0);const state={record:!1,dialog:!1,maximized:!0,moduleName:"",iconSize:"18px",tree:{activeCategory:"",data:{records:[],featured:{}},topCategory:{icon:"mdi-file-tree",label:"JS_MAIN_CATEGORIES"},categories:{}},coordinates:{width:Quasar.plugins.Screen.width-100,height:Quasar.plugins.Screen.height-100,top:0,left:Quasar.plugins.Screen.width-(Quasar.plugins.Screen.width-50)}},getters={moduleName:e=>e.moduleName,record:e=>e.record,dialog:e=>e.dialog,maximized:e=>e.maximized,coordinates:e=>e.coordinates,iconSize:e=>e.iconSize,tree:e=>e.tree},actions={fetchRecord({state:e,commit:t,getters:r},n){const i=$.Deferred(),o=$.progressIndicator({blockInfo:{enabled:!0}});return AppConnector.request({module:r.moduleName,action:"KnowledgeBaseAjax",mode:"detail",record:n}).done(e=>{let n=e.result;n.related.Articles&&(n.related.Articles=Object.keys(n.related.Articles).map(function(e){return{...n.related.Articles[e],id:e}})),r.dialog||t("setDialog",!0),t("setRecord",n),o.progressIndicator({mode:"hide"}),i.resolve(n)})},fetchCategories({state:e,commit:t,getters:r}){const n=$.Deferred();return AppConnector.request({module:r.moduleName,action:"KnowledgeBaseAjax",mode:"categories"}).done(e=>{t("setTreeCategories",e.result),n.resolve(e.result)})},fetchData({state:e,commit:t,getters:r},n=""){const i=$.Deferred();t("setActiveCategory",n);const o=$.progressIndicator({blockInfo:{enabled:!0}});return AppConnector.request({module:r.moduleName,action:"KnowledgeBaseAjax",mode:"list",category:n}).done(e=>{let r=e.result;r.records&&(r.records=Object.keys(r.records).map(function(e){return{...r.records[e],id:e}})),t("setTreeData",r),o.progressIndicator({mode:"hide"}),i.resolve(r)})},initState({state:e,commit:t},r){t("setState",r)}},mutations={setState(e,t){e=Object.assign(e,t)},setRecord(e,t){e.record=t},setDialog(e,t){e.dialog=t},setMaximized(e,t){e.maximized=t},setCoordinates(e,t){e.coordinates=t},setTreeData(e,t){e.tree.data=t},setTreeCategories(e,t){e.tree.categories=t},setActiveCategory(e,t){e.tree.activeCategory=t}};var KnowledgeBase={namespaced:!0,state:state,getters:getters,actions:actions,mutations:mutations};Vue.use(index_esm);const debug=!1,vuexStore=new index_esm.Store({modules:{KnowledgeBase:KnowledgeBase},strict:!1});Vue.mixin({methods:{translate:e=>app.vtranslate(e)}}),window.KnowledgeBase={component:KnowledgeBaseComponent,mount:e=>(KnowledgeBaseComponent.state=e.state,new Vue({store:vuexStore,render:e=>e(KnowledgeBaseComponent)}).$mount(e.el))},window.RecordPreviewVueComponent={component:RecordPreviewComponent,mount:e=>(RecordPreviewComponent.state=e.state,new Vue({store:vuexStore,render:e=>e(RecordPreviewComponent)}).$mount(e.el))};
//# sourceMappingURL=KnowledgeBase.vue.js.map
