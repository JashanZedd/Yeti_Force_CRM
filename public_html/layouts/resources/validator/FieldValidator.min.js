"use strict";Vtiger_Base_Validator_Js("Vtiger_Email_Validator_Js",{invokeValidation:function(field,rules,i,options){var emailInstance=new Vtiger_Email_Validator_Js;if(emailInstance.setElement(field),1!=emailInstance.validate())return emailInstance.getError()}},{getFieldValue:function(){return this.getElement().val()},validate:function(){var fieldValue=this.getFieldValue();return this.validateValue(fieldValue)},validateValue:function(fieldValue){if(!/^[_/a-zA-Z0-9*]+([!"#$%&'()*+,./:;<=>?\^_`{|}~-]?[a-zA-Z0-9/_/-])*@[a-zA-Z0-9]+([\_\-\.]?[a-zA-Z0-9]+)*\.([\-\_]?[a-zA-Z0-9])+(\.?[a-zA-Z0-9]+)?$/.test(fieldValue))return this.setError(app.vtranslate("JS_PLEASE_ENTER_VALID_EMAIL_ADDRESS")),!1;if(fieldValue.match(/[\(\)\<\>\,\;\:\\\"\[\]]/))return this.setError(app.vtranslate("JS_CONTAINS_ILLEGAL_CHARACTERS")),!1;var fieldInfo=this.getElement().data().fieldinfo;return!fieldInfo||!fieldInfo.restrictedDomains||-1===fieldInfo.restrictedDomains.indexOf(fieldValue.split("@").pop())||(this.setError(app.vtranslate("JS_EMAIL_RESTRICTED_DOMAINS")),!1)}}),Vtiger_Base_Validator_Js("Vtiger_Phone_Validator_Js",{},{validate:function(){var fieldValue=this.getFieldValue();return this.validateValue(fieldValue)},validateValue:function(fieldValue){if(""==fieldValue)return!0;var field=this.getElement(),form=field.closest("form"),fieldData=field.data(),result=!0;if(1==fieldData.advancedVerification){var thisInstance=this,fieldInfo=fieldData.fieldinfo,phoneCountryList=field.closest(".input-group").find(".phoneCountryList");field.attr("readonly",!0);var moduleName=form.find('[name="module"]').length?form.find('[name="module"]').val():app.getModuleName();"LayoutEditor"===moduleName&&(moduleName=$("#selectedModuleName").val()),AppConnector.request({async:!1,data:{module:moduleName,action:"Fields",mode:"verifyPhoneNumber",fieldName:fieldInfo.name,phoneNumber:fieldValue,phoneCountry:phoneCountryList.val()}}).done((function(data){0==data.result.isValidNumber?(thisInstance.setError(data.result.message),result=!1):(field.val(data.result.number),field.attr("title",data.result.geocoding+" "+data.result.carrier),phoneCountryList.val()!=data.result.country&&phoneCountryList.val(data.result.country).trigger("change")),field.attr("readonly",!1)}))}return result}}),Vtiger_Base_Validator_Js("Vtiger_UserName_Validator_Js",{invokeValidation:function(field,rules,i,options){var usernameInstance=new Vtiger_UserName_Validator_Js;if(usernameInstance.setElement(field),1!=usernameInstance.validate())return usernameInstance.getError()}},{validate:function(){var fieldValue=this.getFieldValue(),fieldData=this.getElement().data(),ranges=(void 0!==fieldData.fieldinfo?fieldData.fieldinfo.maximumlength:"3,64").split(",");if(fieldValue.length<parseInt(ranges[0]))return this.setError(app.vtranslate("JS_ENTERED_VALUE_IS_TOO_SHORT")),!1;if(fieldValue.length>parseInt(ranges[1]))return this.setError(app.vtranslate("JS_ENTERED_VALUE_IS_TOO_LONG")),!1;return!!/^[a-zA-Z0-9_.@-]+$/.test(fieldValue)||(this.setError(app.vtranslate("JS_CONTAINS_ILLEGAL_CHARACTERS")),!1)}}),Vtiger_Base_Validator_Js("Vtiger_Integer_Validator_Js",{invokeValidation:function(field,rules,i,options){var integerInstance=new Vtiger_Integer_Validator_Js;if(integerInstance.setElement(field),1!=integerInstance.validate())return integerInstance.getError()}},{validate:function(){var fieldValue=this.getFieldValue(),groupSeperator=CONFIG.currencyGroupingSeparator,integerRegex=new RegExp("(^[-+]?[\\d\\"+groupSeperator+"]+)$","g");if(!fieldValue.match(integerRegex)){var errorInfo=app.vtranslate("JS_PLEASE_ENTER_INTEGER_VALUE");return this.setError(errorInfo),!1}var fieldInfo=this.getElement().data().fieldinfo;if(!fieldInfo||!fieldInfo.maximumlength)return!0;var ranges=fieldInfo.maximumlength.split(",");if(2===ranges.length){if(fieldValue>parseFloat(ranges[1])||fieldValue<parseFloat(ranges[0]))return errorInfo=app.vtranslate("JS_ERROR_MAX_VALUE"),this.setError(errorInfo),!1}else if(fieldValue>parseFloat(ranges[0])||fieldValue<0)return errorInfo=app.vtranslate("JS_ERROR_MAX_VALUE"),this.setError(errorInfo),!1;return!0}}),Vtiger_Base_Validator_Js("Vtiger_Double_Validator_Js",{invokeValidation:function(field,rules,i,options){var doubleValidator=new Vtiger_Double_Validator_Js;if(doubleValidator.setElement(field),1!=doubleValidator.validate())return doubleValidator.getError()}},{validate:function(){var response=this._super();if(!0===response){var fieldValue=this.getFieldValue();if(!fieldValue.toString().match(/(^[-+]?\d+)(\.\d+)?$/)){var errorInfo=app.vtranslate("JS_PLEASE_ENTER_DECIMAL_VALUE");return this.setError(errorInfo),!1}var fieldInfo=this.getElement().data().fieldinfo;if(!fieldInfo||!fieldInfo.maximumlength)return!0;var maximumLength=fieldInfo.maximumlength;return!((fieldValue=parseFloat(fieldValue))>parseFloat(maximumLength)||fieldValue<-parseFloat(maximumLength))||(errorInfo=app.vtranslate("JS_ERROR_MAX_VALUE"),this.setError(errorInfo),!1)}return response},getFieldValue:function(){return App.Fields.Double.formatToDb(this.getElement().val())}}),Vtiger_Base_Validator_Js("Vtiger_PositiveNumber_Validator_Js",{invokeValidation:function(field,rules,i,options){var positiveNumberInstance=new Vtiger_PositiveNumber_Validator_Js;if(positiveNumberInstance.setElement(field),1!=positiveNumberInstance.validate())return positiveNumberInstance.getError()}},{validate:function(){var response=this._super();if(!0!==response)return response;var fieldValue=this.getFieldValue(),parseFieldValue=App.Fields.Double.formatToDb(this.getFieldValue());if(isNaN(parseFieldValue)||fieldValue<0||fieldValue.match(/(^[-]+\d+)$/)){var errorInfo=app.vtranslate("JS_ACCEPT_POSITIVE_NUMBER");return this.setError(errorInfo),!1}var maximumLength=null;if(!(maximumLength=this.getElement().data().fieldinfo?this.getElement().data().fieldinfo.maximumlength:this.getElement().data("maximumlength")))return!0;var ranges=maximumLength.split(",");if(2===ranges.length){if(fieldValue>parseFloat(ranges[1])||fieldValue<parseFloat(ranges[0]))return errorInfo=app.vtranslate("JS_ERROR_MAX_VALUE"),this.setError(errorInfo),!1}else if(fieldValue>parseFloat(ranges[0])||fieldValue<0)return errorInfo=app.vtranslate("JS_ERROR_MAX_VALUE"),this.setError(errorInfo),!1;return!0}}),Vtiger_PositiveNumber_Validator_Js("Vtiger_Percentage_Validator_Js",{invokeValidation:function(field,rules,i,options){var percentageInstance=new Vtiger_Percentage_Validator_Js;if(percentageInstance.setElement(field),1!=percentageInstance.validate())return percentageInstance.getError()}},{validate:function(){var response=this._super();return 1!=response?response:!(App.Fields.Double.formatToDb(this.getFieldValue())>100)||(this.setError(app.vtranslate("JS_PERCENTAGE_VALUE_SHOULD_BE_LESS_THAN_100")),!1)}}),Vtiger_Base_Validator_Js("Vtiger_Url_Validator_Js",{invokeValidation:function(field,rules,i,options){var validatorInstance=new Vtiger_Url_Validator_Js;validatorInstance.setElement(field);var result=validatorInstance.validate();return!0===result?result:validatorInstance.getError()}},{validate:function(){var fieldValue=this.getFieldValue(),result=/(^|\s)((https?:\/\/)?[\w-]+(\.[\w-]+)+\.?(:\d+)?(\/\S*)?)/gi.test(fieldValue);if(result||0!==fieldValue.indexOf("http://")&&0!==fieldValue.indexOf("https://")&&0!==fieldValue.indexOf("ftp://")&&0!==fieldValue.indexOf("ftps://")&&0!==fieldValue.indexOf("telnet://")&&0!==fieldValue.indexOf("smb://")&&0!==fieldValue.indexOf("www.")||(result=!0),!result){var errorInfo=app.vtranslate("JS_CONTAINS_ILLEGAL_CHARACTERS");return this.setError(errorInfo),!1}return!0}}),Vtiger_Base_Validator_Js("Vtiger_MultiSelect_Validator_Js",{invokeValidation:function(field,rules,i,options){var validatorInstance=new Vtiger_MultiSelect_Validator_Js;validatorInstance.setElement(field);var result=validatorInstance.validate();return 1==result?result:validatorInstance.getError()}},{validate:function(){if(null==this.getElement().val()){var errorInfo=app.vtranslate("JS_PLEASE_SELECT_ATLEAST_ONE_OPTION");return this.setError(errorInfo),!1}return!0}}),Vtiger_Email_Validator_Js("Vtiger_MultiEmails_Validator_Js",{invokeValidation:function(field){var validatorInstance=new Vtiger_MultiEmails_Validator_Js;if(validatorInstance.setElement(field),!validatorInstance.validate())return validatorInstance.getError()}},{validate:function(){var fieldInstanceValue=this.getElement().val();if(""!=fieldInstanceValue){var i,emailsArr=fieldInstanceValue.split(",");for(i=0;i<emailsArr.length;++i){var result=this.validateValue(emailsArr[i]);if(0==result)return result}return!0}}}),Vtiger_Base_Validator_Js("Vtiger_MultiDomain_Validator_Js",{invokeValidation:function(field,rules,i,options){var validatorInstance=new Vtiger_MultiDomain_Validator_Js;validatorInstance.setElement(field);var result=validatorInstance.validate();return!0===result?result:validatorInstance.getError()}},{validate:function(){var selectElementValue=this.getElement().val();if(Array.isArray(selectElementValue)){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=selectElementValue[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var value=_step.value;if(value&&!/(?:[0-9a-z\u017F\u212A](?:[\x2D0-9a-z\u017F\u212A]{0,61}[0-9a-z\u017F\u212A])?\.)+[0-9a-z\u017F\u212A][\x2D0-9a-z\u017F\u212A]{0,61}[0-9a-z\u017F\u212A]/i.test(value))return this.setError(app.vtranslate("JS_PLEASE_SELECT_VALID_DOMAIN_NAMES")),!1}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}return!0}}),Vtiger_Double_Validator_Js("Vtiger_GreaterThanZero_Validator_Js",{invokeValidation:function(field,rules,i,options){var GreaterThanZeroInstance=new Vtiger_GreaterThanZero_Validator_Js;if(GreaterThanZeroInstance.setElement(field),1!=GreaterThanZeroInstance.validate())return GreaterThanZeroInstance.getError()}},{validate:function(){var response=this._super();if(1!=response)return response;if(this.getFieldValue()<=0){var errorInfo=app.vtranslate("JS_VALUE_SHOULD_BE_GREATER_THAN_ZERO");return this.setError(errorInfo),!1}return!0}}),Vtiger_PositiveNumber_Validator_Js("Vtiger_WholeNumber_Validator_Js",{invokeValidation:function(field,rules,i,options){var instance=new Vtiger_WholeNumber_Validator_Js;if(instance.setElement(field),1!=instance.validate())return instance.getError()}},{validate:function(){var response=this._super();if(!0!==response)return response;var field=this.getElement(),fieldValue=this.getFieldValue(),fieldInfo=field.data().fieldinfo,errorInfo=void 0;return fieldValue%1==0||(errorInfo=jQuery.isEmptyObject(fieldInfo)?app.vtranslate("INVALID_NUMBER"):app.vtranslate("INVALID_NUMBER_OF")+" "+fieldInfo.label,this.setError(errorInfo),!1)}}),Vtiger_Base_Validator_Js("Vtiger_lessThanToday_Validator_Js",{},{validate:function(){var fieldData=this.getElement().data(),fieldDateFormat=fieldData.dateFormat,fieldInfo=fieldData.fieldinfo,fieldValue=this.getFieldValue();try{var fieldDateInstance=Vtiger_Helper_Js.getDateInstance(fieldValue,fieldDateFormat)}catch(err){return this.setError(err),!1}fieldDateInstance.setHours(0,0,0,0);var todayDateInstance=new Date;if(todayDateInstance.setHours(0,0,0,0),todayDateInstance-fieldDateInstance<=0){var errorInfo=fieldInfo.label+" "+app.vtranslate("JS_SHOULD_BE_LESS_THAN_CURRENT_DATE");return this.setError(errorInfo),!1}return!0}}),Vtiger_Base_Validator_Js("Vtiger_lessThanOrEqualToToday_Validator_Js",{},{validate:function(){var fieldData=this.getElement().data(),fieldDateFormat=fieldData.dateFormat,fieldInfo=fieldData.fieldinfo,fieldValue=this.getFieldValue();try{var fieldDateInstance=Vtiger_Helper_Js.getDateInstance(fieldValue,fieldDateFormat)}catch(err){return this.setError(err),!1}fieldDateInstance.setHours(0,0,0,0);var todayDateInstance=new Date;if(todayDateInstance.setHours(0,0,0,0),todayDateInstance-fieldDateInstance<0){var errorInfo=fieldInfo.label+" "+app.vtranslate("JS_SHOULD_BE_LESS_THAN_OR_EQUAL_TO")+" "+app.vtranslate("JS_CURRENT_DATE");return this.setError(errorInfo),!1}return!0}}),Vtiger_Base_Validator_Js("Vtiger_greaterThanOrEqualToToday_Validator_Js",{},{validate:function(){var fieldData=this.getElement().data(),fieldDateFormat=fieldData.dateFormat,fieldInfo=fieldData.fieldinfo,fieldValue=this.getFieldValue();try{var fieldDateInstance=Vtiger_Helper_Js.getDateInstance(fieldValue,fieldDateFormat)}catch(err){return this.setError(err),!1}fieldDateInstance.setHours(0,0,0,0);var todayDateInstance=new Date;if(todayDateInstance.setHours(0,0,0,0),todayDateInstance-fieldDateInstance>0){var errorInfo=fieldInfo.label+" "+app.vtranslate("JS_SHOULD_BE_GREATER_THAN_OR_EQUAL_TO")+" "+app.vtranslate("JS_CURRENT_DATE");return this.setError(errorInfo),!1}return!0}}),Vtiger_Base_Validator_Js("Vtiger_greaterThanDependentField_Validator_Js",{invokeValidation:function(field,rules,i,options){var fieldForValidation=field[0];if("followup_date_start"==jQuery(fieldForValidation).attr("name"))var dependentFieldList=new Array("date_start");var instance=new Vtiger_greaterThanDependentField_Validator_Js;if(instance.setElement(field),1!=instance.validate(dependentFieldList))return instance.getError()}},{validate:function(dependentFieldList){var fieldLabel,field=this.getElement(),fieldInfo=field.data("fieldinfo");fieldLabel=void 0===fieldInfo?jQuery(field).attr("name"):fieldInfo.label;for(var contextFormElem=field.closest("form"),i=0;i<dependentFieldList.length;i++){var dependentField=dependentFieldList[i],dependentFieldInContext=jQuery("input[name="+dependentField+"]",contextFormElem);if(dependentFieldInContext.length>0){var dependentFieldLabel=dependentFieldInContext.data("fieldinfo").label;if(this.getDateTimeInstance(field)-this.getDateTimeInstance(dependentFieldInContext)<0){var errorInfo=fieldLabel+" "+app.vtranslate("JS_SHOULD_BE_GREATER_THAN_OR_EQUAL_TO")+" "+dependentFieldLabel;return this.setError(errorInfo),!1}}}return!0},getDateTimeInstance:function(field){var dateFormat=field.data("dateFormat"),fieldValue=field.val();try{var dateTimeInstance=Vtiger_Helper_Js.getDateInstance(fieldValue,dateFormat)}catch(err){return this.setError(err),!1}return dateTimeInstance}}),Vtiger_Base_Validator_Js("Vtiger_dateAndTimeGreaterThanDependentField_Validator_Js",{},{fieldDateTime:"",fieldDateTimeInstance:[],dateFormat:"",validate:function(dependentFieldList){var fieldDateTime="",fieldDateTimeInstance=[],contextFormElem=this.getElement().closest("form");if("EditView"==contextFormElem.attr("name"))return!0;for(var j=0,i=0;i<dependentFieldList.length;i++){var dependentField=dependentFieldList[i],dependentFieldInContext=jQuery("input[name="+dependentField+"]",contextFormElem);if(dependentFieldInContext.length>0)if(void 0===dependentFieldInContext.data("dateFormat")&&fieldDateTime)fieldDateTime+=" "+dependentFieldInContext.val(),fieldDateTimeInstance[j]=Vtiger_Helper_Js.getDateInstance(fieldDateTime,dateFormat),j++;else if(void 0!==dependentFieldInContext.data("dateFormat")){var dateFormat=dependentFieldInContext.data("dateFormat");fieldDateTime=dependentFieldInContext.val()}}return this.difference(fieldDateTimeInstance)},difference:function(fieldDateTimeInstance){if(2==fieldDateTimeInstance.length&&fieldDateTimeInstance[1]-fieldDateTimeInstance[0]<0){var errorInfo=app.vtranslate("JS_AN_INCORRECT_RANGE_OF_DATES_WAS_ENTERED");return this.setError(errorInfo),!1}return!0}}),Vtiger_Base_Validator_Js("Vtiger_futureEventCannotBeHeld_Validator_Js",{},{validate:function(dependentFieldList){for(var field=this.getElement(),fieldLabel=field.data("fieldinfo").label,status=field.val(),contextFormElem=field.closest("form"),i=0;i<dependentFieldList.length;i++){var dependentField=dependentFieldList[i],dependentFieldInContext=jQuery("input[name="+dependentField+"]",contextFormElem);if(dependentFieldInContext.length>0){var dependentFieldLabel=dependentFieldInContext.data("fieldinfo").label,todayDateInstance=new Date,dateFormat=dependentFieldInContext.data("dateFormat"),time=jQuery("input[name=time_start]",contextFormElem),fieldValue=dependentFieldInContext.val()+" "+time.val();if(todayDateInstance-Vtiger_Helper_Js.getDateInstance(fieldValue,dateFormat)<0&&"Held"==status){var errorInfo=fieldLabel+" "+app.vtranslate("JS_FUTURE_EVENT_CANNOT_BE_HELD")+" "+dependentFieldLabel;return this.setError(errorInfo),!1}}}return!0}}),Vtiger_Base_Validator_Js("Vtiger_lessThanDependentField_Validator_Js",{},{validate:function(dependentFieldList){var field=this.getElement(),fieldLabel=field.data("fieldinfo").label,contextFormElem=field.closest("form");if(0!=field.val().length){for(var i=0;i<dependentFieldList.length;i++){var dependentField=dependentFieldList[i],dependentFieldInContext=jQuery("input[name="+dependentField+"]",contextFormElem);if(dependentFieldInContext.length>0){var dependentFieldLabel=dependentFieldInContext.data("fieldinfo").label,fieldDateInstance=this.getDateTimeInstance(field);if(0==dependentFieldInContext.val().length)continue;if(fieldDateInstance-this.getDateTimeInstance(dependentFieldInContext)>0){var errorInfo=fieldLabel+" "+app.vtranslate("JS_SHOULD_BE_LESS_THAN_OR_EQUAL_TO")+" "+dependentFieldLabel;return this.setError(errorInfo),!1}}}return!0}},getDateTimeInstance:function(field){var dateFormat=field.data("dateFormat"),fieldValue=field.val();try{var dateTimeInstance=Vtiger_Helper_Js.getDateInstance(fieldValue,dateFormat)}catch(err){return this.setError(err),!1}return dateTimeInstance}}),Vtiger_Base_Validator_Js("Vtiger_Currency_Validator_Js",{invokeValidation:function(field,rules,i,options){var currencyValidatorInstance=new Vtiger_Currency_Validator_Js;if(currencyValidatorInstance.setElement(field),1!=currencyValidatorInstance.validate())return currencyValidatorInstance.getError()}},{validate:function(){var response=this._super();if(1!=response)return response;var fieldData=this.getElement().data(),decimalSeparator=fieldData.decimalSeparator?fieldData.decimalSeparator:CONFIG.currencyDecimalSeparator,groupSeparator=fieldData.groupSeparator?fieldData.groupSeparator:CONFIG.currencyGroupingSeparator,strippedValue=this.getFieldValue().replace(decimalSeparator,""),spacePattern=/\s/;(spacePattern.test(decimalSeparator)||spacePattern.test(groupSeparator))&&(strippedValue=strippedValue.replace(/ /g,""));var errorInfo=void 0;"$"===groupSeparator&&(groupSeparator="\\$"),"."===groupSeparator&&(groupSeparator="\\.");var regex=new RegExp(groupSeparator,"g");if(strippedValue=strippedValue.replace(regex,""),isNaN(strippedValue))return errorInfo=app.vtranslate("JS_CONTAINS_ILLEGAL_CHARACTERS"),this.setError(errorInfo),!1;if(strippedValue<0)return errorInfo=app.vtranslate("JS_ACCEPT_POSITIVE_NUMBER"),this.setError(errorInfo),!1;var maximumLength=void 0!==fieldData.fieldinfo?fieldData.fieldinfo.maximumlength:null;return!(maximumLength&&strippedValue>parseFloat(maximumLength))||(errorInfo=app.vtranslate("JS_ERROR_MAX_VALUE"),this.setError(errorInfo),!1)}}),Vtiger_Currency_Validator_Js("Vtiger_NumberUserFormat_Validator_Js",{invokeValidation:function(field,rules,i,options){var instance=new Vtiger_Currency_Validator_Js;if(instance.setElement(field),!0!==instance.validate())return instance.getError()}}),Vtiger_Base_Validator_Js("Vtiger_ReferenceField_Validator_Js",{},{validate:function(){if(""==this.getElement().closest(".fieldValue").find(".sourceField").val()){var errorInfo=app.vtranslate("JS_REQUIRED_FIELD");return this.setError(errorInfo),!1}return!0}}),Vtiger_Base_Validator_Js("Vtiger_Date_Validator_Js",{invokeValidation:function(field,rules,i,options){var dateValidatorInstance=new Vtiger_Date_Validator_Js;dateValidatorInstance.setElement(field);var response=dateValidatorInstance.validate();return 1!=response?dateValidatorInstance.getError():response}},{validate:function(){var fieldData=this.getElement().data(),fieldDateFormat=fieldData.dateFormat,fieldValue=this.getFieldValue();try{if("range"===fieldData.calendarType){if(2!==(fieldValue=fieldValue.split(",")).length)throw new Error}else fieldValue=[fieldValue];fieldValue.forEach((function(key){Vtiger_Helper_Js.getDateInstance(key,fieldDateFormat)}))}catch(err){var errorInfo=app.vtranslate("JS_PLEASE_ENTER_VALID_DATE");return this.setError(errorInfo),!1}return!0}}),Vtiger_Date_Validator_Js("Vtiger_Datetime_Validator_Js",{},{}),Vtiger_Base_Validator_Js("Vtiger_Time_Validator_Js",{invokeValidation:function(field,rules,i,options){var validatorInstance=new Vtiger_Time_Validator_Js;validatorInstance.setElement(field);var result=validatorInstance.validate();return 1==result?result:validatorInstance.getError()}},{validate:function(){var format=CONFIG.hourFormat;this.field.data("format")&&-1!=[12,24].indexOf(this.field.data("format"))&&(format=this.field.data("format"));var regexp="";switch(format){case 12:regexp=new RegExp("^([0][0-9]|1[0-2]):([0-5][0-9])([ ]PM|[ ]AM|PM|AM)$");break;default:regexp=new RegExp("^(2[0-3]|[0][0-9]|1[0-9]):([0-5][0-9])$")}if(!regexp.test(this.getFieldValue())){var errorInfo=app.vtranslate("JS_PLEASE_ENTER_VALID_TIME");return this.setError(errorInfo),!1}return!0}}),Vtiger_Base_Validator_Js("Vtiger_Twitter_Validator_Js",{invokeValidation:function(field,rules,i,options){var validatorInstance=new Vtiger_Twitter_Validator_Js;validatorInstance.setElement(field);var result=validatorInstance.validate();return 1==result?result:validatorInstance.getError()}},{validate:function(){return!!this.getFieldValue().match(/^[a-zA-Z0-9_]{1,15}$/g)||(this.setError(app.vtranslate("JS_PLEASE_ENTER_VALID_TWITTER_ACCOUNT")),!1)}}),Vtiger_Email_Validator_Js("Vtiger_MultiEmail_Validator_Js",{invokeValidation:function(field){var validatorInstance=new Vtiger_MultiEmail_Validator_Js;validatorInstance.setElement(field);var result=validatorInstance.validate();return 1==result?result:validatorInstance.getError()}},{validate:function(){var fieldValue=this.getFieldValue();if(""===fieldValue)return!0;if(!1===this.validateValue(fieldValue))return!1;for(var allFields=$(this.field).closest("div.js-multi-email").eq(0).find("[class*=js-multi-email-row]"),arrayLength=allFields.length,i=0;i<arrayLength;++i){var inputField=$(allFields[i]).find("input.js-email").eq(0);if(""!==inputField.val())if($(allFields[i]).closest("div[class*=js-multi-email-row-]").eq(0).attr("class")!==$(this.field).closest("div[class*=js-multi-email-row-]").eq(0).attr("class")&&inputField.val()===fieldValue)return this.setError(app.vtranslate("JS_EMAIL_DUPLICATED")),!1}return!0}}),Vtiger_greaterThanDependentField_Validator_Js("Calendar_greaterThanDependentField_Validator_Js",{},{getDateTimeInstance:function(field){var form=field.closest("form"),timeField=void 0,timeFieldValue=void 0;"date_start"===field.attr("name")?timeFieldValue=(timeField=form.find('[name="time_start"]')).val():"due_date"===field.attr("name")&&(timeFieldValue=(timeField=form.find('[name="time_end"]')).length>0?timeField.val():"11:59 PM");var dateFieldValue=field.val()+" "+timeFieldValue,dateFormat=field.data("dateFormat");return Vtiger_Helper_Js.getDateInstance(dateFieldValue,dateFormat)}}),Vtiger_Base_Validator_Js("Calendar_greaterThanToday_Validator_Js",{},{validate:function(){var fieldData=this.getElement().data(),fieldDateFormat=fieldData.dateFormat,fieldInfo=fieldData.fieldinfo,fieldValue=this.getFieldValue();try{var fieldDateInstance=Vtiger_Helper_Js.getDateInstance(fieldValue,fieldDateFormat)}catch(err){return this.setError(err),!1}fieldDateInstance.setHours(0,0,0,0);var todayDateInstance=new Date;if(todayDateInstance.setHours(0,0,0,0),todayDateInstance-fieldDateInstance>=0){var errorInfo=fieldInfo.label+" "+app.vtranslate("JS_SHOULD_BE_GREATER_THAN_CURRENT_DATE");return this.setError(errorInfo),!1}return!0}}),Vtiger_Base_Validator_Js("Calendar_RepeatMonthDate_Validator_Js",{invokeValidation:function(field,rules,i,options){var repeatMonthDateValidatorInstance=new Calendar_RepeatMonthDate_Validator_Js;if(repeatMonthDateValidatorInstance.setElement(field),1!=repeatMonthDateValidatorInstance.validate())return repeatMonthDateValidatorInstance.getError()}},{validate:function(){var fieldValue=this.getFieldValue();if(parseInt(parseFloat(fieldValue))!=fieldValue||""==fieldValue||parseInt(fieldValue)>"31"||parseInt(fieldValue)<=0){var result=app.vtranslate("JS_NUMBER_SHOULD_BE_LESS_THAN_32");return this.setError(result),!1}return!0}}),Vtiger_WholeNumber_Validator_Js("Vtiger_WholeNumberGreaterThanZero_Validator_Js",{invokeValidation:function(field,rules,i,options){var WholeNumberGreaterThanZero=new Vtiger_WholeNumberGreaterThanZero_Validator_Js;if(WholeNumberGreaterThanZero.setElement(field),1!=WholeNumberGreaterThanZero.validate())return WholeNumberGreaterThanZero.getError()}},{validate:function(){var response=this._super();if(1!=response)return response;if(0==this.getFieldValue()){var errorInfo=app.vtranslate("JS_VALUE_SHOULD_BE_GREATER_THAN_ZERO");return this.setError(errorInfo),!1}return!0}}),Vtiger_Base_Validator_Js("Vtiger_AlphaNumeric_Validator_Js",{invokeValidation:function(field,rules,i,options){var alphaNumericInstance=new Vtiger_AlphaNumeric_Validator_Js;if(alphaNumericInstance.setElement(field),1!=alphaNumericInstance.validate())return alphaNumericInstance.getError()}},{validate:function(){if(!this.getElement().val().match(/^[a-z0-9 _-]*$/i)){var errorInfo=app.vtranslate("JS_CONTAINS_ILLEGAL_CHARACTERS");return this.setError(errorInfo),!1}return!0}}),Vtiger_Base_Validator_Js("Vtiger_AlphaNumericWithSlashesCurlyBraces_Validator_Js",{invokeValidation:function(field,rules,i,options){var alphaNumericInstance=new Vtiger_AlphaNumericWithSlashesCurlyBraces_Validator_Js;if(alphaNumericInstance.setElement(field),1!=alphaNumericInstance.validate())return alphaNumericInstance.getError()}},{validate:function(){if(!this.getElement().val().match(/^[\/a-z\\0-9{}: _-]*$/i)){var errorInfo=app.vtranslate("JS_CONTAINS_ILLEGAL_CHARACTERS");return this.setError(errorInfo),!1}return!0}}),Vtiger_Base_Validator_Js("Vtiger_InputMask_Validator_Js",{invokeValidation:function(field,rules,i,options){var maskInstance=new Vtiger_InputMask_Validator_Js;if(maskInstance.setElement(field),1!=maskInstance.validate())return maskInstance.getError()}},{validate:function(){var response=this._super();if(!0!==response)return response;var field=this.getElement(),errorInfo=void 0;if(field.attr("data-inputmask")){var unMaskedValue=field.inputmask("unmaskedvalue"),getMetaData=field.inputmask("getmetadata"),maskLength=(getMetaData.match(/9/g)||[]).length+(getMetaData.match(/A/g)||[]).length+(getMetaData.match(/'*'/g)||[]).length;if(0!==unMaskedValue.length&&maskLength>unMaskedValue.length)return errorInfo=app.vtranslate("JS_INVALID_LENGTH"),this.setError(errorInfo),window.inputMaskValidation=!0,!1;window.inputMaskValidation=!1}return!window.inputMaskValidation||(errorInfo=app.vtranslate("JS_INVALID_LENGTH"),this.setError(errorInfo),!1)}}),Vtiger_Base_Validator_Js("Vtiger_Textparser_Validator_Js",{invokeValidation:function(field,rules,i,options){var instance=new Vtiger_TextParser_Validator_Js;if(instance.setElement(field),1!=instance.validate())return instance.getError()}},{validate:function(){var response=this._super();if(1!=response)return response;var fieldValue=this.getElement().val();if(!/^\$\((\w+) : ([,"\+\-\[\]\&\w\s\|]+)\)\$$/.test(fieldValue)){var errorInfo=app.vtranslate("JS_INVALID_LENGTH");return this.setError(errorInfo),!1}return!0}}),Vtiger_Base_Validator_Js("Vtiger_YetiForceCompanyName_Validator_Js",{invokeValidation:function(field,rules,i,options){var instance=new Vtiger_YetiForceCompanyName_Validator_Js;if(instance.setElement(field),1!=instance.validate())return instance.getError()}},{validate:function(){var response=this._super();return 1!=response?response:!(this.getElement().val().toLowerCase().indexOf("yetiforce")>=0)||(this.setError(app.vtranslate("JS_YETIFORCE_COMPANY_NAME_NOT_ALLOWED")),!1)}}),Vtiger_Base_Validator_Js("Vtiger_MultiImage_Validator_Js",{invokeValidation:function(field,rules,i,options){var instance=new Vtiger_MultiImage_Validator_Js;if(instance.setElement(field),1!=instance.validate())return instance.getError()}},{validate:function(){var response=this._super();if(1!=response)return response;var field=this.getElement(),fieldValue=field.val();return!field.data("fieldinfo").mandatory||0!==JSON.parse(fieldValue).length||(this.setError(app.vtranslate("JS_REQUIRED_FIELD")),!1)}}),Vtiger_Base_Validator_Js("Vtiger_MaxSizeInByte_Validator_Js",{invokeValidation:function(field,rules,i,options){var instance=new Vtiger_MaxSizeInByte_Validator_Js;if(instance.setElement(field),1!=instance.validate())return instance.getError()}},{validate:function(){var response=this._super();if(1!=response)return response;var field=this.getElement(),fieldValue=field.val();return!(field.data("fieldinfo").maximumlength&&(new TextEncoder).encode(fieldValue).byteLength>field.data("fieldinfo").maximumlength)||(this.setError(app.vtranslate("JS_MAXIMUM_TEXT_SIZE_IN_BYTES")+" "+field.data("fieldinfo").maximumlength),!1)}}),Vtiger_Base_Validator_Js("Vtiger_FieldName_Validator_Js",{invokeValidation:function(field,rules,i,options){var instance=new Vtiger_FieldName_Validator_Js;if(instance.setElement(field),1!=instance.validate())return instance.getError()}},{validate:function(){return"data"!==this.getFieldValue()||(this.setError(app.vtranslate("JS_CONTAINS_ILLEGAL_CHARACTERS")),!1)}}),Vtiger_Double_Validator_Js("Vtiger_Advpercentage_Validator_Js",{});
//# sourceMappingURL=FieldValidator.min.js.map
