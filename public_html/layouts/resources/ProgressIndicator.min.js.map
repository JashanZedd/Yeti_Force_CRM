{"version":3,"file":"ProgressIndicator.min.js","sources":["ProgressIndicator.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n *************************************************************************************/\n'use strict';\n\n(function($) {\n\tvar ProgressIndicatorHelper = function() {\n\t\tvar thisInstance = this;\n\n\t\tthis.defaults = {\n\t\t\tposition: 'append',\n\t\t\tmode: 'show',\n\t\t\tblockInfo: {\n\t\t\t\telementToBlock: 'body'\n\t\t\t},\n\t\t\tmessage: ''\n\t\t};\n\n\t\tthis.imageContainerCss = {\n\t\t\t'text-align': 'center'\n\t\t};\n\n\t\tthis.blockOverlayCSS = {\n\t\t\topacity: '0.2',\n\t\t\t'background-color': ''\n\t\t};\n\n\t\tthis.blockCss = {\n\t\t\tborder: '',\n\t\t\t'background-color': '',\n\t\t\t'background-clip': 'border-box',\n\t\t\t'border-radius': '2px'\n\t\t};\n\n\t\tthis.showTopCSS = {\n\t\t\twidth: '25%',\n\t\t\tleft: '37.5%',\n\t\t\tposition: 'fixed',\n\t\t\ttop: '4.5%',\n\t\t\t'z-index': '100000'\n\t\t};\n\n\t\tthis.showOnTop = false;\n\n\t\tthis.init = function(element, options = {}) {\n\t\t\tthisInstance.options = $.extend(true, this.defaults, options);\n\t\t\tthisInstance.blockOverlayCSS = Object.assign(\n\t\t\t\tthisInstance.blockOverlayCSS,\n\t\t\t\toptions.blockOverlayCSS ? options.blockOverlayCSS : {}\n\t\t\t);\n\t\t\tthisInstance.container = element;\n\t\t\tthisInstance.position = options.position;\n\t\t\tif (typeof options.imageContainerCss !== 'undefined') {\n\t\t\t\tthisInstance.imageContainerCss = $.extend(true, this.imageContainerCss, options.imageContainerCss);\n\t\t\t}\n\t\t\tif (this.isBlockMode()) {\n\t\t\t\tthisInstance.elementToBlock = $(thisInstance.options.blockInfo.elementToBlock);\n\t\t\t}\n\t\t\treturn this;\n\t\t};\n\n\t\tthis.initActions = function() {\n\t\t\tif (this.options.mode == 'show') {\n\t\t\t\tthis.show();\n\t\t\t} else if (this.options.mode == 'hide') {\n\t\t\t\tthis.hide();\n\t\t\t}\n\t\t};\n\n\t\tthis.isPageBlockMode = function() {\n\t\t\tif (typeof this.elementToBlock !== 'undefined' && this.elementToBlock.is('body')) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\n\t\tthis.isBlockMode = function() {\n\t\t\tif (typeof this.options.blockInfo !== 'undefined' && this.options.blockInfo.enabled == true) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\n\t\tthis.show = function() {\n\t\t\tvar className = 'bigLoading';\n\t\t\tif (this.options.smallLoadingImage == true) {\n\t\t\t\tclassName = 'smallLoading';\n\t\t\t}\n\t\t\tif (this.isBlockMode()) {\n\t\t\t\tclassName = className + ' blockProgressContainer';\n\t\t\t}\n\t\t\tvar imageHtml =\n\t\t\t\t'<div class=\"imageHolder ' +\n\t\t\t\tclassName +\n\t\t\t\t'\">' +\n\t\t\t\t'<div class=\"sk-cube-grid\"><div class=\"sk-cube sk-cube1\"></div>' +\n\t\t\t\t'<div class=\"sk-cube sk-cube2\"></div>' +\n\t\t\t\t'<div class=\"sk-cube sk-cube3\"></div><div class=\"sk-cube sk-cube4\"></div><div class=\"sk-cube sk-cube5\"></div>' +\n\t\t\t\t'<div class=\"sk-cube sk-cube6\"></div><div class=\"sk-cube sk-cube7\"></div><div class=\"sk-cube sk-cube8\"></div>' +\n\t\t\t\t'<div class=\"sk-cube sk-cube9\"></div></div></div>';\n\t\t\tvar jQImageHtml = jQuery(imageHtml).css(this.imageContainerCss);\n\n\t\t\tvar jQMessage = thisInstance.options.message;\n\t\t\tif (jQMessage !== false) {\n\t\t\t\tif (jQMessage.length == 0) {\n\t\t\t\t\tjQMessage = app.vtranslate('JS_LOADING_PLEASE_WAIT');\n\t\t\t\t}\n\t\t\t\tif (!(jQMessage instanceof jQuery)) {\n\t\t\t\t\tjQMessage = jQuery('<span></span>').html(jQMessage);\n\t\t\t\t}\n\t\t\t\tvar messageContainer = jQuery('<div class=\"message\"></div>').append(jQMessage);\n\t\t\t}\n\t\t\tjQImageHtml.append(messageContainer);\n\t\t\tif (this.isBlockMode()) {\n\t\t\t\tjQImageHtml.addClass('blockMessageContainer');\n\t\t\t}\n\n\t\t\tswitch (thisInstance.position) {\n\t\t\t\tcase 'prepend':\n\t\t\t\t\tthisInstance.container.prepend(jQImageHtml);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'html':\n\t\t\t\t\tthisInstance.container.html(jQImageHtml);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'replace':\n\t\t\t\t\tthisInstance.container.replaceWith(jQImageHtml);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthisInstance.container.append(jQImageHtml);\n\t\t\t}\n\t\t\tif (this.isBlockMode()) {\n\t\t\t\tthisInstance.blockedElement = thisInstance.elementToBlock;\n\t\t\t\tif (thisInstance.isPageBlockMode()) {\n\t\t\t\t\t$.blockUI({\n\t\t\t\t\t\tmessage: thisInstance.container,\n\t\t\t\t\t\toverlayCSS: thisInstance.blockOverlayCSS,\n\t\t\t\t\t\tcss: thisInstance.blockCss,\n\t\t\t\t\t\tonBlock: thisInstance.options.blockInfo.onBlock\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tthisInstance.elementToBlock.block({\n\t\t\t\t\t\tmessage: thisInstance.container,\n\t\t\t\t\t\toverlayCSS: thisInstance.blockOverlayCSS,\n\t\t\t\t\t\tcss: thisInstance.blockCss\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (thisInstance.showOnTop) {\n\t\t\t\tthis.container.css(this.showTopCSS).appendTo('body');\n\t\t\t}\n\t\t};\n\n\t\tthis.hide = function() {\n\t\t\t$('.imageHolder', this.container).remove();\n\t\t\tif (typeof this.blockedElement !== 'undefined') {\n\t\t\t\tif (this.isPageBlockMode()) {\n\t\t\t\t\t$.unblockUI();\n\t\t\t\t} else {\n\t\t\t\t\tthis.blockedElement.unblock();\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.container.removeData('progressIndicator');\n\t\t};\n\t};\n\n\t$.fn.progressIndicator = function(options) {\n\t\tlet element = this;\n\t\tif (this.length <= 0) {\n\t\t\telement = jQuery('body');\n\t\t}\n\t\treturn element.each(function(index, element) {\n\t\t\tlet jQueryObject = $(element),\n\t\t\t\tprogressIndicatorInstance;\n\t\t\tif (typeof jQueryObject.data('progressIndicator') !== 'undefined') {\n\t\t\t\tprogressIndicatorInstance = jQueryObject.data('progressIndicator');\n\t\t\t} else {\n\t\t\t\tprogressIndicatorInstance = new ProgressIndicatorHelper();\n\t\t\t\tjQueryObject.data('progressIndicator', progressIndicatorInstance);\n\t\t\t}\n\t\t\tprogressIndicatorInstance.init(jQueryObject, options).initActions();\n\t\t});\n\t};\n\n\t$.progressIndicator = function(options) {\n\t\tvar progressImageContainer = jQuery('<div></div>');\n\t\tvar progressIndicatorInstance = new ProgressIndicatorHelper();\n\t\tprogressIndicatorInstance.init(progressImageContainer, options);\n\t\tif (!progressIndicatorInstance.isBlockMode()) {\n\t\t\tprogressIndicatorInstance.showOnTop = true;\n\t\t}\n\t\tprogressIndicatorInstance.initActions();\n\t\treturn progressImageContainer.data('progressIndicator', progressIndicatorInstance);\n\t};\n\n\t//Change the z-index of the block overlay value\n\t$.blockUI.defaults.baseZ = 10000;\n})(jQuery);\n"],"names":["$","ProgressIndicatorHelper","thisInstance","this","defaults","imageContainerCss","blockOverlayCSS","blockCss","showTopCSS","showOnTop","init","element","options","extend","Object","assign","container","position","isBlockMode","elementToBlock","blockInfo","initActions","mode","show","hide","isPageBlockMode","is","enabled","className","smallLoadingImage","jQImageHtml","jQuery","css","jQMessage","message","length","app","vtranslate","html","messageContainer","append","addClass","prepend","replaceWith","blockedElement","blockUI","onBlock","block","appendTo","remove","unblockUI","unblock","removeData","fn","progressIndicator","each","index","jQueryObject","progressIndicatorInstance","data","progressImageContainer","baseZ"],"mappings":"cAUA,SAAUA,OACLC,wBAA0B,eACzBC,aAAeC,UAEdC,SAAW,UACL,cACJ,iBACK,gBACM,gBAER,SAGLC,kBAAoB,cACV,eAGVC,gBAAkB,SACb,yBACW,SAGhBC,SAAW,QACP,sBACY,qBACD,6BACF,YAGbC,WAAa,OACV,WACD,iBACI,YACL,iBACM,eAGPC,WAAY,OAEZC,KAAO,SAASC,aAASC,+DAAU,uBAC1BA,QAAUZ,EAAEa,QAAO,EAAMV,KAAKC,SAAUQ,sBACxCN,gBAAkBQ,OAAOC,OACrCb,aAAaI,gBACbM,QAAQN,gBAAkBM,QAAQN,gBAAkB,iBAExCU,UAAYL,qBACZM,SAAWL,QAAQK,cACS,IAA9BL,QAAQP,iCACLA,kBAAoBL,EAAEa,QAAO,EAAMV,KAAKE,kBAAmBO,QAAQP,oBAE7EF,KAAKe,6BACKC,eAAiBnB,EAAEE,aAAaU,QAAQQ,UAAUD,iBAEzDhB,WAGHkB,YAAc,WACO,QAArBlB,KAAKS,QAAQU,UACXC,OAC0B,QAArBpB,KAAKS,QAAQU,WAClBE,aAIFC,gBAAkB,wBACa,IAAxBtB,KAAKgB,iBAAkChB,KAAKgB,eAAeO,GAAG,eAMrER,YAAc,uBACoB,IAA3Bf,KAAKS,QAAQQ,WAA+D,GAAlCjB,KAAKS,QAAQQ,UAAUO,cAMxEJ,KAAO,eACPK,UAAY,aACsB,GAAlCzB,KAAKS,QAAQiB,8BACJ,gBAET1B,KAAKe,2BACgB,+BAWrBY,YAAcC,OARjB,2BACAH,UACA,gXAMmCI,IAAI7B,KAAKE,mBAEzC4B,UAAY/B,aAAaU,QAAQsB,YACnB,IAAdD,UAAqB,CACA,GAApBA,UAAUE,mBACDC,IAAIC,WAAW,2BAEtBJ,qBAAqBF,mBACdA,OAAO,iBAAiBO,KAAKL,gBAEtCM,iBAAmBR,OAAO,+BAA+BS,OAAOP,8BAEzDO,OAAOD,kBACfpC,KAAKe,2BACIuB,SAAS,yBAGdvC,aAAae,cACf,uBACSD,UAAU0B,QAAQZ,uBAE3B,oBACSd,UAAUsB,KAAKR,uBAExB,uBACSd,UAAU2B,YAAYb,wCAGtBd,UAAUwB,OAAOV,aAE5B3B,KAAKe,6BACK0B,eAAiB1C,aAAaiB,eACvCjB,aAAauB,oBACdoB,QAAQ,SACA3C,aAAac,qBACVd,aAAaI,oBACpBJ,aAAaK,iBACTL,aAAaU,QAAQQ,UAAU0B,uBAG5B3B,eAAe4B,MAAM,SACxB7C,aAAac,qBACVd,aAAaI,oBACpBJ,aAAaK,YAKjBL,aAAaO,gBACXO,UAAUgB,IAAI7B,KAAKK,YAAYwC,SAAS,cAI1CxB,KAAO,aACT,eAAgBrB,KAAKa,WAAWiC,cACC,IAAxB9C,KAAKyC,iBACXzC,KAAKsB,oBACNyB,iBAEGN,eAAeO,gBAGjBnC,UAAUoC,WAAW,yBAI1BC,GAAGC,kBAAoB,SAAS1C,aAC7BD,QAAUR,YACVA,KAAKgC,QAAU,YACRJ,OAAO,SAEXpB,QAAQ4C,MAAK,SAASC,MAAO7C,aAC/B8C,aAAezD,EAAEW,SACpB+C,sCACqD,IAA3CD,aAAaE,KAAK,+CACAF,aAAaE,KAAK,gDAElB,IAAI1D,qCACnB0D,KAAK,oBAAqBD,sDAEdhD,KAAK+C,aAAc7C,SAASS,oBAItDiC,kBAAoB,SAAS1C,aAC1BgD,uBAAyB7B,OAAO,eAChC2B,0BAA4B,IAAIzD,yDACVS,KAAKkD,uBAAwBhD,SAClD8C,0BAA0BxC,0CACJT,WAAY,6BAEbY,cACnBuC,uBAAuBD,KAAK,oBAAqBD,8BAIvDb,QAAQzC,SAASyD,MAAQ,IA/L5B,CAgMG9B"}