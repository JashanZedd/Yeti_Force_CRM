{"version":3,"file":"ProgressIndicator.min.js","sources":["ProgressIndicator.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n *************************************************************************************/\n'use strict';\n\n(function($) {\n\tvar ProgressIndicatorHelper = function() {\n\t\tvar thisInstance = this;\n\n\t\tthis.defaults = {\n\t\t\tposition: 'append',\n\t\t\tmode: 'show',\n\t\t\tblockInfo: {\n\t\t\t\telementToBlock: 'body'\n\t\t\t},\n\t\t\tmessage: ''\n\t\t};\n\n\t\tthis.imageContainerCss = {\n\t\t\t'text-align': 'center'\n\t\t};\n\n\t\tthis.blockOverlayCSS = {\n\t\t\topacity: '0.2',\n\t\t\t'background-color': ''\n\t\t};\n\n\t\tthis.blockCss = {\n\t\t\tborder: '',\n\t\t\t'background-color': '',\n\t\t\t'background-clip': 'border-box',\n\t\t\t'border-radius': '2px'\n\t\t};\n\n\t\tthis.showTopCSS = {\n\t\t\twidth: '25%',\n\t\t\tleft: '37.5%',\n\t\t\tposition: 'fixed',\n\t\t\ttop: '4.5%',\n\t\t\t'z-index': '100000'\n\t\t};\n\n\t\tthis.showOnTop = false;\n\n\t\tthis.init = function(element, options = {}) {\n\t\t\tthisInstance.options = $.extend(true, this.defaults, options);\n\t\t\tthisInstance.blockOverlayCSS = Object.assign(\n\t\t\t\tthisInstance.blockOverlayCSS,\n\t\t\t\toptions.blockOverlayCSS ? options.blockOverlayCSS : {}\n\t\t\t);\n\t\t\tthisInstance.container = element;\n\t\t\tthisInstance.position = options.position;\n\t\t\tif (typeof options.imageContainerCss !== 'undefined') {\n\t\t\t\tthisInstance.imageContainerCss = $.extend(true, this.imageContainerCss, options.imageContainerCss);\n\t\t\t}\n\t\t\tif (this.isBlockMode()) {\n\t\t\t\tthisInstance.elementToBlock = $(thisInstance.options.blockInfo.elementToBlock);\n\t\t\t}\n\t\t\treturn this;\n\t\t};\n\n\t\tthis.initActions = function() {\n\t\t\tif (this.options.mode == 'show') {\n\t\t\t\tthis.show();\n\t\t\t} else if (this.options.mode == 'hide') {\n\t\t\t\tthis.hide();\n\t\t\t}\n\t\t};\n\n\t\tthis.isPageBlockMode = function() {\n\t\t\tif (typeof this.elementToBlock !== 'undefined' && this.elementToBlock.is('body')) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\n\t\tthis.isBlockMode = function() {\n\t\t\tif (typeof this.options.blockInfo !== 'undefined' && this.options.blockInfo.enabled == true) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\n\t\tthis.show = function() {\n\t\t\tvar className = 'bigLoading';\n\t\t\tif (this.options.smallLoadingImage == true) {\n\t\t\t\tclassName = 'smallLoading';\n\t\t\t}\n\t\t\tif (this.isBlockMode()) {\n\t\t\t\tclassName = className + ' blockProgressContainer';\n\t\t\t}\n\t\t\tvar imageHtml =\n\t\t\t\t'<div class=\"imageHolder ' +\n\t\t\t\tclassName +\n\t\t\t\t'\">' +\n\t\t\t\t'<div class=\"sk-cube-grid\"><div class=\"sk-cube sk-cube1\"></div>' +\n\t\t\t\t'<div class=\"sk-cube sk-cube2\"></div>' +\n\t\t\t\t'<div class=\"sk-cube sk-cube3\"></div><div class=\"sk-cube sk-cube4\"></div><div class=\"sk-cube sk-cube5\"></div>' +\n\t\t\t\t'<div class=\"sk-cube sk-cube6\"></div><div class=\"sk-cube sk-cube7\"></div><div class=\"sk-cube sk-cube8\"></div>' +\n\t\t\t\t'<div class=\"sk-cube sk-cube9\"></div></div></div>';\n\t\t\tvar jQImageHtml = jQuery(imageHtml).css(this.imageContainerCss);\n\n\t\t\tvar jQMessage = thisInstance.options.message;\n\t\t\tif (jQMessage !== false) {\n\t\t\t\tif (jQMessage.length == 0) {\n\t\t\t\t\tjQMessage = app.vtranslate('JS_LOADING_PLEASE_WAIT');\n\t\t\t\t}\n\t\t\t\tif (!(jQMessage instanceof jQuery)) {\n\t\t\t\t\tjQMessage = jQuery('<span></span>').html(jQMessage);\n\t\t\t\t}\n\t\t\t\tvar messageContainer = jQuery('<div class=\"message\"></div>').append(jQMessage);\n\t\t\t}\n\t\t\tjQImageHtml.append(messageContainer);\n\t\t\tif (this.isBlockMode()) {\n\t\t\t\tjQImageHtml.addClass('blockMessageContainer');\n\t\t\t}\n\n\t\t\tswitch (thisInstance.position) {\n\t\t\t\tcase 'prepend':\n\t\t\t\t\tthisInstance.container.prepend(jQImageHtml);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'html':\n\t\t\t\t\tthisInstance.container.html(jQImageHtml);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'replace':\n\t\t\t\t\tthisInstance.container.replaceWith(jQImageHtml);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthisInstance.container.append(jQImageHtml);\n\t\t\t}\n\t\t\tif (this.isBlockMode()) {\n\t\t\t\tthisInstance.blockedElement = thisInstance.elementToBlock;\n\t\t\t\tif (thisInstance.isPageBlockMode()) {\n\t\t\t\t\t$.blockUI({\n\t\t\t\t\t\tmessage: thisInstance.container,\n\t\t\t\t\t\toverlayCSS: thisInstance.blockOverlayCSS,\n\t\t\t\t\t\tcss: thisInstance.blockCss,\n\t\t\t\t\t\tonBlock: thisInstance.options.blockInfo.onBlock\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tthisInstance.elementToBlock.block({\n\t\t\t\t\t\tmessage: thisInstance.container,\n\t\t\t\t\t\toverlayCSS: thisInstance.blockOverlayCSS,\n\t\t\t\t\t\tcss: thisInstance.blockCss\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (thisInstance.showOnTop) {\n\t\t\t\tthis.container.css(this.showTopCSS).appendTo('body');\n\t\t\t}\n\t\t};\n\n\t\tthis.hide = function() {\n\t\t\t$('.imageHolder', this.container).remove();\n\t\t\tif (typeof this.blockedElement !== 'undefined') {\n\t\t\t\tif (this.isPageBlockMode()) {\n\t\t\t\t\t$.unblockUI();\n\t\t\t\t} else {\n\t\t\t\t\tthis.blockedElement.unblock();\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.container.removeData('progressIndicator');\n\t\t};\n\t};\n\n\t$.fn.progressIndicator = function(options) {\n\t\tlet element = this;\n\t\tif (this.length <= 0) {\n\t\t\telement = jQuery('body');\n\t\t}\n\t\treturn element.each(function(index, element) {\n\t\t\tlet jQueryObject = $(element),\n\t\t\t\tprogressIndicatorInstance;\n\t\t\tif (typeof jQueryObject.data('progressIndicator') !== 'undefined') {\n\t\t\t\tprogressIndicatorInstance = jQueryObject.data('progressIndicator');\n\t\t\t} else {\n\t\t\t\tprogressIndicatorInstance = new ProgressIndicatorHelper();\n\t\t\t\tjQueryObject.data('progressIndicator', progressIndicatorInstance);\n\t\t\t}\n\t\t\tprogressIndicatorInstance.init(jQueryObject, options).initActions();\n\t\t});\n\t};\n\n\t$.progressIndicator = function(options) {\n\t\tvar progressImageContainer = jQuery('<div></div>');\n\t\tvar progressIndicatorInstance = new ProgressIndicatorHelper();\n\t\tprogressIndicatorInstance.init(progressImageContainer, options);\n\t\tif (!progressIndicatorInstance.isBlockMode()) {\n\t\t\tprogressIndicatorInstance.showOnTop = true;\n\t\t}\n\t\tprogressIndicatorInstance.initActions();\n\t\treturn progressImageContainer.data('progressIndicator', progressIndicatorInstance);\n\t};\n\n\t//Change the z-index of the block overlay value\n\t$.blockUI.defaults.baseZ = 10000;\n})(jQuery);\n"],"names":["$","ProgressIndicatorHelper","thisInstance","defaults","imageContainerCss","blockOverlayCSS","blockCss","showTopCSS","showOnTop","init","element","options","extend","Object","assign","container","position","isBlockMode","elementToBlock","blockInfo","initActions","mode","show","hide","isPageBlockMode","is","enabled","className","smallLoadingImage","imageHtml","jQImageHtml","jQuery","css","jQMessage","message","length","app","vtranslate","html","messageContainer","append","addClass","prepend","replaceWith","blockedElement","blockUI","onBlock","block","appendTo","remove","unblockUI","unblock","removeData","fn","progressIndicator","each","index","jQueryObject","progressIndicatorInstance","data","progressImageContainer","baseZ"],"mappings":"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"}