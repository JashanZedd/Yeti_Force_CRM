{"version":3,"file":"ProgressIndicator.min.js","sources":["ProgressIndicator.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n *************************************************************************************/\n'use strict';\n\n(function ($) {\n\tvar ProgressIndicatorHelper = function () {\n\t\tvar thisInstance = this;\n\n\t\tthis.defaults = {\n\t\t\tposition: 'append',\n\t\t\tmode: 'show',\n\t\t\tblockInfo: {\n\t\t\t\telementToBlock: 'body'\n\t\t\t},\n\t\t\tmessage: ''\n\t\t};\n\n\t\tthis.imageContainerCss = {\n\t\t\t'text-align': 'center'\n\t\t};\n\n\t\tthis.blockOverlayCSS = {\n\t\t\topacity: 0.8,\n\t\t\t'background-color': '#fff'\n\t\t};\n\n\t\tthis.blockCss = {\n\t\t\tborder: '',\n\t\t\t'background-color': '',\n\t\t\t'background-clip': 'border-box',\n\t\t\t'border-radius': '2px'\n\t\t};\n\n\t\tthis.showTopCSS = {\n\t\t\twidth: '25%',\n\t\t\tleft: '37.5%',\n\t\t\tposition: 'fixed',\n\t\t\ttop: '4.5%',\n\t\t\t'z-index': '100000'\n\t\t};\n\n\t\tthis.showOnTop = false;\n\n\t\tthis.init = function (element, options = {}) {\n\t\t\tthisInstance.options = $.extend(true, this.defaults, options);\n\t\t\tthisInstance.blockOverlayCSS = Object.assign(\n\t\t\t\tthisInstance.blockOverlayCSS,\n\t\t\t\toptions.blockOverlayCSS ? options.blockOverlayCSS : {}\n\t\t\t);\n\t\t\tthisInstance.container = element;\n\t\t\tthisInstance.position = options.position;\n\t\t\tif (typeof options.imageContainerCss !== 'undefined') {\n\t\t\t\tthisInstance.imageContainerCss = $.extend(true, this.imageContainerCss, options.imageContainerCss);\n\t\t\t}\n\t\t\tif (this.isBlockMode()) {\n\t\t\t\tthisInstance.elementToBlock = $(thisInstance.options.blockInfo.elementToBlock);\n\t\t\t}\n\t\t\treturn this;\n\t\t};\n\n\t\tthis.initActions = function () {\n\t\t\tif (this.options.mode == 'show') {\n\t\t\t\tthis.show();\n\t\t\t} else if (this.options.mode == 'hide') {\n\t\t\t\tthis.hide();\n\t\t\t}\n\t\t};\n\n\t\tthis.isPageBlockMode = function () {\n\t\t\tif (typeof this.elementToBlock !== 'undefined' && this.elementToBlock.is('body')) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\n\t\tthis.isBlockMode = function () {\n\t\t\tif (typeof this.options.blockInfo !== 'undefined' && this.options.blockInfo.enabled == true) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\n\t\tthis.show = function () {\n\t\t\tvar className = 'bigLoading';\n\t\t\tif (this.options.smallLoadingImage == true) {\n\t\t\t\tclassName = 'smallLoading';\n\t\t\t}\n\t\t\tif (this.isBlockMode()) {\n\t\t\t\tclassName = className + ' blockProgressContainer';\n\t\t\t}\n\t\t\tvar imageHtml =\n\t\t\t\t'<div class=\"imageHolder ' +\n\t\t\t\tclassName +\n\t\t\t\t'\">' +\n\t\t\t\t'<div class=\"sk-cube-grid\"><div class=\"sk-cube sk-cube1\"></div>' +\n\t\t\t\t'<div class=\"sk-cube sk-cube2\"></div>' +\n\t\t\t\t'<div class=\"sk-cube sk-cube3\"></div><div class=\"sk-cube sk-cube4\"></div><div class=\"sk-cube sk-cube5\"></div>' +\n\t\t\t\t'<div class=\"sk-cube sk-cube6\"></div><div class=\"sk-cube sk-cube7\"></div><div class=\"sk-cube sk-cube8\"></div>' +\n\t\t\t\t'<div class=\"sk-cube sk-cube9\"></div></div></div>';\n\t\t\tvar jQImageHtml = jQuery(imageHtml).css(this.imageContainerCss);\n\n\t\t\tvar jQMessage = thisInstance.options.message;\n\t\t\tif (jQMessage !== false) {\n\t\t\t\tif (jQMessage.length == 0) {\n\t\t\t\t\tjQMessage = app.vtranslate('JS_LOADING_PLEASE_WAIT');\n\t\t\t\t}\n\t\t\t\tif (!(jQMessage instanceof jQuery)) {\n\t\t\t\t\tjQMessage = jQuery('<span></span>').html(jQMessage);\n\t\t\t\t}\n\t\t\t\tvar messageContainer = jQuery('<div class=\"message\"></div>').append(jQMessage);\n\t\t\t}\n\t\t\tjQImageHtml.append(messageContainer);\n\t\t\tif (this.isBlockMode()) {\n\t\t\t\tjQImageHtml.addClass('blockMessageContainer');\n\t\t\t}\n\n\t\t\tswitch (thisInstance.position) {\n\t\t\t\tcase 'prepend':\n\t\t\t\t\tthisInstance.container.prepend(jQImageHtml);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'html':\n\t\t\t\t\tthisInstance.container.html(jQImageHtml);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'replace':\n\t\t\t\t\tthisInstance.container.replaceWith(jQImageHtml);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthisInstance.container.append(jQImageHtml);\n\t\t\t}\n\t\t\tif (this.isBlockMode()) {\n\t\t\t\tthisInstance.blockedElement = thisInstance.elementToBlock;\n\t\t\t\tif (thisInstance.isPageBlockMode()) {\n\t\t\t\t\t$.blockUI({\n\t\t\t\t\t\tmessage: thisInstance.container,\n\t\t\t\t\t\toverlayCSS: thisInstance.blockOverlayCSS,\n\t\t\t\t\t\tcss: thisInstance.blockCss,\n\t\t\t\t\t\tonBlock: thisInstance.options.blockInfo.onBlock\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tthisInstance.elementToBlock.block({\n\t\t\t\t\t\tmessage: thisInstance.container,\n\t\t\t\t\t\toverlayCSS: thisInstance.blockOverlayCSS,\n\t\t\t\t\t\tcss: thisInstance.blockCss\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (thisInstance.showOnTop) {\n\t\t\t\tthis.container.css(this.showTopCSS).appendTo('body');\n\t\t\t}\n\t\t};\n\n\t\tthis.hide = function () {\n\t\t\t$('.imageHolder', this.container).remove();\n\t\t\tif (typeof this.blockedElement !== 'undefined') {\n\t\t\t\tif (this.isPageBlockMode()) {\n\t\t\t\t\t$.unblockUI();\n\t\t\t\t} else {\n\t\t\t\t\tthis.blockedElement.unblock();\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.container.removeData('progressIndicator');\n\t\t};\n\t};\n\n\t$.fn.progressIndicator = function (options) {\n\t\tlet element = this;\n\t\tif (this.length <= 0) {\n\t\t\telement = jQuery('body');\n\t\t}\n\t\treturn element.each(function (index, element) {\n\t\t\tlet jQueryObject = $(element),\n\t\t\t\tprogressIndicatorInstance;\n\t\t\tif (typeof jQueryObject.data('progressIndicator') !== 'undefined') {\n\t\t\t\tprogressIndicatorInstance = jQueryObject.data('progressIndicator');\n\t\t\t} else {\n\t\t\t\tprogressIndicatorInstance = new ProgressIndicatorHelper();\n\t\t\t\tjQueryObject.data('progressIndicator', progressIndicatorInstance);\n\t\t\t}\n\t\t\tprogressIndicatorInstance.init(jQueryObject, options).initActions();\n\t\t});\n\t};\n\n\t$.progressIndicator = function (options) {\n\t\tvar progressImageContainer = jQuery('<div></div>');\n\t\tvar progressIndicatorInstance = new ProgressIndicatorHelper();\n\t\tprogressIndicatorInstance.init(progressImageContainer, options);\n\t\tif (!progressIndicatorInstance.isBlockMode()) {\n\t\t\tprogressIndicatorInstance.showOnTop = true;\n\t\t}\n\t\tprogressIndicatorInstance.initActions();\n\t\treturn progressImageContainer.data('progressIndicator', progressIndicatorInstance);\n\t};\n\n\t//Change the z-index of the block overlay value\n\t$.blockUI.defaults.baseZ = 10000;\n})(jQuery);\n"],"names":["$","defaults","position","mode","blockInfo","elementToBlock","message","imageContainerCss","blockOverlayCSS","opacity","blockCss","border","showTopCSS","width","left","top","showOnTop","init","element","thisInstance","options","extend","Object","assign","container","isBlockMode","initActions","show","hide","isPageBlockMode","is","enabled","smallLoadingImage","className","jQImageHtml","jQuery","imageHtml","css","jQMessage","length","app","vtranslate","html","append","messageContainer","addClass","prepend","replaceWith","blockedElement","blockUI","overlayCSS","onBlock","block","appendTo","remove","unblockUI","unblock","removeData","fn","progressIndicator","each","index","jQueryObject","data","progressIndicatorInstance","ProgressIndicatorHelper","progressImageContainer","baseZ"],"mappings":"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"}