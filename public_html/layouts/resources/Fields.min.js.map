{"version":3,"file":"Fields.min.js","sources":["Fields.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nwindow.App.Fields = {\n\tDate: {\n\t\tmonths: [\n\t\t\t'JS_JAN',\n\t\t\t'JS_FEB',\n\t\t\t'JS_MAR',\n\t\t\t'JS_APR',\n\t\t\t'JS_MAY',\n\t\t\t'JS_JUN',\n\t\t\t'JS_JUL',\n\t\t\t'JS_AUG',\n\t\t\t'JS_SEP',\n\t\t\t'JS_OCT',\n\t\t\t'JS_NOV',\n\t\t\t'JS_DEC'\n\t\t],\n\t\tmonthsTranslated: [\n\t\t\t'JS_JAN',\n\t\t\t'JS_FEB',\n\t\t\t'JS_MAR',\n\t\t\t'JS_APR',\n\t\t\t'JS_MAY',\n\t\t\t'JS_JUN',\n\t\t\t'JS_JUL',\n\t\t\t'JS_AUG',\n\t\t\t'JS_SEP',\n\t\t\t'JS_OCT',\n\t\t\t'JS_NOV',\n\t\t\t'JS_DEC'\n\t\t].map(monthName => app.vtranslate(monthName)),\n\t\tfullMonths: [\n\t\t\t'JS_JANUARY',\n\t\t\t'JS_FEBRUARY',\n\t\t\t'JS_MARCH',\n\t\t\t'JS_APRIL',\n\t\t\t'JS_MAY',\n\t\t\t'JS_JUNE',\n\t\t\t'JS_JULY',\n\t\t\t'JS_AUGUST',\n\t\t\t'JS_SEPTEMBER',\n\t\t\t'JS_OCTOBER',\n\t\t\t'JS_NOVEMBER',\n\t\t\t'JS_DECEMBER'\n\t\t],\n\t\tfullMonthsTranslated: [\n\t\t\t'JS_JANUARY',\n\t\t\t'JS_FEBRUARY',\n\t\t\t'JS_MARCH',\n\t\t\t'JS_APRIL',\n\t\t\t'JS_MAY',\n\t\t\t'JS_JUNE',\n\t\t\t'JS_JULY',\n\t\t\t'JS_AUGUST',\n\t\t\t'JS_SEPTEMBER',\n\t\t\t'JS_OCTOBER',\n\t\t\t'JS_NOVEMBER',\n\t\t\t'JS_DECEMBER'\n\t\t].map(monthName => app.vtranslate(monthName)),\n\t\tdays: ['JS_SUN', 'JS_MON', 'JS_TUE', 'JS_WED', 'JS_THU', 'JS_FRI', 'JS_SAT'],\n\t\tdaysTranslated: ['JS_SUN', 'JS_MON', 'JS_TUE', 'JS_WED', 'JS_THU', 'JS_FRI', 'JS_SAT'].map(monthName =>\n\t\t\tapp.vtranslate(monthName)\n\t\t),\n\t\tfullDays: ['JS_SUNDAY', 'JS_MONDAY', 'JS_TUESDAY', 'JS_WEDNESDAY', 'JS_THURSDAY', 'JS_FRIDAY', 'JS_SATURDAY'],\n\t\tfullDaysTranslated: [\n\t\t\t'JS_SUNDAY',\n\t\t\t'JS_MONDAY',\n\t\t\t'JS_TUESDAY',\n\t\t\t'JS_WEDNESDAY',\n\t\t\t'JS_THURSDAY',\n\t\t\t'JS_FRIDAY',\n\t\t\t'JS_SATURDAY'\n\t\t].map(monthName => app.vtranslate(monthName)),\n\n\t\t/**\n\t\t * Register DatePicker\n\t\t * @param {$} parentElement\n\t\t * @param {boolean} registerForAddon\n\t\t * @param {object} customParams\n\t\t */\n\t\tregister(parentElement, registerForAddon, customParams, className = 'dateField') {\n\t\t\tif (typeof parentElement === 'undefined') {\n\t\t\t\tparentElement = $('body');\n\t\t\t} else {\n\t\t\t\tparentElement = $(parentElement);\n\t\t\t}\n\t\t\tif (typeof registerForAddon === 'undefined') {\n\t\t\t\tregisterForAddon = true;\n\t\t\t}\n\t\t\tlet elements = $('.' + className, parentElement);\n\t\t\tif (parentElement.hasClass(className)) {\n\t\t\t\telements = parentElement;\n\t\t\t}\n\t\t\tif (elements.length === 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (registerForAddon === true) {\n\t\t\t\tconst parentDateElem = elements.closest('.date');\n\t\t\t\t$('.js-date__btn', parentDateElem).on('click', function inputGroupAddonClickHandler(e) {\n\t\t\t\t\t// Using focus api of DOM instead of jQuery because show api of datePicker is calling e.preventDefault\n\t\t\t\t\t// which is stopping from getting focus to input element\n\t\t\t\t\t$(e.currentTarget)\n\t\t\t\t\t\t.closest('.date')\n\t\t\t\t\t\t.find('input.' + className)\n\t\t\t\t\t\t.get(0)\n\t\t\t\t\t\t.focus();\n\t\t\t\t});\n\t\t\t}\n\t\t\tlet format = CONFIG.dateFormat;\n\t\t\tconst elementDateFormat = elements.data('dateFormat');\n\t\t\tif (typeof elementDateFormat !== 'undefined') {\n\t\t\t\tformat = elementDateFormat;\n\t\t\t}\n\t\t\tif (typeof $.fn.datepicker.dates[CONFIG.langKey] === 'undefined') {\n\t\t\t\t$.fn.datepicker.dates[CONFIG.langKey] = {\n\t\t\t\t\tdays: App.Fields.Date.fullDaysTranslated,\n\t\t\t\t\tdaysShort: App.Fields.Date.daysTranslated,\n\t\t\t\t\tdaysMin: App.Fields.Date.daysTranslated,\n\t\t\t\t\tmonths: App.Fields.Date.fullMonthsTranslated,\n\t\t\t\t\tmonthsShort: App.Fields.Date.monthsTranslated,\n\t\t\t\t\ttoday: app.vtranslate('JS_TODAY'),\n\t\t\t\t\tclear: app.vtranslate('JS_CLEAR'),\n\t\t\t\t\tformat: format,\n\t\t\t\t\ttitleFormat: 'MM yyyy' /* Leverages same syntax as 'format' */,\n\t\t\t\t\tweekStart: CONFIG.firstDayOfWeekNo\n\t\t\t\t};\n\t\t\t}\n\t\t\tlet params = {\n\t\t\t\ttodayBtn: 'linked',\n\t\t\t\tclearBtn: true,\n\t\t\t\tlanguage: CONFIG.langKey,\n\t\t\t\tweekStart: CONFIG.firstDayOfWeekNo,\n\t\t\t\tautoclose: true,\n\t\t\t\ttodayHighlight: true,\n\t\t\t\tformat: format\n\t\t\t};\n\t\t\tif (typeof customParams !== 'undefined') {\n\t\t\t\tparams = $.extend(params, customParams);\n\t\t\t}\n\t\t\telements.each((index, element) => {\n\t\t\t\t$(element).datepicker(\n\t\t\t\t\t$.extend(\n\t\t\t\t\t\ttrue,\n\t\t\t\t\t\tObject.assign(params, { enableOnReadonly: !element.hasAttribute('readonly') }),\n\t\t\t\t\t\t$(element).data('params')\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t});\n\t\t\tApp.Fields.Utils.hideMobileKeyboard(elements);\n\t\t\treturn elements;\n\t\t},\n\n\t\t/**\n\t\t * Register dateRangePicker\n\t\t * @param {jQuery} parentElement\n\t\t * @param {object} customParams\n\t\t */\n\t\tregisterRange(parentElement, customParams = {}) {\n\t\t\tif (typeof parentElement === 'undefined') {\n\t\t\t\tparentElement = $('body');\n\t\t\t} else {\n\t\t\t\tparentElement = $(parentElement);\n\t\t\t}\n\t\t\tlet elements = $('.dateRangeField', parentElement);\n\t\t\tif (parentElement.hasClass('dateRangeField')) {\n\t\t\t\telements = parentElement;\n\t\t\t}\n\t\t\tif (elements.length === 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet format = CONFIG.dateFormat.toUpperCase();\n\t\t\tconst elementDateFormat = elements.data('dateFormat');\n\t\t\tif (typeof elementDateFormat !== 'undefined') {\n\t\t\t\tformat = elementDateFormat.toUpperCase();\n\t\t\t}\n\t\t\tlet ranges = {};\n\t\t\tranges[app.vtranslate('JS_TODAY')] = [moment(), moment()];\n\t\t\tranges[app.vtranslate('JS_TOMORROW')] = [moment().add(1, 'days'), moment().add(1, 'days')];\n\t\t\tranges[app.vtranslate('JS_YESTERDAY')] = [moment().subtract(1, 'days'), moment().subtract(1, 'days')];\n\t\t\tranges[app.vtranslate('JS_LAST_7_DAYS')] = [moment().subtract(6, 'days'), moment()];\n\t\t\tranges[app.vtranslate('JS_NEXT_7_DAYS')] = [moment(), moment().add(6, 'days')];\n\t\t\tranges[app.vtranslate('JS_CURRENT_MONTH')] = [moment().startOf('month'), moment().endOf('month')];\n\t\t\tranges[app.vtranslate('JS_NEXT_MONTH')] = [\n\t\t\t\tmoment()\n\t\t\t\t\t.add(1, 'month')\n\t\t\t\t\t.startOf('month'),\n\t\t\t\tmoment()\n\t\t\t\t\t.add(1, 'month')\n\t\t\t\t\t.endOf('month')\n\t\t\t];\n\t\t\tranges[app.vtranslate('JS_LAST_MONTH')] = [\n\t\t\t\tmoment()\n\t\t\t\t\t.subtract(1, 'month')\n\t\t\t\t\t.startOf('month'),\n\t\t\t\tmoment()\n\t\t\t\t\t.subtract(1, 'month')\n\t\t\t\t\t.endOf('month')\n\t\t\t];\n\t\t\tranges[app.vtranslate('JS_NEXT_MONTH')] = [\n\t\t\t\tmoment()\n\t\t\t\t\t.add(1, 'month')\n\t\t\t\t\t.startOf('month'),\n\t\t\t\tmoment()\n\t\t\t\t\t.add(1, 'month')\n\t\t\t\t\t.endOf('month')\n\t\t\t];\n\t\t\tranges[app.vtranslate('JS_LAST_3_MONTHS')] = [\n\t\t\t\tmoment()\n\t\t\t\t\t.subtract(3, 'month')\n\t\t\t\t\t.startOf('month'),\n\t\t\t\tmoment()\n\t\t\t\t\t.subtract(1, 'month')\n\t\t\t\t\t.endOf('month')\n\t\t\t];\n\t\t\tranges[app.vtranslate('JS_NEXT_3_MONTHS')] = [\n\t\t\t\tmoment().startOf('month'),\n\t\t\t\tmoment()\n\t\t\t\t\t.add(3, 'month')\n\t\t\t\t\t.endOf('month')\n\t\t\t];\n\t\t\tranges[app.vtranslate('JS_LAST_6_MONTHS')] = [\n\t\t\t\tmoment()\n\t\t\t\t\t.subtract(6, 'month')\n\t\t\t\t\t.startOf('month'),\n\t\t\t\tmoment()\n\t\t\t\t\t.subtract(1, 'month')\n\t\t\t\t\t.endOf('month')\n\t\t\t];\n\t\t\tranges[app.vtranslate('JS_NEXT_6_MONTHS')] = [\n\t\t\t\tmoment().startOf('month'),\n\t\t\t\tmoment()\n\t\t\t\t\t.add(6, 'month')\n\t\t\t\t\t.endOf('month')\n\t\t\t];\n\t\t\tlet params = {\n\t\t\t\tautoUpdateInput: false,\n\t\t\t\tautoApply: true,\n\t\t\t\tranges: ranges,\n\t\t\t\tlocale: {\n\t\t\t\t\tformat: format,\n\t\t\t\t\tseparator: ',',\n\t\t\t\t\tapplyLabel: app.vtranslate('JS_APPLY'),\n\t\t\t\t\tcancelLabel: app.vtranslate('JS_CANCEL'),\n\t\t\t\t\tfromLabel: app.vtranslate('JS_FROM'),\n\t\t\t\t\ttoLabel: app.vtranslate('JS_TO'),\n\t\t\t\t\tcustomRangeLabel: app.vtranslate('JS_CUSTOM'),\n\t\t\t\t\tweekLabel: app.vtranslate('JS_WEEK').substr(0, 1),\n\t\t\t\t\tfirstDay: CONFIG.firstDayOfWeekNo,\n\t\t\t\t\tdaysOfWeek: App.Fields.Date.daysTranslated,\n\t\t\t\t\tmonthNames: App.Fields.Date.fullMonthsTranslated\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tif (typeof customParams !== 'undefined') {\n\t\t\t\tparams = $.extend(params, customParams);\n\t\t\t}\n\t\t\tparentElement\n\t\t\t\t.find('.js-date__btn')\n\t\t\t\t.off()\n\t\t\t\t.on('click', e => {\n\t\t\t\t\t$(e.currentTarget)\n\t\t\t\t\t\t.parent()\n\t\t\t\t\t\t.next('.dateRangeField')[0]\n\t\t\t\t\t\t.focus();\n\t\t\t\t});\n\t\t\telements.each((index, element) => {\n\t\t\t\tlet el = $(element);\n\t\t\t\tlet currentParams = $.extend(true, params, el.data('params'));\n\t\t\t\tel.daterangepicker(currentParams)\n\t\t\t\t\t.on('apply.daterangepicker', function(ev, picker) {\n\t\t\t\t\t\t$(this).val(\n\t\t\t\t\t\t\tpicker.startDate.format(currentParams.locale.format) +\n\t\t\t\t\t\t\t\t',' +\n\t\t\t\t\t\t\t\tpicker.endDate.format(currentParams.locale.format)\n\t\t\t\t\t\t);\n\t\t\t\t\t\t$(this).trigger('change');\n\t\t\t\t\t})\n\t\t\t\t\t.on('show.daterangepicker', (ev, picker) => {\n\t\t\t\t\t\tApp.Fields.Utils.positionPicker(ev, picker);\n\t\t\t\t\t})\n\t\t\t\t\t.on('showCalendar.daterangepicker', (ev, picker) => {\n\t\t\t\t\t\tApp.Fields.Utils.positionPicker(ev, picker);\n\t\t\t\t\t\tpicker.container.addClass('js-visible');\n\t\t\t\t\t})\n\t\t\t\t\t.on('hide.daterangepicker', (ev, picker) => {\n\t\t\t\t\t\tpicker.container.removeClass('js-visible');\n\t\t\t\t\t});\n\t\t\t\tApp.Fields.Utils.registerMobileDateRangePicker(el);\n\t\t\t});\n\t\t}\n\t},\n\tDateTime: {\n\t\t/*\n\t\t * Initialization datetime fields\n\t\t * @param {jQuery} parentElement\n\t\t * @param {object} customParams\n\t\t */\n\t\tregister: function(parentElement, customParams) {\n\t\t\tif (typeof parentElement === 'undefined') {\n\t\t\t\tparentElement = $('body');\n\t\t\t} else {\n\t\t\t\tparentElement = $(parentElement);\n\t\t\t}\n\t\t\tlet elements = $('.dateTimePickerField', parentElement);\n\t\t\tif (parentElement.hasClass('dateTimePickerField')) {\n\t\t\t\telements = parentElement;\n\t\t\t}\n\t\t\tif (elements.length === 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t$('.input-group-text', elements.closest('.dateTime')).on('click', function(e) {\n\t\t\t\t$(e.currentTarget)\n\t\t\t\t\t.closest('.dateTime')\n\t\t\t\t\t.find('input.dateTimePickerField ')\n\t\t\t\t\t.get(0)\n\t\t\t\t\t.focus();\n\t\t\t});\n\t\t\tlet dateFormat = CONFIG.dateFormat.toUpperCase();\n\t\t\tconst elementDateFormat = elements.data('dateFormat');\n\t\t\tif (typeof elementDateFormat !== 'undefined') {\n\t\t\t\tdateFormat = elementDateFormat.toUpperCase();\n\t\t\t}\n\t\t\tlet hourFormat = CONFIG.hourFormat;\n\t\t\tconst elementHourFormat = elements.data('hourFormat');\n\t\t\tif (typeof elementHourFormat !== 'undefined') {\n\t\t\t\thourFormat = elementHourFormat;\n\t\t\t}\n\t\t\tlet timePicker24Hour = true;\n\t\t\tlet timeFormat = 'HH:mm';\n\t\t\tif (hourFormat != '24') {\n\t\t\t\ttimePicker24Hour = false;\n\t\t\t\ttimeFormat = 'hh:mm A';\n\t\t\t}\n\t\t\tconst format = dateFormat + ' ' + timeFormat;\n\t\t\tlet isDateRangePicker = elements.data('calendarType') !== 'range';\n\t\t\tlet params = {\n\t\t\t\tparentEl: parentElement,\n\t\t\t\tsingleDatePicker: isDateRangePicker,\n\t\t\t\tshowDropdowns: true,\n\t\t\t\ttimePicker: true,\n\t\t\t\tautoUpdateInput: false,\n\t\t\t\ttimePicker24Hour: timePicker24Hour,\n\t\t\t\ttimePickerIncrement: 1,\n\t\t\t\tautoApply: true,\n\t\t\t\topens: 'left',\n\t\t\t\tlocale: {\n\t\t\t\t\tformat: format,\n\t\t\t\t\tseparator: ',',\n\t\t\t\t\tapplyLabel: app.vtranslate('JS_APPLY'),\n\t\t\t\t\tcancelLabel: app.vtranslate('JS_CANCEL'),\n\t\t\t\t\tfromLabel: app.vtranslate('JS_FROM'),\n\t\t\t\t\ttoLabel: app.vtranslate('JS_TO'),\n\t\t\t\t\tcustomRangeLabel: app.vtranslate('JS_CUSTOM'),\n\t\t\t\t\tweekLabel: app.vtranslate('JS_WEEK').substr(0, 1),\n\t\t\t\t\tfirstDay: CONFIG.firstDayOfWeekNo,\n\t\t\t\t\tdaysOfWeek: App.Fields.Date.daysTranslated,\n\t\t\t\t\tmonthNames: App.Fields.Date.fullMonthsTranslated\n\t\t\t\t}\n\t\t\t};\n\t\t\tif (typeof customParams !== 'undefined') {\n\t\t\t\tparams = $.extend(params, customParams);\n\t\t\t}\n\t\t\telements\n\t\t\t\t.daterangepicker(params)\n\t\t\t\t.on('apply.daterangepicker', function applyDateRangePickerHandler(ev, picker) {\n\t\t\t\t\tif (isDateRangePicker) {\n\t\t\t\t\t\t$(this).val(picker.startDate.format(format));\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$(this).val(picker.startDate.format(format) + ',' + picker.endDate.format(format));\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.on('showCalendar.daterangepicker', (ev, picker) => {\n\t\t\t\t\tApp.Fields.Utils.positionPicker(ev, picker);\n\t\t\t\t\tpicker.container.addClass('js-visible');\n\t\t\t\t});\n\t\t\telements.each((index, element) => {\n\t\t\t\tApp.Fields.Utils.registerMobileDateRangePicker($(element));\n\t\t\t});\n\t\t}\n\t},\n\tColors: {\n\t\t/**\n\t\t * Function to check whether the color is dark or light\n\t\t */\n\t\tgetColorContrast: function(hexcolor) {\n\t\t\tvar r = parseInt(hexcolor.substr(0, 2), 16);\n\t\t\tvar g = parseInt(hexcolor.substr(2, 2), 16);\n\t\t\tvar b = parseInt(hexcolor.substr(4, 2), 16);\n\t\t\tvar yiq = (r * 299 + g * 587 + b * 114) / 1000;\n\t\t\treturn yiq >= 128 ? 'light' : 'dark';\n\t\t},\n\t\tgetRandomColor: function() {\n\t\t\tvar letters = '0123456789ABCDEF'.split('');\n\t\t\tvar color = '#';\n\t\t\tfor (var i = 0; i < 6; i++) {\n\t\t\t\tcolor += letters[Math.floor(Math.random() * 16)];\n\t\t\t}\n\t\t\treturn color;\n\t\t},\n\t\tgetRandomColors: function(count) {\n\t\t\tconst colors = [];\n\t\t\tfor (var i = 0; i < count; i++) {\n\t\t\t\tcolors.push(this.getRandomColor());\n\t\t\t}\n\t\t\treturn colors;\n\t\t},\n\t\tshowPicker({ color, fieldToUpdate, bgToUpdate, cb }) {\n\t\t\tlet registerPickerEvents = modalContainer => {\n\t\t\t\tlet picker = window.ColorPicker.mount({\n\t\t\t\t\tel: modalContainer.find('.js-color-picker')[0],\n\t\t\t\t\tcurrentColor: color\n\t\t\t\t});\n\t\t\t\tmodalContainer.find('.js-modal__save').on('click', _ => {\n\t\t\t\t\tlet newColor = picker.getColor().hex;\n\t\t\t\t\tcb && cb(newColor);\n\t\t\t\t\tbgToUpdate && bgToUpdate.css('background', newColor);\n\t\t\t\t\tfieldToUpdate && fieldToUpdate.val(newColor);\n\t\t\t\t\tapp.hideModalWindow(false, modalContainer.closest('.js-modal-container')[0].id);\n\t\t\t\t});\n\t\t\t};\n\t\t\tlet url = `index.php?module=AppComponents&view=ColorPickerModal${\n\t\t\t\tcolor ? '&color=' + color.substring(1) : ''\n\t\t\t}`;\n\t\t\tapp.showModalWindow({ url, cb: registerPickerEvents.bind(this) });\n\t\t}\n\t},\n\tText: {\n\t\t/**\n\t\t * Register clip\n\t\t * @param {HTMLElement|jQuery} container\n\t\t * @param {string} key\n\t\t * @returns {ClipboardJS|undefined}\n\t\t */\n\t\tregisterCopyClipboard: function(container, key = '.clipboard') {\n\t\t\tif (typeof container !== 'object') {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tcontainer = $(container).get(0);\n\t\t\tlet elements = container.querySelectorAll(key);\n\t\t\tif (elements.length === 0) {\n\t\t\t\telements = key;\n\t\t\t\tcontainer = '';\n\t\t\t}\n\t\t\treturn new ClipboardJS(elements, {\n\t\t\t\tcontainer: container,\n\t\t\t\ttext: function(trigger) {\n\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\ttext: app.vtranslate('JS_NOTIFY_COPY_TEXT'),\n\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t});\n\t\t\t\t\ttrigger = $(trigger);\n\t\t\t\t\tconst element = $(trigger.data('copyTarget'), container);\n\t\t\t\t\tlet val;\n\t\t\t\t\tif (typeof trigger.data('copyType') !== 'undefined') {\n\t\t\t\t\t\tif (element.is('select')) {\n\t\t\t\t\t\t\tval = element.find('option:selected').data(trigger.data('copyType'));\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tval = element.data(trigger.data('copyType'));\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (typeof trigger.data('copy-attribute') !== 'undefined') {\n\t\t\t\t\t\tval = trigger.data(trigger.data('copy-attribute'));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tval = element.val();\n\t\t\t\t\t}\n\t\t\t\t\treturn val;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tEditor: class {\n\t\t\tconstructor(parentElement, params) {\n\t\t\t\tlet elements;\n\t\t\t\tif (typeof parentElement === 'undefined') {\n\t\t\t\t\tparentElement = $('body');\n\t\t\t\t} else {\n\t\t\t\t\tparentElement = $(parentElement);\n\t\t\t\t}\n\t\t\t\tif (parentElement.hasClass('js-editor') && !parentElement.prop('disabled')) {\n\t\t\t\t\telements = parentElement;\n\t\t\t\t} else {\n\t\t\t\t\telements = $('.js-editor:not([disabled])', parentElement);\n\t\t\t\t}\n\t\t\t\tif (elements.length !== 0 && typeof elements !== 'undefined') {\n\t\t\t\t\tthis.isModal = elements.closest('.js-modal-container').length;\n\t\t\t\t\tif (this.isModal) {\n\t\t\t\t\t\tlet self = this;\n\t\t\t\t\t\tthis.progressInstance = $.progressIndicator({\n\t\t\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\t\t\tenabled: true,\n\t\t\t\t\t\t\t\tonBlock: () => {\n\t\t\t\t\t\t\t\t\tself.loadEditor(elements, params);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.loadEditor(elements, params);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/*\n\t\t\t *Function to set the textArea element\n\t\t\t */\n\t\t\tsetElement(element) {\n\t\t\t\tthis.element = $(element);\n\t\t\t\treturn this;\n\t\t\t}\n\n\t\t\t/*\n\t\t\t *Function to get the textArea element\n\t\t\t */\n\t\t\tgetElement() {\n\t\t\t\treturn this.element;\n\t\t\t}\n\n\t\t\t/*\n\t\t\t * Function to return Element's id atrribute value\n\t\t\t */\n\t\t\tgetElementId() {\n\t\t\t\treturn this.getElement().attr('id');\n\t\t\t}\n\n\t\t\t/*\n\t\t\t * Function to get the instance of ckeditor\n\t\t\t */\n\t\t\tgetEditorInstanceFromName() {\n\t\t\t\treturn CKEDITOR.instances[this.getElementId()];\n\t\t\t}\n\n\t\t\t/*\n\t\t\t * Function to load CkEditor\n\t\t\t * @param {HTMLElement|jQuery} element on which CkEditor has to be loaded\n\t\t\t * @param {Object} customConfig custom configurations for ckeditor\n\t\t\t */\n\t\t\tloadEditor(element, customConfig) {\n\t\t\t\tthis.setElement(element);\n\t\t\t\tconst instance = this.getEditorInstanceFromName(),\n\t\t\t\t\tself = this;\n\t\t\t\tlet config = {\n\t\t\t\t\tlanguage: CONFIG.langKey,\n\t\t\t\t\tallowedContent: true,\n\t\t\t\t\textraAllowedContent: 'div{page-break-after*}',\n\t\t\t\t\tformat_tags: 'p;h1;h2;h3;h4;h5;h6;pre;address;div',\n\t\t\t\t\tremoveButtons: '',\n\t\t\t\t\tscayt_autoStartup: false,\n\t\t\t\t\tenterMode: CKEDITOR.ENTER_BR,\n\t\t\t\t\tshiftEnterMode: CKEDITOR.ENTER_P,\n\t\t\t\t\temojiEnabled: false,\n\t\t\t\t\tmentionsEnabled: false,\n\t\t\t\t\ton: {\n\t\t\t\t\t\tinstanceReady: function(evt) {\n\t\t\t\t\t\t\tevt.editor.on('blur', function() {\n\t\t\t\t\t\t\t\tevt.editor.updateElement();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif (self.isModal) {\n\t\t\t\t\t\t\t\tself.progressInstance.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\textraPlugins:\n\t\t\t\t\t\t'colorbutton,pagebreak,colordialog,find,selectall,showblocks,div,print,font,justify,bidi,ckeditor-image-to-base',\n\t\t\t\t\ttoolbar: 'Full',\n\t\t\t\t\ttoolbar_Full: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'clipboard',\n\t\t\t\t\t\t\titems: ['Cut', 'Copy', 'Paste', 'PasteText', 'PasteFromWord', '-', 'Undo', 'Redo']\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ name: 'editing', items: ['Find', 'Replace', '-', 'SelectAll', '-', 'Scayt'] },\n\t\t\t\t\t\t{ name: 'links', items: ['Link', 'Unlink'] },\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'insert',\n\t\t\t\t\t\t\titems: ['ckeditor-image-to-base', 'Table', 'HorizontalRule', 'SpecialChar', 'PageBreak']\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ name: 'tools', items: ['Maximize', 'ShowBlocks'] },\n\t\t\t\t\t\t{ name: 'paragraph', items: ['Outdent', 'Indent', '-', 'Blockquote', 'CreateDiv'] },\n\t\t\t\t\t\t{ name: 'document', items: ['Source', 'Print'] },\n\t\t\t\t\t\t'/',\n\t\t\t\t\t\t{ name: 'styles', items: ['Styles', 'Format', 'Font', 'FontSize'] },\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'basicstyles',\n\t\t\t\t\t\t\titems: ['Bold', 'Italic', 'Underline', 'Strike', 'Subscript', 'Superscript']\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ name: 'colors', items: ['TextColor', 'BGColor'] },\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'paragraph',\n\t\t\t\t\t\t\titems: [\n\t\t\t\t\t\t\t\t'NumberedList',\n\t\t\t\t\t\t\t\t'BulletedList',\n\t\t\t\t\t\t\t\t'-',\n\t\t\t\t\t\t\t\t'JustifyLeft',\n\t\t\t\t\t\t\t\t'JustifyCenter',\n\t\t\t\t\t\t\t\t'JustifyRight',\n\t\t\t\t\t\t\t\t'JustifyBlock',\n\t\t\t\t\t\t\t\t'-',\n\t\t\t\t\t\t\t\t'BidiLtr',\n\t\t\t\t\t\t\t\t'BidiRtl'\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ name: 'basicstyles', items: ['CopyFormatting', 'RemoveFormat'] }\n\t\t\t\t\t],\n\t\t\t\t\ttoolbar_Min: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'basicstyles',\n\t\t\t\t\t\t\titems: ['Bold', 'Italic', 'Underline', 'Strike']\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ name: 'colors', items: ['TextColor', 'BGColor'] },\n\t\t\t\t\t\t{ name: 'tools', items: ['Maximize'] },\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'paragraph',\n\t\t\t\t\t\t\titems: [\n\t\t\t\t\t\t\t\t'NumberedList',\n\t\t\t\t\t\t\t\t'BulletedList',\n\t\t\t\t\t\t\t\t'-',\n\t\t\t\t\t\t\t\t'JustifyLeft',\n\t\t\t\t\t\t\t\t'JustifyCenter',\n\t\t\t\t\t\t\t\t'JustifyRight',\n\t\t\t\t\t\t\t\t'JustifyBlock',\n\t\t\t\t\t\t\t\t'-',\n\t\t\t\t\t\t\t\t'BidiLtr',\n\t\t\t\t\t\t\t\t'BidiRtl'\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ name: 'basicstyles', items: ['CopyFormatting', 'RemoveFormat'] }\n\t\t\t\t\t],\n\t\t\t\t\ttoolbar_Clipboard: [\n\t\t\t\t\t\t{ name: 'document', items: ['Print'] },\n\t\t\t\t\t\t{ name: 'basicstyles', items: ['CopyFormatting', 'RemoveFormat'] },\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'clipboard',\n\t\t\t\t\t\t\titems: ['Cut', 'Copy', 'Paste', 'PasteText', 'PasteFromWord', '-', 'Undo', 'Redo']\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t};\n\t\t\t\tif (typeof customConfig !== 'undefined') {\n\t\t\t\t\tconfig = $.extend(config, customConfig);\n\t\t\t\t}\n\t\t\t\tconfig = Object.assign(config, element.data());\n\t\t\t\tif (config.emojiEnabled) {\n\t\t\t\t\tlet emojiToolbar = { name: 'links', items: ['EmojiPanel'] };\n\t\t\t\t\tif (typeof config.toolbar === 'string') {\n\t\t\t\t\t\tconfig[`toolbar_${config.toolbar}`].push(emojiToolbar);\n\t\t\t\t\t} else if (Array.isArray(config.toolbar)) {\n\t\t\t\t\t\tconfig.toolbar.push(emojiToolbar);\n\t\t\t\t\t}\n\t\t\t\t\tconfig.extraPlugins = config.extraPlugins + ',emoji';\n\t\t\t\t\tconfig.outputTemplate = '{id}';\n\t\t\t\t}\n\t\t\t\tif (config.mentionsEnabled) {\n\t\t\t\t\tconfig.extraPlugins = config.extraPlugins + ',mentions';\n\t\t\t\t\tconfig.mentions = this.registerMentions();\n\t\t\t\t}\n\t\t\t\tif (instance) {\n\t\t\t\t\tCKEDITOR.remove(instance);\n\t\t\t\t}\n\t\t\t\telement.ckeditor(config);\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Register mentions\n\t\t\t * @returns {Array}\n\t\t\t */\n\t\t\tregisterMentions() {\n\t\t\t\tlet minSerchTextLength = app.getMainParams('gsMinLength');\n\t\t\t\treturn [\n\t\t\t\t\t{\n\t\t\t\t\t\tfeed: this.getMentionUsersData.bind(this),\n\t\t\t\t\t\titemTemplate: `<li data-id=\"{id}\" class=\"row no-gutters\">\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"c-img__completion__container\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"{icon} m-auto u-w-fit u-font-size-14px\"></div>\n\t\t\t\t\t\t\t\t\t\t\t\t<img src=\"{image}\" class=\"c-img__completion mr-2\" alt=\"{label}\" title=\"{label}\">\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"col row no-gutters u-overflow-x-hidden\">\n\t\t\t\t\t\t\t\t\t\t\t\t<strong class=\"u-text-ellipsis--no-hover col-12\">{label}</strong>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"fullname col-12 u-text-ellipsis--no-hover text-muted small\">{category}</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</li>`,\n\t\t\t\t\t\toutputTemplate: '<a href=\"#\" data-id=\"@{id}\" data-module=\"{module}\">{label}</a>',\n\t\t\t\t\t\tminChars: minSerchTextLength\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tfeed: App.Fields.Text.getMentionData,\n\t\t\t\t\t\tmarker: '#',\n\t\t\t\t\t\tpattern: /#[wа-я]{1,}|#\\w{3,}$/,\n\t\t\t\t\t\titemTemplate: `<li data-id=\"{id}\" class=\"row no-gutters\">\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"col c-circle-icon mr-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"userIcon-{module}\"></span>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"col row no-gutters u-overflow-x-hidden\">\n\t\t\t\t\t\t\t\t\t\t\t\t<strong class=\"u-text-ellipsis--no-hover col-12\">{label}</strong>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"fullname col-12 u-text-ellipsis--no-hover text-muted small\">{category}</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</li>`,\n\t\t\t\t\t\toutputTemplate: '<a href=\"#\" data-id=\"#{id}\" data-module=\"{module}\">{label}</a>',\n\t\t\t\t\t\tminChars: minSerchTextLength\n\t\t\t\t\t}\n\t\t\t\t];\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Get mention Users data (invoked by ck editor mentions plugin)\n\t\t\t * @param {object} opts\n\t\t\t * @param {function} callback\n\t\t\t */\n\t\t\tgetMentionUsersData(opts, callback) {\n\t\t\t\tApp.Fields.Text.getMentionData(opts, callback, 'owners');\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Completions class for contenteditable html element for records, users and emojis. Params can be passed in data-completions- of contenteditable element or as argument. Default params:\n\t\t * {\n\t\t \t\tcompletionsCollection: {\n\t\t\t\t\t\trecords: true,\n\t\t\t\t\t\tusers: true,\n\t\t\t\t\t\temojis: true\n\t\t\t\t\t}\n\t\t\t}\n\t\t */\n\t\tCompletions: class {\n\t\t\t/**\n\t\t\t * Constructor\n\t\t\t * @param {jQuery} inputDiv - contenteditable div\n\t\t\t * @param params\n\t\t\t */\n\t\t\tconstructor(inputDiv = $('.js-completions').eq(0), params = { emojiPanel: true }) {\n\t\t\t\tif (typeof inputDiv === 'undefined' || inputDiv.length === 0) {\n\t\t\t\t\treturn;\n\t\t\t\t} else if (inputDiv.length === undefined) {\n\t\t\t\t\tinputDiv = $(inputDiv);\n\t\t\t\t}\n\t\t\t\tlet basicParams = {\n\t\t\t\t\tcompletionsCollection: {\n\t\t\t\t\t\trecords: true,\n\t\t\t\t\t\tusers: true,\n\t\t\t\t\t\temojis: true\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tthis.params = Object.assign(basicParams, inputDiv.data(), params);\n\t\t\t\tthis.inputDiv = inputDiv;\n\t\t\t\tthis.collection = [];\n\t\t\t\tif (this.params.completionsCollection.records) {\n\t\t\t\t\tthis.collection.push(this.registerMentionCollection('#'));\n\t\t\t\t}\n\t\t\t\tif (this.params.completionsCollection.users) {\n\t\t\t\t\tthis.collection.push(this.registerMentionCollection('@', 'owners'));\n\t\t\t\t}\n\t\t\t\tif (this.params.completionsCollection.emojis) {\n\t\t\t\t\tthis.collection.push(this.registerEmojiCollection());\n\t\t\t\t}\n\t\t\t\tthis.register(inputDiv);\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Register mention collection for tribute.js\n\t\t\t * @param {string} symbol\n\t\t\t * @param {string} searchModule\n\t\t\t * @returns {{trigger: *, selectTemplate: selectTemplate, values: values, menuItemTemplate: (function(*): string), lookup: string, fillAttr: string}}\n\t\t\t */\n\t\t\tregisterMentionCollection(symbol, searchModule = '-') {\n\t\t\t\tlet self = this;\n\t\t\t\treturn {\n\t\t\t\t\ttrigger: symbol,\n\t\t\t\t\tselectTemplate: function(item) {\n\t\t\t\t\t\tif (this.range.isContentEditable(this.current.element)) {\n\t\t\t\t\t\t\treturn `<a href=\"#\" data-id=\"${symbol + item.original.id}\" data-module=\"${\n\t\t\t\t\t\t\t\titem.original.module\n\t\t\t\t\t\t\t}\">${item.original.label.split('(')[0].trim()}</a>`;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn symbol + item.original.label;\n\t\t\t\t\t},\n\t\t\t\t\tvalues: (text, cb) => {\n\t\t\t\t\t\tif (text.length >= CONFIG.globalSearchAutocompleteMinLength) {\n\t\t\t\t\t\t\tApp.Fields.Text.getMentionData(text, users => cb(users), searchModule);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tmenuItemTemplate: function(item) {\n\t\t\t\t\t\treturn self.mentionTemplate({\n\t\t\t\t\t\t\tid: item.original.id,\n\t\t\t\t\t\t\tmodule: item.original.module,\n\t\t\t\t\t\t\tcategory: item.original.category,\n\t\t\t\t\t\t\timage: item.original.image,\n\t\t\t\t\t\t\tlabel: item.original.label,\n\t\t\t\t\t\t\ticon: item.original.icon\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tlookup: 'label',\n\t\t\t\t\tfillAttr: 'label'\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Register emoji collection for tribute.js\n\t\t\t * @returns {{trigger: string, selectTemplate: selectTemplate, menuItemTemplate: (function(*): string), lookup: string, fillAttr: string, values: Array}}\n\t\t\t */\n\t\t\tregisterEmojiCollection() {\n\t\t\t\treturn {\n\t\t\t\t\ttrigger: ':',\n\t\t\t\t\tselectTemplate: function(item) {\n\t\t\t\t\t\tif (this.range.isContentEditable(this.current.element)) {\n\t\t\t\t\t\t\treturn `<span data-id=\"${item.original.id}\">${item.original.symbol}</span>`;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn item.original.symbol;\n\t\t\t\t\t},\n\t\t\t\t\tmenuItemTemplate: function(item) {\n\t\t\t\t\t\treturn `<span data-id=\"${item.original.id}\">${item.original.symbol} ${item.original.id}</span>`;\n\t\t\t\t\t},\n\t\t\t\t\tlookup: 'id',\n\t\t\t\t\tfillAttr: 'keywords',\n\t\t\t\t\tvalues: (text, cb) => {\n\t\t\t\t\t\tif (text.length >= 2) {\n\t\t\t\t\t\t\tcb(App.emoji);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t/*\n\t\t\t * Mention template\n\t\t\t */\n\t\t\tmentionTemplate(params) {\n\t\t\t\tlet icon = '';\n\t\t\t\tif (params.module !== undefined) {\n\t\t\t\t\ticon = `userIcon-${params.module}`;\n\t\t\t\t}\n\t\t\t\tif (params.icon !== undefined && params.icon !== '') {\n\t\t\t\t\ticon = params.icon;\n\t\t\t\t}\n\t\t\t\tlet avatar = `<div class=\"col c-circle-icon mr-1\">\n\t\t\t\t\t\t\t\t<span class=\"${icon}\"></span>\n\t\t\t\t\t\t\t</div>`;\n\t\t\t\tif (params.image !== undefined && params.image !== '') {\n\t\t\t\t\tavatar = `<div class=\"c-img__completion__container\"><img src=\"${params.image}\" class=\"c-img__completion mr-2\" alt=${params.label}\" title=\"${params.label}\"></div>`;\n\t\t\t\t}\n\t\t\t\treturn `<div data-id=\"${params.id}\" class=\"row no-gutters\">\n\t\t\t\t\t\t\t${avatar}\n\t\t\t\t\t\t\t<div class=\"col row no-gutters u-overflow-x-hidden\">\n\t\t\t\t\t\t\t\t<strong class=\"u-text-ellipsis--no-hover col-12\">${params.label}</strong>\n\t\t\t\t\t\t\t\t<div class=\"fullname col-12 u-text-ellipsis--no-hover text-muted small\">${params.category}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>`;\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Register\n\t\t\t * @param {jQuery} inputDiv - contenteditable div\n\t\t\t */\n\t\t\tregister(inputDiv) {\n\t\t\t\tconst self = this;\n\t\t\t\tthis.completionsCollection = new Tribute({\n\t\t\t\t\tcollection: self.collection,\n\t\t\t\t\tallowSpaces: true,\n\t\t\t\t\treplaceTextSuffix: ''\n\t\t\t\t});\n\t\t\t\tthis.completionsCollection.attach(inputDiv[0]);\n\t\t\t\tif (this.params.completionsTextarea !== undefined) {\n\t\t\t\t\tthis.registerCompletionsTextArea(inputDiv);\n\t\t\t\t}\n\t\t\t\tif (this.params.completionsButtons !== undefined) {\n\t\t\t\t\tthis.registerCompletionsButtons();\n\t\t\t\t}\n\t\t\t\tif (this.params.emojiPanel) {\n\t\t\t\t\tthis.registerEmojiPanel(\n\t\t\t\t\t\tthis.inputDiv,\n\t\t\t\t\t\tthis.inputDiv\n\t\t\t\t\t\t\t.parents()\n\t\t\t\t\t\t\t.eq(3)\n\t\t\t\t\t\t\t.find('.js-completions__emojis')\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tif (App.emoji === undefined) {\n\t\t\t\t\tfetch(`${CONFIG.siteUrl}/vendor/ckeditor/ckeditor/plugins/emoji/emoji.json`)\n\t\t\t\t\t\t.then(response => response.json())\n\t\t\t\t\t\t.then(response => {\n\t\t\t\t\t\t\tApp.emoji = response;\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch(error => console.error('Error:', error));\n\t\t\t\t}\n\t\t\t\tthis.registerTagClick(inputDiv);\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Register completons hidden textarea - useful with forms\n\t\t\t * @param {jQuery} inputDiv - contenteditable div\n\t\t\t */\n\t\t\tregisterCompletionsTextArea(inputDiv) {\n\t\t\t\tlet textarea = inputDiv.siblings(`[name=${inputDiv.attr('id')}]`);\n\t\t\t\tinputDiv\n\t\t\t\t\t.on('focus', function() {\n\t\t\t\t\t\ttextarea.val(inputDiv.html());\n\t\t\t\t\t})\n\t\t\t\t\t.on('blur keyup paste input', function() {\n\t\t\t\t\t\ttextarea.val(inputDiv.html());\n\t\t\t\t\t});\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Register tag click\n\t\t\t * @param inputDiv\n\t\t\t */\n\t\t\tregisterTagClick(inputDiv) {\n\t\t\t\tinputDiv\n\t\t\t\t\t.closest('.js-completions__container')\n\t\t\t\t\t.find('.js-completions__messages')\n\t\t\t\t\t.on('click', '.js-completions__tag', e => {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tinputDiv.append($(e.target).clone());\n\t\t\t\t\t});\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Register completions buttons\n\t\t\t */\n\t\t\tregisterCompletionsButtons() {\n\t\t\t\tlet completionsContainer = this.inputDiv.parents().eq(3);\n\t\t\t\tcompletionsContainer.find('.js-completions__users').on('click', e => {\n\t\t\t\t\tthis.completionsCollection.showMenuForCollection(this.inputDiv[0], 1);\n\t\t\t\t});\n\t\t\t\tcompletionsContainer.find('.js-completions__records').on('click', e => {\n\t\t\t\t\tthis.completionsCollection.showMenuForCollection(this.inputDiv[0], 0);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Register emojipanel library\n\t\t\t * @param {jQuery} inputDiv - contenteditable div\n\t\t\t * @param {jQuery} emojisContainer\n\t\t\t */\n\t\t\tregisterEmojiPanel(inputDiv, emojisContainer) {\n\t\t\t\tnew EmojiPanel({\n\t\t\t\t\tcontainer: '.js-completions__emojis',\n\t\t\t\t\tjson_url: CONFIG.siteUrl + 'libraries/emojipanel/dist/emojis.json'\n\t\t\t\t});\n\t\t\t\temojisContainer.on('click', e => {\n\t\t\t\t\tlet element = $(e.target);\n\t\t\t\t\telement.toggleClass('active');\n\t\t\t\t});\n\t\t\t\temojisContainer.on('click', '.emoji', e => {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tif ($(e.currentTarget).data('char') !== undefined) {\n\t\t\t\t\t\tinputDiv.append(`${$(e.currentTarget).data('char')}`);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\temojisContainer.on('mouseenter', '.emoji', e => {\n\t\t\t\t\tif ($(e.currentTarget).data('name') !== undefined) {\n\t\t\t\t\t\temojisContainer.find('.emoji-hovered').remove();\n\t\t\t\t\t\temojisContainer\n\t\t\t\t\t\t\t.find('footer')\n\t\t\t\t\t\t\t.prepend(\n\t\t\t\t\t\t\t\t`<div class=\"emoji-hovered\">${$(e.currentTarget).data('char') +\n\t\t\t\t\t\t\t\t\t' ' +\n\t\t\t\t\t\t\t\t\t$(e.currentTarget).data('name')}</div>`\n\t\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\temojisContainer.on('clickoutside', () => {\n\t\t\t\t\temojisContainer.removeClass('active');\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Get mention data (invoked by ck editor mentions plugin and tribute.js)\n\t\t * @param {object} opts\n\t\t * @param {function} callback\n\t\t * @param {string} searchModule\n\t\t */\n\t\tgetMentionData(text, callback, searchModule = '-') {\n\t\t\tlet basicSearch = new Vtiger_BasicSearch_Js();\n\t\t\tbasicSearch.reduceNumberResults = app.getMainParams('gsAmountResponse');\n\t\t\tbasicSearch.returnHtml = false;\n\t\t\tbasicSearch.searchModule = searchModule;\n\t\t\tif (typeof text === 'object') {\n\t\t\t\ttext = text.query.toLowerCase();\n\t\t\t}\n\t\t\tif (searchModule === 'owners') {\n\t\t\t\tAppConnector.request({\n\t\t\t\t\taction: 'Search',\n\t\t\t\t\tmode: 'owners',\n\t\t\t\t\tvalue: text\n\t\t\t\t}).done(data => {\n\t\t\t\t\tcallback(data.result);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tbasicSearch.search(text).done(function(data) {\n\t\t\t\t\tdata = JSON.parse(data);\n\t\t\t\t\tlet serverDataFormat = data.result,\n\t\t\t\t\t\treponseDataList = [];\n\t\t\t\t\tfor (let id in serverDataFormat) {\n\t\t\t\t\t\tlet responseData = serverDataFormat[id];\n\t\t\t\t\t\treponseDataList.push(responseData);\n\t\t\t\t\t}\n\t\t\t\t\tcallback(reponseDataList);\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Destroy ckEditor\n\t\t * @param {jQuery} element\n\t\t */\n\t\tdestroyEditor(element) {\n\t\t\tif (typeof CKEDITOR !== 'undefined' && CKEDITOR.instances && element.attr('id') in CKEDITOR.instances) {\n\t\t\t\tCKEDITOR.instances[element.attr('id')].destroy();\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Generate random character\n\t\t * @returns {string}\n\t\t */\n\t\tgenerateRandomChar() {\n\t\t\tconst chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZ';\n\t\t\tconst rand = Math.floor(Math.random() * chars.length);\n\t\t\treturn chars.substring(rand, rand + 1);\n\t\t},\n\n\t\t/**\n\t\t * generate random hash\n\t\t * @returns {string}\n\t\t */\n\t\tgenerateRandomHash(prefix = '') {\n\t\t\tprefix = prefix.toString();\n\t\t\tconst hash =\n\t\t\t\tMath.random()\n\t\t\t\t\t.toString(36)\n\t\t\t\t\t.substr(2, 10) +\n\t\t\t\tMath.random()\n\t\t\t\t\t.toString(36)\n\t\t\t\t\t.substr(2, 10) +\n\t\t\t\tnew Date().valueOf() +\n\t\t\t\tMath.random()\n\t\t\t\t\t.toString(36)\n\t\t\t\t\t.substr(2, 6);\n\t\t\treturn prefix ? prefix + hash : hash;\n\t\t}\n\t},\n\tPicklist: {\n\t\t/**\n\t\t * Function which will convert ui of select boxes.\n\t\t * @params parent - select element\n\t\t * @params view - select2\n\t\t * @params viewParams - select2 params\n\t\t * @returns jquery object list which represents changed select elements\n\t\t */\n\t\tchangeSelectElementView: function(parent, view, viewParams) {\n\t\t\tif (typeof parent === 'undefined') {\n\t\t\t\tparent = $('body');\n\t\t\t}\n\t\t\tif (typeof view === 'undefined') {\n\t\t\t\tconst select2Elements = $('select.select2', parent).toArray();\n\t\t\t\tselect2Elements.forEach(elem => {\n\t\t\t\t\tthis.changeSelectElementView($(elem), 'select2', viewParams);\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t//If view is select2, This will convert the ui of select boxes to select2 elements.\n\t\t\tif (view === 'select2') {\n\t\t\t\treturn App.Fields.Picklist.showSelect2ElementView(parent, viewParams);\n\t\t\t} else {\n\t\t\t\tapp.errorLog(new Error(`Unknown select type [${view}]`));\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Function which will show the select2 element for select boxes . This will use select2 library\n\t\t */\n\t\tshowSelect2ElementView(selectElement, params) {\n\t\t\tlet self = this;\n\t\t\tselectElement = $(selectElement);\n\t\t\tif (typeof params === 'undefined') {\n\t\t\t\tparams = {};\n\t\t\t}\n\t\t\tif ($(selectElement).length > 1) {\n\t\t\t\treturn $(selectElement).each((index, element) => {\n\t\t\t\t\tthis.showSelect2ElementView($(element).eq(0), params);\n\t\t\t\t});\n\t\t\t}\n\t\t\tparams = this.registerParams(selectElement, params);\n\t\t\tif (params.selectLazy && !selectElement.hasClass('js-lazy-select-active')) {\n\t\t\t\treturn App.Fields.Picklist.showLazySelect(selectElement, {\n\t\t\t\t\tlazyElements: app.getMainParams('picklistLimit'),\n\t\t\t\t\tdata: this.registerLazySelectOptions(selectElement),\n\t\t\t\t\tselectParams: params\n\t\t\t\t});\n\t\t\t}\n\t\t\tconst computeDropdownHeight = (e, dropdownContainer) => {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tif (!dropdownContainer.find('.select2-dropdown--above').length) {\n\t\t\t\t\t\tconst dropdownList = dropdownContainer.find('.select2-results > .select2-results__options');\n\t\t\t\t\t\tconst marginBottom = 35;\n\t\t\t\t\t\tconst selectOffsetTop = $(e.currentTarget).offset().top;\n\t\t\t\t\t\tdropdownList.css({\n\t\t\t\t\t\t\t'max-height':\n\t\t\t\t\t\t\t\t$(window).height() -\n\t\t\t\t\t\t\t\tselectOffsetTop -\n\t\t\t\t\t\t\t\tmarginBottom -\n\t\t\t\t\t\t\t\t(dropdownList.offset().top - selectOffsetTop)\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}, 100);\n\t\t\t};\n\t\t\tselectElement.each(function() {\n\t\t\t\tlet select = $(this);\n\t\t\t\tlet htmlBoolParams = select.data('select');\n\t\t\t\tif (htmlBoolParams === 'tags') {\n\t\t\t\t\tparams.tags = true;\n\t\t\t\t\tparams.tokenSeparators = [','];\n\t\t\t\t} else {\n\t\t\t\t\tparams[htmlBoolParams] = true;\n\t\t\t\t}\n\t\t\t\tselect\n\t\t\t\t\t.select2(params)\n\t\t\t\t\t.on('select2:open', e => {\n\t\t\t\t\t\tcomputeDropdownHeight(e, $('.select2-container--open:not(.select2-container--below)'));\n\t\t\t\t\t\tif (select.data('unselecting')) {\n\t\t\t\t\t\t\tselect.removeData('unselecting');\n\t\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t\tselect.each(function() {\n\t\t\t\t\t\t\t\t\t$(this).select2('close');\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}, 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlet instance = $(e.currentTarget).data('select2');\n\t\t\t\t\t\tinstance.$dropdown.css('z-index', 1000002);\n\t\t\t\t\t})\n\t\t\t\t\t.on('select2:unselect', () => {\n\t\t\t\t\t\tselect.data('unselecting', true);\n\t\t\t\t\t});\n\t\t\t\tif (typeof self[params.selectCb] === 'function') {\n\t\t\t\t\tself[params.selectCb](select, params);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn selectElement;\n\t\t},\n\t\t/**\n\t\t * Register params\n\t\t * @param selectElement\n\t\t * @param params\n\t\t * @returns {*}\n\t\t */\n\t\tregisterParams(selectElement, params) {\n\t\t\tif (typeof params.dropdownParent === 'undefined') {\n\t\t\t\tconst modalParent = $(selectElement).closest('.modal-body');\n\t\t\t\tif (modalParent.length) {\n\t\t\t\t\tparams.dropdownParent = modalParent;\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet data = selectElement.data();\n\t\t\tif (data != null) {\n\t\t\t\tparams = $.extend(data, params);\n\t\t\t}\n\t\t\tparams.language = {};\n\t\t\tparams.theme = 'bootstrap';\n\t\t\tconst width = $(selectElement).data('width');\n\t\t\tif (typeof width !== 'undefined') {\n\t\t\t\tparams.width = width;\n\t\t\t} else {\n\t\t\t\tparams.width = '100%';\n\t\t\t}\n\t\t\tparams.containerCssClass = 'form-control w-100';\n\t\t\tconst containerCssClass = selectElement.data('containerCssClass');\n\t\t\tif (typeof containerCssClass !== 'undefined') {\n\t\t\t\tparams.containerCssClass += ' ' + containerCssClass;\n\t\t\t}\n\t\t\tparams.language.noResults = function(msn) {\n\t\t\t\treturn app.vtranslate('JS_NO_RESULTS_FOUND');\n\t\t\t};\n\n\t\t\t// Sort DOM nodes alphabetically in select box.\n\t\t\tif (typeof params['customSortOptGroup'] !== 'undefined' && params['customSortOptGroup']) {\n\t\t\t\t$('optgroup', selectElement).each(function() {\n\t\t\t\t\tvar optgroup = $(this);\n\t\t\t\t\tvar options = optgroup\n\t\t\t\t\t\t.children()\n\t\t\t\t\t\t.toArray()\n\t\t\t\t\t\t.sort(function(a, b) {\n\t\t\t\t\t\t\tvar aText = $(a).text();\n\t\t\t\t\t\t\tvar bText = $(b).text();\n\t\t\t\t\t\t\treturn aText < bText ? 1 : -1;\n\t\t\t\t\t\t});\n\t\t\t\t\t$.each(options, function(i, v) {\n\t\t\t\t\t\toptgroup.prepend(v);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\tdelete params['customSortOptGroup'];\n\t\t\t}\n\n\t\t\t//formatSelectionTooBig param is not defined even it has the maximumSelectionLength,\n\t\t\t//then we should send our custom function for formatSelectionTooBig\n\t\t\tif (\n\t\t\t\ttypeof params.maximumSelectionLength !== 'undefined' &&\n\t\t\t\ttypeof params.formatSelectionTooBig === 'undefined'\n\t\t\t) {\n\t\t\t\t//custom function which will return the maximum selection size exceeds message.\n\t\t\t\tvar formatSelectionExceeds = function(limit) {\n\t\t\t\t\treturn (\n\t\t\t\t\t\tapp.vtranslate('JS_YOU_CAN_SELECT_ONLY') +\n\t\t\t\t\t\t' ' +\n\t\t\t\t\t\tlimit.maximum +\n\t\t\t\t\t\t' ' +\n\t\t\t\t\t\tapp.vtranslate('JS_ITEMS')\n\t\t\t\t\t);\n\t\t\t\t};\n\t\t\t\tparams.language.maximumSelected = formatSelectionExceeds;\n\t\t\t}\n\t\t\tif (typeof selectElement.attr('multiple') !== 'undefined' && !params.placeholder) {\n\t\t\t\tparams.placeholder = app.vtranslate('JS_SELECT_SOME_OPTIONS');\n\t\t\t} else if (!params.placeholder) {\n\t\t\t\tparams.placeholder = app.vtranslate('JS_SELECT_AN_OPTION');\n\t\t\t}\n\t\t\tif (typeof params.templateResult === 'undefined') {\n\t\t\t\tparams.templateResult = function(data, container) {\n\t\t\t\t\tif (data.element && data.element.className) {\n\t\t\t\t\t\t$(container).addClass(data.element.className);\n\t\t\t\t\t}\n\t\t\t\t\tlet actualElement = $(data.element);\n\t\t\t\t\tif (\n\t\t\t\t\t\ttypeof selectElement.data('showAdditionalIcons') !== 'undefined' &&\n\t\t\t\t\t\tactualElement.is('option')\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t'<div class=\"js-element__title d-flex justify-content-between\" data-js=\"appendTo\"><div class=\"u-text-ellipsis--no-hover\">' +\n\t\t\t\t\t\t\tactualElement.text() +\n\t\t\t\t\t\t\t'</div></div>'\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tif (typeof data.name === 'undefined') {\n\t\t\t\t\t\treturn data.text;\n\t\t\t\t\t}\n\t\t\t\t\tif (data.type == 'optgroup') {\n\t\t\t\t\t\treturn '<strong>' + data.name + '</strong>';\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn '<span>' + data.name + '</span>';\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tparams.escapeMarkup = function(markup) {\n\t\t\t\t\treturn markup;\n\t\t\t\t};\n\t\t\t} else if (typeof this[params.templateResult] === 'function') {\n\t\t\t\tparams.templateResult = this[params.templateResult];\n\t\t\t}\n\t\t\tif (typeof params.templateSelection === 'undefined') {\n\t\t\t\tparams.templateSelection = function(data, container) {\n\t\t\t\t\tif (data.element && data.element.className) {\n\t\t\t\t\t\t$(container).addClass(data.element.className);\n\t\t\t\t\t}\n\t\t\t\t\tif (data.text === '') {\n\t\t\t\t\t\treturn data.name;\n\t\t\t\t\t}\n\t\t\t\t\treturn data.text;\n\t\t\t\t};\n\t\t\t} else if (typeof this[params.templateSelection] === 'function') {\n\t\t\t\tparams.templateSelection = this[params.templateSelection];\n\t\t\t}\n\t\t\tif (selectElement.data('ajaxSearch') === 1) {\n\t\t\t\tparams = this.registerAjaxParams(selectElement, params);\n\t\t\t}\n\t\t\treturn params;\n\t\t},\n\t\t/**\n\t\t * Register ajax params\n\t\t * @param selectElement\n\t\t * @param params\n\t\t * @returns {*}\n\t\t */\n\t\tregisterAjaxParams(selectElement, params) {\n\t\t\tparams.tags = false;\n\t\t\tparams.language.searching = function() {\n\t\t\t\treturn app.vtranslate('JS_SEARCHING');\n\t\t\t};\n\t\t\tparams.language.inputTooShort = function(args) {\n\t\t\t\tvar remainingChars = args.minimum - args.input.length;\n\t\t\t\treturn app.vtranslate('JS_INPUT_TOO_SHORT').replace('_LENGTH_', remainingChars);\n\t\t\t};\n\t\t\tparams.language.errorLoading = function() {\n\t\t\t\treturn app.vtranslate('JS_NO_RESULTS_FOUND');\n\t\t\t};\n\t\t\tparams.placeholder = '';\n\t\t\tparams.ajax = {\n\t\t\t\turl: selectElement.data('ajaxUrl'),\n\t\t\t\tdataType: 'json',\n\t\t\t\tdelay: 250,\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdata: function(params) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tvalue: params.term, // search term\n\t\t\t\t\t\tpage: params.page\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t\tprocessResults: function(data, params) {\n\t\t\t\t\tvar items = new Array();\n\t\t\t\t\tif (data.success == true) {\n\t\t\t\t\t\tselectElement.find('option').each(function() {\n\t\t\t\t\t\t\tvar currentTarget = $(this);\n\t\t\t\t\t\t\titems.push({\n\t\t\t\t\t\t\t\tlabel: currentTarget.html(),\n\t\t\t\t\t\t\t\tvalue: currentTarget.val()\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t\titems = items.concat(data.result.items);\n\t\t\t\t\t}\n\t\t\t\t\treturn {\n\t\t\t\t\t\tresults: items,\n\t\t\t\t\t\tpagination: {\n\t\t\t\t\t\t\tmore: false\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t\tcache: false\n\t\t\t};\n\t\t\tparams.escapeMarkup = function(markup) {\n\t\t\t\tif (markup !== 'undefined') return markup;\n\t\t\t};\n\t\t\tvar minimumInputLength = 3;\n\t\t\tif (selectElement.data('minimumInput') !== 'undefined') {\n\t\t\t\tminimumInputLength = selectElement.data('minimumInput');\n\t\t\t}\n\t\t\tparams.minimumInputLength = minimumInputLength;\n\t\t\tparams.templateResult = function(data) {\n\t\t\t\tif (typeof data.name === 'undefined') {\n\t\t\t\t\treturn data.text;\n\t\t\t\t}\n\t\t\t\tif (data.type == 'optgroup') {\n\t\t\t\t\treturn '<strong>' + data.name + '</strong>';\n\t\t\t\t} else {\n\t\t\t\t\treturn '<span>' + data.name + '</span>';\n\t\t\t\t}\n\t\t\t};\n\t\t\tparams.templateSelection = function(data, container) {\n\t\t\t\tif (data.text === '') {\n\t\t\t\t\treturn data.name;\n\t\t\t\t}\n\t\t\t\treturn data.text;\n\t\t\t};\n\t\t\treturn params;\n\t\t},\n\t\t/**\n\t\t * Prepend template with a flag, function is called select2\n\t\t * @param optionData\n\t\t * @returns {Mixed|jQuery|HTMLElement}\n\t\t */\n\t\tprependDataTemplate(optionData) {\n\t\t\tlet template = optionData.text;\n\t\t\tif (optionData.id !== undefined && optionData.id !== '') {\n\t\t\t\ttemplate = $(optionData.element.dataset.template);\n\t\t\t\tif (optionData.element.dataset.state !== undefined) {\n\t\t\t\t\t//check if element has icons with different states\n\t\t\t\t\tif (optionData.element.dataset.state === 'active') {\n\t\t\t\t\t\ttemplate\n\t\t\t\t\t\t\t.find('.js-select-option-event')\n\t\t\t\t\t\t\t.removeClass(optionData.element.dataset.iconInactive)\n\t\t\t\t\t\t\t.addClass(optionData.element.dataset.iconActive);\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttemplate\n\t\t\t\t\t\t\t.find('.js-select-option-event')\n\t\t\t\t\t\t\t.removeClass(optionData.element.dataset.iconActive)\n\t\t\t\t\t\t\t.addClass(optionData.element.dataset.iconInactive);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn template;\n\t\t},\n\t\t/**\n\t\t * Register select sortable\n\t\t * @param select\n\t\t * @param params\n\t\t */\n\t\tregisterSelectSortable(select, params) {\n\t\t\tthis.sortSelectOptions(select);\n\t\t\tthis.registerSortEvent(select, params.sortableCb);\n\t\t},\n\t\t/**\n\t\t * Sort elements (options) in select by data-sort-index\n\t\t * @param {jQuery} select2 element\n\t\t */\n\t\tsortSelectOptions(select) {\n\t\t\tselect\n\t\t\t\t.find('option[data-sort-index]')\n\t\t\t\t.sort((a, b) => {\n\t\t\t\t\treturn $(b).data('sort-index') < $(a).data('sort-index') ? 1 : -1;\n\t\t\t\t})\n\t\t\t\t.appendTo(select);\n\t\t},\n\t\t/**\n\t\t * Register select drag and drop sorting\n\t\t * @param {jQuery} select2 element\n\t\t * @param {function} callback function\n\t\t */\n\t\tregisterSortEvent(select, cb = () => {}) {\n\t\t\tlet ul = select.next('.select2-container').first('ul.select2-selection__rendered');\n\t\t\tul.sortable({\n\t\t\t\titems: 'li:not(.select2-search__field)',\n\t\t\t\ttolerance: 'pointer',\n\t\t\t\tstop: function() {\n\t\t\t\t\t$(\n\t\t\t\t\t\tul\n\t\t\t\t\t\t\t.find('.select2-selection__choice')\n\t\t\t\t\t\t\t.get()\n\t\t\t\t\t\t\t.reverse()\n\t\t\t\t\t).each(function() {\n\t\t\t\t\t\tlet optionTitle = $(this).attr('title');\n\t\t\t\t\t\tselect.find('option').each(function() {\n\t\t\t\t\t\t\tif ($(this).text() === optionTitle) {\n\t\t\t\t\t\t\t\tselect.prepend($(this));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t\tcb(select);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register icons events in select2 options\n\t\t * @param selectElement\n\t\t */\n\t\tregisterIconsEvents(selectElement) {\n\t\t\tselectElement.on('select2:selecting', event => {\n\t\t\t\tlet currentTarget = $(event.params.args.originalEvent.target);\n\t\t\t\tif (!currentTarget.hasClass('js-select-option-event') && !currentTarget.is('path')) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tevent.preventDefault();\n\t\t\t\tif (currentTarget.is('path')) {\n\t\t\t\t\t//svg target fix\n\t\t\t\t\tcurrentTarget = currentTarget.closest('.js-select-option-event');\n\t\t\t\t}\n\t\t\t\tlet currentElementData = $(event.params.args.data.element).data(),\n\t\t\t\t\toptionElement = $(event.params.args.data.element),\n\t\t\t\t\tprogressIndicatorElement = $.progressIndicator({ blockInfo: { enabled: true } });\n\t\t\t\tAppConnector.request(currentElementData.url)\n\t\t\t\t\t.done(data => {\n\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tlet response = data.result;\n\t\t\t\t\t\tif (response && response.result) {\n\t\t\t\t\t\t\tif (optionElement.attr('data-state') === 'active') {\n\t\t\t\t\t\t\t\toptionElement.attr('data-state', 'inactive');\n\t\t\t\t\t\t\t\tcurrentTarget.toggleClass(\n\t\t\t\t\t\t\t\t\tcurrentElementData.iconActive + ' ' + currentElementData.iconInactive\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\toptionElement.attr('data-state', 'active');\n\t\t\t\t\t\t\t\tcurrentTarget.toggleClass(\n\t\t\t\t\t\t\t\t\tcurrentElementData.iconInactive + ' ' + currentElementData.iconActive\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (response.message) {\n\t\t\t\t\t\t\t\tVtiger_Helper_Js.showPnotify({ text: response.message, type: 'success' });\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (response && response.message) {\n\t\t\t\t\t\t\tVtiger_Helper_Js.showPnotify({ text: response.message });\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function() {\n\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Show lazy select based on data passed in js.\n\t\t *\n\t\t * @param   {object}  selectElement  jQuery\n\t\t * @param   {object}  params         contains selectParams object, lazyElements number, data array\n\t\t */\n\t\tshowLazySelect(selectElement, params) {\n\t\t\t$.fn.select2.amd.require(['select2/data/array', 'select2/utils'], (ArrayData, Utils) => {\n\t\t\t\tfunction CustomData($element, params) {\n\t\t\t\t\tCustomData.__super__.constructor.call(this, $element, params);\n\t\t\t\t}\n\t\t\t\tUtils.Extend(CustomData, ArrayData);\n\t\t\t\tCustomData.prototype.query = (options, callback) => {\n\t\t\t\t\tlet results = [];\n\t\t\t\t\tif (options.term && options.term !== '') {\n\t\t\t\t\t\tresults = params.data.filter(e => {\n\t\t\t\t\t\t\treturn e.text.toUpperCase().indexOf(options.term.toUpperCase()) >= 0;\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresults = params.data;\n\t\t\t\t\t}\n\t\t\t\t\tif (!('page' in options)) {\n\t\t\t\t\t\toptions.page = 1;\n\t\t\t\t\t}\n\t\t\t\t\tlet data = {};\n\t\t\t\t\tdata.results = results.slice(\n\t\t\t\t\t\t(options.page - 1) * params.lazyElements,\n\t\t\t\t\t\toptions.page * params.lazyElements\n\t\t\t\t\t);\n\t\t\t\t\tdata.pagination = {};\n\t\t\t\t\tdata.pagination.more = options.page * params.lazyElements < results.length;\n\t\t\t\t\tcallback(data);\n\t\t\t\t};\n\t\t\t\tparams.selectParams = Object.assign(params.selectParams, {\n\t\t\t\t\tajax: {},\n\t\t\t\t\tdataAdapter: CustomData\n\t\t\t\t});\n\t\t\t\tselectElement.addClass('js-lazy-select-active');\n\t\t\t\tthis.showSelect2ElementView(selectElement, params.selectParams);\n\t\t\t\tlet selectedOption = selectElement.data('selected-value');\n\t\t\t\tif (selectedOption) {\n\t\t\t\t\tlet text = selectedOption;\n\t\t\t\t\tif (selectElement.data('fieldinfo').picklistvalues.hasOwnProperty(selectedOption)) {\n\t\t\t\t\t\ttext = selectElement.data('fieldinfo').picklistvalues[selectedOption];\n\t\t\t\t\t}\n\t\t\t\t\tthis.createSelectedOption(selectElement, text, selectedOption);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register lazy select options\n\t\t *\n\t\t * @param   {object}  selectElement  [selectElement description]\n\t\t *\n\t\t * @return  {object}                 [return description]\n\t\t */\n\t\tregisterLazySelectOptions(selectElement) {\n\t\t\tlet options = [];\n\t\t\tif (selectElement.data('fieldinfo') && selectElement.data('fieldinfo').picklistvalues) {\n\t\t\t\toptions = $.map(selectElement.data('fieldinfo').picklistvalues, function(val, key) {\n\t\t\t\t\treturn { id: key, text: val };\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\toptions = $.map(selectElement.find('option'), item => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tid: item.value,\n\t\t\t\t\t\telement: item,\n\t\t\t\t\t\ttext: item.text,\n\t\t\t\t\t\tselected: item.selected,\n\t\t\t\t\t\tdisabled: item.disabled\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn options;\n\t\t},\n\t\t/**\n\t\t * Set value.\n\t\t *\n\t\t * @param   {object}  selectElement  [selectElement description]\n\t\t * @param   {string}  searchValue\n\t\t * @param   {string}  type           value|text|all\n\t\t *\n\t\t * @return  {boolean|string}         false or set value\n\t\t */\n\t\tsetValue(selectElement, searchValue, type = 'value') {\n\t\t\tconst option = this.findOption(selectElement, searchValue, type);\n\t\t\tif (!option) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (selectElement.hasClass('js-lazy-select-active')) {\n\t\t\t\tthis.createSelectedOption(selectElement, option.text, option.value);\n\t\t\t} else {\n\t\t\t\tselectElement.val(option.value).trigger('change');\n\t\t\t}\n\t\t\treturn option.value;\n\t\t},\n\t\t/**\n\t\t * Find option.\n\t\t *\n\t\t * @param   {object}  selectElement  [selectElement description]\n\t\t * @param   {string}  searchValue\n\t\t * @param   {string}  type           value|text|all\n\t\t *\n\t\t * @return  {boolean|object}         false or option object\n\t\t */\n\t\tfindOption(selectElement, searchValue, type = 'value') {\n\t\t\tlet foundOption = false;\n\t\t\tconst selectValues = this.getSelectOptions(selectElement);\n\t\t\tconst getFieldValueFromText = () =>\n\t\t\t\tObject.keys(selectValues).find(key => selectValues[key] === searchValue);\n\t\t\tconst valueExists = () => selectValues.hasOwnProperty(searchValue);\n\t\t\tconst createOption = () => {\n\t\t\t\treturn { text: selectValues[foundOption], value: foundOption };\n\t\t\t};\n\t\t\tswitch (type) {\n\t\t\t\tcase 'value':\n\t\t\t\t\tif (valueExists()) {\n\t\t\t\t\t\tfoundOption = searchValue;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'text':\n\t\t\t\t\tfoundOption = getFieldValueFromText();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'all':\n\t\t\t\t\tif (valueExists()) {\n\t\t\t\t\t\tfoundOption = searchValue;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfoundOption = getFieldValueFromText();\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\treturn foundOption ? createOption() : false;\n\t\t},\n\t\t/**\n\t\t * Get select options\n\t\t *\n\t\t * @param   {object}  selectElement  jQuery\n\t\t *\n\t\t * @return  {object}                 [return description]\n\t\t */\n\t\tgetSelectOptions(selectElement) {\n\t\t\tif (selectElement.data('fieldinfo') && selectElement.data('fieldinfo').picklistvalues) {\n\t\t\t\treturn selectElement.data('fieldinfo').picklistvalues;\n\t\t\t} else {\n\t\t\t\tlet optionsObject = {};\n\t\t\t\tselectElement.find('option').each((i, element) => {\n\t\t\t\t\toptionsObject[element.value] = element.text;\n\t\t\t\t});\n\t\t\t\treturn optionsObject;\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Create selected option\n\t\t *\n\t\t * @param   {object}  selectElement  jQuery\n\t\t * @param   {string}  text\n\t\t * @param   {string}  value\n\t\t */\n\t\tcreateSelectedOption(selectElement, text, value) {\n\t\t\tconst newOption = new Option(text, value, true, true);\n\t\t\tselectElement.append(newOption).trigger('change');\n\t\t}\n\t},\n\tMultiImage: {\n\t\tcurrentFileUploads: 0,\n\t\tregister(container) {\n\t\t\t$('.js-multi-image', container).each(function() {\n\t\t\t\tnew MultiImage($(this));\n\t\t\t});\n\t\t}\n\t},\n\tMultiEmail: {\n\t\tregister(container) {\n\t\t\tcontainer.find('.js-multi-email').each((index, element) => {\n\t\t\t\tconst inputElement = element;\n\t\t\t\t$(element)\n\t\t\t\t\t.find('.js-email')\n\t\t\t\t\t.each((index, element) => {\n\t\t\t\t\t\t$(element).on('change', e => {\n\t\t\t\t\t\t\tApp.Fields.MultiEmail.parseToJSON($(inputElement));\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t$(element)\n\t\t\t\t\t.find('.js-multi-email-add-item')\n\t\t\t\t\t.each((index, element) => {\n\t\t\t\t\t\t$(element).on('click', e => {\n\t\t\t\t\t\t\tApp.Fields.MultiEmail.addEmail($(inputElement));\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t$(element)\n\t\t\t\t\t.find('.js-remove-item')\n\t\t\t\t\t.each((index, element) => {\n\t\t\t\t\t\t$(element).on('click', e => {\n\t\t\t\t\t\t\tApp.Fields.MultiEmail.removeEmail($(e.target), $(inputElement));\n\t\t\t\t\t\t\tApp.Fields.MultiEmail.parseToJSON(container);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t$(element)\n\t\t\t\t\t.find('input.js-checkbox')\n\t\t\t\t\t.each((index, element) => {\n\t\t\t\t\t\t$(element).on('change', e => {\n\t\t\t\t\t\t\tApp.Fields.MultiEmail.toggleCheckBox($(e.target));\n\t\t\t\t\t\t\tApp.Fields.MultiEmail.parseToJSON(container);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Convert data to json\n\t\t * @param {jQuery} element\n\t\t */\n\t\tparseToJSON(element) {\n\t\t\tlet allFields = $(element).find('[class*=js-multi-email-row]');\n\t\t\tlet arr = [];\n\t\t\tlet arrayLength = allFields.length;\n\t\t\tfor (let i = 0; i < arrayLength; ++i) {\n\t\t\t\tlet inputField = $(allFields[i])\n\t\t\t\t\t.find('input.js-email')\n\t\t\t\t\t.eq(0);\n\t\t\t\tlet checkboxField = $(allFields[i])\n\t\t\t\t\t.find('input.js-checkbox')\n\t\t\t\t\t.eq(0);\n\t\t\t\tif (inputField.val() !== '') {\n\t\t\t\t\tarr.push({\n\t\t\t\t\t\te: $(inputField).val(),\n\t\t\t\t\t\to: $(checkboxField).is(':checked') ? 1 : 0\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\t$(element)\n\t\t\t\t.find('input.js-hidden-email')\n\t\t\t\t.val(JSON.stringify(arr));\n\t\t},\n\t\t/**\n\t\t * Invoked after clicking the add button\n\t\t * @param {jQuery} container\n\t\t */\n\t\taddEmail(container) {\n\t\t\tlet newField = container\n\t\t\t\t.find('[class*=js-multi-email-row]')\n\t\t\t\t.eq(0)\n\t\t\t\t.clone(false, false);\n\t\t\tlet cnt = container.find('[class*=js-multi-email-row]').length + 1;\n\t\t\tnewField.removeClass('js-multi-email-row-1');\n\t\t\tnewField.addClass('js-multi-email-row-' + cnt);\n\t\t\tnewField.find('input.js-email').val('');\n\t\t\tnewField.find('input.js-checkbox').removeAttr('checked');\n\t\t\tnewField.find('label.js-label-checkbox').removeClass('active');\n\t\t\tnewField\n\t\t\t\t.find('span.far')\n\t\t\t\t.removeClass('fa-check-square')\n\t\t\t\t.addClass('fa-square');\n\t\t\tnewField\n\t\t\t\t.find('.js-remove-item')\n\t\t\t\t.eq(0)\n\t\t\t\t.on('click', e => {\n\t\t\t\t\tApp.Fields.MultiEmail.removeEmail($(e.target), container);\n\t\t\t\t\tApp.Fields.MultiEmail.parseToJSON(container);\n\t\t\t\t});\n\t\t\tnewField\n\t\t\t\t.find('input.js-checkbox')\n\t\t\t\t.eq(0)\n\t\t\t\t.on('change', e => {\n\t\t\t\t\tApp.Fields.MultiEmail.toggleCheckBox($(e.target));\n\t\t\t\t\tApp.Fields.MultiEmail.parseToJSON(container);\n\t\t\t\t});\n\t\t\tnewField\n\t\t\t\t.find('input.js-email')\n\t\t\t\t.eq(0)\n\t\t\t\t.on('change', e => {\n\t\t\t\t\tApp.Fields.MultiEmail.parseToJSON(container);\n\t\t\t\t});\n\t\t\tnewField.insertAfter(container.find('[class*=js-multi-email-row]').last());\n\t\t},\n\t\t/**\n\t\t * Invoked after clicking the remove button\n\t\t * @param {jQuery} container\n\t\t */\n\t\tremoveEmail(element, container) {\n\t\t\tif (container.find('[class*=js-multi-email-row]').length > 1) {\n\t\t\t\telement.closest('[class*=js-multi-email-row]').remove();\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Toggle checkbox\n\t\t * @param {jQuery} element\n\t\t */\n\t\ttoggleCheckBox(element) {\n\t\t\tif (element.is(':checked')) {\n\t\t\t\telement\n\t\t\t\t\t.attr('checked', 'checked')\n\t\t\t\t\t.closest('.js-multi-email__checkbox')\n\t\t\t\t\t.find('.js-multi-email__checkbox__icon')\n\t\t\t\t\t.removeClass('fa-square')\n\t\t\t\t\t.addClass('fa-check-square');\n\t\t\t} else {\n\t\t\t\telement\n\t\t\t\t\t.removeAttr('checked')\n\t\t\t\t\t.closest('.js-multi-email__checkbox')\n\t\t\t\t\t.find('.js-multi-email__checkbox__icon')\n\t\t\t\t\t.removeClass('fa-check-square')\n\t\t\t\t\t.addClass('fa-square');\n\t\t\t}\n\t\t}\n\t},\n\tMultiDependField: {\n\t\t/**\n\t\t * Register function\n\t\t * @param {jQuery} container\n\t\t */\n\t\tregister(container) {\n\t\t\tcontainer.find('.js-multi-field').each((index, element) => {\n\t\t\t\tconst inputElement = $(element);\n\t\t\t\tconst fields = inputElement.find('.js-multi-field-val').data('fields');\n\t\t\t\tinputElement.find('.js-multi-field-add-item').on('click', e => {\n\t\t\t\t\tApp.Fields.MultiDependField.addRow(inputElement, fields);\n\t\t\t\t});\n\t\t\t\tApp.Fields.MultiDependField.registerRow(inputElement, fields);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register row\n\t\t * @param {jQuery} inputElement\n\t\t * @param {Object} fields\n\t\t */\n\t\tregisterRow(inputElement, fields) {\n\t\t\tfor (let i in fields) {\n\t\t\t\tinputElement.find('[name=\"' + fields[i] + '\"]').on('change', e => {\n\t\t\t\t\tApp.Fields.MultiDependField.parseToJson(inputElement, fields);\n\t\t\t\t});\n\t\t\t}\n\t\t\tinputElement.find('.js-remove-item').on('click', e => {\n\t\t\t\tApp.Fields.MultiDependField.removeRow($(e.target), inputElement);\n\t\t\t\tApp.Fields.MultiDependField.parseToJson(inputElement.closest('.js-multi-field'), fields);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Invoked after clicking the remove button\n\t\t * @param {jQuery} element\n\t\t * @param {jQuery} container\n\t\t */\n\t\tremoveRow(element, container) {\n\t\t\tif (container.find('.js-multi-field-row').length > 1) {\n\t\t\t\telement.closest('.js-multi-field-row').remove();\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Convert data to json\n\t\t * @param {jQuery} element\n\t\t * @param {Object} fields\n\t\t */\n\t\tparseToJson(element, fields) {\n\t\t\tlet arr = [];\n\t\t\tlet allFields = $(element).find('.js-multi-field-row');\n\t\t\tlet arrayLength = allFields.length;\n\t\t\tfor (let i = 0; i < arrayLength; ++i) {\n\t\t\t\tlet partData = {},\n\t\t\t\t\tskip = false;\n\t\t\t\tfor (let k in fields) {\n\t\t\t\t\tpartData[fields[k]] = $(allFields[i])\n\t\t\t\t\t\t.find('[name=\"' + fields[k] + '\"]')\n\t\t\t\t\t\t.val();\n\t\t\t\t\tif (k == 0 && partData[fields[k]] === '') {\n\t\t\t\t\t\tskip = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (!skip) {\n\t\t\t\t\tarr.push(partData);\n\t\t\t\t}\n\t\t\t}\n\t\t\t$(element)\n\t\t\t\t.find('input.js-multi-field-val')\n\t\t\t\t.val(JSON.stringify(arr));\n\t\t},\n\t\t/**\n\t\t * Invoked after clicking the add button\n\t\t * @param {jQuery} container\n\t\t * @param {Object} fields\n\t\t */\n\t\taddRow(container, fields) {\n\t\t\tlet newField;\n\t\t\tlet lastField = container.find('.js-multi-field-row').last();\n\t\t\tlet selectFields = lastField.find('select.select2');\n\t\t\tif (selectFields.length) {\n\t\t\t\tselectFields\n\t\t\t\t\t.select2('destroy')\n\t\t\t\t\t.removeAttr('data-select2-id')\n\t\t\t\t\t.find('option')\n\t\t\t\t\t.removeAttr('data-select2-id');\n\t\t\t\tnewField = lastField.clone(false, false);\n\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(lastField.find('select.select2'));\n\t\t\t} else {\n\t\t\t\tnewField = lastField.clone(false, false);\n\t\t\t}\n\t\t\tfor (let i in fields) {\n\t\t\t\tnewField.find('[name=\"' + fields[i] + '\"]').val('');\n\t\t\t}\n\t\t\tnewField.insertAfter(container.find('.js-multi-field-row').last());\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(newField.find('select.select2'));\n\t\t\tApp.Fields.Date.register(newField);\n\t\t\tApp.Fields.MultiDependField.registerRow(container, fields);\n\t\t}\n\t},\n\tDependentSelect: {\n\t\t/**\n\t\t * Get options for select from array of items (exclude children)\n\t\t * @param {Array} data {value,text,selected, children => data[]}\n\t\t * @returns {string}\n\t\t */\n\t\tgenerateOptionsFromData(data) {\n\t\t\tlet html = '';\n\t\t\tfor (let item of data) {\n\t\t\t\tlet selected = false;\n\t\t\t\tif (typeof item.selected !== 'undefined' && item.selected) {\n\t\t\t\t\tselected = true;\n\t\t\t\t}\n\t\t\t\thtml += `<option value=${item.value}${selected ? ' selected' : ''}>${item.text}</option>`;\n\t\t\t}\n\t\t\treturn html;\n\t\t},\n\t\t/**\n\t\t * Register dependent selects\n\t\t *\n\t\t * @param {jQuery} container with data- options:\n\t\t * data-slave: selector for slave element\n\t\t * data-data: array of options with children elements for slave select (see getOptions for data format)\n\t\t * data-sort: do we want to sort slave options by text when master has two items selected? if not - just append options to slave\n\t\t */\n\t\tregister(container) {\n\t\t\tif (typeof container === 'undefined' || typeof container.length === 'undefined' || !container.length) {\n\t\t\t\treturn app.errorLog('Dependend select field container is missing.');\n\t\t\t}\n\t\t\tcontainer.each(function() {\n\t\t\t\tconst masterSelect = $(this),\n\t\t\t\t\tslaveSelect = $(masterSelect.data('slave')),\n\t\t\t\t\tdata = masterSelect.data('data');\n\t\t\t\tif (!slaveSelect.length) {\n\t\t\t\t\treturn app.errorLog('Could not find slave select element (data-slave attribute)');\n\t\t\t\t}\n\t\t\t\tif (!data) {\n\t\t\t\t\treturn app.errorLog('Could not load data (data-data attribute)');\n\t\t\t\t}\n\t\t\t\tmasterSelect.on('change', e => {\n\t\t\t\t\tlet values = $(e.target).val();\n\t\t\t\t\tif (!Array.isArray(values)) {\n\t\t\t\t\t\tvalues = [values];\n\t\t\t\t\t}\n\t\t\t\t\tlet children = [];\n\t\t\t\t\tfor (let value of values) {\n\t\t\t\t\t\tfor (let item of data) {\n\t\t\t\t\t\t\tif (item.value === value) {\n\t\t\t\t\t\t\t\tif (typeof item.children !== 'undefined') {\n\t\t\t\t\t\t\t\t\titem.children.forEach(child => {\n\t\t\t\t\t\t\t\t\t\tchildren.push(child);\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (masterSelect.data('sort')) {\n\t\t\t\t\t\tchildren.sort((a, b) => {\n\t\t\t\t\t\t\treturn a.text.localeCompare(b.text);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tslaveSelect.html(App.Fields.DependentSelect.generateOptionsFromData(children));\n\t\t\t\t});\n\t\t\t\tmasterSelect.html(App.Fields.DependentSelect.generateOptionsFromData(data));\n\t\t\t});\n\t\t}\n\t},\n\tGantt: {\n\t\tregister(container, data) {\n\t\t\treturn new GanttField(container, data);\n\t\t}\n\t},\n\tInteger: {\n\t\t/**\n\t\t * Function returns the integer in user specified format.\n\t\t * @param {number} value\n\t\t * @param {int} numberOfDecimal\n\t\t * @returns {string}\n\t\t */\n\t\tformatToDisplay(value) {\n\t\t\tif (!value) {\n\t\t\t\tvalue = 0;\n\t\t\t}\n\t\t\tlet groupSeparator = CONFIG.currencyGroupingSeparator;\n\t\t\tlet groupingPattern = CONFIG.currencyGroupingPattern;\n\t\t\tvalue = parseFloat(value).toFixed(1);\n\t\t\tlet integer = value.toString().split('.')[0];\n\t\t\tif (integer.length > 3) {\n\t\t\t\tif (groupingPattern === '123,456,789') {\n\t\t\t\t\tinteger = integer.replace(/(\\d)(?=(\\d\\d\\d)+(?!\\d))/g, '$1' + groupSeparator);\n\t\t\t\t} else if (groupingPattern === '123456,789') {\n\t\t\t\t\tinteger = integer.slice(0, -3) + groupSeparator + integer.slice(-3);\n\t\t\t\t} else if (groupingPattern === '12,34,56,789') {\n\t\t\t\t\tinteger =\n\t\t\t\t\t\tinteger.slice(0, -3).replace(/(\\d)(?=(\\d\\d)+(?!\\d))/g, '$1' + groupSeparator) +\n\t\t\t\t\t\tgroupSeparator +\n\t\t\t\t\t\tinteger.slice(-3);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn integer;\n\t\t}\n\t},\n\tDouble: {\n\t\t/**\n\t\t * Function returns the currency in user specified format.\n\t\t * @param {number} value\n\t\t * @param {boolean} numberOfDecimal\n\t\t * @param {int} numberOfDecimal\n\t\t * @returns {string}\n\t\t */\n\t\tformatToDisplay(value, fixed = true, numberOfDecimal = CONFIG.noOfCurrencyDecimals) {\n\t\t\tif (!value) {\n\t\t\t\tvalue = 0;\n\t\t\t}\n\t\t\tlet strDecimal = value.toString().split('.')[1];\n\t\t\tlet numberOfZerosAtTheEnd = 0;\n\t\t\tif (typeof strDecimal !== 'undefined') {\n\t\t\t\tfor (let i = strDecimal.length - 1; i > 0; --i) {\n\t\t\t\t\tif (strDecimal[i] == '0') {\n\t\t\t\t\t\tnumberOfZerosAtTheEnd++;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tvalue = parseFloat(value);\n\t\t\tif (fixed) {\n\t\t\t\tvalue = value.toFixed(numberOfDecimal);\n\t\t\t}\n\t\t\tlet splittedFloat = value.toString().split('.');\n\t\t\tlet integer = splittedFloat[0];\n\t\t\tif (integer !== '-0' && integer !== '0') {\n\t\t\t\tinteger = App.Fields.Integer.formatToDisplay(integer);\n\t\t\t}\n\t\t\tlet decimal = splittedFloat[1];\n\t\t\tif (numberOfDecimal) {\n\t\t\t\tif (!CONFIG.truncateTrailingZeros && decimal) {\n\t\t\t\t\tfor (let i = 0; i < numberOfZerosAtTheEnd && decimal.length < numberOfDecimal; ++i) {\n\t\t\t\t\t\tdecimal += '0';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (decimal) {\n\t\t\t\t\treturn integer + CONFIG.currencyDecimalSeparator + decimal;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn integer;\n\t\t},\n\t\t/**\n\t\t * Function to get value for db format.\n\t\t * @param {string} value\n\t\t * @returns {number}\n\t\t */\n\t\tformatToDb(value) {\n\t\t\tif (value == undefined || value == '') {\n\t\t\t\tvalue = 0;\n\t\t\t}\n\t\t\tvalue = value.toString();\n\t\t\tvalue = value.split(CONFIG.currencyGroupingSeparator).join('');\n\t\t\tvalue = value.replace(/\\s/g, '').replace(CONFIG.currencyDecimalSeparator, '.');\n\t\t\treturn parseFloat(value);\n\t\t}\n\t},\n\tTree: {\n\t\tregister(container) {\n\t\t\tcontainer.on('click', '.js-tree-modal', function(e) {\n\t\t\t\tlet element = $(e.target),\n\t\t\t\t\tparentElem = element.closest('.js-tree-container'),\n\t\t\t\t\tsourceFieldElement = parentElem.find('input[class=\"sourceField\"]'),\n\t\t\t\t\tfieldDisplayElement = parentElem.find(\n\t\t\t\t\t\t'input[name=\"' + sourceFieldElement.attr('name') + '_display\"]'\n\t\t\t\t\t);\n\t\t\t\tAppConnector.request({\n\t\t\t\t\tmodule: sourceFieldElement.data('modulename'),\n\t\t\t\t\tview: 'TreeModal',\n\t\t\t\t\ttemplate: sourceFieldElement.data('treetemplate'),\n\t\t\t\t\tfieldName: sourceFieldElement.attr('name'),\n\t\t\t\t\tmultiple: sourceFieldElement.data('multiple'),\n\t\t\t\t\tvalue: sourceFieldElement.val()\n\t\t\t\t}).done(function(requestData) {\n\t\t\t\t\tapp.modalEvents['treeModal'] = function(modal, instance) {\n\t\t\t\t\t\tinstance.setSelectEvent(responseData => {\n\t\t\t\t\t\t\tsourceFieldElement.val(responseData.id);\n\t\t\t\t\t\t\tfieldDisplayElement.val(responseData.name).attr('readonly', true);\n\t\t\t\t\t\t});\n\t\t\t\t\t};\n\t\t\t\t\tapp.showModalWindow(requestData, { modalId: 'treeModal' });\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t},\n\t/**\n\t * TimePeriod class\n\t *\n\t * Save value as time period in 00:m format where '0' is a number of units\n\t * ':' is just separator\n\t * and 'm' is time scale/period in php date format - available formats are [m, d, H, i, s]\n\t * @example 10:i = 10 minutes, 2:m = 2 months, 20:H = 20 hours and so on...\n\t */\n\tTimePeriod: class TimePeriod {\n\t\tconstructor(container) {\n\t\t\tthis.container = container;\n\t\t\tthis.value = container.val();\n\t\t\tif (this.value) {\n\t\t\t\tconst split = this.value.split(':');\n\t\t\t\tthis.time = Number(split[0]);\n\t\t\t\tthis.period = split[1];\n\t\t\t} else {\n\t\t\t\tthis.time = 0;\n\t\t\t\tthis.period = 'H';\n\t\t\t\tthis.value = '0:H';\n\t\t\t\tcontainer.val(this.value);\n\t\t\t}\n\t\t\tthis.injectContent();\n\t\t}\n\n\t\t/**\n\t\t * Register time period field/s\n\t\t *\n\t\t * @param {jQuery} container it could be input type hidden with js-time-period class\n\t\t *                           or container that contains multiple js-time-period inputs\n\t\t *\n\t\t * @example <input type=\"hidden\" name=\"field_name\" class=\"js-time-period\">\n\t\t *\n\t\t * @returns {TimePeriod|TimePeriod[]} instance/s\n\t\t */\n\t\tstatic register(container) {\n\t\t\tif (container.hasClass('c-time-period')) {\n\t\t\t\treturn new TimePeriod(container);\n\t\t\t}\n\t\t\tconst instances = [];\n\t\t\tcontainer.find('.c-time-period').each((index, value) => {\n\t\t\t\tinstances.push(new TimePeriod($(value)));\n\t\t\t});\n\t\t\treturn instances;\n\t\t}\n\n\t\t/**\n\t\t * Inject content next to container\n\t\t *\n\t\t * @returns  {jQuery}  created element with input and select\n\t\t */\n\t\tinjectContent() {\n\t\t\tlet content = `<div class=\"input-group c-time-period\" data-js=\"container\">\n\t\t\t\t<div class=\"input-group-prepend\">\n\t\t\t\t\t<a href class=\"btn btn-default c-time-period-input-modifier c-time-period-input-modifier--minus-1\"><span class=\"fas fa-minus\"></span></a>\n\t\t\t\t</div>\n\t\t\t\t<input type=\"number\" class=\"form-control c-time-period-input\" min=\"0\" value=\"${this.time}\"\n\t\t\t\t\tdata-validation-engine=\"validate[required,funcCall[Vtiger_Integer_Validator_Js.invokeValidation]]\">\n\t\t\t\t<div class=\"input-group-append\">\n\t\t\t\t\t<a href class=\"btn btn-default c-time-period-input-modifier c-time-period-input-modifier--plus-1\"><span class=\"fas fa-plus\"></span></a>\n\t\t\t\t\t<select class=\"select2 js-time-period-select time-period-${this.container.attr('name')}\">\n\t\t\t\t\t\t<option value=\"d\"${this.period === 'd' ? ' selected=\"selected\"' : ''}>${app.vtranslate('JS_DAYS_FULL')}</option>\n\t\t\t\t\t\t<option value=\"H\"${this.period === 'H' ? ' selected=\"selected\"' : ''}>${app.vtranslate('JS_HOURS_FULL')}</option>\n\t\t\t\t\t\t<option value=\"i\"${this.period === 'i' ? ' selected=\"selected\"' : ''}>${app.vtranslate('JS_MINUTES_FULL')}</option>\n\t\t\t\t\t</select>\n\t\t\t\t</div>\n\t\t\t</div>`;\n\t\t\tthis.element = this.container.parent().append(content);\n\t\t\tthis.input = this.element.find('.c-time-period-input').eq(0);\n\t\t\tthis.select = this.element.find('.select2').eq(0);\n\t\t\tthis.plus1btn = this.element.find('.c-time-period-input-modifier--plus-1').eq(0);\n\t\t\tthis.minus1btn = this.element.find('.c-time-period-input-modifier--minus-1').eq(0);\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(this.select, { width: '100px' });\n\t\t\tthis.registerEvents();\n\t\t\treturn this.element;\n\t\t}\n\n\t\t/**\n\t\t * Register events\n\t\t */\n\t\tregisterEvents() {\n\t\t\tthis.input.on('input', this.onChange.bind(this));\n\t\t\tthis.select.on('change', this.onChange.bind(this));\n\t\t\tthis.plus1btn.on('click', this.onPlus1Click.bind(this));\n\t\t\tthis.minus1btn.on('click', this.onMinus1Click.bind(this));\n\t\t}\n\n\t\t/**\n\t\t * On change event\n\t\t *\n\t\t * @param {Event} event\n\t\t */\n\t\tonChange(event) {\n\t\t\tthis.time = this.input.val();\n\t\t\tthis.period = this.select.val();\n\t\t\tthis.value = this.input.val() + ':' + this.select.val();\n\t\t\tthis.container.val(this.value);\n\t\t}\n\n\t\t/**\n\t\t * Plus 1 button click event handler\n\t\t *\n\t\t * @param {Event} event\n\t\t */\n\t\tonPlus1Click(event) {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t\tthis.input.val(Number(this.input.val()) + 1);\n\t\t\tthis.onChange();\n\t\t}\n\n\t\t/**\n\t\t * Minus 1 button click event handler\n\t\t *\n\t\t * @param {Event} event\n\t\t */\n\t\tonMinus1Click(event) {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t\tif (Number(this.input.val()) > 0) {\n\t\t\t\tthis.input.val(Number(this.input.val()) - 1);\n\t\t\t\tthis.onChange();\n\t\t\t}\n\t\t}\n\t},\n\t/**\n\t * Multi currency\n\t */\n\tMultiCurrency: class MultiCurrency {\n\t\tconstructor(container) {\n\t\t\tthis.container = container;\n\t\t\tthis.init();\n\t\t}\n\t\t/**\n\t\t * Register function\n\t\t * @param {jQuery} container\n\t\t */\n\t\tstatic register(container) {\n\t\t\tif (container.hasClass('js-multicurrency-container')) {\n\t\t\t\treturn new MultiCurrency(container);\n\t\t\t}\n\t\t\tconst instances = [];\n\t\t\tcontainer.find('.js-multicurrency-container').each((n, e) => {\n\t\t\t\tinstances.push(new MultiCurrency($(e)));\n\t\t\t});\n\t\t\treturn instances;\n\t\t}\n\t\t/**\n\t\t * Initiation\n\t\t */\n\t\tinit() {\n\t\t\t$('.js-multicurrency-event', this.container)\n\t\t\t\t.off('click')\n\t\t\t\t.on('click', () => {\n\t\t\t\t\tlet modal = $('<form>').append(\n\t\t\t\t\t\tthis.container.find('.js-currencies-container .js-currencies-modal').clone()\n\t\t\t\t\t);\n\t\t\t\t\tthis.registerEnableCurrencyEvent(modal);\n\t\t\t\t\tthis.registerResetCurrencyEvent(modal);\n\t\t\t\t\tthis.loadData(modal);\n\t\t\t\t\tthis.calculateConversionRate(modal);\n\t\t\t\t\tapp.showModalWindow({\n\t\t\t\t\t\tdata: modal,\n\t\t\t\t\t\tcss: {},\n\t\t\t\t\t\tcb: data => {\n\t\t\t\t\t\t\tlet form = data.parent();\n\t\t\t\t\t\t\tform.validationEngine(app.validationEngineOptionsForRecord);\n\t\t\t\t\t\t\tform.on('submit', e => {\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\tif (form.validationEngine('validate') && this.saveCurrencies(form)) {\n\t\t\t\t\t\t\t\t\tlet id = form.closest('.js-modal-container').attr('id');\n\t\t\t\t\t\t\t\t\tapp.hideModalWindow(null, id);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\tthis.getField().on('focusout', e => {\n\t\t\t\tlet element = $(e.currentTarget);\n\t\t\t\telement.formatNumber();\n\t\t\t\tthis.setPrice(element.val());\n\t\t\t});\n\t\t}\n\t\t/**\n\t\t * Loading data\n\t\t * @param {jQuery} modalContainer\n\t\t */\n\t\tloadData(modalContainer) {\n\t\t\tlet values = JSON.parse(this.getFieldToSave().val());\n\t\t\tlet baseCurrencyId = values['currencyId'] || CONFIG.currencyId;\n\t\t\tif (values['currencies'] === undefined) {\n\t\t\t\tvalues['currencies'] = [];\n\t\t\t\tvalues['currencies'][baseCurrencyId] = { price: 0 };\n\t\t\t}\n\t\t\tfor (let i in values['currencies']) {\n\t\t\t\tlet row = modalContainer.find('[data-currency-id=\"' + i + '\"]');\n\t\t\t\tif (row.length) {\n\t\t\t\t\trow.find('.js-enable-currency').prop('checked', true);\n\t\t\t\t\trow.find('.js-currency-reset,.js-base-currency,[name^=\"currencies[\"]').prop('disabled', false);\n\t\t\t\t\trow.find('.js-converted-price').val(values['currencies'][i]['price']);\n\t\t\t\t\tif (i == baseCurrencyId) {\n\t\t\t\t\t\trow.find('.js-base-currency').prop('checked', true);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t/**\n\t\t * Set value\n\t\t * @param {number} value\n\t\t */\n\t\tsetPrice(value) {\n\t\t\tlet values = JSON.parse(this.getFieldToSave().val());\n\t\t\tlet baseCurrencyId = values['currencyId'] || CONFIG.currencyId;\n\t\t\tvalues['currencies'] = values['currencies'] || {};\n\t\t\tvalues['currencies'][baseCurrencyId] = { price: value };\n\t\t\tvalues['currencyId'] = baseCurrencyId;\n\t\t\tvalues = $.extend({}, values);\n\t\t\tthis.getFieldToSave().val(JSON.stringify($.extend({}, values)));\n\t\t}\n\t\t/**\n\t\t * Gets field\n\t\t */\n\t\tgetField() {\n\t\t\treturn this.container.find('.js-multicurrency-field');\n\t\t}\n\t\t/**\n\t\t * Gets field to save\n\t\t */\n\t\tgetFieldToSave() {\n\t\t\treturn this.container.find('.js-multicurrency-field-to-save');\n\t\t}\n\t\t/**\n\t\t * Save\n\t\t * @param {jQuery} modalContainer\n\t\t */\n\t\tsaveCurrencies(modalContainer) {\n\t\t\tlet enabledBaseCurrency = modalContainer.find('.js-enable-currency').filter(':checked');\n\t\t\tif (enabledBaseCurrency.length < 1) {\n\t\t\t\tVtiger_Helper_Js.showMessage({\n\t\t\t\t\ttext: app.vtranslate('JS_PLEASE_SELECT_BASE_CURRENCY_FOR_PRODUCT'),\n\t\t\t\t\ttype: 'error'\n\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tlet selectedBaseCurrency = modalContainer.find('.js-base-currency').filter(':checked');\n\t\t\tif (selectedBaseCurrency.length < 1) {\n\t\t\t\tVtiger_Helper_Js.showMessage({\n\t\t\t\t\ttext: app.vtranslate('JS_PLEASE_ENABLE_BASE_CURRENCY_FOR_PRODUCT'),\n\t\t\t\t\ttype: 'error'\n\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tlet selectedRow = selectedBaseCurrency.closest('tr');\n\t\t\tlet symbol = selectedRow.data('currency-symbol');\n\t\t\tthis.container.find('.js-currency').text(symbol);\n\t\t\tlet data = {};\n\t\t\tdata['currencies'] = {};\n\t\t\tenabledBaseCurrency.closest('tr').each((n, e) => {\n\t\t\t\tlet row = $(e),\n\t\t\t\t\tcurrencyId = row.data('currencyId');\n\t\t\t\tdata['currencies'][currencyId] = {};\n\t\t\t\tdata['currencies'][currencyId]['price'] = row.find('.js-converted-price').val();\n\t\t\t\tif (row.find('.js-base-currency:checked').length) {\n\t\t\t\t\tdata['currencyId'] = currencyId;\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.getFieldToSave().val(JSON.stringify(data));\n\t\t\tthis.getField().val(selectedRow.find('.js-converted-price').val());\n\t\t\tselectedBaseCurrency.prop('checked', false);\n\t\t\treturn true;\n\t\t}\n\t\t/**\n\t\t * Calculate\n\t\t * @param {jQuery} container\n\t\t */\n\t\tcalculateConversionRate(container) {\n\t\t\tlet baseCurrencyConversionRate = container\n\t\t\t\t.find('.js-base-currency')\n\t\t\t\t.filter(':checked')\n\t\t\t\t.closest('tr')\n\t\t\t\t.find('.js-conversion-rate');\n\t\t\tif (baseCurrencyConversionRate.val() == '1') {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet baseCurrencyRatePrevValue = baseCurrencyConversionRate.getNumberFromValue();\n\t\t\tcontainer.find('.js-conversion-rate').each(function(key, domElement) {\n\t\t\t\tlet element = $(domElement);\n\t\t\t\tif (!element.is(baseCurrencyConversionRate)) {\n\t\t\t\t\telement.val(\n\t\t\t\t\t\tApp.Fields.Double.formatToDisplay(\n\t\t\t\t\t\t\telement.getNumberFromValue() / baseCurrencyRatePrevValue,\n\t\t\t\t\t\t\tfalse\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\t\t\tbaseCurrencyConversionRate.val('1');\n\t\t}\n\t\t/**\n\t\t * Function to register event for enabling currency on checkbox checked\n\t\t * @param {jQuery} container\n\t\t */\n\t\tregisterEnableCurrencyEvent(container) {\n\t\t\tcontainer.on('change', '.js-enable-currency', e => {\n\t\t\t\tlet element = $(e.currentTarget);\n\t\t\t\tlet parentRow = element.closest('tr');\n\t\t\t\tif (element.is(':checked')) {\n\t\t\t\t\telement.attr('checked', 'checked');\n\t\t\t\t\tlet price =\n\t\t\t\t\t\tthis.getField().getNumberFromValue() *\n\t\t\t\t\t\tparentRow.find('.js-conversion-rate').getNumberFromValue();\n\t\t\t\t\t$('input', parentRow).removeAttr('disabled');\n\t\t\t\t\tparentRow.find('.js-currency-reset').removeAttr('disabled');\n\t\t\t\t\tparentRow.find('.js-converted-price').val(App.Fields.Double.formatToDisplay(price));\n\t\t\t\t} else {\n\t\t\t\t\tif (parentRow.find('.js-base-currency').is(':checked')) {\n\t\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\t\ttitle:\n\t\t\t\t\t\t\t\t'\"' +\n\t\t\t\t\t\t\t\tparentRow.find('.js-currency-name').text() +\n\t\t\t\t\t\t\t\t'\" ' +\n\t\t\t\t\t\t\t\tapp.vtranslate('JS_BASE_CURRENCY_CHANGED_TO_DISABLE_CURRENCY')\n\t\t\t\t\t\t});\n\t\t\t\t\t\telement.prop('checked', true);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tparentRow.find('input').attr('disabled', 'disabled');\n\t\t\t\t\tparentRow.find('.js-currency-reset').attr('disabled', 'disabled');\n\t\t\t\t\telement.removeAttr('disabled checked');\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t/**\n\t\t * Function to register event for reseting the currencies\n\t\t * @param {jQuery} container\n\t\t */\n\t\tregisterResetCurrencyEvent(container) {\n\t\t\tcontainer.on('click', '.js-currency-reset', e => {\n\t\t\t\tlet parentElem = $(e.currentTarget).closest('tr');\n\t\t\t\tlet price =\n\t\t\t\t\tthis.getField().getNumberFromValue() * parentElem.find('.js-conversion-rate').getNumberFromValue();\n\t\t\t\t$('.js-converted-price', parentElem).val(App.Fields.Double.formatToDisplay(price));\n\t\t\t});\n\t\t}\n\t},\n\tUtils: {\n\t\tregisterMobileDateRangePicker(element) {\n\t\t\tthis.hideMobileKeyboard(element);\n\t\t\tif (!Quasar.plugins.Platform.is.desktop) {\n\t\t\t\telement\n\t\t\t\t\t.on('showCalendar.daterangepicker', (ev, picker) => {\n\t\t\t\t\t\tpicker.container.addClass('js-visible');\n\t\t\t\t\t})\n\t\t\t\t\t.on('hide.daterangepicker', (ev, picker) => {\n\t\t\t\t\t\tpicker.container.removeClass('js-visible');\n\t\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\thideMobileKeyboard(element) {\n\t\t\tif (!Quasar.plugins.Platform.is.desktop) {\n\t\t\t\telement.attr('readonly', 'true').addClass('bg-white');\n\t\t\t}\n\t\t},\n\t\tpositionPicker(ev, picker) {\n\t\t\tlet offset = picker.element.offset();\n\t\t\tlet $window = $(window);\n\t\t\tif (offset.left - $window.scrollLeft() + picker.container.outerWidth() > $window.width()) {\n\t\t\t\tpicker.opens = 'left';\n\t\t\t} else {\n\t\t\t\tpicker.opens = 'right';\n\t\t\t}\n\t\t\tpicker.move();\n\t\t\tif (offset.top - $window.scrollTop() + picker.container.outerHeight() > $window.height()) {\n\t\t\t\tpicker.drops = 'up';\n\t\t\t} else {\n\t\t\t\tpicker.drops = 'down';\n\t\t\t}\n\t\t\tpicker.move();\n\t\t},\n\t\t/**\n\t\t * Set value\n\t\t *\n\t\t * @param   {object}  fieldElement  jQuery\n\t\t * @param   {string|boolean}  value\n\t\t */\n\t\tsetValue(fieldElement, value) {\n\t\t\tif (fieldElement.is('select')) {\n\t\t\t\tApp.Fields.Picklist.setValue(fieldElement, value);\n\t\t\t} else {\n\t\t\t\tfieldElement.val(value);\n\t\t\t}\n\t\t}\n\t}\n};\n"],"names":["window","App","Fields","map","app","vtranslate","monthName","parentElement","registerForAddon","customParams","className","$","elements","hasClass","length","parentDateElem","closest","on","e","currentTarget","find","get","focus","format","CONFIG","dateFormat","elementDateFormat","data","fn","datepicker","dates","langKey","Date","fullDaysTranslated","daysTranslated","fullMonthsTranslated","monthsTranslated","weekStart","firstDayOfWeekNo","params","extend","each","index","element","Object","assign","enableOnReadonly","hasAttribute","Utils","hideMobileKeyboard","toUpperCase","ranges","moment","add","subtract","startOf","endOf","substr","off","parent","next","el","currentParams","daterangepicker","ev","picker","this","val","startDate","locale","endDate","trigger","positionPicker","container","addClass","removeClass","registerMobileDateRangePicker","hourFormat","elementHourFormat","timePicker24Hour","timeFormat","isDateRangePicker","hexcolor","parseInt","letters","split","color","i","Math","floor","random","count","colors","push","getRandomColor","fieldToUpdate","bgToUpdate","cb","url","substring","showModalWindow","ColorPicker","mount","modalContainer","newColor","getColor","hex","css","hideModalWindow","id","bind","key","querySelectorAll","ClipboardJS","showPnotify","is","prop","isModal","self","progressInstance","progressIndicator","loadEditor","getElement","attr","CKEDITOR","instances","getElementId","customConfig","setElement","instance","getEditorInstanceFromName","config","ENTER_BR","ENTER_P","evt","editor","updateElement","mode","name","items","emojiEnabled","emojiToolbar","toolbar","Array","isArray","extraPlugins","outputTemplate","mentionsEnabled","mentions","registerMentions","remove","ckeditor","minSerchTextLength","getMainParams","getMentionUsersData","Text","getMentionData","opts","callback","inputDiv","eq","emojiPanel","undefined","basicParams","collection","completionsCollection","records","registerMentionCollection","users","emojis","registerEmojiCollection","register","symbol","searchModule","item","range","isContentEditable","current","original","module","label","trim","text","globalSearchAutocompleteMinLength","mentionTemplate","category","image","icon","emoji","avatar","Tribute","attach","completionsTextarea","registerCompletionsTextArea","completionsButtons","registerCompletionsButtons","registerEmojiPanel","parents","siteUrl","then","response","json","catch","console","error","registerTagClick","textarea","siblings","html","preventDefault","append","target","clone","completionsContainer","showMenuForCollection","_this","emojisContainer","EmojiPanel","toggleClass","stopPropagation","prepend","basicSearch","Vtiger_BasicSearch_Js","reduceNumberResults","returnHtml","query","toLowerCase","request","done","result","search","serverDataFormat","JSON","parse","reponseDataList","responseData","destroy","chars","rand","prefix","toString","hash","valueOf","view","viewParams","Picklist","showSelect2ElementView","errorLog","Error","toArray","forEach","changeSelectElementView","elem","selectElement","registerParams","selectLazy","showLazySelect","registerLazySelectOptions","select","htmlBoolParams","tags","tokenSeparators","select2","dropdownContainer","dropdownList","selectOffsetTop","offset","top","height","removeData","$dropdown","selectCb","dropdownParent","modalParent","language","theme","width","containerCssClass","noResults","msn","optgroup","options","children","sort","a","b","v","maximumSelectionLength","formatSelectionTooBig","maximumSelected","limit","maximum","placeholder","templateResult","actualElement","type","escapeMarkup","markup","templateSelection","registerAjaxParams","searching","inputTooShort","args","remainingChars","minimum","input","replace","errorLoading","ajax","term","page","success","concat","minimumInputLength","optionData","template","dataset","state","iconInactive","iconActive","sortSelectOptions","registerSortEvent","sortableCb","appendTo","ul","first","sortable","reverse","optionTitle","event","originalEvent","currentElementData","optionElement","progressIndicatorElement","blockInfo","enabled","message","fail","amd","require","ArrayData","CustomData","$element","__super__","constructor","call","Extend","prototype","results","filter","indexOf","slice","lazyElements","pagination","more","selectParams","selectedOption","picklistvalues","hasOwnProperty","createSelectedOption","value","selected","disabled","searchValue","option","findOption","foundOption","selectValues","getSelectOptions","getFieldValueFromText","keys","valueExists","createOption","optionsObject","newOption","Option","MultiImage","inputElement","MultiEmail","parseToJSON","addEmail","removeEmail","toggleCheckBox","allFields","arr","arrayLength","inputField","checkboxField","stringify","newField","cnt","removeAttr","insertAfter","last","fields","MultiDependField","addRow","registerRow","parseToJson","removeRow","partData","skip","k","lastField","selectFields","masterSelect","slaveSelect","values","child","localeCompare","DependentSelect","generateOptionsFromData","GanttField","groupSeparator","currencyGroupingSeparator","groupingPattern","currencyGroupingPattern","integer","parseFloat","toFixed","fixed","numberOfDecimal","noOfCurrencyDecimals","strDecimal","numberOfZerosAtTheEnd","splittedFloat","Integer","formatToDisplay","decimal","truncateTrailingZeros","currencyDecimalSeparator","join","parentElem","sourceFieldElement","fieldDisplayElement","requestData","modalEvents","modal","setSelectEvent","modalId","time","Number","period","injectContent","content","plus1btn","minus1btn","registerEvents","onChange","onPlus1Click","onMinus1Click","TimePeriod","init","_this5","registerEnableCurrencyEvent","registerResetCurrencyEvent","loadData","calculateConversionRate","form","validationEngine","validationEngineOptionsForRecord","saveCurrencies","getField","formatNumber","setPrice","getFieldToSave","baseCurrencyId","currencyId","price","row","enabledBaseCurrency","showMessage","selectedBaseCurrency","selectedRow","n","baseCurrencyConversionRate","baseCurrencyRatePrevValue","getNumberFromValue","domElement","Double","parentRow","_this6","_this7","MultiCurrency","Quasar","plugins","Platform","desktop","$window","left","scrollLeft","outerWidth","opens","move","scrollTop","outerHeight","drops","fieldElement","setValue"],"mappings":"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"}