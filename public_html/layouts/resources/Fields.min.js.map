{"version":3,"file":"Fields.min.js","sources":["Fields.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nwindow.App.Fields = {\n\tDate: {\n\t\tmonths: [\n\t\t\t'JS_JAN',\n\t\t\t'JS_FEB',\n\t\t\t'JS_MAR',\n\t\t\t'JS_APR',\n\t\t\t'JS_MAY',\n\t\t\t'JS_JUN',\n\t\t\t'JS_JUL',\n\t\t\t'JS_AUG',\n\t\t\t'JS_SEP',\n\t\t\t'JS_OCT',\n\t\t\t'JS_NOV',\n\t\t\t'JS_DEC'\n\t\t],\n\t\tmonthsTranslated: [\n\t\t\t'JS_JAN',\n\t\t\t'JS_FEB',\n\t\t\t'JS_MAR',\n\t\t\t'JS_APR',\n\t\t\t'JS_MAY',\n\t\t\t'JS_JUN',\n\t\t\t'JS_JUL',\n\t\t\t'JS_AUG',\n\t\t\t'JS_SEP',\n\t\t\t'JS_OCT',\n\t\t\t'JS_NOV',\n\t\t\t'JS_DEC'\n\t\t].map(monthName => app.vtranslate(monthName)),\n\t\tfullMonths: [\n\t\t\t'JS_JANUARY',\n\t\t\t'JS_FEBRUARY',\n\t\t\t'JS_MARCH',\n\t\t\t'JS_APRIL',\n\t\t\t'JS_MAY',\n\t\t\t'JS_JUNE',\n\t\t\t'JS_JULY',\n\t\t\t'JS_AUGUST',\n\t\t\t'JS_SEPTEMBER',\n\t\t\t'JS_OCTOBER',\n\t\t\t'JS_NOVEMBER',\n\t\t\t'JS_DECEMBER'\n\t\t],\n\t\tfullMonthsTranslated: [\n\t\t\t'JS_JANUARY',\n\t\t\t'JS_FEBRUARY',\n\t\t\t'JS_MARCH',\n\t\t\t'JS_APRIL',\n\t\t\t'JS_MAY',\n\t\t\t'JS_JUNE',\n\t\t\t'JS_JULY',\n\t\t\t'JS_AUGUST',\n\t\t\t'JS_SEPTEMBER',\n\t\t\t'JS_OCTOBER',\n\t\t\t'JS_NOVEMBER',\n\t\t\t'JS_DECEMBER'\n\t\t].map(monthName => app.vtranslate(monthName)),\n\t\tdays: ['JS_SUN', 'JS_MON', 'JS_TUE', 'JS_WED', 'JS_THU', 'JS_FRI', 'JS_SAT'],\n\t\tdaysTranslated: ['JS_SUN', 'JS_MON', 'JS_TUE', 'JS_WED', 'JS_THU', 'JS_FRI', 'JS_SAT'].map(monthName =>\n\t\t\tapp.vtranslate(monthName)\n\t\t),\n\t\tfullDays: ['JS_SUNDAY', 'JS_MONDAY', 'JS_TUESDAY', 'JS_WEDNESDAY', 'JS_THURSDAY', 'JS_FRIDAY', 'JS_SATURDAY'],\n\t\tfullDaysTranslated: [\n\t\t\t'JS_SUNDAY',\n\t\t\t'JS_MONDAY',\n\t\t\t'JS_TUESDAY',\n\t\t\t'JS_WEDNESDAY',\n\t\t\t'JS_THURSDAY',\n\t\t\t'JS_FRIDAY',\n\t\t\t'JS_SATURDAY'\n\t\t].map(monthName => app.vtranslate(monthName)),\n\n\t\t/**\n\t\t * Register DatePicker\n\t\t * @param {$} parentElement\n\t\t * @param {boolean} registerForAddon\n\t\t * @param {object} customParams\n\t\t */\n\t\tregister(parentElement, registerForAddon, customParams, className = 'dateField') {\n\t\t\tif (typeof parentElement === 'undefined') {\n\t\t\t\tparentElement = $('body');\n\t\t\t} else {\n\t\t\t\tparentElement = $(parentElement);\n\t\t\t}\n\t\t\tif (typeof registerForAddon === 'undefined') {\n\t\t\t\tregisterForAddon = true;\n\t\t\t}\n\t\t\tlet elements = $('.' + className, parentElement);\n\t\t\tif (parentElement.hasClass(className)) {\n\t\t\t\telements = parentElement;\n\t\t\t}\n\t\t\tif (elements.length === 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (registerForAddon === true) {\n\t\t\t\tconst parentDateElem = elements.closest('.date');\n\t\t\t\t$('.js-date__btn', parentDateElem).on('click', function inputGroupAddonClickHandler(e) {\n\t\t\t\t\t// Using focus api of DOM instead of jQuery because show api of datePicker is calling e.preventDefault\n\t\t\t\t\t// which is stopping from getting focus to input element\n\t\t\t\t\t$(e.currentTarget)\n\t\t\t\t\t\t.closest('.date')\n\t\t\t\t\t\t.find('input.' + className)\n\t\t\t\t\t\t.get(0)\n\t\t\t\t\t\t.focus();\n\t\t\t\t});\n\t\t\t}\n\t\t\tlet format = CONFIG.dateFormat;\n\t\t\tconst elementDateFormat = elements.data('dateFormat');\n\t\t\tif (typeof elementDateFormat !== 'undefined') {\n\t\t\t\tformat = elementDateFormat;\n\t\t\t}\n\t\t\tif (typeof $.fn.datepicker.dates[CONFIG.langKey] === 'undefined') {\n\t\t\t\t$.fn.datepicker.dates[CONFIG.langKey] = {\n\t\t\t\t\tdays: App.Fields.Date.fullDaysTranslated,\n\t\t\t\t\tdaysShort: App.Fields.Date.daysTranslated,\n\t\t\t\t\tdaysMin: App.Fields.Date.daysTranslated,\n\t\t\t\t\tmonths: App.Fields.Date.fullMonthsTranslated,\n\t\t\t\t\tmonthsShort: App.Fields.Date.monthsTranslated,\n\t\t\t\t\ttoday: app.vtranslate('JS_TODAY'),\n\t\t\t\t\tclear: app.vtranslate('JS_CLEAR'),\n\t\t\t\t\tformat: format,\n\t\t\t\t\ttitleFormat: 'MM yyyy' /* Leverages same syntax as 'format' */,\n\t\t\t\t\tweekStart: CONFIG.firstDayOfWeekNo\n\t\t\t\t};\n\t\t\t}\n\t\t\tlet params = {\n\t\t\t\ttodayBtn: 'linked',\n\t\t\t\tclearBtn: true,\n\t\t\t\tlanguage: CONFIG.langKey,\n\t\t\t\tweekStart: CONFIG.firstDayOfWeekNo,\n\t\t\t\tautoclose: true,\n\t\t\t\ttodayHighlight: true,\n\t\t\t\tformat: format\n\t\t\t};\n\t\t\tif (typeof customParams !== 'undefined') {\n\t\t\t\tparams = $.extend(params, customParams);\n\t\t\t}\n\t\t\telements.each((index, element) => {\n\t\t\t\t$(element).datepicker(\n\t\t\t\t\t$.extend(\n\t\t\t\t\t\ttrue,\n\t\t\t\t\t\tObject.assign(params, { enableOnReadonly: !element.hasAttribute('readonly') }),\n\t\t\t\t\t\t$(element).data('params')\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t});\n\t\t\tApp.Fields.Utils.hideMobileKeyboard(elements);\n\t\t\treturn elements;\n\t\t},\n\n\t\t/**\n\t\t * Register dateRangePicker\n\t\t * @param {jQuery} parentElement\n\t\t * @param {object} customParams\n\t\t */\n\t\tregisterRange(parentElement, customParams = {}) {\n\t\t\tif (typeof parentElement === 'undefined') {\n\t\t\t\tparentElement = $('body');\n\t\t\t} else {\n\t\t\t\tparentElement = $(parentElement);\n\t\t\t}\n\t\t\tlet elements = $('.dateRangeField', parentElement);\n\t\t\tif (parentElement.hasClass('dateRangeField')) {\n\t\t\t\telements = parentElement;\n\t\t\t}\n\t\t\tif (elements.length === 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet format = CONFIG.dateFormat.toUpperCase();\n\t\t\tconst elementDateFormat = elements.data('dateFormat');\n\t\t\tif (typeof elementDateFormat !== 'undefined') {\n\t\t\t\tformat = elementDateFormat.toUpperCase();\n\t\t\t}\n\t\t\tlet ranges = {};\n\t\t\tranges[app.vtranslate('JS_TODAY')] = [moment(), moment()];\n\t\t\tranges[app.vtranslate('JS_TOMORROW')] = [moment().add(1, 'days'), moment().add(1, 'days')];\n\t\t\tranges[app.vtranslate('JS_YESTERDAY')] = [moment().subtract(1, 'days'), moment().subtract(1, 'days')];\n\t\t\tranges[app.vtranslate('JS_LAST_7_DAYS')] = [moment().subtract(6, 'days'), moment()];\n\t\t\tranges[app.vtranslate('JS_NEXT_7_DAYS')] = [moment(), moment().add(6, 'days')];\n\t\t\tranges[app.vtranslate('JS_CURRENT_MONTH')] = [moment().startOf('month'), moment().endOf('month')];\n\t\t\tranges[app.vtranslate('JS_NEXT_MONTH')] = [\n\t\t\t\tmoment()\n\t\t\t\t\t.add(1, 'month')\n\t\t\t\t\t.startOf('month'),\n\t\t\t\tmoment()\n\t\t\t\t\t.add(1, 'month')\n\t\t\t\t\t.endOf('month')\n\t\t\t];\n\t\t\tranges[app.vtranslate('JS_LAST_MONTH')] = [\n\t\t\t\tmoment()\n\t\t\t\t\t.subtract(1, 'month')\n\t\t\t\t\t.startOf('month'),\n\t\t\t\tmoment()\n\t\t\t\t\t.subtract(1, 'month')\n\t\t\t\t\t.endOf('month')\n\t\t\t];\n\t\t\tranges[app.vtranslate('JS_NEXT_MONTH')] = [\n\t\t\t\tmoment()\n\t\t\t\t\t.add(1, 'month')\n\t\t\t\t\t.startOf('month'),\n\t\t\t\tmoment()\n\t\t\t\t\t.add(1, 'month')\n\t\t\t\t\t.endOf('month')\n\t\t\t];\n\t\t\tranges[app.vtranslate('JS_LAST_3_MONTHS')] = [\n\t\t\t\tmoment()\n\t\t\t\t\t.subtract(3, 'month')\n\t\t\t\t\t.startOf('month'),\n\t\t\t\tmoment()\n\t\t\t\t\t.subtract(1, 'month')\n\t\t\t\t\t.endOf('month')\n\t\t\t];\n\t\t\tranges[app.vtranslate('JS_NEXT_3_MONTHS')] = [\n\t\t\t\tmoment().startOf('month'),\n\t\t\t\tmoment()\n\t\t\t\t\t.add(3, 'month')\n\t\t\t\t\t.endOf('month')\n\t\t\t];\n\t\t\tranges[app.vtranslate('JS_LAST_6_MONTHS')] = [\n\t\t\t\tmoment()\n\t\t\t\t\t.subtract(6, 'month')\n\t\t\t\t\t.startOf('month'),\n\t\t\t\tmoment()\n\t\t\t\t\t.subtract(1, 'month')\n\t\t\t\t\t.endOf('month')\n\t\t\t];\n\t\t\tranges[app.vtranslate('JS_NEXT_6_MONTHS')] = [\n\t\t\t\tmoment().startOf('month'),\n\t\t\t\tmoment()\n\t\t\t\t\t.add(6, 'month')\n\t\t\t\t\t.endOf('month')\n\t\t\t];\n\t\t\tlet params = {\n\t\t\t\tautoUpdateInput: false,\n\t\t\t\tautoApply: true,\n\t\t\t\tranges: ranges,\n\t\t\t\tlocale: {\n\t\t\t\t\tformat: format,\n\t\t\t\t\tseparator: ',',\n\t\t\t\t\tapplyLabel: app.vtranslate('JS_APPLY'),\n\t\t\t\t\tcancelLabel: app.vtranslate('JS_CANCEL'),\n\t\t\t\t\tfromLabel: app.vtranslate('JS_FROM'),\n\t\t\t\t\ttoLabel: app.vtranslate('JS_TO'),\n\t\t\t\t\tcustomRangeLabel: app.vtranslate('JS_CUSTOM'),\n\t\t\t\t\tweekLabel: app.vtranslate('JS_WEEK').substr(0, 1),\n\t\t\t\t\tfirstDay: CONFIG.firstDayOfWeekNo,\n\t\t\t\t\tdaysOfWeek: App.Fields.Date.daysTranslated,\n\t\t\t\t\tmonthNames: App.Fields.Date.fullMonthsTranslated\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tif (typeof customParams !== 'undefined') {\n\t\t\t\tparams = $.extend(params, customParams);\n\t\t\t}\n\t\t\tparentElement\n\t\t\t\t.find('.js-date__btn')\n\t\t\t\t.off()\n\t\t\t\t.on('click', e => {\n\t\t\t\t\t$(e.currentTarget)\n\t\t\t\t\t\t.parent()\n\t\t\t\t\t\t.next('.dateRangeField')[0]\n\t\t\t\t\t\t.focus();\n\t\t\t\t});\n\t\t\telements.each((index, element) => {\n\t\t\t\tlet el = $(element);\n\t\t\t\tlet currentParams = $.extend(true, params, el.data('params'));\n\t\t\t\tel.daterangepicker(currentParams)\n\t\t\t\t\t.on('apply.daterangepicker', function(ev, picker) {\n\t\t\t\t\t\t$(this).val(\n\t\t\t\t\t\t\tpicker.startDate.format(currentParams.locale.format) +\n\t\t\t\t\t\t\t\t',' +\n\t\t\t\t\t\t\t\tpicker.endDate.format(currentParams.locale.format)\n\t\t\t\t\t\t);\n\t\t\t\t\t\t$(this).trigger('change');\n\t\t\t\t\t})\n\t\t\t\t\t.on('show.daterangepicker', (ev, picker) => {\n\t\t\t\t\t\tApp.Fields.Utils.positionPicker(ev, picker);\n\t\t\t\t\t})\n\t\t\t\t\t.on('showCalendar.daterangepicker', (ev, picker) => {\n\t\t\t\t\t\tApp.Fields.Utils.positionPicker(ev, picker);\n\t\t\t\t\t\tpicker.container.addClass('js-visible');\n\t\t\t\t\t})\n\t\t\t\t\t.on('hide.daterangepicker', (ev, picker) => {\n\t\t\t\t\t\tpicker.container.removeClass('js-visible');\n\t\t\t\t\t});\n\t\t\t\tApp.Fields.Utils.registerMobileDateRangePicker(el);\n\t\t\t});\n\t\t}\n\t},\n\tDateTime: {\n\t\t/*\n\t\t * Initialization datetime fields\n\t\t * @param {jQuery} parentElement\n\t\t * @param {object} customParams\n\t\t */\n\t\tregister: function(parentElement, customParams) {\n\t\t\tif (typeof parentElement === 'undefined') {\n\t\t\t\tparentElement = $('body');\n\t\t\t} else {\n\t\t\t\tparentElement = $(parentElement);\n\t\t\t}\n\t\t\tlet elements = $('.dateTimePickerField', parentElement);\n\t\t\tif (parentElement.hasClass('dateTimePickerField')) {\n\t\t\t\telements = parentElement;\n\t\t\t}\n\t\t\tif (elements.length === 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t$('.input-group-text', elements.closest('.dateTime')).on('click', function(e) {\n\t\t\t\t$(e.currentTarget)\n\t\t\t\t\t.closest('.dateTime')\n\t\t\t\t\t.find('input.dateTimePickerField ')\n\t\t\t\t\t.get(0)\n\t\t\t\t\t.focus();\n\t\t\t});\n\t\t\tlet dateFormat = CONFIG.dateFormat.toUpperCase();\n\t\t\tconst elementDateFormat = elements.data('dateFormat');\n\t\t\tif (typeof elementDateFormat !== 'undefined') {\n\t\t\t\tdateFormat = elementDateFormat.toUpperCase();\n\t\t\t}\n\t\t\tlet hourFormat = CONFIG.hourFormat;\n\t\t\tconst elementHourFormat = elements.data('hourFormat');\n\t\t\tif (typeof elementHourFormat !== 'undefined') {\n\t\t\t\thourFormat = elementHourFormat;\n\t\t\t}\n\t\t\tlet timePicker24Hour = true;\n\t\t\tlet timeFormat = 'HH:mm';\n\t\t\tif (hourFormat != '24') {\n\t\t\t\ttimePicker24Hour = false;\n\t\t\t\ttimeFormat = 'hh:mm A';\n\t\t\t}\n\t\t\tconst format = dateFormat + ' ' + timeFormat;\n\t\t\tlet isDateRangePicker = elements.data('calendarType') !== 'range';\n\t\t\tlet params = {\n\t\t\t\tparentEl: parentElement,\n\t\t\t\tsingleDatePicker: isDateRangePicker,\n\t\t\t\tshowDropdowns: true,\n\t\t\t\ttimePicker: true,\n\t\t\t\tautoUpdateInput: false,\n\t\t\t\ttimePicker24Hour: timePicker24Hour,\n\t\t\t\ttimePickerIncrement: 1,\n\t\t\t\tautoApply: true,\n\t\t\t\topens: 'left',\n\t\t\t\tlocale: {\n\t\t\t\t\tformat: format,\n\t\t\t\t\tseparator: ',',\n\t\t\t\t\tapplyLabel: app.vtranslate('JS_APPLY'),\n\t\t\t\t\tcancelLabel: app.vtranslate('JS_CANCEL'),\n\t\t\t\t\tfromLabel: app.vtranslate('JS_FROM'),\n\t\t\t\t\ttoLabel: app.vtranslate('JS_TO'),\n\t\t\t\t\tcustomRangeLabel: app.vtranslate('JS_CUSTOM'),\n\t\t\t\t\tweekLabel: app.vtranslate('JS_WEEK').substr(0, 1),\n\t\t\t\t\tfirstDay: CONFIG.firstDayOfWeekNo,\n\t\t\t\t\tdaysOfWeek: App.Fields.Date.daysTranslated,\n\t\t\t\t\tmonthNames: App.Fields.Date.fullMonthsTranslated\n\t\t\t\t}\n\t\t\t};\n\t\t\tif (typeof customParams !== 'undefined') {\n\t\t\t\tparams = $.extend(params, customParams);\n\t\t\t}\n\t\t\telements\n\t\t\t\t.daterangepicker(params)\n\t\t\t\t.on('apply.daterangepicker', function applyDateRangePickerHandler(ev, picker) {\n\t\t\t\t\tif (isDateRangePicker) {\n\t\t\t\t\t\t$(this).val(picker.startDate.format(format));\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$(this).val(picker.startDate.format(format) + ',' + picker.endDate.format(format));\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.on('showCalendar.daterangepicker', (ev, picker) => {\n\t\t\t\t\tApp.Fields.Utils.positionPicker(ev, picker);\n\t\t\t\t\tpicker.container.addClass('js-visible');\n\t\t\t\t});\n\t\t\telements.each((index, element) => {\n\t\t\t\tApp.Fields.Utils.registerMobileDateRangePicker($(element));\n\t\t\t});\n\t\t}\n\t},\n\tColors: {\n\t\t/**\n\t\t * Function to check whether the color is dark or light\n\t\t */\n\t\tgetColorContrast: function(hexcolor) {\n\t\t\tvar r = parseInt(hexcolor.substr(0, 2), 16);\n\t\t\tvar g = parseInt(hexcolor.substr(2, 2), 16);\n\t\t\tvar b = parseInt(hexcolor.substr(4, 2), 16);\n\t\t\tvar yiq = (r * 299 + g * 587 + b * 114) / 1000;\n\t\t\treturn yiq >= 128 ? 'light' : 'dark';\n\t\t},\n\t\tgetRandomColor: function() {\n\t\t\tvar letters = '0123456789ABCDEF'.split('');\n\t\t\tvar color = '#';\n\t\t\tfor (var i = 0; i < 6; i++) {\n\t\t\t\tcolor += letters[Math.floor(Math.random() * 16)];\n\t\t\t}\n\t\t\treturn color;\n\t\t},\n\t\tgetRandomColors: function(count) {\n\t\t\tconst colors = [];\n\t\t\tfor (var i = 0; i < count; i++) {\n\t\t\t\tcolors.push(this.getRandomColor());\n\t\t\t}\n\t\t\treturn colors;\n\t\t},\n\t\tshowPicker({ color, fieldToUpdate, bgToUpdate, cb }) {\n\t\t\tlet registerPickerEvents = modalContainer => {\n\t\t\t\tlet picker = window.ColorPicker.mount({\n\t\t\t\t\tel: modalContainer.find('.js-color-picker')[0],\n\t\t\t\t\tcurrentColor: color\n\t\t\t\t});\n\t\t\t\tmodalContainer.find('.js-modal__save').on('click', _ => {\n\t\t\t\t\tlet newColor = picker.getColor().hex;\n\t\t\t\t\tcb && cb(newColor);\n\t\t\t\t\tbgToUpdate && bgToUpdate.css('background', newColor);\n\t\t\t\t\tfieldToUpdate && fieldToUpdate.val(newColor);\n\t\t\t\t\tapp.hideModalWindow(false, modalContainer.closest('.js-modal-container')[0].id);\n\t\t\t\t});\n\t\t\t};\n\t\t\tlet url = `index.php?module=AppComponents&view=ColorPickerModal${\n\t\t\t\tcolor ? '&color=' + color.substring(1) : ''\n\t\t\t}`;\n\t\t\tapp.showModalWindow({ url, cb: registerPickerEvents.bind(this) });\n\t\t}\n\t},\n\tText: {\n\t\t/**\n\t\t * Register clip\n\t\t * @param {HTMLElement|jQuery} container\n\t\t * @param {string} key\n\t\t * @returns {ClipboardJS|undefined}\n\t\t */\n\t\tregisterCopyClipboard: function(container, key = '.clipboard') {\n\t\t\tif (typeof container !== 'object') {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tcontainer = $(container).get(0);\n\t\t\tlet elements = container.querySelectorAll(key);\n\t\t\tif (elements.length === 0) {\n\t\t\t\telements = key;\n\t\t\t\tcontainer = '';\n\t\t\t}\n\t\t\treturn new ClipboardJS(elements, {\n\t\t\t\tcontainer: container,\n\t\t\t\ttext: function(trigger) {\n\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\ttext: app.vtranslate('JS_NOTIFY_COPY_TEXT'),\n\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t});\n\t\t\t\t\ttrigger = $(trigger);\n\t\t\t\t\tconst element = $(trigger.data('copyTarget'), container);\n\t\t\t\t\tlet val;\n\t\t\t\t\tif (typeof trigger.data('copyType') !== 'undefined') {\n\t\t\t\t\t\tif (element.is('select')) {\n\t\t\t\t\t\t\tval = element.find('option:selected').data(trigger.data('copyType'));\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tval = element.data(trigger.data('copyType'));\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (typeof trigger.data('copy-attribute') !== 'undefined') {\n\t\t\t\t\t\tval = trigger.data(trigger.data('copy-attribute'));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tval = element.val();\n\t\t\t\t\t}\n\t\t\t\t\treturn val;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tEditor: class {\n\t\t\tconstructor(parentElement, params) {\n\t\t\t\tlet elements;\n\t\t\t\tif (typeof parentElement === 'undefined') {\n\t\t\t\t\tparentElement = $('body');\n\t\t\t\t} else {\n\t\t\t\t\tparentElement = $(parentElement);\n\t\t\t\t}\n\t\t\t\tif (parentElement.hasClass('js-editor') && !parentElement.prop('disabled')) {\n\t\t\t\t\telements = parentElement;\n\t\t\t\t} else {\n\t\t\t\t\telements = $('.js-editor:not([disabled])', parentElement);\n\t\t\t\t}\n\t\t\t\tif (elements.length !== 0 && typeof elements !== 'undefined') {\n\t\t\t\t\tthis.isModal = elements.closest('.js-modal-container').length;\n\t\t\t\t\tif (this.isModal) {\n\t\t\t\t\t\tlet self = this;\n\t\t\t\t\t\tthis.progressInstance = $.progressIndicator({\n\t\t\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\t\t\tenabled: true,\n\t\t\t\t\t\t\t\tonBlock: () => {\n\t\t\t\t\t\t\t\t\tself.loadEditor(elements, params);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.loadEditor(elements, params);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/*\n\t\t\t *Function to set the textArea element\n\t\t\t */\n\t\t\tsetElement(element) {\n\t\t\t\tthis.element = $(element);\n\t\t\t\treturn this;\n\t\t\t}\n\n\t\t\t/*\n\t\t\t *Function to get the textArea element\n\t\t\t */\n\t\t\tgetElement() {\n\t\t\t\treturn this.element;\n\t\t\t}\n\n\t\t\t/*\n\t\t\t * Function to return Element's id atrribute value\n\t\t\t */\n\t\t\tgetElementId() {\n\t\t\t\treturn this.getElement().attr('id');\n\t\t\t}\n\n\t\t\t/*\n\t\t\t * Function to get the instance of ckeditor\n\t\t\t */\n\t\t\tgetEditorInstanceFromName() {\n\t\t\t\treturn CKEDITOR.instances[this.getElementId()];\n\t\t\t}\n\n\t\t\t/*\n\t\t\t * Function to load CkEditor\n\t\t\t * @param {HTMLElement|jQuery} element on which CkEditor has to be loaded\n\t\t\t * @param {Object} customConfig custom configurations for ckeditor\n\t\t\t */\n\t\t\tloadEditor(element, customConfig) {\n\t\t\t\tthis.setElement(element);\n\t\t\t\tconst instance = this.getEditorInstanceFromName(),\n\t\t\t\t\tself = this;\n\t\t\t\tlet config = {\n\t\t\t\t\tlanguage: CONFIG.langKey,\n\t\t\t\t\tallowedContent: true,\n\t\t\t\t\textraAllowedContent: 'div{page-break-after*}',\n\t\t\t\t\tformat_tags: 'p;h1;h2;h3;h4;h5;h6;pre;address;div',\n\t\t\t\t\tremoveButtons: '',\n\t\t\t\t\tscayt_autoStartup: false,\n\t\t\t\t\tenterMode: CKEDITOR.ENTER_BR,\n\t\t\t\t\tshiftEnterMode: CKEDITOR.ENTER_P,\n\t\t\t\t\temojiEnabled: false,\n\t\t\t\t\tmentionsEnabled: false,\n\t\t\t\t\ton: {\n\t\t\t\t\t\tinstanceReady: function(evt) {\n\t\t\t\t\t\t\tevt.editor.on('blur', function() {\n\t\t\t\t\t\t\t\tevt.editor.updateElement();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif (self.isModal) {\n\t\t\t\t\t\t\t\tself.progressInstance.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\textraPlugins:\n\t\t\t\t\t\t'colorbutton,pagebreak,colordialog,find,selectall,showblocks,div,print,font,justify,bidi,ckeditor-image-to-base',\n\t\t\t\t\ttoolbar: 'Full',\n\t\t\t\t\ttoolbar_Full: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'clipboard',\n\t\t\t\t\t\t\titems: ['Cut', 'Copy', 'Paste', 'PasteText', 'PasteFromWord', '-', 'Undo', 'Redo']\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ name: 'editing', items: ['Find', 'Replace', '-', 'SelectAll', '-', 'Scayt'] },\n\t\t\t\t\t\t{ name: 'links', items: ['Link', 'Unlink'] },\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'insert',\n\t\t\t\t\t\t\titems: ['ckeditor-image-to-base', 'Table', 'HorizontalRule', 'SpecialChar', 'PageBreak']\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ name: 'tools', items: ['Maximize', 'ShowBlocks'] },\n\t\t\t\t\t\t{ name: 'paragraph', items: ['Outdent', 'Indent', '-', 'Blockquote', 'CreateDiv'] },\n\t\t\t\t\t\t{ name: 'document', items: ['Source', 'Print'] },\n\t\t\t\t\t\t'/',\n\t\t\t\t\t\t{ name: 'styles', items: ['Styles', 'Format', 'Font', 'FontSize'] },\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'basicstyles',\n\t\t\t\t\t\t\titems: ['Bold', 'Italic', 'Underline', 'Strike', 'Subscript', 'Superscript']\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ name: 'colors', items: ['TextColor', 'BGColor'] },\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'paragraph',\n\t\t\t\t\t\t\titems: [\n\t\t\t\t\t\t\t\t'NumberedList',\n\t\t\t\t\t\t\t\t'BulletedList',\n\t\t\t\t\t\t\t\t'-',\n\t\t\t\t\t\t\t\t'JustifyLeft',\n\t\t\t\t\t\t\t\t'JustifyCenter',\n\t\t\t\t\t\t\t\t'JustifyRight',\n\t\t\t\t\t\t\t\t'JustifyBlock',\n\t\t\t\t\t\t\t\t'-',\n\t\t\t\t\t\t\t\t'BidiLtr',\n\t\t\t\t\t\t\t\t'BidiRtl'\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ name: 'basicstyles', items: ['CopyFormatting', 'RemoveFormat'] }\n\t\t\t\t\t],\n\t\t\t\t\ttoolbar_Min: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'basicstyles',\n\t\t\t\t\t\t\titems: ['Bold', 'Italic', 'Underline', 'Strike']\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ name: 'colors', items: ['TextColor', 'BGColor'] },\n\t\t\t\t\t\t{ name: 'tools', items: ['Maximize'] },\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'paragraph',\n\t\t\t\t\t\t\titems: [\n\t\t\t\t\t\t\t\t'NumberedList',\n\t\t\t\t\t\t\t\t'BulletedList',\n\t\t\t\t\t\t\t\t'-',\n\t\t\t\t\t\t\t\t'JustifyLeft',\n\t\t\t\t\t\t\t\t'JustifyCenter',\n\t\t\t\t\t\t\t\t'JustifyRight',\n\t\t\t\t\t\t\t\t'JustifyBlock',\n\t\t\t\t\t\t\t\t'-',\n\t\t\t\t\t\t\t\t'BidiLtr',\n\t\t\t\t\t\t\t\t'BidiRtl'\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ name: 'basicstyles', items: ['CopyFormatting', 'RemoveFormat'] }\n\t\t\t\t\t],\n\t\t\t\t\ttoolbar_Clipboard: [\n\t\t\t\t\t\t{ name: 'document', items: ['Print'] },\n\t\t\t\t\t\t{ name: 'basicstyles', items: ['CopyFormatting', 'RemoveFormat'] },\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'clipboard',\n\t\t\t\t\t\t\titems: ['Cut', 'Copy', 'Paste', 'PasteText', 'PasteFromWord', '-', 'Undo', 'Redo']\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t};\n\t\t\t\tif (typeof customConfig !== 'undefined') {\n\t\t\t\t\tconfig = $.extend(config, customConfig);\n\t\t\t\t}\n\t\t\t\tconfig = Object.assign(config, element.data());\n\t\t\t\tif (config.emojiEnabled) {\n\t\t\t\t\tlet emojiToolbar = { name: 'links', items: ['EmojiPanel'] };\n\t\t\t\t\tif (typeof config.toolbar === 'string') {\n\t\t\t\t\t\tconfig[`toolbar_${config.toolbar}`].push(emojiToolbar);\n\t\t\t\t\t} else if (Array.isArray(config.toolbar)) {\n\t\t\t\t\t\tconfig.toolbar.push(emojiToolbar);\n\t\t\t\t\t}\n\t\t\t\t\tconfig.extraPlugins = config.extraPlugins + ',emoji';\n\t\t\t\t\tconfig.outputTemplate = '{id}';\n\t\t\t\t}\n\t\t\t\tif (config.mentionsEnabled) {\n\t\t\t\t\tconfig.extraPlugins = config.extraPlugins + ',mentions';\n\t\t\t\t\tconfig.mentions = this.registerMentions();\n\t\t\t\t}\n\t\t\t\tif (instance) {\n\t\t\t\t\tCKEDITOR.remove(instance);\n\t\t\t\t}\n\t\t\t\telement.ckeditor(config);\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Register mentions\n\t\t\t * @returns {Array}\n\t\t\t */\n\t\t\tregisterMentions() {\n\t\t\t\tlet minSerchTextLength = app.getMainParams('gsMinLength');\n\t\t\t\treturn [\n\t\t\t\t\t{\n\t\t\t\t\t\tfeed: this.getMentionUsersData.bind(this),\n\t\t\t\t\t\titemTemplate: `<li data-id=\"{id}\" class=\"row no-gutters\">\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"c-img__completion__container\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"{icon} m-auto u-w-fit u-font-size-14px\"></div>\n\t\t\t\t\t\t\t\t\t\t\t\t<img src=\"{image}\" class=\"c-img__completion mr-2\" alt=\"{label}\" title=\"{label}\">\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"col row no-gutters u-overflow-x-hidden\">\n\t\t\t\t\t\t\t\t\t\t\t\t<strong class=\"u-text-ellipsis--no-hover col-12\">{label}</strong>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"fullname col-12 u-text-ellipsis--no-hover text-muted small\">{category}</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</li>`,\n\t\t\t\t\t\toutputTemplate: '<a href=\"#\" data-id=\"@{id}\" data-module=\"{module}\">{label}</a>',\n\t\t\t\t\t\tminChars: minSerchTextLength\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tfeed: App.Fields.Text.getMentionData,\n\t\t\t\t\t\tmarker: '#',\n\t\t\t\t\t\tpattern: /#[wа-я]{1,}|#\\w{3,}$/,\n\t\t\t\t\t\titemTemplate: `<li data-id=\"{id}\" class=\"row no-gutters\">\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"col c-circle-icon mr-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"userIcon-{module}\"></span>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"col row no-gutters u-overflow-x-hidden\">\n\t\t\t\t\t\t\t\t\t\t\t\t<strong class=\"u-text-ellipsis--no-hover col-12\">{label}</strong>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"fullname col-12 u-text-ellipsis--no-hover text-muted small\">{category}</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</li>`,\n\t\t\t\t\t\toutputTemplate: '<a href=\"#\" data-id=\"#{id}\" data-module=\"{module}\">{label}</a>',\n\t\t\t\t\t\tminChars: minSerchTextLength\n\t\t\t\t\t}\n\t\t\t\t];\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Get mention Users data (invoked by ck editor mentions plugin)\n\t\t\t * @param {object} opts\n\t\t\t * @param {function} callback\n\t\t\t */\n\t\t\tgetMentionUsersData(opts, callback) {\n\t\t\t\tApp.Fields.Text.getMentionData(opts, callback, 'owners');\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Completions class for contenteditable html element for records, users and emojis. Params can be passed in data-completions- of contenteditable element or as argument. Default params:\n\t\t * {\n\t\t \t\tcompletionsCollection: {\n\t\t\t\t\t\trecords: true,\n\t\t\t\t\t\tusers: true,\n\t\t\t\t\t\temojis: true\n\t\t\t\t\t}\n\t\t\t}\n\t\t */\n\t\tCompletions: class {\n\t\t\t/**\n\t\t\t * Constructor\n\t\t\t * @param {jQuery} inputDiv - contenteditable div\n\t\t\t * @param params\n\t\t\t */\n\t\t\tconstructor(inputDiv = $('.js-completions').eq(0), params = { emojiPanel: true }) {\n\t\t\t\tif (typeof inputDiv === 'undefined' || inputDiv.length === 0) {\n\t\t\t\t\treturn;\n\t\t\t\t} else if (inputDiv.length === undefined) {\n\t\t\t\t\tinputDiv = $(inputDiv);\n\t\t\t\t}\n\t\t\t\tlet basicParams = {\n\t\t\t\t\tcompletionsCollection: {\n\t\t\t\t\t\trecords: true,\n\t\t\t\t\t\tusers: true,\n\t\t\t\t\t\temojis: true\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tthis.params = Object.assign(basicParams, inputDiv.data(), params);\n\t\t\t\tthis.inputDiv = inputDiv;\n\t\t\t\tthis.collection = [];\n\t\t\t\tif (this.params.completionsCollection.records) {\n\t\t\t\t\tthis.collection.push(this.registerMentionCollection('#'));\n\t\t\t\t}\n\t\t\t\tif (this.params.completionsCollection.users) {\n\t\t\t\t\tthis.collection.push(this.registerMentionCollection('@', 'owners'));\n\t\t\t\t}\n\t\t\t\tif (this.params.completionsCollection.emojis) {\n\t\t\t\t\tthis.collection.push(this.registerEmojiCollection());\n\t\t\t\t}\n\t\t\t\tthis.register(inputDiv);\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Register mention collection for tribute.js\n\t\t\t * @param {string} symbol\n\t\t\t * @param {string} searchModule\n\t\t\t * @returns {{trigger: *, selectTemplate: selectTemplate, values: values, menuItemTemplate: (function(*): string), lookup: string, fillAttr: string}}\n\t\t\t */\n\t\t\tregisterMentionCollection(symbol, searchModule = '-') {\n\t\t\t\tlet self = this;\n\t\t\t\treturn {\n\t\t\t\t\ttrigger: symbol,\n\t\t\t\t\tselectTemplate: function(item) {\n\t\t\t\t\t\tif (this.range.isContentEditable(this.current.element)) {\n\t\t\t\t\t\t\treturn `<a href=\"#\" data-id=\"${symbol + item.original.id}\" data-module=\"${\n\t\t\t\t\t\t\t\titem.original.module\n\t\t\t\t\t\t\t}\">${item.original.label.split('(')[0].trim()}</a>`;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn symbol + item.original.label;\n\t\t\t\t\t},\n\t\t\t\t\tvalues: (text, cb) => {\n\t\t\t\t\t\tif (text.length >= CONFIG.globalSearchAutocompleteMinLength) {\n\t\t\t\t\t\t\tApp.Fields.Text.getMentionData(text, users => cb(users), searchModule);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tmenuItemTemplate: function(item) {\n\t\t\t\t\t\treturn self.mentionTemplate({\n\t\t\t\t\t\t\tid: item.original.id,\n\t\t\t\t\t\t\tmodule: item.original.module,\n\t\t\t\t\t\t\tcategory: item.original.category,\n\t\t\t\t\t\t\timage: item.original.image,\n\t\t\t\t\t\t\tlabel: item.original.label,\n\t\t\t\t\t\t\ticon: item.original.icon\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tlookup: 'label',\n\t\t\t\t\tfillAttr: 'label'\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Register emoji collection for tribute.js\n\t\t\t * @returns {{trigger: string, selectTemplate: selectTemplate, menuItemTemplate: (function(*): string), lookup: string, fillAttr: string, values: Array}}\n\t\t\t */\n\t\t\tregisterEmojiCollection() {\n\t\t\t\treturn {\n\t\t\t\t\ttrigger: ':',\n\t\t\t\t\tselectTemplate: function(item) {\n\t\t\t\t\t\tif (this.range.isContentEditable(this.current.element)) {\n\t\t\t\t\t\t\treturn `<span data-id=\"${item.original.id}\">${item.original.symbol}</span>`;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn item.original.symbol;\n\t\t\t\t\t},\n\t\t\t\t\tmenuItemTemplate: function(item) {\n\t\t\t\t\t\treturn `<span data-id=\"${item.original.id}\">${item.original.symbol} ${item.original.id}</span>`;\n\t\t\t\t\t},\n\t\t\t\t\tlookup: 'id',\n\t\t\t\t\tfillAttr: 'keywords',\n\t\t\t\t\tvalues: (text, cb) => {\n\t\t\t\t\t\tif (text.length >= 2) {\n\t\t\t\t\t\t\tcb(App.emoji);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t/*\n\t\t\t * Mention template\n\t\t\t */\n\t\t\tmentionTemplate(params) {\n\t\t\t\tlet icon = '';\n\t\t\t\tif (params.module !== undefined) {\n\t\t\t\t\ticon = `userIcon-${params.module}`;\n\t\t\t\t}\n\t\t\t\tif (params.icon !== undefined && params.icon !== '') {\n\t\t\t\t\ticon = params.icon;\n\t\t\t\t}\n\t\t\t\tlet avatar = `<div class=\"col c-circle-icon mr-1\">\n\t\t\t\t\t\t\t\t<span class=\"${icon}\"></span>\n\t\t\t\t\t\t\t</div>`;\n\t\t\t\tif (params.image !== undefined && params.image !== '') {\n\t\t\t\t\tavatar = `<div class=\"c-img__completion__container\"><img src=\"${params.image}\" class=\"c-img__completion mr-2\" alt=${params.label}\" title=\"${params.label}\"></div>`;\n\t\t\t\t}\n\t\t\t\treturn `<div data-id=\"${params.id}\" class=\"row no-gutters\">\n\t\t\t\t\t\t\t${avatar}\n\t\t\t\t\t\t\t<div class=\"col row no-gutters u-overflow-x-hidden\">\n\t\t\t\t\t\t\t\t<strong class=\"u-text-ellipsis--no-hover col-12\">${params.label}</strong>\n\t\t\t\t\t\t\t\t<div class=\"fullname col-12 u-text-ellipsis--no-hover text-muted small\">${params.category}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>`;\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Register\n\t\t\t * @param {jQuery} inputDiv - contenteditable div\n\t\t\t */\n\t\t\tregister(inputDiv) {\n\t\t\t\tconst self = this;\n\t\t\t\tthis.completionsCollection = new Tribute({\n\t\t\t\t\tcollection: self.collection,\n\t\t\t\t\tallowSpaces: true,\n\t\t\t\t\treplaceTextSuffix: ''\n\t\t\t\t});\n\t\t\t\tthis.completionsCollection.attach(inputDiv[0]);\n\t\t\t\tif (this.params.completionsTextarea !== undefined) {\n\t\t\t\t\tthis.registerCompletionsTextArea(inputDiv);\n\t\t\t\t}\n\t\t\t\tif (this.params.completionsButtons !== undefined) {\n\t\t\t\t\tthis.registerCompletionsButtons();\n\t\t\t\t}\n\t\t\t\tif (this.params.emojiPanel) {\n\t\t\t\t\tthis.registerEmojiPanel(\n\t\t\t\t\t\tthis.inputDiv,\n\t\t\t\t\t\tthis.inputDiv\n\t\t\t\t\t\t\t.parents()\n\t\t\t\t\t\t\t.eq(3)\n\t\t\t\t\t\t\t.find('.js-completions__emojis')\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tif (App.emoji === undefined) {\n\t\t\t\t\tfetch(`${CONFIG.siteUrl}/vendor/ckeditor/ckeditor/plugins/emoji/emoji.json`)\n\t\t\t\t\t\t.then(response => response.json())\n\t\t\t\t\t\t.then(response => {\n\t\t\t\t\t\t\tApp.emoji = response;\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch(error => console.error('Error:', error));\n\t\t\t\t}\n\t\t\t\tthis.registerTagClick(inputDiv);\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Register completons hidden textarea - useful with forms\n\t\t\t * @param {jQuery} inputDiv - contenteditable div\n\t\t\t */\n\t\t\tregisterCompletionsTextArea(inputDiv) {\n\t\t\t\tlet textarea = inputDiv.siblings(`[name=${inputDiv.attr('id')}]`);\n\t\t\t\tinputDiv\n\t\t\t\t\t.on('focus', function() {\n\t\t\t\t\t\ttextarea.val(inputDiv.html());\n\t\t\t\t\t})\n\t\t\t\t\t.on('blur keyup paste input', function() {\n\t\t\t\t\t\ttextarea.val(inputDiv.html());\n\t\t\t\t\t});\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Register tag click\n\t\t\t * @param inputDiv\n\t\t\t */\n\t\t\tregisterTagClick(inputDiv) {\n\t\t\t\tinputDiv\n\t\t\t\t\t.closest('.js-completions__container')\n\t\t\t\t\t.find('.js-completions__messages')\n\t\t\t\t\t.on('click', '.js-completions__tag', e => {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tinputDiv.append($(e.target).clone());\n\t\t\t\t\t});\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Register completions buttons\n\t\t\t */\n\t\t\tregisterCompletionsButtons() {\n\t\t\t\tlet completionsContainer = this.inputDiv.parents().eq(3);\n\t\t\t\tcompletionsContainer.find('.js-completions__users').on('click', e => {\n\t\t\t\t\tthis.completionsCollection.showMenuForCollection(this.inputDiv[0], 1);\n\t\t\t\t});\n\t\t\t\tcompletionsContainer.find('.js-completions__records').on('click', e => {\n\t\t\t\t\tthis.completionsCollection.showMenuForCollection(this.inputDiv[0], 0);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Register emojipanel library\n\t\t\t * @param {jQuery} inputDiv - contenteditable div\n\t\t\t * @param {jQuery} emojisContainer\n\t\t\t */\n\t\t\tregisterEmojiPanel(inputDiv, emojisContainer) {\n\t\t\t\tnew EmojiPanel({\n\t\t\t\t\tcontainer: '.js-completions__emojis',\n\t\t\t\t\tjson_url: CONFIG.siteUrl + 'libraries/emojipanel/dist/emojis.json'\n\t\t\t\t});\n\t\t\t\temojisContainer.on('click', e => {\n\t\t\t\t\tlet element = $(e.target);\n\t\t\t\t\telement.toggleClass('active');\n\t\t\t\t});\n\t\t\t\temojisContainer.on('click', '.emoji', e => {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tif ($(e.currentTarget).data('char') !== undefined) {\n\t\t\t\t\t\tinputDiv.append(`${$(e.currentTarget).data('char')}`);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\temojisContainer.on('mouseenter', '.emoji', e => {\n\t\t\t\t\tif ($(e.currentTarget).data('name') !== undefined) {\n\t\t\t\t\t\temojisContainer.find('.emoji-hovered').remove();\n\t\t\t\t\t\temojisContainer\n\t\t\t\t\t\t\t.find('footer')\n\t\t\t\t\t\t\t.prepend(\n\t\t\t\t\t\t\t\t`<div class=\"emoji-hovered\">${$(e.currentTarget).data('char') +\n\t\t\t\t\t\t\t\t\t' ' +\n\t\t\t\t\t\t\t\t\t$(e.currentTarget).data('name')}</div>`\n\t\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\temojisContainer.on('clickoutside', () => {\n\t\t\t\t\temojisContainer.removeClass('active');\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Get mention data (invoked by ck editor mentions plugin and tribute.js)\n\t\t * @param {object} opts\n\t\t * @param {function} callback\n\t\t * @param {string} searchModule\n\t\t */\n\t\tgetMentionData(text, callback, searchModule = '-') {\n\t\t\tlet basicSearch = new Vtiger_BasicSearch_Js();\n\t\t\tbasicSearch.reduceNumberResults = app.getMainParams('gsAmountResponse');\n\t\t\tbasicSearch.returnHtml = false;\n\t\t\tbasicSearch.searchModule = searchModule;\n\t\t\tif (typeof text === 'object') {\n\t\t\t\ttext = text.query.toLowerCase();\n\t\t\t}\n\t\t\tif (searchModule === 'owners') {\n\t\t\t\tAppConnector.request({\n\t\t\t\t\taction: 'Search',\n\t\t\t\t\tmode: 'owners',\n\t\t\t\t\tvalue: text\n\t\t\t\t}).done(data => {\n\t\t\t\t\tcallback(data.result);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tbasicSearch.search(text).done(function(data) {\n\t\t\t\t\tdata = JSON.parse(data);\n\t\t\t\t\tlet serverDataFormat = data.result,\n\t\t\t\t\t\treponseDataList = [];\n\t\t\t\t\tfor (let id in serverDataFormat) {\n\t\t\t\t\t\tlet responseData = serverDataFormat[id];\n\t\t\t\t\t\treponseDataList.push(responseData);\n\t\t\t\t\t}\n\t\t\t\t\tcallback(reponseDataList);\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Destroy ckEditor\n\t\t * @param {jQuery} element\n\t\t */\n\t\tdestroyEditor(element) {\n\t\t\tif (typeof CKEDITOR !== 'undefined' && CKEDITOR.instances && element.attr('id') in CKEDITOR.instances) {\n\t\t\t\tCKEDITOR.instances[element.attr('id')].destroy();\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Generate random character\n\t\t * @returns {string}\n\t\t */\n\t\tgenerateRandomChar() {\n\t\t\tconst chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZ';\n\t\t\tconst rand = Math.floor(Math.random() * chars.length);\n\t\t\treturn chars.substring(rand, rand + 1);\n\t\t},\n\n\t\t/**\n\t\t * generate random hash\n\t\t * @returns {string}\n\t\t */\n\t\tgenerateRandomHash(prefix = '') {\n\t\t\tprefix = prefix.toString();\n\t\t\tconst hash =\n\t\t\t\tMath.random()\n\t\t\t\t\t.toString(36)\n\t\t\t\t\t.substr(2, 10) +\n\t\t\t\tMath.random()\n\t\t\t\t\t.toString(36)\n\t\t\t\t\t.substr(2, 10) +\n\t\t\t\tnew Date().valueOf() +\n\t\t\t\tMath.random()\n\t\t\t\t\t.toString(36)\n\t\t\t\t\t.substr(2, 6);\n\t\t\treturn prefix ? prefix + hash : hash;\n\t\t}\n\t},\n\tPicklist: {\n\t\t/**\n\t\t * Function which will convert ui of select boxes.\n\t\t * @params parent - select element\n\t\t * @params view - select2\n\t\t * @params viewParams - select2 params\n\t\t * @returns jquery object list which represents changed select elements\n\t\t */\n\t\tchangeSelectElementView: function(parent, view, viewParams) {\n\t\t\tif (typeof parent === 'undefined') {\n\t\t\t\tparent = $('body');\n\t\t\t}\n\t\t\tif (typeof view === 'undefined') {\n\t\t\t\tconst select2Elements = $('select.select2', parent).toArray();\n\t\t\t\tselect2Elements.forEach(elem => {\n\t\t\t\t\tthis.changeSelectElementView($(elem), 'select2', viewParams);\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t//If view is select2, This will convert the ui of select boxes to select2 elements.\n\t\t\tif (view === 'select2') {\n\t\t\t\treturn App.Fields.Picklist.showSelect2ElementView(parent, viewParams);\n\t\t\t} else {\n\t\t\t\tapp.errorLog(new Error(`Unknown select type [${view}]`));\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Function which will show the select2 element for select boxes . This will use select2 library\n\t\t */\n\t\tshowSelect2ElementView(selectElement, params) {\n\t\t\tlet self = this;\n\t\t\tselectElement = $(selectElement);\n\t\t\tif (typeof params === 'undefined') {\n\t\t\t\tparams = {};\n\t\t\t}\n\t\t\tif ($(selectElement).length > 1) {\n\t\t\t\treturn $(selectElement).each((index, element) => {\n\t\t\t\t\tthis.showSelect2ElementView($(element).eq(0), params);\n\t\t\t\t});\n\t\t\t}\n\t\t\tparams = this.registerParams(selectElement, params);\n\t\t\tif (params.selectLazy && !selectElement.hasClass('js-lazy-select-active')) {\n\t\t\t\treturn App.Fields.Picklist.showLazySelect(selectElement, {\n\t\t\t\t\tlazyElements: app.getMainParams('picklistLimit'),\n\t\t\t\t\tdata: this.registerLazySelectOptions(selectElement),\n\t\t\t\t\tselectParams: params\n\t\t\t\t});\n\t\t\t}\n\t\t\tconst computeDropdownHeight = (e, dropdownContainer) => {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tif (!dropdownContainer.find('.select2-dropdown--above').length) {\n\t\t\t\t\t\tconst dropdownList = dropdownContainer.find('.select2-results > .select2-results__options');\n\t\t\t\t\t\tconst marginBottom = 35;\n\t\t\t\t\t\tconst selectOffsetTop = $(e.currentTarget).offset().top;\n\t\t\t\t\t\tdropdownList.css({\n\t\t\t\t\t\t\t'max-height':\n\t\t\t\t\t\t\t\t$(window).height() -\n\t\t\t\t\t\t\t\tselectOffsetTop -\n\t\t\t\t\t\t\t\tmarginBottom -\n\t\t\t\t\t\t\t\t(dropdownList.offset().top - selectOffsetTop)\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}, 100);\n\t\t\t};\n\t\t\tselectElement.each(function() {\n\t\t\t\tlet select = $(this);\n\t\t\t\tlet htmlBoolParams = select.data('select');\n\t\t\t\tif (htmlBoolParams === 'tags') {\n\t\t\t\t\tparams.tags = true;\n\t\t\t\t\tparams.tokenSeparators = [','];\n\t\t\t\t} else {\n\t\t\t\t\tparams[htmlBoolParams] = true;\n\t\t\t\t}\n\t\t\t\tselect\n\t\t\t\t\t.select2(params)\n\t\t\t\t\t.on('select2:open', e => {\n\t\t\t\t\t\tcomputeDropdownHeight(e, $('.select2-container--open:not(.select2-container--below)'));\n\t\t\t\t\t\tif (select.data('unselecting')) {\n\t\t\t\t\t\t\tselect.removeData('unselecting');\n\t\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t\tselect.each(function() {\n\t\t\t\t\t\t\t\t\t$(this).select2('close');\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}, 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlet instance = $(e.currentTarget).data('select2');\n\t\t\t\t\t\tinstance.$dropdown.css('z-index', 1000002);\n\t\t\t\t\t})\n\t\t\t\t\t.on('select2:unselect', () => {\n\t\t\t\t\t\tselect.data('unselecting', true);\n\t\t\t\t\t});\n\t\t\t\tif (typeof self[params.selectCb] === 'function') {\n\t\t\t\t\tself[params.selectCb](select, params);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn selectElement;\n\t\t},\n\t\t/**\n\t\t * Register params\n\t\t * @param selectElement\n\t\t * @param params\n\t\t * @returns {*}\n\t\t */\n\t\tregisterParams(selectElement, params) {\n\t\t\tif (typeof params.dropdownParent === 'undefined') {\n\t\t\t\tconst modalParent = $(selectElement).closest('.modal-body');\n\t\t\t\tif (modalParent.length) {\n\t\t\t\t\tparams.dropdownParent = modalParent;\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet data = selectElement.data();\n\t\t\tif (data != null) {\n\t\t\t\tparams = $.extend(data, params);\n\t\t\t}\n\t\t\tparams.language = {};\n\t\t\tparams.theme = 'bootstrap';\n\t\t\tconst width = $(selectElement).data('width');\n\t\t\tif (typeof width !== 'undefined') {\n\t\t\t\tparams.width = width;\n\t\t\t} else {\n\t\t\t\tparams.width = '100%';\n\t\t\t}\n\t\t\tparams.containerCssClass = 'form-control w-100';\n\t\t\tconst containerCssClass = selectElement.data('containerCssClass');\n\t\t\tif (typeof containerCssClass !== 'undefined') {\n\t\t\t\tparams.containerCssClass += ' ' + containerCssClass;\n\t\t\t}\n\t\t\tparams.language.noResults = function(msn) {\n\t\t\t\treturn app.vtranslate('JS_NO_RESULTS_FOUND');\n\t\t\t};\n\n\t\t\t// Sort DOM nodes alphabetically in select box.\n\t\t\tif (typeof params['customSortOptGroup'] !== 'undefined' && params['customSortOptGroup']) {\n\t\t\t\t$('optgroup', selectElement).each(function() {\n\t\t\t\t\tvar optgroup = $(this);\n\t\t\t\t\tvar options = optgroup\n\t\t\t\t\t\t.children()\n\t\t\t\t\t\t.toArray()\n\t\t\t\t\t\t.sort(function(a, b) {\n\t\t\t\t\t\t\tvar aText = $(a).text();\n\t\t\t\t\t\t\tvar bText = $(b).text();\n\t\t\t\t\t\t\treturn aText < bText ? 1 : -1;\n\t\t\t\t\t\t});\n\t\t\t\t\t$.each(options, function(i, v) {\n\t\t\t\t\t\toptgroup.prepend(v);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\tdelete params['customSortOptGroup'];\n\t\t\t}\n\n\t\t\t//formatSelectionTooBig param is not defined even it has the maximumSelectionLength,\n\t\t\t//then we should send our custom function for formatSelectionTooBig\n\t\t\tif (\n\t\t\t\ttypeof params.maximumSelectionLength !== 'undefined' &&\n\t\t\t\ttypeof params.formatSelectionTooBig === 'undefined'\n\t\t\t) {\n\t\t\t\t//custom function which will return the maximum selection size exceeds message.\n\t\t\t\tvar formatSelectionExceeds = function(limit) {\n\t\t\t\t\treturn (\n\t\t\t\t\t\tapp.vtranslate('JS_YOU_CAN_SELECT_ONLY') +\n\t\t\t\t\t\t' ' +\n\t\t\t\t\t\tlimit.maximum +\n\t\t\t\t\t\t' ' +\n\t\t\t\t\t\tapp.vtranslate('JS_ITEMS')\n\t\t\t\t\t);\n\t\t\t\t};\n\t\t\t\tparams.language.maximumSelected = formatSelectionExceeds;\n\t\t\t}\n\t\t\tif (typeof selectElement.attr('multiple') !== 'undefined' && !params.placeholder) {\n\t\t\t\tparams.placeholder = app.vtranslate('JS_SELECT_SOME_OPTIONS');\n\t\t\t} else if (!params.placeholder) {\n\t\t\t\tparams.placeholder = app.vtranslate('JS_SELECT_AN_OPTION');\n\t\t\t}\n\t\t\tif (typeof params.templateResult === 'undefined') {\n\t\t\t\tparams.templateResult = function(data, container) {\n\t\t\t\t\tif (data.element && data.element.className) {\n\t\t\t\t\t\t$(container).addClass(data.element.className);\n\t\t\t\t\t}\n\t\t\t\t\tlet actualElement = $(data.element);\n\t\t\t\t\tif (\n\t\t\t\t\t\ttypeof selectElement.data('showAdditionalIcons') !== 'undefined' &&\n\t\t\t\t\t\tactualElement.is('option')\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t'<div class=\"js-element__title d-flex justify-content-between\" data-js=\"appendTo\"><div class=\"u-text-ellipsis--no-hover\">' +\n\t\t\t\t\t\t\tactualElement.text() +\n\t\t\t\t\t\t\t'</div></div>'\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tif (typeof data.name === 'undefined') {\n\t\t\t\t\t\treturn data.text;\n\t\t\t\t\t}\n\t\t\t\t\tif (data.type == 'optgroup') {\n\t\t\t\t\t\treturn '<strong>' + data.name + '</strong>';\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn '<span>' + data.name + '</span>';\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tparams.escapeMarkup = function(markup) {\n\t\t\t\t\treturn markup;\n\t\t\t\t};\n\t\t\t} else if (typeof this[params.templateResult] === 'function') {\n\t\t\t\tparams.templateResult = this[params.templateResult];\n\t\t\t}\n\t\t\tif (typeof params.templateSelection === 'undefined') {\n\t\t\t\tparams.templateSelection = function(data, container) {\n\t\t\t\t\tif (data.element && data.element.className) {\n\t\t\t\t\t\t$(container).addClass(data.element.className);\n\t\t\t\t\t}\n\t\t\t\t\tif (data.text === '') {\n\t\t\t\t\t\treturn data.name;\n\t\t\t\t\t}\n\t\t\t\t\treturn data.text;\n\t\t\t\t};\n\t\t\t} else if (typeof this[params.templateSelection] === 'function') {\n\t\t\t\tparams.templateSelection = this[params.templateSelection];\n\t\t\t}\n\t\t\tif (selectElement.data('ajaxSearch') === 1) {\n\t\t\t\tparams = this.registerAjaxParams(selectElement, params);\n\t\t\t}\n\t\t\treturn params;\n\t\t},\n\t\t/**\n\t\t * Register ajax params\n\t\t * @param selectElement\n\t\t * @param params\n\t\t * @returns {*}\n\t\t */\n\t\tregisterAjaxParams(selectElement, params) {\n\t\t\tparams.tags = false;\n\t\t\tparams.language.searching = function() {\n\t\t\t\treturn app.vtranslate('JS_SEARCHING');\n\t\t\t};\n\t\t\tparams.language.inputTooShort = function(args) {\n\t\t\t\tvar remainingChars = args.minimum - args.input.length;\n\t\t\t\treturn app.vtranslate('JS_INPUT_TOO_SHORT').replace('_LENGTH_', remainingChars);\n\t\t\t};\n\t\t\tparams.language.errorLoading = function() {\n\t\t\t\treturn app.vtranslate('JS_NO_RESULTS_FOUND');\n\t\t\t};\n\t\t\tparams.placeholder = '';\n\t\t\tparams.ajax = {\n\t\t\t\turl: selectElement.data('ajaxUrl'),\n\t\t\t\tdataType: 'json',\n\t\t\t\tdelay: 250,\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdata: function(params) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tvalue: params.term, // search term\n\t\t\t\t\t\tpage: params.page\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t\tprocessResults: function(data, params) {\n\t\t\t\t\tvar items = new Array();\n\t\t\t\t\tif (data.success == true) {\n\t\t\t\t\t\tselectElement.find('option').each(function() {\n\t\t\t\t\t\t\tvar currentTarget = $(this);\n\t\t\t\t\t\t\titems.push({\n\t\t\t\t\t\t\t\tlabel: currentTarget.html(),\n\t\t\t\t\t\t\t\tvalue: currentTarget.val()\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t\titems = items.concat(data.result.items);\n\t\t\t\t\t}\n\t\t\t\t\treturn {\n\t\t\t\t\t\tresults: items,\n\t\t\t\t\t\tpagination: {\n\t\t\t\t\t\t\tmore: false\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t\tcache: false\n\t\t\t};\n\t\t\tparams.escapeMarkup = function(markup) {\n\t\t\t\tif (markup !== 'undefined') return markup;\n\t\t\t};\n\t\t\tvar minimumInputLength = 3;\n\t\t\tif (selectElement.data('minimumInput') !== 'undefined') {\n\t\t\t\tminimumInputLength = selectElement.data('minimumInput');\n\t\t\t}\n\t\t\tparams.minimumInputLength = minimumInputLength;\n\t\t\tparams.templateResult = function(data) {\n\t\t\t\tif (typeof data.name === 'undefined') {\n\t\t\t\t\treturn data.text;\n\t\t\t\t}\n\t\t\t\tif (data.type == 'optgroup') {\n\t\t\t\t\treturn '<strong>' + data.name + '</strong>';\n\t\t\t\t} else {\n\t\t\t\t\treturn '<span>' + data.name + '</span>';\n\t\t\t\t}\n\t\t\t};\n\t\t\tparams.templateSelection = function(data, container) {\n\t\t\t\tif (data.text === '') {\n\t\t\t\t\treturn data.name;\n\t\t\t\t}\n\t\t\t\treturn data.text;\n\t\t\t};\n\t\t\treturn params;\n\t\t},\n\t\t/**\n\t\t * Prepend template with a flag, function is called select2\n\t\t * @param optionData\n\t\t * @returns {Mixed|jQuery|HTMLElement}\n\t\t */\n\t\tprependDataTemplate(optionData) {\n\t\t\tlet template = optionData.text;\n\t\t\tif (optionData.id !== undefined && optionData.id !== '') {\n\t\t\t\ttemplate = $(optionData.element.dataset.template);\n\t\t\t\tif (optionData.element.dataset.state !== undefined) {\n\t\t\t\t\t//check if element has icons with different states\n\t\t\t\t\tif (optionData.element.dataset.state === 'active') {\n\t\t\t\t\t\ttemplate\n\t\t\t\t\t\t\t.find('.js-select-option-event')\n\t\t\t\t\t\t\t.removeClass(optionData.element.dataset.iconInactive)\n\t\t\t\t\t\t\t.addClass(optionData.element.dataset.iconActive);\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttemplate\n\t\t\t\t\t\t\t.find('.js-select-option-event')\n\t\t\t\t\t\t\t.removeClass(optionData.element.dataset.iconActive)\n\t\t\t\t\t\t\t.addClass(optionData.element.dataset.iconInactive);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn template;\n\t\t},\n\t\t/**\n\t\t * Register select sortable\n\t\t * @param select\n\t\t * @param params\n\t\t */\n\t\tregisterSelectSortable(select, params) {\n\t\t\tthis.sortSelectOptions(select);\n\t\t\tthis.registerSortEvent(select, params.sortableCb);\n\t\t},\n\t\t/**\n\t\t * Sort elements (options) in select by data-sort-index\n\t\t * @param {jQuery} select2 element\n\t\t */\n\t\tsortSelectOptions(select) {\n\t\t\tselect\n\t\t\t\t.find('option[data-sort-index]')\n\t\t\t\t.sort((a, b) => {\n\t\t\t\t\treturn $(b).data('sort-index') < $(a).data('sort-index') ? 1 : -1;\n\t\t\t\t})\n\t\t\t\t.appendTo(select);\n\t\t},\n\t\t/**\n\t\t * Register select drag and drop sorting\n\t\t * @param {jQuery} select2 element\n\t\t * @param {function} callback function\n\t\t */\n\t\tregisterSortEvent(select, cb = () => {}) {\n\t\t\tlet ul = select.next('.select2-container').first('ul.select2-selection__rendered');\n\t\t\tul.sortable({\n\t\t\t\titems: 'li:not(.select2-search__field)',\n\t\t\t\ttolerance: 'pointer',\n\t\t\t\tstop: function() {\n\t\t\t\t\t$(\n\t\t\t\t\t\tul\n\t\t\t\t\t\t\t.find('.select2-selection__choice')\n\t\t\t\t\t\t\t.get()\n\t\t\t\t\t\t\t.reverse()\n\t\t\t\t\t).each(function() {\n\t\t\t\t\t\tlet optionTitle = $(this).attr('title');\n\t\t\t\t\t\tselect.find('option').each(function() {\n\t\t\t\t\t\t\tif ($(this).text() === optionTitle) {\n\t\t\t\t\t\t\t\tselect.prepend($(this));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t\tcb(select);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register icons events in select2 options\n\t\t * @param selectElement\n\t\t */\n\t\tregisterIconsEvents(selectElement) {\n\t\t\tselectElement.on('select2:selecting', event => {\n\t\t\t\tlet currentTarget = $(event.params.args.originalEvent.target);\n\t\t\t\tif (!currentTarget.hasClass('js-select-option-event') && !currentTarget.is('path')) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tevent.preventDefault();\n\t\t\t\tif (currentTarget.is('path')) {\n\t\t\t\t\t//svg target fix\n\t\t\t\t\tcurrentTarget = currentTarget.closest('.js-select-option-event');\n\t\t\t\t}\n\t\t\t\tlet currentElementData = $(event.params.args.data.element).data(),\n\t\t\t\t\toptionElement = $(event.params.args.data.element),\n\t\t\t\t\tprogressIndicatorElement = $.progressIndicator({ blockInfo: { enabled: true } });\n\t\t\t\tAppConnector.request(currentElementData.url)\n\t\t\t\t\t.done(data => {\n\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tlet response = data.result;\n\t\t\t\t\t\tif (response && response.result) {\n\t\t\t\t\t\t\tif (optionElement.attr('data-state') === 'active') {\n\t\t\t\t\t\t\t\toptionElement.attr('data-state', 'inactive');\n\t\t\t\t\t\t\t\tcurrentTarget.toggleClass(\n\t\t\t\t\t\t\t\t\tcurrentElementData.iconActive + ' ' + currentElementData.iconInactive\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\toptionElement.attr('data-state', 'active');\n\t\t\t\t\t\t\t\tcurrentTarget.toggleClass(\n\t\t\t\t\t\t\t\t\tcurrentElementData.iconInactive + ' ' + currentElementData.iconActive\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (response.message) {\n\t\t\t\t\t\t\t\tVtiger_Helper_Js.showPnotify({ text: response.message, type: 'success' });\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (response && response.message) {\n\t\t\t\t\t\t\tVtiger_Helper_Js.showPnotify({ text: response.message });\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function() {\n\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Show lazy select based on data passed in js.\n\t\t *\n\t\t * @param   {object}  selectElement  jQuery\n\t\t * @param   {object}  params         contains selectParams object, lazyElements number, data array\n\t\t */\n\t\tshowLazySelect(selectElement, params) {\n\t\t\t$.fn.select2.amd.require(['select2/data/array', 'select2/utils'], (ArrayData, Utils) => {\n\t\t\t\tfunction CustomData($element, params) {\n\t\t\t\t\tCustomData.__super__.constructor.call(this, $element, params);\n\t\t\t\t}\n\t\t\t\tUtils.Extend(CustomData, ArrayData);\n\t\t\t\tCustomData.prototype.query = (options, callback) => {\n\t\t\t\t\tlet results = [];\n\t\t\t\t\tif (options.term && options.term !== '') {\n\t\t\t\t\t\tresults = params.data.filter(e => {\n\t\t\t\t\t\t\treturn e.text.toUpperCase().indexOf(options.term.toUpperCase()) >= 0;\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresults = params.data;\n\t\t\t\t\t}\n\t\t\t\t\tif (!('page' in options)) {\n\t\t\t\t\t\toptions.page = 1;\n\t\t\t\t\t}\n\t\t\t\t\tlet data = {};\n\t\t\t\t\tdata.results = results.slice(\n\t\t\t\t\t\t(options.page - 1) * params.lazyElements,\n\t\t\t\t\t\toptions.page * params.lazyElements\n\t\t\t\t\t);\n\t\t\t\t\tdata.pagination = {};\n\t\t\t\t\tdata.pagination.more = options.page * params.lazyElements < results.length;\n\t\t\t\t\tcallback(data);\n\t\t\t\t};\n\t\t\t\tparams.selectParams = Object.assign(params.selectParams, {\n\t\t\t\t\tajax: {},\n\t\t\t\t\tdataAdapter: CustomData\n\t\t\t\t});\n\t\t\t\tselectElement.addClass('js-lazy-select-active');\n\t\t\t\tthis.showSelect2ElementView(selectElement, params.selectParams);\n\t\t\t\tlet selectedOption = selectElement.data('selected-value');\n\t\t\t\tif (selectedOption) {\n\t\t\t\t\tlet text = selectedOption;\n\t\t\t\t\tif (selectElement.data('fieldinfo').picklistvalues.hasOwnProperty(selectedOption)) {\n\t\t\t\t\t\ttext = selectElement.data('fieldinfo').picklistvalues[selectedOption];\n\t\t\t\t\t}\n\t\t\t\t\tthis.createSelectedOption(selectElement, text, selectedOption);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register lazy select options\n\t\t *\n\t\t * @param   {object}  selectElement  [selectElement description]\n\t\t *\n\t\t * @return  {object}                 [return description]\n\t\t */\n\t\tregisterLazySelectOptions(selectElement) {\n\t\t\tlet options = [];\n\t\t\tif (selectElement.data('fieldinfo') && selectElement.data('fieldinfo').picklistvalues) {\n\t\t\t\toptions = $.map(selectElement.data('fieldinfo').picklistvalues, function(val, key) {\n\t\t\t\t\treturn { id: key, text: val };\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\toptions = $.map(selectElement.find('option'), item => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tid: item.value,\n\t\t\t\t\t\telement: item,\n\t\t\t\t\t\ttext: item.text,\n\t\t\t\t\t\tselected: item.selected,\n\t\t\t\t\t\tdisabled: item.disabled\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn options;\n\t\t},\n\t\t/**\n\t\t * Set value.\n\t\t *\n\t\t * @param   {object}  selectElement  [selectElement description]\n\t\t * @param   {string}  searchValue\n\t\t * @param   {string}  type           value|text|all\n\t\t *\n\t\t * @return  {boolean|string}         false or set value\n\t\t */\n\t\tsetValue(selectElement, searchValue, type = 'value') {\n\t\t\tconst option = this.findOption(selectElement, searchValue, type);\n\t\t\tif (!option) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (selectElement.hasClass('js-lazy-select-active')) {\n\t\t\t\tthis.createSelectedOption(selectElement, option.text, option.value);\n\t\t\t} else {\n\t\t\t\tselectElement.val(option.value).trigger('change');\n\t\t\t}\n\t\t\treturn option.value;\n\t\t},\n\t\t/**\n\t\t * Find option.\n\t\t *\n\t\t * @param   {object}  selectElement  [selectElement description]\n\t\t * @param   {string}  searchValue\n\t\t * @param   {string}  type           value|text|all\n\t\t *\n\t\t * @return  {boolean|object}         false or option object\n\t\t */\n\t\tfindOption(selectElement, searchValue, type = 'value') {\n\t\t\tlet foundOption = false;\n\t\t\tconst selectValues = this.getSelectOptions(selectElement);\n\t\t\tconst getFieldValueFromText = () =>\n\t\t\t\tObject.keys(selectValues).find(key => selectValues[key] === searchValue);\n\t\t\tconst valueExists = () => selectValues.hasOwnProperty(searchValue);\n\t\t\tconst createOption = () => {\n\t\t\t\treturn { text: selectValues[foundOption], value: foundOption };\n\t\t\t};\n\t\t\tswitch (type) {\n\t\t\t\tcase 'value':\n\t\t\t\t\tif (valueExists()) {\n\t\t\t\t\t\tfoundOption = searchValue;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'text':\n\t\t\t\t\tfoundOption = getFieldValueFromText();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'all':\n\t\t\t\t\tif (valueExists()) {\n\t\t\t\t\t\tfoundOption = searchValue;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfoundOption = getFieldValueFromText();\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\treturn foundOption ? createOption() : false;\n\t\t},\n\t\t/**\n\t\t * Get select options\n\t\t *\n\t\t * @param   {object}  selectElement  jQuery\n\t\t *\n\t\t * @return  {object}                 [return description]\n\t\t */\n\t\tgetSelectOptions(selectElement) {\n\t\t\tif (selectElement.data('fieldinfo') && selectElement.data('fieldinfo').picklistvalues) {\n\t\t\t\treturn selectElement.data('fieldinfo').picklistvalues;\n\t\t\t} else {\n\t\t\t\tlet optionsObject = {};\n\t\t\t\tselectElement.find('option').each((i, element) => {\n\t\t\t\t\toptionsObject[element.value] = element.text;\n\t\t\t\t});\n\t\t\t\treturn optionsObject;\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Create selected option\n\t\t *\n\t\t * @param   {object}  selectElement  jQuery\n\t\t * @param   {string}  text\n\t\t * @param   {string}  value\n\t\t */\n\t\tcreateSelectedOption(selectElement, text, value) {\n\t\t\tconst newOption = new Option(text, value, true, true);\n\t\t\tselectElement.append(newOption).trigger('change');\n\t\t}\n\t},\n\tMultiImage: {\n\t\tcurrentFileUploads: 0,\n\t\tregister(container) {\n\t\t\t$('.js-multi-image', container).each(function() {\n\t\t\t\tnew MultiImage($(this));\n\t\t\t});\n\t\t}\n\t},\n\tMultiEmail: {\n\t\tregister(container) {\n\t\t\tcontainer.find('.js-multi-email').each((index, element) => {\n\t\t\t\tconst inputElement = element;\n\t\t\t\t$(element)\n\t\t\t\t\t.find('.js-email')\n\t\t\t\t\t.each((index, element) => {\n\t\t\t\t\t\t$(element).on('change', e => {\n\t\t\t\t\t\t\tApp.Fields.MultiEmail.parseToJSON($(inputElement));\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t$(element)\n\t\t\t\t\t.find('.js-multi-email-add-item')\n\t\t\t\t\t.each((index, element) => {\n\t\t\t\t\t\t$(element).on('click', e => {\n\t\t\t\t\t\t\tApp.Fields.MultiEmail.addEmail($(inputElement));\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t$(element)\n\t\t\t\t\t.find('.js-remove-item')\n\t\t\t\t\t.each((index, element) => {\n\t\t\t\t\t\t$(element).on('click', e => {\n\t\t\t\t\t\t\tApp.Fields.MultiEmail.removeEmail($(e.target), $(inputElement));\n\t\t\t\t\t\t\tApp.Fields.MultiEmail.parseToJSON(container);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t$(element)\n\t\t\t\t\t.find('input.js-checkbox')\n\t\t\t\t\t.each((index, element) => {\n\t\t\t\t\t\t$(element).on('change', e => {\n\t\t\t\t\t\t\tApp.Fields.MultiEmail.toggleCheckBox($(e.target));\n\t\t\t\t\t\t\tApp.Fields.MultiEmail.parseToJSON(container);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Convert data to json\n\t\t * @param {jQuery} element\n\t\t */\n\t\tparseToJSON(element) {\n\t\t\tlet allFields = $(element).find('[class*=js-multi-email-row]');\n\t\t\tlet arr = [];\n\t\t\tlet arrayLength = allFields.length;\n\t\t\tfor (let i = 0; i < arrayLength; ++i) {\n\t\t\t\tlet inputField = $(allFields[i])\n\t\t\t\t\t.find('input.js-email')\n\t\t\t\t\t.eq(0);\n\t\t\t\tlet checkboxField = $(allFields[i])\n\t\t\t\t\t.find('input.js-checkbox')\n\t\t\t\t\t.eq(0);\n\t\t\t\tif (inputField.val() !== '') {\n\t\t\t\t\tarr.push({\n\t\t\t\t\t\te: $(inputField).val(),\n\t\t\t\t\t\to: $(checkboxField).is(':checked') ? 1 : 0\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\t$(element)\n\t\t\t\t.find('input.js-hidden-email')\n\t\t\t\t.val(JSON.stringify(arr));\n\t\t},\n\t\t/**\n\t\t * Invoked after clicking the add button\n\t\t * @param {jQuery} container\n\t\t */\n\t\taddEmail(container) {\n\t\t\tlet newField = container\n\t\t\t\t.find('[class*=js-multi-email-row]')\n\t\t\t\t.eq(0)\n\t\t\t\t.clone(false, false);\n\t\t\tlet cnt = container.find('[class*=js-multi-email-row]').length + 1;\n\t\t\tnewField.removeClass('js-multi-email-row-1');\n\t\t\tnewField.addClass('js-multi-email-row-' + cnt);\n\t\t\tnewField.find('input.js-email').val('');\n\t\t\tnewField.find('input.js-checkbox').removeAttr('checked');\n\t\t\tnewField.find('label.js-label-checkbox').removeClass('active');\n\t\t\tnewField\n\t\t\t\t.find('span.far')\n\t\t\t\t.removeClass('fa-check-square')\n\t\t\t\t.addClass('fa-square');\n\t\t\tnewField\n\t\t\t\t.find('.js-remove-item')\n\t\t\t\t.eq(0)\n\t\t\t\t.on('click', e => {\n\t\t\t\t\tApp.Fields.MultiEmail.removeEmail($(e.target), container);\n\t\t\t\t\tApp.Fields.MultiEmail.parseToJSON(container);\n\t\t\t\t});\n\t\t\tnewField\n\t\t\t\t.find('input.js-checkbox')\n\t\t\t\t.eq(0)\n\t\t\t\t.on('change', e => {\n\t\t\t\t\tApp.Fields.MultiEmail.toggleCheckBox($(e.target));\n\t\t\t\t\tApp.Fields.MultiEmail.parseToJSON(container);\n\t\t\t\t});\n\t\t\tnewField\n\t\t\t\t.find('input.js-email')\n\t\t\t\t.eq(0)\n\t\t\t\t.on('change', e => {\n\t\t\t\t\tApp.Fields.MultiEmail.parseToJSON(container);\n\t\t\t\t});\n\t\t\tnewField.insertAfter(container.find('[class*=js-multi-email-row]').last());\n\t\t},\n\t\t/**\n\t\t * Invoked after clicking the remove button\n\t\t * @param {jQuery} container\n\t\t */\n\t\tremoveEmail(element, container) {\n\t\t\tif (container.find('[class*=js-multi-email-row]').length > 1) {\n\t\t\t\telement.closest('[class*=js-multi-email-row]').remove();\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Toggle checkbox\n\t\t * @param {jQuery} element\n\t\t */\n\t\ttoggleCheckBox(element) {\n\t\t\tif (element.is(':checked')) {\n\t\t\t\telement\n\t\t\t\t\t.attr('checked', 'checked')\n\t\t\t\t\t.closest('.js-multi-email__checkbox')\n\t\t\t\t\t.find('.js-multi-email__checkbox__icon')\n\t\t\t\t\t.removeClass('fa-square')\n\t\t\t\t\t.addClass('fa-check-square');\n\t\t\t} else {\n\t\t\t\telement\n\t\t\t\t\t.removeAttr('checked')\n\t\t\t\t\t.closest('.js-multi-email__checkbox')\n\t\t\t\t\t.find('.js-multi-email__checkbox__icon')\n\t\t\t\t\t.removeClass('fa-check-square')\n\t\t\t\t\t.addClass('fa-square');\n\t\t\t}\n\t\t}\n\t},\n\tMultiDependField: {\n\t\t/**\n\t\t * Register function\n\t\t * @param {jQuery} container\n\t\t */\n\t\tregister(container) {\n\t\t\tcontainer.find('.js-multi-field').each((index, element) => {\n\t\t\t\tconst inputElement = $(element);\n\t\t\t\tconst fields = inputElement.find('.js-multi-field-val').data('fields');\n\t\t\t\tinputElement.find('.js-multi-field-add-item').on('click', e => {\n\t\t\t\t\tApp.Fields.MultiDependField.addRow(inputElement, fields);\n\t\t\t\t});\n\t\t\t\tApp.Fields.MultiDependField.registerRow(inputElement, fields);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register row\n\t\t * @param {jQuery} inputElement\n\t\t * @param {Object} fields\n\t\t */\n\t\tregisterRow(inputElement, fields) {\n\t\t\tfor (let i in fields) {\n\t\t\t\tinputElement.find('[name=\"' + fields[i] + '\"]').on('change', e => {\n\t\t\t\t\tApp.Fields.MultiDependField.parseToJson(inputElement, fields);\n\t\t\t\t});\n\t\t\t}\n\t\t\tinputElement.find('.js-remove-item').on('click', e => {\n\t\t\t\tApp.Fields.MultiDependField.removeRow($(e.target), inputElement);\n\t\t\t\tApp.Fields.MultiDependField.parseToJson(inputElement.closest('.js-multi-field'), fields);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Invoked after clicking the remove button\n\t\t * @param {jQuery} element\n\t\t * @param {jQuery} container\n\t\t */\n\t\tremoveRow(element, container) {\n\t\t\tif (container.find('.js-multi-field-row').length > 1) {\n\t\t\t\telement.closest('.js-multi-field-row').remove();\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Convert data to json\n\t\t * @param {jQuery} element\n\t\t * @param {Object} fields\n\t\t */\n\t\tparseToJson(element, fields) {\n\t\t\tlet arr = [];\n\t\t\tlet allFields = $(element).find('.js-multi-field-row');\n\t\t\tlet arrayLength = allFields.length;\n\t\t\tfor (let i = 0; i < arrayLength; ++i) {\n\t\t\t\tlet partData = {},\n\t\t\t\t\tskip = false;\n\t\t\t\tfor (let k in fields) {\n\t\t\t\t\tpartData[fields[k]] = $(allFields[i])\n\t\t\t\t\t\t.find('[name=\"' + fields[k] + '\"]')\n\t\t\t\t\t\t.val();\n\t\t\t\t\tif (k == 0 && partData[fields[k]] === '') {\n\t\t\t\t\t\tskip = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (!skip) {\n\t\t\t\t\tarr.push(partData);\n\t\t\t\t}\n\t\t\t}\n\t\t\t$(element)\n\t\t\t\t.find('input.js-multi-field-val')\n\t\t\t\t.val(JSON.stringify(arr));\n\t\t},\n\t\t/**\n\t\t * Invoked after clicking the add button\n\t\t * @param {jQuery} container\n\t\t * @param {Object} fields\n\t\t */\n\t\taddRow(container, fields) {\n\t\t\tlet newField;\n\t\t\tlet lastField = container.find('.js-multi-field-row').last();\n\t\t\tlet selectFields = lastField.find('select.select2');\n\t\t\tif (selectFields.length) {\n\t\t\t\tselectFields\n\t\t\t\t\t.select2('destroy')\n\t\t\t\t\t.removeAttr('data-select2-id')\n\t\t\t\t\t.find('option')\n\t\t\t\t\t.removeAttr('data-select2-id');\n\t\t\t\tnewField = lastField.clone(false, false);\n\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(lastField.find('select.select2'));\n\t\t\t} else {\n\t\t\t\tnewField = lastField.clone(false, false);\n\t\t\t}\n\t\t\tfor (let i in fields) {\n\t\t\t\tnewField.find('[name=\"' + fields[i] + '\"]').val('');\n\t\t\t}\n\t\t\tnewField.insertAfter(container.find('.js-multi-field-row').last());\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(newField.find('select.select2'));\n\t\t\tApp.Fields.Date.register(newField);\n\t\t\tApp.Fields.MultiDependField.registerRow(container, fields);\n\t\t}\n\t},\n\tDependentSelect: {\n\t\t/**\n\t\t * Get options for select from array of items (exclude children)\n\t\t * @param {Array} data {value,text,selected, children => data[]}\n\t\t * @returns {string}\n\t\t */\n\t\tgenerateOptionsFromData(data) {\n\t\t\tlet html = '';\n\t\t\tfor (let item of data) {\n\t\t\t\tlet selected = false;\n\t\t\t\tif (typeof item.selected !== 'undefined' && item.selected) {\n\t\t\t\t\tselected = true;\n\t\t\t\t}\n\t\t\t\thtml += `<option value=${item.value}${selected ? ' selected' : ''}>${item.text}</option>`;\n\t\t\t}\n\t\t\treturn html;\n\t\t},\n\t\t/**\n\t\t * Register dependent selects\n\t\t *\n\t\t * @param {jQuery} container with data- options:\n\t\t * data-slave: selector for slave element\n\t\t * data-data: array of options with children elements for slave select (see getOptions for data format)\n\t\t * data-sort: do we want to sort slave options by text when master has two items selected? if not - just append options to slave\n\t\t */\n\t\tregister(container) {\n\t\t\tif (typeof container === 'undefined' || typeof container.length === 'undefined' || !container.length) {\n\t\t\t\treturn app.errorLog('Dependend select field container is missing.');\n\t\t\t}\n\t\t\tcontainer.each(function() {\n\t\t\t\tconst masterSelect = $(this),\n\t\t\t\t\tslaveSelect = $(masterSelect.data('slave')),\n\t\t\t\t\tdata = masterSelect.data('data');\n\t\t\t\tif (!slaveSelect.length) {\n\t\t\t\t\treturn app.errorLog('Could not find slave select element (data-slave attribute)');\n\t\t\t\t}\n\t\t\t\tif (!data) {\n\t\t\t\t\treturn app.errorLog('Could not load data (data-data attribute)');\n\t\t\t\t}\n\t\t\t\tmasterSelect.on('change', e => {\n\t\t\t\t\tlet values = $(e.target).val();\n\t\t\t\t\tif (!Array.isArray(values)) {\n\t\t\t\t\t\tvalues = [values];\n\t\t\t\t\t}\n\t\t\t\t\tlet children = [];\n\t\t\t\t\tfor (let value of values) {\n\t\t\t\t\t\tfor (let item of data) {\n\t\t\t\t\t\t\tif (item.value === value) {\n\t\t\t\t\t\t\t\tif (typeof item.children !== 'undefined') {\n\t\t\t\t\t\t\t\t\titem.children.forEach(child => {\n\t\t\t\t\t\t\t\t\t\tchildren.push(child);\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (masterSelect.data('sort')) {\n\t\t\t\t\t\tchildren.sort((a, b) => {\n\t\t\t\t\t\t\treturn a.text.localeCompare(b.text);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tslaveSelect.html(App.Fields.DependentSelect.generateOptionsFromData(children));\n\t\t\t\t});\n\t\t\t\tmasterSelect.html(App.Fields.DependentSelect.generateOptionsFromData(data));\n\t\t\t});\n\t\t}\n\t},\n\tGantt: {\n\t\tregister(container, data) {\n\t\t\treturn new GanttField(container, data);\n\t\t}\n\t},\n\tInteger: {\n\t\t/**\n\t\t * Function returns the integer in user specified format.\n\t\t * @param {number} value\n\t\t * @param {int} numberOfDecimal\n\t\t * @returns {string}\n\t\t */\n\t\tformatToDisplay(value) {\n\t\t\tif (!value) {\n\t\t\t\tvalue = 0;\n\t\t\t}\n\t\t\tlet groupSeparator = CONFIG.currencyGroupingSeparator;\n\t\t\tlet groupingPattern = CONFIG.currencyGroupingPattern;\n\t\t\tvalue = parseFloat(value).toFixed(1);\n\t\t\tlet integer = value.toString().split('.')[0];\n\t\t\tif (integer.length > 3) {\n\t\t\t\tif (groupingPattern === '123,456,789') {\n\t\t\t\t\tinteger = integer.replace(/(\\d)(?=(\\d\\d\\d)+(?!\\d))/g, '$1' + groupSeparator);\n\t\t\t\t} else if (groupingPattern === '123456,789') {\n\t\t\t\t\tinteger = integer.slice(0, -3) + groupSeparator + integer.slice(-3);\n\t\t\t\t} else if (groupingPattern === '12,34,56,789') {\n\t\t\t\t\tinteger =\n\t\t\t\t\t\tinteger.slice(0, -3).replace(/(\\d)(?=(\\d\\d)+(?!\\d))/g, '$1' + groupSeparator) +\n\t\t\t\t\t\tgroupSeparator +\n\t\t\t\t\t\tinteger.slice(-3);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn integer;\n\t\t}\n\t},\n\tDouble: {\n\t\t/**\n\t\t * Function returns the currency in user specified format.\n\t\t * @param {number} value\n\t\t * @param {boolean} numberOfDecimal\n\t\t * @param {int} numberOfDecimal\n\t\t * @returns {string}\n\t\t */\n\t\tformatToDisplay(value, fixed = true, numberOfDecimal = CONFIG.noOfCurrencyDecimals) {\n\t\t\tif (!value) {\n\t\t\t\tvalue = 0;\n\t\t\t}\n\t\t\tlet strDecimal = value.toString().split('.')[1];\n\t\t\tlet numberOfZerosAtTheEnd = 0;\n\t\t\tif (typeof strDecimal !== 'undefined') {\n\t\t\t\tfor (let i = strDecimal.length - 1; i > 0; --i) {\n\t\t\t\t\tif (strDecimal[i] == '0') {\n\t\t\t\t\t\tnumberOfZerosAtTheEnd++;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tvalue = parseFloat(value);\n\t\t\tif (fixed) {\n\t\t\t\tvalue = value.toFixed(numberOfDecimal);\n\t\t\t}\n\t\t\tlet splittedFloat = value.toString().split('.');\n\t\t\tlet integer = splittedFloat[0];\n\t\t\tif (integer !== '-0' && integer !== '0') {\n\t\t\t\tinteger = App.Fields.Integer.formatToDisplay(integer);\n\t\t\t}\n\t\t\tlet decimal = splittedFloat[1];\n\t\t\tif (numberOfDecimal) {\n\t\t\t\tif (!CONFIG.truncateTrailingZeros && decimal) {\n\t\t\t\t\tfor (let i = 0; i < numberOfZerosAtTheEnd && decimal.length < numberOfDecimal; ++i) {\n\t\t\t\t\t\tdecimal += '0';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (decimal) {\n\t\t\t\t\treturn integer + CONFIG.currencyDecimalSeparator + decimal;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn integer;\n\t\t},\n\t\t/**\n\t\t * Function to get value for db format.\n\t\t * @param {string} value\n\t\t * @returns {number}\n\t\t */\n\t\tformatToDb(value) {\n\t\t\tif (value == undefined || value == '') {\n\t\t\t\tvalue = 0;\n\t\t\t}\n\t\t\tvalue = value.toString();\n\t\t\tvalue = value.split(CONFIG.currencyGroupingSeparator).join('');\n\t\t\tvalue = value.replace(/\\s/g, '').replace(CONFIG.currencyDecimalSeparator, '.');\n\t\t\treturn parseFloat(value);\n\t\t}\n\t},\n\tTree: {\n\t\tregister(container) {\n\t\t\tcontainer.on('click', '.js-tree-modal', function(e) {\n\t\t\t\tlet element = $(e.target),\n\t\t\t\t\tparentElem = element.closest('.js-tree-container'),\n\t\t\t\t\tsourceFieldElement = parentElem.find('input[class=\"sourceField\"]'),\n\t\t\t\t\tfieldDisplayElement = parentElem.find(\n\t\t\t\t\t\t'input[name=\"' + sourceFieldElement.attr('name') + '_display\"]'\n\t\t\t\t\t);\n\t\t\t\tAppConnector.request({\n\t\t\t\t\tmodule: sourceFieldElement.data('modulename'),\n\t\t\t\t\tview: 'TreeModal',\n\t\t\t\t\ttemplate: sourceFieldElement.data('treetemplate'),\n\t\t\t\t\tfieldName: sourceFieldElement.attr('name'),\n\t\t\t\t\tmultiple: sourceFieldElement.data('multiple'),\n\t\t\t\t\tvalue: sourceFieldElement.val()\n\t\t\t\t}).done(function(requestData) {\n\t\t\t\t\tapp.modalEvents['treeModal'] = function(modal, instance) {\n\t\t\t\t\t\tinstance.setSelectEvent(responseData => {\n\t\t\t\t\t\t\tsourceFieldElement.val(responseData.id);\n\t\t\t\t\t\t\tfieldDisplayElement.val(responseData.name).attr('readonly', true);\n\t\t\t\t\t\t});\n\t\t\t\t\t};\n\t\t\t\t\tapp.showModalWindow(requestData, { modalId: 'treeModal' });\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t},\n\t/**\n\t * TimePeriod class\n\t *\n\t * Save value as time period in 00:m format where '0' is a number of units\n\t * ':' is just separator\n\t * and 'm' is time scale/period in php date format - available formats are [m, d, H, i, s]\n\t * @example 10:i = 10 minutes, 2:m = 2 months, 20:H = 20 hours and so on...\n\t */\n\tTimePeriod: class TimePeriod {\n\t\tconstructor(container) {\n\t\t\tthis.container = container;\n\t\t\tthis.value = container.val();\n\t\t\tif (this.value) {\n\t\t\t\tconst split = this.value.split(':');\n\t\t\t\tthis.time = Number(split[0]);\n\t\t\t\tthis.period = split[1];\n\t\t\t} else {\n\t\t\t\tthis.time = 0;\n\t\t\t\tthis.period = 'H';\n\t\t\t\tthis.value = '0:H';\n\t\t\t\tcontainer.val(this.value);\n\t\t\t}\n\t\t\tthis.injectContent();\n\t\t}\n\n\t\t/**\n\t\t * Register time period field/s\n\t\t *\n\t\t * @param {jQuery} container it could be input type hidden with js-time-period class\n\t\t *                           or container that contains multiple js-time-period inputs\n\t\t *\n\t\t * @example <input type=\"hidden\" name=\"field_name\" class=\"js-time-period\">\n\t\t *\n\t\t * @returns {TimePeriod|TimePeriod[]} instance/s\n\t\t */\n\t\tstatic register(container) {\n\t\t\tif (container.hasClass('c-time-period')) {\n\t\t\t\treturn new TimePeriod(container);\n\t\t\t}\n\t\t\tconst instances = [];\n\t\t\tcontainer.find('.c-time-period').each((index, value) => {\n\t\t\t\tinstances.push(new TimePeriod($(value)));\n\t\t\t});\n\t\t\treturn instances;\n\t\t}\n\n\t\t/**\n\t\t * Inject content next to container\n\t\t *\n\t\t * @returns  {jQuery}  created element with input and select\n\t\t */\n\t\tinjectContent() {\n\t\t\tlet content = `<div class=\"input-group c-time-period\" data-js=\"container\">\n\t\t\t\t<div class=\"input-group-prepend\">\n\t\t\t\t\t<a href class=\"btn btn-default c-time-period-input-modifier c-time-period-input-modifier--minus-1\"><span class=\"fas fa-minus\"></span></a>\n\t\t\t\t</div>\n\t\t\t\t<input type=\"number\" class=\"form-control c-time-period-input\" min=\"0\" value=\"${this.time}\"\n\t\t\t\t\tdata-validation-engine=\"validate[required,funcCall[Vtiger_Integer_Validator_Js.invokeValidation]]\">\n\t\t\t\t<div class=\"input-group-append\">\n\t\t\t\t\t<a href class=\"btn btn-default c-time-period-input-modifier c-time-period-input-modifier--plus-1\"><span class=\"fas fa-plus\"></span></a>\n\t\t\t\t\t<select class=\"select2 js-time-period-select time-period-${this.container.attr('name')}\">\n\t\t\t\t\t\t<option value=\"d\"${this.period === 'd' ? ' selected=\"selected\"' : ''}>${app.vtranslate('JS_DAYS_FULL')}</option>\n\t\t\t\t\t\t<option value=\"H\"${this.period === 'H' ? ' selected=\"selected\"' : ''}>${app.vtranslate('JS_HOURS_FULL')}</option>\n\t\t\t\t\t\t<option value=\"i\"${this.period === 'i' ? ' selected=\"selected\"' : ''}>${app.vtranslate('JS_MINUTES_FULL')}</option>\n\t\t\t\t\t</select>\n\t\t\t\t</div>\n\t\t\t</div>`;\n\t\t\tthis.element = this.container.parent().append(content);\n\t\t\tthis.input = this.element.find('.c-time-period-input').eq(0);\n\t\t\tthis.select = this.element.find('.select2').eq(0);\n\t\t\tthis.plus1btn = this.element.find('.c-time-period-input-modifier--plus-1').eq(0);\n\t\t\tthis.minus1btn = this.element.find('.c-time-period-input-modifier--minus-1').eq(0);\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(this.select, { width: '100px' });\n\t\t\tthis.registerEvents();\n\t\t\treturn this.element;\n\t\t}\n\n\t\t/**\n\t\t * Register events\n\t\t */\n\t\tregisterEvents() {\n\t\t\tthis.input.on('input', this.onChange.bind(this));\n\t\t\tthis.select.on('change', this.onChange.bind(this));\n\t\t\tthis.plus1btn.on('click', this.onPlus1Click.bind(this));\n\t\t\tthis.minus1btn.on('click', this.onMinus1Click.bind(this));\n\t\t}\n\n\t\t/**\n\t\t * On change event\n\t\t *\n\t\t * @param {Event} event\n\t\t */\n\t\tonChange(event) {\n\t\t\tthis.time = this.input.val();\n\t\t\tthis.period = this.select.val();\n\t\t\tthis.value = this.input.val() + ':' + this.select.val();\n\t\t\tthis.container.val(this.value);\n\t\t}\n\n\t\t/**\n\t\t * Plus 1 button click event handler\n\t\t *\n\t\t * @param {Event} event\n\t\t */\n\t\tonPlus1Click(event) {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t\tthis.input.val(Number(this.input.val()) + 1);\n\t\t\tthis.onChange();\n\t\t}\n\n\t\t/**\n\t\t * Minus 1 button click event handler\n\t\t *\n\t\t * @param {Event} event\n\t\t */\n\t\tonMinus1Click(event) {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t\tif (Number(this.input.val()) > 0) {\n\t\t\t\tthis.input.val(Number(this.input.val()) - 1);\n\t\t\t\tthis.onChange();\n\t\t\t}\n\t\t}\n\t},\n\t/**\n\t * Multi currency\n\t */\n\tMultiCurrency: class MultiCurrency {\n\t\tconstructor(container) {\n\t\t\tthis.container = container;\n\t\t\tthis.init();\n\t\t}\n\t\t/**\n\t\t * Register function\n\t\t * @param {jQuery} container\n\t\t */\n\t\tstatic register(container) {\n\t\t\tif (container.hasClass('js-multicurrency-container')) {\n\t\t\t\treturn new MultiCurrency(container);\n\t\t\t}\n\t\t\tconst instances = [];\n\t\t\tcontainer.find('.js-multicurrency-container').each((n, e) => {\n\t\t\t\tinstances.push(new MultiCurrency($(e)));\n\t\t\t});\n\t\t\treturn instances;\n\t\t}\n\t\t/**\n\t\t * Initiation\n\t\t */\n\t\tinit() {\n\t\t\t$('.js-multicurrency-event', this.container)\n\t\t\t\t.off('click')\n\t\t\t\t.on('click', () => {\n\t\t\t\t\tlet modal = $('<form>').append(\n\t\t\t\t\t\tthis.container.find('.js-currencies-container .js-currencies-modal').clone()\n\t\t\t\t\t);\n\t\t\t\t\tthis.registerEnableCurrencyEvent(modal);\n\t\t\t\t\tthis.registerResetCurrencyEvent(modal);\n\t\t\t\t\tthis.loadData(modal);\n\t\t\t\t\tthis.calculateConversionRate(modal);\n\t\t\t\t\tapp.showModalWindow({\n\t\t\t\t\t\tdata: modal,\n\t\t\t\t\t\tcss: {},\n\t\t\t\t\t\tcb: data => {\n\t\t\t\t\t\t\tlet form = data.parent();\n\t\t\t\t\t\t\tform.validationEngine(app.validationEngineOptionsForRecord);\n\t\t\t\t\t\t\tform.on('submit', e => {\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\tif (form.validationEngine('validate') && this.saveCurrencies(form)) {\n\t\t\t\t\t\t\t\t\tlet id = form.closest('.js-modal-container').attr('id');\n\t\t\t\t\t\t\t\t\tapp.hideModalWindow(null, id);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\tthis.getField().on('focusout', e => {\n\t\t\t\tlet element = $(e.currentTarget);\n\t\t\t\telement.formatNumber();\n\t\t\t\tthis.setPrice(element.val());\n\t\t\t});\n\t\t}\n\t\t/**\n\t\t * Loading data\n\t\t * @param {jQuery} modalContainer\n\t\t */\n\t\tloadData(modalContainer) {\n\t\t\tlet values = JSON.parse(this.getFieldToSave().val());\n\t\t\tlet baseCurrencyId = values['currencyId'] || CONFIG.currencyId;\n\t\t\tif (values['currencies'] === undefined) {\n\t\t\t\tvalues['currencies'] = [];\n\t\t\t\tvalues['currencies'][baseCurrencyId] = { price: 0 };\n\t\t\t}\n\t\t\tfor (let i in values['currencies']) {\n\t\t\t\tlet row = modalContainer.find('[data-currency-id=\"' + i + '\"]');\n\t\t\t\tif (row.length) {\n\t\t\t\t\trow.find('.js-enable-currency').prop('checked', true);\n\t\t\t\t\trow.find('.js-currency-reset,.js-base-currency,[name^=\"currencies[\"]').prop('disabled', false);\n\t\t\t\t\trow.find('.js-converted-price').val(values['currencies'][i]['price']);\n\t\t\t\t\tif (i == baseCurrencyId) {\n\t\t\t\t\t\trow.find('.js-base-currency').prop('checked', true);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t/**\n\t\t * Set value\n\t\t * @param {number} value\n\t\t */\n\t\tsetPrice(value) {\n\t\t\tlet values = JSON.parse(this.getFieldToSave().val());\n\t\t\tlet baseCurrencyId = values['currencyId'] || CONFIG.currencyId;\n\t\t\tvalues['currencies'] = values['currencies'] || {};\n\t\t\tvalues['currencies'][baseCurrencyId] = { price: value };\n\t\t\tvalues['currencyId'] = baseCurrencyId;\n\t\t\tvalues = $.extend({}, values);\n\t\t\tthis.getFieldToSave().val(JSON.stringify($.extend({}, values)));\n\t\t}\n\t\t/**\n\t\t * Gets field\n\t\t */\n\t\tgetField() {\n\t\t\treturn this.container.find('.js-multicurrency-field');\n\t\t}\n\t\t/**\n\t\t * Gets field to save\n\t\t */\n\t\tgetFieldToSave() {\n\t\t\treturn this.container.find('.js-multicurrency-field-to-save');\n\t\t}\n\t\t/**\n\t\t * Save\n\t\t * @param {jQuery} modalContainer\n\t\t */\n\t\tsaveCurrencies(modalContainer) {\n\t\t\tlet enabledBaseCurrency = modalContainer.find('.js-enable-currency').filter(':checked');\n\t\t\tif (enabledBaseCurrency.length < 1) {\n\t\t\t\tVtiger_Helper_Js.showMessage({\n\t\t\t\t\ttext: app.vtranslate('JS_PLEASE_SELECT_BASE_CURRENCY_FOR_PRODUCT'),\n\t\t\t\t\ttype: 'error'\n\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tlet selectedBaseCurrency = modalContainer.find('.js-base-currency').filter(':checked');\n\t\t\tif (selectedBaseCurrency.length < 1) {\n\t\t\t\tVtiger_Helper_Js.showMessage({\n\t\t\t\t\ttext: app.vtranslate('JS_PLEASE_ENABLE_BASE_CURRENCY_FOR_PRODUCT'),\n\t\t\t\t\ttype: 'error'\n\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tlet selectedRow = selectedBaseCurrency.closest('tr');\n\t\t\tlet symbol = selectedRow.data('currency-symbol');\n\t\t\tthis.container.find('.js-currency').text(symbol);\n\t\t\tlet data = {};\n\t\t\tdata['currencies'] = {};\n\t\t\tenabledBaseCurrency.closest('tr').each((n, e) => {\n\t\t\t\tlet row = $(e),\n\t\t\t\t\tcurrencyId = row.data('currencyId');\n\t\t\t\tdata['currencies'][currencyId] = {};\n\t\t\t\tdata['currencies'][currencyId]['price'] = row.find('.js-converted-price').val();\n\t\t\t\tif (row.find('.js-base-currency:checked').length) {\n\t\t\t\t\tdata['currencyId'] = currencyId;\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.getFieldToSave().val(JSON.stringify(data));\n\t\t\tthis.getField().val(selectedRow.find('.js-converted-price').val());\n\t\t\tselectedBaseCurrency.prop('checked', false);\n\t\t\treturn true;\n\t\t}\n\t\t/**\n\t\t * Calculate\n\t\t * @param {jQuery} container\n\t\t */\n\t\tcalculateConversionRate(container) {\n\t\t\tlet baseCurrencyConversionRate = container\n\t\t\t\t.find('.js-base-currency')\n\t\t\t\t.filter(':checked')\n\t\t\t\t.closest('tr')\n\t\t\t\t.find('.js-conversion-rate');\n\t\t\tif (baseCurrencyConversionRate.val() == '1') {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet baseCurrencyRatePrevValue = baseCurrencyConversionRate.getNumberFromValue();\n\t\t\tcontainer.find('.js-conversion-rate').each(function(key, domElement) {\n\t\t\t\tlet element = $(domElement);\n\t\t\t\tif (!element.is(baseCurrencyConversionRate)) {\n\t\t\t\t\telement.val(\n\t\t\t\t\t\tApp.Fields.Double.formatToDisplay(\n\t\t\t\t\t\t\telement.getNumberFromValue() / baseCurrencyRatePrevValue,\n\t\t\t\t\t\t\tfalse\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\t\t\tbaseCurrencyConversionRate.val('1');\n\t\t}\n\t\t/**\n\t\t * Function to register event for enabling currency on checkbox checked\n\t\t * @param {jQuery} container\n\t\t */\n\t\tregisterEnableCurrencyEvent(container) {\n\t\t\tcontainer.on('change', '.js-enable-currency', e => {\n\t\t\t\tlet element = $(e.currentTarget);\n\t\t\t\tlet parentRow = element.closest('tr');\n\t\t\t\tif (element.is(':checked')) {\n\t\t\t\t\telement.attr('checked', 'checked');\n\t\t\t\t\tlet price =\n\t\t\t\t\t\tthis.getField().getNumberFromValue() *\n\t\t\t\t\t\tparentRow.find('.js-conversion-rate').getNumberFromValue();\n\t\t\t\t\t$('input', parentRow).removeAttr('disabled');\n\t\t\t\t\tparentRow.find('.js-currency-reset').removeAttr('disabled');\n\t\t\t\t\tparentRow.find('.js-converted-price').val(App.Fields.Double.formatToDisplay(price));\n\t\t\t\t} else {\n\t\t\t\t\tif (parentRow.find('.js-base-currency').is(':checked')) {\n\t\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\t\ttitle:\n\t\t\t\t\t\t\t\t'\"' +\n\t\t\t\t\t\t\t\tparentRow.find('.js-currency-name').text() +\n\t\t\t\t\t\t\t\t'\" ' +\n\t\t\t\t\t\t\t\tapp.vtranslate('JS_BASE_CURRENCY_CHANGED_TO_DISABLE_CURRENCY')\n\t\t\t\t\t\t});\n\t\t\t\t\t\telement.prop('checked', true);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tparentRow.find('input').attr('disabled', 'disabled');\n\t\t\t\t\tparentRow.find('.js-currency-reset').attr('disabled', 'disabled');\n\t\t\t\t\telement.removeAttr('disabled checked');\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t/**\n\t\t * Function to register event for reseting the currencies\n\t\t * @param {jQuery} container\n\t\t */\n\t\tregisterResetCurrencyEvent(container) {\n\t\t\tcontainer.on('click', '.js-currency-reset', e => {\n\t\t\t\tlet parentElem = $(e.currentTarget).closest('tr');\n\t\t\t\tlet price =\n\t\t\t\t\tthis.getField().getNumberFromValue() * parentElem.find('.js-conversion-rate').getNumberFromValue();\n\t\t\t\t$('.js-converted-price', parentElem).val(App.Fields.Double.formatToDisplay(price));\n\t\t\t});\n\t\t}\n\t},\n\tUtils: {\n\t\tregisterMobileDateRangePicker(element) {\n\t\t\tthis.hideMobileKeyboard(element);\n\t\t\tif (!Quasar.plugins.Platform.is.desktop) {\n\t\t\t\telement\n\t\t\t\t\t.on('showCalendar.daterangepicker', (ev, picker) => {\n\t\t\t\t\t\tpicker.container.addClass('js-visible');\n\t\t\t\t\t})\n\t\t\t\t\t.on('hide.daterangepicker', (ev, picker) => {\n\t\t\t\t\t\tpicker.container.removeClass('js-visible');\n\t\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\thideMobileKeyboard(element) {\n\t\t\tif (!Quasar.plugins.Platform.is.desktop) {\n\t\t\t\telement.attr('readonly', 'true').addClass('bg-white');\n\t\t\t}\n\t\t},\n\t\tpositionPicker(ev, picker) {\n\t\t\tlet offset = picker.element.offset();\n\t\t\tlet $window = $(window);\n\t\t\tif (offset.left - $window.scrollLeft() + picker.container.outerWidth() > $window.width()) {\n\t\t\t\tpicker.opens = 'left';\n\t\t\t} else {\n\t\t\t\tpicker.opens = 'right';\n\t\t\t}\n\t\t\tpicker.move();\n\t\t\tif (offset.top - $window.scrollTop() + picker.container.outerHeight() > $window.height()) {\n\t\t\t\tpicker.drops = 'up';\n\t\t\t} else {\n\t\t\t\tpicker.drops = 'down';\n\t\t\t}\n\t\t\tpicker.move();\n\t\t},\n\t\t/**\n\t\t * Set value\n\t\t *\n\t\t * @param   {object}  fieldElement  jQuery\n\t\t * @param   {string|boolean}  value\n\t\t */\n\t\tsetValue(fieldElement, value) {\n\t\t\tif (fieldElement.is('select')) {\n\t\t\t\tApp.Fields.Picklist.setValue(fieldElement, value);\n\t\t\t} else {\n\t\t\t\tfieldElement.val(value);\n\t\t\t}\n\t\t}\n\t}\n};\n"],"names":["window","App","Fields","map","app","vtranslate","monthName","parentElement","registerForAddon","customParams","className","$","elements","hasClass","length","parentDateElem","closest","on","inputGroupAddonClickHandler","e","currentTarget","find","get","focus","format","CONFIG","dateFormat","elementDateFormat","data","fn","datepicker","dates","langKey","Date","fullDaysTranslated","daysTranslated","fullMonthsTranslated","monthsTranslated","weekStart","firstDayOfWeekNo","params","extend","each","index","element","Object","assign","enableOnReadonly","hasAttribute","Utils","hideMobileKeyboard","toUpperCase","ranges","moment","add","subtract","startOf","endOf","substr","off","parent","next","el","currentParams","daterangepicker","ev","picker","val","startDate","locale","endDate","trigger","positionPicker","container","addClass","removeClass","registerMobileDateRangePicker","hourFormat","elementHourFormat","timePicker24Hour","timeFormat","isDateRangePicker","applyDateRangePickerHandler","hexcolor","r","parseInt","g","b","yiq","letters","split","color","i","Math","floor","random","count","colors","push","getRandomColor","fieldToUpdate","bgToUpdate","cb","registerPickerEvents","ColorPicker","mount","modalContainer","newColor","getColor","hex","css","hideModalWindow","id","url","substring","showModalWindow","bind","key","querySelectorAll","ClipboardJS","showPnotify","is","prop","isModal","self","progressInstance","progressIndicator","loadEditor","getElement","attr","CKEDITOR","instances","getElementId","customConfig","setElement","instance","getEditorInstanceFromName","config","ENTER_BR","ENTER_P","evt","editor","updateElement","mode","name","items","emojiEnabled","emojiToolbar","toolbar","Array","isArray","extraPlugins","outputTemplate","mentionsEnabled","mentions","registerMentions","remove","ckeditor","minSerchTextLength","getMainParams","getMentionUsersData","Text","getMentionData","opts","callback","inputDiv","eq","emojiPanel","undefined","basicParams","collection","completionsCollection","records","registerMentionCollection","users","emojis","registerEmojiCollection","register","symbol","searchModule","item","range","isContentEditable","current","original","module","label","trim","text","globalSearchAutocompleteMinLength","mentionTemplate","category","image","icon","emoji","avatar","Tribute","attach","completionsTextarea","registerCompletionsTextArea","completionsButtons","registerCompletionsButtons","registerEmojiPanel","parents","siteUrl","then","response","json","catch","console","error","registerTagClick","textarea","siblings","html","preventDefault","append","target","clone","completionsContainer","showMenuForCollection","emojisContainer","EmojiPanel","toggleClass","stopPropagation","prepend","basicSearch","Vtiger_BasicSearch_Js","reduceNumberResults","returnHtml","query","toLowerCase","request","done","result","search","JSON","parse","serverDataFormat","reponseDataList","responseData","destroy","chars","rand","prefix","toString","hash","valueOf","view","viewParams","select2Elements","toArray","forEach","changeSelectElementView","elem","Picklist","showSelect2ElementView","errorLog","Error","selectElement","registerParams","selectLazy","showLazySelect","registerLazySelectOptions","computeDropdownHeight","dropdownContainer","dropdownList","marginBottom","selectOffsetTop","offset","top","height","select","htmlBoolParams","tags","tokenSeparators","select2","removeData","$dropdown","selectCb","dropdownParent","modalParent","language","theme","width","containerCssClass","noResults","msn","optgroup","options","children","sort","a","aText","bText","v","maximumSelectionLength","formatSelectionTooBig","formatSelectionExceeds","limit","maximum","maximumSelected","placeholder","templateResult","actualElement","type","escapeMarkup","markup","templateSelection","registerAjaxParams","searching","inputTooShort","args","remainingChars","minimum","input","replace","errorLoading","ajax","term","page","success","concat","minimumInputLength","optionData","template","dataset","state","iconInactive","iconActive","sortSelectOptions","registerSortEvent","sortableCb","appendTo","ul","first","sortable","reverse","optionTitle","event","originalEvent","currentElementData","optionElement","progressIndicatorElement","blockInfo","enabled","message","fail","amd","require","ArrayData","CustomData","$element","__super__","constructor","call","Extend","prototype","results","filter","indexOf","slice","lazyElements","pagination","more","selectParams","selectedOption","picklistvalues","hasOwnProperty","createSelectedOption","value","selected","disabled","searchValue","option","findOption","foundOption","selectValues","getSelectOptions","getFieldValueFromText","keys","valueExists","createOption","optionsObject","newOption","Option","MultiImage","inputElement","MultiEmail","parseToJSON","addEmail","removeEmail","toggleCheckBox","allFields","arr","arrayLength","inputField","checkboxField","stringify","newField","cnt","removeAttr","insertAfter","last","fields","MultiDependField","addRow","registerRow","parseToJson","removeRow","partData","skip","k","lastField","selectFields","masterSelect","slaveSelect","values","child","localeCompare","DependentSelect","generateOptionsFromData","GanttField","groupSeparator","currencyGroupingSeparator","groupingPattern","currencyGroupingPattern","parseFloat","toFixed","integer","fixed","numberOfDecimal","noOfCurrencyDecimals","strDecimal","numberOfZerosAtTheEnd","splittedFloat","Integer","formatToDisplay","decimal","truncateTrailingZeros","currencyDecimalSeparator","join","parentElem","sourceFieldElement","fieldDisplayElement","requestData","modalEvents","modal","setSelectEvent","modalId","time","Number","period","injectContent","content","plus1btn","minus1btn","registerEvents","onChange","onPlus1Click","onMinus1Click","TimePeriod","init","registerEnableCurrencyEvent","registerResetCurrencyEvent","loadData","calculateConversionRate","form","validationEngine","validationEngineOptionsForRecord","saveCurrencies","getField","formatNumber","setPrice","getFieldToSave","baseCurrencyId","currencyId","price","row","enabledBaseCurrency","showMessage","selectedBaseCurrency","selectedRow","n","baseCurrencyConversionRate","baseCurrencyRatePrevValue","getNumberFromValue","domElement","Double","parentRow","MultiCurrency","Quasar","plugins","Platform","desktop","$window","left","scrollLeft","outerWidth","opens","move","scrollTop","outerHeight","drops","fieldElement","setValue"],"mappings":"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"}