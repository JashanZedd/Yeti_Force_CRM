'use strict';

Vtiger_RelatedList_Js('PriceBooks_RelatedList_Js',{triggerMassMargin:function triggerMassMargin(){var self=Vtiger_RelatedList_Js.relatedListInstance;if(!0!==self.checkListRecordSelected()){var selectedIds=self.readSelectedIds(!0);app.showModalWindow({url:'index.php?module=PriceBooks&view=SpecifyMargin',cb:function cb(modalContainer){modalContainer.find('.js-modal__save').on('click',function(e){var element=modalContainer.find('.js-margin'),resultOfValidation=Vtiger_NumberUserFormat_Validator_Js.invokeValidation(element);return 'undefined'==typeof resultOfValidation?(element.validationEngine('hideAll'),AppConnector.request({module:app.getModuleName(),action:'RelationAjax',mode:'specifyMargin',relatedModule:self.moduleName,selected_ids:selectedIds,record:self.getParentId(),margin:element.val()}).done(function(response){response.success&&(Vtiger_Detail_Js.reloadRelatedList(),app.hideModalWindow());})):(element.validationEngine('showPrompt',resultOfValidation,'','topLeft',!0),e.preventDefault()),!1});}});}else self.noRecordSelectedAlert();}},{registerEditListPrice:function registerEditListPrice(){var _this=this,thisInstance=this,element=this.content.find('.js-edit-listprice');element.validationEngine(app.validationEngineOptions),element.on('change',function(e){e.stopPropagation();var element=$(_this);element.formatNumber(),element.validationEngine('validate')||AppConnector.request({module:thisInstance.parentModuleName,record:element.closest('.js-list__row').data('id'),action:'RelationAjax',mode:'addListPrice',src_record:thisInstance.parentRecordId,related_module:thisInstance.moduleName,price:element.val()}).done(function(responseData){responseData.result&&Vtiger_Helper_Js.showPnotify({text:app.vtranslate('JS_SAVE_NOTIFY_OK'),type:'success'});});});},registerPostLoadEvents:function registerPostLoadEvents(){this._super(),this.registerEditListPrice();}});
//# sourceMappingURL=RelatedList.min.js.map
