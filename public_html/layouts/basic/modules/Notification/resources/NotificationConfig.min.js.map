{"version":3,"file":"NotificationConfig.min.js","sources":["NotificationConfig.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class(\"Notification_NotificationConfig_Js\", {}, {\n\tregisterEventForModal: function (container) {\n\t\tvar thisInstance = this;\n\t\tvar table = app.registerDataTables(container.find('.modalDataTable'));\n\t\tapp.showPopoverElementView(container.find('.infoPopover'));\n\t\tcontainer.on('switchChange.bootstrapSwitch', '.sendNotificationsSwitch', function (e, state) {\n\t\t\tif (state) {\n\t\t\t\tcontainer.find('.schedule').removeClass('d-none');\n\t\t\t} else {\n\t\t\t\tcontainer.find('.schedule').addClass('d-none');\n\t\t\t}\n\t\t});\n\t\tcontainer.find('[name=\"saveButton\"]').on('click', function () {\n\t\t\tvar selectedModules = [];\n\t\t\tvar sendNoticeModules = [];\n\t\t\ttable.$('[type=\"checkbox\"]').each(function () {\n\t\t\t\tvar currentTarget = $(this);\n\t\t\t\tif (currentTarget.is(':checked')) {\n\t\t\t\t\tselectedModules.push(currentTarget.val());\n\t\t\t\t}\n\t\t\t});\n\t\t\ttable.$('.sandNoticeOn').each(function (e) {\n\t\t\t\tvar value = $(this).closest('tr').data('id');\n\t\t\t\tsendNoticeModules.push(value);\n\t\t\t});\n\t\t\tvar params = {\n\t\t\t\tmodule: 'Notification',\n\t\t\t\taction: 'Notification',\n\t\t\t\tmode: 'saveWatchingModules',\n\t\t\t\tselctedModules: selectedModules,\n\t\t\t\tsendNotifications: sendNoticeModules,\n\t\t\t\tfrequency: container.find('select[name=\"frequency\"]').val()\n\t\t\t};\n\t\t\tvar progress = jQuery.progressIndicator();\n\t\t\tAppConnector.request(params).done(function () {\n\t\t\t\tprogress.progressIndicator({'mode': 'hide'});\n\t\t\t\tapp.hideModalWindow();\n\t\t\t}).fail(function () {\n\t\t\t\tprogress.progressIndicator({'mode': 'hide'});\n\t\t\t\tapp.hideModalWindow();\n\t\t\t});\n\t\t});\n\t\tcontainer.find('.selectAllModules').on('click', function (e) {\n\t\t\te.stopPropagation();\n\t\t\ttable.$('.watchingModule:not(:disabled)').prop('checked', $(this).is(':checked'));\n\t\t});\n\t\tcontainer.find('.sentNoticeAll').on('click', function (e) {\n\t\t\te.stopPropagation();\n\t\t\tlet element = $(e.currentTarget).find('.fas');\n\t\t\tlet val = !element.hasClass('sandNoticeOn');\n\t\t\tthisInstance.changeSendNoticeState(element, val);\n\t\t\ttable.$('.sandNoticeOn,.sandNoticeOff').each(function () {\n\t\t\t\tthisInstance.changeSendNoticeState($(this), val);\n\t\t\t});\n\t\t});\n\t\ttable.$('.sentNotice').on('click', function (e) {\n\t\t\te.stopPropagation();\n\t\t\tlet element = $(e.currentTarget).find('.fas');\n\t\t\tthisInstance.changeSendNoticeState(element);\n\t\t});\n\t},\n\tchangeSendNoticeState: function (element, val) {\n\t\tif (val !== undefined) {\n\t\t\tif (val === true) {\n\t\t\t\telement.addClass('fa-envelope').removeClass('fa-envelope-open');\n\t\t\t\telement.addClass('sandNoticeOn').removeClass('sandNoticeOff');\n\t\t\t} else {\n\t\t\t\telement.addClass('fa-envelope-open').removeClass('fa-envelope');\n\t\t\t\telement.addClass('sandNoticeOff').removeClass('sandNoticeOn');\n\t\t\t}\n\t\t} else {\n\t\t\telement.toggleClass('fa-envelope fa-envelope-open');\n\t\t\telement.toggleClass('sandNoticeOn sandNoticeOff');\n\t\t}\n\t},\n\tregisterEvents: function () {\n\t\tvar container = $('.modalNotificationNotificationConfig');\n\t\tthis.registerEventForModal(container);\n\t}\n});\njQuery(document).ready(function () {\n\tvar instance = new Notification_NotificationConfig_Js();\n\tinstance.registerEvents();\n});\n"],"names":["jQuery","Class","container","thisInstance","this","table","app","registerDataTables","find","showPopoverElementView","on","e","state","removeClass","addClass","selectedModules","sendNoticeModules","$","each","currentTarget","is","push","val","value","closest","data","params","progress","progressIndicator","request","done","mode","hideModalWindow","fail","stopPropagation","prop","element","hasClass","changeSendNoticeState","undefined","toggleClass","registerEventForModal","document","ready","Notification_NotificationConfig_Js","registerEvents"],"mappings":"aAGAA,OAAOC,MAAM,qCAAsC,GAAI,uBAC/B,SAAUC,eAC5BC,aAAeC,KACfC,MAAQC,IAAIC,mBAAmBL,UAAUM,KAAK,wBAC9CC,uBAAuBP,UAAUM,KAAK,2BAChCE,GAAG,+BAAgC,4BAA4B,SAAUC,EAAGC,OACjFA,gBACOJ,KAAK,aAAaK,YAAY,oBAE9BL,KAAK,aAAaM,SAAS,uBAG7BN,KAAK,uBAAuBE,GAAG,SAAS,eAC7CK,gBAAkB,GAClBC,kBAAoB,SAClBC,EAAE,qBAAqBC,MAAK,eAC7BC,cAAgBF,EAAEb,MAClBe,cAAcC,GAAG,6BACJC,KAAKF,cAAcG,gBAG/BL,EAAE,iBAAiBC,MAAK,SAAUP,OACnCY,MAAQN,EAAEb,MAAMoB,QAAQ,MAAMC,KAAK,wBACrBJ,KAAKE,cAEpBG,OAAS,QACJ,sBACA,oBACF,qCACUX,kCACGC,4BACRd,UAAUM,KAAK,4BAA4Bc,OAEnDK,SAAW3B,OAAO4B,iCACTC,QAAQH,QAAQI,MAAK,oBACxBF,kBAAkB,CAACG,KAAQ,aAChCC,qBACFC,MAAK,oBACEL,kBAAkB,CAACG,KAAQ,aAChCC,kCAGIxB,KAAK,qBAAqBE,GAAG,SAAS,SAAUC,KACvDuB,wBACIjB,EAAE,kCAAkCkB,KAAK,UAAWlB,EAAEb,MAAMgB,GAAG,0BAE5DZ,KAAK,kBAAkBE,GAAG,SAAS,SAAUC,KACpDuB,sBACEE,QAAUnB,EAAEN,EAAEQ,eAAeX,KAAK,QAClCc,KAAOc,QAAQC,SAAS,6BACfC,sBAAsBF,QAASd,WACtCL,EAAE,gCAAgCC,MAAK,wBAC/BoB,sBAAsBrB,EAAEb,MAAOkB,iBAGxCL,EAAE,eAAeP,GAAG,SAAS,SAAUC,KAC1CuB,sBACEE,QAAUnB,EAAEN,EAAEQ,eAAeX,KAAK,qBACzB8B,sBAAsBF,mCAGd,SAAUA,QAASd,UAC7BiB,IAARjB,KACS,IAARA,aACKR,SAAS,eAAeD,YAAY,4BACpCC,SAAS,gBAAgBD,YAAY,2BAErCC,SAAS,oBAAoBD,YAAY,uBACzCC,SAAS,iBAAiBD,YAAY,0BAGvC2B,YAAY,wCACZA,YAAY,+CAGN,eACXtC,UAAYe,EAAE,6CACbwB,sBAAsBvC,cAG7BF,OAAO0C,UAAUC,OAAM,YACP,IAAIC,oCACVC"}