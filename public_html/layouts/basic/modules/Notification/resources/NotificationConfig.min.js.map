{"version":3,"file":"NotificationConfig.min.js","sources":["NotificationConfig.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class(\"Notification_NotificationConfig_Js\", {}, {\n\tregisterEventForModal: function (container) {\n\t\tvar thisInstance = this;\n\t\tvar table = app.registerDataTables(container.find('.modalDataTable'));\n\t\tapp.showPopoverElementView(container.find('.infoPopover'));\n\t\tcontainer.on('switchChange.bootstrapSwitch', '.sendNotificationsSwitch', function (e, state) {\n\t\t\tif (state) {\n\t\t\t\tcontainer.find('.schedule').removeClass('d-none');\n\t\t\t} else {\n\t\t\t\tcontainer.find('.schedule').addClass('d-none');\n\t\t\t}\n\t\t});\n\t\tcontainer.find('[name=\"saveButton\"]').on('click', function () {\n\t\t\tvar selectedModules = [];\n\t\t\tvar sendNoticeModules = [];\n\t\t\ttable.$('[type=\"checkbox\"]').each(function () {\n\t\t\t\tvar currentTarget = $(this);\n\t\t\t\tif (currentTarget.is(':checked')) {\n\t\t\t\t\tselectedModules.push(currentTarget.val());\n\t\t\t\t}\n\t\t\t});\n\t\t\ttable.$('.sandNoticeOn').each(function (e) {\n\t\t\t\tvar value = $(this).closest('tr').data('id');\n\t\t\t\tsendNoticeModules.push(value);\n\t\t\t});\n\t\t\tvar params = {\n\t\t\t\tmodule: 'Notification',\n\t\t\t\taction: 'Notification',\n\t\t\t\tmode: 'saveWatchingModules',\n\t\t\t\tselctedModules: selectedModules,\n\t\t\t\tsendNotifications: sendNoticeModules,\n\t\t\t\tfrequency: container.find('select[name=\"frequency\"]').val()\n\t\t\t};\n\t\t\tvar progress = jQuery.progressIndicator();\n\t\t\tAppConnector.request(params).done(function () {\n\t\t\t\tprogress.progressIndicator({'mode': 'hide'});\n\t\t\t\tapp.hideModalWindow();\n\t\t\t}).fail(function () {\n\t\t\t\tprogress.progressIndicator({'mode': 'hide'});\n\t\t\t\tapp.hideModalWindow();\n\t\t\t});\n\t\t});\n\t\tcontainer.find('.selectAllModules').on('click', function (e) {\n\t\t\te.stopPropagation();\n\t\t\ttable.$('.watchingModule:not(:disabled)').prop('checked', $(this).is(':checked'));\n\t\t});\n\t\tcontainer.find('.sentNoticeAll').on('click', function (e) {\n\t\t\te.stopPropagation();\n\t\t\tlet element = $(e.currentTarget).find('.fas');\n\t\t\tlet val = !element.hasClass('sandNoticeOn');\n\t\t\tthisInstance.changeSendNoticeState(element, val);\n\t\t\ttable.$('.sandNoticeOn,.sandNoticeOff').each(function () {\n\t\t\t\tthisInstance.changeSendNoticeState($(this), val);\n\t\t\t});\n\t\t});\n\t\ttable.$('.sentNotice').on('click', function (e) {\n\t\t\te.stopPropagation();\n\t\t\tlet element = $(e.currentTarget).find('.fas');\n\t\t\tthisInstance.changeSendNoticeState(element);\n\t\t});\n\t},\n\tchangeSendNoticeState: function (element, val) {\n\t\tif (val !== undefined) {\n\t\t\tif (val === true) {\n\t\t\t\telement.addClass('fa-envelope').removeClass('fa-envelope-open');\n\t\t\t\telement.addClass('sandNoticeOn').removeClass('sandNoticeOff');\n\t\t\t} else {\n\t\t\t\telement.addClass('fa-envelope-open').removeClass('fa-envelope');\n\t\t\t\telement.addClass('sandNoticeOff').removeClass('sandNoticeOn');\n\t\t\t}\n\t\t} else {\n\t\t\telement.toggleClass('fa-envelope fa-envelope-open');\n\t\t\telement.toggleClass('sandNoticeOn sandNoticeOff');\n\t\t}\n\t},\n\tregisterEvents: function () {\n\t\tvar container = $('.modalNotificationNotificationConfig');\n\t\tthis.registerEventForModal(container);\n\t}\n});\njQuery(document).ready(function () {\n\tvar instance = new Notification_NotificationConfig_Js();\n\tinstance.registerEvents();\n});\n"],"names":["jQuery","Class","container","thisInstance","table","app","registerDataTables","find","showPopoverElementView","on","e","state","removeClass","addClass","selectedModules","sendNoticeModules","$","each","currentTarget","is","push","val","value","closest","data","params","progress","progressIndicator","request","done","hideModalWindow","fail","stopPropagation","prop","element","hasClass","changeSendNoticeState","undefined","toggleClass","registerEventForModal","document","ready","instance","Notification_NotificationConfig_Js","registerEvents"],"mappings":"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"}