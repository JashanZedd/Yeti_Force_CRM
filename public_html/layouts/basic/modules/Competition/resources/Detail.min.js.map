{"version":3,"file":"Detail.min.js","sources":["Detail.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\nVtiger_Detail_Js(\"Competition_Detail_Js\", {}, {\n\thierarchyResponseCache: {},\n\tgetHierarchyResponseData: function (params) {\n\t\tlet thisInstance = this,\n\t\t\taDeferred = jQuery.Deferred();\n\n\t\tif (!($.isEmptyObject(thisInstance.hierarchyResponseCache))) {\n\t\t\taDeferred.resolve(thisInstance.hierarchyResponseCache);\n\t\t} else {\n\t\t\tAppConnector.request(params).then(\n\t\t\t\tfunction (data) {\n\t\t\t\t\tthisInstance.hierarchyResponseCache = data;\n\t\t\t\t\taDeferred.resolve(thisInstance.hierarchyResponseCache);\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t\treturn aDeferred.promise();\n\t},\n\t/*\n\t * function to display the hierarchy response data\n\t */\n\tdisplayHierarchyResponseData: function (data) {\n\t\tlet callbackFunction = function () {\n\t\t\tapp.showScrollBar(jQuery('#hierarchyScroll'), {\n\t\t\t\theight: '300px',\n\t\t\t\trailVisible: true,\n\t\t\t\tsize: '6px'\n\t\t\t});\n\t\t};\n\t\tapp.showModalWindow(data, function () {\n\t\t\tif (typeof callbackFunction == 'function' && $(\"#hierarchyScroll\").height() > 300) {\n\t\t\t\tcallbackFunction();\n\t\t\t}\n\t\t});\n\t},\n\tregisterHierarchyRecordCount: function () {\n\t\tlet hierarchyButton = $('.js-detail-hierarchy'),\n\t\t\tparams = {\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\taction: 'RelationAjax',\n\t\t\t\trecord: app.getRecordId(),\n\t\t\t\tmode: 'getHierarchyCount'\n\t\t\t};\n\t\tif (hierarchyButton.length) {\n\t\t\tAppConnector.request(params).then(function (response) {\n\t\t\t\tif (response.success) {\n\t\t\t\t\thierarchyButton.append(' <span class=\"badge\">' + response.result + '</span>');\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\tregisterShowHierarchy: function () {\n\t\tlet thisInstance = this,\n\t\t\thierarchyButton = $('.detailViewTitle'),\n\t\t\tparams = {\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tview: 'Hierarchy',\n\t\t\t\trecord: app.getRecordId()\n\t\t\t};\n\t\thierarchyButton.on('click', '.js-detail__icon, .js-detail-hierarchy', function () {\n\t\t\tlet progressIndicatorElement = $.progressIndicator({\n\t\t\t\t'position': 'html',\n\t\t\t\t'blockInfo': {\n\t\t\t\t\t'enabled': true\n\t\t\t\t}\n\t\t\t});\n\t\t\tthisInstance.getHierarchyResponseData(params).then(function (data) {\n\t\t\t\tthisInstance.displayHierarchyResponseData(data);\n\t\t\t\tprogressIndicatorElement.progressIndicator({'mode': 'hide'});\n\t\t\t});\n\t\t});\n\t},\n\tregisterEvents: function () {\n\t\tthis._super();\n\t\tthis.registerHierarchyRecordCount();\n\t\tthis.registerShowHierarchy();\n\t}\n});\n"],"names":["Vtiger_Detail_Js","params","thisInstance","aDeferred","jQuery","Deferred","$","isEmptyObject","hierarchyResponseCache","resolve","request","then","data","promise","callbackFunction","showScrollBar","showModalWindow","height","hierarchyButton","app","getModuleName","getRecordId","length","response","success","append","result","on","progressIndicatorElement","progressIndicator","getHierarchyResponseData","displayHierarchyResponseData","_super","registerHierarchyRecordCount","registerShowHierarchy"],"mappings":";;AAAA;AACAA,iBAAiB,uBAAjB,EAA0C,EAA1C,EAA8C;yBACrB,EADqB;2BAEnB,kCAAUC,MAAV,EAAkB;MACvCC,eAAe,IAAnB;MACCC,YAAYC,OAAOC,QAAP,EADb;;MAGI,CAAEC,EAAEC,aAAF,CAAgBL,aAAaM,sBAA7B,CAAN,EAA6D;aAClDC,OAAV,CAAkBP,aAAaM,sBAA/B;GADD,MAEO;gBACOE,OAAb,CAAqBT,MAArB,EAA6BU,IAA7B,CACC,UAAUC,IAAV,EAAgB;iBACFJ,sBAAb,GAAsCI,IAAtC;cACUH,OAAV,CAAkBP,aAAaM,sBAA/B;IAHF;;SAOML,UAAUU,OAAV,EAAP;EAhB4C;;;;+BAqBf,sCAAUD,IAAV,EAAgB;MACzCE,mBAAmB,SAAnBA,gBAAmB,GAAY;OAC9BC,aAAJ,CAAkBX,OAAO,kBAAP,CAAlB,EAA8C;YACrC,OADqC;iBAEhC,IAFgC;UAGvC;IAHP;GADD;MAOIY,eAAJ,CAAoBJ,IAApB,EAA0B,YAAY;OACjC,OAAOE,gBAAP,IAA2B,UAA3B,IAAyCR,EAAE,kBAAF,EAAsBW,MAAtB,KAAiC,GAA9E,EAAmF;;;GADpF;EA7B4C;+BAmCf,wCAAY;MACrCC,kBAAkBZ,EAAE,sBAAF,CAAtB;MACCL,SAAS;WACAkB,IAAIC,aAAJ,EADA;WAEA,cAFA;WAGAD,IAAIE,WAAJ,EAHA;SAIF;GALR;MAOIH,gBAAgBI,MAApB,EAA4B;gBACdZ,OAAb,CAAqBT,MAArB,EAA6BU,IAA7B,CAAkC,UAAUY,QAAV,EAAoB;QACjDA,SAASC,OAAb,EAAsB;qBACLC,MAAhB,CAAuB,0BAA0BF,SAASG,MAAnC,GAA4C,SAAnE;;IAFF;;EA5C2C;wBAmDtB,iCAAY;MAC9BxB,eAAe,IAAnB;MACCgB,kBAAkBZ,EAAE,kBAAF,CADnB;MAECL,SAAS;WACAkB,IAAIC,aAAJ,EADA;SAEF,WAFE;WAGAD,IAAIE,WAAJ;GALV;kBAOgBM,EAAhB,CAAmB,OAAnB,EAA4B,wCAA5B,EAAsE,YAAY;OAC7EC,2BAA2BtB,EAAEuB,iBAAF,CAAoB;gBACtC,MADsC;iBAErC;gBACD;;IAHkB,CAA/B;gBAMaC,wBAAb,CAAsC7B,MAAtC,EAA8CU,IAA9C,CAAmD,UAAUC,IAAV,EAAgB;iBACrDmB,4BAAb,CAA0CnB,IAA1C;6BACyBiB,iBAAzB,CAA2C,EAAC,QAAQ,MAAT,EAA3C;IAFD;GAPD;EA3D4C;iBAwE7B,0BAAY;OACtBG,MAAL;OACKC,4BAAL;OACKC,qBAAL;;CA3EF"}