{"version":3,"file":"Detail.min.js","sources":["Detail.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\nVtiger_Detail_Js(\n\t'Competition_Detail_Js',\n\t{},\n\t{\n\t\thierarchyResponseCache: {},\n\t\tgetHierarchyResponseData: function (params) {\n\t\t\tlet thisInstance = this,\n\t\t\t\taDeferred = jQuery.Deferred();\n\n\t\t\tif (!$.isEmptyObject(thisInstance.hierarchyResponseCache)) {\n\t\t\t\taDeferred.resolve(thisInstance.hierarchyResponseCache);\n\t\t\t} else {\n\t\t\t\tAppConnector.request(params).then(function (data) {\n\t\t\t\t\tthisInstance.hierarchyResponseCache = data;\n\t\t\t\t\taDeferred.resolve(thisInstance.hierarchyResponseCache);\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/*\n\t\t * function to display the hierarchy response data\n\t\t */\n\t\tdisplayHierarchyResponseData: function (data) {\n\t\t\tlet callbackFunction = function () {\n\t\t\t\tapp.showScrollBar($('#hierarchyScroll'), {\n\t\t\t\t\theight: '300px',\n\t\t\t\t\trailVisible: true,\n\t\t\t\t\tsize: '6px'\n\t\t\t\t});\n\t\t\t};\n\t\t\tapp.showModalWindow(data, function (modalContainer) {\n\t\t\t\tApp.Components.Scrollbar.xy($('#hierarchyScroll', modalContainer));\n\t\t\t\tif (typeof callbackFunction == 'function' && $('#hierarchyScroll', modalContainer).height() > 300) {\n\t\t\t\t\tcallbackFunction();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Registers read count of hierarchy if it is possoble\n\t\t */\n\t\tregisterHierarchyRecordCount: function () {\n\t\t\tlet hierarchyButton = $('.js-detail-hierarchy'),\n\t\t\t\tparams = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\taction: 'RelationAjax',\n\t\t\t\t\trecord: app.getRecordId(),\n\t\t\t\t\tmode: 'getHierarchyCount'\n\t\t\t\t};\n\t\t\tif (hierarchyButton.length) {\n\t\t\t\tAppConnector.request(params).then(function (response) {\n\t\t\t\t\tif (response.success) {\n\t\t\t\t\t\t$('.hierarchy .badge').html(response.result);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tregisterShowHierarchy: function () {\n\t\t\tlet thisInstance = this,\n\t\t\t\thierarchyButton = $('.detailViewTitle'),\n\t\t\t\tparams = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tview: 'Hierarchy',\n\t\t\t\t\trecord: app.getRecordId()\n\t\t\t\t};\n\t\t\thierarchyButton.on('click', '.js-detail-hierarchy', function () {\n\t\t\t\tlet progressIndicatorElement = $.progressIndicator({\n\t\t\t\t\tposition: 'html',\n\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\tenabled: true\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthisInstance.getHierarchyResponseData(params).then(function (data) {\n\t\t\t\t\tthisInstance.displayHierarchyResponseData(data);\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\tthis._super();\n\t\t\tthis.registerHierarchyRecordCount();\n\t\t\tthis.registerShowHierarchy();\n\t\t}\n\t}\n);\n"],"names":["Vtiger_Detail_Js","hierarchyResponseCache","getHierarchyResponseData","params","aDeferred","jQuery","Deferred","$","isEmptyObject","thisInstance","AppConnector","request","then","data","resolve","promise","displayHierarchyResponseData","callbackFunction","app","showScrollBar","height","railVisible","size","showModalWindow","modalContainer","App","Components","Scrollbar","xy","registerHierarchyRecordCount","module","getModuleName","action","record","getRecordId","mode","hierarchyButton","length","response","success","html","result","registerShowHierarchy","view","on","progressIndicatorElement","progressIndicator","position","blockInfo","enabled","registerEvents","_super"],"mappings":"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"}