{"version":3,"file":"Map.min.js","sources":["Map.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class(\"OpenStreetMap_Map_Js\", {}, {\n\tcontainer: false,\n\tmapInstance: false,\n\tselectedParams: false,\n\tlayerMarkers: false,\n\tmarkers: false,\n\tcacheMarkers: [],\n\tpolygonLayer: false,\n\trouteLayer: false,\n\trecordsIds: '',\n\tcacheLayerMarkers: {},\n\tindirectPointLayer: {},\n\tsetSelectedParams: function (params) {\n\t\tdelete params['view'];\n\t\tthis.selectedParams = params;\n\t},\n\tregisterMap: function (startCoordinate, startZoom) {\n\t\tvar myMap = L.map('mapid').setView(startCoordinate, startZoom);\n\t\tL.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n\t\t\tmaxZoom: 19,\n\t\t\tattribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\" rel=\"noreferrer noopener\">OpenStreetMap</a>'\n\n\t\t}).addTo(myMap);\n\t\tthis.mapInstance = myMap;\n\t\treturn myMap;\n\t},\n\tsetMarkersByResponse: function (response) {\n\t\tvar thisInstance = this;\n\t\tvar markerArray = [];\n\t\tvar container = this.container;\n\t\tvar map = this.mapInstance;\n\t\tif (typeof response.result.coordinates !== \"undefined\") {\n\t\t\tvar markers = L.markerClusterGroup({\n\t\t\t\tmaxClusterRadius: 10\n\t\t\t});\n\t\t\tvar coordinates = response.result.coordinates;\n\t\t\tif (typeof this.layerMarkers !== 'boolean') {\n\t\t\t\tmap.removeLayer(this.layerMarkers);\n\t\t\t}\n\t\t\tvar records = [];\n\t\t\tcoordinates.forEach(function (e) {\n\t\t\t\tmarkerArray.push([e.lat, e.lon]);\n\t\t\t\tvar marker = L.marker([e.lat, e.lon], {\n\t\t\t\t\ticon: L.AwesomeMarkers.icon({\n\t\t\t\t\t\ticon: 'home',\n\t\t\t\t\t\tmarkerColor: 'blue',\n\t\t\t\t\t\tprefix: 'fa',\n\t\t\t\t\t\ticonColor: e.color\n\t\t\t\t\t})\n\t\t\t\t}).bindPopup(e.label);\n\t\t\t\tmarkers.addLayer(marker);\n\t\t\t\trecords.push(e.recordId);\n\t\t\t});\n\t\t\tthis.recordsIds = records;\n\t\t\tthis.markers = coordinates;\n\t\t\tthis.layerMarkers = markers;\n\t\t\tmap.addLayer(markers);\n\t\t}\n\t\tif (typeof this.polygonLayer !== 'boolean') {\n\t\t\tmap.removeLayer(this.polygonLayer);\n\t\t}\n\t\tif (typeof response.result.coordinatesCeneter !== \"undefined\") {\n\t\t\tif (typeof response.result.coordinatesCeneter.error === \"undefined\") {\n\t\t\t\tvar radius = container.find('.js-radius').val();\n\t\t\t\tmarkerArray.push([response.result.coordinatesCeneter.lat, response.result.coordinatesCeneter.lon]);\n\t\t\t\tvar popup = '<span class=\"description\">' + container.find('.searchValue').val() + '</span><br /><input type=hidden class=\"coordinates\" data-lon=\"' + response.result.coordinatesCeneter.lon + '\" data-lat=\"' + response.result.coordinatesCeneter.lat + '\">';\n\t\t\t\tpopup += '<button class=\"btn btn-success btn-sm p-1 startTrack mr-2\"><span class=\"fas  fa-truck\"></span></button>';\n\t\t\t\tpopup += '<button class=\"btn btn-danger btn-sm p-1 endTrack\"><span class=\"fas fa-flag-checkered\"></span></button>';\n\t\t\t\tvar marker = L.marker([response.result.coordinatesCeneter.lat, response.result.coordinatesCeneter.lon], {\n\t\t\t\t\ticon: L.AwesomeMarkers.icon({\n\t\t\t\t\t\ticon: 'search',\n\t\t\t\t\t\tmarkerColor: 'red',\n\t\t\t\t\t\tprefix: 'fa',\n\t\t\t\t\t})\n\t\t\t\t}).bindPopup(popup);\n\t\t\t\tmap.addLayer(marker);\n\t\t\t\tif ($.isNumeric(radius)) {\n\t\t\t\t\tradius = parseInt(radius) * 1000;\n\t\t\t\t\tvar circle = L.circle([response.result.coordinatesCeneter.lat, response.result.coordinatesCeneter.lon], radius, {\n\t\t\t\t\t\tcolor: 'red',\n\t\t\t\t\t\tfillColor: '#f03',\n\t\t\t\t\t\tfillOpacity: 0.05\n\t\t\t\t\t});\n\t\t\t\t\tthis.polygonLayer = L.featureGroup([circle]);\n\t\t\t\t\tmap.addLayer(this.polygonLayer);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tvar params = {\n\t\t\t\t\ttitle: app.vtranslate('JS_LBL_PERMISSION'),\n\t\t\t\t\ttext: response.result.coordinatesCeneter.error,\n\t\t\t\t\ttype: 'error',\n\t\t\t\t};\n\t\t\t\tVtiger_Helper_Js.showMessage(params);\n\t\t\t}\n\t\t}\n\t\tif (typeof response.result.cache !== \"undefined\") {\n\t\t\tvar cache = response.result.cache;\n\t\t\tObject.keys(cache).forEach(function (key) {\n\t\t\t\tif (typeof thisInstance.cacheLayerMarkers[key] !== \"undefined\") {\n\t\t\t\t\tmap.removeLayer(thisInstance.cacheLayerMarkers[key]);\n\t\t\t\t}\n\t\t\t\tvar markersCache = L.markerClusterGroup({\n\t\t\t\t\tmaxClusterRadius: 10\n\t\t\t\t});\n\t\t\t\tcoordinates = cache[key];\n\t\t\t\tcoordinates.forEach(function (e) {\n\t\t\t\t\tif (thisInstance.recordsIds.indexOf(e.recordId) === -1) {\n\t\t\t\t\t\tmarkerArray.push([e.lat, e.lon]);\n\t\t\t\t\t\tvar marker = L.marker([e.lat, e.lon], {\n\t\t\t\t\t\t\ticon: L.AwesomeMarkers.icon({\n\t\t\t\t\t\t\t\ticon: 'home',\n\t\t\t\t\t\t\t\tmarkerColor: 'orange',\n\t\t\t\t\t\t\t\tprefix: 'fa',\n\t\t\t\t\t\t\t\ticonColor: e.color\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}).bindPopup(e.label);\n\t\t\t\t\t\tmarkersCache.addLayer(marker);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthisInstance.cacheMarkers[key] = coordinates;\n\t\t\t\tmap.addLayer(markersCache);\n\t\t\t\tthisInstance.cacheLayerMarkers[key] = markersCache;\n\t\t\t});\n\t\t}\n\n\t\tvar footer = this.container.find('.modal-footer');\n\t\tif (typeof response.result.legend !== \"undefined\") {\n\t\t\tvar html = '';\n\t\t\tvar legend = response.result.legend;\n\t\t\tlegend.forEach(function (e) {\n\t\t\t\thtml += '<div class=\"pull-left\"><span class=\"leegendIcon\" style=\"background:' + e.color + '\"></span> ' + e.value + '</div>';\n\t\t\t});\n\t\t\tfooter.html(html);\n\t\t} else {\n\t\t\tfooter.html('');\n\t\t}\n\t\tif (markerArray.length)\n\t\t\tmap.fitBounds(markerArray);\n\t\tthis.container.find('.groupNeighbours').prop('checked', true);\n\t},\n\tshowCalculateBtn: function () {\n\t\tvar container = this.container;\n\t\tvar endAddress = container.find('.end').val();\n\t\tvar startAddress = container.find('.start').val();\n\t\tif (endAddress.length > 0 && startAddress.length > 0) {\n\t\t\tcontainer.find('.calculateTrack').removeClass('d-none');\n\t\t}\n\t},\n\tregisterCacheEvents: function (container) {\n\t\tvar thisInstance = this;\n\t\tcontainer.find('.showRecordsFromCache').on('change', function (e) {\n\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\tvar moduleName = currentTarget.data('module');\n\t\t\tif (currentTarget.is(':checked')) {\n\t\t\t\tvar params = {\n\t\t\t\t\tmodule: 'OpenStreetMap',\n\t\t\t\t\taction: 'GetMarkers',\n\t\t\t\t\tsrcModule: app.getModuleName(),\n\t\t\t\t\tcache: [moduleName],\n\t\t\t\t};\n\t\t\t\tAppConnector.request(params).done(function (response) {\n\t\t\t\t\tthisInstance.setMarkersByResponse(response);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthisInstance.mapInstance.removeLayer(thisInstance.cacheLayerMarkers[moduleName]);\n\t\t\t}\n\n\t\t});\n\t\tcontainer.find('.copyToClipboard').on('click', function () {\n\t\t\tvar params = {\n\t\t\t\tmodule: 'OpenStreetMap',\n\t\t\t\taction: 'ClipBoard',\n\t\t\t\tmode: 'save',\n\t\t\t\trecordIds: JSON.stringify(thisInstance.recordsIds),\n\t\t\t\tsrcModule: app.getModuleName()\n\t\t\t};\n\t\t\tAppConnector.request(params).done(function (response) {\n\t\t\t\tVtiger_Helper_Js.showMessage({\n\t\t\t\t\ttext: app.vtranslate('JS_NOTIFY_COPY_TEXT'),\n\t\t\t\t\ttype: 'success',\n\t\t\t\t});\n\t\t\t\tvar countRecords = container.find('.countRecords' + app.getModuleName());\n\t\t\t\tcountRecords.html(response.result);\n\t\t\t\tcountRecords.closest('.cacheModuleContainer').find('.deleteClipBoard').removeClass('d-none');\n\t\t\t});\n\t\t});\n\t\tcontainer.find('.deleteClipBoard').on('click', function (e) {\n\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\tvar moduleName = currentTarget.data('module');\n\t\t\tvar params = {\n\t\t\t\tmodule: 'OpenStreetMap',\n\t\t\t\taction: 'ClipBoard',\n\t\t\t\tmode: 'delete',\n\t\t\t\tsrcModule: moduleName\n\t\t\t};\n\t\t\tAppConnector.request(params).done(function (response) {\n\t\t\t\tVtiger_Helper_Js.showMessage({\n\t\t\t\t\ttitle: app.vtranslate('JS_LBL_PERMISSION'),\n\t\t\t\t\ttext: app.vtranslate('JS_SAVE_NOTIFY_OK'),\n\t\t\t\t\ttype: 'success',\n\t\t\t\t});\n\t\t\t\tvar countRecords = container.find('.countRecords' + moduleName);\n\t\t\t\tcountRecords.html('');\n\t\t\t\tcurrentTarget.addClass('d-none');\n\t\t\t\tcountRecords.closest('.cacheModuleContainer').find('.showRecordsFromCache').prop('checked', false);\n\t\t\t\tcountRecords.closest('.cacheModuleContainer').find('.showRecordsFromCache').trigger('change');\n\t\t\t});\n\t\t});\n\t\tcontainer.find('.addAllRecords').on('click', function (e) {\n\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\tvar moduleName = currentTarget.data('module');\n\t\t\tvar params = {\n\t\t\t\tmodule: 'OpenStreetMap',\n\t\t\t\taction: 'ClipBoard',\n\t\t\t\tmode: 'addAllRecords',\n\t\t\t\tsrcModule: moduleName\n\t\t\t};\n\t\t\tAppConnector.request(params).done(function (response) {\n\t\t\t\tVtiger_Helper_Js.showMessage({\n\t\t\t\t\ttext: app.vtranslate('JS_MESSAGE_DOWNLOADED_ADDRESS_DATA'),\n\t\t\t\t\ttype: 'success',\n\t\t\t\t});\n\t\t\t\tcontainer.find('.countRecords' + moduleName).html(response.result.count);\n\t\t\t\tvar moduleContainer = currentTarget.closest('.cacheModuleContainer');\n\t\t\t\tmoduleContainer.find('.showRecordsFromCache').prop('checked', true);\n\t\t\t\tmoduleContainer.find('.showRecordsFromCache').trigger('change');\n\t\t\t\tif (response.result.count != '0')\n\t\t\t\t\tmoduleContainer.find('.deleteClipBoard').removeClass('d-none');\n\t\t\t});\n\t\t});\n\t},\n\tgetCacheParamsToRequest: function () {\n\t\tvar container = this.container;\n\t\tvar params = [];\n\t\tcontainer.find('.showRecordsFromCache').each(function () {\n\t\t\tvar currentObject = $(this);\n\t\t\tif (currentObject.is(':checked'))\n\t\t\t\tparams.push(currentObject.data('module'));\n\t\t});\n\t\treturn params;\n\t},\n\tregisterSearchCompany: function () {\n\t\tvar container = this.container;\n\t\tvar searchValue = container.find('.searchCompany');\n\t\tvar searchModule = container.find('.searchModule');\n\t\tvar addButton = container.find('.addRecord');\n\t\tvar thistInstance = this;\n\t\taddButton.on('click', function () {\n\t\t\tvar map = thistInstance.mapInstance;\n\t\t\tvar markers = thistInstance.layerMarkers;\n\t\t\tvar crmId = addButton.data('crmId');\n\t\t\tif (crmId == '')\n\t\t\t\treturn false;\n\t\t\tAppConnector.request({\n\t\t\t\tmodule: 'OpenStreetMap',\n\t\t\t\taction: 'ClipBoard',\n\t\t\t\tmode: 'addRecord',\n\t\t\t\trecord: crmId,\n\t\t\t\tsrcModuleName: searchModule.val()\n\t\t\t}).done(function (response) {\n\t\t\t\taddButton.data('crmId', '');\n\t\t\t\tif (response.result.length == 1) {\n\t\t\t\t\tvar marker = L.marker([response.result[0].lat, response.result[0].lon], {\n\t\t\t\t\t\ticon: L.AwesomeMarkers.icon({\n\t\t\t\t\t\t\ticon: 'home',\n\t\t\t\t\t\t\tmarkerColor: 'cadetblue',\n\t\t\t\t\t\t\tprefix: 'fa',\n\t\t\t\t\t\t\ticonColor: response.result[0].color\n\t\t\t\t\t\t})\n\t\t\t\t\t}).bindPopup(response.result[0].label);\n\t\t\t\t\tmarkers.addLayer(marker);\n\t\t\t\t\tmap.addLayer(markers);\n\t\t\t\t\tmap.setView(new L.LatLng(response.result[0].lat, response.result[0].lon), 14);\n\t\t\t\t} else {\n\t\t\t\t\tVtiger_Helper_Js.showMessage({\n\t\t\t\t\t\ttitle: app.vtranslate('JS_LBL_PERMISSION'),\n\t\t\t\t\t\ttext: response.result,\n\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tsearchValue.val('');\n\t\t\t});\n\t\t});\n\t\t$.widget(\"custom.ivAutocomplete\", $.ui.autocomplete, {\n\t\t\t_create: function () {\n\t\t\t\tthis._super();\n\t\t\t\tthis.widget().menu(\"option\", \"items\", \"> :not(.ui-autocomplete-category)\");\n\t\t\t},\n\t\t\t_renderMenu: function (ul, items) {\n\t\t\t\tvar that = this, currentCategory = \"\";\n\t\t\t\t$.each(items, function (index, item) {\n\t\t\t\t\tvar li;\n\t\t\t\t\tif (item.category != currentCategory) {\n\t\t\t\t\t\tul.append(\"<li class='ui-autocomplete-category'>\" + item.category + \"</li>\");\n\t\t\t\t\t\tcurrentCategory = item.category;\n\t\t\t\t\t}\n\t\t\t\t\tthat._renderItemData(ul, item);\n\t\t\t\t});\n\t\t\t},\n\t\t\t_renderItemData: function (ul, item) {\n\t\t\t\treturn this._renderItem(ul, item).data(\"ui-autocomplete-item\", item);\n\t\t\t},\n\t\t\t_renderItem: function (ul, item) {\n\t\t\t\treturn $(\"<li>\")\n\t\t\t\t\t.data(\"item.autocomplete\", item)\n\t\t\t\t\t.append($(\"<a></a>\").html(item.label))\n\t\t\t\t\t.appendTo(ul);\n\t\t\t},\n\t\t});\n\t\tsearchValue.ivAutocomplete({\n\t\t\tdelay: '600',\n\t\t\tminLength: '3',\n\t\t\tsource: function (request, response) {\n\t\t\t\tAppConnector.request({\n\t\t\t\t\tmodule: searchModule.val(),\n\t\t\t\t\tcurentModule: app.getModuleName(),\n\t\t\t\t\tsearchModule: searchModule.val(),\n\t\t\t\t\tview: 'BasicAjax',\n\t\t\t\t\tmode: 'showSearchResults',\n\t\t\t\t\tvalue: searchValue.val(),\n\t\t\t\t\thtml: false,\n\t\t\t\t}).done(function (responseAjax) {\n\t\t\t\t\tresponseAjax = JSON.parse(responseAjax);\n\t\t\t\t\tvar reponseDataList = responseAjax.result;\n\t\t\t\t\tif (reponseDataList.length <= 0) {\n\t\t\t\t\t\treponseDataList.push({\n\t\t\t\t\t\t\tlabel: app.vtranslate('JS_NO_RESULTS_FOUND'),\n\t\t\t\t\t\t\ttype: 'no results',\n\t\t\t\t\t\t\tcategory: ''\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tresponse(reponseDataList);\n\t\t\t\t});\n\t\t\t},\n\t\t\tselect: function (event, ui) {\n\t\t\t\tvar selected = ui.item;\n\t\t\t\taddButton.data('crmId', selected.id);\n\t\t\t},\n\t\t\tclose: function (event, ui) {\n\n\t\t\t}\n\n\t\t});\n\t},\n\tregisterBasicModal: function () {\n\t\tvar thisInstance = this;\n\t\tvar container = this.container;\n\t\tvar map = thisInstance.mapInstance;\n\t\tvar layer, description;\n\t\tthisInstance.registerCacheEvents(container);\n\t\tcontainer.find('.groupBy').on('click', function () {\n\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\t'position': container,\n\t\t\t\t'blockInfo': {\n\t\t\t\t\t'enabled': true\n\t\t\t\t}\n\t\t\t});\n\t\t\tvar params = {\n\t\t\t\tmodule: 'OpenStreetMap',\n\t\t\t\taction: 'GetMarkers',\n\t\t\t\tsrcModule: app.getModuleName(),\n\t\t\t\tgroupBy: container.find('.fieldsToGroup').val(),\n\t\t\t\tsearchValue: container.find('.searchValue').val(),\n\t\t\t\tradius: container.find('.js-radius').val(),\n\t\t\t\tcache: thisInstance.getCacheParamsToRequest(),\n\t\t\t};\n\t\t\tparams = $.extend(thisInstance.selectedParams, params);\n\t\t\tAppConnector.request(params).done(function (response) {\n\t\t\t\tprogressIndicatorElement.progressIndicator({'mode': 'hide'});\n\t\t\t\tthisInstance.setMarkersByResponse(response);\n\t\t\t});\n\t\t});\n\t\tcontainer.find('.groupNeighbours').on('change', function (e) {\n\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\tmap.removeLayer(thisInstance.layerMarkers);\n\t\t\tvar markers = thisInstance.markers;\n\t\t\tif (currentTarget.is(':checked')) {\n\t\t\t\tlayer = L.markerClusterGroup({\n\t\t\t\t\tmaxClusterRadius: 10\n\t\t\t\t});\n\t\t\t\tmarkers.forEach(function (e) {\n\t\t\t\t\tvar marker = L.marker([e.lat, e.lon], {\n\t\t\t\t\t\ticon: L.AwesomeMarkers.icon({\n\t\t\t\t\t\t\ticon: 'home',\n\t\t\t\t\t\t\tmarkerColor: 'blue',\n\t\t\t\t\t\t\tprefix: 'fa',\n\t\t\t\t\t\t\ticonColor: e.color\n\t\t\t\t\t\t})\n\t\t\t\t\t}).bindPopup(e.label);\n\t\t\t\t\tlayer.addLayer(marker);\n\t\t\t\t});\n\n\t\t\t\tObject.keys(thisInstance.cacheLayerMarkers).forEach(function (key) {\n\t\t\t\t\tmap.removeLayer(thisInstance.cacheLayerMarkers[key]);\n\t\t\t\t\tvar cacheLayer = L.markerClusterGroup({\n\t\t\t\t\t\tmaxClusterRadius: 10\n\t\t\t\t\t});\n\t\t\t\t\tthisInstance.cacheMarkers[key].forEach(function (e) {\n\t\t\t\t\t\tvar marker = L.marker([e.lat, e.lon], {\n\t\t\t\t\t\t\ticon: L.AwesomeMarkers.icon({\n\t\t\t\t\t\t\t\ticon: 'home',\n\t\t\t\t\t\t\t\tmarkerColor: 'orange',\n\t\t\t\t\t\t\t\tprefix: 'fa',\n\t\t\t\t\t\t\t\ticonColor: e.color\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}).bindPopup(e.label);\n\t\t\t\t\t\tcacheLayer.addLayer(marker);\n\t\t\t\t\t});\n\t\t\t\t\tthisInstance.cacheLayerMarkers[key] = cacheLayer;\n\t\t\t\t\tmap.addLayer(cacheLayer);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tvar markerArray = [];\n\t\t\t\tmarkers.forEach(function (e) {\n\t\t\t\t\tvar marker = L.marker([e.lat, e.lon], {\n\t\t\t\t\t\ticon: L.AwesomeMarkers.icon({\n\t\t\t\t\t\t\ticon: 'home',\n\t\t\t\t\t\t\tmarkerColor: 'blue',\n\t\t\t\t\t\t\tprefix: 'fa',\n\t\t\t\t\t\t\ticonColor: e.color\n\t\t\t\t\t\t})\n\t\t\t\t\t}).bindPopup(e.label);\n\t\t\t\t\tmarkerArray.push(marker);\n\t\t\t\t});\n\t\t\t\tlayer = L.featureGroup(markerArray);\n\t\t\t\tObject.keys(thisInstance.cacheLayerMarkers).forEach(function (key) {\n\t\t\t\t\tmap.removeLayer(thisInstance.cacheLayerMarkers[key]);\n\t\t\t\t\tvar markerArray = [];\n\t\t\t\t\tthisInstance.cacheMarkers[key].forEach(function (e) {\n\t\t\t\t\t\tvar marker = L.marker([e.lat, e.lon], {\n\t\t\t\t\t\t\ticon: L.AwesomeMarkers.icon({\n\t\t\t\t\t\t\t\ticon: 'home',\n\t\t\t\t\t\t\t\tmarkerColor: 'orange',\n\t\t\t\t\t\t\t\tprefix: 'fa',\n\t\t\t\t\t\t\t\ticonColor: e.color\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}).bindPopup(e.label);\n\t\t\t\t\t\tmarkerArray.push(marker);\n\t\t\t\t\t});\n\t\t\t\t\tthisInstance.cacheLayerMarkers[key] = L.featureGroup(markerArray);\n\t\t\t\t\tmap.addLayer(thisInstance.cacheLayerMarkers[key]);\n\t\t\t\t});\n\t\t\t}\n\t\t\tthisInstance.layerMarkers = layer;\n\t\t\tmap.addLayer(layer);\n\t\t});\n\t\tcontainer.find('.searchBtn').on('click', function (e) {\n\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\t'position': container,\n\t\t\t\t'blockInfo': {\n\t\t\t\t\t'enabled': true\n\t\t\t\t}\n\t\t\t});\n\t\t\tvar params = {\n\t\t\t\tmodule: 'OpenStreetMap',\n\t\t\t\taction: 'GetMarkers',\n\t\t\t\tsrcModule: app.getModuleName(),\n\t\t\t\tsearchValue: container.find('.searchValue').val(),\n\t\t\t\tcache: thisInstance.getCacheParamsToRequest(),\n\t\t\t};\n\t\t\tvar radiusValue = container.find('.js-radius').val();\n\t\t\tif (radiusValue !== '' && parseInt(radiusValue)) {\n\t\t\t\tparams['radius'] = radiusValue;\n\t\t\t}\n\t\t\tparams = $.extend(thisInstance.selectedParams, params);\n\t\t\tAppConnector.request(params).done(function (response) {\n\t\t\t\tprogressIndicatorElement.progressIndicator({'mode': 'hide'});\n\t\t\t\tthisInstance.setMarkersByResponse(response);\n\t\t\t});\n\t\t});\n\t\tvar startIconLayer = false;\n\t\tcontainer.on('click', '.startTrack', function (e) {\n\t\t\tif (startIconLayer) {\n\t\t\t\tmap.removeLayer(startIconLayer);\n\t\t\t}\n\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\tvar containerPopup = currentTarget.closest('.leaflet-popup-content');\n\t\t\tdescription = containerPopup.find('.description').html();\n\t\t\tvar startElement = container.find('.start');\n\t\t\tvar coordinates = containerPopup.find('.coordinates');\n\t\t\tdescription = description.replace(/\\<br\\>/gi, \", \");\n\t\t\tstartElement.val(description);\n\t\t\tstartElement.data('lat', coordinates.data('lat'));\n\t\t\tstartElement.data('lon', coordinates.data('lon'));\n\t\t\tvar marker = L.marker([coordinates.data('lat'), coordinates.data('lon')], {\n\t\t\t\ticon: L.AwesomeMarkers.icon({\n\t\t\t\t\ticon: 'truck',\n\t\t\t\t\tmarkerColor: 'green',\n\t\t\t\t\tprefix: 'fa',\n\t\t\t\t})\n\t\t\t}).bindPopup(containerPopup.html());\n\t\t\tstartIconLayer = L.featureGroup([marker]);\n\t\t\tmap.addLayer(startIconLayer);\n\t\t\tthisInstance.showCalculateBtn();\n\t\t});\n\t\tvar endIconLayer = false;\n\t\tcontainer.on('click', '.endTrack', function (e) {\n\t\t\tif (endIconLayer) {\n\t\t\t\tmap.removeLayer(endIconLayer);\n\t\t\t}\n\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\tvar containerPopup = currentTarget.closest('.leaflet-popup-content');\n\t\t\tdescription = containerPopup.find('.description').html();\n\t\t\tvar endElement = container.find('.end');\n\t\t\tvar coordinates = containerPopup.find('.coordinates');\n\t\t\tdescription = description.replace(/\\<br\\>/gi, \", \");\n\t\t\tendElement.val(description);\n\t\t\tendElement.data('lat', coordinates.data('lat'));\n\t\t\tendElement.data('lon', coordinates.data('lon'));\n\t\t\tvar marker = L.marker([coordinates.data('lat'), coordinates.data('lon')], {\n\t\t\t\ticon: L.AwesomeMarkers.icon({\n\t\t\t\t\ticon: 'flag-checkered',\n\t\t\t\t\tmarkerColor: 'red',\n\t\t\t\t\tprefix: 'fa',\n\t\t\t\t})\n\t\t\t}).bindPopup(containerPopup.html());\n\t\t\tendIconLayer = L.featureGroup([marker]);\n\t\t\tmap.addLayer(endIconLayer);\n\t\t\tthisInstance.showCalculateBtn();\n\t\t});\n\n\t\tcontainer.on('click', '.indirectPoint', function (e) {\n\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\tvar containerPopup = currentTarget.closest('.leaflet-popup-content');\n\t\t\tdescription = containerPopup.find('.description').html();\n\t\t\tvar template = container.find('.indirectTemplate');\n\t\t\tvar indirect = template.clone();\n\t\t\ttemplate.before(indirect);\n\t\t\tindirect.removeClass('indirectTemplate');\n\t\t\tindirect.removeClass('d-none');\n\t\t\tvar coordinates = containerPopup.find('.coordinates');\n\t\t\tdescription = description.replace(/\\<br\\>/gi, \", \");\n\t\t\tif (typeof thisInstance.indirectPointLayer[description] !== \"undefined\") {\n\t\t\t\tmap.removeLayer(thisInstance.indirectPointLayer[description]);\n\t\t\t}\n\t\t\tvar indirectField = indirect.find('.indirect');\n\t\t\tindirectField.val(description);\n\t\t\tindirectField.data('lat', coordinates.data('lat'));\n\t\t\tindirectField.data('lon', coordinates.data('lon'));\n\t\t\tvar marker = L.marker([coordinates.data('lat'), coordinates.data('lon')], {\n\t\t\t\ticon: L.AwesomeMarkers.icon({\n\t\t\t\t\ticon: 'flag',\n\t\t\t\t\tmarkerColor: 'orange',\n\t\t\t\t\tprefix: 'fa',\n\t\t\t\t})\n\t\t\t}).bindPopup(containerPopup.html());\n\t\t\tthisInstance.indirectPointLayer[description] = L.featureGroup([marker]);\n\t\t\tmap.addLayer(thisInstance.indirectPointLayer[description]);\n\t\t});\n\t\tcontainer.on('click', '.removeIndirect', function (e) {\n\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\tvar container = currentTarget.closest('.indirectContainer');\n\t\t\tmap.removeLayer(thisInstance.indirectPointLayer[container.find('.indirect').val()]);\n\t\t\tcurrentTarget.closest('.indirectContainer').remove();\n\t\t});\n\t\tcontainer.on('click', '.moveUp', function (e) {\n\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\tvar container = currentTarget.closest('.indirectContainer');\n\t\t\tvar previousElement = container.prev();\n\t\t\tif (!previousElement.hasClass('startContainer')) {\n\t\t\t\tpreviousElement.before(container);\n\t\t\t}\n\t\t});\n\t\tcontainer.on('click', '.moveDown', function (e) {\n\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\tvar container = currentTarget.closest('.indirectContainer');\n\t\t\tvar nextElement = container.next();\n\t\t\tif (!nextElement.hasClass('indirectTemplate')) {\n\t\t\t\tnextElement.after(container);\n\t\t\t}\n\t\t});\n\t\tcontainer.on('click', '.searchInRadius', function (e) {\n\t\t\tif (endIconLayer) {\n\t\t\t\tmap.removeLayer(endIconLayer);\n\t\t\t}\n\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\tvar containerPopup = currentTarget.closest('.leaflet-popup-content');\n\t\t\tvar coordinates = containerPopup.find('.coordinates');\n\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\t'position': container,\n\t\t\t\t'blockInfo': {\n\t\t\t\t\t'enabled': true\n\t\t\t\t}\n\t\t\t});\n\t\t\tvar params = {\n\t\t\t\tmodule: 'OpenStreetMap',\n\t\t\t\taction: 'GetMarkers',\n\t\t\t\tsrcModule: app.getModuleName(),\n\t\t\t\tradius: container.find('.radius').val(),\n\t\t\t\tlat: coordinates.data('lat'),\n\t\t\t\tlon: coordinates.data('lon'),\n\t\t\t\tcache: thisInstance.getCacheParamsToRequest(),\n\t\t\t};\n\t\t\tparams = $.extend(thisInstance.selectedParams, params);\n\t\t\tAppConnector.request(params).done(function (response) {\n\t\t\t\tprogressIndicatorElement.progressIndicator({'mode': 'hide'});\n\t\t\t\tthisInstance.setMarkersByResponse(response);\n\t\t\t});\n\t\t});\n\t\tcontainer.find('.calculateTrack').on('click', function () {\n\t\t\tvar indirectLon = [];\n\t\t\tvar indirectLat = [];\n\t\t\tcontainer.find('.indirectContainer:not(.d-none) input.indirect').each(function () {\n\t\t\t\tvar currentTarget = $(this);\n\t\t\t\tindirectLat.push(currentTarget.data('lat'));\n\t\t\t\tindirectLon.push(currentTarget.data('lon'));\n\t\t\t});\n\t\t\tvar endElement = container.find('.end');\n\t\t\tvar startElement = container.find('.start');\n\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\t'position': container,\n\t\t\t\t'blockInfo': {\n\t\t\t\t\t'enabled': true\n\t\t\t\t}\n\t\t\t});\n\t\t\tvar params = {\n\t\t\t\turl: 'index.php',\n\t\t\t\tdata: {\n\t\t\t\t\tmodule: 'OpenStreetMap',\n\t\t\t\t\taction: 'GetRoute',\n\t\t\t\t\tflon: startElement.data('lon'),\n\t\t\t\t\tflat: startElement.data('lat'),\n\t\t\t\t\tilon: indirectLon,\n\t\t\t\t\tilat: indirectLat,\n\t\t\t\t\ttlon: endElement.data('lon'),\n\t\t\t\t\ttlat: endElement.data('lat')\n\t\t\t\t}\n\t\t\t};\n\t\t\tAppConnector.request(params).done(function (response) {\n\t\t\t\tprogressIndicatorElement.progressIndicator({mode: 'hide'});\n\t\t\t\tif (thisInstance.routeLayer) {\n\t\t\t\t\tmap.removeLayer(thisInstance.routeLayer);\n\t\t\t\t}\n\t\t\t\tvar route = L.geoJson(response.result.geoJson);\n\t\t\t\tthisInstance.routeLayer = L.featureGroup([route]);\n\t\t\t\tmap.addLayer(thisInstance.routeLayer);\n\t\t\t\tcontainer.find('.descriptionContainer').removeClass('d-none');\n\t\t\t\tcontainer.find('.descriptionContent .instruction').html(response.result.properties.description);\n\t\t\t\tcontainer.find('.descriptionContent .distance').html(App.Fields.Double.formatToDisplay(response.result.properties.distance));\n\t\t\t\tcontainer.find('.descriptionContent .travelTime').html(App.Fields.Double.formatToDisplay(response.result.properties.traveltime / 60));\n\t\t\t});\n\t\t});\n\t\tcontainer.on('click', '.setView', function (e) {\n\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\tvar inputInstance = currentTarget.closest('.input-group').find('.end,.start,.indirect');\n\t\t\tvar lat = inputInstance.data('lat');\n\t\t\tvar lon = inputInstance.data('lon');\n\t\t\tif (!(typeof lat === \"undefined\" && typeof lon === \"undefined\")) {\n\t\t\t\tmap.setView(new L.LatLng(lat, lon), 14);\n\t\t\t}\n\t\t});\n\t\tthis.registerSearchCompany();\n\t},\n\tregisterModalView: function (container) {\n\t\tvar thisInstance = this;\n\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t'position': container,\n\t\t\t'blockInfo': {\n\t\t\t\t'enabled': true\n\t\t\t}\n\t\t});\n\t\tvar heightMap = $('body').height();\n\t\tthis.container = container;\n\t\tvar startCoordinate = [0, 0];\n\t\tvar startZoom = 2;\n\t\t$('#mapid').css({\n\t\t\theight: heightMap - 200\n\t\t});\n\t\tthis.registerMap(startCoordinate, startZoom);\n\t\tvar params = {\n\t\t\tmodule: 'OpenStreetMap',\n\t\t\taction: 'GetMarkers',\n\t\t\tsrcModule: app.getModuleName(),\n\t\t};\n\t\tparams = $.extend(this.selectedParams, params);\n\t\tthisInstance.registerBasicModal();\n\t\tAppConnector.request(params).done(function (response) {\n\t\t\tprogressIndicatorElement.progressIndicator({'mode': 'hide'});\n\t\t\tthisInstance.setMarkersByResponse(response);\n\n\t\t});\n\t},\n\tregisterDetailView: function (container) {\n\t\tthis.container = container;\n\t\tvar coordinates = container.find('#coordinates').val();\n\t\tcoordinates = JSON.parse(coordinates);\n\t\tvar startCoordinate = [0, 0];\n\t\tvar startZoom = 2;\n\t\tvar $map = container.find('#mapid');\n\t\tif (coordinates.length) {\n\t\t\tstartCoordinate = coordinates[0];\n\t\t\tstartZoom = 6;\n\t\t}\n\t\tif ($('.mainBody').length) {\n\t\t\tif ($('.mainBody').height() < 1000) {\n\t\t\t\t$map.height($('.mainBody').height() - ($('.detailViewTitle').height() + $('.detailViewContainer .related').height() + 25));\n\t\t\t} else {\n\t\t\t\t$map.height(1000);\n\t\t\t}\n\t\t} else {\n\t\t\tif ($('.bodyContents').height() < 1000) {\n\t\t\t\t$map.height($('.bodyContents').height() - ($('.detailViewTitle').height() + $('.detailViewContainer .related').height() + 25));\n\t\t\t} else {\n\t\t\t\t$map.height(1000);\n\t\t\t}\n\t\t}\n\n\t\tvar myMap = this.registerMap(startCoordinate, startZoom);\n\t\tvar markers = L.markerClusterGroup({\n\t\t\tmaxClusterRadius: 10\n\t\t});\n\t\tcoordinates.forEach(function (e) {\n\t\t\tvar marker = L.marker([e.lat, e.lon], {\n\t\t\t\ticon: L.AwesomeMarkers.icon({\n\t\t\t\t\ticon: 'home',\n\t\t\t\t\tmarkerColor: 'blue',\n\t\t\t\t\tprefix: 'fa',\n\t\t\t\t\ticonColor: e.color\n\t\t\t\t})\n\t\t\t}).bindPopup(e.label);\n\t\t\tmarkers.addLayer(marker);\n\t\t});\n\t\tmyMap.addLayer(markers);\n\t}\n});\n\n"],"names":["jQuery","Class","params","selectedParams","startCoordinate","startZoom","myMap","L","map","setView","tileLayer","addTo","mapInstance","response","thisInstance","markerArray","container","result","coordinates","markers","markerClusterGroup","layerMarkers","removeLayer","records","forEach","e","push","lat","lon","marker","AwesomeMarkers","icon","color","bindPopup","label","addLayer","recordId","recordsIds","polygonLayer","coordinatesCeneter","error","radius","find","val","popup","$","isNumeric","parseInt","circle","featureGroup","app","vtranslate","showMessage","cache","keys","key","cacheLayerMarkers","markersCache","indexOf","cacheMarkers","footer","legend","html","value","length","fitBounds","prop","endAddress","startAddress","removeClass","on","currentTarget","moduleName","data","is","getModuleName","request","done","setMarkersByResponse","JSON","stringify","countRecords","closest","addClass","trigger","count","moduleContainer","each","currentObject","searchValue","searchModule","addButton","thistInstance","crmId","LatLng","widget","ui","autocomplete","_super","menu","ul","items","that","currentCategory","index","item","category","append","_renderItemData","_renderItem","appendTo","ivAutocomplete","responseAjax","parse","reponseDataList","event","selected","id","layer","description","registerCacheEvents","progressIndicatorElement","progressIndicator","getCacheParamsToRequest","extend","cacheLayer","radiusValue","startIconLayer","containerPopup","startElement","replace","showCalculateBtn","endIconLayer","endElement","template","indirect","clone","before","indirectPointLayer","indirectField","remove","previousElement","prev","hasClass","nextElement","next","after","indirectLon","indirectLat","mode","routeLayer","route","geoJson","properties","App","Fields","Double","formatToDisplay","distance","traveltime","inputInstance","registerSearchCompany","heightMap","height","css","registerMap","registerBasicModal","$map"],"mappings":"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"}