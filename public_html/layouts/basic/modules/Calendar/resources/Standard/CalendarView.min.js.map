{"version":3,"file":"CalendarView.min.js","sources":["CalendarView.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n *************************************************************************************/\n'use strict';\n\n/**\n *  Class representing a standard calendar.\n * @extends Calendar_Js\n */\nwindow.Calendar_Calendar_Js = class extends Calendar_Js {\n\tsetCalendarModuleOptions() {\n\t\tlet self = this,\n\t\t\toptions = {\n\t\t\t\tselect: function(start, end) {\n\t\t\t\t\tself.selectDays(start, end);\n\t\t\t\t\tself.getCalendarView().fullCalendar('unselect');\n\t\t\t\t},\n\t\t\t\teventClick: function(calEvent, jsEvent, view) {\n\t\t\t\t\tjsEvent.preventDefault();\n\t\t\t\t\tconst link = new URL($(this)[0].href);\n\t\t\t\t\tif (self.createView) {\n\t\t\t\t\t\tlet progressInstance = jQuery.progressIndicator({\n\t\t\t\t\t\t\tblockInfo: { enabled: true }\n\t\t\t\t\t\t});\n\t\t\t\t\t\tconst callbackFunction = data => {\n\t\t\t\t\t\t\tprogressInstance.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t};\n\t\t\t\t\t\tapp.showModalWindow({\n\t\t\t\t\t\t\turl: `index.php?module=Calendar&view=ActivityStateModal&record=${link.searchParams.get('record')}`,\n\t\t\t\t\t\t\tcb: callbackFunction\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\twindow.location.assign(`index.php?module=Calendar&view=Detail&record=${link.searchParams.get('record')}`);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\treturn options;\n\t}\n\n\tgetValuesFromSelect2(element, data, text) {\n\t\tif (element.hasClass('select2-hidden-accessible')) {\n\t\t\tvar types = element.select2('data');\n\t\t\tfor (var i = 0; i < types.length; i++) {\n\t\t\t\tif (text) {\n\t\t\t\t\tdata.push(types[i].text);\n\t\t\t\t} else {\n\t\t\t\t\tdata.push(types[i].id);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn data;\n\t}\n\n\tgetDefaultParams() {\n\t\tlet parentParams = super.getDefaultParams(),\n\t\t\tusers = app.moduleCacheGet('calendar-groups') || [],\n\t\t\tfilters = [];\n\t\t$('.calendarFilters .filterField').each(function() {\n\t\t\tlet element = $(this),\n\t\t\t\tname,\n\t\t\t\tvalue;\n\t\t\tif (element.attr('type') == 'checkbox') {\n\t\t\t\tname = element.val();\n\t\t\t\tvalue = element.prop('checked') ? 1 : 0;\n\t\t\t} else {\n\t\t\t\tname = element.attr('name');\n\t\t\t\tvalue = element.val();\n\t\t\t}\n\t\t\tfilters.push({ name: name, value: value });\n\t\t});\n\t\tlet params = {\n\t\t\ttime: app.getMainParams('showType'),\n\t\t\tfilters: filters\n\t\t};\n\t\tif (users.length) {\n\t\t\tparams.user = parentParams.user.concat(users);\n\t\t\tparams.emptyFilters = false;\n\t\t}\n\t\tparams = Object.assign(parentParams, params);\n\t\treturn params;\n\t}\n\n\tselectDays(startDate, endDate) {\n\t\tvar thisInstance = this;\n\t\tvar start_hour = app.getMainParams('startHour');\n\t\tvar end_hour = app.getMainParams('endHour');\n\t\tif (endDate.hasTime() == false) {\n\t\t\tendDate.add(-1, 'days');\n\t\t}\n\t\tstartDate = startDate.format();\n\t\tendDate = endDate.format();\n\t\tvar view = thisInstance.getCalendarView().fullCalendar('getView');\n\t\tif (start_hour == '') {\n\t\t\tstart_hour = '00';\n\t\t}\n\t\tif (end_hour == '') {\n\t\t\tend_hour = '00';\n\t\t}\n\t\tthis.getCalendarCreateView().done(function(data) {\n\t\t\tif (data.length <= 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (view.name != 'agendaDay' && view.name != 'agendaWeek') {\n\t\t\t\tstartDate = startDate + 'T' + start_hour + ':00';\n\t\t\t\tendDate = endDate + 'T' + start_hour + ':00';\n\t\t\t\tif (startDate == endDate) {\n\t\t\t\t\tlet activityType = data.find('[name=\"activitytype\"]').val();\n\t\t\t\t\tlet activityDurations = JSON.parse(data.find('[name=\"defaultOtherEventDuration\"]').val());\n\t\t\t\t\tlet minutes = 0;\n\t\t\t\t\tfor (let i in activityDurations) {\n\t\t\t\t\t\tif (activityDurations[i].activitytype === activityType) {\n\t\t\t\t\t\t\tminutes = parseInt(activityDurations[i].duration);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tendDate = moment(endDate)\n\t\t\t\t\t\t.add(minutes, 'minutes')\n\t\t\t\t\t\t.toISOString();\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar dateFormat = data\n\t\t\t\t.find('[name=\"date_start\"]')\n\t\t\t\t.data('dateFormat')\n\t\t\t\t.toUpperCase();\n\t\t\tvar timeFormat = data.find('[name=\"time_start\"]').data('format');\n\t\t\tif (timeFormat == 24) {\n\t\t\t\tvar defaultTimeFormat = 'HH:mm';\n\t\t\t} else {\n\t\t\t\tdefaultTimeFormat = 'hh:mm A';\n\t\t\t}\n\t\t\tvar startDateString = moment(startDate).format(dateFormat);\n\t\t\tvar startTimeString = moment(startDate).format(defaultTimeFormat);\n\t\t\tvar endDateString = moment(endDate).format(dateFormat);\n\t\t\tvar endTimeString = moment(endDate).format(defaultTimeFormat);\n\n\t\t\tdata.find('[name=\"date_start\"]').val(startDateString);\n\t\t\tdata.find('[name=\"due_date\"]').val(endDateString);\n\t\t\tdata.find('[name=\"time_start\"]').val(startTimeString);\n\t\t\tdata.find('[name=\"time_end\"]').val(endTimeString);\n\n\t\t\tvar headerInstance = new Vtiger_Header_Js();\n\t\t\theaderInstance.handleQuickCreateData(data, {\n\t\t\t\tcallbackFunction: function(data) {\n\t\t\t\t\tthisInstance.addCalendarEvent(data.result);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tisNewEventToDisplay(eventObject) {\n\t\tif (super.isNewEventToDisplay(eventObject)) {\n\t\t\tlet taskstatus = $.inArray(eventObject.activitystatus.value, ['PLL_POSTPONED', 'PLL_CANCELLED', 'PLL_COMPLETED']);\n\t\t\tvar state = $('.fc-toolbar .js-switch--label-on')\n\t\t\t\t.last()\n\t\t\t\t.hasClass('active');\n\t\t\tif ((state === true && taskstatus >= 0) || (state != true && taskstatus == -1)) {\n\t\t\t\treturn false;\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tgetCalendarCreateView() {\n\t\tvar thisInstance = this;\n\t\tvar aDeferred = jQuery.Deferred();\n\n\t\tif (this.calendarCreateView !== false) {\n\t\t\taDeferred.resolve(this.calendarCreateView.clone(true, true));\n\t\t\treturn aDeferred.promise();\n\t\t}\n\t\tvar progressInstance = jQuery.progressIndicator({\n\t\t\tblockInfo: { enabled: true }\n\t\t});\n\t\tthis.loadCalendarCreateView()\n\t\t\t.done(function(data) {\n\t\t\t\tprogressInstance.progressIndicator({ mode: 'hide' });\n\t\t\t\tthisInstance.calendarCreateView = data;\n\t\t\t\taDeferred.resolve(data.clone(true, true));\n\t\t\t})\n\t\t\t.fail(function(error) {\n\t\t\t\tprogressInstance.progressIndicator({ mode: 'hide' });\n\t\t\t\tconsole.error(error);\n\t\t\t});\n\t\treturn aDeferred.promise();\n\t}\n\n\tloadCalendarCreateView() {\n\t\tvar aDeferred = jQuery.Deferred();\n\t\tvar moduleName = app.getModuleName();\n\t\tvar url = 'index.php?module=' + moduleName + '&view=QuickCreateAjax';\n\t\tvar headerInstance = Vtiger_Header_Js.getInstance();\n\t\theaderInstance\n\t\t\t.getQuickCreateForm(url, moduleName)\n\t\t\t.done(function(data) {\n\t\t\t\taDeferred.resolve(jQuery(data));\n\t\t\t})\n\t\t\t.fail(function() {\n\t\t\t\taDeferred.reject();\n\t\t\t});\n\t\treturn aDeferred.promise();\n\t}\n\n\tswitchTpl(on, off, state) {\n\t\treturn `<div class=\"btn-group btn-group-toggle js-switch c-calendar-switch\" data-toggle=\"buttons\">\n\t\t\t\t\t<label class=\"btn btn-outline-primary c-calendar-switch__button js-switch--label-on ${state ? '' : 'active'}\">\n\t\t\t\t\t\t<input type=\"radio\" name=\"options\" data-on-text=\"${on}\" autocomplete=\"off\" ${state ? '' : 'checked'}>\n\t\t\t\t\t\t${on}\n\t\t\t\t\t</label>\n\t\t\t\t\t<label class=\"btn btn-outline-primary c-calendar-switch__button ${state ? 'active' : ''}\">\n\t\t\t\t\t\t<input type=\"radio\" name=\"options\" data-off-text=\"${off}\" autocomplete=\"off\" ${state ? 'checked' : ''}>\n\t\t\t\t\t\t${off}\n\t\t\t\t\t</label>\n\t\t\t\t</div>`;\n\t}\n\n\tregisterSwitchEvents() {\n\t\tconst calendarview = this.getCalendarView();\n\t\tlet switchHistory,\n\t\t\tswitchAllDays,\n\t\t\tswitchContainer = $(`<div class=\"js-calendar-switch-container\"></div>`).insertAfter(\n\t\t\t\tcalendarview.find('.fc-center')\n\t\t\t);\n\t\tif (app.getMainParams('showType') == 'current' && app.moduleCacheGet('defaultShowType') != 'history') {\n\t\t\tswitchHistory = false;\n\t\t} else {\n\t\t\tswitchHistory = true;\n\t\t}\n\t\t$(this.switchTpl(app.vtranslate('JS_TO_REALIZE'), app.vtranslate('JS_HISTORY'), switchHistory))\n\t\t\t.prependTo(switchContainer)\n\t\t\t.on('change', 'input', e => {\n\t\t\t\tconst currentTarget = $(e.currentTarget);\n\t\t\t\tif (typeof currentTarget.data('on-text') !== 'undefined') {\n\t\t\t\t\tapp.setMainParams('showType', 'current');\n\t\t\t\t\tapp.moduleCacheSet('defaultShowType', 'current');\n\t\t\t\t} else if (typeof currentTarget.data('off-text') !== 'undefined') {\n\t\t\t\t\tapp.setMainParams('showType', 'history');\n\t\t\t\t\tapp.moduleCacheSet('defaultShowType', 'history');\n\t\t\t\t}\n\t\t\t\tthis.loadCalendarData();\n\t\t\t});\n\t\tif (app.getMainParams('switchingDays') === 'workDays' && app.moduleCacheGet('defaultSwitchingDays') !== 'all') {\n\t\t\tswitchAllDays = false;\n\t\t} else {\n\t\t\tswitchAllDays = true;\n\t\t}\n\t\tif (app.getMainParams('hiddenDays', true) !== false) {\n\t\t\t$(this.switchTpl(app.vtranslate('JS_WORK_DAYS'), app.vtranslate('JS_ALL'), switchAllDays))\n\t\t\t\t.prependTo(switchContainer)\n\t\t\t\t.on('change', 'input', e => {\n\t\t\t\t\tconst currentTarget = $(e.currentTarget);\n\t\t\t\t\tlet hiddenDays = [];\n\t\t\t\t\tif (typeof currentTarget.data('on-text') !== 'undefined') {\n\t\t\t\t\t\tapp.setMainParams('switchingDays', 'workDays');\n\t\t\t\t\t\tapp.moduleCacheSet('defaultSwitchingDays', 'workDays');\n\t\t\t\t\t\thiddenDays = app.getMainParams('hiddenDays', true);\n\t\t\t\t\t} else if (typeof currentTarget.data('off-text') !== 'undefined') {\n\t\t\t\t\t\tapp.setMainParams('switchingDays', 'all');\n\t\t\t\t\t\tapp.moduleCacheSet('defaultSwitchingDays', 'all');\n\t\t\t\t\t}\n\t\t\t\t\tcalendarview.fullCalendar('option', 'hiddenDays', hiddenDays);\n\t\t\t\t\tthis.registerSwitchEvents();\n\t\t\t\t\tthis.loadCalendarData();\n\t\t\t\t});\n\t\t}\n\t}\n\n\tregisterCacheSettings() {\n\t\tvar thisInstance = this;\n\t\tvar calendar = thisInstance.getCalendarView();\n\t\tif (app.moduleCacheGet('defaultSwitchingDays') == 'all') {\n\t\t\tapp.setMainParams('switchingDays', 'all');\n\t\t} else {\n\t\t\tapp.setMainParams('switchingDays', 'workDays');\n\t\t}\n\t\tif (app.moduleCacheGet('defaultShowType') == 'history') {\n\t\t\tapp.setMainParams('showType', 'history');\n\t\t} else {\n\t\t\tapp.setMainParams('showType', 'current');\n\t\t}\n\t\t$('.siteBarRight .filterField').each(function(index) {\n\t\t\tvar name = $(this).attr('id');\n\t\t\tvar value = app.moduleCacheGet(name);\n\t\t\tvar element = $('#' + name);\n\t\t\tif (element.length > 0 && value != null) {\n\t\t\t\tif (element.attr('type') == 'checkbox') {\n\t\t\t\t\telement.prop('checked', value);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tcalendar.find('.fc-toolbar .fc-button').on('click', function(e) {\n\t\t\tlet view;\n\t\t\tlet element = $(e.currentTarget);\n\t\t\tview = calendar.fullCalendar('getView');\n\t\t\tif (element.hasClass('fc-' + view.name + '-button')) {\n\t\t\t\tapp.moduleCacheSet('defaultView', view.name);\n\t\t\t} else if (\n\t\t\t\telement.hasClass('fc-prev-button') ||\n\t\t\t\telement.hasClass('fc-next-button') ||\n\t\t\t\telement.hasClass('fc-today-button')\n\t\t\t) {\n\t\t\t\tapp.moduleCacheSet('start', view.start.format());\n\t\t\t\tapp.moduleCacheSet('end', view.end.format());\n\t\t\t}\n\t\t});\n\t\tvar keys = app.moduleCacheKeys();\n\t\tif (keys.length > 0) {\n\t\t\tvar alert = $('#moduleCacheAlert');\n\t\t\t$('.bodyContents').on('Vtiger.Widget.Load.undefined', function(e, data) {\n\t\t\t\talert.removeClass('d-none');\n\t\t\t});\n\t\t\talert.find('.cacheClear').on('click', function(e) {\n\t\t\t\tapp.moduleCacheClear();\n\t\t\t\talert.addClass('d-none');\n\t\t\t\tlocation.reload();\n\t\t\t});\n\t\t}\n\t}\n\n\tregisterEvents() {\n\t\tsuper.registerEvents();\n\t\tthis.registerCacheSettings();\n\t\tthis.registerSwitchEvents();\n\t}\n};\n"],"names":["window","Calendar_Calendar_Js","select","start","end","self","selectDays","getCalendarView","fullCalendar","eventClick","calEvent","jsEvent","preventDefault","$","href","createView","jQuery","progressIndicator","blockInfo","enabled","callbackFunction","progressInstance","mode","app","showModalWindow","url","link","searchParams","get","cb","location","assign","element","data","text","hasClass","select2","i","types","length","push","id","users","moduleCacheGet","filters","each","value","attr","name","val","prop","time","getMainParams","params","user","parentParams","concat","emptyFilters","Object","startDate","endDate","start_hour","end_hour","hasTime","add","format","thisInstance","getCalendarCreateView","done","find","activityDurations","JSON","parse","minutes","activitytype","activityType","parseInt","duration","moment","toISOString","toUpperCase","timeFormat","dateFormat","startTimeString","defaultTimeFormat","endDateString","endTimeString","startDateString","headerInstance","handleQuickCreateData","addCalendarEvent","result","eventObject","inArray","activitystatus","state","last","aDeferred","Deferred","calendarCreateView","resolve","clone","promise","loadCalendarCreateView","fail","error","console","moduleName","getModuleName","Vtiger_Header_Js","getInstance","getQuickCreateForm","reject","on","off","calendarview","switchHistory","switchAllDays","switchContainer","insertAfter","switchTpl","vtranslate","prependTo","e","currentTarget","setMainParams","moduleCacheSet","loadCalendarData","hiddenDays","registerSwitchEvents","calendar","view","moduleCacheKeys","alert","removeClass","moduleCacheClear","addClass","reload","registerCacheSettings","Calendar_Js"],"mappings":"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"}