{"version":3,"file":"Edit.min.js","sources":["Edit.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n * Contributor(s): YetiForce Sp. z o.o\n *************************************************************************************/\n'use strict';\n\nVtiger_Edit_Js(\"Calendar_Edit_Js\", {\n\tcurrencyInstance: false,\n\tcheckEmail(field, rules, i, options) {\n\t\tif(Calendar_Edit_Js.currencyInstance.emailExists(field.val())){\n\t\t\treturn app.vtranslate('JS_DUPLICATE_RECORD') + ': ' + field.val();\n\t\t}\n\t\treturn true;\n\t}\n}, {\n\tinit(){\n\t\tCalendar_Edit_Js.currencyInstance = this;\n\t},\n\tregisterReminderFieldCheckBox: function () {\n\t\tlet element = this.getForm().find('.js-reminder-field-checkbox');\n\t\telement.on('change', function (e) {\n\t\t\tlet rowElement = element.closest('.js-reminder-field-element').find('.js-reminder-field-row');\n\t\t\tif (element.is(':checked')) {\n\t\t\t\trowElement.removeClass('d-none');\n\t\t\t} else {\n\t\t\t\trowElement.addClass('d-none');\n\t\t\t}\n\t\t});\n\t\telement.change();\n\t},\n\t/**\n\t * Function which will register change event on recurrence field checkbox\n\t */\n\tregisterRecurrenceFieldCheckBox: function () {\n\t\tconst form = this.getForm(),\n\t\t\telement = form.find('input[name=\"reapeat\"]');\n\t\telement.on('change', function (e) {\n\t\t\tlet repeatUI = form.find('.js-repeat-ui'),\n\t\t\t\tcontainer = form.find('[name=\"followup\"]').closest('.fieldValue');\n\t\t\tif ($(e.currentTarget).is(':checked')) {\n\t\t\t\trepeatUI.closest('.fieldRow').removeClass('d-none');\n\t\t\t\tcontainer.find('[name=\"followup_display\"]').attr('disabled', 'disabled');\n\t\t\t\tcontainer.find('button').attr('disabled', 'disabled');\n\t\t\t} else {\n\t\t\t\tcontainer.find('[name=\"followup_display\"]').removeAttr('disabled');\n\t\t\t\tcontainer.find('button').removeAttr('disabled');\n\t\t\t\trepeatUI.closest('.fieldRow').addClass('d-none');\n\t\t\t}\n\t\t});\n\t\telement.change();\n\t},\n\t/**\n\t * Function which will register the change event for recurring type\n\t */\n\tregisterRecurringTypeChangeEvent: function () {\n\t\tvar container = this.getForm();\n\t\tvar thisInstance = this;\n\t\tcontainer.find('.recurringType').on('change', function (e) {\n\t\t\tthisInstance.changeRecurringTypesUIStyles(jQuery(e.currentTarget).val());\n\t\t});\n\t\tcontainer.find('.js-repeat-ui [name=\"calendarEndType\"]').on('change', function (e) {\n\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\tvar value = currentTarget.val();\n\t\t\tif (value === 'never') {\n\t\t\t\tcontainer.find('.countEvents').attr('disabled', 'disabled');\n\t\t\t\tcontainer.find('.calendarUntil').attr('disabled', 'disabled');\n\t\t\t} else if (value === 'count') {\n\t\t\t\tcontainer.find('.countEvents').removeAttr('disabled');\n\t\t\t\tcontainer.find('.calendarUntil').attr('disabled', 'disabled');\n\t\t\t} else if (value === 'until') {\n\t\t\t\tcontainer.find('.countEvents').attr('disabled', 'disabled');\n\t\t\t\tcontainer.find('.calendarUntil').removeAttr('disabled');\n\t\t\t}\n\t\t});\n\t},\n\t/**\n\t * Function which will change the UI styles based on recurring type\n\t * @params - recurringType - which recurringtype is selected\n\t */\n\tchangeRecurringTypesUIStyles: function (recurringType) {\n\t\tvar container = this.getForm();\n\t\tif (recurringType == 'DAILY' || recurringType == 'YEARLY') {\n\t\t\tcontainer.find('.repeatWeekUI').removeClass('show').addClass('d-none');\n\t\t\tcontainer.find('.repeatMonthUI').removeClass('show').addClass('d-none');\n\t\t} else if (recurringType == 'WEEKLY') {\n\t\t\tcontainer.find('.repeatWeekUI').removeClass('d-none').addClass('show');\n\t\t\tcontainer.find('.repeatMonthUI').removeClass('show').addClass('d-none');\n\t\t} else if (recurringType == 'MONTHLY') {\n\t\t\tcontainer.find('.repeatWeekUI').removeClass('show').addClass('d-none');\n\t\t\tcontainer.find('.repeatMonthUI').removeClass('d-none').addClass('show');\n\t\t}\n\t},\n\tsetDefaultEndTime: function (container) {\n\t\tconst self = this;\n\t\tif (container.find('.js-autofill').is(':checked')) {\n\t\t\tself.getFreeTime(container);\n\t\t} else {\n\t\t\tif ('1' === $('[name=\"userChangedEndDateTime\"]').val()) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet dateStartElement = container.find('[name=\"date_start\"]'),\n\t\t\t\tstartTimeElement = container.find('[name=\"time_start\"]'),\n\t\t\t\tendTimeElement = container.find('[name=\"time_end\"]'),\n\t\t\t\tendDateElement = container.find('[name=\"due_date\"]'),\n\t\t\t\tstartDate = dateStartElement.val(),\n\t\t\t\tstartTime = startTimeElement.val(),\n\t\t\t\tresult = Vtiger_Time_Validator_Js.invokeValidation(startTimeElement);\n\t\t\tif (true !== result) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet startDateTime = startDate + ' ' + startTime,\n\t\t\t\tdateFormat = container.find('[name=\"due_date\"]').data('dateFormat').toUpperCase(),\n\t\t\t\ttimeFormat = endTimeElement.data('format'),\n\t\t\t\tactivityType = container.find('[name=\"activitytype\"]').val(),\n\t\t\t\tactivityDurations = JSON.parse(container.find('[name=\"defaultOtherEventDuration\"]').val()),\n\t\t\t\tminutes = 0;\n\t\t\tfor (let i in activityDurations) {\n\t\t\t\tif (activityDurations[i].activitytype === activityType) {\n\t\t\t\t\tminutes = parseInt(activityDurations[i].duration);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet defaultTimeFormat = 'HH:mm';\n\t\t\tif (12 === timeFormat) {\n\t\t\t\tdefaultTimeFormat = 'hh:mm A';\n\t\t\t}\n\t\t\tlet endDate = moment(startDateTime, dateFormat + ' ' + defaultTimeFormat).add(minutes, 'minutes');\n\t\t\tendDateElement.val(endDate.format(dateFormat));\n\t\t\tendTimeElement.val(endDate.format(defaultTimeFormat));\n\t\t}\n\t},\n\t/**\n\t * Function to change the end time based on default call duration\n\t */\n\tregisterActivityTypeChangeEvent: function (container) {\n\t\tconst thisInstance = this;\n\t\tcontainer.on('change', '[name=\"activitytype\"]', function (e) {\n\t\t\tthisInstance.setDefaultEndTime(container);\n\t\t});\n\t},\n\t/**\n\t * Function to change the end time based on default call duration\n\t */\n\tregisterTimeStartChangeEvent(container) {\n\t\tconst thisInstance = this;\n\t\tcontainer.find('input[name=\"time_start\"]').on('change', function (e) {\n\t\t\tthisInstance.setDefaultEndTime(container);\n\t\t});\n\t\tcontainer.find('[name=\"date_start\"]').on('change', function (e) {\n\t\t\tlet endDateElement = container.find('[name=\"due_date\"]'),\n\t\t\t\tstart = thisInstance.getDateInstance(container, 'start'),\n\t\t\t\tend = thisInstance.getDateInstance(container, 'end'),\n\t\t\t\tdateFormat = CONFIG.dateFormat.toUpperCase();\n\t\t\tcontainer.find('.js-autofill').trigger('change');\n\t\t\tif (start > end) {\n\t\t\t\tend = start;\n\t\t\t\tendDateElement.val(moment(end).format(dateFormat));\n\t\t\t\tApp.Fields.Date.register(container);\n\t\t\t}\n\t\t});\n\t\tcontainer.find('input[name=\"time_start\"]').on('focus', function (e) {\n\t\t\tlet element = $(e.currentTarget);\n\t\t\telement.data('prevValue', element.val());\n\t\t});\n\t\tcontainer.find('input[name=\"time_start\"]').on('blur', function (e, data) {\n\t\t\tif (typeof data === \"undefined\") {\n\t\t\t\tdata = {};\n\t\t\t}\n\t\t\tif (typeof data.forceChange === \"undefined\") {\n\t\t\t\tdata.forceChange = false;\n\t\t\t}\n\t\t\tlet element = $(e.currentTarget);\n\t\t\tif (element.val() !== element.data('prevValue') || data.forceChange) {\n\t\t\t\te = $.Event(\"keydown\");\n\t\t\t\te.which = 13;\n\t\t\t\te.keyCode = 13;\n\t\t\t\telement.trigger(e);\n\t\t\t}\n\t\t});\n\t},\n\tregisterEndDateTimeChangeLogger: function (container) {\n\t\tcontainer.find('[name=\"time_end\"]').on('change', function (e) {\n\t\t\tlet timeElement = jQuery(e.currentTarget);\n\t\t\tlet result = Vtiger_Time_Validator_Js.invokeValidation(timeElement);\n\t\t\tif (result != true) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet timeDateElement = timeElement.closest('.fieldValue').find('[name=\"due_date\"]');\n\t\t\tjQuery('[name=\"userChangedEndDateTime\"]').val('1');\n\t\t\ttimeDateElement.data('userChangedTime', true);\n\t\t});\n\n\t\tcontainer.find('[name=\"due_date\"]').on('change', function (e) {\n\t\t\tlet dueDateElement = jQuery(e.currentTarget);\n\t\t\tlet result = Vtiger_Date_Validator_Js.invokeValidation(dueDateElement);\n\t\t\tif (result != true) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tjQuery('[name=\"userChangedEndDateTime\"]').val('1');\n\t\t\tdueDateElement.data('userChangedTime', true);\n\t\t});\n\t},\n\t/**\n\t *\n\t * @returns {String}\n\t */\n\tgetRule: function () {\n\t\tvar form = this.getForm();\n\t\tvar freq = form.find('.recurringType').val();\n\t\tvar rule = 'FREQ=' + freq;\n\t\trule += ';INTERVAL=' + form.find('.repeatFrequency').val();\n\t\tvar endValue = form.find('.js-repeat-ui [name=\"calendarEndType\"]:checked').val();\n\t\tif (endValue === 'count') {\n\t\t\trule += ';COUNT=' + form.find('.countEvents').val();\n\t\t} else if (endValue === 'until') {\n\t\t\tvar date = form.find('.calendarUntil').val();\n\t\t\tdate = app.getDateInDBInsertFormat(CONFIG.dateFormat, date);\n\t\t\trule += ';UNTIL=' + date.replace(/-/gi, '') + 'T235959';\n\t\t}\n\t\tif (freq === 'WEEKLY') {\n\t\t\tvar checkedElements = [];\n\t\t\tform.find('.repeatWeekUI [type=\"checkbox\"]').each(function () {\n\t\t\t\tvar currentTarget = $(this);\n\t\t\t\tif (currentTarget.is(':checked')) {\n\t\t\t\t\tcheckedElements.push(currentTarget.val());\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (checkedElements.length > 0) {\n\t\t\t\trule += ';BYDAY=' + checkedElements.join(',');\n\t\t\t}\n\t\t}\n\t\tif (freq === 'MONTHLY') {\n\t\t\tvar dayOfWeek = Vtiger_Helper_Js.getDay(form.find('[name=\"date_start\"]').val());\n\t\t\tvar dateInstance = Vtiger_Helper_Js.getDateInstance(form.find('[name=\"date_start\"]').val(), CONFIG.dateFormat);\n\t\t\tvar dayOfMonth = dateInstance.getDate();\n\t\t\tvar option = form.find('.calendarMontlyType:checked').val();\n\t\t\tif (option == 'DAY') {\n\t\t\t\tvar dayOfWeekLabel = '';\n\t\t\t\tswitch (dayOfWeek) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tdayOfWeekLabel = 'SU';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 1:\n\t\t\t\t\t\tdayOfWeekLabel = 'MO';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\tdayOfWeekLabel = 'TU';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 3:\n\t\t\t\t\t\tdayOfWeekLabel = 'WE';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 4:\n\t\t\t\t\t\tdayOfWeekLabel = 'TU';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 5:\n\t\t\t\t\t\tdayOfWeekLabel = 'FR';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 6:\n\t\t\t\t\t\tdayOfWeekLabel = 'SA';\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\trule += ';BYDAY=' + (parseInt((dayOfMonth - 1) / 7) + 1) + dayOfWeekLabel;\n\t\t\t} else {\n\t\t\t\trule += ';BYMONTHDAY=' + dayOfMonth;\n\t\t\t}\n\t\t}\n\t\treturn rule;\n\t},\n\t/**\n\t * This function will register the submit event on form\n\t */\n\tregisterFormSubmitEvent: function () {\n\t\tvar thisInstance = this;\n\t\tvar form = this.getForm();\n\t\tvar lockSave = true;\n\t\tif (app.getRecordId()) {\n\t\t\tform.on(Vtiger_Edit_Js.recordPreSave, function (e) {\n\t\t\t\tif (lockSave && form.find('input[name=\"reapeat\"]').is(':checked')) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tapp.showModalWindow(form.find('.typeSavingModal').clone(), function (container) {\n\t\t\t\t\t\tcontainer.find('.typeSavingBtn').on('click', function (e) {\n\t\t\t\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\t\t\t\tform.find('[name=\"typeSaving\"]').val(currentTarget.data('value'));\n\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\tlockSave = false;\n\t\t\t\t\t\t\tform.submit();\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tform.on('submit', function (e) {\n\t\t\tconst recurringCheck = form.find('input[name=\"reapeat\"]').is(':checked');\n\t\t\tif (recurringCheck) {\n\t\t\t\tif (app.getRecordId() && lockSave) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}\n\t\t\t\tform.find('[name=\"recurrence\"]').val(thisInstance.getRule());\n\t\t\t}\n\t\t\tlet rows = form.find(\".js-participants-content .js-participant-row\");\n\t\t\tlet invitees = [];\n\t\t\trows.each(function (index, domElement) {\n\t\t\t\tlet row = $(domElement);\n\t\t\t\tif (row.data('email')) {\n\t\t\t\t\tinvitees.push([row.data('email'), row.data('crmid'), row.data('ivid'), row.data('name')]);\n\t\t\t\t}\n\t\t\t});\n\t\t\t$('<input type=\"hidden\" name=\"inviteesid\" />').appendTo(form).val(JSON.stringify(invitees));\n\t\t});\n\t},\n\tgetFreeTime: function (container) {\n\t\tvar timeStart = container.find('[name=\"time_start\"], [data-element-name=\"time_start\"]');\n\t\tvar timeEnd = container.find('[name=\"time_end\"], [data-element-name=\"time_end\"]');\n\t\tvar dateStart = container.find('[name=\"date_start\"], [data-element-name=\"date_start\"]');\n\t\tvar ownerId = container.find('[name=\"assigned_user_id\"], [data-element-name=\"assigned_user_id\"]');\n\t\tvar params = {\n\t\t\tmodule: 'Calendar',\n\t\t\taction: 'GetFreeTime',\n\t\t\tdateStart: dateStart.val(),\n\t\t\townerId: ownerId.val(),\n\t\t\tactivitytype: container.find('[name=\"activitytype\"]').val()\n\t\t};\n\t\tlet progress = $.progressIndicator({position: 'html', blockInfo: {enabled: true}});\n\t\tAppConnector.request(params).done(function (data) {\n\t\t\tprogress.progressIndicator({mode: 'hide'});\n\t\t\tif (data.result.date_start !== null) {\n\t\t\t\ttimeStart.val(data.result.time_start);\n\t\t\t\ttimeEnd.val(data.result.time_end);\n\t\t\t\tdateStart.val(data.result.date_start);\n\t\t\t\tcontainer.find('[name=\"due_date\"]').val(data.result.date_start);\n\t\t\t} else {\n\t\t\t\tVtiger_Helper_Js.showPnotify(app.vtranslate('JS_ERROR_MAX_VALUE'));\n\t\t\t\tcontainer.find('.js-autofill').prop('checked', false).trigger('change');\n\t\t\t}\n\t\t});\n\t},\n\tregisterAutoFillHours: function (container) {\n\t\tconst thisInstance = this;\n\t\tlet allDay = container.find('[name=\"allday\"]'),\n\t\t\ttimeStart = container.find('[name=\"time_start\"]'),\n\t\t\ttimeEnd = container.find('[name=\"time_end\"]'),\n\t\t\tdateEnd = container.find('[name=\"due_date\"]'),\n\t\t\tautoFill = container.find('.js-autofill');\n\t\tcontainer.find('.js-autofill__icon').on('click', function (e) {\n\t\t\tif (autoFill.is(':checked')) {\n\t\t\t\t$(e.currentTarget).closest('.input-group-text').removeClass('bg-color-blue-700').removeClass('text-white');\n\t\t\t\tautoFill.prop('checked', false).trigger('change');\n\t\t\t} else {\n\t\t\t\t$(e.currentTarget).closest('.input-group-text').addClass('bg-color-blue-700').addClass('text-white');\n\t\t\t\tautoFill.prop('checked', true).trigger('change');\n\t\t\t}\n\t\t});\n\t\tcontainer.find('.js-autofill').on('change', function (e) {\n\t\t\tlet currentTarget = $(e.currentTarget);\n\t\t\tif (currentTarget.is(':checked')) {\n\t\t\t\tcontainer.find('.js-autofill').prop('checked', true);\n\t\t\t\tthisInstance.getFreeTime(container);\n\t\t\t\ttimeStart.attr('readonly', 'readonly');\n\t\t\t\ttimeEnd.attr('readonly', 'readonly');\n\t\t\t\ttimeStart.clockpicker('remove');\n\t\t\t\ttimeEnd.clockpicker('remove');\n\t\t\t\tallDay.attr('disabled', 'disabled');\n\t\t\t\tallDay.prop('checked', false);\n\t\t\t\tallDay.trigger('change');\n\t\t\t\tdateEnd.attr('readonly', 'readonly');\n\t\t\t} else {\n\t\t\t\tcontainer.find('.js-autofill').prop('checked', false);\n\t\t\t\tallDay.removeAttr('disabled');\n\t\t\t\ttimeStart.removeAttr('readonly');\n\t\t\t\ttimeEnd.removeAttr('readonly');\n\t\t\t\tdateEnd.removeAttr('readonly');\n\t\t\t\tapp.registerEventForClockPicker(timeStart);\n\t\t\t\tapp.registerEventForClockPicker(timeEnd);\n\t\t\t}\n\t\t});\n\t},\n\tregisterMarkAsCompletedBtn: function (container) {\n\t\tcontainer.find('.js-btn--mark-as-completed').on('click', function () {\n\t\t\tconst self = $(this);\n\t\t\tif (self.hasClass('active')) {\n\t\t\t\tcontainer.find('.js-completed').remove();\n\t\t\t} else {\n\t\t\t\tcontainer.append('<input class=\"js-completed\" type=hidden name=\"activitystatus\" value=\"PLL_COMPLETED\" data-js=\"remove\">');\n\t\t\t}\n\t\t});\n\t},\n\tregisterBasicEvents: function (container) {\n\t\tthis._super(container);\n\t\tthis.toggleTimesInputs(container);\n\t\tthis.registerTimesInputs(container);\n\t\tthis.registerTimeStartChangeEvent(container);\n\t\tthis.registerActivityTypeChangeEvent(container);\n\t\tthis.registerEndDateTimeChangeLogger(container);\n\t\tthis.registerAutoFillHours(container);\n\t\tthis.registerMarkAsCompletedBtn(container);\n\t},\n\ttoggleTimesInputs: function (container) {\n\t\tcontainer.find(':checkbox').on('change', function () {\n\t\t\tvar checkboxName = $(this).attr('name');\n\t\t\tif ('allday' == checkboxName) {\n\t\t\t\tvar checkboxIsChecked = $(this).is(':checked');\n\t\t\t\tif (!container.find('#quickCreate').length) {\n\t\t\t\t\tif (checkboxIsChecked) {\n\t\t\t\t\t\tcontainer.find('.time').hide();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcontainer.find('.time').show();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\tregisterTimesInputs: function (container) {\n\t\tvar allday = container.find('[name=\"allday\"]:checkbox');\n\t\tif (allday.prop('checked')) {\n\t\t\tcontainer.find('.time').hide();\n\t\t}\n\n\t},\n\tgetDateInstance: function (container, type) {\n\t\tvar startDateElement = container.find('[name=\"date_start\"]');\n\t\tvar endDateElement = container.find('[name=\"due_date\"]');\n\t\tvar endTimeElement = container.find('[name=\"time_end\"]');\n\t\tvar startTimeElement = container.find('[name=\"time_start\"]');\n\t\tvar startDate = startDateElement.val();\n\t\tvar startTime = startTimeElement.val();\n\t\tvar endTime = endTimeElement.val();\n\t\tvar endDate = endDateElement.val();\n\t\tvar dateFormat = CONFIG.dateFormat;\n\t\tif (type == 'start') {\n\t\t\treturn Vtiger_Helper_Js.getDateInstance(startDate + ' ' + startTime, dateFormat);\n\t\t}\n\t\tif (type == 'end') {\n\t\t\treturn Vtiger_Helper_Js.getDateInstance(endDate + ' ' + endTime, dateFormat);\n\t\t}\n\t},\n\temailExists(email){\n\t\temail = email.toLowerCase();\n\t\tlet recordExist = false;\n\t\tthis.getForm().find('.js-participants-content').find('.js-participant-row').each((index, element) => {\n\t\t\tif ($(element).data('email').toLowerCase() === email) {\n\t\t\t\trecordExist = true;\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\t\treturn recordExist;\n\t},\n\tregisterAddInvitation(){\n\t\tthis.getForm().find('.js-btn-add-invitation').on('click', (e)=>{\n\t\t\tlet progressIndicatorElement = $.progressIndicator();\n\t\t\tapp.showModalWindow(null, 'index.php?module=Calendar&view=InviteEmail', (data) => {\n\t\t\t\tdata.find('.js-modal__save').on('click', (e)=>{\n\t\t\t\t\tlet email = data.find('.js-invite-email-input').val();\n\t\t\t\t\tlet nameAttendee = data.find('.js-invite-name-input').val();\n\t\t\t\t\tlet participantsContent = this.getForm().find('.js-participants-content');\n\t\t\t\t\tlet formEmail = data.find('.js-form');\n\t\t\t\t\tformEmail.validationEngine(app.validationEngineOptions);\n\t\t\t\t\tif( formEmail.validationEngine('validate') ){\n\t\t\t\t\t\tlet participantRow = participantsContent.find('.d-none .js-participant-row').clone(true, true);\n\t\t\t\t\t\tparticipantRow.data('crmid', 0);\n\t\t\t\t\t\tparticipantRow.data('email', email);\n\t\t\t\t\t\tif( nameAttendee ){\n\t\t\t\t\t\t\tparticipantRow.find('.js-participant-name').data('content', nameAttendee).text(nameAttendee);\n\t\t\t\t\t\t\tparticipantRow.data('name', nameAttendee);\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tparticipantRow.find('.js-participant-name').data('content', email).text(email);\n\t\t\t\t\t\t\tparticipantRow.data('name', '');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tparticipantsContent.append(participantRow);\n\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tprogressIndicatorElement.progressIndicator({'mode': 'hide'});\n\t\t\t});\n\t\t});\n\t},\n\tregisterInviteEvent: function (editViewForm) {\n\t\tthis.registerRow(editViewForm);\n\t\tlet participantsContent = editViewForm.find('.js-participants-content');\n\t\tlet participantsSearch = editViewForm.find('.js-participants-search');\n\t\t$.widget(\"custom.ivAutocomplete\", $.ui.autocomplete, {\n\t\t\t_create: function () {\n\t\t\t\tthis._super();\n\t\t\t\tthis.widget().menu(\"option\", \"items\", \"> :not(.ui-autocomplete-category)\");\n\t\t\t},\n\t\t\t_renderMenu: function (ul, items) {\n\t\t\t\tlet that = this, currentCategory = \"\";\n\t\t\t\t$.each(items, function (index, item) {\n\t\t\t\t\tif (item.category != currentCategory) {\n\t\t\t\t\t\tul.append(\"<li class='ui-autocomplete-category'>\" + item.category + \"</li>\");\n\t\t\t\t\t\tcurrentCategory = item.category;\n\t\t\t\t\t}\n\t\t\t\t\tthat._renderItemData(ul, item);\n\t\t\t\t});\n\t\t\t},\n\t\t\t_renderItemData: function (ul, item) {\n\t\t\t\treturn this._renderItem(ul, item).data(\"ui-autocomplete-item\", item);\n\t\t\t},\n\t\t\t_renderItem: function (ul, item) {\n\t\t\t\treturn $(\"<li>\")\n\t\t\t\t\t.data(\"item.autocomplete\", item)\n\t\t\t\t\t.append($(\"<a></a>\").html(item.label))\n\t\t\t\t\t.appendTo(ul);\n\t\t\t},\n\t\t});\n\t\tparticipantsSearch.ivAutocomplete({\n\t\t\tdelay: '600',\n\t\t\tminLength: '3',\n\t\t\tsource: (request, response) => {\n\t\t\t\tAppConnector.request({\n\t\t\t\t\tmodule: 'Calendar',\n\t\t\t\t\taction: 'Invitees',\n\t\t\t\t\tmode: 'find',\n\t\t\t\t\tvalue: request.term\n\t\t\t\t}).done((result) => {\n\t\t\t\t\tlet reponseDataList = result.result;\n\t\t\t\t\tif (reponseDataList.length <= 0) {\n\t\t\t\t\t\treponseDataList.push({\n\t\t\t\t\t\t\tlabel: app.vtranslate('JS_NO_RESULTS_FOUND'),\n\t\t\t\t\t\t\ttype: 'no results',\n\t\t\t\t\t\t\tcategory: ''\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tresponse(reponseDataList);\n\t\t\t\t});\n\t\t\t},\n\t\t\tselect: (event, ui) => {\n\t\t\t\tlet selected = ui.item;\n\t\t\t\t//To stop selection if no results is selected\n\t\t\t\tif (typeof selected.type !== \"undefined\" && selected.type == \"no results\") {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tlet recordExist = true;\n\t\t\t\tparticipantsContent.find('.js-participant-row').each(function (index) {\n\t\t\t\t\tif ($(this).data('crmid') == selected.id) {\n\t\t\t\t\t\trecordExist = false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif (recordExist) {\n\t\t\t\t\tlet participantRow = participantsContent.find('.d-none .js-participant-row').clone(true, true);\n\t\t\t\t\tVtiger_Index_Js.getEmailFromRecord(selected.id, selected.module).done((email) => {\n\t\t\t\t\t\tparticipantRow.data('crmid', selected.id);\n\t\t\t\t\t\tparticipantRow.data('email', email);\n\t\t\t\t\t\tparticipantRow.find('.js-participant-name').data('content', selected.fullLabel + email).text(selected.label);\n\t\t\t\t\t\tparticipantRow.find('.js-participant-icon .c-badge__icon').removeClass('fas fa-envelope').addClass('userIcon-' + selected.module);\n\t\t\t\t\t\tparticipantsContent.append(participantRow);\n\t\t\t\t\t});\n\t\t\t\t}else{\n\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\ttext: app.vtranslate('JS_DUPLICATE_RECORD') + ': ' + selected.fullLabel,\n\t\t\t\t\t\ttype: 'info'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\tclose: (event, ui) => {\n\t\t\t\tparticipantsSearch.val('');\n\t\t\t}\n\n\t\t});\n\t},\n\t/**\n\t * Function validate is holiday day\n\t * @param {jQuery} form\n\t * @returns {boolean}\n\t */\n\tvalidateHolidayDate(form) {\n\t\tlet fields = form.find('[name=\"date_start\"], [name=\"due_date\"]'),\n\t\t\tisHoliday = false,\n\t\t\tfieldHolidayArray = [],\n\t\t\taDeferred = $.Deferred();\n\t\t$.each(fields, function (index, fieldObj) {\n\t\t\tfieldHolidayArray.push(fieldObj.value);\n\t\t});\n\t\tAppConnector.request({\n\t\t\tasync: false,\n\t\t\tdata: {\n\t\t\t\tmodule: form.find('[name=\"module\"]').length ? form.find('[name=\"module\"]').val() : app.getModuleName(),\n\t\t\t\taction: 'Fields',\n\t\t\t\tmode: 'verifyIsHolidayDate',\n\t\t\t\tfieldName: 'date_start',\n\t\t\t\tdate: fieldHolidayArray\n\t\t\t}\n\t\t}).done(function (data) {\n\t\t\tif (true === data.success && true === data.result.isHolidayDate) {\n\t\t\t\tisHoliday = true;\n\t\t\t}\n\t\t\taDeferred.resolve(isHoliday);\n\t\t}).fail(function (error) {\n\t\t\taDeferred.reject(false);\n\t\t});\n\t\treturn aDeferred.promise();\n\t},\n\t/**\n\t * Register pre save event\n\t * @param {jQuery} form\n\t */\n\tregisterRecordPreSaveEventEvent: function (form) {\n\t\tconst self = this;\n\t\tlet lockSave = true;\n\t\tform.on(Vtiger_Edit_Js.recordPreSave, function (e, data) {\n\t\t\tself.validateHolidayDate(form).done(function (isHoliday) {\n\t\t\t\tif (lockSave && isHoliday) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tapp.showConfirmModal(app.vtranslate(\"JS_DATES_SELECTED_HOLIDAYS\"), function () {\n\t\t\t\t\t\tlockSave = false;\n\t\t\t\t\t\tform.submit();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\tregisterRow(row) {\n\t\trow.on(\"click\", '.js-participant-remove', (e) => {\n\t\t\t$(e.target).closest('.js-participant-row').remove();\n\t\t});\n\t},\n\tregisterEvents() {\n\t\tif (!this.proceedRegisterEvents()) {\n\t\t\treturn;\n\t\t}\n\t\tthis.registerReminderFieldCheckBox();\n\t\tthis.registerRecurrenceFieldCheckBox();\n\t\tthis.registerFormSubmitEvent();\n\t\tthis.registerRecurringTypeChangeEvent();\n\t\tthis.registerInviteEvent(this.getForm());\n\t\tthis.registerAddInvitation();\n\t\tthis._super();\n\t}\n});\n"],"names":["Vtiger_Edit_Js","field","rules","i","options","Calendar_Edit_Js","currencyInstance","emailExists","val","app","vtranslate","element","getForm","find","on","e","rowElement","closest","is","removeClass","addClass","change","form","repeatUI","container","$","currentTarget","attr","removeAttr","thisInstance","changeRecurringTypesUIStyles","jQuery","value","recurringType","self","getFreeTime","dateStartElement","startTimeElement","endTimeElement","endDateElement","startDate","startTime","result","Vtiger_Time_Validator_Js","invokeValidation","startDateTime","dateFormat","data","toUpperCase","timeFormat","activityType","activityDurations","JSON","parse","minutes","activitytype","parseInt","duration","defaultTimeFormat","endDate","moment","add","format","setDefaultEndTime","start","getDateInstance","end","CONFIG","trigger","Fields","Date","register","forceChange","Event","which","keyCode","timeElement","timeDateElement","dueDateElement","Vtiger_Date_Validator_Js","freq","rule","endValue","date","getDateInDBInsertFormat","replace","checkedElements","each","push","length","join","dayOfWeek","Vtiger_Helper_Js","getDay","dateInstance","dayOfMonth","getDate","option","dayOfWeekLabel","lockSave","getRecordId","recordPreSave","preventDefault","showModalWindow","clone","hideModalWindow","submit","recurringCheck","getRule","rows","invitees","index","domElement","row","appendTo","stringify","timeStart","timeEnd","dateStart","ownerId","params","progress","progressIndicator","position","blockInfo","enabled","request","done","mode","date_start","time_start","time_end","showPnotify","prop","allDay","dateEnd","autoFill","clockpicker","registerEventForClockPicker","hasClass","remove","append","_super","toggleTimesInputs","registerTimesInputs","registerTimeStartChangeEvent","registerActivityTypeChangeEvent","registerEndDateTimeChangeLogger","registerAutoFillHours","registerMarkAsCompletedBtn","checkboxName","checkboxIsChecked","hide","show","allday","type","startDateElement","endTime","email","toLowerCase","recordExist","progressIndicatorElement","nameAttendee","participantsContent","formEmail","validationEngine","validationEngineOptions","participantRow","text","editViewForm","registerRow","participantsSearch","widget","ui","autocomplete","menu","ul","items","that","currentCategory","item","category","_renderItemData","_renderItem","html","label","ivAutocomplete","response","term","reponseDataList","event","selected","id","getEmailFromRecord","module","fullLabel","fields","isHoliday","fieldHolidayArray","aDeferred","Deferred","fieldObj","getModuleName","success","isHolidayDate","resolve","fail","error","reject","promise","validateHolidayDate","showConfirmModal","target","proceedRegisterEvents","registerReminderFieldCheckBox","registerRecurrenceFieldCheckBox","registerFormSubmitEvent","registerRecurringTypeChangeEvent","registerInviteEvent","registerAddInvitation"],"mappings":"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"}