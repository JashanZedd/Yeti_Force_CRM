{"version":3,"file":"Edit.min.js","sources":["Edit.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n *************************************************************************************/\n'use strict';\n\nVtiger_Edit_Js(\"Calendar_Edit_Js\", {}, {\n\tregisterReminderFieldCheckBox: function () {\n\t\tlet element = this.getForm().find('.js-reminder-field-checkbox');\n\t\telement.on('change', function (e) {\n\t\t\tlet rowElement = element.closest('.js-reminder-field-element').find('.js-reminder-field-row');\n\t\t\tif (element.is(':checked')) {\n\t\t\t\trowElement.removeClass('d-none');\n\t\t\t} else {\n\t\t\t\trowElement.addClass('d-none');\n\t\t\t}\n\t\t});\n\t\telement.change();\n\t},\n\t/**\n\t * Function which will register change event on recurrence field checkbox\n\t */\n\tregisterRecurrenceFieldCheckBox: function () {\n\t\tconst form = this.getForm(),\n\t\t\telement = form.find('input[name=\"reapeat\"]');\n\t\telement.on('change', function (e) {\n\t\t\tlet repeatUI = form.find('.js-repeat-ui'),\n\t\t\t\tcontainer = form.find('[name=\"followup\"]').closest('.fieldValue');\n\t\t\tif ($(e.currentTarget).is(':checked')) {\n\t\t\t\trepeatUI.closest('.fieldRow').removeClass('d-none');\n\t\t\t\tcontainer.find('[name=\"followup_display\"]').attr('disabled', 'disabled');\n\t\t\t\tcontainer.find('button').attr('disabled', 'disabled');\n\t\t\t} else {\n\t\t\t\tcontainer.find('[name=\"followup_display\"]').removeAttr('disabled');\n\t\t\t\tcontainer.find('button').removeAttr('disabled');\n\t\t\t\trepeatUI.closest('.fieldRow').addClass('d-none');\n\t\t\t}\n\t\t});\n\t\telement.change();\n\t},\n\t/**\n\t * Function which will register the change event for recurring type\n\t */\n\tregisterRecurringTypeChangeEvent: function () {\n\t\tvar container = this.getForm();\n\t\tvar thisInstance = this;\n\t\tcontainer.find('.recurringType').on('change', function (e) {\n\t\t\tthisInstance.changeRecurringTypesUIStyles(jQuery(e.currentTarget).val());\n\t\t});\n\t\tcontainer.find('.repeatUI [name=\"calendarEndType\"]').on('change', function (e) {\n\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\tvar value = currentTarget.val();\n\t\t\tif (value === 'never') {\n\t\t\t\tcontainer.find('.countEvents').attr('disabled', 'disabled');\n\t\t\t\tcontainer.find('.calendarUntil').attr('disabled', 'disabled');\n\t\t\t} else if (value === 'count') {\n\t\t\t\tcontainer.find('.countEvents').removeAttr('disabled');\n\t\t\t\tcontainer.find('.calendarUntil').attr('disabled', 'disabled');\n\t\t\t} else if (value === 'until') {\n\t\t\t\tcontainer.find('.countEvents').attr('disabled', 'disabled');\n\t\t\t\tcontainer.find('.calendarUntil').removeAttr('disabled');\n\t\t\t}\n\t\t});\n\t},\n\t/**\n\t * Function which will change the UI styles based on recurring type\n\t * @params - recurringType - which recurringtype is selected\n\t */\n\tchangeRecurringTypesUIStyles: function (recurringType) {\n\t\tvar container = this.getForm();\n\t\tif (recurringType == 'DAILY' || recurringType == 'YEARLY') {\n\t\t\tcontainer.find('.repeatWeekUI').removeClass('show').addClass('d-none');\n\t\t\tcontainer.find('.repeatMonthUI').removeClass('show').addClass('d-none');\n\t\t} else if (recurringType == 'WEEKLY') {\n\t\t\tcontainer.find('.repeatWeekUI').removeClass('d-none').addClass('show');\n\t\t\tcontainer.find('.repeatMonthUI').removeClass('show').addClass('d-none');\n\t\t} else if (recurringType == 'MONTHLY') {\n\t\t\tcontainer.find('.repeatWeekUI').removeClass('show').addClass('d-none');\n\t\t\tcontainer.find('.repeatMonthUI').removeClass('d-none').addClass('show');\n\t\t}\n\t},\n\tsetDefaultEndTime: function (container) {\n\t\tvar dateStartElement = container.find('[name=\"date_start\"]');\n\t\tvar startTimeElement = container.find('[name=\"time_start\"]');\n\t\tvar endTimeElement = container.find('[name=\"time_end\"]');\n\t\tvar endDateElement = container.find('[name=\"due_date\"]');\n\n\t\tif (jQuery('[name=\"userChangedEndDateTime\"]').val() == '1') {\n\t\t\treturn;\n\t\t}\n\n\t\tvar startDate = dateStartElement.val();\n\t\tvar startTime = startTimeElement.val();\n\n\t\tvar result = Vtiger_Time_Validator_Js.invokeValidation(startTimeElement);\n\t\tif (result != true) {\n\t\t\treturn;\n\t\t}\n\t\tvar startDateTime = startDate + ' ' + startTime;\n\t\tvar dateFormat = container.find('[name=\"due_date\"]').data('dateFormat').toUpperCase();\n\t\tvar timeFormat = endTimeElement.data('format');\n\t\tvar endDateString = '';\n\t\tif (container.find('[name=\"activitytype\"]').val() == 'Call') {\n\t\t\tendDateString = moment(startDateTime, dateFormat).add(container.find('[name=\"defaultCallDuration\"]').val(), 'minutes').format(dateFormat);\n\t\t} else {\n\t\t\tendDateString = moment(startDateTime, dateFormat).add(container.find('[name=\"defaultOtherEventDuration\"]').val(), 'minutes').format(dateFormat);\n\t\t}\n\t\tif (timeFormat == 24) {\n\t\t\tvar defaultTimeFormat = 'HH:mm';\n\t\t} else {\n\t\t\tdefaultTimeFormat = 'hh:mm A';\n\t\t}\n\t\tendDateElement.val(endDateString);\n\t\tendTimeElement.val(moment(startTime, defaultTimeFormat).add(container.find('[name=\"defaultOtherEventDuration\"]').val(), 'minutes').format(defaultTimeFormat));\n\t},\n\t/**\n\t * Function to change the end time based on default call duration\n\t */\n\tregisterActivityTypeChangeEvent: function (container) {\n\t\tvar thisInstance = this;\n\t\tcontainer.on('change', 'select[name=\"activitytype\"]', function (e) {\n\t\t\tthisInstance.setDefaultEndTime(container);\n\t\t});\n\t},\n\t/**\n\t * Function to change the end time based on default call duration\n\t */\n\tregisterTimeStartChangeEvent: function (container) {\n\t\tvar thisInstance = this;\n\t\tcontainer.find('input[name=\"time_start\"]').on('change', function (e) {\n\t\t\tthisInstance.setDefaultEndTime(container);\n\t\t});\n\n\t\tcontainer.find('[name=\"date_start\"]').on('change', function (e) {\n\t\t\tvar startDateElement = jQuery(e.currentTarget);\n\t\t\tvar endDateElement = container.find('[name=\"due_date\"]');\n\n\t\t\tvar start = thisInstance.getDateInstance(container, 'start');\n\t\t\tvar end = thisInstance.getDateInstance(container, 'end');\n\t\t\tvar dateFormat = CONFIG.dateFormat.toUpperCase();\n\t\t\tcontainer.find('.autofill:visible').trigger('change');\n\t\t\tif (start > end) {\n\t\t\t\tend = start;\n\t\t\t\tendDateElement.val(moment(end).format(dateFormat));\n\t\t\t\tApp.Fields.Date.register(container);\n\t\t\t}\n\t\t\tvar timeStartElement = startDateElement.closest('.fieldValue').find('[name=\"time_start\"]');\n\t\t\ttimeStartElement.trigger('changeTime');\n\t\t});\n\n\t\tcontainer.find('input[name=\"time_start\"]').on('focus', function (e) {\n\t\t\tvar element = jQuery(e.currentTarget);\n\t\t\telement.data('prevValue', element.val());\n\t\t});\n\n\t\tcontainer.find('input[name=\"time_start\"]').on('blur', function (e, data) {\n\t\t\tif (typeof data === \"undefined\") {\n\t\t\t\tdata = {};\n\t\t\t}\n\n\t\t\tif (typeof data.forceChange === \"undefined\") {\n\t\t\t\tdata.forceChange = false;\n\t\t\t}\n\t\t\tvar element = jQuery(e.currentTarget);\n\t\t\tvar currentValue = element.val();\n\t\t\tvar prevValue = element.data('prevValue');\n\t\t\tif (currentValue != prevValue || data.forceChange) {\n\t\t\t\te = jQuery.Event(\"keydown\");\n\t\t\t\te.which = 13;\n\t\t\t\te.keyCode = 13;\n\t\t\t\telement.trigger(e);\n\t\t\t}\n\t\t});\n\t},\n\tregisterEndDateTimeChangeLogger: function (container) {\n\t\tvar thisInstance = this;\n\t\tcontainer.find('[name=\"time_end\"]').on('change', function (e) {\n\t\t\tvar timeElement = jQuery(e.currentTarget);\n\t\t\tvar result = Vtiger_Time_Validator_Js.invokeValidation(timeElement);\n\t\t\tif (result != true) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar timeDateElement = timeElement.closest('.fieldValue').find('[name=\"due_date\"]');\n\t\t\tjQuery('[name=\"userChangedEndDateTime\"]').val('1');\n\t\t\ttimeDateElement.data('userChangedTime', true);\n\t\t});\n\n\t\tcontainer.find('[name=\"due_date\"]').on('change', function (e) {\n\t\t\tvar dueDateElement = jQuery(e.currentTarget);\n\t\t\tvar result = Vtiger_Date_Validator_Js.invokeValidation(dueDateElement);\n\t\t\tif (result != true) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tjQuery('[name=\"userChangedEndDateTime\"]').val('1');\n\t\t\tdueDateElement.data('userChangedTime', true);\n\t\t});\n\t},\n\t/**\n\t *\n\t * @returns {String}\n\t */\n\tgetRule: function () {\n\t\tvar form = this.getForm();\n\t\tvar freq = form.find('.recurringType').val();\n\t\tvar rule = 'FREQ=' + freq;\n\t\trule += ';INTERVAL=' + form.find('.repeatFrequency').val();\n\t\tvar endValue = form.find('.repeatUI [name=\"calendarEndType\"]:checked').val();\n\t\tif (endValue === 'count') {\n\t\t\trule += ';COUNT=' + form.find('.countEvents').val();\n\t\t} else if (endValue === 'until') {\n\t\t\tvar date = form.find('.calendarUntil').val();\n\t\t\tdate = app.getDateInDBInsertFormat(CONFIG.dateFormat, date);\n\t\t\trule += ';UNTIL=' + date.replace(/-/gi, '') + 'T235959';\n\t\t}\n\t\tif (freq === 'WEEKLY') {\n\t\t\tvar checkedElements = [];\n\t\t\tform.find('.repeatWeekUI [type=\"checkbox\"]').each(function () {\n\t\t\t\tvar currentTarget = $(this);\n\t\t\t\tif (currentTarget.is(':checked')) {\n\t\t\t\t\tcheckedElements.push(currentTarget.val());\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (checkedElements.length > 0) {\n\t\t\t\trule += ';BYDAY=' + checkedElements.join(',');\n\t\t\t}\n\t\t}\n\t\tif (freq === 'MONTHLY') {\n\t\t\tvar dayOfWeek = Vtiger_Helper_Js.getDay(form.find('[name=\"date_start\"]').val());\n\t\t\tvar dateInstance = Vtiger_Helper_Js.getDateInstance(form.find('[name=\"date_start\"]').val(), CONFIG.dateFormat);\n\t\t\tvar dayOfMonth = dateInstance.getDate();\n\t\t\tvar option = form.find('.calendarMontlyType:checked').val();\n\t\t\tif (option == 'DAY') {\n\t\t\t\tvar dayOfWeekLabel = '';\n\t\t\t\tswitch (dayOfWeek) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tdayOfWeekLabel = 'SU';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 1:\n\t\t\t\t\t\tdayOfWeekLabel = 'MO';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\tdayOfWeekLabel = 'TU';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 3:\n\t\t\t\t\t\tdayOfWeekLabel = 'WE';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 4:\n\t\t\t\t\t\tdayOfWeekLabel = 'TU';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 5:\n\t\t\t\t\t\tdayOfWeekLabel = 'FR';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 6:\n\t\t\t\t\t\tdayOfWeekLabel = 'SA';\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\trule += ';BYDAY=' + (parseInt((dayOfMonth - 1) / 7) + 1) + dayOfWeekLabel;\n\t\t\t} else {\n\t\t\t\trule += ';BYMONTHDAY=' + dayOfMonth;\n\t\t\t}\n\t\t}\n\t\treturn rule;\n\t},\n\t/**\n\t * This function will register the submit event on form\n\t */\n\tregisterFormSubmitEvent: function () {\n\t\tvar thisInstance = this;\n\t\tvar form = this.getForm();\n\t\tvar lockSave = true;\n\t\tif (app.getRecordId()) {\n\t\t\tform.on(Vtiger_Edit_Js.recordPreSave, function (e) {\n\t\t\t\tif (lockSave && form.find('input[name=\"reapeat\"]').is(':checked')) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tapp.showModalWindow(form.find('.typeSavingModal').clone(), function (container) {\n\t\t\t\t\t\tcontainer.find('.typeSavingBtn').on('click', function (e) {\n\t\t\t\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\t\t\t\tform.find('[name=\"typeSaving\"]').val(currentTarget.data('value'));\n\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\tlockSave = false;\n\t\t\t\t\t\t\tform.submit();\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tform.on('submit', function (e) {\n\t\t\tvar recurringCheck = form.find('input[name=\"reapeat\"]').is(':checked');\n\t\t\tif (recurringCheck) {\n\t\t\t\tif (app.getRecordId() && lockSave) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}\n\t\t\t\tform.find('[name=\"recurrence\"]').val(thisInstance.getRule());\n\t\t\t}\n\t\t\tvar rows = form.find(\".inviteesContent .inviteRow\");\n\t\t\tvar invitees = [];\n\t\t\trows.each(function (index, domElement) {\n\t\t\t\tvar row = jQuery(domElement);\n\t\t\t\tif (row.data('crmid') != '') {\n\t\t\t\t\tinvitees.push([row.data('email'), row.data('crmid'), row.data('ivid')]);\n\t\t\t\t}\n\t\t\t});\n\t\t\tjQuery('<input type=\"hidden\" name=\"inviteesid\" />').appendTo(form).val(JSON.stringify(invitees));\n\t\t});\n\t},\n\tgetFreeTime: function (container) {\n\t\tvar timeStart = container.find('[name=\"time_start\"], [data-element-name=\"time_start\"]');\n\t\tvar timeEnd = container.find('[name=\"time_end\"], [data-element-name=\"time_end\"]');\n\t\tvar dateStart = container.find('[name=\"date_start\"], [data-element-name=\"date_start\"]');\n\t\tvar params = {\n\t\t\tmodule: 'Calendar',\n\t\t\taction: 'GetFreeTime',\n\t\t\tdateStart: dateStart.val()\n\t\t};\n\t\tcontainer.progressIndicator({});\n\t\tAppConnector.request(params).done(function (data) {\n\t\t\tcontainer.progressIndicator({mode: 'hide'});\n\t\t\ttimeStart.val(data.result.time_start);\n\t\t\ttimeEnd.val(data.result.time_end);\n\t\t\tdateStart.val(data.result.date_start);\n\t\t\tcontainer.find('[name=\"due_date\"]').val(data.result.date_start);\n\t\t});\n\t},\n\tregisterAutoFillHours: function (container) {\n\t\tvar thisInstance = this;\n\t\tvar allDay = container.find('[name=\"allday\"]');\n\t\tvar timeStart = container.find('[name=\"time_start\"]');\n\t\tvar timeEnd = container.find('[name=\"time_end\"]');\n\t\tvar dateEnd = container.find('[name=\"due_date\"]');\n\t\tcontainer.find('.autofill').on('change', function (e) {\n\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\tif (currentTarget.is(':checked')) {\n\t\t\t\tcontainer.find('.autofill').prop('checked', true);\n\t\t\t\tthisInstance.getFreeTime(container);\n\t\t\t\ttimeStart.attr('readonly', 'readonly');\n\t\t\t\ttimeEnd.attr('readonly', 'readonly');\n\t\t\t\tallDay.attr('disabled', 'disabled');\n\t\t\t\tallDay.prop('checked', false);\n\t\t\t\tallDay.trigger('change');\n\t\t\t\tdateEnd.attr('readonly', 'readonly');\n\t\t\t} else {\n\t\t\t\tcontainer.find('.autofill').prop('checked', false);\n\t\t\t\tallDay.removeAttr('disabled');\n\t\t\t\ttimeStart.removeAttr('readonly');\n\t\t\t\ttimeEnd.removeAttr('readonly');\n\t\t\t\tdateEnd.removeAttr('readonly');\n\t\t\t}\n\t\t});\n\t},\n\tregisterMarkAsCompletedBtn: function (container) {\n\t\tcontainer.find('.js-btn--mark-as-completed').on('click', function () {\n\t\t\tconst self = $(this);\n\t\t\tif (self.hasClass('active')) {\n\t\t\t\tcontainer.find('.js-completed').remove();\n\t\t\t} else {\n\t\t\t\tcontainer.append('<input class=\"js-completed\" type=hidden name=\"markAsCompleted\" value=\"PLL_COMPLETED\" data-js=\"remove\">');\n\t\t\t}\n\t\t});\n\t},\n\tregisterBasicEvents: function (container) {\n\t\tthis._super(container);\n\t\tthis.toggleTimesInputs(container);\n\t\tthis.registerTimesInputs(container);\n\t\tthis.registerTimeStartChangeEvent(container);\n\t\tthis.registerActivityTypeChangeEvent(container);\n\t\tthis.registerEndDateTimeChangeLogger(container);\n\t\tthis.registerAutoFillHours(container);\n\t\tthis.registerMarkAsCompletedBtn(container);\n\t},\n\ttoggleTimesInputs: function (container) {\n\t\tcontainer.find(':checkbox').on('change', function () {\n\t\t\tvar checkboxName = $(this).attr('name');\n\t\t\tif ('allday' == checkboxName) {\n\t\t\t\tvar checkboxIsChecked = $(this).is(':checked');\n\t\t\t\tif (!container.find('#quickCreate').length) {\n\t\t\t\t\tif (checkboxIsChecked) {\n\t\t\t\t\t\tcontainer.find('.time').hide();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcontainer.find('.time').show();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\tregisterTimesInputs: function (container) {\n\t\tvar allday = container.find('[name=\"allday\"]:checkbox');\n\t\tif (allday.prop('checked')) {\n\t\t\tcontainer.find('.time').hide();\n\t\t}\n\n\t},\n\tgetDateInstance: function (container, type) {\n\t\tvar startDateElement = container.find('[name=\"date_start\"]');\n\t\tvar endDateElement = container.find('[name=\"due_date\"]');\n\t\tvar endTimeElement = container.find('[name=\"time_end\"]');\n\t\tvar startTimeElement = container.find('[name=\"time_start\"]');\n\t\tvar startDate = startDateElement.val();\n\t\tvar startTime = startTimeElement.val();\n\t\tvar endTime = endTimeElement.val();\n\t\tvar endDate = endDateElement.val();\n\t\tvar dateFormat = CONFIG.dateFormat;\n\t\tif (type == 'start') {\n\t\t\treturn Vtiger_Helper_Js.getDateInstance(startDate + ' ' + startTime, dateFormat);\n\t\t}\n\t\tif (type == 'end') {\n\t\t\treturn Vtiger_Helper_Js.getDateInstance(endDate + ' ' + endTime, dateFormat);\n\t\t}\n\t},\n\tregisterInviteEvent: function (editViewForm) {\n\t\tvar thisInstance = this;\n\t\tthis.registerRow(editViewForm);\n\t\tvar inviteesContent = editViewForm.find('.inviteesContent');\n\t\tvar inviteesSearch = editViewForm.find('input.inviteesSearch');\n\t\t$.widget(\"custom.ivAutocomplete\", $.ui.autocomplete, {\n\t\t\t_create: function () {\n\t\t\t\tthis._super();\n\t\t\t\tthis.widget().menu(\"option\", \"items\", \"> :not(.ui-autocomplete-category)\");\n\t\t\t},\n\t\t\t_renderMenu: function (ul, items) {\n\t\t\t\tvar that = this, currentCategory = \"\";\n\t\t\t\t$.each(items, function (index, item) {\n\t\t\t\t\tvar li;\n\t\t\t\t\tif (item.category != currentCategory) {\n\t\t\t\t\t\tul.append(\"<li class='ui-autocomplete-category'>\" + item.category + \"</li>\");\n\t\t\t\t\t\tcurrentCategory = item.category;\n\t\t\t\t\t}\n\t\t\t\t\tthat._renderItemData(ul, item);\n\t\t\t\t});\n\t\t\t},\n\t\t\t_renderItemData: function (ul, item) {\n\t\t\t\treturn this._renderItem(ul, item).data(\"ui-autocomplete-item\", item);\n\t\t\t},\n\t\t\t_renderItem: function (ul, item) {\n\t\t\t\treturn $(\"<li>\")\n\t\t\t\t\t.data(\"item.autocomplete\", item)\n\t\t\t\t\t.append($(\"<a></a>\").html(item.label))\n\t\t\t\t\t.appendTo(ul);\n\t\t\t},\n\t\t});\n\t\tinviteesSearch.ivAutocomplete({\n\t\t\tdelay: '600',\n\t\t\tminLength: '3',\n\t\t\tsource: function (request, response) {\n\t\t\t\tAppConnector.request({\n\t\t\t\t\tmodule: 'Calendar',\n\t\t\t\t\taction: 'Invitees',\n\t\t\t\t\tmode: 'find',\n\t\t\t\t\tvalue: request.term\n\t\t\t\t}).done(function (result) {\n\t\t\t\t\tvar reponseDataList = result.result;\n\t\t\t\t\tif (reponseDataList.length <= 0) {\n\t\t\t\t\t\treponseDataList.push({\n\t\t\t\t\t\t\tlabel: app.vtranslate('JS_NO_RESULTS_FOUND'),\n\t\t\t\t\t\t\ttype: 'no results',\n\t\t\t\t\t\t\tcategory: ''\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tresponse(reponseDataList);\n\t\t\t\t});\n\t\t\t},\n\t\t\tselect: function (event, ui) {\n\t\t\t\tvar selected = ui.item;\n\n\t\t\t\t//To stop selection if no results is selected\n\t\t\t\tif (typeof selected.type !== \"undefined\" && selected.type == \"no results\") {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tvar recordExist = true;\n\t\t\t\tinviteesContent.find('.inviteRow').each(function (index) {\n\t\t\t\t\tif ($(this).data('crmid') == selected.id) {\n\t\t\t\t\t\trecordExist = false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif (recordExist) {\n\t\t\t\t\tvar inviteRow = inviteesContent.find('.d-none .inviteRow').clone(true, true);\n\t\t\t\t\tVtiger_Index_Js.getEmailFromRecord(selected.id, selected.module).done(function (email) {\n\t\t\t\t\t\tinviteRow.data('crmid', selected.id);\n\t\t\t\t\t\tinviteRow.data('email', email);\n\t\t\t\t\t\tinviteRow.find('.inviteName').data('content', selected.fullLabel + email).text(selected.label);\n\t\t\t\t\t\tinviteRow.find('.inviteIcon .c-badge__icon').removeClass('fas fa-envelope').addClass('userIcon-' + selected.module);\n\t\t\t\t\t\tinviteesContent.append(inviteRow);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\tclose: function (event, ui) {\n\t\t\t\tinviteesSearch.val('');\n\t\t\t}\n\n\t\t});\n\t},\n\t/**\n\t * Function validate is holiday day\n\t * @param {jQuery} form\n\t * @returns {boolean}\n\t */\n\tvalidateHolidayDate(form) {\n\t\tlet fields = form.find('[name=\"date_start\"], [name=\"due_date\"]'),\n\t\t\tisHoliday = false,\n\t\t\tfieldHolidayArray = [],\n\t\t\taDeferred = $.Deferred();\n\t\t$.each(fields, function (index, fieldObj) {\n\t\t\tfieldHolidayArray.push(fieldObj.value);\n\t\t});\n\t\tAppConnector.request({\n\t\t\tasync: false,\n\t\t\tdata: {\n\t\t\t\tmodule: form.find('[name=\"module\"]').length ? form.find('[name=\"module\"]').val() : app.getModuleName(),\n\t\t\t\taction: 'Fields',\n\t\t\t\tmode: 'verifyIsHolidayDate',\n\t\t\t\tfieldName: 'date_start',\n\t\t\t\tdate: fieldHolidayArray\n\t\t\t}\n\t\t}).done(function (data) {\n\t\t\tif (true === data.success && true === data.result.isHolidayDate) {\n\t\t\t\tisHoliday = true;\n\t\t\t}\n\t\t\taDeferred.resolve(isHoliday);\n\t\t}).fail(function (error) {\n\t\t\taDeferred.reject(false);\n\t\t});\n\t\treturn aDeferred.promise();\n\t},\n\t/**\n\t * Register pre save event\n\t * @param {jQuery} form\n\t */\n\tregisterRecordPreSaveEventEvent: function (form) {\n\t\tconst self = this;\n\t\tlet lockSave = true;\n\t\tform.on(Vtiger_Edit_Js.recordPreSave, function (e, data) {\n\t\t\tself.validateHolidayDate(form).done(function (isHoliday) {\n\t\t\t\tif (lockSave && isHoliday) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tVtiger_Helper_Js.showConfirmationBox({'message': app.vtranslate(\"JS_DATES_SELECTED_HOLIDAYS\")}).done(function () {\n\t\t\t\t\t\tlockSave = false;\n\t\t\t\t\t\tform.submit();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\tregisterRow: function (row) {\n\t\tvar thisInstance = this;\n\t\trow.on(\"click\", '.inviteRemove', function (e) {\n\t\t\t$(e.target).closest('.inviteRow').remove();\n\t\t});\n\t},\n\tregisterEvents: function () {\n\t\tvar statusToProceed = this.proceedRegisterEvents();\n\t\tif (!statusToProceed) {\n\t\t\treturn;\n\t\t}\n\t\tvar editViewForm = this.getForm();\n\t\tthis.registerReminderFieldCheckBox();\n\t\tthis.registerRecurrenceFieldCheckBox();\n\t\tthis.registerFormSubmitEvent();\n\t\tthis.registerRecurringTypeChangeEvent();\n\t\tthis.registerInviteEvent(editViewForm);\n\t\tthis._super();\n\t}\n});\n\n"],"names":["Vtiger_Edit_Js","registerReminderFieldCheckBox","getForm","find","element","on","closest","is","rowElement","removeClass","addClass","change","registerRecurrenceFieldCheckBox","form","e","container","$","currentTarget","repeatUI","attr","removeAttr","registerRecurringTypeChangeEvent","thisInstance","changeRecurringTypesUIStyles","jQuery","val","value","recurringType","setDefaultEndTime","startTimeElement","endTimeElement","endDateElement","dateStartElement","startTime","result","Vtiger_Time_Validator_Js","invokeValidation","startDate","dateFormat","data","toUpperCase","timeFormat","endDateString","moment","startDateTime","add","format","defaultTimeFormat","registerActivityTypeChangeEvent","registerTimeStartChangeEvent","start","getDateInstance","end","CONFIG","trigger","App","Fields","Date","register","startDateElement","timeStartElement","forceChange","currentValue","prevValue","Event","which","keyCode","registerEndDateTimeChangeLogger","timeElement","timeDateElement","Vtiger_Date_Validator_Js","dueDateElement","getRule","freq","rule","date","app","getDateInDBInsertFormat","replace","each","checkedElements","push","length","join","Vtiger_Helper_Js","getDay","dateInstance","dayOfMonth","getDate","option","dayOfWeek","dayOfWeekLabel","parseInt","registerFormSubmitEvent","lockSave","getRecordId","recordPreSave","preventDefault","showModalWindow","clone","hideModalWindow","submit","recurringCheck","invitees","rows","index","domElement","row","appendTo","JSON","stringify","getFreeTime","timeEnd","dateStart","params","module","action","progressIndicator","AppConnector","request","done","mode","timeStart","time_start","time_end","date_start","registerAutoFillHours","allDay","dateEnd","prop","registerMarkAsCompletedBtn","self","hasClass","remove","append","registerBasicEvents","_super","toggleTimesInputs","registerTimesInputs","checkboxName","checkboxIsChecked","hide","show","allday","type","endTime","endDate","registerInviteEvent","editViewForm","registerRow","inviteesSearch","widget","ui","autocomplete","_create","menu","_renderMenu","ul","items","currentCategory","item","category","that","_renderItemData","_renderItem","html","label","ivAutocomplete","delay","minLength","source","response","term","reponseDataList","vtranslate","select","event","inviteesContent","selected","id","recordExist","Vtiger_Index_Js","getEmailFromRecord","email","inviteRow","fullLabel","text","close","validateHolidayDate","isHoliday","fieldHolidayArray","aDeferred","Deferred","fields","fieldObj","async","getModuleName","fieldName","success","isHolidayDate","resolve","fail","reject","promise","registerRecordPreSaveEventEvent","showConfirmationBox","target","registerEvents","proceedRegisterEvents","statusToProceed"],"mappings":"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"}