{"version":3,"file":"CalendarView.min.js","sources":["CalendarView.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n/**\n *  Class representing an extended calendar.\n * @extends Calendar_Calendar_Js\n */\nwindow.calendarLoaded = false; //Global calendar flag needed for correct loading data from history browser in year view\nwindow.Calendar_CalendarExtended_Js = class Calendar_CalendarExtended_Js extends Calendar_Calendar_Js {\n\tconstructor(container, readonly) {\n\t\tsuper(container, readonly);\n\t\tthis.sidebarView = {\n\t\t\tlength: 0\n\t\t};\n\t\tthis.calendarContainer = false;\n\t\tthis.addCommonMethodsToYearView();\n\t\tthis.calendar = this.getCalendarView();\n\t}\n\n\t/**\n\t * Function extends FC.views.year with current class methods\n\t */\n\taddCommonMethodsToYearView() {\n\t\tconst self = this;\n\t\tFC.views.year = FC.views.year.extend({\n\t\t\tbaseInstance: self,\n\t\t\tselectDays: self.selectDays,\n\t\t\tgetCalendarCreateView: self.getCalendarCreateView,\n\t\t\tgetSidebarView: self.getSidebarView,\n\t\t\tgetCurrentCvId: self.getCurrentCvId,\n\t\t\tgetCalendarView: self.getCalendarView,\n\t\t\tshowRightPanelForm: self.showRightPanelForm,\n\t\t\tgetSelectedUsersCalendar: self.getSelectedUsersCalendar,\n\t\t\tregisterClearFilterButton: self.registerClearFilterButton,\n\t\t\tclearFilterButton: self.clearFilterButton,\n\t\t\tregisterFilterTabChange: self.registerFilterTabChange,\n\t\t\tsidebarView: self.sidebarView,\n\t\t\tregisterAfterSubmitForm: self.registerAfterSubmitForm,\n\t\t\tregisterViewRenderEvents: self.registerViewRenderEvents,\n\t\t\tappendSubDateRow: self.appendSubDateRow,\n\t\t\trefreshDatesRowView: self.refreshDatesRowView,\n\t\t\tgenerateYearList: self.generateYearList,\n\t\t\tupdateCountTaskCalendar: self.updateCountTaskCalendar,\n\t\t\tregisterDatesChange: self.registerDatesChange,\n\t\t\taddHeaderButtons: self.addHeaderButtons,\n\t\t\tbrowserHistoryConfig: self.browserHistoryConfig,\n\t\t\treadonly: self.readonly,\n\t\t\tcontainer: self.container,\n\t\t\tmodule: self.module,\n\t\t\tshowChangeDateButtons: self.showChangeDateButtons,\n\t\t\tshowTodayButtonCheckbox: self.showTodayButtonCheckbox,\n\t\t\tgetDefaultParams: self.getDefaultParams\n\t\t});\n\t}\n\n\t/**\n\t * Render calendar\n\t */\n\trenderCalendar() {\n\t\tlet self = this,\n\t\t\tbasicOptions = this.setCalendarOptions(),\n\t\t\toptions = {\n\t\t\t\theader: {\n\t\t\t\t\tleft: 'year,month,' + app.getMainParams('weekView') + ',' + app.getMainParams('dayView'),\n\t\t\t\t\tcenter: 'prevYear,prev,title,next,nextYear',\n\t\t\t\t\tright: 'today'\n\t\t\t\t},\n\t\t\t\tviews: {\n\t\t\t\t\tbasic: {\n\t\t\t\t\t\teventLimit: false\n\t\t\t\t\t},\n\t\t\t\t\tyear: {\n\t\t\t\t\t\teventLimit: 10,\n\t\t\t\t\t\teventLimitText: app.vtranslate('JS_COUNT_RECORDS'),\n\t\t\t\t\t\ttitleFormat: 'YYYY',\n\t\t\t\t\t\tselect: function (start, end) {},\n\t\t\t\t\t\tloadView: function () {\n\t\t\t\t\t\t\tself.getCalendarView().fullCalendar('getCalendar').view.render();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tmonth: {\n\t\t\t\t\t\ttitleFormat: this.parseDateFormat('month'),\n\t\t\t\t\t\tloadView: function () {\n\t\t\t\t\t\t\tself.loadCalendarData();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tweek: {\n\t\t\t\t\t\ttitleFormat: this.parseDateFormat('week'),\n\t\t\t\t\t\tloadView: function () {\n\t\t\t\t\t\t\tself.loadCalendarData();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tday: {\n\t\t\t\t\t\ttitleFormat: this.parseDateFormat('day'),\n\t\t\t\t\t\tloadView: function () {\n\t\t\t\t\t\t\tself.loadCalendarData();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tbasicDay: {\n\t\t\t\t\t\ttype: 'agendaDay',\n\t\t\t\t\t\tloadView: function () {\n\t\t\t\t\t\t\tself.loadCalendarData();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tselect: function (start, end) {\n\t\t\t\t\tself.selectDays(start, end);\n\t\t\t\t\tself.getCalendarView().fullCalendar('unselect');\n\t\t\t\t},\n\t\t\t\teventRender: function (event, element) {\n\t\t\t\t\tself.eventRenderer(event, element);\n\t\t\t\t},\n\t\t\t\tviewRender: function (view, element) {\n\t\t\t\t\tif (view.type !== 'year') {\n\t\t\t\t\t\tself.loadCalendarData(view);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\taddCalendarEvent(calendarDetails) {\n\t\t\t\t\tself.getCalendarView().fullCalendar('renderEvent', self.getEventData(calendarDetails));\n\t\t\t\t}\n\t\t\t};\n\t\toptions = Object.assign(basicOptions, options);\n\t\tif (!this.readonly && self.eventEdit) {\n\t\t\toptions.eventClick = function (calEvent, jsEvent) {\n\t\t\t\tjsEvent.preventDefault();\n\t\t\t\tself.getCalendarSidebarData($(this).attr('href'));\n\t\t\t};\n\t\t} else {\n\t\t\toptions.eventClick = function (calEvent, jsEvent) {\n\t\t\t\tjsEvent.preventDefault();\n\t\t\t\tconst link = new URL($(this)[0].href);\n\t\t\t\twindow.location.assign(`index.php?module=${this.module}&view=Detail&record=${link.searchParams.get('record')}`);\n\t\t\t};\n\t\t}\n\t\tthis.calendar.fullCalendar(options);\n\t}\n\n\tregisterChangeView() {}\n\n\taddHeaderButtons() {\n\t\tif (this.calendarContainer.find('.js-calendar__view-btn').length) {\n\t\t\treturn;\n\t\t}\n\t\tlet buttonsContainer = this.calendarContainer.prev('.js-calendar__header-buttons'),\n\t\t\tviewBtn = buttonsContainer.find('.js-calendar__view-btn').clone(),\n\t\t\tfilters = buttonsContainer.find('.js-calendar__filter-container').clone();\n\t\tthis.calendarContainer.find('.fc-left').prepend(viewBtn);\n\t\tthis.calendarContainer.find('.fc-center').after(filters);\n\t\tthis.registerClearFilterButton();\n\t\tthis.registerFilterTabChange();\n\t}\n\n\tregisterSwitchEvents() {\n\t\tconst calendarView = this.getCalendarView();\n\t\tlet changeDaysState,\n\t\t\tchangeType,\n\t\t\tswitchContainer = $('.js-calendar__tab--filters'),\n\t\t\tswitchShowType = switchContainer.find('.js-switch--showType'),\n\t\t\tshowTypeState = switchShowType.find('.js-switch--label-on.active').length ? 'current' : 'history',\n\t\t\tswitchSwitchingDays = switchContainer.find('.js-switch--switchingDays'),\n\t\t\tswitchingDaysState = switchSwitchingDays.find('input:checked').data('val');\n\t\tlet historyParams = app.getMainParams('historyParams', true);\n\t\tif (historyParams === '') {\n\t\t\tchangeDaysState = app.getMainParams('switchingDays');\n\t\t\tchangeType = app.getMainParams('showType');\n\t\t} else {\n\t\t\tchangeType = historyParams.time !== undefined ? historyParams.time : app.getMainParams('showType');\n\t\t\tchangeDaysState = historyParams.hiddenDays === '' ? 'all' : 'workDays';\n\t\t}\n\t\tif (switchShowType.length) {\n\t\t\tswitchShowType.on('change', 'input', (e) => {\n\t\t\t\tconst currentTarget = $(e.currentTarget);\n\t\t\t\tif (typeof currentTarget.data('on-text') !== 'undefined') {\n\t\t\t\t\tapp.setMainParams('showType', 'current');\n\t\t\t\t\tapp.moduleCacheSet('defaultShowType', 'current');\n\t\t\t\t} else if (typeof currentTarget.data('off-text') !== 'undefined') {\n\t\t\t\t\tapp.setMainParams('showType', 'history');\n\t\t\t\t\tapp.moduleCacheSet('defaultShowType', 'history');\n\t\t\t\t}\n\t\t\t\tcalendarView.fullCalendar('getCalendar').view.options.loadView();\n\t\t\t});\n\t\t\tif (app.getMainParams('showType') !== changeType) {\n\t\t\t\t$('input[data-val=\"' + changeType + '\"]', switchShowType).trigger('change');\n\t\t\t}\n\t\t}\n\t\tif (switchSwitchingDays.length) {\n\t\t\tswitchSwitchingDays.on('change', 'input', (e) => {\n\t\t\t\tconst currentTarget = $(e.currentTarget);\n\t\t\t\tlet hiddenDays = [];\n\t\t\t\tif (typeof currentTarget.data('on-text') !== 'undefined') {\n\t\t\t\t\tapp.setMainParams('switchingDays', 'workDays');\n\t\t\t\t\tapp.moduleCacheSet('defaultSwitchingDays', 'workDays');\n\t\t\t\t\thiddenDays = app.getMainParams('hiddenDays', true);\n\t\t\t\t} else if (typeof currentTarget.data('off-text') !== 'undefined') {\n\t\t\t\t\tapp.setMainParams('switchingDays', 'all');\n\t\t\t\t\tapp.moduleCacheSet('defaultSwitchingDays', 'all');\n\t\t\t\t}\n\t\t\t\tcalendarView.fullCalendar('option', 'hiddenDays', hiddenDays);\n\t\t\t\tcalendarView.fullCalendar('option', 'height', this.setCalendarHeight());\n\t\t\t\tif (calendarView.fullCalendar('getView').type === 'year') {\n\t\t\t\t\tthis.registerViewRenderEvents(calendarView.fullCalendar('getView'));\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (app.getMainParams('switchingDays') !== changeDaysState) {\n\t\t\t\t$('input[data-val=\"' + changeDaysState + '\"]', switchSwitchingDays).trigger('change');\n\t\t\t} else if (changeDaysState !== switchingDaysState) {\n\t\t\t\t// TODO\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Appends subdate row to calendar header and register its scroll\n\t * @param toolbar\n\t */\n\tappendSubDateRow(toolbar) {\n\t\tif (!this.calendarContainer.find('.js-dates-row').length) {\n\t\t\tthis.subDateRow = $(`\n\t\t\t\t\t\t\t\t<div class=\"js-scroll js-dates-row u-overflow-auto-lg-down order-4 flex-grow-1 position-relative my-1 w-100\" data-js=\"perfectScrollbar | container\">\n\t\t\t\t\t\t\t\t\t<div class=\"d-flex flex-nowrap w-100\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"js-sub-date-list w-100 sub-date-list row no-gutters flex-nowrap nav nav-tabs\" data-js=\"data-type\"></div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t`);\n\t\t\ttoolbar.append(this.subDateRow);\n\t\t\tif ($(window).width() > app.breakpoints.lg) {\n\t\t\t\tapp.showNewScrollbar(this.subDateRow);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Function toggles next year/month and general arrows on view render\n\t * @param view\n\t * @param element\n\t */\n\tregisterViewRenderEvents(view) {\n\t\tthis.calendarContainer = this.getCalendarView();\n\t\tlet toolbar = this.calendarContainer.find('.fc-toolbar.fc-header-toolbar');\n\t\tthis.showChangeDateButtons(view, toolbar);\n\t\tthis.appendSubDateRow(toolbar);\n\t\tthis.refreshDatesRowView(view);\n\t\tthis.addHeaderButtons();\n\t\tthis.showTodayButtonCheckbox(toolbar);\n\t}\n\n\t/**\n\t * Function appends and shows today button's checkbox\n\t * @param {jQuery} toolbar\n\t */\n\tshowTodayButtonCheckbox(toolbar) {\n\t\tlet todayButton = toolbar.find('.fc-today-button'),\n\t\t\ttodyButtonIcon = todayButton.hasClass('fc-state-disabled') ? 'fa-calendar-check' : 'fa-calendar',\n\t\t\tpopoverContent = `${app.vtranslate('JS_CURRENT')} ${toolbar.find('.fc-state-active').text().toLowerCase()}`;\n\t\ttodayButton.removeClass('.fc-button');\n\t\ttodayButton.html(\n\t\t\t`<div class=\"js-popover-tooltip--day-btn\" data-toggle=\"popover\"><span class=\"far fa-lg ${todyButtonIcon}\"></span></div>`\n\t\t);\n\t\tapp.showPopoverElementView(todayButton.find('.js-popover-tooltip--day-btn'), {\n\t\t\tcontent: popoverContent,\n\t\t\tcontainer: '.fc-today-button .js-popover-tooltip--day-btn'\n\t\t});\n\t}\n\n\t/**\n\t * Function shows change date buttons in calendar's header for specific view\n\t * @param view\n\t * @param toolbar\n\t */\n\tshowChangeDateButtons(view, toolbar) {\n\t\tlet viewType = view.type.replace(/basic|agenda/g, '').toLowerCase(),\n\t\t\tnextPrevButtons = toolbar.find('.fc-prev-button, .fc-next-button'),\n\t\t\tyearButtons = toolbar.find('.fc-prevYear-button, .fc-nextYear-button');\n\t\tif (!window.calendarLoaded) {\n\t\t\tyearButtons.first().html(`<span class=\"fas fa-xs fa-minus mr-1\"></span>${view.options.buttonText['year']}`);\n\t\t\tyearButtons.last().html(`${view.options.buttonText['year']}<span class=\"fas fa-xs fa-plus ml-1\"></span>`);\n\t\t}\n\t\tif (view.type !== 'year') {\n\t\t\tnextPrevButtons.first().html(`<span class=\"fas fa-xs fa-minus mr-1\"></span>${view.options.buttonText[viewType]}`);\n\t\t\tnextPrevButtons.last().html(`${view.options.buttonText[viewType]}<span class=\"fas fa-xs fa-plus ml-1\"></span>`);\n\t\t}\n\t\tif (view.type === 'year') {\n\t\t\tnextPrevButtons.hide();\n\t\t\tyearButtons.show();\n\t\t} else if (view.type === 'month') {\n\t\t\tnextPrevButtons.show();\n\t\t\tyearButtons.show();\n\t\t} else {\n\t\t\tnextPrevButtons.show();\n\t\t\tyearButtons.hide();\n\t\t}\n\t}\n\n\t/**\n\t * Date bar with counts\n\t * @param object calendarView\n\t */\n\trefreshDatesRowView(calendarView) {\n\t\tconst self = this;\n\t\tswitch (calendarView.type) {\n\t\t\tcase 'year':\n\t\t\t\tself.generateYearList(calendarView.intervalStart, calendarView.intervalEnd);\n\t\t\t\tbreak;\n\t\t\tcase 'month':\n\t\t\t\tself.generateSubMonthList(calendarView.intervalStart, calendarView.intervalEnd);\n\t\t\t\tbreak;\n\t\t\tcase 'week':\n\t\t\tcase 'agendaWeek':\n\t\t\t\tself.generateSubWeekList(calendarView.start, calendarView.end);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tself.generateSubDaysList(calendarView.start, calendarView.end);\n\t\t}\n\t\tself.updateCountTaskCalendar();\n\t\tself.registerDatesChange();\n\t}\n\n\tregisterDatesChange() {\n\t\tthis.container.find('.js-dates-row .js-sub-record').on('click', (e) => {\n\t\t\tlet currentTarget = $(e.currentTarget);\n\t\t\tcurrentTarget.addClass('active');\n\t\t\tthis.getCalendarView().fullCalendar('gotoDate', moment(currentTarget.data('date'), 'YYYY-MM-DD'));\n\t\t});\n\t}\n\n\tgetCurrentCvId() {\n\t\treturn $('.js-calendar__extended-filter-tab .active').parent('.js-filter-tab').data('cvid');\n\t}\n\n\tregisterFilterTabChange() {\n\t\tconst thisInstance = this;\n\t\tthis.getCalendarView()\n\t\t\t.find('.js-calendar__extended-filter-tab')\n\t\t\t.on('shown.bs.tab', function () {\n\t\t\t\tthisInstance.getCalendarView().fullCalendar('getCalendar').view.options.loadView();\n\t\t\t});\n\t}\n\t/**\n\t * Get selected users or groups\n\t * @returns Object\n\t */\n\tgetSelectedUsersCalendar() {\n\t\tconst sidebar = this.getSidebarView();\n\t\tlet selectedUsers = sidebar.find('.js-input-user-owner-id:checked'),\n\t\t\tnotSelectedUsers = sidebar.find('.js-input-user-owner-id:not(:checked)'),\n\t\t\tselectedUsersAjax = sidebar.find('.js-input-user-owner-id-ajax'),\n\t\t\tselectedRolesAjax = sidebar.find('.js-input-role-owner-id-ajax'),\n\t\t\tcheckboxSelectAll = sidebar.find('.js-select-all'),\n\t\t\tselectedIds = [],\n\t\t\texcludedIds = [];\n\n\t\tlet ifSelectAllIsChecked = checkboxSelectAll.length > 0 && checkboxSelectAll.is(':checked');\n\t\tif (ifSelectAllIsChecked) {\n\t\t\tselectedIds.push('all');\n\t\t} else if (selectedUsers.length > 0) {\n\t\t\tselectedUsers.each(function () {\n\t\t\t\tselectedIds.push($(this).val());\n\t\t\t});\n\t\t}\n\t\tif (selectedUsersAjax.length > 0) {\n\t\t\tselectedIds = selectedUsersAjax.val().concat(selectedRolesAjax.val());\n\t\t}\n\t\tif (ifSelectAllIsChecked && notSelectedUsers) {\n\t\t\tnotSelectedUsers.each(function () {\n\t\t\t\texcludedIds.push($(this).val());\n\t\t\t});\n\t\t}\n\t\tif (0 === selectedIds.length && CONFIG.userId) {\n\t\t\tselectedIds.push(CONFIG.userId);\n\t\t}\n\t\treturn { selectedIds: selectedIds, excludedIds: excludedIds };\n\t}\n\n\tgetSidebarView() {\n\t\tif (!this.sidebarView || !this.sidebarView.length) {\n\t\t\tthis.sidebarView = this.container.find('.js-calendar-right-panel');\n\t\t}\n\t\treturn this.sidebarView;\n\t}\n\n\tupdateCountTaskCalendar() {\n\t\tlet datesView = this.container.find('.js-dates-row'),\n\t\t\tsubDatesElements = datesView.find('.js-sub-record'),\n\t\t\tdateArray = {},\n\t\t\tuserDateFormat = CONFIG.dateFormat.toUpperCase(),\n\t\t\tuser = this.getSelectedUsersCalendar();\n\t\tif (user.length === 0) {\n\t\t\tuser = app.getMainParams('usersId');\n\t\t}\n\t\tif (user === undefined) {\n\t\t\tuser = [app.getMainParams('userId')];\n\t\t}\n\t\tsubDatesElements.each(function (key, element) {\n\t\t\tlet data = $(this).data('date'),\n\t\t\t\ttype = $(this).data('type');\n\t\t\tif (type === 'years') {\n\t\t\t\tdateArray[key] = [\n\t\t\t\t\tmoment(data + '-01').format(userDateFormat) + ' 00:00:00',\n\t\t\t\t\tmoment(data + '-01')\n\t\t\t\t\t\t.endOf('year')\n\t\t\t\t\t\t.format(userDateFormat) + ' 23:59:59'\n\t\t\t\t];\n\t\t\t} else if (type === 'months') {\n\t\t\t\tdateArray[key] = [\n\t\t\t\t\tmoment(data).format(userDateFormat) + ' 00:00:00',\n\t\t\t\t\tmoment(data).endOf('month').format(userDateFormat) + ' 23:59:59'\n\t\t\t\t];\n\t\t\t} else if (type === 'weeks') {\n\t\t\t\tdateArray[key] = [\n\t\t\t\t\tmoment(data).format(userDateFormat) + ' 00:00:00',\n\t\t\t\t\tmoment(data).add(6, 'day').format(userDateFormat) + ' 23:59:59'\n\t\t\t\t];\n\t\t\t} else if (type === 'days') {\n\t\t\t\tdateArray[key] = [\n\t\t\t\t\tmoment(data).format(userDateFormat) + ' 00:00:00',\n\t\t\t\t\tmoment(data).format(userDateFormat) + ' 23:59:59'\n\t\t\t\t];\n\t\t\t}\n\t\t});\n\t\tAppConnector.request({\n\t\t\tmodule: this.module,\n\t\t\taction: 'Calendar',\n\t\t\tmode: 'getCountEventsGroup',\n\t\t\tdates: dateArray,\n\t\t\tuser: user,\n\t\t\ttime: app.getMainParams('showType'),\n\t\t\tcvid: this.getCurrentCvId()\n\t\t}).done(function (events) {\n\t\t\tsubDatesElements.each(function (key, element) {\n\t\t\t\t$(this).find('.js-count-events').removeClass('hide').html(events.result[key]);\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Register events to EditView\n\t * @param {jQuery} sideBar\n\t */\n\tregisterEditForm(sideBar) {\n\t\tlet editViewInstance = Vtiger_Edit_Js.getInstanceByModuleName(sideBar.find('[name=\"module\"]').val()),\n\t\t\tparams = [];\n\t\tlet rightFormCreate = sideBar.find('form.js-form');\n\t\teditViewInstance.registerBasicEvents(rightFormCreate);\n\t\trightFormCreate.validationEngine(app.validationEngineOptions);\n\t\tApp.Fields.Picklist.showSelect2ElementView(sideBar.find('select'));\n\t\tsideBar.find('.js-summary-close-edit').on('click', () => {\n\t\t\tthis.getCalendarCreateView();\n\t\t});\n\t\tparams.callbackFunction = this.registerAfterSubmitForm(this, rightFormCreate);\n\t\tApp.Components.QuickCreate.registerPostLoadEvents(rightFormCreate, params);\n\t\tnew App.Fields.Text.Editor(sideBar.find('.js-editor'), { height: '5em', toolbar: 'Min' });\n\t}\n\n\t/**\n\t * EditView\n\t * @param {Object}|{number} params\n\t */\n\tgetCalendarSidebarData(params) {\n\t\tconst thisInstance = this,\n\t\t\taDeferred = $.Deferred();\n\t\tconst progressInstance = $.progressIndicator({ blockInfo: { enabled: true } });\n\t\tif ($.isNumeric(params)) {\n\t\t\tparams = {\n\t\t\t\tmodule: this.module,\n\t\t\t\tview: 'EventForm',\n\t\t\t\trecord: params\n\t\t\t};\n\t\t}\n\t\tAppConnector.request(params)\n\t\t\t.done((data) => {\n\t\t\t\tthisInstance.openRightPanel();\n\t\t\t\tprogressInstance.progressIndicator({ mode: 'hide' });\n\t\t\t\tlet sidebar = thisInstance.getSidebarView();\n\t\t\t\tthis.updateSidebar(sidebar, data);\n\t\t\t\tif (sidebar.find('form').length) {\n\t\t\t\t\tthisInstance.registerEditForm(sidebar);\n\t\t\t\t} else {\n\t\t\t\t\tapp.showNewScrollbar(sidebar.find('.js-calendar__form__wrapper'), {\n\t\t\t\t\t\tsuppressScrollX: true\n\t\t\t\t\t});\n\t\t\t\t\tsidebar.find('.js-activity-state .js-summary-close-edit').on('click', function () {\n\t\t\t\t\t\tthisInstance.getCalendarCreateView();\n\t\t\t\t\t});\n\t\t\t\t\tsidebar.find('.js-activity-state .editRecord').on('click', function () {\n\t\t\t\t\t\tthisInstance.getCalendarSidebarData($(this).data('id'));\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\taDeferred.resolve(sidebar.find('.js-qc-form'));\n\t\t\t})\n\t\t\t.fail((error) => {\n\t\t\t\tprogressInstance.progressIndicator({ mode: 'hide' });\n\t\t\t\tapp.errorLog(error);\n\t\t\t});\n\t\treturn aDeferred.promise();\n\t}\n\n\t/**\n\t * Update sidebar\n\t * @param {jQuery} sidebar\n\t * @param {html} data\n\t */\n\tupdateSidebar(sidebar, data) {\n\t\tsidebar.find('.js-qc-form').html(data);\n\t\tthis.showRightPanelForm();\n\t}\n\tloadCalendarData(view = this.getCalendarView().fullCalendar('getView')) {\n\t\tconst self = this;\n\t\tlet formatDate = CONFIG.dateFormat.toUpperCase(),\n\t\t\tcvid = self.getCurrentCvId(),\n\t\t\tcalendarInstance = this.getCalendarView();\n\t\tcalendarInstance.fullCalendar('removeEvents');\n\t\tlet progressInstance = $.progressIndicator({ blockInfo: { enabled: true } }),\n\t\t\tuser = JSON.stringify(self.getSelectedUsersCalendar());\n\t\tself.clearFilterButton(user, cvid);\n\t\tif (view.type === 'agendaDay') {\n\t\t\tview.end = view.end.add(1, 'day');\n\t\t}\n\t\tlet time = this.getSidebarView().find('.js-switch--showType input:checked').data('val');\n\t\tlet options = {\n\t\t\tmodule: this.module,\n\t\t\taction: 'Calendar',\n\t\t\tmode: 'getEvents',\n\t\t\tstart: view.start.format(formatDate),\n\t\t\tend: view.end.format(formatDate),\n\t\t\tuser: user,\n\t\t\ttime: time !== undefined ? time : app.getMainParams('showType'),\n\t\t\tcvid: cvid,\n\t\t\thistoryUrl: `index.php?module=${this.module}&view=CalendarExtended&history=true&viewType=${\n\t\t\t\tview.type\n\t\t\t}&start=${view.start.format(formatDate)}&end=${view.end.format(formatDate)}&user=${user}&time=${app.getMainParams(\n\t\t\t\t'showType'\n\t\t\t)}&cvid=${cvid}&hiddenDays=${view.options.hiddenDays}`\n\t\t};\n\n\t\tlet connectorMethod = window['AppConnector']['request'];\n\t\tif (this.browserHistory && window.calendarLoaded) {\n\t\t\tconnectorMethod = window['AppConnector']['requestPjax'];\n\t\t}\n\t\tif (this.browserHistoryConfig && Object.keys(this.browserHistoryConfig).length && !window.calendarLoaded) {\n\t\t\toptions = Object.assign(options, {\n\t\t\t\tstart: this.browserHistoryConfig.start,\n\t\t\t\tend: this.browserHistoryConfig.end,\n\t\t\t\tuser: this.browserHistoryConfig.user,\n\t\t\t\ttime: this.browserHistoryConfig.time,\n\t\t\t\tcvid: this.browserHistoryConfig.cvid\n\t\t\t});\n\t\t\tconnectorMethod = window['AppConnector']['request'];\n\t\t\tapp.setMainParams('showType', this.browserHistoryConfig.time);\n\t\t\tapp.setMainParams('usersId', this.browserHistoryConfig.user);\n\t\t}\n\t\tconnectorMethod(options).done((events) => {\n\t\t\tcalendarInstance.fullCalendar('removeEvents');\n\t\t\tcalendarInstance.fullCalendar('addEventSource', events.result);\n\t\t\tprogressInstance.progressIndicator({ mode: 'hide' });\n\t\t});\n\t\tself.registerViewRenderEvents(view);\n\t\twindow.calendarLoaded = true;\n\t}\n\n\tclearFilterButton(user, cvid) {\n\t\tlet currentUser = parseInt(app.getMainParams('userId')),\n\t\t\ttime = app.getMainParams('showType'),\n\t\t\tstatement =\n\t\t\t\t(user.length === 0 || (user.length === 1 && parseInt(user) === currentUser)) &&\n\t\t\t\tcvid === undefined &&\n\t\t\t\ttime === 'current';\n\t\t$('.js-calendar__clear-filters').toggleClass('d-none', statement);\n\t}\n\n\tregisterClearFilterButton() {\n\t\tconst sidebar = this.getSidebarView(),\n\t\t\tcalendarView = this.getCalendarView();\n\t\tlet clearBtn = calendarView.find('.js-calendar__clear-filters');\n\t\tapp.showPopoverElementView(clearBtn);\n\t\tclearBtn.on('click', () => {\n\t\t\t$('.js-calendar__extended-filter-tab a').removeClass('active');\n\t\t\tapp.setMainParams('showType', 'current');\n\t\t\tapp.moduleCacheSet('defaultShowType', 'current');\n\t\t\tsidebar.find('input:checkbox').prop('checked', false);\n\t\t\tsidebar.find('option:selected').prop('selected', false);\n\t\t\tlet calendarSwitch = sidebar.find('.js-switch--showType [class*=\"js-switch--label\"]'),\n\t\t\t\tactualUserCheckbox = sidebar.find('.js-input-user-owner-id[value=' + app.getMainParams('userId') + ']');\n\t\t\tcalendarSwitch.last().removeClass('active');\n\t\t\tcalendarSwitch.first().addClass('active');\n\t\t\t$('input[data-val=\"current\"]', calendarSwitch).prop('checked', true);\n\t\t\tif (actualUserCheckbox.length) {\n\t\t\t\tactualUserCheckbox.prop('checked', true);\n\t\t\t} else {\n\t\t\t\tapp.setMainParams('usersId', undefined);\n\t\t\t}\n\t\t\tcalendarView.fullCalendar('getCalendar').view.options.loadView();\n\t\t});\n\t}\n\n\tgenerateYearList(dateStart, dateEnd) {\n\t\tconst datesView = this.container.find('.js-dates-row');\n\t\tlet prevYear = moment(dateStart).subtract(1, 'year'),\n\t\t\tactualYear = moment(dateStart),\n\t\t\tnextYear = moment(dateStart).add(1, 'year'),\n\t\t\thtml = '',\n\t\t\tactive = '';\n\t\twhile (prevYear <= nextYear) {\n\t\t\tif (prevYear.format('YYYY') === actualYear.format('YYYY')) {\n\t\t\t\tactive = 'active';\n\t\t\t} else {\n\t\t\t\tactive = '';\n\t\t\t}\n\t\t\thtml += `<div class=\"js-sub-record sub-record col-4 nav-item\" data-date=\"${prevYear.format(\n\t\t\t\t'YYYY'\n\t\t\t)}\" data-type=\"years\" data-js=\"click | class: active\">\n\t\t\t\t\t<div class=\"sub-record-content nav-link ${active}\">\n\t\t\t\t\t\t<div class=\"sub-date-name\">\n\t\t\t\t\t\t\t${prevYear.format('YYYY')}\n\t\t\t\t\t\t\t<div class=\"js-count-events count badge c-badge--md ml-1\" data-js=\"html\">0</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>`;\n\t\t\tprevYear = moment(prevYear).add(1, 'year');\n\t\t}\n\t\tdatesView.find('.js-sub-date-list').html(html);\n\t}\n\n\tgenerateSubMonthList(dateStart, dateEnd) {\n\t\tlet datesView = this.container.find('.js-dates-row'),\n\t\t\tactiveMonth = parseInt(moment(dateStart).locale('en').format('M')) - 1,\n\t\t\thtml = '',\n\t\t\tactive = '';\n\t\tfor (let month = 0; 12 > month; ++month) {\n\t\t\tif (month === activeMonth) {\n\t\t\t\tactive = 'active';\n\t\t\t} else {\n\t\t\t\tactive = '';\n\t\t\t}\n\t\t\thtml += `<div class=\"js-sub-record sub-record nav-item col-1 px-0\" data-type=\"months\" data-date=\"${moment(\n\t\t\t\tdateStart\n\t\t\t)\n\t\t\t\t.month(month)\n\t\t\t\t.format('YYYY-MM')}\" data-js=\"click | class: active\">\n\t\t\t\t\t<div class=\"sub-record-content nav-link ${active}\">\n\t\t\t\t\t\t<div class=\"sub-date-name\">${App.Fields.Date.monthsTranslated[month]}\n\t\t\t\t\t\t\t<div class=\"js-count-events count badge c-badge--md ml-1\" data-js=\"html\">0</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>`;\n\t\t}\n\t\tdatesView.find('.js-sub-date-list').html(html);\n\t}\n\n\tgenerateSubWeekList(dateStart, dateEnd) {\n\t\tlet datesView = this.container.find('.js-dates-row'),\n\t\t\tprevWeeks = moment(dateStart).subtract(5, 'weeks'),\n\t\t\tactualWeek = moment(dateStart).format('WW'),\n\t\t\tnextWeeks = moment(dateStart).add(6, 'weeks'),\n\t\t\thtml = '';\n\t\twhile (prevWeeks <= nextWeeks) {\n\t\t\tlet active = '';\n\t\t\tif (prevWeeks.format('WW') === actualWeek) {\n\t\t\t\tactive = ' active';\n\t\t\t}\n\t\t\thtml +=\n\t\t\t\t'<div class=\"js-sub-record sub-record nav-item col-1 px-0\" data-type=\"weeks\" data-date=\"' +\n\t\t\t\tprevWeeks.format('YYYY-MM-DD') +\n\t\t\t\t'\" data-js=\"click | class: active\">' +\n\t\t\t\t'<div class=\"sub-record-content nav-link' +\n\t\t\t\tactive +\n\t\t\t\t'\">' +\n\t\t\t\t'<div class=\"sub-date-name\">' +\n\t\t\t\tapp.vtranslate('JS_WEEK_SHORT') +\n\t\t\t\t' ' +\n\t\t\t\tprevWeeks.format('WW') +\n\t\t\t\t'<div class=\"js-count-events count badge c-badge--md ml-1\" data-js=\"html\">0</div>' +\n\t\t\t\t'</div>' +\n\t\t\t\t'</div>' +\n\t\t\t\t'</div>';\n\t\t\tprevWeeks = moment(prevWeeks).add(1, 'weeks');\n\t\t}\n\t\tdatesView.find('.js-sub-date-list').html(html);\n\t}\n\n\tgenerateSubDaysList(dateStart, dateEnd) {\n\t\tlet datesView = this.container.find('.js-dates-row'),\n\t\t\tprevDays = moment(dateStart).subtract(5, 'days'),\n\t\t\tactualDay = moment(dateStart).format('DDD'),\n\t\t\tnextDays = moment(dateStart).add(7, 'days'),\n\t\t\tdaysToShow = nextDays.diff(prevDays, 'days'),\n\t\t\thtml = '';\n\t\tfor (let day = 0; day < daysToShow; ++day) {\n\t\t\tlet active = '';\n\t\t\tif (app.getMainParams('switchingDays') === 'workDays' && app.moduleCacheGet('defaultSwitchingDays') !== 'all') {\n\t\t\t\tif ($.inArray(prevDays.day(), app.getMainParams('hiddenDays', true)) !== -1) {\n\t\t\t\t\tprevDays = moment(prevDays).add(1, 'days');\n\t\t\t\t\tdaysToShow++;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (prevDays.format('DDD') === actualDay) {\n\t\t\t\tactive = ' active';\n\t\t\t}\n\t\t\thtml +=\n\t\t\t\t'<div class=\"js-sub-record sub-record nav-item col-1 px-0\" data-type=\"days\" data-date=\"' +\n\t\t\t\tprevDays.format('YYYY-MM-DD') +\n\t\t\t\t'\" data-js=\"click | class: active\">' +\n\t\t\t\t'<div class=\"sub-record-content nav-link' +\n\t\t\t\tactive +\n\t\t\t\t'\">' +\n\t\t\t\t'<div class=\"sub-date-name\">' +\n\t\t\t\tapp.vtranslate('JS_DAY_SHORT') +\n\t\t\t\t' ' +\n\t\t\t\tprevDays.format('DD') +\n\t\t\t\t'<div class=\"js-count-events count badge c-badge--md ml-1\" data-js=\"html\">0</div>' +\n\t\t\t\t'</div>' +\n\t\t\t\t'</div>' +\n\t\t\t\t'</div>';\n\t\t\tprevDays = moment(prevDays).add(1, 'days');\n\t\t}\n\t\tdatesView.find('.js-sub-date-list').html(html);\n\t}\n\n\tselectDays(startDate, endDate) {\n\t\tlet container = this.container;\n\t\tcontainer.find('.js-right-panel-event-link').tab('show');\n\t\tlet start_hour = app.getMainParams('startHour'),\n\t\t\tend_hour = app.getMainParams('endHour'),\n\t\t\tview = this.getCalendarView().fullCalendar('getView');\n\t\tif (endDate.hasTime() == false) {\n\t\t\tendDate.add(-1, 'days');\n\t\t}\n\t\tstartDate = startDate.format();\n\t\tendDate = endDate.format();\n\t\tif (start_hour == '') {\n\t\t\tstart_hour = '00';\n\t\t}\n\t\tif (end_hour == '') {\n\t\t\tend_hour = '00';\n\t\t}\n\t\tthis.getCalendarCreateView().done(function (data) {\n\t\t\tif (data.length <= 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (view.name != 'agendaDay' && view.name != 'agendaWeek') {\n\t\t\t\tstartDate = startDate + 'T' + start_hour + ':00';\n\t\t\t\tendDate = endDate + 'T' + end_hour + ':00';\n\t\t\t\tif (startDate == endDate) {\n\t\t\t\t\tlet activityType = container.find('[name=\"activitytype\"]');\n\t\t\t\t\tlet activityTypeValue = activityType.val();\n\t\t\t\t\tif (activityType.is('[type=\"radio\"]')) {\n\t\t\t\t\t\tactivityTypeValue = activityType.filter(':checked').val();\n\t\t\t\t\t}\n\t\t\t\t\tlet activityDurations = JSON.parse(data.find('[name=\"defaultOtherEventDuration\"]').val());\n\t\t\t\t\tlet minutes = 0;\n\t\t\t\t\tfor (let i in activityDurations) {\n\t\t\t\t\t\tif (activityDurations[i].activitytype === activityTypeValue) {\n\t\t\t\t\t\t\tminutes = parseInt(activityDurations[i].duration);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tendDate = moment(endDate).add(minutes, 'minutes').toISOString();\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet dateFormat = data.find('[name=\"date_start\"]').data('dateFormat').toUpperCase(),\n\t\t\t\ttimeFormat = data.find('[name=\"time_start\"]').data('format'),\n\t\t\t\tdefaultTimeFormat = '';\n\t\t\tif (timeFormat == 24) {\n\t\t\t\tdefaultTimeFormat = 'HH:mm';\n\t\t\t} else {\n\t\t\t\tdefaultTimeFormat = 'hh:mm A';\n\t\t\t}\n\t\t\tdata.find('[name=\"date_start\"]').val(moment(startDate).format(dateFormat));\n\t\t\tdata.find('[name=\"due_date\"]').val(moment(endDate).format(dateFormat));\n\t\t\tif (data.find('.js-autofill').prop('checked') === true) {\n\t\t\t\tCalendar_Edit_Js.getInstance().getFreeTime(data);\n\t\t\t} else {\n\t\t\t\tdata.find('[name=\"time_start\"]').val(moment(startDate).format(defaultTimeFormat));\n\t\t\t\tdata.find('[name=\"time_end\"]').val(moment(endDate).format(defaultTimeFormat));\n\t\t\t}\n\t\t});\n\t}\n\n\tregisterUsersChange(formContainer) {\n\t\tformContainer.find('.js-input-user-owner-id-ajax, .js-input-user-owner-id').on('change', () => {\n\t\t\tthis.getCalendarView().fullCalendar('getCalendar').view.options.loadView();\n\t\t});\n\t\tthis.registerPinUser();\n\t}\n\t/**\n\t * Register change on select all checkbox\n\t * @param {jQuery} formContainer\n\t */\n\tregisterSelectAll(formContainer) {\n\t\tformContainer.find('.js-select-all').on('change', (e) => {\n\t\t\tlet checkboxSelectAll = $(e.currentTarget);\n\t\t\tlet checkboxes = formContainer.find('.js-input-user-owner-id-ajax, .js-input-user-owner-id');\n\t\t\tif (checkboxSelectAll.is(':checked')) {\n\t\t\t\tcheckboxes.prop('checked', true);\n\t\t\t} else {\n\t\t\t\tcheckboxes.prop('checked', false);\n\t\t\t\tformContainer.find('#ownerId' + CONFIG.userId).prop('checked', true);\n\t\t\t}\n\t\t\tlet calendar = this.getCalendarView().fullCalendar('getCalendar');\n\t\t\tif (calendar) {\n\t\t\t\tcalendar.view.options.loadView();\n\t\t\t}\n\t\t});\n\t\tthis.registerPinUser();\n\t}\n\n\t/**\n\t * Register actions to do after save record\n\t * @param instance\n\t * @param data\n\t * @returns {function}\n\t */\n\tregisterAfterSubmitForm(self, data) {\n\t\tconst calendarView = this.getCalendarView();\n\t\tlet returnFunction = function (data) {\n\t\t\tif (data.success) {\n\t\t\t\tlet recordActivityStatus = data.result.activitystatus.value,\n\t\t\t\t\thistoryStatus = app.getMainParams('activityStateLabels', true).history,\n\t\t\t\t\tinHistoryStatus = $.inArray(recordActivityStatus, historyStatus),\n\t\t\t\t\tshowType = app.getMainParams('showType');\n\t\t\t\tif ((-1 !== inHistoryStatus && 'history' === showType) || (-1 === inHistoryStatus && 'history' !== showType)) {\n\t\t\t\t\tif (calendarView.fullCalendar('clientEvents', data.result._recordId)[0]) {\n\t\t\t\t\t\tself.updateCalendarEvent(data.result._recordId, data.result);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst calendarInstance = calendarView.fullCalendar('getCalendar');\n\t\t\t\t\t\tif (calendarInstance.view.type !== 'year') {\n\t\t\t\t\t\t\tcalendarInstance.view.options.addCalendarEvent(data.result);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcalendarInstance.view.render();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (data.result.followup && data.result.followup.value !== undefined) {\n\t\t\t\t\t\t\tcalendarView.fullCalendar('removeEvents', data.result.followup.value);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tself.refreshDatesRowView(calendarView.fullCalendar('getView'));\n\t\t\t\tself.getSidebarView().find('.js-qc-form').html('');\n\t\t\t\tself.getCalendarCreateView();\n\t\t\t\twindow.popoverCache = {};\n\t\t\t}\n\t\t};\n\t\treturn returnFunction;\n\t}\n\n\topenRightPanel() {\n\t\tlet calendarRightPanel = $('.js-calendar-right-panel');\n\t\tif (calendarRightPanel.hasClass('hideSiteBar')) {\n\t\t\tcalendarRightPanel.find('.js-toggle-site-bar-right-button').trigger('click');\n\t\t}\n\t}\n\n\tshowRightPanelForm() {\n\t\tlet calendarRightPanel = $('.js-calendar-right-panel');\n\t\tif (!calendarRightPanel.find('.js-right-panel-event').hasClass('active')) {\n\t\t\tcalendarRightPanel.find('.js-right-panel-event-link').trigger('click');\n\t\t}\n\t\tapp.showNewScrollbar(calendarRightPanel.find('.js-calendar__form__wrapper'), {\n\t\t\tsuppressScrollX: true\n\t\t});\n\t}\n\n\tregisterSiteBarEvents() {\n\t\tlet calendarRightPanel = $('.js-calendar-right-panel');\n\t\tcalendarRightPanel.find('.js-show-sitebar').on('click', () => {\n\t\t\tif (calendarRightPanel.hasClass('hideSiteBar')) {\n\t\t\t\tcalendarRightPanel.find('.js-toggle-site-bar-right-button').trigger('click');\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Parse calendar data\n\t * @param {Object} calendarDetails\n\t * @returns {{id: *, title: *, start: *, end: *, module: string, url: string, className: string[], start_display: *, end_display: *}}\n\t */\n\tgetEventData(calendarDetails) {\n\t\tlet calendar = this.getCalendarView(),\n\t\t\tstartDate = calendar.fullCalendar(\n\t\t\t\t'moment',\n\t\t\t\tcalendarDetails.date_start.value + ' ' + calendarDetails.time_start.value\n\t\t\t),\n\t\t\tendDate = calendar.fullCalendar('moment', calendarDetails.due_date.value + ' ' + calendarDetails.time_end.value),\n\t\t\teventObject = {\n\t\t\t\tid: calendarDetails._recordId,\n\t\t\t\ttitle: calendarDetails.subject.display_value,\n\t\t\t\tstart: startDate.format(),\n\t\t\t\tend: endDate.format(),\n\t\t\t\tmodule: this.module,\n\t\t\t\turl: `index.php?module=${this.module}&view=ActivityState&record=${calendarDetails._recordId}`,\n\t\t\t\tclassName: [\n\t\t\t\t\t'ownerCBg_' + calendarDetails.assigned_user_id.value,\n\t\t\t\t\t' picklistCBr_Calendar_activitytype_' + calendarDetails.activitytype.value,\n\t\t\t\t\t'js-popover-tooltip--record'\n\t\t\t\t],\n\t\t\t\tstart_display: calendarDetails.date_start.display_value,\n\t\t\t\tend_display: calendarDetails.due_date.display_value\n\t\t\t};\n\t\tif (calendarDetails.isEditable && app.getMainParams('showEditForm')) {\n\t\t\teventObject.url = `index.php?module=${this.module}&view=EventForm&record=${eventObject.id}`;\n\t\t}\n\t\treturn eventObject;\n\t}\n\n\t/**\n\t * Update Event\n\t * @param {Number} calendarEventId\n\t * @param {Object} calendarDetails\n\t */\n\tupdateCalendarEvent(calendarEventId, calendarDetails) {\n\t\tconst calendar = this.getCalendarView();\n\t\tlet recordToUpdate = calendar.fullCalendar('clientEvents', calendarEventId)[0];\n\t\t$.extend(recordToUpdate, this.getEventData(calendarDetails));\n\t\tcalendar.fullCalendar('updateEvent', recordToUpdate);\n\t}\n\n\tgetCalendarCreateView() {\n\t\tlet aDeferred = $.Deferred();\n\t\tif (this.eventCreate) {\n\t\t\tconst thisInstance = this;\n\t\t\tlet sideBar = thisInstance.getSidebarView(),\n\t\t\t\tqcForm = sideBar.find('.js-qc-form');\n\t\t\tif (qcForm.find('form').length > 0 && qcForm.find('input[name=record]').length === 0) {\n\t\t\t\taDeferred.resolve(qcForm);\n\t\t\t} else {\n\t\t\t\tlet progressInstance = $.progressIndicator({ blockInfo: { enabled: true } });\n\t\t\t\tthis.getCalendarSidebarData({ module: this.module, view: 'EventForm' })\n\t\t\t\t\t.done(() => {\n\t\t\t\t\t\tprogressInstance.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tthisInstance.registerAutofillTime();\n\t\t\t\t\t\taDeferred.resolve(qcForm);\n\t\t\t\t\t})\n\t\t\t\t\t.fail((error) => {\n\t\t\t\t\t\tprogressInstance.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tapp.errorLog(error);\n\t\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\taDeferred.reject();\n\t\t}\n\t\treturn aDeferred.promise();\n\t}\n\n\t/**\n\t * Autoselect date in create view in extended calendar\n\t */\n\tregisterAutofillTime() {\n\t\tif (app.getMainParams('autofillTime')) {\n\t\t\tthis.container.find('.js-autofill').prop('checked', 'checked').trigger('change');\n\t\t}\n\t}\n\n\tregisterPinUser() {\n\t\t$('.js-pin-user')\n\t\t\t.off('click')\n\t\t\t.on('click', function () {\n\t\t\t\tconst thisInstance = $(this);\n\t\t\t\tAppConnector.request({\n\t\t\t\t\tmodule: this.module,\n\t\t\t\t\taction: 'Calendar',\n\t\t\t\t\tmode: 'pinOrUnpinUser',\n\t\t\t\t\telement_id: thisInstance.data('elementid')\n\t\t\t\t}).done((data) => {\n\t\t\t\t\tlet response = data.result;\n\t\t\t\t\tif (response === 'unpin') {\n\t\t\t\t\t\tthisInstance.find('.js-pin-icon').removeClass('fas').addClass('far');\n\t\t\t\t\t} else if (response === 'pin') {\n\t\t\t\t\t\tthisInstance.find('.js-pin-icon').removeClass('far').addClass('fas');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\ttext: app.vtranslate('JS_ERROR'),\n\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t}\n\n\t/**\n\t * Find element on list (user, group)\n\t * @param {jQuery.Event} e\n\t */\n\tfindElementOnList(e) {\n\t\tlet target = $(e.target),\n\t\t\tvalue = target.val().toLowerCase(),\n\t\t\tcontainer = target.closest('.js-filter__container');\n\t\tcontainer.find('.js-filter__item__value').filter(function () {\n\t\t\tlet item = $(this).closest('.js-filter__item__container');\n\t\t\tif ($(this).text().trim().toLowerCase().indexOf(value) > -1) {\n\t\t\t\titem.removeClass('d-none');\n\t\t\t} else {\n\t\t\t\titem.addClass('d-none');\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Register filter for users and groups\n\t * @param {jQuery} container\n\t */\n\tregisterFilterForm(container) {\n\t\tcontainer.find('.js-filter__search').on('keyup', this.findElementOnList.bind(self));\n\t}\n\n\t/**\n\t * Register popover buttons' click\n\t */\n\tregisterPopoverButtonsClickEvent() {\n\t\t$(document).on('click', '.js-calendar-popover__button', this.showCalendarPopoverLinkInSidebar.bind(this));\n\t}\n\n\t/**\n\t * Show popover link in sidebar\n\t *\n\t * @param   {Object}  e  click event\n\t */\n\tshowCalendarPopoverLinkInSidebar(e) {\n\t\tlet href = e.currentTarget.href;\n\t\tconst hrefObject = app.convertUrlToObject(href);\n\t\tif (hrefObject.module !== 'Calendar' || (hrefObject.view !== 'Edit' && hrefObject.view !== 'Detail')) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\te.preventDefault();\n\t\t\tconst sidebarView = hrefObject.view === 'Edit' ? 'EventForm' : 'ActivityState';\n\t\t\thref = href.replace(hrefObject.view, sidebarView);\n\t\t\tthis.getCalendarSidebarData(href);\n\t\t}\n\t}\n\n\t/**\n\t * Register events\n\t */\n\tregisterEvents() {\n\t\tsuper.registerEvents();\n\t\tthis.registerSiteBarEvents();\n\t\tthis.registerPopoverButtonsClickEvent();\n\t\tElementQueries.listen();\n\t\tthis.getCalendarCreateView();\n\t}\n};\n"],"names":["window","calendarLoaded","Calendar_CalendarExtended_Js","container","readonly","sidebarView","length","calendarContainer","addCommonMethodsToYearView","calendar","getCalendarView","self","FC","views","year","extend","baseInstance","selectDays","getCalendarCreateView","getSidebarView","getCurrentCvId","showRightPanelForm","getSelectedUsersCalendar","registerClearFilterButton","clearFilterButton","registerFilterTabChange","registerAfterSubmitForm","registerViewRenderEvents","appendSubDateRow","refreshDatesRowView","generateYearList","updateCountTaskCalendar","registerDatesChange","addHeaderButtons","browserHistoryConfig","module","showChangeDateButtons","showTodayButtonCheckbox","getDefaultParams","basicOptions","setCalendarOptions","options","header","left","app","getMainParams","center","right","basic","eventLimit","eventLimitText","vtranslate","titleFormat","select","loadView","fullCalendar","view","render","month","parseDateFormat","loadCalendarData","week","day","basicDay","type","start","end","eventRender","event","element","eventRenderer","viewRender","addCalendarEvent","calendarDetails","getEventData","Object","assign","eventClick","eventEdit","calEvent","jsEvent","preventDefault","getCalendarSidebarData","$","attr","link","URL","href","location","searchParams","get","find","buttonsContainer","prev","viewBtn","clone","filters","prepend","after","changeDaysState","changeType","calendarView","switchContainer","switchShowType","showTypeState","switchSwitchingDays","switchingDaysState","data","historyParams","time","hiddenDays","on","e","currentTarget","setMainParams","moduleCacheSet","trigger","setCalendarHeight","toolbar","subDateRow","append","width","breakpoints","lg","showNewScrollbar","todayButton","todyButtonIcon","hasClass","popoverContent","text","toLowerCase","removeClass","html","showPopoverElementView","content","viewType","replace","nextPrevButtons","yearButtons","first","buttonText","last","hide","show","intervalStart","intervalEnd","generateSubMonthList","generateSubWeekList","generateSubDaysList","addClass","moment","parent","thisInstance","sidebar","selectedUsers","notSelectedUsers","selectedUsersAjax","selectedRolesAjax","checkboxSelectAll","selectedIds","excludedIds","ifSelectAllIsChecked","is","push","each","val","concat","CONFIG","userId","datesView","subDatesElements","dateArray","userDateFormat","dateFormat","toUpperCase","user","key","format","endOf","add","AppConnector","request","action","mode","dates","cvid","done","events","result","sideBar","editViewInstance","Vtiger_Edit_Js","getInstanceByModuleName","params","rightFormCreate","registerBasicEvents","validationEngine","validationEngineOptions","App","Fields","Picklist","showSelect2ElementView","callbackFunction","Components","QuickCreate","registerPostLoadEvents","Text","Editor","height","aDeferred","Deferred","progressInstance","progressIndicator","blockInfo","enabled","isNumeric","record","openRightPanel","updateSidebar","registerEditForm","suppressScrollX","resolve","fail","error","errorLog","promise","formatDate","calendarInstance","JSON","stringify","historyUrl","connectorMethod","browserHistory","keys","currentUser","parseInt","statement","toggleClass","clearBtn","prop","calendarSwitch","actualUserCheckbox","dateStart","prevYear","subtract","actualYear","nextYear","active","activeMonth","locale","Date","monthsTranslated","prevWeeks","actualWeek","nextWeeks","prevDays","actualDay","nextDays","daysToShow","diff","moduleCacheGet","inArray","startDate","endDate","tab","start_hour","end_hour","hasTime","name","activityType","activityTypeValue","filter","activityDurations","parse","minutes","i","activitytype","duration","toISOString","timeFormat","defaultTimeFormat","Calendar_Edit_Js","getInstance","getFreeTime","formContainer","registerPinUser","checkboxes","returnFunction","success","recordActivityStatus","activitystatus","value","historyStatus","history","inHistoryStatus","showType","_recordId","updateCalendarEvent","followup","popoverCache","calendarRightPanel","date_start","time_start","due_date","time_end","eventObject","id","title","subject","display_value","url","className","assigned_user_id","start_display","end_display","isEditable","calendarEventId","recordToUpdate","eventCreate","qcForm","registerAutofillTime","reject","off","element_id","response","showNotify","target","closest","item","trim","indexOf","findElementOnList","bind","document","showCalendarPopoverLinkInSidebar","hrefObject","convertUrlToObject","registerSiteBarEvents","registerPopoverButtonsClickEvent","ElementQueries","listen","Calendar_Calendar_Js"],"mappings":"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"}