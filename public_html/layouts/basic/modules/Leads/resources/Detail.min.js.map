{"version":3,"file":"Detail.min.js","sources":["Detail.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n * Contributor(s): YetiForce S.A.\n *************************************************************************************/\n'use strict';\n\nVtiger_Detail_Js(\n\t'Leads_Detail_Js',\n\t{\n\t\t//cache will store the convert lead data(Model)\n\t\tcache: {},\n\t\t//Holds detail view instance\n\t\tdetailCurrentInstance: false,\n\t\t/*\n\t\t * function to trigger Convert Lead action\n\t\t * @param: Convert Lead url, currentElement.\n\t\t */\n\t\tconvertLead: function (convertLeadUrl, buttonElement) {\n\t\t\tvar instance = Leads_Detail_Js.detailCurrentInstance;\n\t\t\t//Initially clear the elements to overwtite earliear cache\n\t\t\tinstance.convertLeadContainer = false;\n\t\t\tinstance.convertLeadForm = false;\n\t\t\tinstance.convertLeadModules = false;\n\t\t\tif (jQuery.isEmptyObject(Leads_Detail_Js.cache)) {\n\t\t\t\tAppConnector.request(convertLeadUrl).done(\n\t\t\t\t\tfunction (data) {\n\t\t\t\t\t\tif (data) {\n\t\t\t\t\t\t\tLeads_Detail_Js.cache = data;\n\t\t\t\t\t\t\tinstance.displayConvertLeadModel(data, buttonElement);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tfunction (error, err) {}\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tinstance.displayConvertLeadModel(Leads_Detail_Js.cache, buttonElement);\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t//Contains the convert lead form\n\t\tconvertLeadForm: false,\n\t\t//contains the convert lead container\n\t\tconvertLeadContainer: false,\n\t\t//contains all the checkbox elements of modules\n\t\tconvertLeadModules: false,\n\t\t//constructor\n\t\tinit: function () {\n\t\t\tthis._super();\n\t\t\tLeads_Detail_Js.detailCurrentInstance = this;\n\t\t},\n\t\t/*\n\t\t * function to disable the Convert Lead button\n\t\t */\n\t\tdisableConvertLeadButton: function (button) {\n\t\t\tjQuery(button).attr('disabled', 'disabled');\n\t\t},\n\t\t/*\n\t\t * function to enable the Convert Lead button\n\t\t */\n\t\tenableConvertLeadButton: function (button) {\n\t\t\tjQuery(button).removeAttr('disabled');\n\t\t},\n\t\t/*\n\t\t * function to enable all the input and textarea elements\n\t\t */\n\t\tremoveDisableAttr: function (moduleBlock) {\n\t\t\tmoduleBlock.find('input,textarea,select').removeAttr('disabled');\n\t\t},\n\t\t/*\n\t\t * function to disable all the input and textarea elements\n\t\t */\n\t\taddDisableAttr: function (moduleBlock) {\n\t\t\tmoduleBlock.find('input,textarea,select').attr('disabled', 'disabled');\n\t\t},\n\t\t/*\n\t\t * function to display the convert lead model\n\t\t * @param: data used to show the model, currentElement.\n\t\t */\n\t\tdisplayConvertLeadModel: function (data, buttonElement) {\n\t\t\tvar instance = this;\n\t\t\tvar errorElement = jQuery(data).find('#convertLeadError');\n\t\t\tif (errorElement.length != '0') {\n\t\t\t\tvar errorMsg = errorElement.val();\n\t\t\t\tvar errorTitle = jQuery(data).find('#convertLeadErrorTitle').val();\n\t\t\t\tvar params = {\n\t\t\t\t\ttitle: errorTitle,\n\t\t\t\t\ttext: errorMsg,\n\t\t\t\t\taddclass: 'convertLeadNotify',\n\t\t\t\t\twidth: '35%',\n\t\t\t\t\ttype: 'error',\n\t\t\t\t\tpnotify_after_open: function () {\n\t\t\t\t\t\tinstance.disableConvertLeadButton(buttonElement);\n\t\t\t\t\t},\n\t\t\t\t\tpnotify_after_close: function () {\n\t\t\t\t\t\tinstance.enableConvertLeadButton(buttonElement);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tapp.showNotify(params);\n\t\t\t} else {\n\t\t\t\tvar callBackFunction = function (data) {\n\t\t\t\t\tvar editViewObj = Vtiger_Edit_Js.getInstance();\n\t\t\t\t\tjQuery(data).find('.fieldInfo').collapse({\n\t\t\t\t\t\tparent: '#leadAccordion',\n\t\t\t\t\t\ttoggle: false\n\t\t\t\t\t});\n\t\t\t\t\teditViewObj.registerBasicEvents(data);\n\t\t\t\t\tvar checkBoxElements = instance.getConvertLeadModules();\n\t\t\t\t\tjQuery.each(checkBoxElements, function (index, element) {\n\t\t\t\t\t\tinstance.checkingModuleSelection(element);\n\t\t\t\t\t});\n\t\t\t\t\tinstance.registerForReferenceField();\n\t\t\t\t\tinstance.registerConvertLeadEvents();\n\t\t\t\t\tinstance.getConvertLeadForm().validationEngine(app.validationEngineOptions);\n\t\t\t\t\tinstance.registerConvertLeadSubmit();\n\t\t\t\t};\n\t\t\t\tapp.showModalWindow(\n\t\t\t\t\tdata,\n\t\t\t\t\tfunction (data) {\n\t\t\t\t\t\tif (typeof callBackFunction == 'function') {\n\t\t\t\t\t\t\tcallBackFunction(data);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t'text-align': 'left'\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t\t/*\n\t\t * function to check which module is selected\n\t\t * to disable or enable all the elements with in the block\n\t\t */\n\t\tcheckingModuleSelection: function (element) {\n\t\t\tvar instance = this;\n\t\t\tvar module = jQuery(element).val();\n\t\t\tvar moduleBlock = jQuery(element)\n\t\t\t\t.closest('.convertLeadModules')\n\t\t\t\t.find('#' + module + '_FieldInfo');\n\t\t\tif (jQuery(element).is(':checked')) {\n\t\t\t\tinstance.removeDisableAttr(moduleBlock);\n\t\t\t} else {\n\t\t\t\tinstance.addDisableAttr(moduleBlock);\n\t\t\t}\n\t\t},\n\t\tregisterForReferenceField: function () {\n\t\t\tvar container = this.getConvertLeadContainer();\n\t\t\tvar referenceField = jQuery('.reference', container);\n\t\t\tif (referenceField.length > 0) {\n\t\t\t\tjQuery('#AccountsModule').attr('readonly', 'readonly');\n\t\t\t}\n\t\t},\n\t\t/*\n\t\t * function to register Convert Lead Events\n\t\t */\n\t\tregisterConvertLeadEvents: function () {\n\t\t\tvar container = this.getConvertLeadContainer();\n\t\t\tvar instance = this;\n\t\t\t//Trigger Event to change the icon while shown and hidden the accordion body\n\t\t\tcontainer\n\t\t\t\t.on('hide.bs.collapse', '.js-collapse ', function (e) {\n\t\t\t\t\t$(e.currentTarget)\n\t\t\t\t\t\t.closest('.convertLeadModules')\n\t\t\t\t\t\t.find('.fas')\n\t\t\t\t\t\t.removeClass('fa-chevron-up')\n\t\t\t\t\t\t.addClass('fa-chevron-down');\n\t\t\t\t})\n\t\t\t\t.on('show.bs.collapse', '.js-collapse ', function (e) {\n\t\t\t\t\t$(e.currentTarget)\n\t\t\t\t\t\t.closest('.convertLeadModules')\n\t\t\t\t\t\t.find('.fas')\n\t\t\t\t\t\t.removeClass('fa-chevron-down')\n\t\t\t\t\t\t.addClass('fa-chevron-up');\n\t\t\t\t});\n\n\t\t\t//Trigger Event on click of Transfer related records modules\n\t\t\tcontainer.on('click', '.transferModule', function (e) {\n\t\t\t\tvar currentTarget = jQuery(e.currentTarget);\n\t\t\t\tvar module = currentTarget.val();\n\t\t\t\tvar moduleBlock = jQuery('#' + module + '_FieldInfo');\n\t\t\t\tif (currentTarget.is(':checked')) {\n\t\t\t\t\tjQuery('#' + module + 'Module').prop('checked', true);\n\t\t\t\t\tmoduleBlock.collapse('show');\n\t\t\t\t\tinstance.removeDisableAttr(moduleBlock);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t//Trigger Event on click of the Modules selection to convert the lead\n\t\t\tcontainer.on('click', '.convertLeadModuleSelection', function (e) {\n\t\t\t\tvar currentTarget = jQuery(e.currentTarget);\n\t\t\t\tvar currentModuleName = currentTarget.val();\n\t\t\t\tvar moduleBlock = currentTarget.closest('.convertLeadModules').find('#' + currentModuleName + '_FieldInfo');\n\t\t\t\tvar currentTransferModuleElement = jQuery('#transfer' + currentModuleName);\n\t\t\t\tvar otherTransferModuleElement = jQuery('input[name=\"transferModule\"]').not(currentTransferModuleElement);\n\t\t\t\tvar otherTransferModuleValue = jQuery(otherTransferModuleElement).val();\n\t\t\t\tvar otherModuleElement = jQuery('#' + otherTransferModuleValue + 'Module');\n\n\t\t\t\tif (currentTarget.is(':checked')) {\n\t\t\t\t\tmoduleBlock.collapse('show');\n\t\t\t\t\tinstance.removeDisableAttr(moduleBlock);\n\t\t\t\t\tif (!otherModuleElement.is(':checked')) {\n\t\t\t\t\t\tjQuery(currentTransferModuleElement).prop('checked', true);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tmoduleBlock.collapse('hide');\n\t\t\t\t\tinstance.addDisableAttr(moduleBlock);\n\t\t\t\t\tjQuery(currentTransferModuleElement).prop('checked', false);\n\t\t\t\t\tif (otherModuleElement.is(':checked')) {\n\t\t\t\t\t\tjQuery(otherTransferModuleElement).prop('checked', true);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\te.stopImmediatePropagation();\n\t\t\t});\n\t\t},\n\t\t/*\n\t\t * function to register Convert Lead Submit Event\n\t\t */\n\t\tregisterConvertLeadSubmit: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar formElement = this.getConvertLeadForm();\n\n\t\t\tformElement.on('jqv.form.validating', function (e) {\n\t\t\t\tvar jQv = jQuery(e.currentTarget).data('jqv');\n\t\t\t\t//Remove the earlier validated fields from history so that it wont count disabled fields\n\t\t\t\tjQv.InvalidFields = [];\n\t\t\t});\n\n\t\t\t//Convert Lead Form Submission\n\t\t\tformElement.on('submit', function (e) {\n\t\t\t\tvar convertLeadModuleElements = thisInstance.getConvertLeadModules();\n\t\t\t\tvar moduleArray = [];\n\t\t\t\tvar accountModel = formElement.find('#AccountsModule');\n\n\t\t\t\t//If the validation fails in the hidden Block, we should show that Block with error.\n\t\t\t\tvar invalidFields = formElement.data('jqv').InvalidFields;\n\t\t\t\tif (invalidFields.length > 0) {\n\t\t\t\t\tvar fieldElement = invalidFields[0];\n\t\t\t\t\tvar moduleBlock = jQuery(fieldElement).closest('.js-collapse');\n\t\t\t\t\tmoduleBlock.collapse('show');\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tjQuery.each(convertLeadModuleElements, function (index, element) {\n\t\t\t\t\tif (jQuery(element).is(':checked')) {\n\t\t\t\t\t\tmoduleArray.push(jQuery(element).val());\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tformElement.find('input[name=\"modules\"]').val(JSON.stringify(moduleArray));\n\n\t\t\t\tvar organizationElement = accountModel.length;\n\t\t\t\tif (organizationElement != '0') {\n\t\t\t\t\tif (jQuery.inArray('Accounts', moduleArray) == -1) {\n\t\t\t\t\t\tapp.showAlert(app.vtranslate('JS_SELECT_ORGANIZATION'));\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/*\n\t\t * function to get all the checkboxes which are representing the modules selection\n\t\t */\n\t\tgetConvertLeadModules: function () {\n\t\t\tvar container = this.getConvertLeadContainer();\n\t\t\tif (this.convertLeadModules == false) {\n\t\t\t\tthis.convertLeadModules = jQuery('.convertLeadModuleSelection', container);\n\t\t\t}\n\t\t\treturn this.convertLeadModules;\n\t\t},\n\t\t/*\n\t\t * function to get Convert Lead Form\n\t\t */\n\t\tgetConvertLeadForm: function () {\n\t\t\tif (this.convertLeadForm == false) {\n\t\t\t\tthis.convertLeadForm = jQuery('#convertLeadForm');\n\t\t\t}\n\t\t\treturn this.convertLeadForm;\n\t\t},\n\t\t/*\n\t\t * function to get Convert Lead Container\n\t\t */\n\t\tgetConvertLeadContainer: function () {\n\t\t\tif (this.convertLeadContainer == false) {\n\t\t\t\tthis.convertLeadContainer = jQuery('#leadAccordion');\n\t\t\t}\n\t\t\treturn this.convertLeadContainer;\n\t\t},\n\t\tsaveFieldValues: function (fieldDetailList) {\n\t\t\tvar aDeferred = jQuery.Deferred();\n\t\t\tvar recordId = this.getRecordId();\n\n\t\t\tvar data = {};\n\t\t\tif (typeof fieldDetailList !== 'undefined') {\n\t\t\t\tdata = fieldDetailList;\n\t\t\t}\n\n\t\t\tdata['record'] = recordId;\n\t\t\tdata['module'] = app.getModuleName();\n\t\t\tdata['action'] = 'SaveAjax';\n\n\t\t\tAppConnector.request(data).done(function (reponseData) {\n\t\t\t\taDeferred.resolve(reponseData);\n\t\t\t});\n\t\t\tif (fieldDetailList && fieldDetailList.field == 'leadstatus') {\n\t\t\t\tlet btn = jQuery('.btn-convertLead');\n\t\t\t\tlet conversionAvailableStatus = jQuery('#conversion_available_status').val();\n\t\t\t\tif (conversionAvailableStatus) {\n\t\t\t\t\tlet status = JSON.parse(conversionAvailableStatus);\n\t\t\t\t\tif (status.length === 0 || jQuery.inArray(fieldDetailList.value, status) != -1) {\n\t\t\t\t\t\tbtn.removeClass('d-none');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbtn.addClass('d-none');\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tbtn.addClass('d-none');\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\tupdateConvertLeadvalue: function () {\n\t\t\tvar thisInstance = Vtiger_Detail_Js.getInstance();\n\t\t\tvar detailContentsHolder = thisInstance.getContentHolder();\n\t\t\tdetailContentsHolder.on(thisInstance.fieldUpdatedEvent, 'input,select', function (e, params) {\n\t\t\t\tvar elem = jQuery(e.currentTarget);\n\t\t\t\tvar fieldName = elem.attr('name');\n\t\t\t\tvar ajaxnewValue = params['new'];\n\n\t\t\t\tif (!jQuery.isEmptyObject(Leads_Detail_Js.cache)) {\n\t\t\t\t\tvar sampleCache = jQuery(Leads_Detail_Js.cache);\n\t\t\t\t\tvar contextElem = sampleCache.find('[name=\"' + fieldName + '\"]');\n\n\t\t\t\t\tif (elem.is('select')) {\n\t\t\t\t\t\tvar oldvalue = contextElem.val();\n\t\t\t\t\t\tcontextElem.find('option[value=\"' + oldvalue + '\"]').removeAttr('selected');\n\t\t\t\t\t\tcontextElem.find('option[value=\"' + ajaxnewValue + '\"]').attr('selected', 'selected');\n\t\t\t\t\t\tcontextElem.trigger('change');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcontextElem.attr('value', ajaxnewValue);\n\t\t\t\t\t}\n\t\t\t\t\tLeads_Detail_Js.cache = sampleCache;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\tthis._super();\n\t\t\tthis.updateConvertLeadvalue();\n\t\t}\n\t}\n);\n"],"names":["Vtiger_Detail_Js","cache","detailCurrentInstance","convertLead","convertLeadUrl","buttonElement","Leads_Detail_Js","instance","convertLeadContainer","convertLeadForm","convertLeadModules","jQuery","isEmptyObject","AppConnector","request","done","data","displayConvertLeadModel","init","_super","disableConvertLeadButton","button","attr","enableConvertLeadButton","removeAttr","removeDisableAttr","moduleBlock","find","addDisableAttr","errorElement","length","errorMsg","val","errorTitle","params","title","text","addclass","width","type","pnotify_after_open","pnotify_after_close","app","showNotify","editViewObj","Vtiger_Edit_Js","getInstance","collapse","parent","toggle","registerBasicEvents","checkBoxElements","getConvertLeadModules","each","index","element","checkingModuleSelection","registerForReferenceField","registerConvertLeadEvents","getConvertLeadForm","validationEngine","validationEngineOptions","registerConvertLeadSubmit","showModalWindow","callBackFunction","module","closest","is","getConvertLeadContainer","referenceField","container","on","e","$","currentTarget","removeClass","addClass","prop","currentModuleName","currentTransferModuleElement","otherTransferModuleElement","not","otherTransferModuleValue","otherModuleElement","stopImmediatePropagation","formElement","jQv","InvalidFields","convertLeadModuleElements","thisInstance","moduleArray","accountModel","invalidFields","fieldElement","preventDefault","push","JSON","stringify","organizationElement","inArray","showAlert","vtranslate","saveFieldValues","fieldDetailList","aDeferred","Deferred","recordId","getRecordId","getModuleName","reponseData","resolve","field","conversionAvailableStatus","status","parse","value","btn","promise","updateConvertLeadvalue","detailContentsHolder","getContentHolder","fieldUpdatedEvent","fieldName","elem","ajaxnewValue","sampleCache","contextElem","oldvalue","trigger","registerEvents"],"mappings":"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"}