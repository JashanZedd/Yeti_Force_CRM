{"version":3,"file":"Edit.min.js","sources":["Edit.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n\nVtiger_Edit_Js(\n\t'FCorectingInvoice_Edit_Js',\n\t{},\n\t{\n\t\t/**\n\t\t * Load correcting invoice data to before block\n\t\t * @param {int} recordId\n\t\t */\n\t\tloadInvoiceData(recordId = false) {\n\t\t\tif (!recordId) {\n\t\t\t\trecordId = parseInt(this.getForm().find('input[name=\"finvoiceid\"]').val());\n\t\t\t}\n\t\t\tif (recordId && recordId != 0) {\n\t\t\t\tconst form = this.getForm();\n\t\t\t\tconst progressLoader = $.progressIndicator({ blockInfo: { enabled: true } });\n\t\t\t\tAppConnector.request({\n\t\t\t\t\tmodule: 'FInvoice',\n\t\t\t\t\trecord: recordId,\n\t\t\t\t\tmode: 'showInventoryDetails',\n\t\t\t\t\tview: 'Detail'\n\t\t\t\t})\n\t\t\t\t\t.done((response) => {\n\t\t\t\t\t\tform.find('.js-before-inventory').html(response);\n\t\t\t\t\t\tprogressLoader.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t})\n\t\t\t\t\t.fail(() => {\n\t\t\t\t\t\tprogressLoader.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * register reference fields events\n\t\t */\n\t\tregisterReferenceFieldsEvents() {\n\t\t\tapp.event.on('EditView.SelectReference', (e, params) => {\n\t\t\t\tif (params.module === 'FInvoice') {\n\t\t\t\t\tthis.loadInvoiceData(params.record);\n\t\t\t\t}\n\t\t\t});\n\t\t\tconst form = this.getForm();\n\t\t\tapp.event.on('EditView.ClearField', (e, params) => {\n\t\t\t\tif (params.fieldName === 'finvoiceid') {\n\t\t\t\t\tconst invoiceidInput = form.find('[name=\"finvoiceid\"]');\n\t\t\t\t\tif (invoiceidInput.length) {\n\t\t\t\t\t\tform\n\t\t\t\t\t\t\t.find('.js-before-inventory')\n\t\t\t\t\t\t\t.html('<div class=\"text-center\">' + app.vtranslate('JS_FCORECTINGINVOICE_CHOOSE_INVOICE') + '</div>');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Action for copy from correcting invoice button - load data before positions to position in data after block\n\t\t */\n\t\tregisterCopyFromInvoice() {\n\t\t\tconst form = this.getForm();\n\t\t\tconst thisInstance = this;\n\t\t\tform.find('.js-copy-from-invoice').on('click', function (e) {\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t\tconst finvoiceidInput = form.find('input[name=\"finvoiceid\"]');\n\t\t\t\tif (!finvoiceidInput.length) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tconst finvoiceid = finvoiceidInput.val();\n\t\t\t\tif (!finvoiceid || finvoiceid == 0) {\n\t\t\t\t\treturn Vtiger_Helper_Js.showMessage({\n\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\ttext: app.vtranslate('JS_FCORECTINGINVOICE_CHOOSE_INVOICE')\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tthisInstance.inventoryController.loadInventoryData(finvoiceid, 'FInvoice');\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * registerEvents override\n\t\t */\n\t\tregisterEvents() {\n\t\t\tthis._super();\n\t\t\tthis.registerCopyFromInvoice();\n\t\t\tthis.registerReferenceFieldsEvents();\n\t\t\tthis.loadInvoiceData();\n\t\t}\n\t}\n);\n"],"names":["Vtiger_Edit_Js","loadInvoiceData","recordId","parseInt","getForm","find","val","progressLoader","$","progressIndicator","blockInfo","enabled","AppConnector","request","module","record","mode","view","done","response","form","html","fail","registerReferenceFieldsEvents","app","event","on","e","params","fieldName","invoiceidInput","length","vtranslate","registerCopyFromInvoice","thisInstance","preventDefault","stopPropagation","finvoiceidInput","finvoiceid","inventoryController","loadInventoryData","Vtiger_Helper_Js","showMessage","type","text","registerEvents","_super"],"mappings":"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"}