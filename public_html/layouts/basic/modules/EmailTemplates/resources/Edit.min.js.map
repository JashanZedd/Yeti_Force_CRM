{"version":3,"file":"Edit.min.js","sources":["Edit.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nVtiger_Edit_Js(\"EmailTemplates_Edit_Js\", {}, {\n\n\tloadVariablePanel: function (form) {\n\t\tvar thisInstance = this;\n\t\tif (typeof form === \"undefined\") {\n\t\t\tform = this.getForm();\n\t\t}\n\t\tvar panel = form.find('#variablePanel');\n\t\tpanel.progressIndicator();\n\t\tAppConnector.request({\n\t\t\tmodule: 'EmailTemplates',\n\t\t\trecord: app.getRecordId(),\n\t\t\tview: 'VariablePanel',\n\t\t\ttype: 'mail',\n\t\t\tselectedModule: form.find('[name=\"module_name\"]').val()\n\t\t}).done(function (response) {\n\t\t\tpanel.html(response);\n\t\t\tthisInstance.afterLoadVariablePanel(panel);\n\t\t\tApp.Tools.VariablesPanel.registerRefreshCompanyVariables(panel);\n\t\t}).fail(function () {\n\t\t\tpanel.progressIndicator({mode: 'hide'});\n\t\t});\n\t},\n\tafterLoadVariablePanel: function (html) {\n\t\tApp.Fields.Picklist.showSelect2ElementView(html.find('select.select2'));\n\t},\n\tregisterVariablePanelEvent: function (form) {\n\t\tvar thisInstance = this;\n\t\tif (typeof form === \"undefined\") {\n\t\t\tform = this.getForm();\n\t\t}\n\t\tform.find('.js-toggle-panel[data-label=\"LBL_CONTENT_MAIL\"] .blockContent').prepend('<div id=\"variablePanel\" class=\"row px-0 borderBottom bc-gray-lighter\"></div>');\n\t\tthisInstance.loadVariablePanel(form);\n\t\tform.find('[name=\"module_name\"]').on('change', function (e) {\n\t\t\tthisInstance.loadVariablePanel(form);\n\t\t});\n\t},\n\tregisterBasicEvents: function (container) {\n\t\tthis._super(container);\n\t\tthis.registerVariablePanelEvent(container);\n\t\tApp.Tools.VariablesPanel.registerRefreshCompanyVariables(container);\n\t\tApp.Fields.Text.registerCopyClipboard(container);\n\t\tApp.Tools.VariablesPanel.refreshCompanyVariables(container);\n\t}\n});\n"],"names":["Vtiger_Edit_Js","form","thisInstance","getForm","panel","find","progressIndicator","request","app","getRecordId","val","done","response","html","afterLoadVariablePanel","Tools","VariablesPanel","registerRefreshCompanyVariables","fail","mode","Fields","Picklist","showSelect2ElementView","prepend","loadVariablePanel","on","e","container","_super","registerVariablePanelEvent","Text","registerCopyClipboard","refreshCompanyVariables"],"mappings":";;AAAA;AACA;AAEAA,eAAe,wBAAf,EAAyC,EAAzC,EAA6C;;oBAEzB,2BAAUC,IAAV,EAAgB;MAC9BC,eAAe,IAAnB;MACI,OAAOD,IAAP,KAAgB,WAApB,EAAiC;UACzB,KAAKE,OAAL,EAAP;;MAEGC,QAAQH,KAAKI,IAAL,CAAU,gBAAV,CAAZ;QACMC,iBAAN;eACaC,OAAb,CAAqB;WACZ,gBADY;WAEZC,IAAIC,WAAJ,EAFY;SAGd,eAHc;SAId,MAJc;mBAKJR,KAAKI,IAAL,CAAU,sBAAV,EAAkCK,GAAlC;GALjB,EAMGC,IANH,CAMQ,UAAUC,QAAV,EAAoB;SACrBC,IAAN,CAAWD,QAAX;gBACaE,sBAAb,CAAoCV,KAApC;OACIW,KAAJ,CAAUC,cAAV,CAAyBC,+BAAzB,CAAyDb,KAAzD;GATD,EAUGc,IAVH,CAUQ,YAAY;SACbZ,iBAAN,CAAwB,EAACa,MAAM,MAAP,EAAxB;GAXD;EAT2C;yBAuBpB,gCAAUN,IAAV,EAAgB;MACnCO,MAAJ,CAAWC,QAAX,CAAoBC,sBAApB,CAA2CT,KAAKR,IAAL,CAAU,gBAAV,CAA3C;EAxB2C;6BA0BhB,oCAAUJ,IAAV,EAAgB;MACvCC,eAAe,IAAnB;MACI,OAAOD,IAAP,KAAgB,WAApB,EAAiC;UACzB,KAAKE,OAAL,EAAP;;OAEIE,IAAL,CAAU,+DAAV,EAA2EkB,OAA3E,CAAmF,8EAAnF;eACaC,iBAAb,CAA+BvB,IAA/B;OACKI,IAAL,CAAU,sBAAV,EAAkCoB,EAAlC,CAAqC,QAArC,EAA+C,UAAUC,CAAV,EAAa;gBAC9CF,iBAAb,CAA+BvB,IAA/B;GADD;EAjC2C;sBAqCvB,6BAAU0B,SAAV,EAAqB;OACpCC,MAAL,CAAYD,SAAZ;OACKE,0BAAL,CAAgCF,SAAhC;MACIZ,KAAJ,CAAUC,cAAV,CAAyBC,+BAAzB,CAAyDU,SAAzD;MACIP,MAAJ,CAAWU,IAAX,CAAgBC,qBAAhB,CAAsCJ,SAAtC;MACIZ,KAAJ,CAAUC,cAAV,CAAyBgB,uBAAzB,CAAiDL,SAAjD;;CA1CF"}