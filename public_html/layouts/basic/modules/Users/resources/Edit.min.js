"use strict";Vtiger_Edit_Js("Users_Edit_Js",{registerChangeEventForCurrencySeparator:function(){var form=jQuery("form");jQuery('[name="currency_decimal_separator"]',form).on("change",(function(e){var element=jQuery(e.currentTarget),selectedValue=element.val();if(jQuery('[name="currency_grouping_separator"]',form).data("selectedValue")==selectedValue){var params={text:app.vtranslate("JS_DECIMAL_SEPARATOR_AND_GROUPING_SEPARATOR_CANT_BE_SAME"),type:"error"};Vtiger_Helper_Js.showMessage(params);var previousSelectedValue=element.data("selectedValue");element.find("option").removeAttr("selected"),element.find('option[value="'+previousSelectedValue+'"]').attr("selected","selected"),element.trigger("change")}else element.data("selectedValue",selectedValue)})),jQuery('[name="currency_grouping_separator"]',form).on("change",(function(e){var element=jQuery(e.currentTarget),selectedValue=element.val();if(jQuery('[name="currency_decimal_separator"]',form).data("selectedValue")==selectedValue){var params={text:app.vtranslate("JS_DECIMAL_SEPARATOR_AND_GROUPING_SEPARATOR_CANT_BE_SAME"),type:"error"};Vtiger_Helper_Js.showMessage(params);var previousSelectedValue=element.data("selectedValue");element.find("option").removeAttr("selected"),element.find('option[value="'+previousSelectedValue+'"]').attr("selected","selected"),element.trigger("change")}else element.data("selectedValue",selectedValue)}))}},{duplicateCheckCache:{},userExistCheckCache:{},passCheckCache:{},hourFormatConditionMapping:!1,registerHourFormatChangeEvent:function(){},getHourValues:function(list,currentValue){var options="";for(var key in list){if(list.hasOwnProperty(key))options+='<option value="'+key+'"',key==currentValue&&(options+=' selected="selected" '),options+=">"+list[key]+"</option>"}return options},changeStartHourValuesEvent:function(form){var thisInstance=this;form.on("change",'select[name="hour_format"]',(function(e){var hourFormatVal=jQuery(e.currentTarget).val(),startHourElement=jQuery('select[name="start_hour"]',form),endHourElement=jQuery('select[name="end_hour"]',form),conditionStartSelected=startHourElement.val(),conditionEndSelected=endHourElement.val();if(void 0===thisInstance.hourFormatConditionMapping)return!1;var list=thisInstance.hourFormatConditionMapping.hour_format[hourFormatVal].start_hour;startHourElement.html(thisInstance.getHourValues(list,conditionStartSelected)).trigger("change"),endHourElement.html(thisInstance.getHourValues(list,conditionEndSelected)).trigger("change")}))},triggerHourFormatChangeEvent:function(form){this.hourFormatConditionMapping=$('input[name="timeFormatOptions"]',form).data("value"),this.changeStartHourValuesEvent(form),$('select[name="hour_format"]',form).trigger("change")},registerRecordPreSaveEvent:function(form){var thisInstance=this;form.on(Vtiger_Edit_Js.recordPreSave,(function(e,data){var record=jQuery('input[name="record"]').val(),progressIndicatorElement=jQuery.progressIndicator({message:app.vtranslate("JS_SAVE_LOADER_INFO"),position:"html",blockInfo:{enabled:!0}});record||jQuery('input[name="user_password"]').val()==jQuery('input[name="confirm_password"]').val()||(Vtiger_Helper_Js.showPnotify(app.vtranslate("JS_REENTER_PASSWORDS")),progressIndicatorElement.progressIndicator({mode:"hide"}),e.preventDefault()),thisInstance.verifyFormData().done((function(data){data.result.message&&(Vtiger_Helper_Js.showPnotify(data.result.message),progressIndicatorElement.progressIndicator({mode:"hide"}),e.preventDefault())})).fail((function(data,error){progressIndicatorElement.progressIndicator({mode:"hide"}),e.preventDefault()}))}))},verifyFormData:function(){var aDeferred=jQuery.Deferred();return this.verifyData().done((function(data){aDeferred.resolve(data)}),(function(data,error){aDeferred.reject()})),aDeferred.promise()},verifyData:function(){var aDeferred=jQuery.Deferred();return AppConnector.request({async:!1,data:{module:"Users",action:"VerifyData",email:jQuery('[name="email1"]').val(),userName:jQuery('input[name="user_name"]').val(),record:jQuery('input[name="record"]').val(),password:jQuery('input[name="user_password"]').val()}}).done((function(data){data.result?aDeferred.resolve(data):aDeferred.reject(data)})),aDeferred.promise()},registerEvents:function(){this._super();var form=this.getForm();this.triggerHourFormatChangeEvent(form),this.registerRecordPreSaveEvent(form),Users_Edit_Js.registerChangeEventForCurrencySeparator()}});
//# sourceMappingURL=Edit.min.js.map
