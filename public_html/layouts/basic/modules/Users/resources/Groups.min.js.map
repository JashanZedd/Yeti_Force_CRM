{"version":3,"file":"Groups.min.js","sources":["Groups.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\nwindow.Users_Groups_JS = class {\n\t/**\n\t * Modal container\n\t */\n\tcontainer = false;\n\t/**\n\t * DataTable api object\n\t */\n\tdataTable;\n\n\t/**\n\t * Register DataTable\n\t */\n\tregisterDataTable() {\n\t\tlet table = this.container.find('.js-data-table');\n\t\tlet form = this.container.find('form');\n\t\treturn app.registerDataTables(table, {\n\t\t\torder: [],\n\t\t\tprocessing: true,\n\t\t\tserverSide: false,\n\t\t\tajax: {\n\t\t\t\turl: table.data('url'),\n\t\t\t\ttype: 'POST',\n\t\t\t\tdata: function (data) {\n\t\t\t\t\t$.extend(data, form.serializeFormData());\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\t/**\n\t * Register remove member\n\t */\n\tregisterRemoveMember() {\n\t\tthis.container.find('.js-data-table').on('click', '.js-member-delete', (e) => {\n\t\t\tlet url = e.currentTarget.dataset.url;\n\t\t\tapp.showConfirmModal({\n\t\t\t\ttext: app.vtranslate('JS_LBL_ARE_YOU_SURE_YOU_WANT_TO_DELETE'),\n\t\t\t\tconfirmedCallback: () => {\n\t\t\t\t\tlet progress = jQuery.progressIndicator();\n\t\t\t\t\tAppConnector.request(url)\n\t\t\t\t\t\t.done(() => {\n\t\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\tthis.dataTable.ajax.reload();\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.fail((_) => {\n\t\t\t\t\t\t\tapp.showNotify({ text: app.vtranslate('JS_ERROR'), type: 'error' });\n\t\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\t/**\n\t * Register add members\n\t */\n\tregisterAddMember() {\n\t\tthis.container.find('.js-data-table').on('click', '.js-member-add', (e) => {\n\t\t\tlet url = e.currentTarget.dataset.url + '&groupID=' + this.container.find('form').serializeFormData()['groupID'];\n\t\t\tapp.showModalWindow(\n\t\t\t\tnull,\n\t\t\t\turl,\n\t\t\t\t(modalContainer) => {\n\t\t\t\t\tmodalContainer.find('.js-modal__save').on('click', () => {\n\t\t\t\t\t\tlet modalForm = modalContainer.find('form');\n\t\t\t\t\t\tif (modalForm.validationEngine('validate')) {\n\t\t\t\t\t\t\tlet progress = $.progressIndicator({\n\t\t\t\t\t\t\t\tmessage: app.vtranslate('JS_SAVE_LOADER_INFO'),\n\t\t\t\t\t\t\t\tblockInfo: { enabled: true }\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tlet formData = modalForm.serializeFormData();\n\t\t\t\t\t\t\tapp\n\t\t\t\t\t\t\t\t.saveAjax('', [], formData)\n\t\t\t\t\t\t\t\t.done((response) => {\n\t\t\t\t\t\t\t\t\tlet result = response.result;\n\t\t\t\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\t\t\tif (result.success) {\n\t\t\t\t\t\t\t\t\t\tapp.hideModalWindow(null, 'memberList');\n\t\t\t\t\t\t\t\t\t\tthis.dataTable.ajax.reload();\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\t\t\t\ttext: result.message ? result.message : app.vtranslate('JS_ERROR'),\n\t\t\t\t\t\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\t\t\t\t\t\tdelay: 3000,\n\t\t\t\t\t\t\t\t\t\t\thide: true\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.fail(() => {\n\t\t\t\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\t\t\tapp.showNotify({ text: app.vtranslate('JS_ERROR'), type: 'error' });\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\t{ modalId: 'memberList' }\n\t\t\t);\n\t\t});\n\t}\n\t/**\n\t * Register base events\n\t * @param {jQuery} modalContainer\n\t */\n\tregisterEvents(modalContainer) {\n\t\tthis.container = modalContainer;\n\t\tthis.dataTable = this.registerDataTable();\n\t\tthis.registerRemoveMember();\n\t\tthis.registerAddMember();\n\t\tthis.container.on('change', '[name=\"groupID\"]', () => {\n\t\t\tthis.dataTable.ajax.reload();\n\t\t});\n\t}\n};\n"],"names":["window","Users_Groups_JS","table","container","find","form","registerDataTables","order","processing","serverSide","ajax","url","data","type","$","extend","serializeFormData","on","e","currentTarget","dataset","app","showConfirmModal","text","vtranslate","confirmedCallback","progress","jQuery","progressIndicator","AppConnector","request","done","mode","dataTable","reload","fail","showNotify","showModalWindow","modalContainer","modalForm","validationEngine","message","blockInfo","enabled","formData","saveAjax","response","result","success","hideModalWindow","delay","hide","modalId","registerDataTable","registerRemoveMember","registerAddMember"],"mappings":"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"}