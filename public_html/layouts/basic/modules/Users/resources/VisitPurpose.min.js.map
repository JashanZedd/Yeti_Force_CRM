{"version":3,"file":"VisitPurpose.min.js","sources":["VisitPurpose.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\n$.Class(\n\t'Users_VisitPurpose_JS',\n\t{},\n\t{\n\t\t/**\n\t\t * Modal container\n\t\t */\n\t\tcontainer: false,\n\n\t\t/**\n\t\t * Function to handle sending the AJAX form\n\t\t */\n\t\tregisterSave() {\n\t\t\tthis.container.find('.js-modal__save').on('click', (e) => {\n\t\t\t\tlet form = this.container.find('form');\n\t\t\t\te.preventDefault();\n\t\t\t\tif (form.validationEngine('validate')) {\n\t\t\t\t\tlet progress = $.progressIndicator({\n\t\t\t\t\t\tmessage: app.vtranslate('JS_SAVE_LOADER_INFO'),\n\t\t\t\t\t\tblockInfo: { enabled: true }\n\t\t\t\t\t});\n\t\t\t\t\tlet formData = form.serializeFormData();\n\t\t\t\t\tapp.saveAjax('', [], formData).done((data) => {\n\t\t\t\t\t\tif (data.result) {\n\t\t\t\t\t\t\tlet id = this.container.closest('.modalContainer').attr('id');\n\t\t\t\t\t\t\tapp.hideModalWindow(null, id);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\ttext: app.vtranslate('JS_ERROR'),\n\t\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register base events\n\t\t * @param {jQuery} modalContainer\n\t\t */\n\t\tregisterEvents(modalContainer) {\n\t\t\tthis.container = modalContainer;\n\t\t\tthis.registerSave();\n\t\t\tsetTimeout((_) => {\n\t\t\t\tthis.container.find('textarea').focus();\n\t\t\t}, 400);\n\t\t}\n\t}\n);\n"],"names":["$","Class","container","registerSave","find","on","e","preventDefault","form","validationEngine","progress","progressIndicator","message","app","vtranslate","blockInfo","enabled","formData","serializeFormData","saveAjax","done","data","result","id","closest","attr","hideModalWindow","showNotify","text","type","mode","registerEvents","modalContainer","setTimeout","focus"],"mappings":";;AAAA,kKACA,YAAY,CAEZA,CAAC,CAACC,KAAK,CACN,uBAAuB,CACvB,EAAE,CACF;AAED;AACA,KACEC,SAAS,GAAO;AAGlB;AACA,KACEC,YAAY,CAAG,SAAA,YAAA,EAAA,CAAA,IAAA,KAAA,CAAA,IAAA,CACd,IAAI,CAACD,SAAS,CAACE,IAAI,CAAC,iBAAiB,CAAC,CAACC,EAAE,CAAC,OAAO,CAAE,SAACC,CAAC,CAAK,CACzD,QAAQ,CAAG,KAAI,CAACJ,SAAS,CAACE,IAAI,CAAC,MAAM,CAAC,CAEtC,GADAE,CAAC,CAACC,cAAc,EAAE,CACdC,IAAI,CAACC,gBAAgB,CAAC,UAAU,CAAC,CAAE,CAClCC,IAAAA,QAAQ,CAAGV,CAAC,CAACW,iBAAiB,CAAC,CAClCC,OAAO,CAAEC,GAAG,CAACC,UAAU,CAAC,qBAAqB,CAAC,CAC9CC,SAAS,CAAE,CAAEC,OAAO,CAAO,CAAA,CAAA,CAC5B,CAAC,CAAC,CACEC,QAAQ,CAAGT,IAAI,CAACU,iBAAiB,EAAE,CACvCL,GAAG,CAACM,QAAQ,CAAC,EAAE,CAAE,EAAE,CAAEF,QAAQ,CAAC,CAACG,IAAI,CAAC,SAACC,IAAI,CAAK,CAC7C,GAAIA,IAAI,CAACC,MAAM,CAAE,CAChB,IAAIC,EAAE,CAAG,KAAI,CAACrB,SAAS,CAACsB,OAAO,CAAC,iBAAiB,CAAC,CAACC,IAAI,CAAC,IAAI,CAAC,CAC7DZ,GAAG,CAACa,eAAe,CAAC,IAAI,CAAEH,EAAE,EAC7B,CAAC,KACAV,GAAG,CAACc,UAAU,CAAC,CACdC,IAAI,CAAEf,GAAG,CAACC,UAAU,CAAC,UAAU,CAAC,CAChCe,IAAI,CAAE,OACP,CAAC,CAAC,CAEHnB,QAAQ,CAACC,iBAAiB,CAAC,CAAEmB,IAAI,CAAE,MAAO,CAAC,EAC5C,CAAC,EACF,CACD,CAAC,EACF,CAAC;AAEH;AACA;AACA,KACEC,cAAc,CAACC,SAAAA,cAAAA,CAAAA,cAAc,CAAE,CAAA,IAAA,MAAA,CAAA,IAAA,CAC9B,IAAI,CAAC9B,SAAS,CAAG8B,cAAc,CAC/B,IAAI,CAAC7B,YAAY,EAAE,CACnB8B,UAAU,CAAC,UAAO,CACjB,MAAI,CAAC/B,SAAS,CAACE,IAAI,CAAC,UAAU,CAAC,CAAC8B,KAAK,GACtC,CAAC,CAAE,GAAG,EACP,CACD,CAAC,CACD;;"}