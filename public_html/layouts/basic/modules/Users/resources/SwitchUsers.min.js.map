{"version":3,"file":"SwitchUsers.min.js","sources":["SwitchUsers.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class(\n\t'Vtiger_SwitchUsers_Js',\n\t{},\n\t{\n\t\t/**\n\t\t * Modal container\n\t\t */\n\t\tcontainer: false,\n\t\t/**\n\t\t * Register change user\n\t\t */\n\t\tregisterChangeUser: function () {\n\t\t\tthis.container.find('.js-switch-user').on('change', (e) => {\n\t\t\t\tlet showElement = $(e.currentTarget).find('option:selected').data('admin');\n\t\t\t\tlet subContainer = this.container.find('.js-sub-container');\n\t\t\t\tif (showElement) {\n\t\t\t\t\tsubContainer.removeClass('d-none');\n\t\t\t\t} else {\n\t\t\t\t\tsubContainer.addClass('d-none');\n\t\t\t\t}\n\t\t\t\tsubContainer.find('.js-text-element').attr('disabled', !showElement);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register save\n\t\t */\n\t\tregisterSave: function () {\n\t\t\tlet form = this.container.find('form');\n\t\t\tthis.container.find('.js-switch-btn').on('click', (e) => {\n\t\t\t\te.preventDefault();\n\t\t\t\tif (form.validationEngine('validate')) {\n\t\t\t\t\tdocument.progressLoader = jQuery.progressIndicator({\n\t\t\t\t\t\tmessage: app.vtranslate('JS_LOADING_PLEASE_WAIT'),\n\t\t\t\t\t\tposition: 'html',\n\t\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\t\tenabled: true\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tvar userId = form.find('[name=\"user\"]').val();\n\t\t\t\t\tform.find('[name=\"id\"]').val(userId);\n\t\t\t\t\tform.submit();\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.container.find('.js-switch-to-yourself').on('click', (e) => {\n\t\t\t\te.preventDefault();\n\t\t\t\tdocument.progressLoader = jQuery.progressIndicator({\n\t\t\t\t\tmessage: app.vtranslate('JS_LOADING_PLEASE_WAIT'),\n\t\t\t\t\tposition: 'html',\n\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\tenabled: true\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthis.container.find('.js-text-element').attr('disabled', true);\n\t\t\t\tform.submit();\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register Events\n\t\t */\n\t\tregisterEvents: function () {\n\t\t\tthis.container = jQuery('.switchUsersContainer');\n\t\t\tthis.registerSave();\n\t\t\tthis.registerChangeUser();\n\t\t}\n\t}\n);\n\njQuery(document).ready(function (e) {\n\tvar instance = new Vtiger_SwitchUsers_Js();\n\tinstance.registerEvents();\n});\n"],"names":["jQuery","Class","container","registerChangeUser","find","on","e","showElement","$","currentTarget","data","subContainer","removeClass","addClass","attr","registerSave","form","preventDefault","validationEngine","document","progressLoader","progressIndicator","message","app","vtranslate","position","blockInfo","enabled","val","userId","submit","registerEvents","ready","instance"],"mappings":";;AAAA,kKACA,YAAY,CAEZA,MAAM,CAACC,KAAK,CACX,uBAAuB,CACvB,EAAE,CACF;AAED;AACA,KACEC,SAAS,GAAO;AAElB;AACA,KACEC,kBAAkB,CAAE,SAAA,kBAAA,EAAY,gBAC/B,IAAI,CAACD,SAAS,CAACE,IAAI,CAAC,iBAAiB,CAAC,CAACC,EAAE,CAAC,QAAQ,CAAE,SAACC,CAAC,CAAK,CACtDC,IAAAA,WAAW,CAAGC,CAAC,CAACF,CAAC,CAACG,aAAa,CAAC,CAACL,IAAI,CAAC,iBAAiB,CAAC,CAACM,IAAI,CAAC,OAAO,CAAC,CACtEC,YAAY,CAAG,KAAI,CAACT,SAAS,CAACE,IAAI,CAAC,mBAAmB,CAAC,CACvDG,WAAW,CACdI,YAAY,CAACC,WAAW,CAAC,QAAQ,CAAC,CAElCD,YAAY,CAACE,QAAQ,CAAC,QAAQ,CAAC,CAEhCF,YAAY,CAACP,IAAI,CAAC,kBAAkB,CAAC,CAACU,IAAI,CAAC,UAAU,CAAE,CAACP,WAAW,EACpE,CAAC,EACF,CAAC;AAEH;AACA,KACEQ,YAAY,CAAE,SAAA,YAAA,EAAY,iBACrBC,IAAI,CAAG,IAAI,CAACd,SAAS,CAACE,IAAI,CAAC,MAAM,CAAC,CACtC,IAAI,CAACF,SAAS,CAACE,IAAI,CAAC,gBAAgB,CAAC,CAACC,EAAE,CAAC,OAAO,CAAE,SAACC,CAAC,CAAK,CAExD,GADAA,CAAC,CAACW,cAAc,EAAE,CACdD,IAAI,CAACE,gBAAgB,CAAC,UAAU,CAAC,CAAE,CACtCC,QAAQ,CAACC,cAAc,CAAGpB,MAAM,CAACqB,iBAAiB,CAAC,CAClDC,OAAO,CAAEC,GAAG,CAACC,UAAU,CAAC,wBAAwB,CAAC,CACjDC,QAAQ,CAAE,MAAM,CAChBC,SAAS,CAAE,CACVC,OAAO,CACR,CAAA,CAAA,CACD,CAAC,CAAC,CACF,IAAU,MAAA,CAAGX,IAAI,CAACZ,IAAI,CAAC,iBAAe,CAAC,CAACwB,GAAG,EAAE,CAC7CZ,IAAI,CAACZ,IAAI,CAAC,eAAa,CAAC,CAACwB,GAAG,CAACC,MAAM,CAAC,CACpCb,IAAI,CAACc,MAAM,GACZ,CACD,CAAC,CAAC,CACF,IAAI,CAAC5B,SAAS,CAACE,IAAI,CAAC,wBAAwB,CAAC,CAACC,EAAE,CAAC,OAAO,CAAE,SAACC,CAAC,CAAK,CAChEA,CAAC,CAACW,cAAc,EAAE,CAClBE,QAAQ,CAACC,cAAc,CAAGpB,MAAM,CAACqB,iBAAiB,CAAC,CAClDC,OAAO,CAAEC,GAAG,CAACC,UAAU,CAAC,wBAAwB,CAAC,CACjDC,QAAQ,CAAE,MAAM,CAChBC,SAAS,CAAE,CACVC,OAAO,CAAA,CAAA,CACR,CACD,CAAC,CAAC,CACF,MAAI,CAACzB,SAAS,CAACE,IAAI,CAAC,kBAAkB,CAAC,CAACU,IAAI,CAAC,UAAU,CAAO,CAAA,CAAA,CAAA,CAC9DE,IAAI,CAACc,MAAM,GACZ,CAAC,EACF,CAAC;AAEH;AACA,KACEC,cAAc,CAAE,SAAY,cAAA,EAAA,CAC3B,IAAI,CAAC7B,SAAS,CAAGF,MAAM,CAAC,uBAAuB,CAAC,CAChD,IAAI,CAACe,YAAY,EAAE,CACnB,IAAI,CAACZ,kBAAkB,GACxB,CACD,CAAC,CACD,CAEDH,MAAM,CAACmB,QAAQ,CAAC,CAACa,KAAK,CAAC,UAAa,CACnC,IAAY,QAAA,CAAG,IAA2B,qBAAA,CAC1CC,QAAQ,CAACF,cAAc,GACxB,CAAC,CAAC;;"}