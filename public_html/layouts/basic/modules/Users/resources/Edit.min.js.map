{"version":3,"file":"Edit.min.js","sources":["Edit.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n * Contributor(s): YetiForce.com\n *************************************************************************************/\n'use strict';\n\nVtiger_Edit_Js(\"Users_Edit_Js\", {\n\t/**\n\t * Function to register change event for currency separator\n\t */\n\tregisterChangeEventForCurrencySeparator: function () {\n\t\tvar form = jQuery('form');\n\t\tjQuery('[name=\"currency_decimal_separator\"]', form).on('change', function (e) {\n\t\t\tvar element = jQuery(e.currentTarget);\n\t\t\tvar selectedValue = element.val();\n\t\t\tvar groupingSeparatorValue = jQuery('[name=\"currency_grouping_separator\"]', form).data('selectedValue');\n\t\t\tif (groupingSeparatorValue == selectedValue) {\n\t\t\t\tvar message = app.vtranslate('JS_DECIMAL_SEPARATOR_AND_GROUPING_SEPARATOR_CANT_BE_SAME');\n\t\t\t\tvar params = {\n\t\t\t\t\ttext: message,\n\t\t\t\t\ttype: 'error'\n\t\t\t\t};\n\t\t\t\tVtiger_Helper_Js.showMessage(params);\n\t\t\t\tvar previousSelectedValue = element.data('selectedValue');\n\t\t\t\telement.find('option').removeAttr('selected');\n\t\t\t\telement.find('option[value=\"' + previousSelectedValue + '\"]').attr('selected', 'selected');\n\t\t\t\telement.trigger('change');\n\t\t\t} else {\n\t\t\t\telement.data('selectedValue', selectedValue);\n\t\t\t}\n\t\t});\n\t\tjQuery('[name=\"currency_grouping_separator\"]', form).on('change', function (e) {\n\t\t\tvar element = jQuery(e.currentTarget);\n\t\t\tvar selectedValue = element.val();\n\t\t\tvar decimalSeparatorValue = jQuery('[name=\"currency_decimal_separator\"]', form).data('selectedValue');\n\t\t\tif (decimalSeparatorValue == selectedValue) {\n\t\t\t\tvar message = app.vtranslate('JS_DECIMAL_SEPARATOR_AND_GROUPING_SEPARATOR_CANT_BE_SAME');\n\t\t\t\tvar params = {\n\t\t\t\t\ttext: message,\n\t\t\t\t\ttype: 'error'\n\t\t\t\t};\n\t\t\t\tVtiger_Helper_Js.showMessage(params);\n\t\t\t\tvar previousSelectedValue = element.data('selectedValue');\n\t\t\t\telement.find('option').removeAttr('selected');\n\t\t\t\telement.find('option[value=\"' + previousSelectedValue + '\"]').attr('selected', 'selected');\n\t\t\t\telement.trigger('change');\n\t\t\t} else {\n\t\t\t\telement.data('selectedValue', selectedValue);\n\t\t\t}\n\t\t});\n\t}\n\n}, {\n\tduplicateCheckCache: {},\n\tuserExistCheckCache: {},\n\tpassCheckCache: {},\n\t//Hold the conditions for a hour format\n\thourFormatConditionMapping: false,\n\tregisterHourFormatChangeEvent: function () {\n\n\t},\n\tgetHourValues: function (list, currentValue) {\n\t\tvar options = '';\n\t\tfor (var key in list) {\n\t\t\t//IE Browser consider the prototype properties also, it should consider has own properties only.\n\t\t\tif (list.hasOwnProperty(key)) {\n\t\t\t\tvar conditionValue = list[key];\n\t\t\t\toptions += '<option value=\"' + key + '\"';\n\t\t\t\tif (key == currentValue) {\n\t\t\t\t\toptions += ' selected=\"selected\" ';\n\t\t\t\t}\n\t\t\t\toptions += '>' + conditionValue + '</option>';\n\t\t\t}\n\t\t}\n\t\treturn options;\n\t},\n\tchangeStartHourValuesEvent: function (form) {\n\t\tvar thisInstance = this;\n\t\tform.on('change', 'select[name=\"hour_format\"]', function (e) {\n\t\t\tvar hourFormatVal = jQuery(e.currentTarget).val();\n\t\t\tvar startHourElement = jQuery('select[name=\"start_hour\"]', form);\n\t\t\tvar endHourElement = jQuery('select[name=\"end_hour\"]', form);\n\t\t\tvar conditionStartSelected = startHourElement.val();\n\t\t\tvar conditionEndSelected = endHourElement.val();\n\t\t\tif (typeof thisInstance.hourFormatConditionMapping === \"undefined\") {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvar list = thisInstance.hourFormatConditionMapping['hour_format'][hourFormatVal]['start_hour'];\n\t\t\tstartHourElement.html(thisInstance.getHourValues(list, conditionStartSelected)).trigger('change');\n\t\t\tendHourElement.html(thisInstance.getHourValues(list, conditionEndSelected)).trigger('change');\n\t\t});\n\t},\n\ttriggerHourFormatChangeEvent(form) {\n\t\tthis.hourFormatConditionMapping = $('input[name=\"timeFormatOptions\"]', form).data('value');\n\t\tthis.changeStartHourValuesEvent(form);\n\t\t$('select[name=\"hour_format\"]', form).trigger('change');\n\t},\n\t/**\n\t * Function to register recordpresave event\n\t */\n\tregisterRecordPreSaveEvent: function (form) {\n\t\tvar thisInstance = this;\n\t\tform.on(Vtiger_Edit_Js.recordPreSave, function (e, data) {\n\t\t\tvar record = jQuery('input[name=\"record\"]').val();\n\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\t'message': app.vtranslate('JS_SAVE_LOADER_INFO'),\n\t\t\t\t'position': 'html',\n\t\t\t\t'blockInfo': {\n\t\t\t\t\t'enabled': true\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (!record && jQuery('input[name=\"user_password\"]').val() != jQuery('input[name=\"confirm_password\"]').val()) {\n\t\t\t\tVtiger_Helper_Js.showPnotify(app.vtranslate('JS_REENTER_PASSWORDS'));\n\t\t\t\tprogressIndicatorElement.progressIndicator({'mode': 'hide'});\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\tthisInstance.verifyFormData()\n\t\t\t\t.done(function (data) {\n\t\t\t\t\tif (data.result.message) {\n\t\t\t\t\t\tVtiger_Helper_Js.showPnotify(data.result.message);\n\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({'mode': 'hide'});\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.fail(function (data, error) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({'mode': 'hide'});\n\t\t\t\t\te.preventDefault();\n\t\t\t\t});\n\t\t});\n\t},\n\tverifyFormData: function () {\n\t\tvar aDeferred = jQuery.Deferred();\n\t\tvar thisInstance = this;\n\t\tthisInstance.verifyData().done(function (data) {\n\t\t\taDeferred.resolve(data);\n\t\t}, function (data, error) {\n\t\t\taDeferred.reject();\n\t\t});\n\t\treturn aDeferred.promise();\n\t},\n\tverifyData: function () {\n\t\tvar aDeferred = jQuery.Deferred();\n\t\tAppConnector.request({\n\t\t\tasync: false,\n\t\t\tdata: {\n\t\t\t\tmodule: 'Users',\n\t\t\t\taction: 'VerifyData',\n\t\t\t\temail: jQuery('[name=\"email1\"]').val(),\n\t\t\t\tuserName: jQuery('input[name=\"user_name\"]').val(),\n\t\t\t\trecord: jQuery('input[name=\"record\"]').val(),\n\t\t\t\tpassword: jQuery('input[name=\"user_password\"]').val(),\n\n\t\t\t}\n\t\t}).done(function (data) {\n\t\t\tif (data.result) {\n\t\t\t\taDeferred.resolve(data);\n\t\t\t} else {\n\t\t\t\taDeferred.reject(data);\n\t\t\t}\n\t\t});\n\t\treturn aDeferred.promise();\n\t},\n\tregisterEvents: function () {\n\t\tthis._super();\n\t\tvar form = this.getForm();\n\t\tthis.triggerHourFormatChangeEvent(form);\n\t\tthis.registerRecordPreSaveEvent(form);\n\t\tUsers_Edit_Js.registerChangeEventForCurrencySeparator();\n\t}\n});\n"],"names":["Vtiger_Edit_Js","form","jQuery","on","e","element","currentTarget","selectedValue","val","groupingSeparatorValue","data","message","app","vtranslate","params","showMessage","previousSelectedValue","find","removeAttr","attr","trigger","decimalSeparatorValue","list","currentValue","options","key","hasOwnProperty","conditionValue","thisInstance","hourFormatVal","startHourElement","endHourElement","conditionStartSelected","conditionEndSelected","hourFormatConditionMapping","html","getHourValues","$","changeStartHourValuesEvent","recordPreSave","record","progressIndicatorElement","progressIndicator","showPnotify","preventDefault","verifyFormData","done","result","fail","error","aDeferred","Deferred","verifyData","resolve","reject","promise","request","_super","getForm","triggerHourFormatChangeEvent","registerRecordPreSaveEvent","registerChangeEventForCurrencySeparator"],"mappings":";;AAAA;;;;;;;;;AASA;AAEAA,eAAe,eAAf,EAAgC;;;;0CAIU,mDAAY;MAChDC,OAAOC,OAAO,MAAP,CAAX;SACO,qCAAP,EAA8CD,IAA9C,EAAoDE,EAApD,CAAuD,QAAvD,EAAiE,UAAUC,CAAV,EAAa;OACzEC,UAAUH,OAAOE,EAAEE,aAAT,CAAd;OACIC,gBAAgBF,QAAQG,GAAR,EAApB;OACIC,yBAAyBP,OAAO,sCAAP,EAA+CD,IAA/C,EAAqDS,IAArD,CAA0D,eAA1D,CAA7B;OACID,0BAA0BF,aAA9B,EAA6C;QACxCI,UAAUC,IAAIC,UAAJ,CAAe,0DAAf,CAAd;QACIC,SAAS;WACNH,OADM;WAEN;KAFP;qBAIiBI,WAAjB,CAA6BD,MAA7B;QACIE,wBAAwBX,QAAQK,IAAR,CAAa,eAAb,CAA5B;YACQO,IAAR,CAAa,QAAb,EAAuBC,UAAvB,CAAkC,UAAlC;YACQD,IAAR,CAAa,mBAAmBD,qBAAnB,GAA2C,IAAxD,EAA8DG,IAA9D,CAAmE,UAAnE,EAA+E,UAA/E;YACQC,OAAR,CAAgB,QAAhB;IAVD,MAWO;YACEV,IAAR,CAAa,eAAb,EAA8BH,aAA9B;;GAhBF;SAmBO,sCAAP,EAA+CN,IAA/C,EAAqDE,EAArD,CAAwD,QAAxD,EAAkE,UAAUC,CAAV,EAAa;OAC1EC,UAAUH,OAAOE,EAAEE,aAAT,CAAd;OACIC,gBAAgBF,QAAQG,GAAR,EAApB;OACIa,wBAAwBnB,OAAO,qCAAP,EAA8CD,IAA9C,EAAoDS,IAApD,CAAyD,eAAzD,CAA5B;OACIW,yBAAyBd,aAA7B,EAA4C;QACvCI,UAAUC,IAAIC,UAAJ,CAAe,0DAAf,CAAd;QACIC,SAAS;WACNH,OADM;WAEN;KAFP;qBAIiBI,WAAjB,CAA6BD,MAA7B;QACIE,wBAAwBX,QAAQK,IAAR,CAAa,eAAb,CAA5B;YACQO,IAAR,CAAa,QAAb,EAAuBC,UAAvB,CAAkC,UAAlC;YACQD,IAAR,CAAa,mBAAmBD,qBAAnB,GAA2C,IAAxD,EAA8DG,IAA9D,CAAmE,UAAnE,EAA+E,UAA/E;YACQC,OAAR,CAAgB,QAAhB;IAVD,MAWO;YACEV,IAAR,CAAa,eAAb,EAA8BH,aAA9B;;GAhBF;;;CAzBF,EA8CG;sBACmB,EADnB;sBAEmB,EAFnB;iBAGc,EAHd;;6BAK0B,KAL1B;gCAM6B,yCAAY,EANzC;gBASa,uBAAUe,IAAV,EAAgBC,YAAhB,EAA8B;MACxCC,UAAU,EAAd;OACK,IAAIC,GAAT,IAAgBH,IAAhB,EAAsB;;OAEjBA,KAAKI,cAAL,CAAoBD,GAApB,CAAJ,EAA8B;QACzBE,iBAAiBL,KAAKG,GAAL,CAArB;eACW,oBAAoBA,GAApB,GAA0B,GAArC;QACIA,OAAOF,YAAX,EAAyB;gBACb,uBAAX;;eAEU,MAAMI,cAAN,GAAuB,WAAlC;;;SAGKH,OAAP;EAtBC;6BAwB0B,oCAAUvB,IAAV,EAAgB;MACvC2B,eAAe,IAAnB;OACKzB,EAAL,CAAQ,QAAR,EAAkB,4BAAlB,EAAgD,UAAUC,CAAV,EAAa;OACxDyB,gBAAgB3B,OAAOE,EAAEE,aAAT,EAAwBE,GAAxB,EAApB;OACIsB,mBAAmB5B,OAAO,2BAAP,EAAoCD,IAApC,CAAvB;OACI8B,iBAAiB7B,OAAO,yBAAP,EAAkCD,IAAlC,CAArB;OACI+B,yBAAyBF,iBAAiBtB,GAAjB,EAA7B;OACIyB,uBAAuBF,eAAevB,GAAf,EAA3B;OACI,OAAOoB,aAAaM,0BAApB,KAAmD,WAAvD,EAAoE;WAC5D,KAAP;;OAEGZ,OAAOM,aAAaM,0BAAb,CAAwC,aAAxC,EAAuDL,aAAvD,EAAsE,YAAtE,CAAX;oBACiBM,IAAjB,CAAsBP,aAAaQ,aAAb,CAA2Bd,IAA3B,EAAiCU,sBAAjC,CAAtB,EAAgFZ,OAAhF,CAAwF,QAAxF;kBACee,IAAf,CAAoBP,aAAaQ,aAAb,CAA2Bd,IAA3B,EAAiCW,oBAAjC,CAApB,EAA4Eb,OAA5E,CAAoF,QAApF;GAXD;EA1BC;6BAAA,wCAwC2BnB,IAxC3B,EAwCiC;OAC7BiC,0BAAL,GAAkCG,EAAE,iCAAF,EAAqCpC,IAArC,EAA2CS,IAA3C,CAAgD,OAAhD,CAAlC;OACK4B,0BAAL,CAAgCrC,IAAhC;IACE,4BAAF,EAAgCA,IAAhC,EAAsCmB,OAAtC,CAA8C,QAA9C;EA3CC;;;;;6BAgD0B,oCAAUnB,IAAV,EAAgB;MACvC2B,eAAe,IAAnB;OACKzB,EAAL,CAAQH,eAAeuC,aAAvB,EAAsC,UAAUnC,CAAV,EAAaM,IAAb,EAAmB;OACpD8B,SAAStC,OAAO,sBAAP,EAA+BM,GAA/B,EAAb;OACIiC,2BAA2BvC,OAAOwC,iBAAP,CAAyB;eAC5C9B,IAAIC,UAAJ,CAAe,qBAAf,CAD4C;gBAE3C,MAF2C;iBAG1C;gBACD;;IAJkB,CAA/B;OAOI,CAAC2B,MAAD,IAAWtC,OAAO,6BAAP,EAAsCM,GAAtC,MAA+CN,OAAO,gCAAP,EAAyCM,GAAzC,EAA9D,EAA8G;qBAC5FmC,WAAjB,CAA6B/B,IAAIC,UAAJ,CAAe,sBAAf,CAA7B;6BACyB6B,iBAAzB,CAA2C,EAAC,QAAQ,MAAT,EAA3C;MACEE,cAAF;;gBAEYC,cAAb,GACEC,IADF,CACO,UAAUpC,IAAV,EAAgB;QACjBA,KAAKqC,MAAL,CAAYpC,OAAhB,EAAyB;sBACPgC,WAAjB,CAA6BjC,KAAKqC,MAAL,CAAYpC,OAAzC;8BACyB+B,iBAAzB,CAA2C,EAAC,QAAQ,MAAT,EAA3C;OACEE,cAAF;;IALH,EAQEI,IARF,CAQO,UAAUtC,IAAV,EAAgBuC,KAAhB,EAAuB;6BACHP,iBAAzB,CAA2C,EAAC,QAAQ,MAAT,EAA3C;MACEE,cAAF;IAVF;GAdD;EAlDC;iBA8Ec,0BAAY;MACvBM,YAAYhD,OAAOiD,QAAP,EAAhB;MACIvB,eAAe,IAAnB;eACawB,UAAb,GAA0BN,IAA1B,CAA+B,UAAUpC,IAAV,EAAgB;aACpC2C,OAAV,CAAkB3C,IAAlB;GADD,EAEG,UAAUA,IAAV,EAAgBuC,KAAhB,EAAuB;aACfK,MAAV;GAHD;SAKOJ,UAAUK,OAAV,EAAP;EAtFC;aAwFU,sBAAY;MACnBL,YAAYhD,OAAOiD,QAAP,EAAhB;eACaK,OAAb,CAAqB;UACb,KADa;SAEd;YACG,OADH;YAEG,YAFH;WAGEtD,OAAO,iBAAP,EAA0BM,GAA1B,EAHF;cAIKN,OAAO,yBAAP,EAAkCM,GAAlC,EAJL;YAKGN,OAAO,sBAAP,EAA+BM,GAA/B,EALH;cAMKN,OAAO,6BAAP,EAAsCM,GAAtC;;;GARZ,EAWGsC,IAXH,CAWQ,UAAUpC,IAAV,EAAgB;OACnBA,KAAKqC,MAAT,EAAiB;cACNM,OAAV,CAAkB3C,IAAlB;IADD,MAEO;cACI4C,MAAV,CAAiB5C,IAAjB;;GAfF;SAkBOwC,UAAUK,OAAV,EAAP;EA5GC;iBA8Gc,0BAAY;OACtBE,MAAL;MACIxD,OAAO,KAAKyD,OAAL,EAAX;OACKC,4BAAL,CAAkC1D,IAAlC;OACK2D,0BAAL,CAAgC3D,IAAhC;gBACc4D,uCAAd;;CAjKF"}