{"version":3,"file":"TwoFactorAuthenticationModal.min.js","sources":["TwoFactorAuthenticationModal.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\n$.Class(\"Base_TwoFactorAuthenticationModal_JS\", {}, {\n\t/**\n\t * Function to handle sending the AJAX form\n\t * @param data\n\t */\n\tregisterSubmitFrom(data) {\n\t\tdata.find('button[name=saveButton]').prop(\"disabled\", true);\n\t\tdata.find('input[name=user_code]').on('keyup', (e) => {\n\t\t\tif (e.keyCode !== 13) {\n\t\t\t\tdata.find('button[name=saveButton]').prop(\"disabled\", $(e.currentTarget).val().length === 0);\n\t\t\t}\n\t\t});\n\t\tdata.find('input[name=user_code]').on('change', (e) => {\n\t\t\tdata.find('button[name=saveButton]').prop(\"disabled\", $(e.currentTarget).val().length === 0);\n\t\t});\n\t\tdata.find('input[name=turn_off_2fa]').on('change', (e) => {\n\t\t\tif ($(e.currentTarget).prop(\"checked\")) {\n\t\t\t\tdata.find('.js-qr-code,.js-user-code').addClass('hide');\n\t\t\t\tdata.find('input[name=mode]').val('off');\n\t\t\t\tdata.find('button[name=saveButton]').prop(\"disabled\", false);\n\t\t\t} else {\n\t\t\t\tdata.find('.js-qr-code,.js-user-code').removeClass('hide');\n\t\t\t\tdata.find('input[name=mode]').val('secret');\n\t\t\t\tdata.find('button[name=saveButton]').prop(\"disabled\", true);\n\t\t\t\tdata.find('input[name=user_code]').val('');\n\t\t\t}\n\t\t});\n\t\tlet form = data.find('form');\n\t\tform.on('submit', (e) => {\n\t\t\tlet progress = $.progressIndicator({blockInfo: {'enabled': true}});\n\t\t\tAppConnector.request(form.serializeFormData()).done((respons) => {\n\t\t\t\tif (respons.result.success) {\n\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\ttext: app.vtranslate(respons.result.message),\n\t\t\t\t\t\ttype: 'success',\n\t\t\t\t\t\tanimation: 'show'\n\t\t\t\t\t});\n\t\t\t\t\tif (app.getModuleName() === 'Users') {\n\t\t\t\t\t\tlocation.reload();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tlet wrongCode = form.find('.js-wrong-code');\n\t\t\t\t\tif (wrongCode.hasClass('hide')) {\n\t\t\t\t\t\twrongCode.removeClass('hide');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tprogress.progressIndicator({mode: 'hide'});\n\t\t\t});\n\t\t\te.preventDefault();\n\t\t});\n\t},\n\t/**\n\t * Register base events\n\t * @param {jQuery} modalContainer\n\t */\n\tregisterEvents(modalContainer) {\n\t\tthis.registerSubmitFrom(modalContainer);\n\t}\n});\n"],"names":["$","Class","data","find","prop","on","e","keyCode","currentTarget","val","length","addClass","removeClass","form","progress","progressIndicator","blockInfo","enabled","request","serializeFormData","done","respons","result","success","hideModalWindow","showPnotify","app","vtranslate","message","getModuleName","reload","wrongCode","hasClass","mode","preventDefault","modalContainer","registerSubmitFrom"],"mappings":"aAGAA,EAAEC,MAAM,uCAAwC,GAAI,6BAKhCC,WACbC,KAAK,2BAA2BC,KAAK,YAAY,QACjDD,KAAK,yBAAyBE,GAAG,SAAS,SAACC,GAC7B,KAAdA,EAAEC,cACAJ,KAAK,2BAA2BC,KAAK,WAAgD,IAApCJ,EAAEM,EAAEE,eAAeC,MAAMC,gBAG5EP,KAAK,yBAAyBE,GAAG,UAAU,SAACC,QAC3CH,KAAK,2BAA2BC,KAAK,WAAgD,IAApCJ,EAAEM,EAAEE,eAAeC,MAAMC,gBAE3EP,KAAK,4BAA4BE,GAAG,UAAU,SAACC,GAC/CN,EAAEM,EAAEE,eAAeJ,KAAK,iBACtBD,KAAK,6BAA6BQ,SAAS,aAC3CR,KAAK,oBAAoBM,IAAI,YAC7BN,KAAK,2BAA2BC,KAAK,YAAY,UAEjDD,KAAK,6BAA6BS,YAAY,aAC9CT,KAAK,oBAAoBM,IAAI,eAC7BN,KAAK,2BAA2BC,KAAK,YAAY,QACjDD,KAAK,yBAAyBM,IAAI,YAGrCI,KAAOX,KAAKC,KAAK,aAChBE,GAAG,UAAU,SAACC,OACdQ,SAAWd,EAAEe,kBAAkB,CAACC,UAAW,CAACC,SAAW,kBAC9CC,QAAQL,KAAKM,qBAAqBC,MAAK,SAACC,YAChDA,QAAQC,OAAOC,YACdC,mCACaC,YAAY,MACtBC,IAAIC,WAAWN,QAAQC,OAAOM,cAC9B,oBACK,SAEgB,UAAxBF,IAAIG,0BACEC,aAEJ,KACFC,UAAYlB,KAAKV,KAAK,kBACtB4B,UAAUC,SAAS,mBACZpB,YAAY,iBAGfG,kBAAkB,CAACkB,KAAM,cAEjCC,6CAOWC,qBACTC,mBAAmBD"}