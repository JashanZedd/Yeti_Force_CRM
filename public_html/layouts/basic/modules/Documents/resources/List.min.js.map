{"version":3,"file":"List.min.js","sources":["List.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n *************************************************************************************/\n'use strict';\n\nVtiger_List_Js(\n\t'Documents_List_Js',\n\t{\n\t\tmassMove: function (url) {\n\t\t\tvar listInstance = Vtiger_List_Js.getInstance();\n\t\t\tvar validationResult = listInstance.checkListRecordSelected();\n\t\t\tif (validationResult != true) {\n\t\t\t\tvar selectedIds = listInstance.readSelectedIds(true);\n\t\t\t\tvar excludedIds = listInstance.readExcludedIds(true);\n\t\t\t\tvar cvId = listInstance.getCurrentCvId();\n\t\t\t\tvar postData = {\n\t\t\t\t\tselected_ids: selectedIds,\n\t\t\t\t\texcluded_ids: excludedIds,\n\t\t\t\t\tviewname: cvId\n\t\t\t\t};\n\n\t\t\t\tvar searchValue = listInstance.getAlphabetSearchValue();\n\n\t\t\t\tif (searchValue.length > 0) {\n\t\t\t\t\tpostData['search_key'] = listInstance.getAlphabetSearchField();\n\t\t\t\t\tpostData['search_value'] = searchValue;\n\t\t\t\t\tpostData['operator'] = 's';\n\t\t\t\t}\n\n\t\t\t\tvar params = {\n\t\t\t\t\turl: url,\n\t\t\t\t\tdata: postData\n\t\t\t\t};\n\t\t\t\tvar progressIndicatorElement = jQuery.progressIndicator();\n\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tvar callBackFunction = function (data) {\n\t\t\t\t\t\tlistInstance.moveDocuments().done(function (data) {\n\t\t\t\t\t\t\tif (data) {\n\t\t\t\t\t\t\t\tvar result = data.result;\n\t\t\t\t\t\t\t\tif (result.success) {\n\t\t\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\t\t\ttitle: app.vtranslate('JS_MOVE_DOCUMENTS'),\n\t\t\t\t\t\t\t\t\t\ttext: result.message,\n\t\t\t\t\t\t\t\t\t\tdelay: '2000',\n\t\t\t\t\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tvar urlParams = listInstance.getDefaultParams();\n\t\t\t\t\t\t\t\t\tlistInstance.getListViewRecords(urlParams);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\t\t\ttitle: app.vtranslate('JS_OPERATION_DENIED'),\n\t\t\t\t\t\t\t\t\t\ttext: result.message,\n\t\t\t\t\t\t\t\t\t\tdelay: '2000',\n\t\t\t\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t};\n\t\t\t\t\tapp.showModalWindow(data, callBackFunction);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tlistInstance.noRecordSelectedAlert();\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tmoveDocuments: function () {\n\t\t\tvar aDeferred = jQuery.Deferred();\n\t\t\tjQuery('#moveDocuments').on('submit', function (e) {\n\t\t\t\tvar formData = jQuery(e.currentTarget).serializeFormData();\n\t\t\t\tAppConnector.request(formData)\n\t\t\t\t\t.done(function (data) {\n\t\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function (textStatus, errorThrown) {\n\t\t\t\t\t\taDeferred.reject(textStatus, errorThrown);\n\t\t\t\t\t});\n\t\t\t\te.preventDefault();\n\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\tregisterDeleteFilterClickEvent: function () {\n\t\t\tconst self = this;\n\t\t\tlet listViewFilterBlock = this.getFilterBlock();\n\t\t\tif (listViewFilterBlock != false) {\n\t\t\t\t//used mouseup event to stop the propagation of customfilter select change event.\n\t\t\t\tlistViewFilterBlock.on('mouseup', '.js-filter-delete', function (event) {\n\t\t\t\t\t//to close the dropdown\n\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\tself.getFilterSelectElement().data('select2').close();\n\t\t\t\t\tlet liElement = jQuery(event.currentTarget).closest('.select2-results__option');\n\t\t\t\t\tlet message = app.vtranslate('JS_LBL_ARE_YOU_SURE_YOU_WANT_TO_DELETE');\n\t\t\t\t\tif (liElement.hasClass('folderOption')) {\n\t\t\t\t\t\tif (liElement.find('.js-filter-delete').hasClass('dull')) {\n\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\ttext: app.vtranslate('JS_FOLDER_IS_NOT_EMPTY'),\n\t\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tapp.showConfirmModal({\n\t\t\t\t\t\t\t\ttext: message,\n\t\t\t\t\t\t\t\tconfirmedCallback: () => {\n\t\t\t\t\t\t\t\t\tlet currentOptionElement = self.getSelectOptionFromChosenOption(liElement);\n\t\t\t\t\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\t\t\t\t\t\tmode: 'delete',\n\t\t\t\t\t\t\t\t\t\taction: 'Folder',\n\t\t\t\t\t\t\t\t\t\tfolderid: currentOptionElement.data('folderid')\n\t\t\t\t\t\t\t\t\t}).done(function (data) {\n\t\t\t\t\t\t\t\t\t\tif (data.success) {\n\t\t\t\t\t\t\t\t\t\t\tcurrentOptionElement.remove();\n\t\t\t\t\t\t\t\t\t\t\tself.getFilterSelectElement().trigger('change');\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tapp.showConfirmModal({\n\t\t\t\t\t\t\ttext: message,\n\t\t\t\t\t\t\tconfirmedCallback: () => {\n\t\t\t\t\t\t\t\tAppConnector.requestForm(self.getSelectOptionFromChosenOption(liElement).data('deleteurl'));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n);\n"],"names":["Vtiger_List_Js","massMove","url","listInstance","getInstance","validationResult","checkListRecordSelected","selectedIds","readSelectedIds","excludedIds","readExcludedIds","cvId","getCurrentCvId","postData","selected_ids","excluded_ids","viewname","searchValue","getAlphabetSearchValue","length","getAlphabetSearchField","progressIndicatorElement","jQuery","progressIndicator","AppConnector","request","data","done","mode","app","showModalWindow","callBackFunction","moveDocuments","result","success","hideModalWindow","showNotify","title","vtranslate","text","message","delay","type","urlParams","getDefaultParams","getListViewRecords","noRecordSelectedAlert","aDeferred","Deferred","on","e","formData","currentTarget","serializeFormData","resolve","fail","textStatus","errorThrown","reject","preventDefault","promise","registerDeleteFilterClickEvent","self","listViewFilterBlock","getFilterBlock","event","stopPropagation","getFilterSelectElement","close","liElement","closest","hasClass","find","showConfirmModal","confirmedCallback","currentOptionElement","getSelectOptionFromChosenOption","module","getModuleName","action","folderid","remove","trigger","requestForm"],"mappings":"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"}