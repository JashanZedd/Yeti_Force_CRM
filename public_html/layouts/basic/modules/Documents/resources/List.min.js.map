{"version":3,"file":"List.min.js","sources":["List.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n *************************************************************************************/\n'use strict';\n\nVtiger_List_Js(\"Documents_List_Js\", {\n\tmassMove: function (url) {\n\t\tvar listInstance = Vtiger_List_Js.getInstance();\n\t\tvar validationResult = listInstance.checkListRecordSelected();\n\t\tif (validationResult != true) {\n\t\t\tvar selectedIds = listInstance.readSelectedIds(true);\n\t\t\tvar excludedIds = listInstance.readExcludedIds(true);\n\t\t\tvar cvId = listInstance.getCurrentCvId();\n\t\t\tvar postData = {\n\t\t\t\t\"selected_ids\": selectedIds,\n\t\t\t\t\"excluded_ids\": excludedIds,\n\t\t\t\t\"viewname\": cvId\n\t\t\t};\n\n\t\t\tvar searchValue = listInstance.getAlphabetSearchValue();\n\n\t\t\tif (searchValue.length > 0) {\n\t\t\t\tpostData['search_key'] = listInstance.getAlphabetSearchField();\n\t\t\t\tpostData['search_value'] = searchValue;\n\t\t\t\tpostData['operator'] = \"s\";\n\t\t\t}\n\n\t\t\tvar params = {\n\t\t\t\t\"url\": url,\n\t\t\t\t\"data\": postData\n\t\t\t};\n\t\t\tvar progressIndicatorElement = jQuery.progressIndicator();\n\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\tprogressIndicatorElement.progressIndicator({'mode': 'hide'});\n\t\t\t\tvar callBackFunction = function (data) {\n\t\t\t\t\tlistInstance.moveDocuments().done(function (data) {\n\t\t\t\t\t\tif (data) {\n\t\t\t\t\t\t\tvar result = data.result;\n\t\t\t\t\t\t\tif (result.success) {\n\t\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\t\t\t\ttitle: app.vtranslate('JS_MOVE_DOCUMENTS'),\n\t\t\t\t\t\t\t\t\ttext: result.message,\n\t\t\t\t\t\t\t\t\tdelay: '2000',\n\t\t\t\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tvar urlParams = listInstance.getDefaultParams();\n\t\t\t\t\t\t\t\tlistInstance.getListViewRecords(urlParams);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\t\t\t\ttitle: app.vtranslate('JS_OPERATION_DENIED'),\n\t\t\t\t\t\t\t\t\ttext: result.message,\n\t\t\t\t\t\t\t\t\tdelay: '2000',\n\t\t\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t\tapp.showModalWindow(data, callBackFunction);\n\t\t\t});\n\t\t} else {\n\t\t\tlistInstance.noRecordSelectedAlert();\n\t\t}\n\n\t}\n\n}, {\n\tmoveDocuments: function () {\n\t\tvar aDeferred = jQuery.Deferred();\n\t\tjQuery('#moveDocuments').on('submit', function (e) {\n\t\t\tvar formData = jQuery(e.currentTarget).serializeFormData();\n\t\t\tAppConnector.request(formData).done(function (data) {\n\t\t\t\taDeferred.resolve(data);\n\t\t\t}).fail(function (textStatus, errorThrown) {\n\t\t\t\taDeferred.reject(textStatus, errorThrown);\n\t\t\t});\n\t\t\te.preventDefault();\n\t\t});\n\t\treturn aDeferred.promise();\n\t},\n\tregisterDeleteFilterClickEvent: function () {\n\t\tvar thisInstance = this;\n\n\t\tvar listViewFilterBlock = this.getFilterBlock();\n\t\tif (listViewFilterBlock != false) {\n\t\t\t//used mouseup event to stop the propagation of customfilter select change event.\n\t\t\tlistViewFilterBlock.on('mouseup', '.js-filter-delete', function (event) {\n\t\t\t\t//to close the dropdown\n\t\t\t\tevent.stopPropagation();\n\t\t\t\tthisInstance.getFilterSelectElement().data('select2').close();\n\t\t\t\tvar liElement = jQuery(event.currentTarget).closest('.select2-results__option');\n\t\t\t\tvar message = app.vtranslate('JS_LBL_ARE_YOU_SURE_YOU_WANT_TO_DELETE');\n\t\t\t\tif (liElement.hasClass('folderOption')) {\n\t\t\t\t\tif (liElement.find('.js-filter-delete').hasClass('dull')) {\n\t\t\t\t\t\tVtiger_Helper_Js.showPnotify(app.vtranslate('JS_FOLDER_IS_NOT_EMPTY'));\n\t\t\t\t\t\treturn;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tVtiger_Helper_Js.showConfirmationBox({'message': message}).done(function (e) {\n\t\t\t\t\t\t\tvar currentOptionElement = thisInstance.getSelectOptionFromChosenOption(liElement);\n\t\t\t\t\t\t\tvar folderId = currentOptionElement.data('folderid');\n\t\t\t\t\t\t\tvar params = {\n\t\t\t\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\t\t\t\tmode: 'delete',\n\t\t\t\t\t\t\t\taction: 'Folder',\n\t\t\t\t\t\t\t\tfolderid: folderId\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\t\t\t\tif (data.success) {\n\t\t\t\t\t\t\t\t\tcurrentOptionElement.remove();\n\t\t\t\t\t\t\t\t\tthisInstance.getFilterSelectElement().trigger('change');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\t\t\t\t\tVtiger_Helper_Js.showConfirmationBox({'message': message}).done(function (e) {\n\t\t\t\t\t\tvar currentOptionElement = thisInstance.getSelectOptionFromChosenOption(liElement);\n\t\t\t\t\t\tAppConnector.requestForm(currentOptionElement.data('deleteurl'));\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n});\n"],"names":["Vtiger_List_Js","url","listInstance","getInstance","checkListRecordSelected","postData","readSelectedIds","readExcludedIds","getCurrentCvId","searchValue","getAlphabetSearchValue","length","getAlphabetSearchField","params","progressIndicatorElement","jQuery","progressIndicator","request","done","data","mode","showModalWindow","moveDocuments","result","success","hideModalWindow","showPnotify","app","vtranslate","message","urlParams","getDefaultParams","getListViewRecords","noRecordSelectedAlert","aDeferred","Deferred","on","e","formData","currentTarget","serializeFormData","resolve","fail","textStatus","errorThrown","reject","preventDefault","promise","thisInstance","this","listViewFilterBlock","getFilterBlock","event","stopPropagation","getFilterSelectElement","close","liElement","closest","hasClass","find","showConfirmationBox","currentOptionElement","getSelectOptionFromChosenOption","folderId","getModuleName","remove","trigger","requestForm"],"mappings":"aAUAA,eAAe,oBAAqB,UACzB,SAAUC,SACfC,aAAeF,eAAeG,iBAEV,GADDD,aAAaE,0BACN,KAIzBC,SAAW,cAHGH,aAAaI,iBAAgB,gBAC7BJ,aAAaK,iBAAgB,YACpCL,aAAaM,kBAOpBC,YAAcP,aAAaQ,yBAE3BD,YAAYE,OAAS,aACxB,WAAyBT,aAAaU,kCACtC,aAA2BH,qBAC3B,SAAuB,SAGpBI,OAAS,KACLZ,SACCI,UAELS,yBAA2BC,OAAOC,iCACzBC,QAAQJ,QAAQK,MAAK,SAAUC,+BAClBH,kBAAkB,CAACI,KAAQ,aA0BhDC,gBAAgBF,MAzBG,SAAUA,mBACnBG,gBAAgBJ,MAAK,SAAUC,SACvCA,KAAM,KACLI,OAASJ,KAAKI,UACdA,OAAOC,QAAS,KACfC,mCACaC,YAAY,OACrBC,IAAIC,WAAW,0BAChBL,OAAOM,cACN,YACD,gBAEHC,UAAY5B,aAAa6B,gCAChBC,mBAAmBF,iCAEfJ,YAAY,OACrBC,IAAIC,WAAW,4BAChBL,OAAOM,cACN,YACD,sCASCI,0BAKb,eACa,eACVC,UAAYnB,OAAOoB,yBAChB,kBAAkBC,GAAG,UAAU,SAAUC,OAC3CC,SAAWvB,OAAOsB,EAAEE,eAAeC,iCAC1BvB,QAAQqB,UAAUpB,MAAK,SAAUC,gBACnCsB,QAAQtB,SAChBuB,MAAK,SAAUC,WAAYC,uBACnBC,OAAOF,WAAYC,kBAE5BE,oBAEIZ,UAAUa,0CAEc,eAC3BC,aAAeC,KAEfC,oBAAsBD,KAAKE,iBACJ,GAAvBD,yCAEiBd,GAAG,UAAW,qBAAqB,SAAUgB,aAE1DC,+BACOC,yBAAyBnC,KAAK,WAAWoC,YAClDC,UAAYzC,OAAOqC,MAAMb,eAAekB,QAAQ,4BAChD5B,QAAUF,IAAIC,WAAW,6CACzB4B,UAAUE,SAAS,gBAAiB,IACnCF,UAAUG,KAAK,qBAAqBD,SAAS,qCAC/BhC,YAAYC,IAAIC,WAAW,4CAG3BgC,oBAAoB,CAAC/B,QAAWA,UAAUX,MAAK,SAAUmB,OACrEwB,qBAAuBb,aAAac,gCAAgCN,WACpEO,SAAWF,qBAAqB1C,KAAK,YACrCN,OAAS,QACJc,IAAIqC,qBACN,gBACE,kBACED,uBAEE9C,QAAQJ,QAAQK,MAAK,SAAUC,MACvCA,KAAKK,+BACayC,sBACRX,yBAAyBY,QAAQ,uCAOjCN,oBAAoB,CAAC/B,QAAWA,UAAUX,MAAK,SAAUmB,OACrEwB,qBAAuBb,aAAac,gCAAgCN,wBAC3DW,YAAYN,qBAAqB1C,KAAK"}