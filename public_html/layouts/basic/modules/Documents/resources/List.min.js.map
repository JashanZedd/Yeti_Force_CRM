{"version":3,"file":"List.min.js","sources":["List.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n *************************************************************************************/\n'use strict';\n\nVtiger_List_Js(\"Documents_List_Js\", {\n\tmassMove: function (url) {\n\t\tvar listInstance = Vtiger_List_Js.getInstance();\n\t\tvar validationResult = listInstance.checkListRecordSelected();\n\t\tif (validationResult != true) {\n\t\t\tvar selectedIds = listInstance.readSelectedIds(true);\n\t\t\tvar excludedIds = listInstance.readExcludedIds(true);\n\t\t\tvar cvId = listInstance.getCurrentCvId();\n\t\t\tvar postData = {\n\t\t\t\t\"selected_ids\": selectedIds,\n\t\t\t\t\"excluded_ids\": excludedIds,\n\t\t\t\t\"viewname\": cvId\n\t\t\t};\n\n\t\t\tvar searchValue = listInstance.getAlphabetSearchValue();\n\n\t\t\tif (searchValue.length > 0) {\n\t\t\t\tpostData['search_key'] = listInstance.getAlphabetSearchField();\n\t\t\t\tpostData['search_value'] = searchValue;\n\t\t\t\tpostData['operator'] = \"s\";\n\t\t\t}\n\n\t\t\tvar params = {\n\t\t\t\t\"url\": url,\n\t\t\t\t\"data\": postData\n\t\t\t};\n\t\t\tvar progressIndicatorElement = jQuery.progressIndicator();\n\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\tprogressIndicatorElement.progressIndicator({'mode': 'hide'});\n\t\t\t\tvar callBackFunction = function (data) {\n\t\t\t\t\tlistInstance.moveDocuments().done(function (data) {\n\t\t\t\t\t\tif (data) {\n\t\t\t\t\t\t\tvar result = data.result;\n\t\t\t\t\t\t\tif (result.success) {\n\t\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\t\t\t\ttitle: app.vtranslate('JS_MOVE_DOCUMENTS'),\n\t\t\t\t\t\t\t\t\ttext: result.message,\n\t\t\t\t\t\t\t\t\tdelay: '2000',\n\t\t\t\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tvar urlParams = listInstance.getDefaultParams();\n\t\t\t\t\t\t\t\tlistInstance.getListViewRecords(urlParams);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\t\t\t\ttitle: app.vtranslate('JS_OPERATION_DENIED'),\n\t\t\t\t\t\t\t\t\ttext: result.message,\n\t\t\t\t\t\t\t\t\tdelay: '2000',\n\t\t\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t\tapp.showModalWindow(data, callBackFunction);\n\t\t\t});\n\t\t} else {\n\t\t\tlistInstance.noRecordSelectedAlert();\n\t\t}\n\n\t}\n\n}, {\n\tmoveDocuments: function () {\n\t\tvar aDeferred = jQuery.Deferred();\n\t\tjQuery('#moveDocuments').on('submit', function (e) {\n\t\t\tvar formData = jQuery(e.currentTarget).serializeFormData();\n\t\t\tAppConnector.request(formData).done(function (data) {\n\t\t\t\taDeferred.resolve(data);\n\t\t\t}).fail(function (textStatus, errorThrown) {\n\t\t\t\taDeferred.reject(textStatus, errorThrown);\n\t\t\t});\n\t\t\te.preventDefault();\n\t\t});\n\t\treturn aDeferred.promise();\n\t},\n\tregisterDeleteFilterClickEvent: function () {\n\t\tvar thisInstance = this;\n\n\t\tvar listViewFilterBlock = this.getFilterBlock();\n\t\tif (listViewFilterBlock != false) {\n\t\t\t//used mouseup event to stop the propagation of customfilter select change event.\n\t\t\tlistViewFilterBlock.on('mouseup', '.js-filter-delete', function (event) {\n\t\t\t\t//to close the dropdown\n\t\t\t\tevent.stopPropagation();\n\t\t\t\tthisInstance.getFilterSelectElement().data('select2').close();\n\t\t\t\tvar liElement = jQuery(event.currentTarget).closest('.select2-results__option');\n\t\t\t\tvar message = app.vtranslate('JS_LBL_ARE_YOU_SURE_YOU_WANT_TO_DELETE');\n\t\t\t\tif (liElement.hasClass('folderOption')) {\n\t\t\t\t\tif (liElement.find('.js-filter-delete').hasClass('dull')) {\n\t\t\t\t\t\tVtiger_Helper_Js.showPnotify(app.vtranslate('JS_FOLDER_IS_NOT_EMPTY'));\n\t\t\t\t\t\treturn;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tVtiger_Helper_Js.showConfirmationBox({'message': message}).done(function (e) {\n\t\t\t\t\t\t\tvar currentOptionElement = thisInstance.getSelectOptionFromChosenOption(liElement);\n\t\t\t\t\t\t\tvar folderId = currentOptionElement.data('folderid');\n\t\t\t\t\t\t\tvar params = {\n\t\t\t\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\t\t\t\tmode: 'delete',\n\t\t\t\t\t\t\t\taction: 'Folder',\n\t\t\t\t\t\t\t\tfolderid: folderId\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\t\t\t\tif (data.success) {\n\t\t\t\t\t\t\t\t\tcurrentOptionElement.remove();\n\t\t\t\t\t\t\t\t\tthisInstance.getFilterSelectElement().trigger('change');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\t\t\t\t\tVtiger_Helper_Js.showConfirmationBox({'message': message}).done(function (e) {\n\t\t\t\t\t\tvar currentOptionElement = thisInstance.getSelectOptionFromChosenOption(liElement);\n\t\t\t\t\t\tAppConnector.requestForm(currentOptionElement.data('deleteurl'));\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n});\n"],"names":["Vtiger_List_Js","url","listInstance","getInstance","validationResult","checkListRecordSelected","selectedIds","readSelectedIds","excludedIds","readExcludedIds","cvId","getCurrentCvId","postData","searchValue","getAlphabetSearchValue","length","getAlphabetSearchField","params","progressIndicatorElement","jQuery","progressIndicator","request","done","data","callBackFunction","moveDocuments","result","success","hideModalWindow","showPnotify","app","vtranslate","message","urlParams","getDefaultParams","getListViewRecords","showModalWindow","noRecordSelectedAlert","aDeferred","Deferred","on","e","formData","currentTarget","serializeFormData","resolve","fail","textStatus","errorThrown","reject","preventDefault","promise","thisInstance","listViewFilterBlock","getFilterBlock","event","stopPropagation","getFilterSelectElement","close","liElement","closest","hasClass","find","showConfirmationBox","currentOptionElement","getSelectOptionFromChosenOption","folderId","getModuleName","remove","trigger","requestForm"],"mappings":"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"}