{"version":3,"file":"List.min.js","sources":["List.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n *************************************************************************************/\n'use strict';\n\nVtiger_List_Js(\n\t'Documents_List_Js',\n\t{\n\t\tmassMove: function (url) {\n\t\t\tvar listInstance = Vtiger_List_Js.getInstance();\n\t\t\tvar validationResult = listInstance.checkListRecordSelected();\n\t\t\tif (validationResult != true) {\n\t\t\t\tvar selectedIds = listInstance.readSelectedIds(true);\n\t\t\t\tvar excludedIds = listInstance.readExcludedIds(true);\n\t\t\t\tvar cvId = listInstance.getCurrentCvId();\n\t\t\t\tvar postData = {\n\t\t\t\t\tselected_ids: selectedIds,\n\t\t\t\t\texcluded_ids: excludedIds,\n\t\t\t\t\tviewname: cvId\n\t\t\t\t};\n\n\t\t\t\tvar searchValue = listInstance.getAlphabetSearchValue();\n\n\t\t\t\tif (searchValue.length > 0) {\n\t\t\t\t\tpostData['search_key'] = listInstance.getAlphabetSearchField();\n\t\t\t\t\tpostData['search_value'] = searchValue;\n\t\t\t\t\tpostData['operator'] = 's';\n\t\t\t\t}\n\n\t\t\t\tvar params = {\n\t\t\t\t\turl: url,\n\t\t\t\t\tdata: postData\n\t\t\t\t};\n\t\t\t\tvar progressIndicatorElement = jQuery.progressIndicator();\n\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tvar callBackFunction = function (data) {\n\t\t\t\t\t\tlistInstance.moveDocuments().done(function (data) {\n\t\t\t\t\t\t\tif (data) {\n\t\t\t\t\t\t\t\tvar result = data.result;\n\t\t\t\t\t\t\t\tif (result.success) {\n\t\t\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\t\t\ttitle: app.vtranslate('JS_MOVE_DOCUMENTS'),\n\t\t\t\t\t\t\t\t\t\ttext: result.message,\n\t\t\t\t\t\t\t\t\t\tdelay: '2000',\n\t\t\t\t\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tvar urlParams = listInstance.getDefaultParams();\n\t\t\t\t\t\t\t\t\tlistInstance.getListViewRecords(urlParams);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\t\t\ttitle: app.vtranslate('JS_OPERATION_DENIED'),\n\t\t\t\t\t\t\t\t\t\ttext: result.message,\n\t\t\t\t\t\t\t\t\t\tdelay: '2000',\n\t\t\t\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t};\n\t\t\t\t\tapp.showModalWindow(data, callBackFunction);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tlistInstance.noRecordSelectedAlert();\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tmoveDocuments: function () {\n\t\t\tvar aDeferred = jQuery.Deferred();\n\t\t\tjQuery('#moveDocuments').on('submit', function (e) {\n\t\t\t\tvar formData = jQuery(e.currentTarget).serializeFormData();\n\t\t\t\tAppConnector.request(formData)\n\t\t\t\t\t.done(function (data) {\n\t\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function (textStatus, errorThrown) {\n\t\t\t\t\t\taDeferred.reject(textStatus, errorThrown);\n\t\t\t\t\t});\n\t\t\t\te.preventDefault();\n\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\tregisterDeleteFilterClickEvent: function () {\n\t\t\tconst self = this;\n\t\t\tlet listViewFilterBlock = this.getFilterBlock();\n\t\t\tif (listViewFilterBlock != false) {\n\t\t\t\t//used mouseup event to stop the propagation of customfilter select change event.\n\t\t\t\tlistViewFilterBlock.on('mouseup', '.js-filter-delete', function (event) {\n\t\t\t\t\t//to close the dropdown\n\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\tself.getFilterSelectElement().data('select2').close();\n\t\t\t\t\tlet liElement = jQuery(event.currentTarget).closest('.select2-results__option');\n\t\t\t\t\tlet message = app.vtranslate('JS_LBL_ARE_YOU_SURE_YOU_WANT_TO_DELETE');\n\t\t\t\t\tif (liElement.hasClass('folderOption')) {\n\t\t\t\t\t\tif (liElement.find('.js-filter-delete').hasClass('dull')) {\n\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\ttext: app.vtranslate('JS_FOLDER_IS_NOT_EMPTY'),\n\t\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tapp.showConfirmModal({\n\t\t\t\t\t\t\t\ttext: message,\n\t\t\t\t\t\t\t\tconfirmedCallback: () => {\n\t\t\t\t\t\t\t\t\tlet currentOptionElement = self.getSelectOptionFromChosenOption(liElement);\n\t\t\t\t\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\t\t\t\t\t\tmode: 'delete',\n\t\t\t\t\t\t\t\t\t\taction: 'Folder',\n\t\t\t\t\t\t\t\t\t\tfolderid: currentOptionElement.data('folderid')\n\t\t\t\t\t\t\t\t\t}).done(function (data) {\n\t\t\t\t\t\t\t\t\t\tif (data.success) {\n\t\t\t\t\t\t\t\t\t\t\tcurrentOptionElement.remove();\n\t\t\t\t\t\t\t\t\t\t\tself.getFilterSelectElement().trigger('change');\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tapp.showConfirmModal({\n\t\t\t\t\t\t\ttext: message,\n\t\t\t\t\t\t\tconfirmedCallback: () => {\n\t\t\t\t\t\t\t\tAppConnector.requestForm(self.getSelectOptionFromChosenOption(liElement).data('deleteurl'));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n);\n"],"names":["Vtiger_List_Js","massMove","url","getInstance","validationResult","listInstance","checkListRecordSelected","readSelectedIds","excludedIds","readExcludedIds","cvId","getCurrentCvId","postData","selected_ids","selectedIds","excluded_ids","viewname","searchValue","getAlphabetSearchValue","length","getAlphabetSearchField","progressIndicatorElement","jQuery","progressIndicator","AppConnector","request","data","done","mode","app","showModalWindow","moveDocuments","result","success","hideModalWindow","showNotify","title","vtranslate","text","message","delay","type","getDefaultParams","getListViewRecords","urlParams","noRecordSelectedAlert","Deferred","on","e","currentTarget","serializeFormData","formData","aDeferred","resolve","fail","textStatus","errorThrown","reject","preventDefault","promise","registerDeleteFilterClickEvent","self","listViewFilterBlock","getFilterBlock","event","stopPropagation","getFilterSelectElement","close","closest","liElement","hasClass","find","showConfirmModal","confirmedCallback","getSelectOptionFromChosenOption","module","getModuleName","action","folderid","currentOptionElement","remove","trigger","requestForm"],"mappings":"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"}