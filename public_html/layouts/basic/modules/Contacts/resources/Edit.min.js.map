{"version":3,"file":"Edit.min.js","sources":["Edit.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n *************************************************************************************/\n'use strict';\n\nVtiger_Edit_Js(\"Contacts_Edit_Js\", {}, {\n\n\t/**\n\t * Function to check for Portal User\n\t */\n\tcheckForPortalUser: function (form) {\n\t\tvar element = jQuery('[name=\"portal\"]', form);\n\t\tvar response = element.is(':checked');\n\t\tvar primaryEmailField = jQuery('[name=\"email\"]');\n\t\tvar primaryEmailValue = primaryEmailField.val();\n\t\tif (response) {\n\t\t\tif (primaryEmailField.length == 0) {\n\t\t\t\tVtiger_Helper_Js.showPnotify(app.vtranslate('JS_PRIMARY_EMAIL_FIELD_DOES_NOT_EXISTS'));\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (primaryEmailValue == \"\") {\n\t\t\t\tVtiger_Helper_Js.showPnotify(app.vtranslate('JS_PLEASE_ENTER_PRIMARY_EMAIL_VALUE_TO_ENABLE_PORTAL_USER'));\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t},\n\n\t/**\n\t * Function to register recordpresave event\n\t */\n\tregisterRecordPreSaveEvent: function (form) {\n\t\tvar thisInstance = this;\n\t\tif (typeof form === \"undefined\") {\n\t\t\tform = this.getForm();\n\t\t}\n\n\t\tform.on(Vtiger_Edit_Js.recordPreSave, function (e, data) {\n\t\t\tvar result = thisInstance.checkForPortalUser(form);\n\t\t\tif (!result) {\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t});\n\t},\n\n\tregisterBasicEvents: function (container) {\n\t\tthis._super(container);\n\t\tthis.registerRecordPreSaveEvent(container);\n\t}\n});\n"],"names":["Vtiger_Edit_Js","form","element","jQuery","response","is","primaryEmailField","primaryEmailValue","val","length","showPnotify","app","vtranslate","thisInstance","getForm","on","recordPreSave","e","data","result","checkForPortalUser","preventDefault","container","_super","registerRecordPreSaveEvent"],"mappings":";;AAAA;;;;;;;;AAQA;AAEAA,eAAe,kBAAf,EAAmC,EAAnC,EAAuC;;;;;qBAKlB,4BAAUC,IAAV,EAAgB;MAC/BC,UAAUC,OAAO,iBAAP,EAA0BF,IAA1B,CAAd;MACIG,WAAWF,QAAQG,EAAR,CAAW,UAAX,CAAf;MACIC,oBAAoBH,OAAO,gBAAP,CAAxB;MACII,oBAAoBD,kBAAkBE,GAAlB,EAAxB;MACIJ,QAAJ,EAAc;OACTE,kBAAkBG,MAAlB,IAA4B,CAAhC,EAAmC;qBACjBC,WAAjB,CAA6BC,IAAIC,UAAJ,CAAe,wCAAf,CAA7B;WACO,KAAP;;OAEGL,qBAAqB,EAAzB,EAA6B;qBACXG,WAAjB,CAA6BC,IAAIC,UAAJ,CAAe,2DAAf,CAA7B;WACO,KAAP;;;SAGK,IAAP;EApBqC;;;;;6BA0BV,oCAAUX,IAAV,EAAgB;MACvCY,eAAe,IAAnB;MACI,OAAOZ,IAAP,KAAgB,WAApB,EAAiC;UACzB,KAAKa,OAAL,EAAP;;;OAGIC,EAAL,CAAQf,eAAegB,aAAvB,EAAsC,UAAUC,CAAV,EAAaC,IAAb,EAAmB;OACpDC,SAASN,aAAaO,kBAAb,CAAgCnB,IAAhC,CAAb;OACI,CAACkB,MAAL,EAAa;MACVE,cAAF;;GAHF;EAhCqC;;sBAwCjB,6BAAUC,SAAV,EAAqB;OACpCC,MAAL,CAAYD,SAAZ;OACKE,0BAAL,CAAgCF,SAAhC;;CA1CF"}