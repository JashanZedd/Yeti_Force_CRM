"use strict";Vtiger_Detail_Js("Contacts_Detail_Js",{},{hierarchyResponseCache:{},registerRecordPreSaveEvent:function(form){var primaryEmailField=jQuery('[name="email"]');void 0===form&&(form=this.getForm()),form.on(this.fieldPreSave,'[name="portal"]',(function(e,data){var portalField=jQuery(e.currentTarget),primaryEmailValue=primaryEmailField.val(),isAlertAlreadyShown=jQuery(".ui-pnotify").length;portalField.is(":checked")&&(0==primaryEmailField.length&&(isAlertAlreadyShown<=0&&Vtiger_Helper_Js.showPnotify(app.vtranslate("JS_PRIMARY_EMAIL_FIELD_DOES_NOT_EXISTS")),e.preventDefault()),""==primaryEmailValue&&(isAlertAlreadyShown<=0&&Vtiger_Helper_Js.showPnotify(app.vtranslate("JS_PLEASE_ENTER_PRIMARY_EMAIL_VALUE_TO_ENABLE_PORTAL_USER")),e.preventDefault()))}))},getHierarchyResponseData:function(params){var thisInstance=this,aDeferred=jQuery.Deferred();return $.isEmptyObject(thisInstance.hierarchyResponseCache)?AppConnector.request(params).then((function(data){thisInstance.hierarchyResponseCache=data,aDeferred.resolve(thisInstance.hierarchyResponseCache)})):aDeferred.resolve(thisInstance.hierarchyResponseCache),aDeferred.promise()},displayHierarchyResponseData:function(data){var callbackFunction=function(){app.showScrollBar(jQuery("#hierarchyScroll"),{height:"300px",railVisible:!0,size:"6px"})};app.showModalWindow(data,(function(){$("#hierarchyScroll").height()>300&&callbackFunction()}))},registerHierarchyRecordCount:function(){var hierarchyButton=$(".js-detail-hierarchy"),params={module:app.getModuleName(),action:"RelationAjax",record:app.getRecordId(),mode:"getHierarchyCount"};hierarchyButton.length&&AppConnector.request(params).then((function(response){response.success&&$(".hierarchy .badge").html(response.result)}))},registerShowHierarchy:function(){var thisInstance=this,hierarchyButton=$(".detailViewTitle"),params={module:app.getModuleName(),view:"Hierarchy",record:app.getRecordId()};hierarchyButton.on("click",".js-detail-hierarchy",(function(){var progressIndicatorElement=$.progressIndicator({position:"html",blockInfo:{enabled:!0}});thisInstance.getHierarchyResponseData(params).then((function(data){thisInstance.displayHierarchyResponseData(data),progressIndicatorElement.progressIndicator({mode:"hide"})}))}))},registerEvents:function(){var form=this.getForm();this._super(),this.registerHierarchyRecordCount(),this.registerShowHierarchy(),this.registerRecordPreSaveEvent(form)}});
//# sourceMappingURL=Detail.min.js.map
