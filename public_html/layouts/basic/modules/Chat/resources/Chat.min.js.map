{"version":3,"file":"Chat.min.js","sources":["Chat.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\n/**\n * Class Chat_Js.\n * @type {Window.Chat_Js}\n */\nwindow.Chat_JS = class Chat_Js {\n\t/**\n\t * Constructor\n\t * @param {jQuery} container\n\t */\n\tconstructor(container) {\n\t\tthis.init(container);\n\t\tthis.sendByEnter = app.getCookie('chat-notSendByEnter') !== 'true';\n\t\tthis.isSearchMode = false;\n\t\tthis.searchValue = null;\n\t\tthis.isSearchParticipantsMode = false;\n\t\tthis.timerMessage = null;\n\t\tthis.amountOfNewMessages = null;\n\t\tthis.isSoundNotification = app.getCookie('chat-isSoundNotification') === 'true';\n\t}\n\n\t/**\n\t * Get instance of Chat_Js.\n\t * @returns {Chat_Js|Window.Chat_Js}\n\t */\n\tstatic getInstance(container, typeInstance = 'modal') {\n\t\tif (typeof Chat_Js.instance === 'undefined') {\n\t\t\tChat_Js.instance = {};\n\t\t}\n\t\tif (typeof Chat_Js.instance[typeInstance] === 'undefined') {\n\t\t\tChat_Js.instance[typeInstance] = new Chat_Js(container);\n\t\t} else {\n\t\t\tChat_Js.instance[typeInstance].init(container);\n\t\t}\n\t\treturn Chat_Js.instance[typeInstance];\n\t}\n\n\t/**\n\t * Check if the user has enabled notifications.\n\t * @returns {boolean}\n\t */\n\tstatic isDesktopNotification() {\n\t\treturn app.getCookie('chat-isDesktopNotification') === 'true';\n\t}\n\n\t/**\n\t * Check desktop permission.\n\t * @returns {boolean}\n\t */\n\tstatic checkDesktopPermission() {\n\t\treturn PNotify.modules.Desktop.checkPermission() === 0;\n\t}\n\n\t/**\n\t * Data initialization from the container.\n\t * @param {jQuery} container\n\t */\n\tinit(container) {\n\t\tthis.container = container;\n\t\tthis.messageContainer = this.container.find('.js-chat_content');\n\t\tthis.maxLengthMessage = this.messageContainer.data('maxLengthMessage');\n\t\tthis.searchInput = this.container.find('.js-search-message');\n\t\tthis.searchCancel = this.container.find('.js-search-cancel');\n\t\tthis.searchParticipantsInput = this.container.find('.js-search-participants');\n\t\tthis.searchParticipantsCancel = this.container.find('.js-search-participants-cancel');\n\t\tthis.participants = this.container.find('.js-participants-list .js-users');\n\t}\n\n\t/**\n\t * Sending HTTP requests to the chat module.\n\t * @param {object} data\n\t * @param {bool} progress\n\t * @param {jQuery} elementTo\n\t * @returns {object}\n\t */\n\trequest(data = {}, progress = true, elementTo = this.messageContainer) {\n\t\tconst aDeferred = $.Deferred();\n\t\tlet progressIndicator = null;\n\t\tif (progress) {\n\t\t\tprogressIndicator = this.progressShow(elementTo);\n\t\t}\n\t\tAppConnector.request($.extend({ module: 'Chat' }, data))\n\t\t\t.done(data => {\n\t\t\t\taDeferred.resolve(data);\n\t\t\t})\n\t\t\t.always(() => {\n\t\t\t\tif (progress) {\n\t\t\t\t\tprogressIndicator.progressIndicator({ mode: 'hide' });\n\t\t\t\t}\n\t\t\t});\n\t\treturn aDeferred.promise();\n\t}\n\n\t/**\n\t * Get last message ID.\n\t * @returns {int}\n\t */\n\tgetLastMessageId() {\n\t\treturn this.messageContainer.find('.js-chat-item:last').data('mid');\n\t}\n\n\t/**\n\t * Show progress indicator.\n\t * @param {jQuery} elementTo\n\t * @returns {jQuery}\n\t */\n\tprogressShow(elementTo) {\n\t\treturn $.progressIndicator({\n\t\t\tposition: 'html',\n\t\t\tblockInfo: {\n\t\t\t\tenabled: true,\n\t\t\t\telementToBlock: elementTo\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Send chat message.\n\t * @param {jQuery} inputMessage\n\t */\n\tsendMessage(inputMessage) {\n\t\tlet len = inputMessage.html().length;\n\t\tif (0 === len) {\n\t\t\treturn;\n\t\t}\n\t\tif (len < this.maxLengthMessage) {\n\t\t\tclearTimeout(this.timerMessage);\n\t\t\tlet mid = null;\n\t\t\tif (!this.isSearchMode) {\n\t\t\t\tmid = this.messageContainer.find('.js-chat-item:last').data('mid');\n\t\t\t}\n\t\t\tthis.request({\n\t\t\t\tview: 'Entries',\n\t\t\t\tmode: 'send',\n\t\t\t\troomType: this.getCurrentRoomType(),\n\t\t\t\trecordId: this.getCurrentRecordId(),\n\t\t\t\tmessage: inputMessage.html(),\n\t\t\t\tmid: mid\n\t\t\t}).done(html => {\n\t\t\t\tif (this.isSearchMode) {\n\t\t\t\t\tthis.messageContainer.html(html);\n\t\t\t\t\tthis.turnOffSearchMode();\n\t\t\t\t\tthis.registerLoadMore();\n\t\t\t\t} else {\n\t\t\t\t\tthis.messageContainer.append(html);\n\t\t\t\t}\n\t\t\t\tthis.getMessage(true);\n\t\t\t\tthis.buildParticipantsFromMessage($('<div></div>').html(html));\n\t\t\t\tthis.scrollToBottom(false);\n\t\t\t});\n\t\t\tinputMessage.html('');\n\t\t} else {\n\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\ttext: app.vtranslate('JS_MESSAGE_TOO_LONG'),\n\t\t\t\ttype: 'error',\n\t\t\t\tanimation: 'show'\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Get the last chat message.\n\t */\n\tgetAll(reloadParticipants = true) {\n\t\tclearTimeout(this.timerMessage);\n\t\tthis.request(\n\t\t\t{\n\t\t\t\tview: 'Entries',\n\t\t\t\tmode: 'get',\n\t\t\t\troomType: this.getCurrentRoomType(),\n\t\t\t\trecordId: this.getCurrentRecordId()\n\t\t\t},\n\t\t\tfalse\n\t\t).done(html => {\n\t\t\tif (html) {\n\t\t\t\tif (!this.isRoomActive()) {\n\t\t\t\t\tthis.activateRoom();\n\t\t\t\t}\n\t\t\t\tif (reloadParticipants) {\n\t\t\t\t\tthis.buildParticipantsFromInput(\n\t\t\t\t\t\t$('<div></div>')\n\t\t\t\t\t\t\t.html(html)\n\t\t\t\t\t\t\t.find('.js-participants-data'),\n\t\t\t\t\t\ttrue\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tthis.messageContainer.html(html);\n\t\t\t\tthis.scrollToBottom();\n\t\t\t\tthis.registerLoadMore();\n\t\t\t}\n\t\t\tthis.getMessage(true);\n\t\t});\n\t}\n\n\t/**\n\t * Get more messages.\n\t * @param {jQuery} btn\n\t */\n\tgetMore(btn) {\n\t\tclearTimeout(this.timerMessage);\n\t\tthis.request(\n\t\t\t{\n\t\t\t\tview: 'Entries',\n\t\t\t\tmode: 'getMore',\n\t\t\t\tlastId: btn.data('mid'),\n\t\t\t\troomType: this.getCurrentRoomType(),\n\t\t\t\trecordId: this.getCurrentRecordId()\n\t\t\t},\n\t\t\tfalse\n\t\t).done(html => {\n\t\t\tif (html) {\n\t\t\t\tbtn.before(html);\n\t\t\t\tbtn.remove();\n\t\t\t\tthis.registerLoadMore();\n\t\t\t}\n\t\t\tthis.getMessage(true);\n\t\t});\n\t}\n\n\t/**\n\t * Search messages.\n\t * @param {jQuery} btn\n\t */\n\tsearchMessage(btn = null) {\n\t\tclearTimeout(this.timerMessage);\n\t\tlet mid = null;\n\t\tif (btn !== null) {\n\t\t\tmid = btn.data('mid');\n\t\t}\n\t\tthis.request(\n\t\t\t{\n\t\t\t\tview: 'Entries',\n\t\t\t\tmode: 'search',\n\t\t\t\tsearchVal: this.searchInput.val(),\n\t\t\t\tmid: mid,\n\t\t\t\troomType: this.getCurrentRoomType(),\n\t\t\t\trecordId: this.getCurrentRecordId()\n\t\t\t},\n\t\t\tfalse\n\t\t).done(html => {\n\t\t\tif (btn === null) {\n\t\t\t\tthis.messageContainer.html(html);\n\t\t\t} else {\n\t\t\t\tbtn.before(html);\n\t\t\t\tbtn.remove();\n\t\t\t}\n\t\t\tthis.registerLoadMore();\n\t\t\tif (mid == null) {\n\t\t\t\tthis.scrollToBottom();\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Turn off search mode.\n\t */\n\tturnOffSearchMode() {\n\t\tthis.searchCancel.addClass('hide');\n\t\tthis.searchInput.val('');\n\t\tthis.isSearchMode = false;\n\t}\n\n\t/**\n\t * Turn off search participants mode.\n\t */\n\tturnOffSearchParticipantsMode() {\n\t\tthis.searchParticipantsCancel.addClass('hide');\n\t\tthis.searchParticipantsInput.val('');\n\t\tthis.isSearchParticipantsMode = false;\n\t\tthis.participants.find('.js-item-user').each((index, element) => {\n\t\t\t$(element).removeClass('hide');\n\t\t});\n\t}\n\n\t/**\n\t * Search participants.\n\t */\n\tsearchParticipants() {\n\t\tlet searchVal = this.searchParticipantsInput.val().toLowerCase();\n\t\tthis.participants.find('.js-item-user').each((index, element) => {\n\t\t\tlet userName = $(element)\n\t\t\t\t.find('.js-user-name')\n\t\t\t\t.text()\n\t\t\t\t.toLowerCase();\n\t\t\t$(element).toggleClass('hide', !(userName.indexOf(searchVal) >= 0));\n\t\t});\n\t\tthis.container.find('.js-participants-list').scrollTop(0);\n\t}\n\n\t/**\n\t * Create a user element.\n\t * @param {object}\n\t * @returns {jQuery}\n\t */\n\tcreateParticipantItem(data = {}) {\n\t\tlet itemUser = this.container.find('.js-participants-list .js-temp-item-user').clone(false, false);\n\t\titemUser.removeClass('js-temp-item-user');\n\t\titemUser.removeClass('hide');\n\t\titemUser.find('.js-user-name').html(data.userName);\n\t\titemUser.find('.js-role').html(data.role);\n\t\titemUser.find('.js-message').html(data.message);\n\t\titemUser.data('userId', data.userId);\n\t\tif (data.image) {\n\t\t\titemUser.find('.js-image .js-chat-image_icon').addClass('hide');\n\t\t\titemUser\n\t\t\t\t.find('.js-image .js-chat-image_src')\n\t\t\t\t.removeClass('hide')\n\t\t\t\t.attr('src', data.image);\n\t\t}\n\t\treturn itemUser;\n\t}\n\n\t/**\n\t * Return the participants' ID list from the message.\n\t * @returns {int[]}\n\t */\n\tgetParticipantsFromMessages(messageContainer) {\n\t\tlet participantsId = [];\n\t\tmessageContainer.find('.js-chat-item').each((index, element) => {\n\t\t\tlet userId = $(element).data('userId');\n\t\t\tif ($.inArray(userId, participantsId) < 0) {\n\t\t\t\tparticipantsId.push(userId);\n\t\t\t}\n\t\t});\n\t\treturn participantsId;\n\t}\n\n\t/**\n\t * Create new participants.\n\t * @param {int[]} participantsId\n\t */\n\tcreateParticipants(participantsId = []) {\n\t\tif (!participantsId.length) {\n\t\t\treturn;\n\t\t}\n\t\tlet len = participantsId.length;\n\t\tfor (let i = 0; i < len; ++i) {\n\t\t\tlet userId = participantsId[i];\n\t\t\tlet lastMessage = this.messageContainer.find('.js-chat-item[data-user-id=' + userId + ']:last');\n\t\t\tif (lastMessage.length) {\n\t\t\t\tthis.participants.append(\n\t\t\t\t\tthis.createParticipantItem({\n\t\t\t\t\t\tuserName: lastMessage.find('.js-author').data('userName'),\n\t\t\t\t\t\trole: lastMessage.find('.js-author').data('roleName'),\n\t\t\t\t\t\tmessage: lastMessage.find('.messages').html(),\n\t\t\t\t\t\tuserId: userId,\n\t\t\t\t\t\timage: lastMessage.find('.js-author .js-image .js-chat-image_src').attr('src')\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Build a list of participants from the message.\n\t */\n\tbuildParticipantsFromMessage(messageContainer) {\n\t\tif (this.isSearchParticipantsMode) {\n\t\t\treturn;\n\t\t}\n\t\tlet currentParticipants = [];\n\t\tthis.participants.find('.js-item-user').each((index, element) => {\n\t\t\tlet userId = $(element).data('userId');\n\t\t\tcurrentParticipants.push(userId);\n\t\t\tlet lastMessage = messageContainer.find('.js-chat-item[data-user-id=' + userId + ']:last');\n\t\t\tif (lastMessage.length) {\n\t\t\t\t$(element)\n\t\t\t\t\t.find('.js-message')\n\t\t\t\t\t.html(lastMessage.find('.js-message').html());\n\t\t\t}\n\t\t});\n\t\tthis.createParticipants(\n\t\t\t$(this.getParticipantsFromMessages(messageContainer))\n\t\t\t\t.not(currentParticipants)\n\t\t\t\t.get()\n\t\t);\n\t}\n\n\t/**\n\t * Build a list of participants\n\t * @param {jQuery} element\n\t * @param {bool} add\n\t */\n\tbuildParticipantsFromInput(element, reload = false) {\n\t\tif (this.isSearchParticipantsMode) {\n\t\t\treturn;\n\t\t}\n\t\tif (reload) {\n\t\t\tthis.participants.html('');\n\t\t}\n\t\tif (element.length) {\n\t\t\tlet users = JSON.parse(element.val());\n\t\t\tlet len = users.length;\n\t\t\tfor (let i = 0; i < len; ++i) {\n\t\t\t\tthis.participants.append(\n\t\t\t\t\tthis.createParticipantItem({\n\t\t\t\t\t\tuserName: users[i]['user_name'],\n\t\t\t\t\t\trole: users[i]['role_name'],\n\t\t\t\t\t\tmessage: users[i]['message'],\n\t\t\t\t\t\tuserId: users[i]['user_id'],\n\t\t\t\t\t\timage: users[i]['image']\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Is chat room active.\n\t * @returns {boolean}\n\t */\n\tisRoomActive() {\n\t\treturn (\n\t\t\tthis.container.find('.js-container-chat').length === 0 ||\n\t\t\t!this.container.find('.js-container-chat').hasClass('hide')\n\t\t);\n\t}\n\n\t/**\n\t * Get current room type.\n\t * @returns {string}\n\t */\n\tgetCurrentRoomType() {\n\t\treturn this.messageContainer.data('currentRoomType');\n\t}\n\n\t/**\n\t * Get current record ID.\n\t * @returns {int}\n\t */\n\tgetCurrentRecordId() {\n\t\treturn this.messageContainer.data('currentRecordId');\n\t}\n\n\t/**\n\t * Get message timer.\n\t * @returns {int}\n\t */\n\tgetMessageTimer() {\n\t\treturn this.messageContainer.data('messageTimer');\n\t}\n\n\t/**\n\t * Scroll the chat content down.\n\t */\n\tscrollToBottom(scrollToTop = true) {\n\t\tconst chatContent = this.messageContainer.closest('.js-chat-main-content');\n\t\tif (scrollToTop) {\n\t\t\tchatContent.scrollTop(0);\n\t\t}\n\t\tif (chatContent.length) {\n\t\t\tchatContent.animate(\n\t\t\t\t{\n\t\t\t\t\tscrollTop: chatContent[0].scrollHeight\n\t\t\t\t},\n\t\t\t\t300\n\t\t\t);\n\t\t}\n\t}\n\n\t/**\n\t * Get new message\n\t * @param {bool} timer\n\t */\n\tgetMessage(timer = false) {\n\t\tif (timer) {\n\t\t\tclearTimeout(this.timerMessage);\n\t\t}\n\t\tthis.timerMessage = setTimeout(() => {\n\t\t\tthis.request(\n\t\t\t\t{\n\t\t\t\t\tview: 'Entries',\n\t\t\t\t\tmode: 'get',\n\t\t\t\t\tlastId: this.getLastMessageId(),\n\t\t\t\t\troomType: this.getCurrentRoomType(),\n\t\t\t\t\trecordId: this.getCurrentRecordId(),\n\t\t\t\t\tviewForRecord: true\n\t\t\t\t},\n\t\t\t\tfalse\n\t\t\t).done(html => {\n\t\t\t\tif (html) {\n\t\t\t\t\tif (!this.isRoomActive()) {\n\t\t\t\t\t\tthis.activateRoom();\n\t\t\t\t\t}\n\t\t\t\t\tthis.messageContainer.append(html);\n\t\t\t\t\tthis.buildParticipantsFromMessage($('<div></div>').html(html));\n\t\t\t\t\tthis.scrollToBottom(false);\n\t\t\t\t}\n\t\t\t\tif (timer) {\n\t\t\t\t\tthis.getMessage(true);\n\t\t\t\t}\n\t\t\t});\n\t\t}, this.getMessageTimer());\n\t}\n\n\t/**\n\t * Register send event\n\t */\n\tregisterSendEvent() {\n\t\tconst inputMessage = this.container.find('.js-chat-message');\n\t\tinputMessage.on('keydown', e => {\n\t\t\tif (!this.sendByEnter) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!e.shiftKey && e.keyCode === 13) {\n\t\t\t\te.preventDefault();\n\t\t\t\tthis.sendMessage(inputMessage);\n\t\t\t}\n\t\t});\n\t\tthis.container.find('.js-btn-send').on('click', () => {\n\t\t\tthis.sendMessage(inputMessage);\n\t\t});\n\t}\n\n\t/**\n\t * Button favorites.\n\t */\n\tregisterButtonFavorites() {\n\t\tlet btnRemove = this.container.find('.js-remove-from-favorites');\n\t\tlet btnAdd = this.container.find('.js-add-from-favorites');\n\t\tbtnRemove.off('click').on('click', e => {\n\t\t\tbtnRemove.toggleClass('hide');\n\t\t\tbtnAdd.toggleClass('hide');\n\t\t\tthis.request({\n\t\t\t\taction: 'Room',\n\t\t\t\tmode: 'removeFromFavorites',\n\t\t\t\troomType: this.getCurrentRoomType(),\n\t\t\t\trecordId: this.getCurrentRecordId()\n\t\t\t});\n\t\t});\n\t\tbtnAdd.off('click').on('click', e => {\n\t\t\tbtnRemove.toggleClass('hide');\n\t\t\tbtnAdd.toggleClass('hide');\n\t\t\tthis.request({\n\t\t\t\taction: 'Room',\n\t\t\t\tmode: 'addToFavorites',\n\t\t\t\troomType: this.getCurrentRoomType(),\n\t\t\t\trecordId: this.getCurrentRecordId()\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Register load more messages.\n\t */\n\tregisterLoadMore() {\n\t\tthis.messageContainer\n\t\t\t.find('.js-load-more')\n\t\t\t.off('click')\n\t\t\t.on('click', e => {\n\t\t\t\tlet btn = $(e.currentTarget);\n\t\t\t\tif (this.isSearchMode) {\n\t\t\t\t\tthis.searchMessage(btn);\n\t\t\t\t} else {\n\t\t\t\t\tthis.getMore(btn);\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\t/**\n\t * Register search message events.\n\t */\n\tregisterSearchMessage() {\n\t\tthis.searchInput.off('keydown').on('keydown', e => {\n\t\t\tif (e.keyCode === 13) {\n\t\t\t\te.preventDefault();\n\t\t\t\tif (this.searchInput.val() === '') {\n\t\t\t\t\tthis.searchCancel.addClass('hide');\n\t\t\t\t\tthis.isSearchMode = false;\n\t\t\t\t} else {\n\t\t\t\t\tthis.isSearchMode = true;\n\t\t\t\t\tthis.searchCancel.removeClass('hide');\n\t\t\t\t\tthis.searchMessage();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tthis.container.find('.js-icon-search-message').on('click', e => {\n\t\t\te.preventDefault();\n\t\t\tif (this.searchInput.val() === '') {\n\t\t\t\tthis.searchCancel.addClass('hide');\n\t\t\t\tthis.isSearchMode = false;\n\t\t\t} else {\n\t\t\t\tthis.isSearchMode = true;\n\t\t\t\tthis.searchCancel.removeClass('hide');\n\t\t\t\tthis.searchMessage();\n\t\t\t}\n\t\t});\n\t\tthis.searchCancel.off('click').on('click', e => {\n\t\t\te.preventDefault();\n\t\t\tthis.turnOffSearchMode();\n\t\t\tthis.getAll(false);\n\t\t});\n\t}\n\n\t/**\n\t * Register search participants.\n\t */\n\tregisterSearchParticipants() {\n\t\tthis.searchParticipantsInput.off('keyup').on('keyup', e => {\n\t\t\tlet len = this.searchParticipantsInput.val().length;\n\t\t\tif (1 < len) {\n\t\t\t\tthis.isSearchParticipantsMode = true;\n\t\t\t\tthis.searchParticipantsCancel.removeClass('hide');\n\t\t\t} else if (len === 0) {\n\t\t\t\tthis.turnOffSearchParticipantsMode();\n\t\t\t}\n\t\t\tthis.searchParticipants();\n\t\t});\n\t\tthis.searchParticipantsCancel.off('click').on('click', e => {\n\t\t\tthis.turnOffSearchParticipantsMode();\n\t\t\tthis.searchParticipants();\n\t\t});\n\t}\n\n\t/**\n\t * Register base events\n\t */\n\tregisterBaseEvents() {\n\t\tthis.registerSendEvent();\n\t\tthis.registerLoadMore();\n\t\tthis.getMessage(true);\n\t\tthis.registerButtonFavorites();\n\t\tthis.registerSearchMessage();\n\t\tthis.registerSearchParticipants();\n\t\tnew App.Fields.Text.Completions(this.container.find('.js-completions'));\n\t\tsetTimeout(() => {\n\t\t\tthis.scrollToBottom();\n\t\t}, 100);\n\t}\n\n\t/**\n\t * Unregister events.\n\t */\n\tunregisterEvents() {\n\t\tclearTimeout(this.timerMessage);\n\t}\n};\n"],"names":["window","Chat_JS","container","init","sendByEnter","getCookie","isSearchMode","searchValue","isSearchParticipantsMode","timerMessage","amountOfNewMessages","isSoundNotification","messageContainer","find","maxLengthMessage","data","searchInput","searchCancel","searchParticipantsInput","searchParticipantsCancel","participants","progress","elementTo","aDeferred","$","Deferred","progressIndicator","progressShow","AppConnector","request","extend","module","done","resolve","always","mode","promise","position","blockInfo","enabled","elementToBlock","inputMessage","len","html","length","clearTimeout","mid","view","roomType","getCurrentRoomType","recordId","getCurrentRecordId","message","turnOffSearchMode","registerLoadMore","append","getMessage","buildParticipantsFromMessage","scrollToBottom","showPnotify","text","app","vtranslate","type","animation","reloadParticipants","isRoomActive","activateRoom","buildParticipantsFromInput","btn","lastId","before","remove","searchVal","val","addClass","each","index","element","removeClass","toLowerCase","toggleClass","indexOf","scrollTop","itemUser","clone","userName","role","userId","image","attr","inArray","participantsId","push","i","lastMessage","createParticipantItem","currentParticipants","createParticipants","getParticipantsFromMessages","not","get","reload","JSON","parse","users","hasClass","chatContent","closest","scrollToTop","animate","scrollHeight","timer","setTimeout","getLastMessageId","viewForRecord","getMessageTimer","on","e","shiftKey","keyCode","preventDefault","sendMessage","btnRemove","btnAdd","off","action","currentTarget","searchMessage","getMore","getAll","turnOffSearchParticipantsMode","searchParticipants","registerSendEvent","registerButtonFavorites","registerSearchMessage","registerSearchParticipants","Fields","Text","Completions","instance","Chat_Js","typeInstance","modules","Desktop","checkPermission"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAOAA,OAAOC,OAAP,YAKC,iBAAYC,SAAZ,CAAuB,8BACtB,KAAKC,IAAL,CAAUD,SAAV,CADsB,CAEtB,KAAKE,WAAL,CAA4D,MAAzC,OAAIC,SAAJ,CAAc,qBAAd,CAFG,CAGtB,KAAKC,YAAL,GAHsB,CAItB,KAAKC,WAAL,CAAmB,IAJG,CAKtB,KAAKC,wBAAL,GALsB,CAMtB,KAAKC,YAAL,CAAoB,IANE,CAOtB,KAAKC,mBAAL,CAA2B,IAPL,CAQtB,KAAKC,mBAAL,CAAyE,MAA9C,OAAIN,SAAJ,CAAc,0BAAd,EAC3B,CAdF,4DAoDMH,SApDN,CAoDiB,CACf,KAAKA,SAAL,CAAiBA,SADF,CAEf,KAAKU,gBAAL,CAAwB,KAAKV,SAAL,CAAeW,IAAf,CAAoB,kBAApB,CAFT,CAGf,KAAKC,gBAAL,CAAwB,KAAKF,gBAAL,CAAsBG,IAAtB,CAA2B,kBAA3B,CAHT,CAIf,KAAKC,WAAL,CAAmB,KAAKd,SAAL,CAAeW,IAAf,CAAoB,oBAApB,CAJJ,CAKf,KAAKI,YAAL,CAAoB,KAAKf,SAAL,CAAeW,IAAf,CAAoB,mBAApB,CALL,CAMf,KAAKK,uBAAL,CAA+B,KAAKhB,SAAL,CAAeW,IAAf,CAAoB,yBAApB,CANhB,CAOf,KAAKM,wBAAL,CAAgC,KAAKjB,SAAL,CAAeW,IAAf,CAAoB,gCAApB,CAPjB,CAQf,KAAKO,YAAL,CAAoB,KAAKlB,SAAL,CAAeW,IAAf,CAAoB,iCAApB,EACpB,CA7DF,yCAsEwE,SAAA,wDAAxD,EAAwD,CAApDQ,QAAoD,4DAAnCC,SAAmC,wDAAvB,KAAKV,gBAAkB,CAChEW,UAAYC,EAAEC,QAAF,EADoD,CAElEC,kBAAoB,IAF8C,CAetE,eAAA,GAXCA,kBAAoB,KAAKC,YAAL,CAAkBL,SAAlB,CAWrB,EATAM,aAAaC,OAAb,CAAqBL,EAAEM,MAAF,CAAS,CAAEC,OAAQ,MAAV,CAAT,CAA6BhB,IAA7B,CAArB,EACEiB,IADF,CACO,cAAQ,CACbT,UAAUU,OAAV,CAAkBlB,IAAlB,EACA,CAHF,EAIEmB,MAJF,CAIS,UAAM,CACTb,QADS,EAEZK,kBAAkBA,iBAAlB,CAAoC,CAAES,KAAM,MAAR,CAApC,EAED,CARF,CASA,CAAOZ,UAAUa,OAAV,EACP,CAtFF,2DA4FoB,CAClB,YAAYxB,gBAAL,CAAsBC,IAAtB,CAA2B,oBAA3B,EAAiDE,IAAjD,CAAsD,KAAtD,CACP,CA9FF,kDAqGcO,SArGd,CAqGyB,CACvB,SAASI,iBAAF,CAAoB,CAC1BW,SAAU,MADgB,CAE1BC,UAAW,CACVC,UADU,CAEVC,eAAgBlB,SAFN,CAFe,CAApB,CAOP,CA7GF,gDAmHamB,YAnHb,CAmH2B,gBACrBC,IAAMD,aAAaE,IAAb,GAAoBC,MADL,CAEzB,GAAI,IAAMF,GAAV,CAGA,GAAIA,IAAM,KAAK5B,gBAAf,CAAiC,CAChC+B,aAAa,KAAKpC,YAAlB,CADgC,CAEhC,QAAU,IAAV,CACK,KAAKH,YAHsB,GAI/BwC,IAAM,KAAKlC,gBAAL,CAAsBC,IAAtB,CAA2B,oBAA3B,EAAiDE,IAAjD,CAAsD,KAAtD,CAJyB,EAMhC,KAAKc,OAAL,CAAa,CACZkB,KAAM,SADM,CAEZZ,KAAM,MAFM,CAGZa,SAAU,KAAKC,kBAAL,EAHE,CAIZC,SAAU,KAAKC,kBAAL,EAJE,CAKZC,QAASX,aAAaE,IAAb,EALG,CAMZG,IAAKA,GANO,CAAb,EAOGd,IAPH,CAOQ,cAAQ,CACX,MAAK1B,YADM,EAEd,MAAKM,gBAAL,CAAsB+B,IAAtB,CAA2BA,IAA3B,CAFc,CAGd,MAAKU,iBAAL,EAHc,CAId,MAAKC,gBAAL,EAJc,EAMd,MAAK1C,gBAAL,CAAsB2C,MAAtB,CAA6BZ,IAA7B,CANc,CAQf,MAAKa,UAAL,IARe,CASf,MAAKC,4BAAL,CAAkCjC,EAAE,aAAF,EAAiBmB,IAAjB,CAAsBA,IAAtB,CAAlC,CATe,CAUf,MAAKe,cAAL,KACA,CAlBD,CANgC,CAyBhCjB,aAAaE,IAAb,CAAkB,EAAlB,EACA,CA1BD,sBA2BkBgB,WAAjB,CAA6B,CAC5BC,KAAMC,IAAIC,UAAJ,CAAe,qBAAf,CADsB,CAE5BC,KAAM,OAFsB,CAG5BC,UAAW,MAHiB,CAA7B,EAMD,CAzJF,uCA8JmC,iBAA3BC,kBAA2B,4DACjCpB,aAAa,KAAKpC,YAAlB,CADiC,CAEjC,KAAKoB,OAAL,CACC,CACCkB,KAAM,SADP,CAECZ,KAAM,KAFP,CAGCa,SAAU,KAAKC,kBAAL,EAHX,CAICC,SAAU,KAAKC,kBAAL,EAJX,CADD,KAQEnB,IARF,CAQO,cAAQ,CACVW,IADU,GAET,CAAC,OAAKuB,YAAL,EAFQ,EAGZ,OAAKC,YAAL,EAHY,CAKTF,kBALS,EAMZ,OAAKG,0BAAL,CACC5C,EAAE,aAAF,EACEmB,IADF,CACOA,IADP,EAEE9B,IAFF,CAEO,uBAFP,CADD,IANY,CAab,OAAKD,gBAAL,CAAsB+B,IAAtB,CAA2BA,IAA3B,CAba,CAcb,OAAKe,cAAL,EAda,CAeb,OAAKJ,gBAAL,EAfa,EAiBd,OAAKE,UAAL,KACA,CA1BD,EA2BA,CA3LF,wCAiMSa,GAjMT,CAiMc,iBACZxB,aAAa,KAAKpC,YAAlB,CADY,CAEZ,KAAKoB,OAAL,CACC,CACCkB,KAAM,SADP,CAECZ,KAAM,SAFP,CAGCmC,OAAQD,IAAItD,IAAJ,CAAS,KAAT,CAHT,CAICiC,SAAU,KAAKC,kBAAL,EAJX,CAKCC,SAAU,KAAKC,kBAAL,EALX,CADD,KASEnB,IATF,CASO,cAAQ,CACVW,IADU,GAEb0B,IAAIE,MAAJ,CAAW5B,IAAX,CAFa,CAGb0B,IAAIG,MAAJ,EAHa,CAIb,OAAKlB,gBAAL,EAJa,EAMd,OAAKE,UAAL,KACA,CAhBD,EAiBA,CApNF,qDA0N2B,iBAAZa,GAAY,wDAAN,IAAM,CACzBxB,aAAa,KAAKpC,YAAlB,CADyB,CAEzB,QAAU,IAAV,CACY,IAAR,MAHqB,GAIxBqC,IAAMuB,IAAItD,IAAJ,CAAS,KAAT,CAJkB,EAMzB,KAAKc,OAAL,CACC,CACCkB,KAAM,SADP,CAECZ,KAAM,QAFP,CAGCsC,UAAW,KAAKzD,WAAL,CAAiB0D,GAAjB,EAHZ,CAIC5B,IAAKA,GAJN,CAKCE,SAAU,KAAKC,kBAAL,EALX,CAMCC,SAAU,KAAKC,kBAAL,EANX,CADD,KAUEnB,IAVF,CAUO,cAAQ,CACF,IAAR,MADU,CAEb,OAAKpB,gBAAL,CAAsB+B,IAAtB,CAA2BA,IAA3B,CAFa,EAIb0B,IAAIE,MAAJ,CAAW5B,IAAX,CAJa,CAKb0B,IAAIG,MAAJ,EALa,EAOd,OAAKlB,gBAAL,EAPc,CAQH,IAAP,KARU,EASb,OAAKI,cAAL,GAED,CArBD,EAsBA,CAtPF,6DA2PqB,CACnB,KAAKzC,YAAL,CAAkB0D,QAAlB,CAA2B,MAA3B,CADmB,CAEnB,KAAK3D,WAAL,CAAiB0D,GAAjB,CAAqB,EAArB,CAFmB,CAGnB,KAAKpE,YAAL,IACA,CA/PF,qFAoQiC,CAC/B,KAAKa,wBAAL,CAA8BwD,QAA9B,CAAuC,MAAvC,CAD+B,CAE/B,KAAKzD,uBAAL,CAA6BwD,GAA7B,CAAiC,EAAjC,CAF+B,CAG/B,KAAKlE,wBAAL,GAH+B,CAI/B,KAAKY,YAAL,CAAkBP,IAAlB,CAAuB,eAAvB,EAAwC+D,IAAxC,CAA6C,SAACC,KAAD,CAAQC,OAAR,CAAoB,CAChEtD,EAAEsD,OAAF,EAAWC,WAAX,CAAuB,MAAvB,EACA,CAFD,EAGA,CA3QF,+DAgRsB,CACpB,cAAgB,KAAK7D,uBAAL,CAA6BwD,GAA7B,GAAmCM,WAAnC,EAAhB,CACA,KAAK5D,YAAL,CAAkBP,IAAlB,CAAuB,eAAvB,EAAwC+D,IAAxC,CAA6C,SAACC,KAAD,CAAQC,OAAR,CAAoB,CAChE,aAAetD,EAAEsD,OAAF,EACbjE,IADa,CACR,eADQ,EAEb+C,IAFa,GAGboB,WAHa,EAAf,CAIAxD,EAAEsD,OAAF,EAAWG,WAAX,CAAuB,MAAvB,CAA+B,EAAiC,CAA/B,WAASC,OAAT,CAAiBT,SAAjB,CAAF,CAA/B,EACA,CAND,CAFoB,CASpB,KAAKvE,SAAL,CAAeW,IAAf,CAAoB,uBAApB,EAA6CsE,SAA7C,CAAuD,CAAvD,EACA,CA1RF,qEAiSkC,SAAA,wDAAJ,EAAI,CAC5BC,SAAW,KAAKlF,SAAL,CAAeW,IAAf,CAAoB,0CAApB,EAAgEwE,KAAhE,OADiB,CAehC,gBAbSN,WAAT,CAAqB,mBAArB,CAaA,CAZAK,SAASL,WAAT,CAAqB,MAArB,CAYA,CAXAK,SAASvE,IAAT,CAAc,eAAd,EAA+B8B,IAA/B,CAAoC5B,KAAKuE,QAAzC,CAWA,CAVAF,SAASvE,IAAT,CAAc,UAAd,EAA0B8B,IAA1B,CAA+B5B,KAAKwE,IAApC,CAUA,CATAH,SAASvE,IAAT,CAAc,aAAd,EAA6B8B,IAA7B,CAAkC5B,KAAKqC,OAAvC,CASA,CARAgC,SAASrE,IAAT,CAAc,QAAd,CAAwBA,KAAKyE,MAA7B,CAQA,CAPIzE,KAAK0E,KAOT,GANCL,SAASvE,IAAT,CAAc,+BAAd,EAA+C8D,QAA/C,CAAwD,MAAxD,CAMD,CALCS,SACEvE,IADF,CACO,8BADP,EAEEkE,WAFF,CAEc,MAFd,EAGEW,IAHF,CAGO,KAHP,CAGc3E,KAAK0E,KAHnB,CAKD,EAAOL,QACP,CAjTF,gFAuT6BxE,gBAvT7B,CAuT+C,CAC7C,mBAAqB,EAArB,CAOA,wBANiBC,IAAjB,CAAsB,eAAtB,EAAuC+D,IAAvC,CAA4C,SAACC,KAAD,CAAQC,OAAR,CAAoB,CAC/D,WAAatD,EAAEsD,OAAF,EAAW/D,IAAX,CAAgB,QAAhB,CAAb,CACwC,CAApC,GAAE4E,OAAF,CAAUH,MAAV,CAAkBI,cAAlB,CAF2D,EAG9DA,eAAeC,IAAf,CAAoBL,MAApB,EAED,CALD,CAMA,CAAOI,cACP,CAhUF,+DAsUyC,mBAAA,wDAAJ,EAAI,CACvC,GAAKA,eAAehD,MAApB,CAIA,YADUgD,eAAehD,MACzB,CAASkD,EAAI,CAAb,CAAgBA,EAAIpD,GAApB,CAAyB,EAAEoD,CAA3B,CAA8B,YAChBF,eAAeE,CAAf,CADgB,CAEzBC,YAAc,KAAKnF,gBAAL,CAAsBC,IAAtB,CAA2B,8BAAgC2E,MAAhC,CAAyC,QAApE,CAFW,CAGzBO,YAAYnD,MAHa,EAI5B,KAAKxB,YAAL,CAAkBmC,MAAlB,CACC,KAAKyC,qBAAL,CAA2B,CAC1BV,SAAUS,YAAYlF,IAAZ,CAAiB,YAAjB,EAA+BE,IAA/B,CAAoC,UAApC,CADgB,CAE1BwE,KAAMQ,YAAYlF,IAAZ,CAAiB,YAAjB,EAA+BE,IAA/B,CAAoC,UAApC,CAFoB,CAG1BqC,QAAS2C,YAAYlF,IAAZ,CAAiB,WAAjB,EAA8B8B,IAA9B,EAHiB,CAI1B6C,OAAQA,MAJkB,CAK1BC,MAAOM,YAAYlF,IAAZ,CAAiB,yCAAjB,EAA4D6E,IAA5D,CAAiE,KAAjE,CALmB,CAA3B,CADD,EAUD,CACD,CA1VF,kFA+V8B9E,gBA/V9B,CA+VgD,CAC9C,IAAI,KAAKJ,wBAAT,EAGA,wBAA0B,EAA1B,CACA,KAAKY,YAAL,CAAkBP,IAAlB,CAAuB,eAAvB,EAAwC+D,IAAxC,CAA6C,SAACC,KAAD,CAAQC,OAAR,CAAoB,CAChE,WAAatD,EAAEsD,OAAF,EAAW/D,IAAX,CAAgB,QAAhB,CAAb,CACAkF,oBAAoBJ,IAApB,CAAyBL,MAAzB,CAFgE,CAGhE,gBAAkB5E,iBAAiBC,IAAjB,CAAsB,8BAAgC2E,MAAhC,CAAyC,QAA/D,CAAlB,CACIO,YAAYnD,MAJgD,EAK/DpB,EAAEsD,OAAF,EACEjE,IADF,CACO,aADP,EAEE8B,IAFF,CAEOoD,YAAYlF,IAAZ,CAAiB,aAAjB,EAAgC8B,IAAhC,EAFP,EAID,CATD,CAJA,CAcA,KAAKuD,kBAAL,CACC1E,EAAE,KAAK2E,2BAAL,CAAiCvF,gBAAjC,CAAF,EACEwF,GADF,CACMH,mBADN,EAEEI,GAFF,EADD,EAdA,CAmBA,CAnXF,8EA0X4BvB,OA1X5B,CA0XqD,WAAA,6DACnD,IAAI,KAAKtE,wBAAT,GAGI8F,MAHJ,EAIC,KAAKlF,YAAL,CAAkBuB,IAAlB,CAAuB,EAAvB,CAJD,CAMImC,QAAQlC,MANZ,EASC,cAFY2D,KAAKC,KAAL,CAAW1B,QAAQJ,GAAR,EAAX,CAEZ,CADIhC,IAAM+D,MAAM7D,MAChB,CAASkD,EAAI,CAAb,CAAgBA,EAAIpD,GAApB,CAAyB,EAAEoD,CAA3B,CACC,KAAK1E,YAAL,CAAkBmC,MAAlB,CACC,KAAKyC,qBAAL,CAA2B,CAC1BV,SAAUmB,MAAMX,CAAN,WADgB,CAE1BP,KAAMkB,MAAMX,CAAN,WAFoB,CAG1B1C,QAASqD,MAAMX,CAAN,SAHiB,CAI1BN,OAAQiB,MAAMX,CAAN,SAJkB,CAK1BL,MAAOgB,MAAMX,CAAN,OALmB,CAA3B,CADD,EAWF,CAhZF,mDAsZgB,CACd,QACC,QAAK5F,SAAL,CAAeW,IAAf,CAAoB,oBAApB,EAA0C+B,MAA1C,EACA,CAAC,KAAK1C,SAAL,CAAeW,IAAf,CAAoB,oBAApB,EAA0C6F,QAA1C,CAAmD,MAAnD,CAEF,CA3ZF,+DAiasB,CACpB,YAAY9F,gBAAL,CAAsBG,IAAtB,CAA2B,iBAA3B,CACP,CAnaF,+DAyasB,CACpB,YAAYH,gBAAL,CAAsBG,IAAtB,CAA2B,iBAA3B,CACP,CA3aF,yDAibmB,CACjB,YAAYH,gBAAL,CAAsBG,IAAtB,CAA2B,cAA3B,CACP,CAnbF,uDAwboC,gBAAA,4DAC5B4F,YAAc,KAAK/F,gBAAL,CAAsBgG,OAAtB,CAA8B,uBAA9B,CADc,CAE9BC,WAF8B,EAGjCF,YAAYxB,SAAZ,CAAsB,CAAtB,CAHiC,CAK9BwB,YAAY/D,MALkB,EAMjC+D,YAAYG,OAAZ,CACC,CACC3B,UAAWwB,YAAY,CAAZ,EAAeI,YAD3B,CADD,CAIC,GAJD,EAOD,CArcF,+CA2c2B,iBAAfC,KAAe,6DACrBA,KADqB,EAExBnE,aAAa,KAAKpC,YAAlB,CAFwB,CAIzB,KAAKA,YAAL,CAAoBwG,WAAW,UAAM,CACpC,OAAKpF,OAAL,CACC,CACCkB,KAAM,SADP,CAECZ,KAAM,KAFP,CAGCmC,OAAQ,OAAK4C,gBAAL,EAHT,CAIClE,SAAU,OAAKC,kBAAL,EAJX,CAKCC,SAAU,OAAKC,kBAAL,EALX,CAMCgE,gBAND,CADD,KAUEnF,IAVF,CAUO,cAAQ,CACVW,IADU,GAET,CAAC,OAAKuB,YAAL,EAFQ,EAGZ,OAAKC,YAAL,EAHY,CAKb,OAAKvD,gBAAL,CAAsB2C,MAAtB,CAA6BZ,IAA7B,CALa,CAMb,OAAKc,4BAAL,CAAkCjC,EAAE,aAAF,EAAiBmB,IAAjB,CAAsBA,IAAtB,CAAlC,CANa,CAOb,OAAKe,cAAL,IAPa,EASVsD,KATU,EAUb,OAAKxD,UAAL,KAED,CAtBD,EAuBA,CAxBmB,CAwBjB,KAAK4D,eAAL,EAxBiB,EAyBpB,CAxeF,6DA6eqB,iBACb3E,aAAe,KAAKvC,SAAL,CAAeW,IAAf,CAAoB,kBAApB,CADF,CAEnB4B,aAAa4E,EAAb,CAAgB,SAAhB,CAA2B,WAAK,CAC1B,OAAKjH,WADqB,GAI1BkH,EAAEC,QAAH,EAA6B,EAAd,KAAEC,OAJU,GAK9BF,EAAEG,cAAF,EAL8B,CAM9B,OAAKC,WAAL,CAAiBjF,YAAjB,CAN8B,GAQ/B,CARD,CAFmB,CAWnB,KAAKvC,SAAL,CAAeW,IAAf,CAAoB,cAApB,EAAoCwG,EAApC,CAAuC,OAAvC,CAAgD,UAAM,CACrD,OAAKK,WAAL,CAAiBjF,YAAjB,EACA,CAFD,EAGA,CA3fF,yEAggB2B,iBACrBkF,UAAY,KAAKzH,SAAL,CAAeW,IAAf,CAAoB,2BAApB,CADS,CAErB+G,OAAS,KAAK1H,SAAL,CAAeW,IAAf,CAAoB,wBAApB,CAFY,CAGzB8G,UAAUE,GAAV,CAAc,OAAd,EAAuBR,EAAvB,CAA0B,OAA1B,CAAmC,UAAK,CACvCM,UAAU1C,WAAV,CAAsB,MAAtB,CADuC,CAEvC2C,OAAO3C,WAAP,CAAmB,MAAnB,CAFuC,CAGvC,OAAKpD,OAAL,CAAa,CACZiG,OAAQ,MADI,CAEZ3F,KAAM,qBAFM,CAGZa,SAAU,OAAKC,kBAAL,EAHE,CAIZC,SAAU,OAAKC,kBAAL,EAJE,CAAb,EAMA,CATD,CAHyB,CAazByE,OAAOC,GAAP,CAAW,OAAX,EAAoBR,EAApB,CAAuB,OAAvB,CAAgC,UAAK,CACpCM,UAAU1C,WAAV,CAAsB,MAAtB,CADoC,CAEpC2C,OAAO3C,WAAP,CAAmB,MAAnB,CAFoC,CAGpC,OAAKpD,OAAL,CAAa,CACZiG,OAAQ,MADI,CAEZ3F,KAAM,gBAFM,CAGZa,SAAU,OAAKC,kBAAL,EAHE,CAIZC,SAAU,OAAKC,kBAAL,EAJE,CAAb,EAMA,CATD,EAUA,CAvhBF,2DA4hBoB,iBAClB,KAAKvC,gBAAL,CACEC,IADF,CACO,eADP,EAEEgH,GAFF,CAEM,OAFN,EAGER,EAHF,CAGK,OAHL,CAGc,WAAK,CACjB,QAAU7F,EAAE8F,EAAES,aAAJ,CAAV,CACI,OAAKzH,YAFQ,CAGhB,OAAK0H,aAAL,CAAmB3D,GAAnB,CAHgB,CAKhB,OAAK4D,OAAL,CAAa5D,GAAb,EAED,CAVF,EAWA,CAxiBF,qEA6iByB,iBACvB,KAAKrD,WAAL,CAAiB6G,GAAjB,CAAqB,SAArB,EAAgCR,EAAhC,CAAmC,SAAnC,CAA8C,WAAK,CAChC,EAAd,KAAEG,OAD4C,GAEjDF,EAAEG,cAAF,EAFiD,CAGlB,EAA3B,UAAKzG,WAAL,CAAiB0D,GAAjB,EAH6C,EAIhD,OAAKzD,YAAL,CAAkB0D,QAAlB,CAA2B,MAA3B,CAJgD,CAKhD,OAAKrE,YAAL,GALgD,GAOhD,OAAKA,YAAL,GAPgD,CAQhD,OAAKW,YAAL,CAAkB8D,WAAlB,CAA8B,MAA9B,CARgD,CAShD,OAAKiD,aAAL,EATgD,GAYlD,CAZD,CADuB,CAcvB,KAAK9H,SAAL,CAAeW,IAAf,CAAoB,yBAApB,EAA+CwG,EAA/C,CAAkD,OAAlD,CAA2D,WAAK,CAC/DC,EAAEG,cAAF,EAD+D,CAEhC,EAA3B,UAAKzG,WAAL,CAAiB0D,GAAjB,EAF2D,EAG9D,OAAKzD,YAAL,CAAkB0D,QAAlB,CAA2B,MAA3B,CAH8D,CAI9D,OAAKrE,YAAL,GAJ8D,GAM9D,OAAKA,YAAL,GAN8D,CAO9D,OAAKW,YAAL,CAAkB8D,WAAlB,CAA8B,MAA9B,CAP8D,CAQ9D,OAAKiD,aAAL,EAR8D,EAU/D,CAVD,CAduB,CAyBvB,KAAK/G,YAAL,CAAkB4G,GAAlB,CAAsB,OAAtB,EAA+BR,EAA/B,CAAkC,OAAlC,CAA2C,WAAK,CAC/CC,EAAEG,cAAF,EAD+C,CAE/C,OAAKpE,iBAAL,EAF+C,CAG/C,OAAK6E,MAAL,KACA,CAJD,EAKA,CA3kBF,+EAglB8B,kBAC5B,KAAKhH,uBAAL,CAA6B2G,GAA7B,CAAiC,OAAjC,EAA0CR,EAA1C,CAA6C,OAA7C,CAAsD,UAAK,CAC1D,QAAU,QAAKnG,uBAAL,CAA6BwD,GAA7B,GAAmC9B,MAA7C,CACI,EAAIF,GAFkD,EAGzD,QAAKlC,wBAAL,GAHyD,CAIzD,QAAKW,wBAAL,CAA8B4D,WAA9B,CAA0C,MAA1C,CAJyD,EAKvC,CAAR,MAL+C,EAMzD,QAAKoD,6BAAL,EANyD,CAQ1D,QAAKC,kBAAL,GACA,CATD,CAD4B,CAW5B,KAAKjH,wBAAL,CAA8B0G,GAA9B,CAAkC,OAAlC,EAA2CR,EAA3C,CAA8C,OAA9C,CAAuD,UAAK,CAC3D,QAAKc,6BAAL,EAD2D,CAE3D,QAAKC,kBAAL,GACA,CAHD,EAIA,CA/lBF,+DAomBsB,kBACpB,KAAKC,iBAAL,EADoB,CAEpB,KAAK/E,gBAAL,EAFoB,CAGpB,KAAKE,UAAL,IAHoB,CAIpB,KAAK8E,uBAAL,EAJoB,CAKpB,KAAKC,qBAAL,EALoB,CAMpB,KAAKC,0BAAL,EANoB,CAOpB,QAAQC,MAAJ,CAAWC,IAAX,CAAgBC,WAApB,CAAgC,KAAKzI,SAAL,CAAeW,IAAf,CAAoB,iBAApB,CAAhC,CAPoB,CAQpBoG,WAAW,UAAM,CAChB,QAAKvD,cAAL,GACA,CAFD,CAEG,GAFH,EAGA,CA/mBF,2DAonBoB,CAClBb,aAAa,KAAKpC,YAAlB,EACA,CAtnBF,kDAoBoBP,SApBpB,CAoBuD,iBAAA,wDAAT,OAAS,CASrD,OARgC,WAA5B,iBAAe0I,QAQnB,GAPCC,QAAQD,QAAR,CAAmB,EAOpB,EAL8C,WAA1C,iBAAeA,QAAR,CAAiBE,YAAjB,CAKX,CAJCD,QAAQD,QAAR,CAAiBE,YAAjB,EAAiC,WAAA,CAAY5I,SAAZ,CAIlC,CAFC2I,QAAQD,QAAR,CAAiBE,YAAjB,EAA+B3I,IAA/B,CAAoCD,SAApC,CAED,CAAO2I,QAAQD,QAAR,CAAiBE,YAAjB,CACP,CA9BF,qEAoCgC,CAC9B,OAAuD,MAAhD,OAAIzI,SAAJ,CAAc,4BAAd,CACP,CAtCF,uEA4CiC,CAC/B,QAAO,WAAQ0I,OAAR,CAAgBC,OAAhB,CAAwBC,eAAxB,EACP,CA9CF"}