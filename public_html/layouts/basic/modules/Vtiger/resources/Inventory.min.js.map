{"version":3,"file":"Inventory.min.js","sources":["Inventory.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\n$.Class(\n\t'Vtiger_Inventory_Js',\n\t{\n\t\tinventoryInstance: false,\n\n\t\t/**\n\t\t * Get inventory instance\n\t\t * @param {jQuery} container\n\t\t * @returns {Vtiger_Inventory_Js}\n\t\t */\n\t\tgetInventoryInstance: function (container) {\n\t\t\tif (this.inventoryInstance === false) {\n\t\t\t\tlet moduleClassName = container.find('[name=\"module\"]').val() + '_Inventory_Js';\n\t\t\t\tif (typeof window[moduleClassName] === 'undefined') {\n\t\t\t\t\tmoduleClassName = 'Vtiger_Inventory_Js';\n\t\t\t\t}\n\t\t\t\tif (typeof window[moduleClassName] !== 'undefined') {\n\t\t\t\t\tthis.inventoryInstance = new window[moduleClassName]();\n\t\t\t\t\tthis.inventoryInstance.registerEvents(container);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn this.inventoryInstance;\n\t\t}\n\t},\n\t{\n\t\tform: false,\n\t\tdiscount: false,\n\t\ttax: false,\n\t\tcontainer: false,\n\t\tinventoryContainer: false,\n\t\tinventoryHeadContainer: false,\n\t\tsummaryTaxesContainer: false,\n\t\tsummaryDiscountContainer: false,\n\t\tsummaryCurrenciesContainer: false,\n\t\trowClass: 'tr.inventoryRow',\n\t\tdiscountModalFields: [\n\t\t\t'aggregationType',\n\t\t\t'globalDiscount',\n\t\t\t'groupCheckbox',\n\t\t\t'groupDiscount',\n\t\t\t'individualDiscount',\n\t\t\t'individualDiscountType',\n\t\t\t'additionalDiscount'\n\t\t],\n\t\ttaxModalFields: ['aggregationType', 'globalTax', 'groupCheckbox', 'groupTax', 'individualTax', 'regionalTax'],\n\t\t/**\n\t\t * Get current form element\n\t\t * @returns {jQuery}\n\t\t */\n\t\tgetForm() {\n\t\t\treturn this.form;\n\t\t},\n\t\t/**\n\t\t * Get current form element\n\t\t * @returns {jQuery}\n\t\t */\n\t\tloadConfig() {\n\t\t\tlet discontConfig = this.form.find('.js-discount-config');\n\t\t\tlet taxConfig = this.form.find('.js-tax-config');\n\n\t\t\tthis.discount = discontConfig.length ? JSON.parse(discontConfig.val()) : {};\n\t\t\tthis.tax = taxConfig.length ? JSON.parse(this.form.find('.js-tax-config').val()) : {};\n\t\t},\n\t\t/**\n\t\t * Function that is used to get the line item container\n\t\t * @return : jQuery object\n\t\t */\n\t\tgetContainer: function () {\n\t\t\tif (this.container === false) {\n\t\t\t\tthis.container = $('.js-inv-container');\n\t\t\t}\n\t\t\treturn this.container;\n\t\t},\n\t\tgetInventoryItemsContainer: function () {\n\t\t\treturn this.getContainer().find('.inventoryItems');\n\t\t},\n\t\tgetInventoryHeadContainer: function () {\n\t\t\tif (this.inventoryHeadContainer === false) {\n\t\t\t\tthis.inventoryHeadContainer = $('.inventoryHeader');\n\t\t\t}\n\t\t\treturn this.inventoryHeadContainer;\n\t\t},\n\t\tgetInventorySummaryDiscountContainer: function () {\n\t\t\tif (this.summaryDiscountContainer === false) {\n\t\t\t\tthis.summaryDiscountContainer = $('.inventorySummaryDiscounts');\n\t\t\t}\n\t\t\treturn this.summaryDiscountContainer;\n\t\t},\n\t\tgetInventorySummaryTaxesContainer: function () {\n\t\t\tif (this.summaryTaxesContainer === false) {\n\t\t\t\tthis.summaryTaxesContainer = $('.inventorySummaryTaxes');\n\t\t\t}\n\t\t\treturn this.summaryTaxesContainer;\n\t\t},\n\t\tgetInventorySummaryCurrenciesContainer: function () {\n\t\t\tif (this.summaryCurrenciesContainer === false) {\n\t\t\t\tthis.summaryCurrenciesContainer = $('.inventorySummaryCurrencies');\n\t\t\t}\n\t\t\treturn this.summaryCurrenciesContainer;\n\t\t},\n\t\tgetNextLineItemRowNumber: function () {\n\t\t\tlet $inventoryItemsNo = $('#inventoryItemsNo');\n\t\t\tlet rowNumber = parseInt($inventoryItemsNo.val()) + 1;\n\t\t\t$inventoryItemsNo.val(rowNumber);\n\t\t\treturn rowNumber;\n\t\t},\n\t\tgetAccountId: function () {\n\t\t\tlet accountReferenceField = $('#accountReferenceField').val();\n\t\t\tif (accountReferenceField != '') {\n\t\t\t\treturn $('[name=\"' + accountReferenceField + '\"]').val();\n\t\t\t}\n\t\t\treturn '';\n\t\t},\n\t\tcheckDeleteIcon: function () {\n\t\t\tif (this.getInventoryItemsContainer().find(this.rowClass).length > 1) {\n\t\t\t\tthis.showLineItemsDeleteIcon();\n\t\t\t} else if (app.getMainParams('isRequiredInventory')) {\n\t\t\t\tthis.hideLineItemsDeleteIcon();\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Set the visibility of the delete block button\n\t\t */\n\t\tsetDeleteBlockBtnVisibility() {\n\t\t\tlet deleteBtn = this.getContainer().find('.js-delete-block');\n\t\t\tif (deleteBtn.length > 1) {\n\t\t\t\tdeleteBtn.removeClass('d-none');\n\t\t\t} else {\n\t\t\t\tdeleteBtn.addClass('d-none');\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Register delete block btn\n\t\t */\n\t\tregisterDeleteBlock: function () {\n\t\t\tthis.getContainer().on('click', '.js-delete-block', (e) => {\n\t\t\t\tlet block = $(e.currentTarget).closest('.js-inv-container-group');\n\t\t\t\tblock.remove();\n\t\t\t\tthis.setDeleteBlockBtnVisibility();\n\t\t\t\tthis.rowsCalculations();\n\t\t\t});\n\t\t},\n\t\tshowLineItemsDeleteIcon: function () {\n\t\t\tthis.getInventoryItemsContainer().find('.deleteRow').removeClass('d-none');\n\t\t},\n\t\thideLineItemsDeleteIcon: function () {\n\t\t\tthis.getInventoryItemsContainer().find('.deleteRow').addClass('d-none');\n\t\t},\n\t\tgetClosestRow: function (element) {\n\t\t\treturn element.closest(this.rowClass);\n\t\t},\n\t\t/**\n\t\t * Function which will return the basic row which can be used to add new rows\n\t\t * @return jQuery object which you can use to\n\t\t */\n\t\tgetBasicRow: function () {\n\t\t\treturn this.getForm().find('.js-inventory-base-item').eq(0).clone(true, true);\n\t\t},\n\t\tisRecordSelected: function (element) {\n\t\t\tlet parentRow = element.closest('tr');\n\t\t\tlet productField = parentRow.find('.recordLabel');\n\t\t\treturn productField.validationEngine('validate');\n\t\t},\n\t\tgetTaxModeSelectElement: function (row) {\n\t\t\tlet items = this.getInventoryHeadContainer();\n\t\t\tif (items.find('thead .js-taxmode').length > 0) {\n\t\t\t\treturn $('.js-taxmode');\n\t\t\t}\n\t\t\tif (row) {\n\t\t\t\treturn row.find('.js-taxmode');\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\tisIndividualTaxMode: function (row) {\n\t\t\tlet selectedOption = this.getTaxModeSelectElement(row).find('option:selected');\n\t\t\tif (selectedOption.length !== 0) {\n\t\t\t\treturn selectedOption.val() == 1;\n\t\t\t}\n\t\t\treturn this.tax.default_mode == 1;\n\t\t},\n\t\tisGroupTaxMode: function () {\n\t\t\tlet selectedOption = this.getTaxModeSelectElement();\n\t\t\tif (selectedOption && (selectedOption = selectedOption.find('option:selected')) && selectedOption.length !== 0) {\n\t\t\t\treturn selectedOption.val() == 0;\n\t\t\t}\n\t\t\treturn this.tax.default_mode == 0;\n\t\t},\n\t\tshowIndividualTax: function (row) {\n\t\t\tlet thisInstance = this;\n\t\t\tlet groupTax = thisInstance.getInventorySummaryTaxesContainer().find('.groupTax');\n\t\t\tlet items = thisInstance.getInventoryItemsContainer();\n\t\t\tlet newRow = $('#blackIthemTable').find('tbody');\n\t\t\tif (thisInstance.isIndividualTaxMode()) {\n\t\t\t\tgroupTax.addClass('d-none');\n\t\t\t\titems.find('.changeTax').removeClass('d-none');\n\t\t\t\tnewRow.find('.changeTax').removeClass('d-none');\n\t\t\t\tlet parentRow = thisInstance.getInventoryItemsContainer();\n\t\t\t\tlet taxParam = { aggregationType: 'global' };\n\n\t\t\t\tparentRow.find(thisInstance.rowClass).each(function () {\n\t\t\t\t\tlet thisItem = $(this);\n\t\t\t\t\ttaxParam['globalTax'] = parseFloat(thisItem.find('.js-tax').attr('data-default-tax'));\n\t\t\t\t\tthisInstance.setTaxParam(thisItem, taxParam);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthisInstance.setTax(items, 0);\n\t\t\t\tthisInstance.setTaxPercent(items, 0);\n\t\t\t\tthisInstance.setTaxParam(items, []);\n\t\t\t\tthisInstance.setDefaultGlobalTax(row);\n\t\t\t\tgroupTax.removeClass('d-none');\n\t\t\t\titems.find('.changeTax').addClass('d-none');\n\t\t\t\tnewRow.find('.changeTax').addClass('d-none');\n\t\t\t}\n\t\t\tthisInstance.rowsCalculations();\n\t\t},\n\t\tsetDefaultGlobalTax: function () {\n\t\t\tlet thisInstance = this;\n\t\t\tlet parentRow = thisInstance.getInventoryItemsContainer();\n\t\t\tlet taxDefaultValue = thisInstance\n\t\t\t\t.getInventorySummaryTaxesContainer()\n\t\t\t\t.find('.js-default-tax')\n\t\t\t\t.data('tax-default-value');\n\t\t\tlet isGroupTax = thisInstance.isGroupTaxMode();\n\t\t\tlet summaryContainer = $('#blackIthemTable');\n\t\t\tif (isGroupTax) {\n\t\t\t\tlet taxParam = thisInstance.getTaxParams(summaryContainer);\n\t\t\t\tif (taxParam === false && taxDefaultValue) {\n\t\t\t\t\ttaxParam = { aggregationType: 'global' };\n\t\t\t\t\ttaxParam['globalTax'] = taxDefaultValue;\n\t\t\t\t\ttaxParam['individualTax'] = '';\n\t\t\t\t}\n\t\t\t\tif (taxParam) {\n\t\t\t\t\tthisInstance.setTaxParam(summaryContainer, taxParam);\n\t\t\t\t\tthisInstance.setTaxParam(parentRow, taxParam);\n\t\t\t\t\tparentRow.closest('.inventoryItems').data('taxParam', JSON.stringify(taxParam));\n\t\t\t\t\tparentRow.find(thisInstance.rowClass).each(function () {\n\t\t\t\t\t\tthisInstance.quantityChangeActions($(this));\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthisInstance.setTaxParam(summaryContainer, []);\n\t\t\t\tparentRow.closest('.inventoryItems').data('taxParam', '[]');\n\t\t\t}\n\t\t},\n\t\tgetDiscountModeSelectElement: function (row) {\n\t\t\tlet items = this.getInventoryHeadContainer();\n\t\t\tif (items.find('thead .js-discountmode').length > 0) {\n\t\t\t\treturn $('.js-discountmode');\n\t\t\t}\n\t\t\treturn row.find('.js-discountmode');\n\t\t},\n\t\tisIndividualDiscountMode: function (row) {\n\t\t\tlet selectedOption = this.getDiscountModeSelectElement(row).find('option:selected');\n\t\t\tif (selectedOption.length === 0) {\n\t\t\t\treturn this.discount.default_mode == 1;\n\t\t\t}\n\t\t\treturn selectedOption.val() == 1;\n\t\t},\n\t\tshowIndividualDiscount: function (row) {\n\t\t\tlet thisInstance = this;\n\t\t\tlet groupDiscount = thisInstance.getInventorySummaryDiscountContainer().find('.groupDiscount');\n\t\t\tlet items = thisInstance.getInventoryItemsContainer();\n\t\t\tlet newRow = $('#blackIthemTable').find('tbody');\n\t\t\tif (thisInstance.isIndividualDiscountMode(row)) {\n\t\t\t\tgroupDiscount.addClass('d-none');\n\t\t\t\titems.find('.js-change-discount').removeClass('d-none');\n\t\t\t\tnewRow.find('.js-change-discount').removeClass('d-none');\n\t\t\t} else {\n\t\t\t\tgroupDiscount.removeClass('d-none');\n\t\t\t\titems.find('.js-change-discount').addClass('d-none');\n\t\t\t\tnewRow.find('.js-change-discount').addClass('d-none');\n\t\t\t}\n\t\t\tthisInstance.setDiscount(items, 0);\n\t\t\tthisInstance.setDiscountParam(items, []);\n\t\t\tthisInstance.rowsCalculations();\n\t\t},\n\t\tgetCurrency: function () {\n\t\t\treturn $('.js-currency', this.getInventoryHeadContainer()).find('option:selected').val();\n\t\t},\n\t\t/**\n\t\t * Get discount aggregation\n\t\t *@returns {int}\n\t\t */\n\t\tgetDiscountAggregation: function () {\n\t\t\tconst element = $('.js-discount_aggreg', this.getInventoryHeadContainer()).find('option:selected');\n\t\t\tif (element.length) {\n\t\t\t\treturn parseInt(element.val());\n\t\t\t}\n\t\t\treturn parseInt(this.discount.aggregation);\n\t\t},\n\t\tgetTax: function (row) {\n\t\t\tconst self = this;\n\t\t\tlet taxParams = row.find('.taxParam').val();\n\t\t\tif (taxParams == '' || taxParams == '[]' || taxParams == undefined) return 0;\n\t\t\ttaxParams = JSON.parse(taxParams);\n\t\t\tlet valuePrices = this.getNetPrice(row);\n\t\t\tlet taxRate = 0;\n\t\t\tlet types = taxParams.aggregationType;\n\t\t\tif (typeof types == 'string') {\n\t\t\t\ttypes = [types];\n\t\t\t}\n\t\t\tif (types) {\n\t\t\t\ttypes.forEach(function (entry) {\n\t\t\t\t\tlet taxValue = 0;\n\t\t\t\t\tswitch (entry) {\n\t\t\t\t\t\tcase 'individual':\n\t\t\t\t\t\t\ttaxValue = taxParams.individualTax;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'global':\n\t\t\t\t\t\t\ttaxValue = taxParams.globalTax;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'group':\n\t\t\t\t\t\t\ttaxValue = taxParams.groupTax;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'regional':\n\t\t\t\t\t\t\ttaxValue = taxParams.regionalTax;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\ttaxRate += valuePrices * (taxValue / 100);\n\t\t\t\t\tif (self.tax.aggregation == 2) {\n\t\t\t\t\t\tvaluePrices = valuePrices + taxRate;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn taxRate;\n\t\t},\n\t\tgetTaxPercent: function (row) {\n\t\t\tlet taxParams = row.find('.taxParam').val();\n\t\t\tif (taxParams == '' || taxParams == '[]' || taxParams == undefined) return 0;\n\t\t\ttaxParams = JSON.parse(taxParams);\n\t\t\tlet taxPercent = 0;\n\t\t\tlet types =\n\t\t\t\ttypeof taxParams.aggregationType === 'string' ? [taxParams.aggregationType] : taxParams.aggregationType;\n\t\t\ttypes.forEach(function (aggregationType) {\n\t\t\t\ttaxPercent += taxParams[aggregationType + 'Tax'] || 0;\n\t\t\t});\n\t\t\treturn taxPercent;\n\t\t},\n\t\tgetTaxParams: function (row) {\n\t\t\tlet taxParams = row.find('.taxParam').val();\n\t\t\tif (taxParams == '' || taxParams == '[]' || taxParams == undefined) return false;\n\t\t\treturn JSON.parse(taxParams);\n\t\t},\n\t\tgetQuantityValue: function (row) {\n\t\t\treturn $('.qty', row).getNumberFromValue();\n\t\t},\n\t\tgetUnitPriceValue: function (row) {\n\t\t\treturn $('.unitPrice', row).getNumberFromValue();\n\t\t},\n\t\tgetDiscount: function (row) {\n\t\t\tlet discountParams = row.find('.discountParam').val();\n\t\t\tif (discountParams == '' || discountParams == 'null' || discountParams == '[]' || discountParams == undefined) {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\tconst aggregation = this.getDiscountAggregation();\n\t\t\tdiscountParams = JSON.parse(discountParams);\n\t\t\tlet valuePrices = this.getTotalPrice(row),\n\t\t\t\tdiscountRate = 0,\n\t\t\t\ttypes = discountParams.aggregationType;\n\t\t\tif (typeof types == 'string') {\n\t\t\t\ttypes = [types];\n\t\t\t}\n\t\t\tif (types) {\n\t\t\t\ttypes.forEach((entry) => {\n\t\t\t\t\tswitch (entry) {\n\t\t\t\t\t\tcase 'individual':\n\t\t\t\t\t\t\tif (discountParams.individualDiscountType === 'percentage') {\n\t\t\t\t\t\t\t\tdiscountRate += valuePrices * (discountParams.individualDiscount / 100);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tdiscountRate += discountParams.individualDiscount;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'global':\n\t\t\t\t\t\t\tdiscountRate += valuePrices * (discountParams.globalDiscount / 100);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'group':\n\t\t\t\t\t\t\tdiscountRate += valuePrices * ((discountParams.groupDiscount ? discountParams.groupDiscount : 0) / 100);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'additional':\n\t\t\t\t\t\t\tdiscountRate += valuePrices * (discountParams.additionalDiscount / 100);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tif (aggregation === 2) {\n\t\t\t\t\t\tvaluePrices = valuePrices - discountRate;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn discountRate;\n\t\t},\n\t\tgetNetPrice: function (row) {\n\t\t\treturn this.getTotalPrice(row) - this.getDiscount(row);\n\t\t},\n\t\tgetTotalPrice: function (row) {\n\t\t\treturn this.getQuantityValue(row) * this.getUnitPriceValue(row);\n\t\t},\n\t\tgetGrossPrice: function (row) {\n\t\t\treturn $('.grossPrice', row).getNumberFromValue();\n\t\t},\n\t\tgetPurchase: function (row) {\n\t\t\tlet qty = this.getQuantityValue(row);\n\t\t\tlet element = $('.purchase', row);\n\t\t\tlet purchase = 0;\n\t\t\tif (element.length > 0) {\n\t\t\t\tpurchase = App.Fields.Double.formatToDb(element.val());\n\t\t\t}\n\t\t\treturn purchase * qty;\n\t\t},\n\t\tgetSummaryGrossPrice: function () {\n\t\t\tlet thisInstance = this;\n\t\t\tlet price = 0;\n\t\t\tthis.getInventoryItemsContainer()\n\t\t\t\t.find(thisInstance.rowClass)\n\t\t\t\t.each(function () {\n\t\t\t\t\tprice += thisInstance.getGrossPrice($(this));\n\t\t\t\t});\n\t\t\treturn App.Fields.Double.formatToDb(price);\n\t\t},\n\t\t/**\n\t\t * Set currency\n\t\t * @param {int} val\n\t\t */\n\t\tsetCurrency(val) {\n\t\t\tthis.getInventoryHeadContainer().find('.js-currency').val(val).trigger('change');\n\t\t},\n\t\t/**\n\t\t * Set currency param\n\t\t * @param {string} val json string\n\t\t */\n\t\tsetCurrencyParam(val) {\n\t\t\tthis.getInventoryHeadContainer().find('.js-currencyparam').val(val);\n\t\t},\n\t\t/**\n\t\t * Set discount mode\n\t\t * @param {int} val\n\t\t */\n\t\tsetDiscountMode(val) {\n\t\t\tthis.getInventoryHeadContainer().find('.js-discountmode').val(val).trigger('change');\n\t\t},\n\t\t/**\n\t\t * Set tax mode\n\t\t * @param {int} val\n\t\t */\n\t\tsetTaxMode(val) {\n\t\t\tthis.getInventoryHeadContainer().find('.js-taxmode').val(val).trigger('change');\n\t\t},\n\t\t/**\n\t\t * Set inventory id\n\t\t * @param {jQuery} row\n\t\t * @param {int} val\n\t\t * @param {string} display\n\t\t */\n\t\tsetName(row, val, display) {\n\t\t\trow.find('.js-name').val(val).trigger('change');\n\t\t\trow.find('.js-name_display').val(display).attr('readonly', 'true').trigger('change');\n\t\t},\n\t\t/**\n\t\t * Set inventory row quantity\n\t\t * @param {jQuery} row\n\t\t * @param {int} val\n\t\t */\n\t\tsetQuantity(row, val) {\n\t\t\trow.find('.qty').val(val).trigger('change');\n\t\t},\n\t\t/**\n\t\t * Set unit original (db) value\n\t\t * @param {jQuery} row\n\t\t * @param {string} val\n\t\t * @param {string} display\n\t\t */\n\t\tsetUnit(row, val, display) {\n\t\t\trow.find('.unit').val(val).trigger('change');\n\t\t\trow.find('.unitText').text(display).trigger('change');\n\t\t},\n\t\t/**\n\t\t * Set subUnit original (db) value\n\t\t * @param {jQuery} row\n\t\t * @param {string} val\n\t\t * @param {string} display\n\t\t */\n\t\tsetSubUnit(row, val, display) {\n\t\t\trow.find('.subunit').val(val);\n\t\t\trow.find('.subunitText').val(display);\n\t\t},\n\t\t/**\n\t\t * Set inventory row comment\n\t\t * @param {jQuery} row\n\t\t * @param {string} val\n\t\t */\n\t\tsetComment(row, val) {\n\t\t\trow\n\t\t\t\t.parent()\n\t\t\t\t.find('[numrowex=' + row.attr('numrow') + '] .comment')\n\t\t\t\t.val(val);\n\t\t},\n\t\t/**\n\t\t * Set inventory row unit price\n\t\t * @param {jQuery} row\n\t\t * @param {string} val\n\t\t */\n\t\tsetUnitPrice: function (row, val) {\n\t\t\tval = App.Fields.Double.formatToDisplay(val);\n\t\t\trow.find('.unitPrice').val(val).attr('title', val);\n\t\t\treturn this;\n\t\t},\n\t\t/**\n\t\t * Set inventory row purchase\n\t\t * @param {jQuery} row\n\t\t * @param {string} val\n\t\t */\n\t\tsetPurchase: function (row, val) {\n\t\t\trow.find('.purchase').val(App.Fields.Double.formatToDisplay(val));\n\t\t\treturn this;\n\t\t},\n\t\t/**\n\t\t * Set inventory row net price\n\t\t * @param {jQuery} row\n\t\t * @param {string} val\n\t\t */\n\t\tsetNetPrice: function (row, val) {\n\t\t\tval = App.Fields.Double.formatToDisplay(val);\n\t\t\t$('.netPriceText', row).text(val);\n\t\t\t$('.netPrice', row).val(val);\n\t\t},\n\t\t/**\n\t\t * Set inventory row gross price\n\t\t * @param {jQuery} row\n\t\t * @param {string} val\n\t\t */\n\t\tsetGrossPrice: function (row, val) {\n\t\t\tval = App.Fields.Double.formatToDisplay(val);\n\t\t\t$('.grossPriceText', row).text(val);\n\t\t\t$('.grossPrice', row).val(val);\n\t\t},\n\t\t/**\n\t\t * Set inventory row total price\n\t\t * @param {jQuery} row\n\t\t * @param {string} val\n\t\t */\n\t\tsetTotalPrice: function (row, val) {\n\t\t\tval = App.Fields.Double.formatToDisplay(val);\n\t\t\t$('.totalPriceText', row).text(val);\n\t\t\t$('.totalPrice', row).val(val);\n\t\t},\n\t\t/**\n\t\t * Set inventory row margin\n\t\t * @param {jQuery} row\n\t\t * @param {string} val\n\t\t */\n\t\tsetMargin: function (row, val) {\n\t\t\t$('.margin', row).val(App.Fields.Double.formatToDisplay(val));\n\t\t},\n\t\t/**\n\t\t * Set inventory row margin percent\n\t\t * @param {jQuery} row\n\t\t * @param {string} val\n\t\t */\n\t\tsetMarginP: function (row, val) {\n\t\t\t$('.marginp', row).val(App.Fields.Double.formatToDisplay(val));\n\t\t},\n\t\t/**\n\t\t * Set inventory row discount\n\t\t * @param {jQuery} row\n\t\t * @param {string} val\n\t\t */\n\t\tsetDiscount: function (row, val) {\n\t\t\t$('.discount', row).val(App.Fields.Double.formatToDisplay(val));\n\t\t},\n\t\t/**\n\t\t * Set inventory row discount param\n\t\t * @param {jQuery} row\n\t\t * @param {string} val\n\t\t */\n\t\tsetDiscountParam: function (row, val) {\n\t\t\t$('.discountParam', row).val(JSON.stringify(val));\n\t\t},\n\t\t/**\n\t\t * Set inventory row tax\n\t\t * @param {jQuery} row\n\t\t * @param {string} val\n\t\t */\n\t\tsetTax: function (row, val) {\n\t\t\t$('.tax', row).val(App.Fields.Double.formatToDisplay(val));\n\t\t},\n\t\t/**\n\t\t * Set inventory row tax percent\n\t\t * @param {jQuery} row\n\t\t * @param {string} val\n\t\t */\n\t\tsetTaxPercent: function (row, val) {\n\t\t\t$('.js-tax-percent', row).val(App.Fields.Double.formatToDisplay(val));\n\t\t},\n\t\t/**\n\t\t * Set inventory row tax param\n\t\t * @param {jQuery} row\n\t\t * @param {string} val\n\t\t */\n\t\tsetTaxParam: function (row, val) {\n\t\t\t$('.taxParam', row).val(JSON.stringify(val));\n\t\t},\n\t\tquantityChangeActions: function (row) {\n\t\t\tthis.rowCalculations(row);\n\t\t\tthis.summaryCalculations();\n\t\t},\n\t\trowCalculations: function (row) {\n\t\t\tthis.calculateTotalPrice(row);\n\t\t\tthis.calculateDiscounts(row);\n\t\t\tthis.calculateNetPrice(row);\n\t\t\tthis.calculateTaxes(row);\n\t\t\tthis.calculateGrossPrice(row);\n\t\t\tthis.calculateMargin(row);\n\t\t\tapp.event.trigger('Inventory.RowCalculations', this, row);\n\t\t},\n\t\trowsCalculations: function () {\n\t\t\tconst self = this;\n\t\t\tthis.getInventoryItemsContainer()\n\t\t\t\t.find(self.rowClass)\n\t\t\t\t.each(function () {\n\t\t\t\t\tlet row = $(this);\n\t\t\t\t\tself.syncHeaderData(row);\n\t\t\t\t\tself.quantityChangeActions(row);\n\t\t\t\t});\n\t\t\tself.calculateItemNumbers();\n\t\t},\n\t\tcalculateDiscounts: function (row) {\n\t\t\tthis.setDiscount(row, this.getDiscount(row));\n\t\t},\n\t\tcalculateTaxes: function (row) {\n\t\t\tthis.setTax(row, this.getTax(row));\n\t\t\tthis.setTaxPercent(row, this.getTaxPercent(row));\n\t\t},\n\t\tsummaryCalculations: function () {\n\t\t\tlet thisInstance = this;\n\t\t\tthisInstance\n\t\t\t\t.getInventoryItemsContainer()\n\t\t\t\t.find('tfoot .wisableTd')\n\t\t\t\t.each(function () {\n\t\t\t\t\tthisInstance.calculateSummary($(this), $(this).data('sumfield'));\n\t\t\t\t});\n\t\t\tthisInstance.calculateDiscountSummary();\n\t\t\tthisInstance.calculateTaxSummary();\n\t\t\tthisInstance.calculateCurrenciesSummary();\n\t\t\tthisInstance.calculateMarginPSummary();\n\t\t},\n\t\tcalculateSummary: function (element, field) {\n\t\t\tlet thisInstance = this;\n\t\t\tlet sum = 0;\n\t\t\telement\n\t\t\t\t.closest('.js-inv-container-group')\n\t\t\t\t.find(thisInstance.rowClass)\n\t\t\t\t.each(function () {\n\t\t\t\t\tlet e = $(this).find('.' + field);\n\t\t\t\t\tif (e.length > 0) {\n\t\t\t\t\t\tsum += App.Fields.Double.formatToDb(e.val());\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\telement.text(App.Fields.Double.formatToDisplay(sum));\n\t\t},\n\t\tcalculateMarginPSummary: function () {\n\t\t\tlet sumRow = this.getInventoryItemsContainer().find('tfoot'),\n\t\t\t\ttotalPriceField =\n\t\t\t\t\tsumRow.find('[data-sumfield=\"netPrice\"]').length > 0\n\t\t\t\t\t\t? sumRow.find('[data-sumfield=\"netPrice\"]')\n\t\t\t\t\t\t: sumRow.find('[data-sumfield=\"totalPrice\"]'),\n\t\t\t\tsumPrice = totalPriceField.getNumberFromText(),\n\t\t\t\tpurchase = 0,\n\t\t\t\tmarginp = 0;\n\t\t\tthis.getInventoryItemsContainer()\n\t\t\t\t.find(this.rowClass)\n\t\t\t\t.each(function () {\n\t\t\t\t\tlet qty = $(this).find('.qty').getNumberFromValue(),\n\t\t\t\t\t\tpurchasePrice = $(this).find('.purchase').getNumberFromValue();\n\t\t\t\t\tif (qty > 0 && purchasePrice > 0) {\n\t\t\t\t\t\tpurchase += qty * purchasePrice;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\tlet subtraction = sumPrice - purchase;\n\t\t\tif (purchase !== 0 && sumPrice !== 0) {\n\t\t\t\tmarginp = (subtraction * 100) / purchase;\n\t\t\t}\n\t\t\tsumRow.find('[data-sumfield=\"marginP\"]').text(App.Fields.Double.formatToDisplay(marginp) + '%');\n\t\t},\n\t\tcalculateDiscountSummary: function () {\n\t\t\tlet thisInstance = this;\n\t\t\tlet discount = thisInstance.getAllDiscount();\n\t\t\tlet container = thisInstance.getInventorySummaryDiscountContainer();\n\t\t\tcontainer.find('input').val(App.Fields.Double.formatToDisplay(discount));\n\t\t},\n\t\tgetAllDiscount: function () {\n\t\t\tlet thisInstance = this;\n\t\t\tlet discount = 0;\n\t\t\tthis.getInventoryItemsContainer()\n\t\t\t\t.find(thisInstance.rowClass)\n\t\t\t\t.each(function (index) {\n\t\t\t\t\tlet row = $(this);\n\t\t\t\t\tdiscount += thisInstance.getDiscount(row);\n\t\t\t\t});\n\t\t\treturn discount;\n\t\t},\n\t\tcalculateCurrenciesSummary: function () {\n\t\t\tlet container = this.getInventorySummaryCurrenciesContainer(),\n\t\t\t\tselected = $('.js-currency option:selected', this.getInventoryHeadContainer()),\n\t\t\t\tbase = $('.js-currency option[data-base-currency=\"1\"]', this.getInventoryHeadContainer()),\n\t\t\t\tconversionRate = selected.data('conversionRate'),\n\t\t\t\tbaseConversionRate = base.data('conversionRate');\n\t\t\tif (conversionRate == baseConversionRate) {\n\t\t\t\tcontainer.addClass('d-none');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconversionRate = parseFloat(baseConversionRate) / parseFloat(conversionRate);\n\t\t\tcontainer.removeClass('d-none');\n\t\t\tlet taxes = this.getAllTaxes();\n\t\t\tlet sum = 0;\n\t\t\tcontainer.find('.js-panel__body').html('');\n\t\t\t$.each(taxes, function (index, value) {\n\t\t\t\tif (value != undefined) {\n\t\t\t\t\tvalue = value * conversionRate;\n\t\t\t\t\tlet row = container.find('.d-none .form-group').clone();\n\t\t\t\t\trow.find('.percent').text(index + '%');\n\t\t\t\t\trow.find('input').val(App.Fields.Double.formatToDisplay(value));\n\t\t\t\t\trow.appendTo(container.find('.js-panel__body'));\n\t\t\t\t\tsum += value;\n\t\t\t\t}\n\t\t\t});\n\t\t\tcontainer.find('.js-panel__footer input').val(App.Fields.Double.formatToDisplay(sum));\n\t\t},\n\t\tcalculateTaxSummary: function () {\n\t\t\tlet thisInstance = this;\n\t\t\tlet taxes = thisInstance.getAllTaxes();\n\t\t\tlet container = thisInstance.getInventorySummaryTaxesContainer();\n\t\t\tcontainer.find('.js-panel__body').html('');\n\t\t\tlet sum = 0;\n\t\t\tfor (let index in taxes) {\n\t\t\t\tlet row = container.find('.d-none .form-group').clone();\n\t\t\t\trow.find('.percent').text(App.Fields.Double.formatToDisplay(index) + '%');\n\t\t\t\trow.find('input').val(App.Fields.Double.formatToDisplay(taxes[index]));\n\t\t\t\trow.appendTo(container.find('.js-panel__body'));\n\t\t\t\tsum += taxes[index];\n\t\t\t}\n\t\t\tcontainer.find('.js-panel__footer input').val(App.Fields.Double.formatToDisplay(sum));\n\t\t},\n\t\tgetAllTaxes: function () {\n\t\t\tlet thisInstance = this;\n\t\t\tlet tax = [];\n\t\t\tlet typeSummary = $('.aggregationTypeTax').val();\n\t\t\tthis.getInventoryItemsContainer()\n\t\t\t\t.find(thisInstance.rowClass)\n\t\t\t\t.each(function () {\n\t\t\t\t\tlet row = $(this);\n\t\t\t\t\tlet netPrice = thisInstance.getNetPrice(row);\n\t\t\t\t\tlet params = row.find('.taxParam').val();\n\t\t\t\t\tif (params != '' && params != '[]' && params != undefined) {\n\t\t\t\t\t\tlet param = JSON.parse(params);\n\t\t\t\t\t\tif (typeof param.aggregationType == 'string') {\n\t\t\t\t\t\t\tparam.aggregationType = [param.aggregationType];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (param.aggregationType)\n\t\t\t\t\t\t\t$.each(param.aggregationType, function (_, name) {\n\t\t\t\t\t\t\t\tname = name + 'Tax';\n\t\t\t\t\t\t\t\tif (param[name] == undefined) {\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tlet percent = parseFloat(param[name]);\n\t\t\t\t\t\t\t\tlet old = 0;\n\t\t\t\t\t\t\t\tif (tax[percent] != undefined) {\n\t\t\t\t\t\t\t\t\told = parseFloat(tax[percent]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tlet taxRate = netPrice * (percent / 100);\n\t\t\t\t\t\t\t\ttax[percent] = old + taxRate;\n\t\t\t\t\t\t\t\tif (typeSummary == '2') {\n\t\t\t\t\t\t\t\t\tnetPrice += taxRate;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\treturn tax;\n\t\t},\n\t\tcalculateNetPrice: function (row) {\n\t\t\tthis.setNetPrice(row, this.getNetPrice(row));\n\t\t},\n\t\tcalculateGrossPrice: function (row) {\n\t\t\tlet netPrice = this.getNetPrice(row);\n\t\t\tif (this.isIndividualTaxMode(row) || this.isGroupTaxMode(row)) {\n\t\t\t\tnetPrice += this.getTax(row);\n\t\t\t}\n\t\t\tthis.setGrossPrice(row, netPrice);\n\t\t},\n\t\tcalculateTotalPrice: function (row) {\n\t\t\tthis.setTotalPrice(row, this.getTotalPrice(row));\n\t\t},\n\t\tcalculateMargin: function (row) {\n\t\t\tlet netPrice;\n\t\t\tif ($('.netPrice', row).length) {\n\t\t\t\tnetPrice = this.getNetPrice(row);\n\t\t\t} else {\n\t\t\t\tnetPrice = this.getTotalPrice(row) - this.getDiscount(row);\n\t\t\t}\n\t\t\tlet purchase = this.getPurchase(row);\n\t\t\tlet margin = netPrice - purchase;\n\t\t\tthis.setMargin(row, margin);\n\t\t\tlet marginp = '0';\n\t\t\tif (purchase !== 0) {\n\t\t\t\tmarginp = (margin / purchase) * 100;\n\t\t\t}\n\t\t\tthis.setMarginP(row, marginp);\n\t\t},\n\t\tcalculateDiscount: function (_row, modal) {\n\t\t\tconst netPriceBeforeDiscount = App.Fields.Double.formatToDb(modal.find('.valueTotalPrice').text()),\n\t\t\t\tdiscountsType = modal.find('.discountsType').val();\n\t\t\tlet valuePrices = netPriceBeforeDiscount,\n\t\t\t\tglobalDiscount = 0,\n\t\t\t\tgroupDiscount = 0,\n\t\t\t\tindividualDiscount = 0,\n\t\t\t\tadditionalDiscount = 0;\n\t\t\tif (discountsType == 0 || discountsType == 1) {\n\t\t\t\tif (modal.find('.js-active .globalDiscount').length > 0) {\n\t\t\t\t\tglobalDiscount = App.Fields.Double.formatToDb(modal.find('.js-active .globalDiscount').val());\n\t\t\t\t}\n\t\t\t\tif (modal.find('.js-active .additionalDiscountValue').length > 0) {\n\t\t\t\t\tadditionalDiscount = App.Fields.Double.formatToDb(modal.find('.js-active .additionalDiscountValue').val());\n\t\t\t\t}\n\t\t\t\tif (modal.find('.js-active .individualDiscountType').length > 0) {\n\t\t\t\t\tlet value = App.Fields.Double.formatToDb(modal.find('.js-active .individualDiscountValue').val());\n\t\t\t\t\tif (modal.find('.js-active .individualDiscountType:checked').val() == 'percentage') {\n\t\t\t\t\t\tindividualDiscount = netPriceBeforeDiscount * (value / 100);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tindividualDiscount = value;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\tmodal.find('.js-active .groupCheckbox').length > 0 &&\n\t\t\t\t\tmodal.find('.js-active .groupCheckbox').prop('checked') == true\n\t\t\t\t) {\n\t\t\t\t\tgroupDiscount = App.Fields.Double.formatToDb(modal.find('.groupValue').val());\n\t\t\t\t\tgroupDiscount = netPriceBeforeDiscount * (groupDiscount / 100);\n\t\t\t\t}\n\t\t\t\tvaluePrices = valuePrices * ((100 - globalDiscount) / 100);\n\t\t\t\tvaluePrices = valuePrices * ((100 - additionalDiscount) / 100);\n\t\t\t\tvaluePrices = valuePrices - individualDiscount;\n\t\t\t\tvaluePrices = valuePrices - groupDiscount;\n\t\t\t} else if (discountsType == 2) {\n\t\t\t\tmodal.find('.js-active').each(function () {\n\t\t\t\t\tlet panel = $(this);\n\t\t\t\t\tif (panel.find('.globalDiscount').length > 0) {\n\t\t\t\t\t\tvaluePrices =\n\t\t\t\t\t\t\tvaluePrices * ((100 - App.Fields.Double.formatToDb(panel.find('.globalDiscount').val())) / 100);\n\t\t\t\t\t} else if (panel.find('.groupCheckbox').length > 0 && panel.find('.groupCheckbox').prop('checked') == true) {\n\t\t\t\t\t\tvaluePrices = valuePrices * ((100 - App.Fields.Double.formatToDb(panel.find('.groupValue').val())) / 100);\n\t\t\t\t\t} else if (panel.find('.individualDiscountType').length > 0) {\n\t\t\t\t\t\tlet value = App.Fields.Double.formatToDb(panel.find('.individualDiscountValue').val());\n\t\t\t\t\t\tif (panel.find('.individualDiscountType[name=\"individualDiscountType\"]:checked').val() === 'percentage') {\n\t\t\t\t\t\t\tvaluePrices = valuePrices * ((100 - value) / 100);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvaluePrices = valuePrices - value;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (panel.find('.additionalDiscountValue').length > 0) {\n\t\t\t\t\t\tvaluePrices =\n\t\t\t\t\t\t\tvaluePrices * ((100 - App.Fields.Double.formatToDb(panel.find('.additionalDiscountValue').val())) / 100);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tmodal.find('.valuePrices').text(App.Fields.Double.formatToDisplay(valuePrices));\n\t\t\tmodal.find('.valueDiscount').text(App.Fields.Double.formatToDisplay(netPriceBeforeDiscount - valuePrices));\n\t\t},\n\t\tcalculateTax: function (_row, modal) {\n\t\t\tlet netPriceWithoutTax = App.Fields.Double.formatToDb(modal.find('.valueNetPrice').text()),\n\t\t\t\tvaluePrices = netPriceWithoutTax,\n\t\t\t\tglobalTax = 0,\n\t\t\t\tgroupTax = 0,\n\t\t\t\tregionalTax = 0,\n\t\t\t\tindividualTax = 0;\n\n\t\t\tlet taxType = modal.find('.taxsType').val();\n\t\t\tif (taxType == '0' || taxType == '1') {\n\t\t\t\tif (modal.find('.js-active .globalTax').length > 0) {\n\t\t\t\t\tglobalTax = App.Fields.Double.formatToDb(modal.find('.js-active .globalTax').val());\n\t\t\t\t}\n\t\t\t\tif (modal.find('.js-active .individualTaxValue').length > 0) {\n\t\t\t\t\tlet value = App.Fields.Double.formatToDb(modal.find('.js-active .individualTaxValue').val());\n\t\t\t\t\tindividualTax = (value / 100) * valuePrices;\n\t\t\t\t}\n\t\t\t\tif (modal.find('.js-active .groupTax').length > 0) {\n\t\t\t\t\tgroupTax = App.Fields.Double.formatToDb(modal.find('.groupTax').val());\n\t\t\t\t\tgroupTax = netPriceWithoutTax * (groupTax / 100);\n\t\t\t\t}\n\t\t\t\tif (modal.find('.js-active .regionalTax').length > 0) {\n\t\t\t\t\tregionalTax = App.Fields.Double.formatToDb(modal.find('.regionalTax').val());\n\t\t\t\t\tregionalTax = netPriceWithoutTax * (regionalTax / 100);\n\t\t\t\t}\n\n\t\t\t\tvaluePrices = valuePrices * ((100 + globalTax) / 100);\n\t\t\t\tvaluePrices = valuePrices + individualTax;\n\t\t\t\tvaluePrices = valuePrices + groupTax;\n\t\t\t\tvaluePrices = valuePrices + regionalTax;\n\t\t\t} else if (taxType == '2') {\n\t\t\t\tmodal.find('.js-active').each(function () {\n\t\t\t\t\tlet panel = $(this);\n\t\t\t\t\tif (panel.find('.globalTax').length > 0) {\n\t\t\t\t\t\tvaluePrices = valuePrices * ((100 + App.Fields.Double.formatToDb(panel.find('.globalTax').val())) / 100);\n\t\t\t\t\t} else if (panel.find('.groupTax').length > 0) {\n\t\t\t\t\t\tvaluePrices = valuePrices * ((100 + App.Fields.Double.formatToDb(panel.find('.groupTax').val())) / 100);\n\t\t\t\t\t} else if (panel.find('.regionalTax').length > 0) {\n\t\t\t\t\t\tvaluePrices = valuePrices * ((100 + App.Fields.Double.formatToDb(panel.find('.regionalTax').val())) / 100);\n\t\t\t\t\t} else if (panel.find('.individualTaxValue').length > 0) {\n\t\t\t\t\t\tvaluePrices =\n\t\t\t\t\t\t\t((App.Fields.Double.formatToDb(panel.find('.individualTaxValue').val()) + 100) / 100) * valuePrices;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (netPriceWithoutTax) {\n\t\t\t\tlet taxValue = ((valuePrices - netPriceWithoutTax) / netPriceWithoutTax) * 100;\n\t\t\t\tmodal.find('.js-tax-value').text(App.Fields.Double.formatToDisplay(taxValue));\n\t\t\t}\n\t\t\tmodal.find('.valuePrices').text(App.Fields.Double.formatToDisplay(valuePrices));\n\t\t\tmodal.find('.valueTax').text(App.Fields.Double.formatToDisplay(valuePrices - netPriceWithoutTax));\n\t\t},\n\t\tupdateRowSequence: function () {\n\t\t\tlet items = this.getInventoryItemsContainer();\n\t\t\titems.find(this.rowClass).each(function (index) {\n\t\t\t\t$(this)\n\t\t\t\t\t.find('.sequence')\n\t\t\t\t\t.val(index + 1);\n\t\t\t});\n\t\t},\n\t\tregisterInventorySaveData: function () {\n\t\t\tthis.form.on(Vtiger_Edit_Js.recordPreSave, () => {\n\t\t\t\tthis.syncHeaderData();\n\t\t\t\tif (!this.checkLimits(this.form)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tsyncHeaderData(container) {\n\t\t\tthis.renumberHeaderItems();\n\t\t\tlet header = this.getInventoryHeadContainer();\n\t\t\tif (typeof container === 'undefined') {\n\t\t\t\tcontainer = this.getContainer();\n\t\t\t}\n\t\t\tcontainer.find('.js-sync').each((_, e) => {\n\t\t\t\tlet element = $(e);\n\t\t\t\tlet value;\n\t\t\t\tlet name = element.data('syncId');\n\t\t\t\tlet classElement = '.js-' + element.data('syncId');\n\t\t\t\tif (name === 'grouplabel' || name === 'groupid') {\n\t\t\t\t\tlet row = element.closest(this.rowClass);\n\t\t\t\t\twhile (row.is('tr') && row.prev().find(classElement).length < 1) {\n\t\t\t\t\t\trow = row.prev();\n\t\t\t\t\t}\n\t\t\t\t\tvalue = row.prev().find(classElement);\n\t\t\t\t} else {\n\t\t\t\t\tvalue = header.find(classElement);\n\t\t\t\t}\n\t\t\t\telement.val(value.length ? value.val() : element.data('default'));\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Renumber header items\n\t\t */\n\t\trenumberHeaderItems() {\n\t\t\tthis.getContainer()\n\t\t\t\t.find('.js-inv-container-group .js-groupid')\n\t\t\t\t.each((n, e) => {\n\t\t\t\t\te.value = n + 1;\n\t\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function which will be used to handle price book popup\n\t\t * @params :  element - popup image element\n\t\t */\n\t\tpricebooksModalHandler: function (element) {\n\t\t\tlet lineItemRow = element.closest(this.rowClass);\n\t\t\tlet rowName = lineItemRow.find('.rowName');\n\t\t\tlet currencyId = this.getCurrency() || CONFIG.defaultCurrencyId;\n\t\t\tapp.showRecordsList(\n\t\t\t\t{\n\t\t\t\t\tmodule: 'PriceBooks',\n\t\t\t\t\tsrc_module: $('[name=\"popupReferenceModule\"]', rowName).val(),\n\t\t\t\t\tsrc_record: $('.sourceField', rowName).val(),\n\t\t\t\t\tsrc_field: $('[name=\"popupReferenceModule\"]', rowName).data('field'),\n\t\t\t\t\tsearch_params: JSON.stringify([\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\t['currency_id', 'e', currencyId],\n\t\t\t\t\t\t\t['active', 'e', 1]\n\t\t\t\t\t\t]\n\t\t\t\t\t]),\n\t\t\t\t\tlockedFields: ['currency_id', 'active'],\n\t\t\t\t\tcvEnabled: false,\n\t\t\t\t\tcurrency_id: currencyId,\n\t\t\t\t\tadditionalData: { currency_id: currencyId }\n\t\t\t\t},\n\t\t\t\t(_modal, instance) => {\n\t\t\t\t\tinstance.setSelectEvent((responseData) => {\n\t\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\t\tmodule: 'PriceBooks',\n\t\t\t\t\t\t\taction: 'ProductListPrice',\n\t\t\t\t\t\t\trecord: responseData.id,\n\t\t\t\t\t\t\tsrc_record: $('.sourceField', rowName).val()\n\t\t\t\t\t\t}).done((data) => {\n\t\t\t\t\t\t\tif (data.result) {\n\t\t\t\t\t\t\t\tthis.setUnitPrice(lineItemRow, data.result);\n\t\t\t\t\t\t\t\tthis.quantityChangeActions(lineItemRow);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tapp.errorLog('Incorrect data', responseData);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t);\n\t\t},\n\t\tsubProductsCashe: [],\n\t\tloadSubProducts: function (parentRow, indicator) {\n\t\t\tlet thisInstance = this;\n\t\t\tlet progressInstace;\n\t\t\tlet recordId = $('input.sourceField.js-name', parentRow).val();\n\t\t\tlet recordModule = parentRow.find('.rowName input[name=\"popupReferenceModule\"]').val();\n\t\t\tthisInstance.removeSubProducts(parentRow);\n\t\t\tif (recordId == '0' || recordId == '' || $.inArray(recordModule, ['Products', 'Services']) < 0) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (thisInstance.subProductsCashe[recordId]) {\n\t\t\t\tthisInstance.addSubProducts(parentRow, thisInstance.subProductsCashe[recordId]);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tlet subProrductParams = {\n\t\t\t\tmodule: 'Products',\n\t\t\t\taction: 'SubProducts',\n\t\t\t\trecord: recordId\n\t\t\t};\n\t\t\tif (indicator) {\n\t\t\t\tprogressInstace = $.progressIndicator();\n\t\t\t}\n\t\t\tAppConnector.request(subProrductParams)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\tlet responseData = data.result;\n\t\t\t\t\tthisInstance.subProductsCashe[recordId] = responseData;\n\t\t\t\t\tthisInstance.addSubProducts(parentRow, responseData);\n\t\t\t\t\tif (progressInstace) {\n\t\t\t\t\t\tprogressInstace.hide();\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.fail(function () {\n\t\t\t\t\tif (progressInstace) {\n\t\t\t\t\t\tprogressInstace.hide();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t},\n\t\tremoveSubProducts: function (parentRow) {\n\t\t\tlet subProductsContainer = $('.subProductsContainer ul', parentRow);\n\t\t\tsubProductsContainer.find('li').remove();\n\t\t},\n\t\taddSubProducts: function (parentRow, responseData) {\n\t\t\tlet subProductsContainer = $('.subProductsContainer ul', parentRow);\n\t\t\tfor (let id in responseData) {\n\t\t\t\tsubProductsContainer.append($('<li>').text(responseData[id]));\n\t\t\t}\n\t\t},\n\t\tmapResultsToFields: function (referenceModule, parentRow, responseData) {\n\t\t\tlet unit,\n\t\t\t\ttaxParam = [];\n\t\t\tlet thisInstance = this;\n\t\t\tlet isGroupTax = thisInstance.isGroupTaxMode();\n\t\t\tfor (let id in responseData) {\n\t\t\t\tlet recordData = responseData[id];\n\t\t\t\tlet description = recordData.description;\n\t\t\t\tlet unitPriceValues = recordData.unitPriceValues;\n\t\t\t\tlet unitPriceValuesJson = JSON.stringify(unitPriceValues);\n\t\t\t\t// Load taxes detail\n\t\t\t\tif (isGroupTax) {\n\t\t\t\t\tlet parameters = parentRow.closest('.inventoryItems').data('taxParam');\n\t\t\t\t\tif (parameters) {\n\t\t\t\t\t\ttaxParam = JSON.parse(parameters);\n\t\t\t\t\t}\n\t\t\t\t} else if (recordData['taxes']) {\n\t\t\t\t\ttaxParam = { aggregationType: recordData.taxes.type };\n\t\t\t\t\ttaxParam[recordData.taxes.type + 'Tax'] = recordData.taxes.value;\n\t\t\t\t}\n\t\t\t\tif (recordData['taxes']) {\n\t\t\t\t\tparentRow.find('.js-tax').attr('data-default-tax', recordData.taxes.value);\n\t\t\t\t}\n\t\t\t\tthisInstance.setPurchase(parentRow, recordData.purchase);\n\t\t\t\tthisInstance.setTaxParam(parentRow, taxParam);\n\t\t\t\tthisInstance.setTax(parentRow, 0);\n\t\t\t\tthisInstance.setTaxPercent(parentRow, 0);\n\n\t\t\t\tfor (let field in recordData['autoFields']) {\n\t\t\t\t\tlet inputField = parentRow.find(`input.${field},select.${field}`);\n\t\t\t\t\tif (inputField.attr('type') === 'checkbox') {\n\t\t\t\t\t\tinputField.prop('checked', recordData['autoFields'][field]);\n\t\t\t\t\t} else if (inputField.is('select')) {\n\t\t\t\t\t\tinputField.val(recordData['autoFields'][field]).trigger('change');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tinputField.val(recordData['autoFields'][field]);\n\t\t\t\t\t}\n\t\t\t\t\tif (recordData['autoFields'][field + 'Text']) {\n\t\t\t\t\t\tparentRow.find('.' + field + 'Text').text(recordData['autoFields'][field + 'Text']);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (recordData.price !== undefined) {\n\t\t\t\t\tthisInstance.setUnitPrice(parentRow, recordData.price);\n\t\t\t\t}\n\t\t\t\tif (unitPriceValuesJson !== undefined) {\n\t\t\t\t\t$('input.unitPrice', parentRow).attr('list-info', unitPriceValuesJson);\n\t\t\t\t}\n\t\t\t\tlet commentElement = $('textarea.js-inventory-item-comment', parentRow.next());\n\t\t\t\tlet editorInstance = CKEDITOR.instances[commentElement.attr('id')];\n\t\t\t\tif (editorInstance) {\n\t\t\t\t\teditorInstance.setData(description);\n\t\t\t\t} else {\n\t\t\t\t\tcommentElement.val(description);\n\t\t\t\t}\n\t\t\t\tif (typeof recordData['autoFields']['unit'] !== 'undefined') {\n\t\t\t\t\tunit = recordData['autoFields']['unit'];\n\t\t\t\t}\n\t\t\t\tapp.event.trigger('Inventory.SelectionItem', thisInstance, parentRow, recordData, referenceModule);\n\t\t\t\tthis.triggerQtyParam(unit, recordData.qtyPerUnit, parentRow);\n\t\t\t}\n\t\t\tif (referenceModule === 'Products') {\n\t\t\t\tthisInstance.loadSubProducts(parentRow, true);\n\t\t\t}\n\t\t\tthisInstance.quantityChangeActions(parentRow);\n\t\t},\n\t\t/**\n\t\t * Update qtyparam\n\t\t * @param {null|string} unit\n\t\t * @param int perUnit\n\t\t * @param {jQuery} parentRow\n\t\t */\n\t\ttriggerQtyParam(unit, perUnit, parentRow) {\n\t\t\tlet validationEngine;\n\t\t\tswitch (unit) {\n\t\t\t\tdefault:\n\t\t\t\t\t$('.qtyParamInfo', parentRow).addClass('d-none');\n\t\t\t\t\tvalidationEngine = 'validate[required,funcCall[Vtiger_NumberUserFormat_Validator_Js.invokeValidation]]';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'pack':\n\t\t\t\t\t$('.qtyParamInfo', parentRow).removeClass('d-none').removeClass('active');\n\t\t\t\t\t$('.qtyParamInfo', parentRow).attr('data-content', perUnit);\n\t\t\t\t\tvalidationEngine = 'validate[required,funcCall[Vtiger_WholeNumber_Validator_Js.invokeValidation]]';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'pcs':\n\t\t\t\t\t$('.qtyParamInfo', parentRow).addClass('d-none');\n\t\t\t\t\tvalidationEngine = 'validate[required,funcCall[Vtiger_WholeNumber_Validator_Js.invokeValidation]]';\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\t$('input.qty', parentRow).attr('data-validation-engine', validationEngine);\n\t\t},\n\t\tsaveDiscountsParameters: function (parentRow, modal) {\n\t\t\tconst typeName = 'aggregationType',\n\t\t\t\tpanels = modal.find('[name=\"' + typeName + '\"]:checked');\n\t\t\tlet info = {};\n\t\t\tinfo[typeName] = [];\n\t\t\tpanels.each(function () {\n\t\t\t\tlet type = $(this).val(),\n\t\t\t\t\tcontainer = $(this).closest('.js-panel');\n\t\t\t\tif (panels.length > 1) {\n\t\t\t\t\tinfo[typeName].push(type);\n\t\t\t\t} else {\n\t\t\t\t\tinfo[typeName] = type;\n\t\t\t\t}\n\t\t\t\tcontainer.find('[name=\"' + type + 'Discount\"]').each(function () {\n\t\t\t\t\tlet param = type + 'Discount';\n\t\t\t\t\tlet element = $(this);\n\t\t\t\t\tswitch (type) {\n\t\t\t\t\t\tcase 'group':\n\t\t\t\t\t\t\tif (element.closest('.input-group').find('.groupCheckbox').prop('checked')) {\n\t\t\t\t\t\t\t\tinfo[param] = App.Fields.Double.formatToDb(element.val());\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'individual':\n\t\t\t\t\t\t\tlet name = 'individualDiscountType';\n\t\t\t\t\t\t\tinfo[name] = container.find('[name=\"' + name + '\"]:checked').val();\n\t\t\t\t\t\t\tinfo[param] = App.Fields.Double.formatToDb(element.val());\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'global':\n\t\t\t\t\t\tcase 'additional':\n\t\t\t\t\t\t\tinfo[param] = App.Fields.Double.formatToDb(element.val());\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t\tthis.setDiscountParam($('#blackIthemTable'), info);\n\t\t\tthis.setDiscountParam(parentRow, info);\n\t\t},\n\t\tsaveTaxsParameters: function (parentRow, modal) {\n\t\t\tlet info = {};\n\t\t\tconst extend = ['aggregationType', 'groupCheckbox', 'individualTaxType'];\n\t\t\t$.each(this.taxModalFields, function (_, param) {\n\t\t\t\tif ($.inArray(param, extend) >= 0) {\n\t\t\t\t\tif (modal.find('[name=\"' + param + '\"]:checked').length > 1) {\n\t\t\t\t\t\tinfo[param] = [];\n\t\t\t\t\t\tmodal.find('[name=\"' + param + '\"]:checked').each(function () {\n\t\t\t\t\t\t\tinfo[param].push($(this).val());\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tinfo[param] = modal.find('[name=\"' + param + '\"]:checked').val();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tinfo[param] = App.Fields.Double.formatToDb(modal.find('[name=\"' + param + '\"]').val());\n\t\t\t\t}\n\t\t\t});\n\t\t\tparentRow.data('taxParam', JSON.stringify(info));\n\t\t\tthis.setTaxParam(parentRow, info);\n\t\t\tthis.setTaxParam($('#blackIthemTable'), info);\n\t\t},\n\t\tshowExpandedRow: function (row) {\n\t\t\tconst inventoryRowExpanded = this.getInventoryItemsContainer().find('[numrowex=\"' + row.attr('numrow') + '\"]');\n\t\t\tconst element = row.find('.toggleVisibility');\n\t\t\telement.data('status', '1');\n\t\t\tinventoryRowExpanded.removeClass('d-none');\n\t\t},\n\t\thideExpandedRow: function (row) {\n\t\t\tconst inventoryRowExpanded = this.getInventoryItemsContainer().find('[numrowex=\"' + row.attr('numrow') + '\"]');\n\t\t\tconst element = row.find('.toggleVisibility');\n\t\t\telement.data('status', '0');\n\t\t\tinventoryRowExpanded.addClass('d-none');\n\t\t},\n\t\tinitDiscountsParameters: function (parentRow, modal) {\n\t\t\tlet parameters = parentRow.find('.discountParam').val();\n\t\t\tif (parameters == '' || parameters == undefined) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tparameters = JSON.parse(parameters);\n\t\t\t$.each(this.discountModalFields, function (_, param) {\n\t\t\t\tlet parameter = parameters[param];\n\t\t\t\tlet field = modal.find('[name=\"' + param + '\"]');\n\t\t\t\tif (field.attr('type') == 'checkbox' || field.attr('type') == 'radio') {\n\t\t\t\t\tif ('groupCheckbox' === param && parameters['groupDiscount'] !== undefined) {\n\t\t\t\t\t\tfield.prop('checked', true);\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\tlet array = parameter;\n\t\t\t\t\tif (!$.isArray(array)) {\n\t\t\t\t\t\tarray = [array];\n\t\t\t\t\t}\n\t\t\t\t\t$.each(array, function (_, arrayValue) {\n\t\t\t\t\t\tlet value = field.filter('[value=\"' + arrayValue + '\"]').prop('checked', true);\n\t\t\t\t\t\tif (param == 'aggregationType') {\n\t\t\t\t\t\t\tvalue.closest('.js-panel').find('.js-panel__body').removeClass('d-none');\n\t\t\t\t\t\t\tvalue.closest('.js-panel').addClass('js-active');\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else if (field.prop('tagName') == 'SELECT') {\n\t\t\t\t\tfield\n\t\t\t\t\t\t.find('option[value=\"' + parameter + '\"]')\n\t\t\t\t\t\t.prop('selected', 'selected')\n\t\t\t\t\t\t.change();\n\t\t\t\t} else if (!field.prop('readonly')) {\n\t\t\t\t\tfield.val(parameter);\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.calculateDiscount(parentRow, modal);\n\t\t},\n\t\tinitTaxParameters: function (parentRow, modal) {\n\t\t\tlet parameters;\n\t\t\tif (parentRow.data('taxParam')) {\n\t\t\t\tparameters = parentRow.data('taxParam');\n\t\t\t} else {\n\t\t\t\tparameters = parentRow.find('.taxParam').val();\n\t\t\t}\n\t\t\tif (!parameters) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tparameters = JSON.parse(parameters.toString());\n\t\t\t$.each(this.taxModalFields, function (_, param) {\n\t\t\t\tlet parameter = parameters[param],\n\t\t\t\t\tfield = modal.find('[name=\"' + param + '\"]');\n\n\t\t\t\tif (field.attr('type') === 'checkbox' || field.attr('type') === 'radio') {\n\t\t\t\t\tlet array = parameter,\n\t\t\t\t\t\tvalue;\n\t\t\t\t\tif (!$.isArray(array)) {\n\t\t\t\t\t\tarray = [array];\n\t\t\t\t\t}\n\t\t\t\t\t$.each(array, function (_, arrayValue) {\n\t\t\t\t\t\tvalue = field.filter('[value=\"' + arrayValue + '\"]').prop('checked', true);\n\t\t\t\t\t\tif (param === 'aggregationType') {\n\t\t\t\t\t\t\tvalue.closest('.js-panel').find('.js-panel__body').removeClass('d-none');\n\t\t\t\t\t\t\tvalue.closest('.js-panel').addClass('js-active');\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else if (field.prop('tagName') === 'SELECT') {\n\t\t\t\t\tfield\n\t\t\t\t\t\t.find('option[value=\"' + parameter + '\"]')\n\t\t\t\t\t\t.prop('selected', 'selected')\n\t\t\t\t\t\t.change();\n\t\t\t\t} else {\n\t\t\t\t\tlet input = modal.find('[name=\"' + param + '\"]');\n\t\t\t\t\tinput.val(App.Fields.Double.formatToDisplay(parameter));\n\t\t\t\t\tif (param === 'individualTax') {\n\t\t\t\t\t\tinput.formatNumber();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.calculateTax(parentRow, modal);\n\t\t},\n\t\tlimitEnableSave: false,\n\t\tcheckLimits: function () {\n\t\t\tconst account = this.getAccountId(),\n\t\t\t\tlimit = parseInt(app.getMainParams('inventoryLimit'));\n\t\t\tlet response = true;\n\t\t\tif (account == '' || this.limitEnableSave || !limit) {\n\t\t\t\treturn response;\n\t\t\t}\n\t\t\tlet progressInstace = $.progressIndicator();\n\t\t\tAppConnector.request({\n\t\t\t\tasync: false,\n\t\t\t\tdataType: 'json',\n\t\t\t\tdata: {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\taction: 'Inventory',\n\t\t\t\t\tmode: 'checkLimits',\n\t\t\t\t\trecord: account,\n\t\t\t\t\tcurrency: this.getCurrency(),\n\t\t\t\t\tprice: thisInthisstance.getSummaryGrossPrice()\n\t\t\t\t}\n\t\t\t})\n\t\t\t\t.done(function (data) {\n\t\t\t\t\tprogressInstace.hide();\n\t\t\t\t\tif (data.result.status == false) {\n\t\t\t\t\t\tapp.showModalWindow(data.result.html, function () {});\n\t\t\t\t\t\tresponse = false;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.fail(function () {\n\t\t\t\t\tprogressInstace.hide();\n\t\t\t\t});\n\t\t\treturn response;\n\t\t},\n\t\tcurrencyChangeActions: function (select, option) {\n\t\t\tif (option.data('baseCurrency') !== select.val()) {\n\t\t\t\tthis.showCurrencyChangeModal(select, option);\n\t\t\t} else {\n\t\t\t\tthis.currencyConvertValues(select, option);\n\t\t\t\tselect.data('oldValue', select.val());\n\t\t\t}\n\t\t},\n\t\tshowCurrencyChangeModal: function (select, option) {\n\t\t\tlet thisInstance = this;\n\t\t\tif (thisInstance.lockCurrencyChange == true) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthisInstance.lockCurrencyChange = true;\n\t\t\tlet block = select.closest('th');\n\t\t\tlet modal = block.find('.modelContainer').clone();\n\t\t\tapp.showModalWindow(modal, function (data) {\n\t\t\t\tlet modal = $(data);\n\t\t\t\tlet currencyParam = JSON.parse(block.find('.js-currencyparam').val());\n\n\t\t\t\tif (currencyParam != false) {\n\t\t\t\t\tif (typeof currencyParam[option.val()] === 'undefined') {\n\t\t\t\t\t\tlet defaultCurrencyParams = {\n\t\t\t\t\t\t\tvalue: 1,\n\t\t\t\t\t\t\tdate: ''\n\t\t\t\t\t\t};\n\t\t\t\t\t\tcurrencyParam[option.val()] = defaultCurrencyParams;\n\t\t\t\t\t}\n\t\t\t\t\tmodal.find('.currencyName').text(option.text());\n\t\t\t\t\tmodal.find('.currencyRate').val(currencyParam[option.val()]['value']);\n\t\t\t\t\tmodal.find('.currencyDate').text(currencyParam[option.val()]['date']);\n\t\t\t\t}\n\t\t\t\tmodal\n\t\t\t\t\t.on('click', 'button[type=\"submit\"]', function () {\n\t\t\t\t\t\tlet rate = modal.find('.currencyRate').val();\n\t\t\t\t\t\tlet value = App.Fields.Double.formatToDb(rate);\n\t\t\t\t\t\tlet conversionRate = 1 / App.Fields.Double.formatToDb(rate);\n\n\t\t\t\t\t\toption.data('conversionRate', conversionRate);\n\t\t\t\t\t\tcurrencyParam[option.val()] = {\n\t\t\t\t\t\t\tdate: option.data('conversionDate'),\n\t\t\t\t\t\t\tvalue: value.toString(),\n\t\t\t\t\t\t\tconversion: conversionRate.toString()\n\t\t\t\t\t\t};\n\t\t\t\t\t\tblock.find('.js-currencyparam').val(JSON.stringify(currencyParam));\n\n\t\t\t\t\t\tthisInstance.currencyConvertValues(select, option);\n\t\t\t\t\t\tselect.data('oldValue', select.val());\n\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\tthisInstance.lockCurrencyChange = false;\n\t\t\t\t\t})\n\t\t\t\t\t.one('hidden.bs.modal', function () {\n\t\t\t\t\t\tselect.val(select.data('oldValue')).change();\n\t\t\t\t\t\tthisInstance.lockCurrencyChange = false;\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tcurrencyConvertValues: function (select, selected) {\n\t\t\tconst self = this;\n\t\t\tlet previous = select.find('option[value=\"' + select.data('oldValue') + '\"]');\n\t\t\tlet conversionRate = selected.data('conversionRate');\n\t\t\tlet prevConversionRate = previous.data('conversionRate');\n\t\t\tconversionRate = parseFloat(conversionRate) / parseFloat(prevConversionRate);\n\t\t\tthis.getInventoryItemsContainer()\n\t\t\t\t.find(self.rowClass)\n\t\t\t\t.each(function (_) {\n\t\t\t\t\tlet row = $(this);\n\t\t\t\t\tself.syncHeaderData(row);\n\t\t\t\t\tself.setUnitPrice(row, self.getUnitPriceValue(row) * conversionRate);\n\t\t\t\t\tself.setDiscount(row, self.getDiscount(row) * conversionRate);\n\t\t\t\t\tself.setTax(row, self.getTax(row) * conversionRate);\n\t\t\t\t\tself.setPurchase(row, self.getPurchase(row) * conversionRate);\n\t\t\t\t\tself.quantityChangeActions(row);\n\t\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Set up all row data that comes from request\n\t\t * @param {jQuery} row\n\t\t * @param {object} rowData\n\t\t */\n\t\tsetRowData(row, rowData) {\n\t\t\tthis.setName(row, rowData.name, rowData.info.name);\n\t\t\tthis.setQuantity(row, App.Fields.Double.formatToDisplay(rowData.qty));\n\t\t\tthis.setUnit(row, rowData.info.autoFields.unit, rowData.info.autoFields.unitText);\n\t\t\tif (typeof rowData.info.autoFields !== 'undefined' && typeof rowData.info.autoFields.subunit !== 'undefined') {\n\t\t\t\tthis.setSubUnit(row, rowData.info.autoFields.subunit, rowData.info.autoFields.subunitText);\n\t\t\t}\n\t\t\tthis.setComment(row, rowData.comment1);\n\t\t\tthis.setUnitPrice(row, App.Fields.Double.formatToDisplay(rowData.price));\n\t\t\tthis.setNetPrice(row, App.Fields.Double.formatToDisplay(rowData.net));\n\t\t\tthis.setGrossPrice(row, App.Fields.Double.formatToDisplay(rowData.gross));\n\t\t\tthis.setTotalPrice(row, App.Fields.Double.formatToDisplay(rowData.total));\n\t\t\tthis.setDiscountParam(row, rowData.discountparam ? JSON.parse(discountParam) : []);\n\t\t\tthis.setDiscount(row, App.Fields.Double.formatToDisplay(rowData.discount));\n\t\t\tthis.setTaxParam(row, rowData.taxparam ? JSON.parse(rowData.taxparam) : []);\n\t\t\tthis.setTax(row, App.Fields.Double.formatToDisplay(rowData.tax));\n\t\t\tthis.setTaxPercent(row, App.Fields.Double.formatToDisplay(rowData.tax_percent));\n\t\t},\n\t\t/**\n\t\t * Add new row to inventory list\n\t\t * @param {string} module\n\t\t * @param {string} baseTableId\n\t\t * @param {object} rowData [optional]\n\t\t */\n\t\taddItem(module, baseTableId, rowData = false) {\n\t\t\tconst items = this.getInventoryItemsContainer();\n\t\t\tlet newRow = this.getBasicRow();\n\t\t\tconst sequenceNumber = this.getNextLineItemRowNumber();\n\t\t\tconst replaced = newRow.html().replace(/\\_NUM_/g, sequenceNumber);\n\t\t\tconst moduleLabels = newRow.data('moduleLbls');\n\t\t\tnewRow.html(replaced);\n\t\t\tnewRow = newRow.find('tr.inventoryRow, tr.inventoryRowExpanded').appendTo(items.find('.js-inventory-items-body'));\n\t\t\tnewRow.find('.rowName input[name=\"popupReferenceModule\"]').val(module).data('field', baseTableId);\n\t\t\tnewRow.find('.js-module-icon').removeClass().addClass(`yfm-${module}`);\n\t\t\tnewRow.find('.rowName span.input-group-text').attr('data-content', moduleLabels[module]);\n\t\t\tnewRow.find('.colPicklistField select').each(function (_, select) {\n\t\t\t\tselect = $(select);\n\t\t\t\tselect.find('option').each(function (_, option) {\n\t\t\t\t\toption = $(option);\n\t\t\t\t\tif (option.data('module') !== module) {\n\t\t\t\t\t\toption.remove();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t\tthis.initItem(newRow);\n\t\t\tVtiger_Edit_Js.getInstance().registerAutoCompleteFields(newRow);\n\t\t\tif (rowData) {\n\t\t\t\tthis.setRowData(newRow, rowData);\n\t\t\t\tthis.quantityChangeActions(newRow);\n\t\t\t}\n\t\t\treturn newRow;\n\t\t},\n\t\t/**\n\t\t * Add header(group) item\n\t\t * @returns\n\t\t */\n\t\taddHeaderItem(data = {}) {\n\t\t\tconst items = this.getInventoryItemsContainer();\n\t\t\tlet newRow = this.getBasicRow();\n\t\t\tif (data['grouplabel']) {\n\t\t\t\tnewRow.find('.js-grouplabel').val(data['grouplabel']);\n\t\t\t}\n\t\t\tnewRow = newRow.find('tr.inventoryRowGroup').appendTo(items.find('.js-inventory-items-body'));\n\t\t\tthis.initItem(newRow);\n\n\t\t\treturn newRow;\n\t\t},\n\t\t/**\n\t\t * Get next block ID\n\t\t * @returns int\n\t\t */\n\t\tgetNextBlockId() {\n\t\t\tlet data = [...this.getContainer().find('.js-groupid')].map((o) => parseInt(o.value));\n\t\t\treturn Math.max(...data) + 1;\n\t\t},\n\n\t\t/**\n\t\t * Register add item button click\n\t\t */\n\t\tregisterAddItem() {\n\t\t\tthis.getContainer()\n\t\t\t\t.find('.js-inv-add-item')\n\t\t\t\t.on('click', (e) => {\n\t\t\t\t\tthis.addItem(\n\t\t\t\t\t\te.currentTarget.dataset.module,\n\t\t\t\t\t\te.currentTarget.dataset.field,\n\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t$(e.currentTarget).closest('.js-inv-container-group')\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register add header row\n\t\t */\n\t\tregisterAddHeaderItem() {\n\t\t\tthis.getContainer()\n\t\t\t\t.find('.js-inv-add-group')\n\t\t\t\t.on('click', () => {\n\t\t\t\t\tthis.addHeaderItem();\n\t\t\t\t});\n\t\t},\n\t\tregisterSortableItems: function () {\n\t\t\tlet thisInstance = this;\n\t\t\tlet items = thisInstance.getContainer();\n\t\t\titems.sortable({\n\t\t\t\thandle: '.dragHandle',\n\t\t\t\titems: thisInstance.rowClass + ',.inventoryRowGroup',\n\t\t\t\trevert: true,\n\t\t\t\ttolerance: 'pointer',\n\t\t\t\tplaceholder: 'ui-state-highlight',\n\t\t\t\thelper: function (_e, ui) {\n\t\t\t\t\tui.children().each(function (_, element) {\n\t\t\t\t\t\telement = $(element);\n\t\t\t\t\t\telement.width(element.width());\n\t\t\t\t\t});\n\t\t\t\t\treturn ui;\n\t\t\t\t},\n\t\t\t\tstart: function (_, ui) {\n\t\t\t\t\titems.find(thisInstance.rowClass).each(function (_, element) {\n\t\t\t\t\t\tlet row = $(element);\n\t\t\t\t\t\tthisInstance.hideExpandedRow(row);\n\t\t\t\t\t});\n\t\t\t\t\tlet num = $(ui.item).attr('numrow');\n\t\t\t\t\titems.find('[numrowex=\"' + num + '\"] .js-inventory-item-comment').each(function () {\n\t\t\t\t\t\tApp.Fields.Text.destroyEditor($(this));\n\t\t\t\t\t});\n\t\t\t\t\tui.item.startPos = ui.item.index();\n\t\t\t\t},\n\t\t\t\tstop: function (_, ui) {\n\t\t\t\t\tlet numrow = $(ui.item).attr('numrow');\n\t\t\t\t\tlet child = items.find('.numRow' + numrow);\n\t\t\t\t\titems.find('[numrow=\"' + numrow + '\"]').after(child);\n\t\t\t\t\tApp.Fields.Text.Editor.register(child);\n\t\t\t\t\tthisInstance.updateRowSequence();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterShowHideExpanded: function () {\n\t\t\tconst thisInstance = this;\n\t\t\tthisInstance.form.on('click', '.toggleVisibility', function (e) {\n\t\t\t\tlet element = $(e.currentTarget);\n\t\t\t\tlet row = thisInstance.getClosestRow(element);\n\t\t\t\tif (element.data('status') == 0) {\n\t\t\t\t\tthisInstance.showExpandedRow(row);\n\t\t\t\t} else {\n\t\t\t\t\tthisInstance.hideExpandedRow(row);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterPriceBookModal: function (container) {\n\t\t\tcontainer.find('.js-price-book-modal').on('click', (e) => {\n\t\t\t\tlet element = $(e.currentTarget);\n\t\t\t\tlet response = this.isRecordSelected(element);\n\t\t\t\tif (!response) {\n\t\t\t\t\tthis.pricebooksModalHandler(element);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterRowChangeEvent: function (container) {\n\t\t\tcontainer.on('focusout', '.qty', (e) => {\n\t\t\t\tlet element = $(e.currentTarget);\n\t\t\t\telement.formatNumber();\n\t\t\t\tthis.quantityChangeActions(this.getClosestRow(element));\n\t\t\t});\n\t\t\tcontainer.on('focusout', '.unitPrice', (e) => {\n\t\t\t\tlet element = $(e.currentTarget);\n\t\t\t\telement.formatNumber();\n\t\t\t\tthis.quantityChangeActions(this.getClosestRow(element));\n\t\t\t});\n\t\t\tcontainer.on('focusout', '.purchase', (e) => {\n\t\t\t\tlet element = $(e.currentTarget);\n\t\t\t\telement.formatNumber();\n\t\t\t\tthis.quantityChangeActions(this.getClosestRow(element));\n\t\t\t});\n\t\t\tlet headContainer = this.getInventoryHeadContainer();\n\t\t\theadContainer.on('change', '.js-taxmode', (e) => {\n\t\t\t\tlet element = $(e.currentTarget);\n\t\t\t\tthis.showIndividualTax(this.getClosestRow(element));\n\t\t\t\tthis.rowsCalculations();\n\t\t\t});\n\t\t\theadContainer.on('change', '.js-discountmode', (e) => {\n\t\t\t\tlet element = $(e.currentTarget);\n\t\t\t\tthis.showIndividualDiscount(this.getClosestRow(element));\n\t\t\t\tthis.rowsCalculations();\n\t\t\t});\n\t\t},\n\t\tregisterSubProducts: function () {\n\t\t\tconst thisInstance = this;\n\t\t\tthisInstance.form.find('.inventoryItems ' + thisInstance.rowClass).each(function () {\n\t\t\t\tthisInstance.loadSubProducts($(this), false);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register clear reference selection\n\t\t */\n\t\tregisterClearReferenceSelection() {\n\t\t\tthis.form.on('click', '.clearReferenceSelection', (e) => {\n\t\t\t\tconst referenceGroup = $(e.currentTarget).closest('div.referenceGroup');\n\t\t\t\tif (referenceGroup.length) {\n\t\t\t\t\treferenceGroup.find('input[id$=\"_display\"]').val('').removeAttr('readonly');\n\t\t\t\t} else {\n\t\t\t\t\tconst row = this.getClosestRow($(e.currentTarget));\n\t\t\t\t\tthis.removeSubProducts(row);\n\t\t\t\t\trow\n\t\t\t\t\t\t.find('.unitPrice,.tax,.discount,.margin,.purchase,.js-tax-percent')\n\t\t\t\t\t\t.val(App.Fields.Double.formatToDisplay(0));\n\t\t\t\t\trow.find('.qty').val(1);\n\t\t\t\t\trow.find('textarea,.valueVal').val('');\n\t\t\t\t\trow.find('.valueText').text('');\n\t\t\t\t\trow.find('.qtyParamInfo').addClass('d-none');\n\t\t\t\t\trow.find('.recordLabel').val('').removeAttr('readonly');\n\t\t\t\t\tif (!this.isGroupTaxMode()) {\n\t\t\t\t\t\tthis.setTaxParam(row, []);\n\t\t\t\t\t}\n\t\t\t\t\tthis.quantityChangeActions(row);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterDeleteLineItemEvent: function (container) {\n\t\t\tcontainer.on('click', '.deleteRow', (e) => {\n\t\t\t\tlet num = this.getClosestRow($(e.currentTarget)).attr('numrow');\n\t\t\t\tthis.deleteLineItem(num);\n\t\t\t});\n\t\t\tcontainer.on('click', '.js-delete-header-item', (e) => {\n\t\t\t\t$(e.currentTarget).closest('tr').remove();\n\t\t\t\tthis.syncHeaderData();\n\t\t\t});\n\t\t},\n\t\tdeleteLineItem: function (num) {\n\t\t\tthis.getInventoryItemsContainer()\n\t\t\t\t.find('[numrowex=\"' + num + '\"] .js-inventory-item-comment')\n\t\t\t\t.each(function () {\n\t\t\t\t\tApp.Fields.Text.destroyEditor($(this));\n\t\t\t\t});\n\t\t\tthis.getInventoryItemsContainer()\n\t\t\t\t.find('[numrow=\"' + num + '\"], [numrowex=\"' + num + '\"]')\n\t\t\t\t.remove();\n\t\t\tthis.checkDeleteIcon();\n\t\t\tthis.rowsCalculations();\n\t\t\tif (this.getInventoryItemsContainer().find('.inventoryRow').length === 0) {\n\t\t\t\t$('#inventoryItemsNo').val(0);\n\t\t\t}\n\t\t\tthis.updateRowSequence();\n\t\t},\n\t\tregisterChangeDiscount: function () {\n\t\t\tthis.form.on('click', '.js-change-discount', (e) => {\n\t\t\t\tlet parentRow;\n\t\t\t\tconst element = $(e.currentTarget);\n\t\t\t\tlet params = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tview: 'Inventory',\n\t\t\t\t\tmode: 'showDiscounts',\n\t\t\t\t\tcurrency: this.getCurrency(),\n\t\t\t\t\tdiscountAggregation: this.getDiscountAggregation(),\n\t\t\t\t\trelatedRecord: this.getAccountId()\n\t\t\t\t};\n\t\t\t\tif (element.hasClass('groupDiscount')) {\n\t\t\t\t\tparentRow = this.getInventoryItemsContainer();\n\t\t\t\t\tif (parentRow.find('tfoot .colTotalPrice').length != 0) {\n\t\t\t\t\t\tparams.totalPrice = App.Fields.Double.formatToDb(parentRow.find('tfoot .colTotalPrice').text());\n\t\t\t\t\t} else {\n\t\t\t\t\t\tparams.totalPrice = 0;\n\t\t\t\t\t}\n\t\t\t\t\tparams.discountType = 1;\n\t\t\t\t} else {\n\t\t\t\t\tparentRow = element.closest(this.rowClass);\n\t\t\t\t\tparams.totalPrice = this.getTotalPrice(parentRow);\n\t\t\t\t\tparams.discountType = 0;\n\t\t\t\t}\n\t\t\t\tlet progressInstace = $.progressIndicator();\n\t\t\t\tAppConnector.request(params)\n\t\t\t\t\t.done((data) => {\n\t\t\t\t\t\tapp.showModalWindow(data, (data) => {\n\t\t\t\t\t\t\tthis.initDiscountsParameters(parentRow, $(data));\n\t\t\t\t\t\t\tthis.registerChangeDiscountModal(data, parentRow, params);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tprogressInstace.hide();\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function () {\n\t\t\t\t\t\tprogressInstace.hide();\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterChangeDiscountModal: function (modal, parentRow, params) {\n\t\t\tlet thisInstance = this;\n\t\t\tlet form = modal.find('form');\n\t\t\tform.validationEngine(app.validationEngineOptions);\n\t\t\tmodal.on('change', '.individualDiscountType', function (e) {\n\t\t\t\tlet element = $(e.currentTarget);\n\t\t\t\tmodal.find('.individualDiscountContainer .input-group-text').text(element.data('symbol'));\n\t\t\t});\n\t\t\tmodal.on('change', '.activeCheckbox[name=\"aggregationType\"]', function (e) {\n\t\t\t\tlet element = $(e.currentTarget);\n\n\t\t\t\tif (element.attr('type') == 'checkbox' && this.checked) {\n\t\t\t\t\telement.closest('.js-panel').find('.js-panel__body').removeClass('d-none');\n\t\t\t\t\telement.closest('.js-panel').addClass('js-active');\n\t\t\t\t} else if (element.attr('type') == 'radio') {\n\t\t\t\t\tmodal.find('.js-panel').removeClass('js-active');\n\t\t\t\t\tmodal.find('.js-panel .js-panel__body').addClass('d-none');\n\t\t\t\t\telement.closest('.js-panel').find('.js-panel__body').removeClass('d-none');\n\t\t\t\t\telement.closest('.js-panel').addClass('js-active');\n\t\t\t\t} else {\n\t\t\t\t\telement.closest('.js-panel').find('.js-panel__body').addClass('d-none');\n\t\t\t\t\telement.closest('.js-panel').removeClass('js-active');\n\t\t\t\t}\n\t\t\t});\n\t\t\tmodal.on(\n\t\t\t\t'change',\n\t\t\t\t'.activeCheckbox, .globalDiscount,.individualDiscountValue,.individualDiscountType,.groupCheckbox,.additionalDiscountValue',\n\t\t\t\tfunction () {\n\t\t\t\t\tthisInstance.calculateDiscount(parentRow, modal);\n\t\t\t\t}\n\t\t\t);\n\t\t\tmodal.on('click', '.js-save-discount', function () {\n\t\t\t\tif (form.validationEngine('validate') === false) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthisInstance.saveDiscountsParameters(parentRow, modal);\n\t\t\t\tif (params.discountType == 0) {\n\t\t\t\t\tthisInstance.setDiscount(parentRow, App.Fields.Double.formatToDb(modal.find('.valueDiscount').text()));\n\t\t\t\t\tthisInstance.quantityChangeActions(parentRow);\n\t\t\t\t} else {\n\t\t\t\t\tlet rate =\n\t\t\t\t\t\tApp.Fields.Double.formatToDb(modal.find('.valueDiscount').text()) /\n\t\t\t\t\t\tApp.Fields.Double.formatToDb(modal.find('.valueTotalPrice').text());\n\t\t\t\t\tparentRow.find(thisInstance.rowClass).each(function () {\n\t\t\t\t\t\tthisInstance.setDiscount($(this), thisInstance.getTotalPrice($(this)) * rate);\n\t\t\t\t\t\tthisInstance.quantityChangeActions($(this));\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tapp.hideModalWindow();\n\t\t\t});\n\t\t},\n\t\tregisterChangeTax: function () {\n\t\t\tconst thisInstance = this;\n\t\t\tthisInstance.form.on('click', '.changeTax', function (e) {\n\t\t\t\tlet parentRow;\n\t\t\t\tlet element = $(e.currentTarget);\n\t\t\t\tlet params = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tview: 'Inventory',\n\t\t\t\t\tmode: 'showTaxes',\n\t\t\t\t\tcurrency: thisInstance.getCurrency(),\n\t\t\t\t\trelatedRecord: thisInstance.getAccountId()\n\t\t\t\t};\n\t\t\t\tif (element.hasClass('groupTax')) {\n\t\t\t\t\tparentRow = thisInstance.getInventoryItemsContainer();\n\t\t\t\t\tlet totalPrice = 0;\n\t\t\t\t\tif (parentRow.find('tfoot .colNetPrice').length > 0) {\n\t\t\t\t\t\ttotalPrice = parentRow.find('tfoot .colNetPrice').text();\n\t\t\t\t\t} else if (parentRow.find('tfoot .colTotalPrice ').length > 0) {\n\t\t\t\t\t\ttotalPrice = parentRow.find('tfoot .colTotalPrice ').text();\n\t\t\t\t\t}\n\t\t\t\t\tparams.totalPrice = App.Fields.Double.formatToDb(totalPrice);\n\t\t\t\t\tparams.taxType = 1;\n\t\t\t\t} else {\n\t\t\t\t\tparentRow = element.closest(thisInstance.rowClass);\n\t\t\t\t\tlet sourceRecord = parentRow.find('.rowName .sourceField').val();\n\t\t\t\t\tparams.totalPrice = thisInstance.getNetPrice(parentRow);\n\t\t\t\t\tparams.taxType = 0;\n\t\t\t\t\tif (sourceRecord) {\n\t\t\t\t\t\tparams.record = sourceRecord;\n\t\t\t\t\t}\n\t\t\t\t\tparams.recordModule = parentRow.find('.rowName [name=\"popupReferenceModule\"]').val();\n\t\t\t\t}\n\t\t\t\tlet progressInstace = $.progressIndicator();\n\t\t\t\tAppConnector.request(params)\n\t\t\t\t\t.done(function (data) {\n\t\t\t\t\t\tapp.showModalWindow(data, function (data) {\n\t\t\t\t\t\t\tthisInstance.initTaxParameters(parentRow, $(data));\n\t\t\t\t\t\t\tthisInstance.registerChangeTaxModal(data, parentRow, params);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tprogressInstace.hide();\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function () {\n\t\t\t\t\t\tprogressInstace.hide();\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tlockCurrencyChange: false,\n\t\tregisterChangeCurrency() {\n\t\t\tthis.getInventoryHeadContainer().on('change', '.js-currency', (e) => {\n\t\t\t\tlet element = $(e.currentTarget),\n\t\t\t\t\tsymbol = element.find('option:selected').data('conversionSymbol');\n\t\t\t\tthis.currencyChangeActions(element, element.find('option:selected'));\n\t\t\t\tthis.form.find('.currencySymbol').text(symbol);\n\t\t\t});\n\t\t},\n\t\tregisterChangeDiscountAggregation() {\n\t\t\tthis.getInventoryHeadContainer().on('change', '.js-discount_aggreg', (e) => {\n\t\t\t\tthis.rowsCalculations();\n\t\t\t});\n\t\t},\n\t\tregisterChangeTaxModal: function (modal, parentRow, params) {\n\t\t\tlet thisInstance = this;\n\t\t\tlet form = modal.find('form');\n\t\t\tform.validationEngine(app.validationEngineOptions);\n\t\t\tmodal.on('change', '.individualTaxType', function (e) {\n\t\t\t\tlet element = $(e.currentTarget);\n\t\t\t\tmodal.find('.individualTaxContainer .input-group-text').text(element.data('symbol'));\n\t\t\t});\n\t\t\tmodal.on('change', '.activeCheckbox[name=\"aggregationType\"]', function (e) {\n\t\t\t\tlet element = $(e.currentTarget);\n\t\t\t\tif (element.attr('type') == 'checkbox' && this.checked) {\n\t\t\t\t\telement.closest('.js-panel').find('.js-panel__body').removeClass('d-none');\n\t\t\t\t\telement.closest('.js-panel').addClass('js-active');\n\t\t\t\t} else if (element.attr('type') == 'radio') {\n\t\t\t\t\tmodal.find('.js-panel').removeClass('js-active');\n\t\t\t\t\tmodal.find('.js-panel .js-panel__body').addClass('d-none');\n\t\t\t\t\telement.closest('.js-panel').find('.js-panel__body').removeClass('d-none');\n\t\t\t\t\telement.closest('.js-panel').addClass('js-active');\n\t\t\t\t} else {\n\t\t\t\t\telement.closest('.js-panel').find('.js-panel__body').addClass('d-none');\n\t\t\t\t\telement.closest('.js-panel').removeClass('js-active');\n\t\t\t\t}\n\t\t\t});\n\t\t\tmodal.on('change', '.activeCheckbox, .globalTax, .individualTaxValue, .groupTax, .regionalTax', function () {\n\t\t\t\tthisInstance.calculateTax(parentRow, modal);\n\t\t\t});\n\t\t\tmodal.on('click', '.js-save-taxs', function () {\n\t\t\t\tif (form.validationEngine('validate') === false) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthisInstance.saveTaxsParameters(parentRow, modal);\n\t\t\t\tif (params.taxType == '0') {\n\t\t\t\t\tthisInstance.setTax(parentRow, App.Fields.Double.formatToDb(modal.find('.valueTax').text()));\n\t\t\t\t\tthisInstance.setTaxPercent(parentRow, App.Fields.Double.formatToDb(modal.find('.js-tax-value').text()));\n\t\t\t\t\tthisInstance.quantityChangeActions(parentRow);\n\t\t\t\t} else {\n\t\t\t\t\tlet rate =\n\t\t\t\t\t\tApp.Fields.Double.formatToDb(modal.find('.valueTax').text()) /\n\t\t\t\t\t\tApp.Fields.Double.formatToDb(modal.find('.valueNetPrice').text());\n\t\t\t\t\tparentRow.find(thisInstance.rowClass).each(function () {\n\t\t\t\t\t\tlet totalPrice;\n\t\t\t\t\t\tif ($('.netPrice', $(this)).length > 0) {\n\t\t\t\t\t\t\ttotalPrice = thisInstance.getNetPrice($(this));\n\t\t\t\t\t\t} else if ($('.totalPrice', $(this)).length > 0) {\n\t\t\t\t\t\t\ttotalPrice = thisInstance.getTotalPrice($(this));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthisInstance.setTax($(this), totalPrice * rate);\n\t\t\t\t\t\tthisInstance.setTaxPercent($(this), App.Fields.Double.formatToDb(modal.find('.js-tax-value').text()));\n\t\t\t\t\t\tthisInstance.quantityChangeActions($(this));\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tapp.hideModalWindow();\n\t\t\t});\n\t\t},\n\t\tregisterRowAutoComplete: function (container) {\n\t\t\tconst thisInstance = this;\n\t\t\tlet sourceFieldElement = container.find('.sourceField.js-name');\n\t\t\tsourceFieldElement.on(Vtiger_Edit_Js.referenceSelectionEvent, function (e, params) {\n\t\t\t\tlet record = params.record;\n\t\t\t\tlet element = $(e.currentTarget);\n\t\t\t\tlet parentRow = element.closest(thisInstance.rowClass);\n\t\t\t\tlet selectedModule = parentRow.find('.rowName [name=\"popupReferenceModule\"]').val();\n\t\t\t\tlet dataUrl =\n\t\t\t\t\t'index.php?module=' +\n\t\t\t\t\tapp.getModuleName() +\n\t\t\t\t\t'&action=Inventory&mode=getDetails&record=' +\n\t\t\t\t\trecord +\n\t\t\t\t\t'&fieldname=' +\n\t\t\t\t\telement.data('columnname');\n\t\t\t\tif (thisInstance.getCurrency()) {\n\t\t\t\t\tdataUrl += '&currency_id=' + thisInstance.getCurrency();\n\t\t\t\t}\n\t\t\t\tAppConnector.request(dataUrl).done(function (data) {\n\t\t\t\t\tfor (let id in data) {\n\t\t\t\t\t\tif (typeof data[id] == 'object') {\n\t\t\t\t\t\t\tlet recordData = data[id];\n\t\t\t\t\t\t\tthisInstance.mapResultsToFields(selectedModule, parentRow, recordData);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Mass add entries.\n\t\t */\n\t\tregisterMassAddItem: function () {\n\t\t\tthis.getForm().on('click', '.js-mass-add', (e) => {\n\t\t\t\tlet currentTarget = $(e.currentTarget);\n\t\t\t\tlet moduleName = currentTarget.data('module');\n\t\t\t\tlet url = currentTarget.data('url');\n\t\t\t\tapp.showRecordsList(url, (_, instance) => {\n\t\t\t\t\tinstance.setSelectEvent((data) => {\n\t\t\t\t\t\tfor (let i in data) {\n\t\t\t\t\t\t\tlet parentElem = this.addItem(moduleName, '', false, currentTarget.closest('.js-inv-container-group'));\n\t\t\t\t\t\t\tVtiger_Edit_Js.getInstance().setReferenceFieldValue(parentElem.find('.rowName'), {\n\t\t\t\t\t\t\t\tname: data[i],\n\t\t\t\t\t\t\t\tid: i\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\tcalculateItemNumbers: function () {\n\t\t\tlet thisInstance = this;\n\t\t\tlet items = this.getInventoryItemsContainer();\n\t\t\tlet i = 1;\n\t\t\titems.find(thisInstance.rowClass).each(function () {\n\t\t\t\t$(this).find('.itemNumberText').text(i);\n\t\t\t\ti++;\n\t\t\t});\n\t\t},\n\t\tinitItem: function (container) {\n\t\t\tlet thisInstance = this;\n\t\t\tif (typeof container === 'undefined') {\n\t\t\t\tcontainer = thisInstance.getInventoryItemsContainer();\n\t\t\t}\n\t\t\tthisInstance.registerDeleteLineItemEvent(container);\n\t\t\tthisInstance.registerPriceBookModal(container);\n\t\t\tthisInstance.registerRowChangeEvent(container);\n\t\t\tthisInstance.registerRowAutoComplete(container);\n\t\t\tthisInstance.checkDeleteIcon();\n\t\t\tthisInstance.rowsCalculations();\n\t\t\tthisInstance.updateRowSequence();\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(container.find('.selectInv'));\n\t\t\tApp.Fields.Date.register(container, true, {}, 'dateFieldInv');\n\t\t\tcontainer.validationEngine('detach');\n\t\t\tcontainer.validationEngine(app.validationEngineOptions);\n\t\t\tApp.Fields.Text.Editor.register(container);\n\t\t},\n\t\t/**\n\t\t * Load inventory data for specified record\n\t\t * @param {int} recordId\n\t\t * @param {string} sourceModule\n\t\t * @param {function|bool} success callback\n\t\t * @param {function|bool} fail callback\n\t\t * @returns Promise\n\t\t */\n\t\tloadInventoryData(recordId, sourceModule, success = false, fail = false) {\n\t\t\tconst progressLoader = $.progressIndicator({ blockInfo: { enabled: true } });\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tAppConnector.request({\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tsrc_module: sourceModule,\n\t\t\t\t\tsrc_record: recordId,\n\t\t\t\t\taction: 'Inventory',\n\t\t\t\t\tmode: 'getTableData',\n\t\t\t\t\trecord: app.getRecordId()\n\t\t\t\t})\n\t\t\t\t\t.done((response) => {\n\t\t\t\t\t\tlet activeModules = [];\n\t\t\t\t\t\tthis.getContainer()\n\t\t\t\t\t\t\t.find('.js-inv-add-item')\n\t\t\t\t\t\t\t.each((_, addBtn) => {\n\t\t\t\t\t\t\t\tactiveModules.push($(addBtn).data('module'));\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\tprogressLoader.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tconst oldCurrencyChangeAction = this.currencyChangeActions;\n\t\t\t\t\t\tthis.currencyChangeActions = function changeCurrencyActions(select, option) {\n\t\t\t\t\t\t\tthis.currencyConvertValues(select, option);\n\t\t\t\t\t\t\tselect.data('oldValue', select.val());\n\t\t\t\t\t\t};\n\t\t\t\t\t\tconst first = response.result[Object.keys(response.result)[0]];\n\t\t\t\t\t\tthis.setCurrencyParam(first.currencyparam);\n\t\t\t\t\t\tthis.setCurrency(first.currency);\n\t\t\t\t\t\tthis.setDiscountMode(first.discountmode);\n\t\t\t\t\t\tthis.setTaxMode(first.taxmode);\n\t\t\t\t\t\tthis.currencyChangeActions = oldCurrencyChangeAction;\n\t\t\t\t\t\tthis.clearInventory();\n\t\t\t\t\t\t$.each(response.result, (_, row) => {\n\t\t\t\t\t\t\tif (activeModules.indexOf(row.moduleName) !== -1) {\n\t\t\t\t\t\t\t\tif (row.groupid && row.add_header) {\n\t\t\t\t\t\t\t\t\tthis.addHeaderItem(row);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tthis.addItem(row.moduleName, row.basetableid, row);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tVtiger_Helper_Js.showMessage({\n\t\t\t\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\t\t\t\ttextTrusted: false,\n\t\t\t\t\t\t\t\t\ttext: app\n\t\t\t\t\t\t\t\t\t\t.vtranslate('JS_INVENTORY_ITEM_MODULE_NOT_FOUND')\n\t\t\t\t\t\t\t\t\t\t.replace('${sourceModule}', row.moduleName)\n\t\t\t\t\t\t\t\t\t\t.replace('${position}', row.info.name)\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.summaryCalculations();\n\t\t\t\t\t\tresolve(response.result);\n\t\t\t\t\t\tif (typeof success === 'function') {\n\t\t\t\t\t\t\tsuccess(response.result);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.fail((error, err) => {\n\t\t\t\t\t\tprogressLoader.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\treject(error, err);\n\t\t\t\t\t\tif (typeof fail === 'function') {\n\t\t\t\t\t\t\tfail(error, err);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Clear inventory data\n\t\t */\n\t\tclearInventory: function () {\n\t\t\tthis.getInventoryItemsContainer()\n\t\t\t\t.find('.deleteRow,.js-delete-header-item')\n\t\t\t\t.each((_, e) => {\n\t\t\t\t\t$(e).trigger('click');\n\t\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function which will register all the events\n\t\t */\n\t\tregisterEvents: function (container) {\n\t\t\tthis.form = container;\n\t\t\tthis.loadConfig();\n\t\t\tthis.registerInventorySaveData();\n\t\t\tthis.registerAddItem();\n\t\t\tthis.registerAddHeaderItem();\n\t\t\tthis.registerMassAddItem();\n\t\t\tthis.initItem();\n\t\t\tthis.registerSortableItems();\n\t\t\tthis.registerSubProducts();\n\t\t\tthis.registerChangeDiscount();\n\t\t\tthis.registerChangeTax();\n\t\t\tthis.registerClearReferenceSelection();\n\t\t\tthis.registerShowHideExpanded();\n\t\t\tthis.registerChangeCurrency();\n\t\t\tthis.registerChangeDiscountAggregation();\n\t\t\tthis.setDefaultGlobalTax(container);\n\t\t\tthis.registerDeleteBlock();\n\t\t\tthis.setDeleteBlockBtnVisibility();\n\t\t\tapp.registerBlockToggleEvent(container);\n\t\t}\n\t}\n);\n"],"names":["$","Class","inventoryInstance","getInventoryInstance","container","find","val","moduleClassName","window","registerEvents","form","discount","tax","inventoryContainer","inventoryHeadContainer","summaryTaxesContainer","summaryDiscountContainer","summaryCurrenciesContainer","rowClass","discountModalFields","taxModalFields","getForm","loadConfig","discontConfig","taxConfig","length","JSON","parse","getContainer","getInventoryItemsContainer","getInventoryHeadContainer","getInventorySummaryDiscountContainer","getInventorySummaryTaxesContainer","getInventorySummaryCurrenciesContainer","getNextLineItemRowNumber","$inventoryItemsNo","rowNumber","parseInt","getAccountId","accountReferenceField","checkDeleteIcon","showLineItemsDeleteIcon","app","getMainParams","hideLineItemsDeleteIcon","setDeleteBlockBtnVisibility","deleteBtn","removeClass","addClass","registerDeleteBlock","on","e","currentTarget","closest","block","remove","rowsCalculations","getClosestRow","element","getBasicRow","eq","clone","isRecordSelected","productField","parentRow","validationEngine","getTaxModeSelectElement","row","items","isIndividualTaxMode","selectedOption","default_mode","isGroupTaxMode","showIndividualTax","thisInstance","groupTax","newRow","taxParam","aggregationType","each","parseFloat","thisItem","attr","setTaxParam","setTax","setTaxPercent","setDefaultGlobalTax","taxDefaultValue","data","isGroupTax","summaryContainer","getTaxParams","stringify","quantityChangeActions","getDiscountModeSelectElement","isIndividualDiscountMode","showIndividualDiscount","groupDiscount","setDiscount","setDiscountParam","getCurrency","getDiscountAggregation","aggregation","getTax","taxParams","getNetPrice","taxRate","types","forEach","entry","taxValue","individualTax","globalTax","regionalTax","valuePrices","self","getTaxPercent","taxPercent","getQuantityValue","getNumberFromValue","getUnitPriceValue","getDiscount","discountParams","getTotalPrice","discountRate","individualDiscountType","individualDiscount","globalDiscount","additionalDiscount","getGrossPrice","getPurchase","purchase","App","Fields","Double","formatToDb","qty","getSummaryGrossPrice","price","setCurrency","trigger","setCurrencyParam","setDiscountMode","setTaxMode","setName","display","setQuantity","setUnit","text","setSubUnit","setComment","parent","setUnitPrice","formatToDisplay","setPurchase","setNetPrice","setGrossPrice","setTotalPrice","setMargin","setMarginP","rowCalculations","summaryCalculations","calculateTotalPrice","calculateDiscounts","calculateNetPrice","calculateTaxes","calculateGrossPrice","calculateMargin","event","syncHeaderData","calculateItemNumbers","calculateSummary","calculateDiscountSummary","calculateTaxSummary","calculateCurrenciesSummary","calculateMarginPSummary","field","sum","sumRow","totalPriceField","sumPrice","getNumberFromText","marginp","purchasePrice","subtraction","getAllDiscount","selected","base","conversionRate","baseConversionRate","taxes","getAllTaxes","html","index","value","appendTo","typeSummary","netPrice","params","param","_","name","old","percent","margin","calculateDiscount","_row","modal","discountsType","netPriceBeforeDiscount","prop","panel","calculateTax","netPriceWithoutTax","taxType","updateRowSequence","registerInventorySaveData","Vtiger_Edit_Js","recordPreSave","checkLimits","renumberHeaderItems","header","classElement","is","prev","n","pricebooksModalHandler","lineItemRow","rowName","currencyId","CONFIG","defaultCurrencyId","showRecordsList","module","src_module","src_record","src_field","search_params","lockedFields","cvEnabled","currency_id","additionalData","_modal","instance","setSelectEvent","responseData","AppConnector","request","action","record","id","done","result","errorLog","subProductsCashe","loadSubProducts","indicator","recordId","recordModule","removeSubProducts","inArray","addSubProducts","progressInstace","progressIndicator","hide","fail","subProductsContainer","append","mapResultsToFields","referenceModule","recordData","description","unitPriceValues","unitPriceValuesJson","parameters","type","inputField","commentElement","next","editorInstance","CKEDITOR","instances","setData","unit","triggerQtyParam","qtyPerUnit","perUnit","saveDiscountsParameters","info","panels","push","saveTaxsParameters","extend","showExpandedRow","inventoryRowExpanded","hideExpandedRow","initDiscountsParameters","parameter","isArray","array","arrayValue","filter","change","initTaxParameters","toString","input","formatNumber","limitEnableSave","limit","response","account","async","dataType","getModuleName","mode","currency","thisInthisstance","status","showModalWindow","currencyChangeActions","select","option","currencyConvertValues","showCurrencyChangeModal","lockCurrencyChange","currencyParam","date","rate","conversion","hideModalWindow","one","previous","prevConversionRate","setRowData","rowData","autoFields","unitText","subunit","subunitText","comment1","net","gross","total","discountparam","discountParam","taxparam","tax_percent","addItem","baseTableId","sequenceNumber","replaced","replace","moduleLabels","initItem","getInstance","registerAutoCompleteFields","addHeaderItem","getNextBlockId","map","o","Math","max","registerAddItem","dataset","registerAddHeaderItem","registerSortableItems","sortable","handle","revert","tolerance","placeholder","helper","_e","ui","children","width","start","num","item","Text","destroyEditor","startPos","stop","child","numrow","after","Editor","register","registerShowHideExpanded","registerPriceBookModal","registerRowChangeEvent","headContainer","registerSubProducts","registerClearReferenceSelection","referenceGroup","removeAttr","registerDeleteLineItemEvent","deleteLineItem","registerChangeDiscount","view","discountAggregation","relatedRecord","hasClass","totalPrice","discountType","registerChangeDiscountModal","validationEngineOptions","checked","registerChangeTax","sourceRecord","registerChangeTaxModal","registerChangeCurrency","symbol","registerChangeDiscountAggregation","registerRowAutoComplete","sourceFieldElement","referenceSelectionEvent","selectedModule","dataUrl","registerMassAddItem","moduleName","url","setReferenceFieldValue","parentElem","i","Picklist","showSelect2ElementView","Date","loadInventoryData","sourceModule","success","progressLoader","blockInfo","enabled","resolve","reject","getRecordId","addBtn","activeModules","Object","keys","first","currencyparam","discountmode","taxmode","oldCurrencyChangeAction","clearInventory","indexOf","Vtiger_Helper_Js","showMessage","textTrusted","vtranslate","groupid","add_header","basetableid","error","err","registerBlockToggleEvent"],"mappings":"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"}