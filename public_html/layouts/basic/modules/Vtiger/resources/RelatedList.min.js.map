{"version":3,"file":"RelatedList.min.js","sources":["RelatedList.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n * Contributor(s): YetiForce.com\n *************************************************************************************/\n'use strict';\n\njQuery.Class(\n\t'Vtiger_RelatedList_Js',\n\t{\n\t\trelatedListInstance: false,\n\t\tgetInstance: function(parentId, parentModule, selectedRelatedTabElement, relatedModuleName) {\n\t\t\tif (\n\t\t\t\tVtiger_RelatedList_Js.relatedListInstance === false ||\n\t\t\t\tVtiger_RelatedList_Js.relatedListInstance.moduleName !== relatedModuleName\n\t\t\t) {\n\t\t\t\tlet moduleClassName = app.getModuleName() + '_RelatedList_Js',\n\t\t\t\t\tfallbackClassName = Vtiger_RelatedList_Js,\n\t\t\t\t\tinstance;\n\t\t\t\tif (typeof window[moduleClassName] !== 'undefined') {\n\t\t\t\t\tinstance = new window[moduleClassName]();\n\t\t\t\t} else {\n\t\t\t\t\tinstance = new fallbackClassName();\n\t\t\t\t}\n\t\t\t\tinstance.parentRecordId = parentId;\n\t\t\t\tinstance.parentModuleName = parentModule;\n\t\t\t\tinstance.selectedRelatedTabElement = selectedRelatedTabElement;\n\t\t\t\tinstance.moduleName = relatedModuleName;\n\t\t\t\tinstance.relatedTabsContainer = selectedRelatedTabElement.closest('div.related');\n\t\t\t\tinstance.content = $('div.contents', instance.relatedTabsContainer.closest('div.detailViewContainer'));\n\t\t\t\tinstance.relatedView = instance.content.find('input.relatedView').val();\n\t\t\t\tVtiger_RelatedList_Js.relatedListInstance = instance;\n\t\t\t}\n\t\t\treturn Vtiger_RelatedList_Js.relatedListInstance;\n\t\t},\n\t\ttriggerMassAction: function(massActionUrl, type) {\n\t\t\tconst self = this.relatedListInstance;\n\t\t\tlet validationResult = self.checkListRecordSelected();\n\t\t\tif (validationResult != true) {\n\t\t\t\tlet progressIndicatorElement = $.progressIndicator(),\n\t\t\t\t\tselectedIds = self.readSelectedIds(true),\n\t\t\t\t\texcludedIds = self.readExcludedIds(true),\n\t\t\t\t\tcvId = self.getCurrentCvId(),\n\t\t\t\t\tpostData = self.getCompleteParams();\n\t\t\t\tdelete postData.mode;\n\t\t\t\tdelete postData.view;\n\t\t\t\tpostData.viewname = cvId;\n\t\t\t\tpostData.selected_ids = selectedIds;\n\t\t\t\tpostData.excluded_ids = excludedIds;\n\t\t\t\tlet actionParams = {\n\t\t\t\t\ttype: 'POST',\n\t\t\t\t\turl: massActionUrl,\n\t\t\t\t\tdata: postData\n\t\t\t\t};\n\t\t\t\tif (type === 'sendByForm') {\n\t\t\t\t\tapp.openUrlMethodPost(massActionUrl, postData);\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t} else {\n\t\t\t\t\tAppConnector.request(actionParams)\n\t\t\t\t\t\t.done(function(responseData) {\n\t\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\tif (responseData && responseData.result !== null) {\n\t\t\t\t\t\t\t\tif (responseData.result.notify) {\n\t\t\t\t\t\t\t\t\tVtiger_Helper_Js.showMessage(responseData.result.notify);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (responseData.result.reloadList) {\n\t\t\t\t\t\t\t\t\tVtiger_Detail_Js.reloadRelatedList();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (responseData.result.procesStop) {\n\t\t\t\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.fail(function(error, err) {\n\t\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tself.noRecordSelectedAlert();\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Method to verify if selected files exist\n\t\t * @param {int} selectedIds\n\t\t * @return boolean\n\t\t */\n\t\tverifyFileExist: function(selectedIds) {\n\t\t\tlet aDeferred = jQuery.Deferred();\n\t\t\tAppConnector.request({\n\t\t\t\tmodule: 'Documents',\n\t\t\t\taction: 'CheckFileIntegrity',\n\t\t\t\tmode: 'multiple',\n\t\t\t\trecord: selectedIds\n\t\t\t}).done(function(responseData) {\n\t\t\t\tif (responseData && responseData.result !== null) {\n\t\t\t\t\tif (responseData.result.message) {\n\t\t\t\t\t\tVtiger_Helper_Js.showPnotify({ text: responseData.result.message });\n\t\t\t\t\t\taDeferred.resolve(false);\n\t\t\t\t\t} else {\n\t\t\t\t\t\taDeferred.resolve(true);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/**\n\t\t * Method to trigger mass download action\n\t\t * @param massActionUrl\n\t\t * @param type\n\t\t */\n\t\ttriggerMassDownload: function(massActionUrl, type) {\n\t\t\tconst self = this.relatedListInstance,\n\t\t\t\tthisInstance = this;\n\t\t\tthis.verifyFileExist(self.readSelectedIds(true)).done(function(data) {\n\t\t\t\tif (true === data) {\n\t\t\t\t\tthisInstance.triggerMassAction(\n\t\t\t\t\t\tmassActionUrl.substring(0, massActionUrl.indexOf('&mode=multiple')),\n\t\t\t\t\t\ttype\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\t{\n\t\tselectedRelatedTabElement: false,\n\t\tparentRecordId: false,\n\t\tparentModuleName: false,\n\t\tmoduleName: false,\n\t\trelatedTabsContainer: false,\n\t\tcontent: false,\n\t\tlistSearchInstance: false,\n\t\tdetailViewContentHolder: false,\n\t\trelatedView: false,\n\t\tframeProgress: false,\n\t\tnoEventsListSearch: false,\n\t\tlistViewContainer: false,\n\t\tsetSelectedTabElement: function(tabElement) {\n\t\t\tthis.selectedRelatedTabElement = tabElement;\n\t\t},\n\t\tgetSelectedTabElement: function() {\n\t\t\treturn this.selectedRelatedTabElement;\n\t\t},\n\t\tgetParentId: function() {\n\t\t\treturn this.parentRecordId;\n\t\t},\n\t\tgetRelatedContainer: function() {\n\t\t\treturn this.content;\n\t\t},\n\t\tsetRelatedContainer: function(container) {\n\t\t\tthis.content = container;\n\t\t\tthis.relatedView = container.find('input.relatedView').val();\n\t\t},\n\t\tgetContentHolder: function() {\n\t\t\tif (this.detailViewContentHolder == false) {\n\t\t\t\tthis.detailViewContentHolder = $('div.details div.contents');\n\t\t\t}\n\t\t\treturn this.detailViewContentHolder;\n\t\t},\n\t\tgetCurrentPageNum: function() {\n\t\t\treturn $('input[name=\"currentPageNum\"]', this.content).val();\n\t\t},\n\t\tsetCurrentPageNumber: function(pageNumber) {\n\t\t\t$('input[name=\"currentPageNum\"]', this.content).val(pageNumber);\n\t\t},\n\t\tgetOrderBy: function() {\n\t\t\treturn $('#orderBy', this.content).val();\n\t\t},\n\t\tgetDefaultParams: function() {\n\t\t\tlet container = this.getRelatedContainer();\n\t\t\tlet params = {\n\t\t\t\trelationId: container.find('#relationId').val(),\n\t\t\t\torderby: this.getOrderBy(),\n\t\t\t\tpage: this.getCurrentPageNum()\n\t\t\t};\n\t\t\tif (container.find('.pagination').length) {\n\t\t\t\tparams['totalCount'] = container.find('.pagination').data('totalCount');\n\t\t\t}\n\t\t\tif (container.find('.entityState').length) {\n\t\t\t\tparams['entityState'] = container.find('.entityState').val();\n\t\t\t}\n\t\t\tif (this.listSearchInstance) {\n\t\t\t\tvar searchValue = this.listSearchInstance.getAlphabetSearchValue();\n\t\t\t\tparams.search_params = JSON.stringify(this.listSearchInstance.getListSearchParams());\n\t\t\t}\n\t\t\tif (typeof searchValue !== 'undefined' && searchValue.length > 0) {\n\t\t\t\tparams['search_key'] = this.listSearchInstance.getAlphabetSearchField();\n\t\t\t\tparams['search_value'] = searchValue;\n\t\t\t\tparams['operator'] = 's';\n\t\t\t}\n\t\t\tif (this.moduleName == 'Calendar') {\n\t\t\t\tvar switchBtn = container.find('.js-switch--calendar');\n\t\t\t\tif (switchBtn.length) {\n\t\t\t\t\tparams.time = switchBtn.first().prop('checked') ? 'current' : 'history';\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn params;\n\t\t},\n\t\tgetCompleteParams: function() {\n\t\t\tlet container = this.getRelatedContainer();\n\t\t\tlet params = {\n\t\t\t\tview: 'Detail',\n\t\t\t\tmodule: this.parentModuleName,\n\t\t\t\trecord: this.getParentId(),\n\t\t\t\trelatedModule: this.moduleName,\n\t\t\t\trelatedView: this.relatedView,\n\t\t\t\tmode: 'showRelatedList',\n\t\t\t\ttab_label: container.find('#tab_label').val()\n\t\t\t};\n\t\t\treturn $.extend(this.getDefaultParams(), params);\n\t\t},\n\t\tloadRelatedList: function(params) {\n\t\t\tvar aDeferred = jQuery.Deferred();\n\t\t\tvar thisInstance = this;\n\t\t\tif (typeof thisInstance.moduleName === 'undefined' || thisInstance.moduleName.length <= 0) {\n\t\t\t\tvar currentInstance = Vtiger_Detail_Js.getInstance();\n\t\t\t\tcurrentInstance.loadWidgets();\n\t\t\t\treturn aDeferred.promise();\n\t\t\t}\n\t\t\tvar progressInstance = jQuery.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tvar completeParams = this.getCompleteParams();\n\t\t\tvar activeTabsReference = thisInstance.relatedTabsContainer.find('li.active').data('reference');\n\t\t\tAppConnector.request($.extend(completeParams, params))\n\t\t\t\t.done(function(responseData) {\n\t\t\t\t\tvar currentInstance = Vtiger_Detail_Js.getInstance();\n\t\t\t\t\tcurrentInstance.loadWidgets();\n\t\t\t\t\tprogressInstance.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tif (activeTabsReference !== 'ProductsAndServices') {\n\t\t\t\t\t\tthisInstance.relatedTabsContainer.find('li').removeClass('active');\n\t\t\t\t\t\tthisInstance.selectedRelatedTabElement.addClass('active');\n\t\t\t\t\t\tthisInstance.content.html(responseData);\n\t\t\t\t\t\t$('.pageNumbers', thisInstance.content).tooltip();\n\t\t\t\t\t\tthisInstance.registerPostLoadEvents();\n\t\t\t\t\t\tthisInstance.registerListEvents();\n\t\t\t\t\t}\n\t\t\t\t\taDeferred.resolve(responseData);\n\t\t\t\t})\n\t\t\t\t.fail(function(textStatus, errorThrown) {\n\t\t\t\t\taDeferred.reject(textStatus, errorThrown);\n\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\ttext: app.vtranslate('JS_NOT_ALLOWED_VALUE'),\n\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t});\n\t\t\t\t\tprogressInstance.progressIndicator({ mode: 'hide' });\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\ttriggerDisplayTypeEvent: function() {\n\t\t\tvar widthType = app.cacheGet('widthType', 'narrowWidthType');\n\t\t\tif (widthType) {\n\t\t\t\tvar elements = this.content.find('.listViewEntriesTable').find('td,th');\n\t\t\t\telements.attr('class', widthType);\n\t\t\t}\n\t\t},\n\t\tshowSelectRelation: function(extendParams) {\n\t\t\tlet params = $.extend(this.getRecordsListParams(), extendParams);\n\t\t\tapp.showRecordsList(params, (modal, instance) => {\n\t\t\t\tinstance.setSelectEvent(responseData => {\n\t\t\t\t\tthis.addRelations(Object.keys(responseData)).done(() => {\n\t\t\t\t\t\tapp.event.trigger('RelatedListView.AfterSelectRelation', responseData, this, instance, params);\n\t\t\t\t\t\tlet detail = Vtiger_Detail_Js.getInstance();\n\t\t\t\t\t\tthis.loadRelatedList().done(function() {\n\t\t\t\t\t\t\tdetail.registerRelatedModulesRecordCount();\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (this.getSelectedTabElement().data('link-key') === 'LBL_RECORD_SUMMARY') {\n\t\t\t\t\t\t\tdetail.loadWidgets();\n\t\t\t\t\t\t\tdetail.registerRelatedModulesRecordCount();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tgetRecordsListParams: function() {\n\t\t\treturn {\n\t\t\t\tmodule: this.moduleName,\n\t\t\t\tsrc_module: this.parentModuleName,\n\t\t\t\tsrc_record: this.parentRecordId,\n\t\t\t\tmulti_select: true\n\t\t\t};\n\t\t},\n\t\taddRelations: function(idList) {\n\t\t\tvar aDeferred = jQuery.Deferred();\n\t\t\tAppConnector.request({\n\t\t\t\tmodule: this.parentModuleName,\n\t\t\t\taction: 'RelationAjax',\n\t\t\t\tmode: 'addRelation',\n\t\t\t\trelated_module: this.moduleName,\n\t\t\t\tsrc_record: this.parentRecordId,\n\t\t\t\trelationId: this.getCompleteParams()['relationId'],\n\t\t\t\trelated_record_list: $.isArray(idList) ? JSON.stringify(idList) : idList\n\t\t\t})\n\t\t\t\t.done(function(responseData) {\n\t\t\t\t\taDeferred.resolve(responseData);\n\t\t\t\t})\n\t\t\t\t.fail(function(textStatus, errorThrown) {\n\t\t\t\t\taDeferred.reject(textStatus, errorThrown);\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\tdeleteRelation(target) {\n\t\t\tlet params = {};\n\t\t\tif (target.data('url')) {\n\t\t\t\tparams = target.data('url');\n\t\t\t} else {\n\t\t\t\tlet id = target.data('id') ? target.data('id') : target.closest('tr').data('id');\n\t\t\t\tparams = {\n\t\t\t\t\tmodule: this.parentModuleName,\n\t\t\t\t\taction: 'RelationAjax',\n\t\t\t\t\tmode: 'deleteRelation',\n\t\t\t\t\trelated_module: this.moduleName,\n\t\t\t\t\tsrc_record: this.parentRecordId,\n\t\t\t\t\trelationId: this.getCompleteParams()['relationId'],\n\t\t\t\t\trelated_record_list: JSON.stringify([id])\n\t\t\t\t};\n\t\t\t}\n\t\t\tlet progressInstance = $.progressIndicator({ position: 'html', blockInfo: { enabled: true } });\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(response => {\n\t\t\t\t\tprogressInstance.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tif (response.result) {\n\t\t\t\t\t\tlet widget = target.closest('.widgetContentBlock');\n\t\t\t\t\t\tconst detail = Vtiger_Detail_Js.getInstance();\n\t\t\t\t\t\tif (widget.length) {\n\t\t\t\t\t\t\tdetail.loadWidget(widget);\n\t\t\t\t\t\t\tlet updatesWidget = this.getContentHolder().find('[data-type=\"Updates\"]');\n\t\t\t\t\t\t\tif (updatesWidget.length > 0) {\n\t\t\t\t\t\t\t\tdetail.loadWidget(updatesWidget);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.loadRelatedList();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdetail.registerRelatedModulesRecordCount();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tVtiger_Helper_Js.showPnotify(app.vtranslate('JS_CANNOT_REMOVE_RELATION'));\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.fail(function(err, errThrow) {\n\t\t\t\t\tprogressInstance.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tVtiger_Helper_Js.showPnotify(app.vtranslate('JS_CANNOT_REMOVE_RELATION'));\n\t\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to handle next page navigation\n\t\t */\n\t\tnextPageHandler: function() {\n\t\t\tvar aDeferred = jQuery.Deferred();\n\t\t\tvar thisInstance = this;\n\t\t\tvar pageLimit = jQuery('#pageLimit', this.content).val();\n\t\t\tvar noOfEntries = jQuery('#noOfEntries', this.content).val();\n\t\t\tif (noOfEntries == pageLimit) {\n\t\t\t\tvar pageNumber = this.getCurrentPageNum();\n\t\t\t\tvar nextPage = parseInt(pageNumber) + 1;\n\t\t\t\tthis.loadRelatedList({\n\t\t\t\t\tpage: nextPage\n\t\t\t\t})\n\t\t\t\t\t.done(function(data) {\n\t\t\t\t\t\tthisInstance.setCurrentPageNumber(nextPage);\n\t\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function(textStatus, errorThrown) {\n\t\t\t\t\t\taDeferred.reject(textStatus, errorThrown);\n\t\t\t\t\t});\n\t\t\t}\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/**\n\t\t * Function to handle next page navigation\n\t\t */\n\t\tpreviousPageHandler: function() {\n\t\t\tconst thisInstance = this,\n\t\t\t\taDeferred = jQuery.Deferred();\n\t\t\tlet pageNumber = this.getCurrentPageNum();\n\t\t\tif (pageNumber > 1) {\n\t\t\t\tlet previousPage = parseInt(pageNumber) - 1;\n\t\t\t\tthis.loadRelatedList({\n\t\t\t\t\tpage: previousPage\n\t\t\t\t})\n\t\t\t\t\t.done(function(data) {\n\t\t\t\t\t\tthisInstance.setCurrentPageNumber(previousPage);\n\t\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function(textStatus, errorThrown) {\n\t\t\t\t\t\taDeferred.reject(textStatus, errorThrown);\n\t\t\t\t\t});\n\t\t\t}\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/**\n\t\t * Function to handle select page jump in related list\n\t\t */\n\t\tselectPageHandler: function(pageNumber) {\n\t\t\tconst thisInstance = this,\n\t\t\t\taDeferred = jQuery.Deferred();\n\t\t\tthis.loadRelatedList({\n\t\t\t\tpage: pageNumber\n\t\t\t})\n\t\t\t\t.done(function(data) {\n\t\t\t\t\tthisInstance.setCurrentPageNumber(pageNumber);\n\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t})\n\t\t\t\t.fail(function(textStatus, errorThrown) {\n\t\t\t\t\taDeferred.reject(textStatus, errorThrown);\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/**\n\t\t * Function to handle page jump in related list\n\t\t */\n\t\tpageJumpHandler: function(e) {\n\t\t\tvar aDeferred = jQuery.Deferred();\n\t\t\tvar thisInstance = this;\n\t\t\tif (e.which == 13) {\n\t\t\t\tvar element = jQuery(e.currentTarget);\n\t\t\t\tvar response = Vtiger_WholeNumberGreaterThanZero_Validator_Js.invokeValidation(element);\n\t\t\t\tif (typeof response !== 'undefined') {\n\t\t\t\t\telement.validationEngine('showPrompt', response, '', 'topLeft', true);\n\t\t\t\t\te.preventDefault();\n\t\t\t\t} else {\n\t\t\t\t\telement.validationEngine('hideAll');\n\t\t\t\t\tvar jumpToPage = parseInt(element.val());\n\t\t\t\t\tvar totalPages = parseInt(jQuery('#totalPageCount', thisInstance.content).text());\n\t\t\t\t\tif (jumpToPage > totalPages) {\n\t\t\t\t\t\tvar error = app.vtranslate('JS_PAGE_NOT_EXIST');\n\t\t\t\t\t\telement.validationEngine('showPrompt', error, '', 'topLeft', true);\n\t\t\t\t\t}\n\t\t\t\t\tvar invalidFields = element.parent().find('.formError');\n\t\t\t\t\tif (invalidFields.length < 1) {\n\t\t\t\t\t\tvar currentPage = jQuery('input[name=\"currentPageNum\"]', thisInstance.content).val();\n\t\t\t\t\t\tif (jumpToPage == currentPage) {\n\t\t\t\t\t\t\tvar message = app.vtranslate('JS_YOU_ARE_IN_PAGE_NUMBER') + ' ' + jumpToPage;\n\t\t\t\t\t\t\tvar params = {\n\t\t\t\t\t\t\t\ttext: message,\n\t\t\t\t\t\t\t\ttype: 'info'\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tVtiger_Helper_Js.showMessage(params);\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.loadRelatedList({\n\t\t\t\t\t\t\tpage: jumpToPage\n\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.done(function(data) {\n\t\t\t\t\t\t\t\tthisInstance.setCurrentPageNumber(jumpToPage);\n\t\t\t\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.fail(function(textStatus, errorThrown) {\n\t\t\t\t\t\t\t\taDeferred.reject(textStatus, errorThrown);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/**\n\t\t * Function to add related record for the module\n\t\t */\n\t\taddRelatedRecord: function(element, callback) {\n\t\t\tvar aDeferred = jQuery.Deferred();\n\t\t\tvar thisInstance = this;\n\t\t\tvar referenceModuleName = this.moduleName;\n\t\t\tvar parentId = this.getParentId();\n\t\t\tvar parentModule = this.parentModuleName;\n\t\t\tvar quickCreateParams = {};\n\t\t\tvar relatedParams = {};\n\t\t\tvar relatedField = element.data('name');\n\t\t\tvar fullFormUrl = element.data('url');\n\t\t\tif (relatedField) {\n\t\t\t\trelatedParams[relatedField] = parentId;\n\t\t\t}\n\t\t\tvar eliminatedKeys = new Array('view', 'module', 'mode', 'action');\n\t\t\tvar preQuickCreateSave = function(data) {\n\t\t\t\tvar index, queryParam, queryParamComponents;\n\t\t\t\tlet queryParameters = [];\n\n\t\t\t\t//To handle switch to task tab when click on add task from related list of activities\n\t\t\t\t//As this is leading to events tab intially even clicked on add task\n\t\t\t\tif (typeof fullFormUrl !== 'undefined' && fullFormUrl.indexOf('?') !== -1) {\n\t\t\t\t\tvar urlSplit = fullFormUrl.split('?');\n\t\t\t\t\tvar queryString = urlSplit[1];\n\t\t\t\t\tqueryParameters = queryString.split('&');\n\t\t\t\t\tfor (index = 0; index < queryParameters.length; index++) {\n\t\t\t\t\t\tqueryParam = queryParameters[index];\n\t\t\t\t\t\tqueryParamComponents = queryParam.split('=');\n\t\t\t\t\t\tif (queryParamComponents[0] == 'mode' && queryParamComponents[1] == 'Calendar') {\n\t\t\t\t\t\t\tdata.find('a[data-tab-name=\"Task\"]').trigger('click');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tjQuery('<input type=\"hidden\" name=\"sourceModule\" value=\"' + parentModule + '\" />').appendTo(data);\n\t\t\t\tjQuery('<input type=\"hidden\" name=\"sourceRecord\" value=\"' + parentId + '\" />').appendTo(data);\n\t\t\t\tjQuery('<input type=\"hidden\" name=\"relationOperation\" value=\"true\" />').appendTo(data);\n\n\t\t\t\tif (typeof relatedField !== 'undefined') {\n\t\t\t\t\tvar field = data.find('[name=\"' + relatedField + '\"]');\n\t\t\t\t\t//If their is no element with the relatedField name,we are adding hidden element with\n\t\t\t\t\t//name as relatedField name,for saving of record with relation to parent record\n\t\t\t\t\tif (field.length == 0) {\n\t\t\t\t\t\tjQuery('<input type=\"hidden\" name=\"' + relatedField + '\" value=\"' + parentId + '\" />').appendTo(\n\t\t\t\t\t\t\tdata\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (index = 0; index < queryParameters.length; index++) {\n\t\t\t\t\tqueryParam = queryParameters[index];\n\t\t\t\t\tqueryParamComponents = queryParam.split('=');\n\t\t\t\t\tif (\n\t\t\t\t\t\tjQuery.inArray(queryParamComponents[0], eliminatedKeys) == '-1' &&\n\t\t\t\t\t\tdata.find('[name=\"' + queryParamComponents[0] + '\"]').length == 0\n\t\t\t\t\t) {\n\t\t\t\t\t\tjQuery(\n\t\t\t\t\t\t\t'<input type=\"hidden\" name=\"' +\n\t\t\t\t\t\t\t\tqueryParamComponents[0] +\n\t\t\t\t\t\t\t\t'\" value=\"' +\n\t\t\t\t\t\t\t\tqueryParamComponents[1] +\n\t\t\t\t\t\t\t\t'\" />'\n\t\t\t\t\t\t).appendTo(data);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (typeof callback !== 'undefined') {\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\t\t\t};\n\t\t\tvar postQuickCreateSave = function(data) {\n\t\t\t\tthisInstance.loadRelatedList().done(function(data) {\n\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t});\n\t\t\t};\n\n\t\t\t//If url contains params then seperate them and make them as relatedParams\n\t\t\tif (typeof fullFormUrl !== 'undefined' && fullFormUrl.indexOf('?') !== -1) {\n\t\t\t\tvar urlSplit = fullFormUrl.split('?');\n\t\t\t\tvar queryString = urlSplit[1];\n\t\t\t\tvar queryParameters = queryString.split('&');\n\t\t\t\tfor (var index = 0; index < queryParameters.length; index++) {\n\t\t\t\t\tvar queryParam = queryParameters[index];\n\t\t\t\t\tvar queryParamComponents = queryParam.split('=');\n\t\t\t\t\tif (jQuery.inArray(queryParamComponents[0], eliminatedKeys) == '-1') {\n\t\t\t\t\t\trelatedParams[queryParamComponents[0]] = queryParamComponents[1];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tquickCreateParams['data'] = relatedParams;\n\t\t\tquickCreateParams['callbackFunction'] = postQuickCreateSave;\n\t\t\tquickCreateParams['callbackPostShown'] = preQuickCreateSave;\n\t\t\tquickCreateParams['noCache'] = true;\n\t\t\tVtiger_Header_Js.getInstance().quickCreateModule(referenceModuleName, quickCreateParams);\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\tgetRelatedPageCount: function() {\n\t\t\tvar aDeferred = jQuery.Deferred();\n\t\t\tvar element = this.content.find('#totalPageCount');\n\t\t\tvar totalCountElem = this.content.find('#totalCount');\n\t\t\tvar totalPageNumber = element.text();\n\t\t\tif (totalPageNumber == '') {\n\t\t\t\telement.progressIndicator({});\n\t\t\t\tAppConnector.request({\n\t\t\t\t\tmodule: this.parentModuleName,\n\t\t\t\t\taction: 'RelationAjax',\n\t\t\t\t\tmode: 'getRelatedListPageCount',\n\t\t\t\t\trecord: this.getParentId(),\n\t\t\t\t\trelationId: this.getCompleteParams()['relationId'],\n\t\t\t\t\trelatedModule: this.moduleName\n\t\t\t\t})\n\t\t\t\t\t.done(function(data) {\n\t\t\t\t\t\tvar pageCount = data['result']['page'];\n\t\t\t\t\t\tvar numberOfRecords = data['result']['numberOfRecords'];\n\t\t\t\t\t\ttotalCountElem.val(numberOfRecords);\n\t\t\t\t\t\telement.text(pageCount);\n\t\t\t\t\t\telement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\taDeferred.resolve();\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function(error, err) {\n\t\t\t\t\t\taDeferred.reject(false);\n\t\t\t\t\t});\n\t\t\t} else {\n\t\t\t\taDeferred.resolve();\n\t\t\t}\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\tfavoritesRelation: function(relcrmId, state) {\n\t\t\tvar aDeferred = jQuery.Deferred();\n\t\t\tif (relcrmId) {\n\t\t\t\tAppConnector.request({\n\t\t\t\t\tmodule: this.parentModuleName,\n\t\t\t\t\taction: 'RelationAjax',\n\t\t\t\t\tmode: 'updateFavoriteForRecord',\n\t\t\t\t\trecord: this.getParentId(),\n\t\t\t\t\trelcrmid: relcrmId,\n\t\t\t\t\trelatedModule: this.moduleName,\n\t\t\t\t\trelationId: this.getCompleteParams()['relationId'],\n\t\t\t\t\tactionMode: state ? 'delete' : 'add'\n\t\t\t\t})\n\t\t\t\t\t.done(function(data) {\n\t\t\t\t\t\tif (data.result) aDeferred.resolve(true);\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function(error, err) {\n\t\t\t\t\t\taDeferred.reject(false);\n\t\t\t\t\t});\n\t\t\t} else {\n\t\t\t\taDeferred.reject(false);\n\t\t\t}\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\tupdatePreview: function(url) {\n\t\t\tvar frame = this.content.find('.listPreviewframe');\n\t\t\tthis.frameProgress = $.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tmessage: app.vtranslate('JS_FRAME_IN_PROGRESS'),\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tvar defaultView = '';\n\t\t\tif (app.getMainParams('defaultDetailViewName')) {\n\t\t\t\tdefaultView =\n\t\t\t\t\tdefaultView +\n\t\t\t\t\t'&mode=showDetailViewByMode&requestMode=' +\n\t\t\t\t\tapp.getMainParams('defaultDetailViewName'); // full, summary\n\t\t\t}\n\t\t\tframe.attr('src', url.replace('view=Detail', 'view=DetailPreview') + defaultView);\n\t\t},\n\t\tregisterUnreviewedCountEvent: function() {\n\t\t\tvar ids = [];\n\t\t\tvar relatedContent = this.content;\n\t\t\tvar isUnreviewedActive = relatedContent.find('.unreviewed').length;\n\t\t\trelatedContent.find('tr.listViewEntries').each(function() {\n\t\t\t\tvar id = jQuery(this).data('id');\n\t\t\t\tif (id) {\n\t\t\t\t\tids.push(id);\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (!ids || isUnreviewedActive < 1) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tAppConnector.request({\n\t\t\t\taction: 'ChangesReviewedOn',\n\t\t\t\tmode: 'getUnreviewed',\n\t\t\t\tmodule: 'ModTracker',\n\t\t\t\tsourceModule: this.moduleName,\n\t\t\t\trecordsId: ids\n\t\t\t}).done(function(appData) {\n\t\t\t\tvar data = appData.result;\n\t\t\t\t$.each(data, function(id, value) {\n\t\t\t\t\tif (value.a > 0) {\n\t\t\t\t\t\trelatedContent\n\t\t\t\t\t\t\t.find('tr[data-id=\"' + id + '\"] .unreviewed .badge.all')\n\t\t\t\t\t\t\t.text(value.a)\n\t\t\t\t\t\t\t.parent()\n\t\t\t\t\t\t\t.removeClass('d-none');\n\t\t\t\t\t}\n\t\t\t\t\tif (value.m > 0) {\n\t\t\t\t\t\trelatedContent\n\t\t\t\t\t\t\t.find('tr[data-id=\"' + id + '\"] .unreviewed .badge.mail')\n\t\t\t\t\t\t\t.text(value.m)\n\t\t\t\t\t\t\t.parent()\n\t\t\t\t\t\t\t.removeClass('d-none');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterChangeEntityStateEvent: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar relatedContent = this.content;\n\t\t\trelatedContent.on('click', '.dropdownEntityState a', function(e) {\n\t\t\t\tvar element = $(this);\n\t\t\t\trelatedContent.find('.entityState').val(element.data('value'));\n\t\t\t\trelatedContent.find('.pagination').data('totalCount', 0);\n\t\t\t\trelatedContent\n\t\t\t\t\t.find('.dropdownEntityState button')\n\t\t\t\t\t.find('span')\n\t\t\t\t\t.attr('class', element.find('span').attr('class'));\n\t\t\t\tthisInstance.loadRelatedList({ page: 1 });\n\t\t\t});\n\t\t},\n\t\tregisterRowsEvent: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tif (this.relatedView === 'List' || this.relatedView === 'Detail') {\n\t\t\t\tthis.content.find('.listViewEntries').on('click', function(e) {\n\t\t\t\t\tif ($(e.target).is('td')) {\n\t\t\t\t\t\tif (app.getViewName() == 'DetailPreview') {\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t$(e.target)\n\t\t\t\t\t\t\t\t\t.closest('tr')\n\t\t\t\t\t\t\t\t\t.data('recordurl')\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\ttop.document.location.href = $(e.target)\n\t\t\t\t\t\t\t\t\t.closest('tr')\n\t\t\t\t\t\t\t\t\t.data('recordurl');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t$(e.target)\n\t\t\t\t\t\t\t\t\t.closest('tr')\n\t\t\t\t\t\t\t\t\t.data('recordurl')\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tdocument.location.href = $(e.target)\n\t\t\t\t\t\t\t\t\t.closest('tr')\n\t\t\t\t\t\t\t\t\t.data('recordurl');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthis.content.find('.showInventoryRow').on('click', function(e) {\n\t\t\t\t\tvar target = $(this);\n\t\t\t\t\tvar row = target.closest('tr');\n\t\t\t\t\tvar inventoryRow = row.next();\n\t\t\t\t\tif (inventoryRow.hasClass('listViewInventoryEntries')) {\n\t\t\t\t\t\tinventoryRow.toggleClass('d-none');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else if (this.relatedView === 'ListPreview') {\n\t\t\t\tthis.content.find('.listViewEntries').on('click', function(e) {\n\t\t\t\t\tlet target = $(e.target);\n\t\t\t\t\tif (target.closest('div').hasClass('actions')) return;\n\t\t\t\t\tif (target.is('button') || target.parent().is('button')) return;\n\t\t\t\t\tif (target.closest('a').hasClass('noLinkBtn')) return;\n\t\t\t\t\tif ($(e.target, $(e.currentTarget)).is('td:first-child')) return;\n\t\t\t\t\tif (target.is('input[type=\"checkbox\"]')) return;\n\t\t\t\t\tif (\n\t\t\t\t\t\t$.contains(\n\t\t\t\t\t\t\t$(e.currentTarget)\n\t\t\t\t\t\t\t\t.find('td:last-child')\n\t\t\t\t\t\t\t\t.get(0),\n\t\t\t\t\t\t\ttarget[0]\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t\t\treturn;\n\t\t\t\t\tif (\n\t\t\t\t\t\t$.contains(\n\t\t\t\t\t\t\t$(e.currentTarget)\n\t\t\t\t\t\t\t\t.find('td:first-child')\n\t\t\t\t\t\t\t\t.get(0),\n\t\t\t\t\t\t\ttarget[0]\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t\t\treturn;\n\t\t\t\t\tvar recordUrl = $(this).data('recordurl');\n\t\t\t\t\tthisInstance.content.find('.listViewEntriesTable .listViewEntries').removeClass('active');\n\t\t\t\t\t$(this).addClass('active');\n\t\t\t\t\tthisInstance.updatePreview(recordUrl);\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tregisterSummationEvent: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tthis.content.on('click', '.listViewSummation button', function() {\n\t\t\t\tvar button = $(this);\n\t\t\t\tvar calculateValue = button.closest('td').find('.calculateValue');\n\t\t\t\tvar params = thisInstance.getCompleteParams();\n\t\t\t\tparams['action'] = 'RelationAjax';\n\t\t\t\tparams['mode'] = 'calculate';\n\t\t\t\tparams['fieldName'] = button.data('field');\n\t\t\t\tparams['calculateType'] = button.data('operator');\n\t\t\t\tdelete params['view'];\n\t\t\t\tvar progress = $.progressIndicator({\n\t\t\t\t\tmessage: app.vtranslate('JS_CALCULATING_IN_PROGRESS'),\n\t\t\t\t\tposition: 'html',\n\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\tenabled: true\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tapp.hidePopover(button);\n\t\t\t\tAppConnector.request(params).done(function(response) {\n\t\t\t\t\tif (response.success) {\n\t\t\t\t\t\tcalculateValue.html(response.result);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcalculateValue.html('');\n\t\t\t\t\t}\n\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t});\n\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t});\n\t\t},\n\t\tregisterPreviewEvent: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar contentHeight = this.content.find('.js-detail-preview,.js-list-preview');\n\t\t\tcontentHeight.height(app.getScreenHeight() - (this.content.offset().top + $('.js-footer').height()));\n\t\t\tthis.content.find('.listPreviewframe').on('load', function() {\n\t\t\t\tif (thisInstance.frameProgress) {\n\t\t\t\t\tthisInstance.frameProgress.progressIndicator({ mode: 'hide' });\n\t\t\t\t}\n\t\t\t\tcontentHeight.height(\n\t\t\t\t\t$(this)\n\t\t\t\t\t\t.contents()\n\t\t\t\t\t\t.find('.bodyContents')\n\t\t\t\t\t\t.height() + 2\n\t\t\t\t);\n\t\t\t});\n\t\t\tthis.content\n\t\t\t\t.find('.listViewEntriesTable .listViewEntries')\n\t\t\t\t.first()\n\t\t\t\t.trigger('click');\n\t\t},\n\t\tregisterPaginationEvents: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar relatedContent = this.content;\n\t\t\tthis.content.on('click', '#relatedViewNextPageButton', function(e) {\n\t\t\t\tif ($(this).hasClass('disabled')) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthisInstance.nextPageHandler();\n\t\t\t});\n\t\t\tthis.content.on('click', '#relatedViewPreviousPageButton', function() {\n\t\t\t\tthisInstance.previousPageHandler();\n\t\t\t});\n\t\t\tthis.content.on('click', '#relatedListPageJump', function(e) {\n\t\t\t\tthisInstance.getRelatedPageCount();\n\t\t\t});\n\t\t\tthis.content\n\t\t\t\t.on('click', '#relatedListPageJumpDropDown > li', function(e) {\n\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t})\n\t\t\t\t.on('keypress', '#pageToJump', function(e) {\n\t\t\t\t\tthisInstance.pageJumpHandler(e);\n\t\t\t\t});\n\t\t\tthis.content.on('click', '.pageNumber', function() {\n\t\t\t\tif ($(this).hasClass('disabled')) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tthisInstance.selectPageHandler($(this).data('id'));\n\t\t\t});\n\t\t\tthis.content.on('click', '#totalCountBtn', function() {\n\t\t\t\tapp.hidePopover($(this));\n\t\t\t\tvar params = {\n\t\t\t\t\tmodule: thisInstance.parentModuleName,\n\t\t\t\t\tview: 'Pagination',\n\t\t\t\t\tmode: 'getRelationPagination',\n\t\t\t\t\trecord: thisInstance.getParentId(),\n\t\t\t\t\trelatedModule: thisInstance.moduleName,\n\t\t\t\t\tnoOfEntries: $('#noOfEntries', relatedContent).val(),\n\t\t\t\t\tpage: relatedContent.find('[name=\"currentPageNum\"]').val()\n\t\t\t\t};\n\t\t\t\tif (relatedContent.find('.entityState').length) {\n\t\t\t\t\tparams['entityState'] = relatedContent.find('.entityState').val();\n\t\t\t\t}\n\t\t\t\tAppConnector.request(params).done(function(response) {\n\t\t\t\t\trelatedContent.find('.paginationDiv').html(response);\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterListEvents: function() {\n\t\t\tvar relatedContent = this.content;\n\t\t\tvar thisInstance = this;\n\t\t\tthis.content.find('a.favorites').on('click', function(e) {\n\t\t\t\tvar progressInstance = jQuery.progressIndicator({\n\t\t\t\t\tposition: 'html',\n\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\tenabled: true\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tvar element = $(this);\n\t\t\t\tvar row = element.closest('tr');\n\t\t\t\tthisInstance.favoritesRelation(row.data('id'), element.data('state')).done(function(response) {\n\t\t\t\t\tif (response) {\n\t\t\t\t\t\tvar state = element.data('state') ? 0 : 1;\n\t\t\t\t\t\telement.data('state', state);\n\t\t\t\t\t\tif (state) {\n\t\t\t\t\t\t\telement.find('.far').addClass('d-none');\n\t\t\t\t\t\t\telement.find('.fas').removeClass('d-none');\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\telement.find('.fas').addClass('d-none');\n\t\t\t\t\t\t\telement.find('.far').removeClass('d-none');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tprogressInstance.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tvar text = app.vtranslate('JS_REMOVED_FROM_FAVORITES');\n\t\t\t\t\t\tif (state) {\n\t\t\t\t\t\t\ttext = app.vtranslate('JS_ADDED_TO_FAVORITES');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tVtiger_Helper_Js.showPnotify({ text: text, type: 'success' });\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t\tthis.content.find('[name=\"addButton\"]').on('click', function(e) {\n\t\t\t\tconst element = $(this);\n\t\t\t\tif (element.hasClass('quickCreateSupported') !== true) {\n\t\t\t\t\tapp.openUrl(element.data('url'));\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthisInstance.addRelatedRecord(element);\n\t\t\t});\n\t\t\tthis.content.find('.relatedHeader button.selectRelation').on('click', function(e) {\n\t\t\t\tlet restrictionsField = $(this).data('rf');\n\t\t\t\tlet params = {\n\t\t\t\t\trelationId: thisInstance.getCompleteParams()['relationId']\n\t\t\t\t};\n\t\t\t\tif (restrictionsField && Object.keys(restrictionsField).length > 0) {\n\t\t\t\t\tparams = {\n\t\t\t\t\t\tsearch_key: restrictionsField.key,\n\t\t\t\t\t\tsearch_value: restrictionsField.name,\n\t\t\t\t\t\trelationId: thisInstance.getCompleteParams()['relationId']\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tthisInstance.showSelectRelation(params);\n\t\t\t});\n\t\t\tthis.content.find('button.relationDelete').on('click', function(e) {\n\t\t\t\te.stopImmediatePropagation();\n\t\t\t\tlet target = $(e.currentTarget);\n\t\t\t\tlet params = {};\n\t\t\t\tif (target.data('confirm')) {\n\t\t\t\t\tparams.message = target.data('confirm');\n\t\t\t\t\tparams.title = target.html() + ' ' + target.data('content');\n\t\t\t\t} else if (target.data('content')) {\n\t\t\t\t\tparams.message = target.data('content');\n\t\t\t\t} else {\n\t\t\t\t\tparams.message = app.vtranslate('JS_DELETE_CONFIRMATION');\n\t\t\t\t}\n\t\t\t\tVtiger_Helper_Js.showConfirmationBox(params).done(function() {\n\t\t\t\t\tthisInstance.deleteRelation(target);\n\t\t\t\t});\n\t\t\t});\n\t\t\tthis.content.find('.js-switch--calendar').on('change', function(e) {\n\t\t\t\tthisInstance.loadRelatedList();\n\t\t\t});\n\t\t\tthis.content.find('.relatedViewGroup a').on('click', function(e) {\n\t\t\t\tvar element = $(this);\n\t\t\t\tthisInstance.relatedView = element.data('view');\n\t\t\t\trelatedContent.find('.pagination').data('totalCount', 0);\n\t\t\t\tthisInstance.loadRelatedList({ page: 1 });\n\t\t\t});\n\t\t},\n\t\tregisterPostLoadEvents: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tthis.registerRowsEvent();\n\t\t\tthis.registerListScroll();\n\t\t\tif (this.relatedView === 'ListPreview') {\n\t\t\t\tthis.registerPreviewEvent();\n\t\t\t\tif (!this.content.find('.gutter').length) {\n\t\t\t\t\tif (!this.content.find('.js-list-preview').length) return;\n\t\t\t\t\tthis.setDomParams(this.content);\n\t\t\t\t\tthis.toggleSplit(this.content);\n\t\t\t\t\tthis.registerListPreviewEvents();\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.listSearchInstance = YetiForce_ListSearch_Js.getInstance(this.content, false, this);\n\t\t\tapp.event.trigger('RelatedList.AfterLoad', thisInstance);\n\t\t},\n\t\tgetSecondColMinWidth: function(container) {\n\t\t\tlet maxWidth = 0,\n\t\t\t\tthisWidth;\n\t\t\tcontainer.find('.js-list__row').each(function(i) {\n\t\t\t\tthisWidth = $(this)\n\t\t\t\t\t.find('.js-list__field')\n\t\t\t\t\t.first()\n\t\t\t\t\t.width();\n\t\t\t\tif (i === 0) {\n\t\t\t\t\tmaxWidth = thisWidth;\n\t\t\t\t} else {\n\t\t\t\t\tthisWidth > maxWidth ? (maxWidth = thisWidth) : maxWidth;\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn maxWidth;\n\t\t},\n\t\tsetDomParams: function(container) {\n\t\t\tthis.listColumnFirstWidth = container\n\t\t\t\t.find('.listViewEntriesDiv .listViewHeaders th')\n\t\t\t\t.first()\n\t\t\t\t.width();\n\t\t\tthis.listColumnSecondWidth = this.getSecondColMinWidth(container);\n\t\t\tthis.windowW = $(window).width();\n\t\t\tthis.mainBody = container.closest('.mainBody');\n\t\t\tthis.windowMinWidth = (15 / this.windowW) * 100;\n\t\t\tthis.windowMaxWidth = 100 - this.minWidth;\n\t\t\tthis.sideBlocks = container.find('.js-side-block');\n\t\t\tthis.sideBlockLeft = this.sideBlocks.first();\n\t\t\tthis.sideBlockRight = this.sideBlocks.last();\n\t\t\tthis.list = container.find('.js-list-preview');\n\t\t\tthis.preview = container.find('.js-detail-preview');\n\t\t\tthis.rotatedText = container.find('.u-rotate-90');\n\t\t\tthis.footerH = $('.js-footer').outerHeight();\n\t\t\tthis.headerH = $('.js-header').outerHeight();\n\t\t},\n\t\tgetDefaultSplitSizes: function() {\n\t\t\tlet thWidth = ((this.listColumnFirstWidth + this.listColumnSecondWidth + 82) / this.windowW) * 100;\n\t\t\treturn [thWidth, 100 - thWidth];\n\t\t},\n\t\tgetSplitSizes() {\n\t\t\tconst cachedParams = app.moduleCacheGet('userRelatedSplitSet');\n\t\t\tif (cachedParams !== undefined) {\n\t\t\t\treturn cachedParams;\n\t\t\t} else {\n\t\t\t\treturn this.getDefaultSplitSizes();\n\t\t\t}\n\t\t},\n\t\tregisterListPreviewEvents() {\n\t\t\tapp.showNewScrollbarTopBottom(this.content.find('.js-list-preview--scroll'));\n\t\t\tapp.showNewScrollbarLeft(this.list);\n\t\t\tthis.list.on('click', '.listViewEntries', () => {\n\t\t\t\tif (this.split.getSizes()[1] < 10) {\n\t\t\t\t\tconst defaultGutterPosition = this.getDefaultSplitSizes();\n\t\t\t\t\tthis.split.setSizes(defaultGutterPosition);\n\t\t\t\t\tthis.preview.show();\n\t\t\t\t\tthis.sideBlockRight.removeClass('d-block');\n\t\t\t\t\tapp.moduleCacheSet('userRelatedSplitSet', defaultGutterPosition);\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (!this.list.parents('.blockContent').length) {\n\t\t\t\tthis.registerScrollEvent();\n\t\t\t}\n\t\t},\n\t\tregisterScrollEvent() {\n\t\t\tthis.gutter.addClass('js-fixed-scroll');\n\t\t\tlet scrollContainer = App.Components.Scrollbar.page.element;\n\t\t\tlet listOffsetTop = this.list.offset().top - this.headerH;\n\t\t\tlet initialH = this.sideBlocks.height();\n\t\t\tlet mainViewPortHeightCss = { height: this.mainBody.height() };\n\t\t\tlet mainViewPortWidthCss = { width: this.mainBody.height() };\n\t\t\tlet fixedElements = this.mainBody.find('.js-fixed-scroll');\n\t\t\tif (!this.mainBody.length) {\n\t\t\t\tthis.mainBody = $(top.document).find('.mainBody');\n\t\t\t\tthis.headerH = $(top.document)\n\t\t\t\t\t.find('.js-header')\n\t\t\t\t\t.outerHeight();\n\t\t\t\tscrollContainer = top.window.App.Components.Scrollbar.page.element;\n\t\t\t\tlet iframe = $(top.document).find('.js-detail-preview');\n\t\t\t\tlistOffsetTop = this.list.offset().top + iframe.offset().top - this.headerH + 1;\n\t\t\t\tmainViewPortHeightCss = { height: this.mainBody.height() };\n\t\t\t\tmainViewPortWidthCss = { width: this.mainBody.height() };\n\t\t\t}\n\t\t\tconst onScroll = () => {\n\t\t\t\tif (scrollContainer.scrollTop() >= listOffsetTop) {\n\t\t\t\t\tfixedElements.css({ top: scrollContainer.scrollTop() - listOffsetTop });\n\t\t\t\t\tthis.sideBlocks.css({ top: scrollContainer.scrollTop() - listOffsetTop + 56 });\n\t\t\t\t\tfixedElements.css(mainViewPortHeightCss);\n\t\t\t\t\tthis.rotatedText.css(mainViewPortHeightCss);\n\t\t\t\t\tthis.rotatedText.css(mainViewPortWidthCss);\n\t\t\t\t} else {\n\t\t\t\t\tfixedElements.css({ top: 'initial' });\n\t\t\t\t\tfixedElements.css({ height: initialH + scrollContainer.scrollTop() });\n\t\t\t\t\tthis.rotatedText.css({\n\t\t\t\t\t\twidth: initialH + scrollContainer.scrollTop(),\n\t\t\t\t\t\theight: initialH + scrollContainer.scrollTop()\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\t\t\tscrollContainer.on('scroll', onScroll);\n\t\t},\n\t\t/**\n\t\t * Registers split's events.\n\t\t * @param {jQuery} container - current container for reference.\n\t\t * @param {Split} split - a split object.\n\t\t */\n\t\tregisterSplitEvents: function(container, split) {\n\t\t\tvar rightSplitMaxWidth = (400 / this.windowW) * 100;\n\t\t\tvar minWindowWidth = (23 / this.windowW) * 100;\n\t\t\tvar maxWindowWidth = 100 - minWindowWidth;\n\t\t\tvar listPreview = container.find('.js-detail-preview');\n\t\t\tthis.gutter.on('dblclick', () => {\n\t\t\t\tlet gutterRelatedMidPosition = app.moduleCacheGet('gutterRelatedMidPosition');\n\t\t\t\tif (isNaN(this.split.getSizes()[0])) {\n\t\t\t\t\tthis.split.setSizes(gutterRelatedMidPosition);\n\t\t\t\t}\n\t\t\t\tif (split.getSizes()[0] < 7) {\n\t\t\t\t\tthis.gutter.removeClass('js-gutter-corr-left');\n\t\t\t\t\tthis.sideBlockLeft.removeClass('d-block');\n\t\t\t\t\tthis.list.removeClass('u-hide-underneath');\n\t\t\t\t\tif (gutterRelatedMidPosition[0] > 11) {\n\t\t\t\t\t\tsplit.setSizes(gutterRelatedMidPosition);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsplit.setSizes(this.getDefaultSplitSizes());\n\t\t\t\t\t}\n\t\t\t\t} else if (split.getSizes()[1] < 20) {\n\t\t\t\t\tif (gutterRelatedMidPosition[1] > rightSplitMaxWidth + 1) {\n\t\t\t\t\t\tsplit.setSizes(gutterRelatedMidPosition);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsplit.setSizes(this.getDefaultSplitSizes());\n\t\t\t\t\t}\n\t\t\t\t\tthis.gutter.removeClass('js-gutter-corr-right');\n\t\t\t\t\tthis.sideBlockRight.removeClass('d-block');\n\t\t\t\t\tlistPreview.show();\n\t\t\t\t} else if (split.getSizes()[0] > 7 && split.getSizes()[0] < 50) {\n\t\t\t\t\tsplit.setSizes([minWindowWidth, maxWindowWidth]);\n\t\t\t\t\tthis.gutter.addClass('js-gutter-corr-left');\n\t\t\t\t\tthis.sideBlockLeft.addClass('d-block');\n\t\t\t\t\tthis.list.addClass('u-hide-underneath');\n\t\t\t\t} else if (split.getSizes()[1] > 10 && split.getSizes()[1] < 50) {\n\t\t\t\t\tsplit.setSizes([maxWindowWidth, minWindowWidth]);\n\t\t\t\t\tthis.gutter.addClass('js-gutter-corr-right');\n\t\t\t\t\tthis.sideBlockRight.addClass('d-block');\n\t\t\t\t\tlistPreview.hide();\n\t\t\t\t\t//this.list.width(this.list.width() - 10);\n\t\t\t\t}\n\t\t\t\tapp.moduleCacheSet('userRelatedSplitSet', split.getSizes());\n\t\t\t});\n\t\t\tthis.sideBlockLeft.on('click', () => {\n\t\t\t\tlet gutterRelatedMidPosition = app.moduleCacheGet('gutterRelatedMidPosition');\n\t\t\t\tif (gutterRelatedMidPosition[0] > 11) {\n\t\t\t\t\tsplit.setSizes(gutterRelatedMidPosition);\n\t\t\t\t} else {\n\t\t\t\t\tsplit.setSizes(this.getDefaultSplitSizes());\n\t\t\t\t}\n\t\t\t\tthis.gutter.removeClass('js-gutter-corr-left');\n\t\t\t\tthis.sideBlockLeft.removeClass('d-block');\n\t\t\t\tthis.list.removeClass('u-hide-underneath');\n\t\t\t\tapp.moduleCacheSet('userRelatedSplitSet', split.getSizes());\n\t\t\t});\n\t\t\tthis.sideBlockRight.on('click', () => {\n\t\t\t\tlet gutterRelatedMidPosition = app.moduleCacheGet('gutterRelatedMidPosition');\n\t\t\t\tif (gutterRelatedMidPosition[1] > rightSplitMaxWidth + 1) {\n\t\t\t\t\tsplit.setSizes(gutterRelatedMidPosition);\n\t\t\t\t} else {\n\t\t\t\t\tsplit.setSizes(this.getDefaultSplitSizes());\n\t\t\t\t}\n\t\t\t\tthis.gutter.removeClass('js-gutter-corr-right');\n\t\t\t\tthis.sideBlockRight.removeClass('d-block');\n\t\t\t\tlistPreview.show();\n\t\t\t\tapp.moduleCacheSet('userRelatedSplitSet', split.getSizes());\n\t\t\t});\n\t\t},\n\t\tregisterSplit: function(container) {\n\t\t\tvar rightSplitMaxWidth = (400 / this.windowW) * 100;\n\t\t\tconst splitSizes = this.getSplitSizes();\n\t\t\tapp.moduleCacheSet('gutterRelatedMidPosition', splitSizes);\n\t\t\tvar split = Split([this.list[0], this.preview[0]], {\n\t\t\t\tsizes: splitSizes,\n\t\t\t\tminSize: 10,\n\t\t\t\tgutterSize: 24,\n\t\t\t\tsnapOffset: 100,\n\t\t\t\tonDrag: () => {\n\t\t\t\t\tif (split.getSizes()[1] < rightSplitMaxWidth) {\n\t\t\t\t\t\tsplit.collapse(1);\n\t\t\t\t\t}\n\t\t\t\t\tif (split.getSizes()[0] < 7) {\n\t\t\t\t\t\tthis.sideBlockLeft.addClass('d-block');\n\t\t\t\t\t\tthis.list.addClass('u-hide-underneath');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.gutter.removeClass('js-gutter-corr-left');\n\t\t\t\t\t\tthis.sideBlockLeft.removeClass('d-block');\n\t\t\t\t\t\tthis.list.removeClass('u-hide-underneath');\n\t\t\t\t\t}\n\t\t\t\t\tif (split.getSizes()[1] < 10) {\n\t\t\t\t\t\tthis.sideBlockRight.addClass('d-block');\n\t\t\t\t\t\tthis.preview.hide();\n\t\t\t\t\t\tthis.list.width(this.list.width() - 10);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.gutter.removeClass('js-gutter-corr-right');\n\t\t\t\t\t\tthis.sideBlockRight.removeClass('d-block');\n\t\t\t\t\t\tthis.preview.show();\n\t\t\t\t\t}\n\t\t\t\t\tif (split.getSizes()[0] > 10 && split.getSizes()[1] > rightSplitMaxWidth) {\n\t\t\t\t\t\tapp.moduleCacheSet('gutterRelatedMidPosition', split.getSizes());\n\t\t\t\t\t}\n\t\t\t\t\tapp.moduleCacheSet('userRelatedSplitSet', split.getSizes());\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.gutter = container.find('.gutter');\n\t\t\tif (splitSizes[0] < 10) {\n\t\t\t\tthis.gutter.addClass('js-gutter-corr-left');\n\t\t\t\tthis.sideBlockLeft.addClass('d-block');\n\t\t\t\tthis.list.addClass('u-hide-underneath');\n\t\t\t} else if (splitSizes[1] < rightSplitMaxWidth) {\n\t\t\t\tthis.gutter.addClass('js-gutter-corr-right');\n\t\t\t\tthis.sideBlockRight.addClass('d-block');\n\t\t\t\tthis.preview.hide();\n\t\t\t}\n\t\t\tvar mainWindowHeightCss = { height: $(window).height() - this.list.offset().top - this.footerH };\n\t\t\tif (!container.closest('.mainBody').length) {\n\t\t\t\tlet mainBody = $(top.document)\n\t\t\t\t\t.find('.mainBody')\n\t\t\t\t\t.height();\n\t\t\t\tlet iframe = $(top.document).find('.js-detail-preview');\n\t\t\t\tmainWindowHeightCss = { height: mainBody - this.list.offset().top - iframe.offset().top + 50 };\n\t\t\t}\n\t\t\tif (!this.list.parents('.blockContent').length) {\n\t\t\t\tthis.gutter.css(mainWindowHeightCss);\n\t\t\t\tthis.list.css(mainWindowHeightCss);\n\t\t\t\tthis.sideBlocks.css(mainWindowHeightCss);\n\t\t\t\tthis.rotatedText.css({\n\t\t\t\t\twidth: this.sideBlockLeft.height(),\n\t\t\t\t\theight: this.sideBlockLeft.height()\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis.registerSplitEvents(container, split);\n\t\t\treturn split;\n\t\t},\n\t\ttoggleSplit: function(container) {\n\t\t\tvar commactHeight = container.closest('.commonActionsContainer').height();\n\t\t\tvar splitsArray = [];\n\t\t\tthis.split = this.registerSplit(container);\n\t\t\tsplitsArray.push(this.split);\n\t\t\t$(window).on('resize', () => {\n\t\t\t\tif ($(window).width() < 993) {\n\t\t\t\t\tif (container.find('.gutter').length) {\n\t\t\t\t\t\tsplitsArray[splitsArray.length - 1].destroy();\n\t\t\t\t\t\tthis.sideBlockRight.removeClass('d-block');\n\t\t\t\t\t\tthis.sideBlockLeft.removeClass('d-block');\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (container.find('.gutter').length !== 1) {\n\t\t\t\t\t\tthis.split = this.registerSplit(container);\n\t\t\t\t\t\tvar gutter = container.find('.gutter');\n\t\t\t\t\t\tif (this.mainBody.scrollTop() >= this.list.offset().top + commactHeight) {\n\t\t\t\t\t\t\tgutter.addClass('gutterOnScroll');\n\t\t\t\t\t\t\tgutter.css('left', this.preview.offset().left - 8);\n\t\t\t\t\t\t\tgutter.on('mousedown', function() {\n\t\t\t\t\t\t\t\t$(this).on('mousemove', function(e) {\n\t\t\t\t\t\t\t\t\t$(this).css('left', this.preview.offset().left - 8);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsplitsArray.push(this.split);\n\t\t\t\t\t}\n\t\t\t\t\tvar currentSplit = splitsArray[splitsArray.length - 1];\n\t\t\t\t\tvar minWidth = (15 / $(window).width()) * 100;\n\t\t\t\t\tvar maxWidth = 100 - minWidth;\n\t\t\t\t\tif (typeof currentSplit === 'undefined') return;\n\t\t\t\t\tif (currentSplit.getSizes()[0] < minWidth + 5) {\n\t\t\t\t\t\tcurrentSplit.setSizes([minWidth, maxWidth]);\n\t\t\t\t\t} else if (currentSplit.getSizes()[1] < minWidth + 5) {\n\t\t\t\t\t\tcurrentSplit.setSizes([maxWidth, minWidth]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterListScroll: function() {\n\t\t\tlet container = $('.listViewEntriesDiv');\n\t\t\tif (this.relatedView !== 'ListPreview' && Quasar.plugins.Platform.is.desktop) {\n\t\t\t\tcontainer.each((index, element) => {\n\t\t\t\t\tif (container.closest('.js-detail-widget-content').length) {\n\t\t\t\t\t\telement = container.closest('.js-detail-widget-content');\n\t\t\t\t\t\telement.each((i, el) => {\n\t\t\t\t\t\t\tApp.Components.Scrollbar.xy($(el));\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tApp.Components.Scrollbar.xy($(element));\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tgetRecordsCount: function() {\n\t\t\tlet aDeferred = $.Deferred(),\n\t\t\t\trecordCountVal = $('#recordsCount').val();\n\t\t\tif (recordCountVal != '') {\n\t\t\t\taDeferred.resolve(recordCountVal);\n\t\t\t} else {\n\t\t\t\tlet params = this.getCompleteParams();\n\t\t\t\tdelete params.view;\n\t\t\t\tparams.action = 'DetailAjax';\n\t\t\t\tparams.mode = 'getRecordsCount';\n\t\t\t\tAppConnector.request(params).done(function(data) {\n\t\t\t\t\t$('#recordsCount').val(data['result']['count']);\n\t\t\t\t\taDeferred.resolve(data['result']['count']);\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\tnoRecordSelectedAlert: function(text = 'JS_PLEASE_SELECT_ONE_RECORD') {\n\t\t\treturn Vtiger_Helper_Js.showPnotify({ text: app.vtranslate(text) });\n\t\t},\n\t\tgetCurrentCvId: function() {\n\t\t\treturn $('#customFilter')\n\t\t\t\t.find('option:selected')\n\t\t\t\t.data('id');\n\t\t},\n\t\tcheckListRecordSelected: function(minNumberOfRecords = 1) {\n\t\t\tlet selectedIds = this.readSelectedIds();\n\t\t\tif (typeof selectedIds === 'object' && selectedIds.length < minNumberOfRecords) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\treadSelectedIds: function(decode) {\n\t\t\tlet selectedIdsDataAttr = this.getCurrentCvId() + 'selectedIds',\n\t\t\t\tselectedIdsElementDataAttributes = $('#selectedIds').data(),\n\t\t\t\tselectedIds = [];\n\t\t\tif (!(selectedIdsDataAttr in selectedIdsElementDataAttributes)) {\n\t\t\t\tthis.writeSelectedIds(selectedIds);\n\t\t\t} else {\n\t\t\t\tselectedIds = selectedIdsElementDataAttributes[selectedIdsDataAttr];\n\t\t\t}\n\t\t\tif (decode == true && typeof selectedIds == 'object') {\n\t\t\t\treturn JSON.stringify(selectedIds);\n\t\t\t}\n\t\t\treturn selectedIds;\n\t\t},\n\t\twriteSelectedIds: function(selectedIds) {\n\t\t\tif (!Array.isArray(selectedIds)) {\n\t\t\t\tselectedIds = [selectedIds];\n\t\t\t}\n\t\t\t$('#selectedIds').data(this.getCurrentCvId() + 'selectedIds', selectedIds);\n\t\t},\n\t\treadExcludedIds: function(decode) {\n\t\t\tlet excludedIdsDataAttr = this.getCurrentCvId() + 'Excludedids',\n\t\t\t\texcludedIdsElementDataAttributes = $('#excludedIds').data(),\n\t\t\t\texcludedIds = [];\n\t\t\tif (!(excludedIdsDataAttr in excludedIdsElementDataAttributes)) {\n\t\t\t\tthis.writeExcludedIds(excludedIds);\n\t\t\t} else {\n\t\t\t\texcludedIds = excludedIdsElementDataAttributes[excludedIdsDataAttr];\n\t\t\t}\n\t\t\tif (decode == true && typeof excludedIds == 'object') {\n\t\t\t\treturn JSON.stringify(excludedIds);\n\t\t\t}\n\t\t\treturn excludedIds;\n\t\t},\n\t\twriteExcludedIds: function(excludedIds) {\n\t\t\t$('#excludedIds').data(this.getCurrentCvId() + 'Excludedids', excludedIds);\n\t\t},\n\t\tcheckSelectAll: function() {\n\t\t\tlet state = true;\n\t\t\t$('.relatedListViewEntriesCheckBox').each(function(index, element) {\n\t\t\t\tif ($(element).is(':checked')) {\n\t\t\t\t\tstate = true;\n\t\t\t\t} else {\n\t\t\t\t\tstate = false;\n\t\t\t\t}\n\t\t\t});\n\t\t\t$('#relatedListViewEntriesMainCheckBox').prop('checked', state);\n\t\t\treturn state;\n\t\t},\n\t\tregisterCheckBoxClickEvent: function() {\n\t\t\tconst self = this;\n\t\t\tthis.getRelatedContainer().on('click', '.relatedListViewEntriesCheckBox', function(e) {\n\t\t\t\tlet selectedIds = self.readSelectedIds(),\n\t\t\t\t\texcludedIds = self.readExcludedIds(),\n\t\t\t\t\telem = $(e.currentTarget);\n\t\t\t\tif (elem.is(':checked')) {\n\t\t\t\t\telem.closest('tr').addClass('highlightBackgroundColor');\n\t\t\t\t\tif (selectedIds == 'all') {\n\t\t\t\t\t\texcludedIds.splice($.inArray(elem.val(), excludedIds), 1);\n\t\t\t\t\t} else if ($.inArray(elem.val(), selectedIds) == -1) {\n\t\t\t\t\t\tselectedIds.push(elem.val());\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\telem.closest('tr').removeClass('highlightBackgroundColor');\n\t\t\t\t\tif (selectedIds == 'all') {\n\t\t\t\t\t\texcludedIds.push(elem.val());\n\t\t\t\t\t\tselectedIds = 'all';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tselectedIds.splice($.inArray(elem.val(), selectedIds), 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tself.checkSelectAll();\n\t\t\t\tself.writeSelectedIds(selectedIds);\n\t\t\t\tself.writeExcludedIds(excludedIds);\n\t\t\t});\n\t\t},\n\t\tregisterMainCheckBoxClickEvent: function() {\n\t\t\tconst self = this;\n\t\t\tthis.getRelatedContainer().on('click', '#relatedListViewEntriesMainCheckBox', function() {\n\t\t\t\tlet selectedIds = self.readSelectedIds(),\n\t\t\t\t\texcludedIds = self.readExcludedIds();\n\t\t\t\tif ($('#relatedListViewEntriesMainCheckBox').is(':checked')) {\n\t\t\t\t\tlet recordCountObj = self.getRecordsCount();\n\t\t\t\t\trecordCountObj.done(function(data) {\n\t\t\t\t\t\t$('#totalRecordsCount').text(data);\n\t\t\t\t\t\tif ($('#deSelectAllMsgDiv').css('display') == 'none') {\n\t\t\t\t\t\t\t$('#selectAllMsgDiv').show();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t$('.relatedListViewEntriesCheckBox').each(function(index, element) {\n\t\t\t\t\t\t$(this)\n\t\t\t\t\t\t\t.prop('checked', true)\n\t\t\t\t\t\t\t.closest('tr')\n\t\t\t\t\t\t\t.addClass('highlightBackgroundColor');\n\t\t\t\t\t\tif (selectedIds == 'all' && $.inArray($(element).val(), excludedIds) != -1) {\n\t\t\t\t\t\t\texcludedIds.splice($.inArray($(element).val(), excludedIds), 1);\n\t\t\t\t\t\t} else if ($.inArray($(element).val(), selectedIds) == -1) {\n\t\t\t\t\t\t\tselectedIds.push($(element).val());\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\t$('#selectAllMsgDiv').hide();\n\t\t\t\t\t$('.relatedListViewEntriesCheckBox').each(function(index, element) {\n\t\t\t\t\t\t$(this)\n\t\t\t\t\t\t\t.prop('checked', false)\n\t\t\t\t\t\t\t.closest('tr')\n\t\t\t\t\t\t\t.removeClass('highlightBackgroundColor');\n\t\t\t\t\t\tif (selectedIds == 'all') {\n\t\t\t\t\t\t\texcludedIds.push($(element).val());\n\t\t\t\t\t\t\tselectedIds = 'all';\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tselectedIds.splice($.inArray($(element).val(), selectedIds), 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tself.writeSelectedIds(selectedIds);\n\t\t\t\tself.writeExcludedIds(excludedIds);\n\t\t\t});\n\t\t},\n\t\tregisterSelectAllClickEvent: function() {\n\t\t\tconst self = this;\n\t\t\tself.getRelatedContainer().on('click', '#selectAllMsg', function() {\n\t\t\t\t$('#selectAllMsgDiv').hide();\n\t\t\t\t$('#deSelectAllMsgDiv').show();\n\t\t\t\t$('#relatedListViewEntriesMainCheckBox').prop('checked', true);\n\t\t\t\t$('.relatedListViewEntriesCheckBox').each(function(index, element) {\n\t\t\t\t\t$(this)\n\t\t\t\t\t\t.prop('checked', true)\n\t\t\t\t\t\t.closest('tr')\n\t\t\t\t\t\t.addClass('highlightBackgroundColor');\n\t\t\t\t});\n\t\t\t\tself.writeSelectedIds('all');\n\t\t\t});\n\t\t},\n\t\tregisterDeselectAllClickEvent: function() {\n\t\t\tconst self = this;\n\t\t\tself.getRelatedContainer().on('click', '#deSelectAllMsg', function() {\n\t\t\t\t$('#deSelectAllMsgDiv').hide();\n\t\t\t\t$('#relatedListViewEntriesMainCheckBox').prop('checked', false);\n\t\t\t\t$('.relatedListViewEntriesCheckBox').each(function(index, element) {\n\t\t\t\t\t$(this)\n\t\t\t\t\t\t.prop('checked', false)\n\t\t\t\t\t\t.closest('tr')\n\t\t\t\t\t\t.removeClass('highlightBackgroundColor');\n\t\t\t\t});\n\t\t\t\tself.writeSelectedIds([]);\n\t\t\t\tself.writeExcludedIds([]);\n\t\t\t});\n\t\t},\n\t\tregisterRelatedEvents: function() {\n\t\t\tthis.registerUnreviewedCountEvent();\n\t\t\tthis.registerChangeEntityStateEvent();\n\t\t\tthis.registerPaginationEvents();\n\t\t\tthis.registerListEvents();\n\t\t\tthis.registerPostLoadEvents();\n\t\t\tthis.registerSummationEvent();\n\t\t\tthis.registerCheckBoxClickEvent();\n\t\t\tthis.registerMainCheckBoxClickEvent();\n\t\t\tthis.registerSelectAllClickEvent();\n\t\t\tthis.registerDeselectAllClickEvent();\n\t\t\tYetiForce_ListSearch_Js.registerSearch(this.content, data => {\n\t\t\t\tthis.loadRelatedList(data);\n\t\t\t});\n\t\t}\n\t}\n);\n"],"names":["jQuery","Class","parentId","parentModule","selectedRelatedTabElement","relatedModuleName","Vtiger_RelatedList_Js","relatedListInstance","moduleName","moduleClassName","app","getModuleName","fallbackClassName","instance","window","parentRecordId","parentModuleName","relatedTabsContainer","closest","content","$","relatedView","find","val","massActionUrl","type","self","validationResult","checkListRecordSelected","progressIndicatorElement","progressIndicator","selectedIds","readSelectedIds","excludedIds","readExcludedIds","cvId","getCurrentCvId","postData","getCompleteParams","mode","view","viewname","selected_ids","excluded_ids","actionParams","openUrlMethodPost","request","done","responseData","result","notify","showMessage","reloadList","reloadRelatedList","procesStop","fail","error","err","noRecordSelectedAlert","aDeferred","Deferred","message","showPnotify","text","resolve","promise","thisInstance","verifyFileExist","data","triggerMassAction","substring","indexOf","tabElement","container","detailViewContentHolder","pageNumber","getRelatedContainer","params","getOrderBy","getCurrentPageNum","length","listSearchInstance","searchValue","getAlphabetSearchValue","search_params","JSON","stringify","getListSearchParams","getAlphabetSearchField","switchBtn","time","first","prop","getParentId","extend","getDefaultParams","currentInstance","Vtiger_Detail_Js","getInstance","loadWidgets","progressInstance","completeParams","activeTabsReference","removeClass","addClass","html","tooltip","registerPostLoadEvents","registerListEvents","textStatus","errorThrown","reject","vtranslate","widthType","cacheGet","elements","attr","extendParams","getRecordsListParams","showRecordsList","modal","setSelectEvent","addRelations","Object","keys","event","trigger","detail","loadRelatedList","registerRelatedModulesRecordCount","getSelectedTabElement","idList","isArray","target","id","position","blockInfo","enabled","response","widget","loadWidget","updatesWidget","getContentHolder","errThrow","pageLimit","noOfEntries","nextPage","parseInt","setCurrentPageNumber","previousPage","e","which","element","currentTarget","Vtiger_WholeNumberGreaterThanZero_Validator_Js","invokeValidation","validationEngine","preventDefault","jumpToPage","totalPages","invalidFields","parent","currentPage","callback","referenceModuleName","quickCreateParams","relatedParams","relatedField","fullFormUrl","eliminatedKeys","Array","preQuickCreateSave","index","queryParam","queryParamComponents","queryParameters","urlSplit","split","queryString","appendTo","field","inArray","postQuickCreateSave","quickCreateModule","totalCountElem","totalPageNumber","pageCount","numberOfRecords","relcrmId","state","url","frame","frameProgress","defaultView","getMainParams","replace","ids","relatedContent","isUnreviewedActive","each","push","appData","value","a","m","on","page","is","getViewName","document","location","href","row","inventoryRow","next","hasClass","toggleClass","contains","get","recordUrl","updatePreview","button","calculateValue","progress","hidePopover","success","contentHeight","height","getScreenHeight","offset","top","contents","nextPageHandler","previousPageHandler","getRelatedPageCount","stopImmediatePropagation","pageJumpHandler","selectPageHandler","favoritesRelation","openUrl","addRelatedRecord","restrictionsField","key","name","showSelectRelation","title","showConfirmationBox","deleteRelation","registerRowsEvent","registerListScroll","registerPreviewEvent","setDomParams","toggleSplit","registerListPreviewEvents","YetiForce_ListSearch_Js","maxWidth","thisWidth","i","width","listColumnFirstWidth","listColumnSecondWidth","getSecondColMinWidth","windowW","mainBody","windowMinWidth","windowMaxWidth","minWidth","sideBlocks","sideBlockLeft","sideBlockRight","last","list","preview","rotatedText","footerH","outerHeight","headerH","thWidth","cachedParams","moduleCacheGet","undefined","getDefaultSplitSizes","showNewScrollbarTopBottom","showNewScrollbarLeft","getSizes","defaultGutterPosition","setSizes","show","moduleCacheSet","parents","registerScrollEvent","gutter","scrollContainer","App","Components","Scrollbar","listOffsetTop","initialH","mainViewPortHeightCss","mainViewPortWidthCss","fixedElements","iframe","onScroll","scrollTop","css","rightSplitMaxWidth","minWindowWidth","maxWindowWidth","listPreview","gutterRelatedMidPosition","isNaN","hide","splitSizes","getSplitSizes","Split","collapse","mainWindowHeightCss","registerSplitEvents","commactHeight","splitsArray","registerSplit","destroy","left","currentSplit","Quasar","plugins","Platform","desktop","el","xy","recordCountVal","action","Vtiger_Helper_Js","minNumberOfRecords","decode","selectedIdsDataAttr","selectedIdsElementDataAttributes","writeSelectedIds","excludedIdsDataAttr","excludedIdsElementDataAttributes","writeExcludedIds","elem","splice","checkSelectAll","recordCountObj","getRecordsCount","registerUnreviewedCountEvent","registerChangeEntityStateEvent","registerPaginationEvents","registerSummationEvent","registerCheckBoxClickEvent","registerMainCheckBoxClickEvent","registerSelectAllClickEvent","registerDeselectAllClickEvent","registerSearch"],"mappings":"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"}