{"version":3,"file":"DashBoard.min.js","sources":["DashBoard.js"],"sourcesContent":["/*+**********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.1\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n * Contributor(s): YetiForce.com\n ************************************************************************************/\n'use strict';\n\n$.Class(\n\t'Vtiger_DashBoard_Js',\n\t{\n\t\tgrid: false,\n\t\t//static property which will store the instance of dashboard\n\t\tcurrentInstance: false,\n\t\tscrollContainer: false,\n\t\trestrictContentDrag: function(container) {\n\t\t\tcontainer.on('mousedown.draggable', function(e) {\n\t\t\t\tvar element = $(e.target);\n\t\t\t\tvar isHeaderElement = element.closest('.dashboardWidgetHeader').length > 0 ? true : false;\n\t\t\t\tif (isHeaderElement) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t//Stop the event propagation so that drag will not start for contents\n\t\t\t\te.stopPropagation();\n\t\t\t});\n\t\t}\n\t},\n\t{\n\t\tcontainer: false,\n\t\tnoCache: false,\n\t\tinstancesCache: {},\n\t\tinit: function() {\n\t\t\tVtiger_DashBoard_Js.currentInstance = this;\n\t\t},\n\t\tgetContainer: function() {\n\t\t\tif (this.noCache == true || this.container == false) {\n\t\t\t\tthis.container = $('.grid-stack');\n\t\t\t}\n\t\t\treturn this.container;\n\t\t},\n\t\tgetCurrentDashboard: function() {\n\t\t\tlet dashboardId = $('.selectDashboard li a.active').closest('li').data('id');\n\t\t\tif(!dashboardId){\n\t\t\t\tdashboardId = 1;\n\t\t\t}\n\t\t\treturn dashboardId;\n\t\t},\n\t\tgetWidgetInstance: function(widgetContainer) {\n\t\t\tvar id = widgetContainer.attr('id');\n\t\t\tif (this.noCache || !(id in this.instancesCache)) {\n\t\t\t\tvar widgetName = widgetContainer.data('name');\n\t\t\t\tthis.instancesCache[id] = Vtiger_Widget_Js.getInstance(widgetContainer, widgetName);\n\t\t\t}\n\t\t\treturn this.instancesCache[id];\n\t\t},\n\t\tregisterGrid: function() {\n\t\t\tconst thisInstance = this;\n\t\t\tVtiger_DashBoard_Js.grid = this.getContainer()\n\t\t\t\t.gridstack({\n\t\t\t\t\tverticalMargin: '0.5rem',\n\t\t\t\t\talwaysShowResizeHandle: /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(\n\t\t\t\t\t\tnavigator.userAgent\n\t\t\t\t\t)\n\t\t\t\t})\n\t\t\t\t.data('gridstack');\n\t\t\t$('.grid-stack').on('change', function(event, ui) {\n\t\t\t\tthisInstance.savePositions($('.grid-stack-item'));\n\t\t\t});\n\t\t\t// load widgets after grid initialization to prevent too early lazy loading - visible viewport changes\n\t\t\tthis.loadWidgets();\n\t\t\t// recalculate positions with scrollbars\n\t\t\tif (\n\t\t\t\tthis.getContainer().width() !==\n\t\t\t\tthis.getContainer()\n\t\t\t\t\t.parent()\n\t\t\t\t\t.width()\n\t\t\t) {\n\t\t\t\tconst parentWidth = thisInstance\n\t\t\t\t\t.getContainer()\n\t\t\t\t\t.parent()\n\t\t\t\t\t.width();\n\t\t\t\tthis.getContainer().css('width', parentWidth + 'px');\n\t\t\t}\n\t\t},\n\t\tsavePositions: function(widgets) {\n\t\t\tvar widgetRowColPositions = {},\n\t\t\t\twidgetSizes = {};\n\t\t\tfor (var index = 0, len = widgets.length; index < len; ++index) {\n\t\t\t\tvar widget = $(widgets[index]);\n\t\t\t\twidgetRowColPositions[widget.find('.grid-stack-item-content').attr('id')] = JSON.stringify({\n\t\t\t\t\trow: widget.attr('data-gs-y'),\n\t\t\t\t\tcol: widget.attr('data-gs-x')\n\t\t\t\t});\n\t\t\t\twidgetSizes[widget.find('.grid-stack-item-content').attr('id')] = JSON.stringify({\n\t\t\t\t\twidth: widget.attr('data-gs-width'),\n\t\t\t\t\theight: widget.attr('data-gs-height')\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis.updateLazyWidget();\n\t\t\tAppConnector.request({\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\taction: 'SaveWidgetPositions',\n\t\t\t\tposition: widgetRowColPositions,\n\t\t\t\tsize: widgetSizes\n\t\t\t});\n\t\t},\n\t\tupdateLazyWidget() {\n\t\t\tconst scrollTop = this.scrollContainer.scrollTop();\n\t\t\tthis.scrollContainer.scrollTop(scrollTop + 1).scrollTop(scrollTop);\n\t\t},\n\t\tloadWidgets: function() {\n\t\t\tconst thisInstance = this;\n\t\t\tthis.scrollContainer = App.Components.Scrollbar.page.element;\n\t\t\tif (!Quasar.plugins.Platform.is.desktop) {\n\t\t\t\tthis.scrollContainer = $('.bodyContent');\n\t\t\t\tapp.showNewScrollbar(this.scrollContainer);\n\t\t\t}\n\t\t\tthisInstance\n\t\t\t\t.getContainer()\n\t\t\t\t.find('.dashboardWidget')\n\t\t\t\t.Lazy({\n\t\t\t\t\tthreshold: 0,\n\t\t\t\t\tappendScroll: this.scrollContainer,\n\t\t\t\t\twidgetLoader(element) {\n\t\t\t\t\t\tthisInstance.loadWidget(element);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\tthis.updateLazyWidget(this.scrollContainer);\n\t\t},\n\t\tloadWidget: function(widgetContainer) {\n\t\t\tconst self = this;\n\t\t\tlet urlParams = widgetContainer.data('url');\n\t\t\tlet mode = widgetContainer.data('mode');\n\t\t\tlet moduleName = app.getModuleName();\n\t\t\tlet sourceModule = $('a.active', 'ul.selectDashboradView')\n\t\t\t\t.parent()\n\t\t\t\t.data('module');\n\t\t\twidgetContainer.progressIndicator();\n\t\t\tif (mode === 'open') {\n\t\t\t\tlet name = widgetContainer.data('name');\n\t\t\t\tlet cache = widgetContainer.data('cache');\n\t\t\t\tlet userId = CONFIG.userId;\n\t\t\t\tif (cache === 1) {\n\t\t\t\t\tlet cecheUrl = app.cacheGet(name + userId, false);\n\t\t\t\t\turlParams = cecheUrl ? cecheUrl : urlParams;\n\t\t\t\t}\n\t\t\t\tAppConnector.request(urlParams).done(data => {\n\t\t\t\t\twidgetContainer.html(data);\n\t\t\t\t\twidgetContainer.closest('.grid-stack').on('gsresizestop', (event, elem) => {\n\t\t\t\t\t\tself.adjustHeightWidget(widgetContainer);\n\t\t\t\t\t});\n\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(widgetContainer.find('.select2'));\n\t\t\t\t\tself.getWidgetInstance(widgetContainer);\n\t\t\t\t\twidgetContainer.trigger(Vtiger_Widget_Js.widgetPostLoadEvent);\n\t\t\t\t\tself.adjustHeightWidget(widgetContainer);\n\t\t\t\t\tif (sourceModule && moduleName != sourceModule) {\n\t\t\t\t\t\t$('a.js-widget-remove', widgetContainer).remove();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Adjust the height of the widget.\n\t\t * @param {jQuery} widgetContainer\n\t\t */\n\t\tadjustHeightWidget(widgetContainer) {\n\t\t\tconst headerHeight = widgetContainer.find('.dashboardWidgetHeader').outerHeight();\n\t\t\tlet adjustedHeight = widgetContainer.height() - headerHeight;\n\t\t\tif (widgetContainer.find('.dashboardWidgetFooter').length) {\n\t\t\t\tadjustedHeight -= widgetContainer.find('.dashboardWidgetFooter').outerHeight();\n\t\t\t}\n\t\t\tconst widgetContent = widgetContainer.find('.dashboardWidgetContent');\n\t\t\twidgetContent.css('max-height', adjustedHeight + 'px');\n\t\t\tapp.showNewScrollbar(widgetContent, { wheelPropagation: true });\n\t\t},\n\t\tregisterRefreshWidget: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tthis.getContainer().on('click', 'a[name=\"drefresh\"]', function(e) {\n\t\t\t\tvar element = $(e.currentTarget);\n\t\t\t\tvar parent = element.closest('.dashboardWidget');\n\t\t\t\tvar widgetInstnace = thisInstance.getWidgetInstance(parent);\n\t\t\t\twidgetInstnace.refreshWidget();\n\t\t\t\treturn;\n\t\t\t});\n\t\t},\n\t\tremoveWidget: function() {\n\t\t\tconst thisInstance = this;\n\t\t\tthis.getContainer().on('click', '.js-widget-remove', function(e) {\n\t\t\t\tlet element = $(e.currentTarget),\n\t\t\t\t\tlistItem = $(element).parents('.grid-stack-item'),\n\t\t\t\t\twidth = listItem.attr('data-gs-width'),\n\t\t\t\t\theight = listItem.attr('data-gs-height'),\n\t\t\t\t\turl = element.data('url'),\n\t\t\t\t\tparent = element.closest('.dashboardWidgetHeader').parent(),\n\t\t\t\t\twidgetName = parent.data('name'),\n\t\t\t\t\twidgetTitle = parent.find('.dashboardTitle').attr('title'),\n\t\t\t\t\tmessage =\n\t\t\t\t\t\tapp.vtranslate('JS_ARE_YOU_SURE_TO_DELETE_WIDGET') +\n\t\t\t\t\t\t' [' +\n\t\t\t\t\t\twidgetTitle +\n\t\t\t\t\t\t']. ' +\n\t\t\t\t\t\tapp.vtranslate('JS_ARE_YOU_SURE_TO_DELETE_WIDGET_INFO');\n\t\t\t\tVtiger_Helper_Js.showConfirmationBox({ message: message })\n\t\t\t\t\t.done(function(e) {\n\t\t\t\t\t\tAppConnector.request(url).done(function(response) {\n\t\t\t\t\t\t\tif (response.success) {\n\t\t\t\t\t\t\t\tlet nonReversableWidgets = [];\n\t\t\t\t\t\t\t\tparent.fadeOut('slow', function() {\n\t\t\t\t\t\t\t\t\tparent.remove();\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tif ($.inArray(widgetName, nonReversableWidgets) == -1) {\n\t\t\t\t\t\t\t\t\tVtiger_DashBoard_Js.grid.removeWidget(element.closest('.grid-stack-item'));\n\t\t\t\t\t\t\t\t\t$('.js-widget-list')\n\t\t\t\t\t\t\t\t\t\t.prev('.js-widget-predefined')\n\t\t\t\t\t\t\t\t\t\t.removeClass('d-none');\n\t\t\t\t\t\t\t\t\tlet data = `<a class=\"js-widget-list__item dropdown-item d-flex\"\n\t\t\t\t\t\t\t\t\t\thref=\"#\"\n\t\t\t\t\t\t\t\t\t\tdata-widget-url=\"${response.result.url}\"\n\t\t\t\t\t\t\t\t\t\tdata-linkid=\"${response.result.linkid}\"\n\t\t\t\t\t\t\t\t\t\tdata-name=\"${response.result.name}\"\n\t\t\t\t\t\t\t\t\t\tdata-width=\"${width}\"\n\t\t\t\t\t\t\t\t\t\tdata-height=\"${height}\" data-js=\"remove | click\">${response.result.title}`;\n\t\t\t\t\t\t\t\t\tif (response.result.deleteFromList) {\n\t\t\t\t\t\t\t\t\t\tdata += `<span class=\"text-danger pl-5 ml-auto\">\n\t\t\t\t\t\t\t\t\t\t\t<span class=\"fas fa-trash-alt removeWidgetFromList u-hover-opacity\" data-widget-id=\"${response.result.id}\" data-js=\"click\"></span>\n\t\t\t\t\t\t\t\t\t\t</span>`;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tdata += `</a>`;\n\t\t\t\t\t\t\t\t\tlet divider = $('.js-widget-list .dropdown-divider');\n\t\t\t\t\t\t\t\t\tif (divider.length) {\n\t\t\t\t\t\t\t\t\t\t$(data).insertBefore(divider);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t$('.js-widget-list').append(data);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tthisInstance.updateLazyWidget();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function(error, err) {});\n\t\t\t});\n\t\t},\n\t\tregisterSelectDashboard: function() {\n\t\t\tvar thisInstance = this;\n\t\t\t$('.selectDashboard li').on('click', function(e) {\n\t\t\t\tvar progressIndicatorElement = $.progressIndicator({\n\t\t\t\t\tposition: 'html',\n\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\tenabled: true\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tvar dashboardId = currentTarget.data('id');\n\t\t\t\tvar params = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tview: app.getViewName(),\n\t\t\t\t\tdashboardId: dashboardId\n\t\t\t\t};\n\t\t\t\tAppConnector.request(params).done(function(data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t$('.dashboardViewContainer').html(data);\n\t\t\t\t\tthisInstance.noCache = true;\n\t\t\t\t\tthisInstance.registerEvents();\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterDatePickerHideInitiater: function() {\n\t\t\tvar container = this.getContainer();\n\t\t\tcontainer.on('click', 'input.dateRange', function(e) {\n\t\t\t\tvar widgetContainer = $(e.currentTarget).closest('.dashboardWidget');\n\t\t\t\tvar dashboardWidgetHeader = $('.dashboardWidgetHeader', widgetContainer);\n\n\t\t\t\tvar callbackFunction = function() {\n\t\t\t\t\tvar date = $('.dateRange');\n\t\t\t\t\tdate.DatePickerHide();\n\t\t\t\t\tdate.blur();\n\t\t\t\t};\n\t\t\t\t//adding clickoutside event on the dashboardWidgetHeader\n\t\t\t\tVtiger_Helper_Js.addClickOutSideEvent(dashboardWidgetHeader.find('.dateRange'), callbackFunction);\n\t\t\t\treturn false;\n\t\t\t});\n\t\t},\n\t\tregisterShowMailBody: function() {\n\t\t\tvar container = this.getContainer();\n\t\t\tcontainer.on('click', '.showMailBody', function(e) {\n\t\t\t\tvar widgetContainer = $(e.currentTarget).closest('.mailRow');\n\t\t\t\tvar mailBody = widgetContainer.find('.mailBody');\n\t\t\t\tvar bodyIcon = $(e.currentTarget).find('.body-icon');\n\t\t\t\tif (mailBody.css('display') == 'none') {\n\t\t\t\t\tmailBody.show();\n\t\t\t\t\tbodyIcon.removeClass('fa-chevron-down').addClass('fa-chevron-up');\n\t\t\t\t} else {\n\t\t\t\t\tmailBody.hide();\n\t\t\t\t\tbodyIcon.removeClass('fa-chevron-up').addClass('fa-chevron-down');\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterChangeMailUser: function() {\n\t\t\tvar container = this.getContainer();\n\n\t\t\tcontainer.on('change', '#mailUserList', function(e) {\n\t\t\t\tvar element = $(e.currentTarget);\n\t\t\t\tvar parent = element.closest('.dashboardWidget');\n\t\t\t\tvar contentContainer = parent.find('.dashboardWidgetContent');\n\t\t\t\tvar optionSelected = $('option:selected', this);\n\t\t\t\tvar url = parent.data('url') + '&user=' + optionSelected.val();\n\n\t\t\t\tvar params = {};\n\t\t\t\tparams.url = url;\n\t\t\t\tparams.data = {};\n\t\t\t\tcontentContainer.progressIndicator({});\n\t\t\t\tAppConnector.request(params)\n\t\t\t\t\t.done(function(data) {\n\t\t\t\t\t\tcontentContainer.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tparent.html(data).trigger(Vtiger_Widget_Js.widgetPostRefereshEvent);\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function() {\n\t\t\t\t\t\tcontentContainer.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterChartFilterWidget: function() {\n\t\t\tvar thisInstance = this;\n\t\t\t$('.dashboardHeading')\n\t\t\t\t.off('click', '.addChartFilter')\n\t\t\t\t.on('click', '.addChartFilter', function(e) {\n\t\t\t\t\tvar element = $(e.currentTarget);\n\t\t\t\t\tapp.showModalWindow(null, 'index.php?module=Home&view=ChartFilter&step=step1', function(\n\t\t\t\t\t\twizardContainer\n\t\t\t\t\t) {\n\t\t\t\t\t\tvar form = $('form', wizardContainer);\n\t\t\t\t\t\tform.on('keypress', function(event) {\n\t\t\t\t\t\t\treturn event.keyCode != 13;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tvar sectorContainer = form.find('.sectorContainer');\n\t\t\t\t\t\tvar chartType = $('select[name=\"chartType\"]', wizardContainer);\n\t\t\t\t\t\tvar moduleNameSelectDOM = $('select[name=\"module\"]', wizardContainer);\n\t\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(sectorContainer.find('.select2'));\n\t\t\t\t\t\tvar moduleNameSelect2 = App.Fields.Picklist.showSelect2ElementView(moduleNameSelectDOM, {\n\t\t\t\t\t\t\tplaceholder: app.vtranslate('JS_SELECT_MODULE')\n\t\t\t\t\t\t});\n\t\t\t\t\t\tvar step1 = $('.step1', wizardContainer);\n\t\t\t\t\t\tvar step2 = $('.step2', wizardContainer);\n\t\t\t\t\t\tvar step3 = $('.step3', wizardContainer);\n\t\t\t\t\t\tvar footer = $('.modal-footer', wizardContainer);\n\t\t\t\t\t\tstep2.remove();\n\t\t\t\t\t\tstep3.remove();\n\t\t\t\t\t\tfooter.hide();\n\t\t\t\t\t\tchartType.on('change', function(e) {\n\t\t\t\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\t\t\t\tvar value = currentTarget.val();\n\t\t\t\t\t\t\tif (value == 'Barchat' || value == 'Horizontal') {\n\t\t\t\t\t\t\t\tform.find('.isColorContainer').removeClass('d-none');\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tform.find('.isColorContainer').addClass('d-none');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (wizardContainer.find('#widgetStep').val() == 4) {\n\t\t\t\t\t\t\t\twizardContainer.find('.step3 .groupField').trigger('change');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tmoduleNameSelect2.on('change', function() {\n\t\t\t\t\t\t\tif (!moduleNameSelect2.val()) return;\n\t\t\t\t\t\t\tfooter.hide();\n\t\t\t\t\t\t\twizardContainer.find('.step2').remove();\n\t\t\t\t\t\t\twizardContainer.find('.step3').remove();\n\t\t\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\t\t\tmodule: 'Home',\n\t\t\t\t\t\t\t\tview: 'ChartFilter',\n\t\t\t\t\t\t\t\tstep: 'step2',\n\t\t\t\t\t\t\t\tchartType: chartType.val(),\n\t\t\t\t\t\t\t\tselectedModule: moduleNameSelect2.val()\n\t\t\t\t\t\t\t}).done(function(step2Response) {\n\t\t\t\t\t\t\t\tstep1.after(step2Response);\n\t\t\t\t\t\t\t\twizardContainer.find('#widgetStep').val(2);\n\t\t\t\t\t\t\t\tconst step2 = wizardContainer.find('.step2');\n\t\t\t\t\t\t\t\tfooter.hide();\n\t\t\t\t\t\t\t\tconst filtersIdElement = step2.find('.filtersId');\n\t\t\t\t\t\t\t\tconst valueTypeElement = step2.find('.valueType');\n\t\t\t\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(filtersIdElement);\n\t\t\t\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(valueTypeElement);\n\t\t\t\t\t\t\t\tstep2.find('.filtersId, .valueType').on('change', function() {\n\t\t\t\t\t\t\t\t\twizardContainer.find('.step3').remove();\n\t\t\t\t\t\t\t\t\twizardContainer.find('.step4').remove();\n\t\t\t\t\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\t\t\t\t\tmodule: 'Home',\n\t\t\t\t\t\t\t\t\t\tview: 'ChartFilter',\n\t\t\t\t\t\t\t\t\t\tstep: 'step3',\n\t\t\t\t\t\t\t\t\t\tselectedModule: moduleNameSelect2.val(),\n\t\t\t\t\t\t\t\t\t\tchartType: chartType.val(),\n\t\t\t\t\t\t\t\t\t\tfiltersId: filtersIdElement.val(),\n\t\t\t\t\t\t\t\t\t\tvalueType: valueTypeElement.val()\n\t\t\t\t\t\t\t\t\t}).done(function(step3Response) {\n\t\t\t\t\t\t\t\t\t\tstep2.last().after(step3Response);\n\t\t\t\t\t\t\t\t\t\twizardContainer.find('#widgetStep').val(3);\n\t\t\t\t\t\t\t\t\t\tvar step3 = wizardContainer.find('.step3');\n\t\t\t\t\t\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(step3.find('select'));\n\t\t\t\t\t\t\t\t\t\tfooter.hide();\n\t\t\t\t\t\t\t\t\t\tstep3.find('.groupField').on('change', function() {\n\t\t\t\t\t\t\t\t\t\t\twizardContainer.find('.step4').remove();\n\t\t\t\t\t\t\t\t\t\t\tvar groupField = $(this);\n\t\t\t\t\t\t\t\t\t\t\tif (!groupField.val()) return;\n\t\t\t\t\t\t\t\t\t\t\tfooter.show();\n\t\t\t\t\t\t\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\t\t\t\t\t\t\tmodule: 'Home',\n\t\t\t\t\t\t\t\t\t\t\t\tview: 'ChartFilter',\n\t\t\t\t\t\t\t\t\t\t\t\tstep: 'step4',\n\t\t\t\t\t\t\t\t\t\t\t\tselectedModule: moduleNameSelect2.val(),\n\t\t\t\t\t\t\t\t\t\t\t\tfiltersId: filtersIdElement.val(),\n\t\t\t\t\t\t\t\t\t\t\t\tgroupField: groupField.val(),\n\t\t\t\t\t\t\t\t\t\t\t\tchartType: chartType.val()\n\t\t\t\t\t\t\t\t\t\t\t}).done(function(step4Response) {\n\t\t\t\t\t\t\t\t\t\t\t\tstep3.last().after(step4Response);\n\t\t\t\t\t\t\t\t\t\t\t\twizardContainer.find('#widgetStep').val(4);\n\t\t\t\t\t\t\t\t\t\t\t\tvar step4 = wizardContainer.find('.step4');\n\t\t\t\t\t\t\t\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(step4.find('select'));\n\t\t\t\t\t\t\t\t\t\t\t\tapp.registerModalEvents(wizardContainer);\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t\tform.on('submit', function(e) {\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\tlet save = true;\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\tif (form.data('jqv').InvalidFields.length > 0) {\n\t\t\t\t\t\t\t\tapp.formAlignmentAfterValidation(form);\n\t\t\t\t\t\t\t\tsave = false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (save) {\n\t\t\t\t\t\t\t\tconst selectedModule = moduleNameSelect2.val();\n\t\t\t\t\t\t\t\tconst selectedModuleLabel = moduleNameSelect2.find(':selected').text();\n\t\t\t\t\t\t\t\tlet selectedFiltersId = form.find('.filtersId').val();\n\t\t\t\t\t\t\t\tif (Array.isArray(selectedFiltersId)) {\n\t\t\t\t\t\t\t\t\tselectedFiltersId = selectedFiltersId.join(',');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tconst selectedFieldLabel = form\n\t\t\t\t\t\t\t\t\t.find('.groupField')\n\t\t\t\t\t\t\t\t\t.find(':selected')\n\t\t\t\t\t\t\t\t\t.text();\n\t\t\t\t\t\t\t\tconst data = {\n\t\t\t\t\t\t\t\t\tmodule: selectedModule,\n\t\t\t\t\t\t\t\t\tgroupField: form.find('.groupField').val(),\n\t\t\t\t\t\t\t\t\tchartType: chartType.val()\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tform.find('.saveParam').each(function(index, element) {\n\t\t\t\t\t\t\t\t\telement = $(element);\n\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t!(\n\t\t\t\t\t\t\t\t\t\t\telement.is('input') &&\n\t\t\t\t\t\t\t\t\t\t\telement.prop('type') === 'checkbox' &&\n\t\t\t\t\t\t\t\t\t\t\t!element.prop('checked')\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\tdata[element.attr('name')] = element.val();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tthisInstance.saveChartFilterWidget(\n\t\t\t\t\t\t\t\t\tdata,\n\t\t\t\t\t\t\t\t\telement,\n\t\t\t\t\t\t\t\t\tselectedModuleLabel,\n\t\t\t\t\t\t\t\t\tselectedFiltersId,\n\t\t\t\t\t\t\t\t\t'',\n\t\t\t\t\t\t\t\t\tselectedFieldLabel,\n\t\t\t\t\t\t\t\t\tform\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t},\n\t\tsaveChartFilterWidget: function(data, element, moduleNameLabel, filtersId, filterLabel, groupFieldName, form) {\n\t\t\tconst thisInstance = this;\n\t\t\tlet label = moduleNameLabel;\n\t\t\tif (typeof filterLabel !== 'undefined' && filterLabel !== null && filterLabel !== '') {\n\t\t\t\tlabel += ' - ' + filterLabel;\n\t\t\t}\n\t\t\tif (typeof groupFieldName !== 'undefined' && groupFieldName !== null && groupFieldName !== '') {\n\t\t\t\tlabel += ' - ' + groupFieldName;\n\t\t\t}\n\t\t\tconst paramsForm = {\n\t\t\t\tdata: JSON.stringify(data),\n\t\t\t\tblockid: element.data('block-id'),\n\t\t\t\tlinkid: element.data('linkid'),\n\t\t\t\tlabel: label,\n\t\t\t\tname: 'ChartFilter',\n\t\t\t\ttitle: form.find('[name=\"widgetTitle\"]').val(),\n\t\t\t\tfilterid: filtersId,\n\t\t\t\tisdefault: 0,\n\t\t\t\theight: 4,\n\t\t\t\twidth: 4,\n\t\t\t\towners_all: ['mine', 'all', 'users', 'groups'],\n\t\t\t\tdefault_owner: 'mine',\n\t\t\t\tdashboardId: thisInstance.getCurrentDashboard()\n\t\t\t};\n\t\t\tconst sourceModule = $('[name=\"selectedModuleName\"]').val();\n\t\t\tthisInstance.saveWidget(paramsForm, 'add', sourceModule, paramsForm.linkid).done(function(data) {\n\t\t\t\tlet result = data['result'],\n\t\t\t\t\tparams = {};\n\t\t\t\tif (data['success']) {\n\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\tparamsForm['id'] = result['id'];\n\t\t\t\t\tparamsForm['status'] = result['status'];\n\t\t\t\t\tparams['text'] = result['text'];\n\t\t\t\t\tparams['type'] = 'success';\n\t\t\t\t\tlet linkElement = element.clone();\n\t\t\t\t\tlinkElement.data('name', 'ChartFilter');\n\t\t\t\t\tlinkElement.data('id', result['wid']);\n\t\t\t\t\tthisInstance.addWidget(\n\t\t\t\t\t\tlinkElement,\n\t\t\t\t\t\t'index.php?module=Home&view=ShowWidget&name=ChartFilter&linkid=' +\n\t\t\t\t\t\t\telement.data('linkid') +\n\t\t\t\t\t\t\t'&widgetid=' +\n\t\t\t\t\t\t\tresult['wid'] +\n\t\t\t\t\t\t\t'&active=0'\n\t\t\t\t\t);\n\t\t\t\t\tVtiger_Helper_Js.showMessage(params);\n\t\t\t\t} else {\n\t\t\t\t\tlet message = data['error']['message'],\n\t\t\t\t\t\terrorField;\n\t\t\t\t\tif (data['error']['code'] != 513) {\n\t\t\t\t\t\terrorField = form.find('[name=\"fieldName\"]');\n\t\t\t\t\t} else {\n\t\t\t\t\t\terrorField = form.find('[name=\"fieldLabel\"]');\n\t\t\t\t\t}\n\t\t\t\t\terrorField.validationEngine('showPrompt', message, 'error', 'topLeft', true);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterMiniListWidget: function() {\n\t\t\tconst thisInstance = this;\n\t\t\t$('.dashboardHeading')\n\t\t\t\t.off('click', '.addFilter')\n\t\t\t\t.on('click', '.addFilter', function(e) {\n\t\t\t\t\tconst element = $(e.currentTarget);\n\t\t\t\t\tapp.showModalWindow(null, 'index.php?module=Home&view=MiniListWizard&step=step1', function(\n\t\t\t\t\t\twizardContainer\n\t\t\t\t\t) {\n\t\t\t\t\t\tconst form = $('form', wizardContainer);\n\t\t\t\t\t\tform.on('keypress', function(event) {\n\t\t\t\t\t\t\treturn event.keyCode != 13;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tconst moduleNameSelectDOM = $('select[name=\"module\"]', wizardContainer);\n\t\t\t\t\t\tconst filteridSelectDOM = $('select[name=\"filterid\"]', wizardContainer);\n\t\t\t\t\t\tconst fieldsSelectDOM = $('select[name=\"fields\"]', wizardContainer);\n\t\t\t\t\t\tconst filterFieldsSelectDOM = $('select[name=\"filter_fields\"]', wizardContainer);\n\n\t\t\t\t\t\tconst moduleNameSelect2 = App.Fields.Picklist.showSelect2ElementView(moduleNameSelectDOM, {\n\t\t\t\t\t\t\tplaceholder: app.vtranslate('JS_SELECT_MODULE')\n\t\t\t\t\t\t});\n\t\t\t\t\t\tconst filteridSelect2 = App.Fields.Picklist.showSelect2ElementView(filteridSelectDOM, {\n\t\t\t\t\t\t\tplaceholder: app.vtranslate('JS_PLEASE_SELECT_ATLEAST_ONE_OPTION'),\n\t\t\t\t\t\t\tdropdownParent: wizardContainer\n\t\t\t\t\t\t});\n\t\t\t\t\t\tconst fieldsSelect2 = App.Fields.Picklist.showSelect2ElementView(fieldsSelectDOM, {\n\t\t\t\t\t\t\tplaceholder: app.vtranslate('JS_PLEASE_SELECT_ATLEAST_ONE_OPTION'),\n\t\t\t\t\t\t\tcloseOnSelect: true,\n\t\t\t\t\t\t\tmaximumSelectionLength: 6\n\t\t\t\t\t\t});\n\t\t\t\t\t\tconst filterFieldsSelect2 = App.Fields.Picklist.showSelect2ElementView(filterFieldsSelectDOM, {\n\t\t\t\t\t\t\tplaceholder: app.vtranslate('JS_PLEASE_SELECT_ATLEAST_ONE_OPTION')\n\t\t\t\t\t\t});\n\t\t\t\t\t\tconst footer = $('.modal-footer', wizardContainer);\n\n\t\t\t\t\t\tfilteridSelectDOM.closest('tr').hide();\n\t\t\t\t\t\tfieldsSelectDOM.closest('tr').hide();\n\t\t\t\t\t\tfooter.hide();\n\n\t\t\t\t\t\tmoduleNameSelect2.on('change', function() {\n\t\t\t\t\t\t\tif (!moduleNameSelect2.val()) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tfooter.hide();\n\t\t\t\t\t\t\tfieldsSelectDOM.closest('tr').hide();\n\t\t\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\t\t\tmodule: 'Home',\n\t\t\t\t\t\t\t\tview: 'MiniListWizard',\n\t\t\t\t\t\t\t\tstep: 'step2',\n\t\t\t\t\t\t\t\tselectedModule: moduleNameSelect2.val()\n\t\t\t\t\t\t\t}).done(function(res) {\n\t\t\t\t\t\t\t\tfilteridSelectDOM\n\t\t\t\t\t\t\t\t\t.empty()\n\t\t\t\t\t\t\t\t\t.html(res)\n\t\t\t\t\t\t\t\t\t.trigger('change');\n\t\t\t\t\t\t\t\tfilteridSelect2.closest('tr').show();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t\tfilteridSelect2.on('change', function() {\n\t\t\t\t\t\t\tif (!filteridSelect2.val()) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\t\t\tmodule: 'Home',\n\t\t\t\t\t\t\t\tview: 'MiniListWizard',\n\t\t\t\t\t\t\t\tstep: 'step3',\n\t\t\t\t\t\t\t\tselectedModule: moduleNameSelect2.val(),\n\t\t\t\t\t\t\t\tfilterid: filteridSelect2.val()\n\t\t\t\t\t\t\t}).done(function(res) {\n\t\t\t\t\t\t\t\tconst responseHTML = $(res);\n\t\t\t\t\t\t\t\tconst fieldsHTML = responseHTML.find('select[name=\"fields\"]').html();\n\t\t\t\t\t\t\t\tconst filterFieldsHTML = responseHTML.find('select[name=\"filter_fields\"]').html();\n\t\t\t\t\t\t\t\tfieldsSelectDOM\n\t\t\t\t\t\t\t\t\t.empty()\n\t\t\t\t\t\t\t\t\t.html(fieldsHTML)\n\t\t\t\t\t\t\t\t\t.trigger('change');\n\t\t\t\t\t\t\t\tfieldsSelect2.closest('tr').show();\n\t\t\t\t\t\t\t\tfieldsSelect2\n\t\t\t\t\t\t\t\t\t.data('select2')\n\t\t\t\t\t\t\t\t\t.$selection.find('.select2-search__field')\n\t\t\t\t\t\t\t\t\t.parent()\n\t\t\t\t\t\t\t\t\t.css('width', '100%');\n\t\t\t\t\t\t\t\tfilterFieldsSelectDOM\n\t\t\t\t\t\t\t\t\t.empty()\n\t\t\t\t\t\t\t\t\t.html(filterFieldsHTML)\n\t\t\t\t\t\t\t\t\t.trigger('change');\n\t\t\t\t\t\t\t\tfilterFieldsSelect2.closest('tr').show();\n\t\t\t\t\t\t\t\tfilterFieldsSelect2\n\t\t\t\t\t\t\t\t\t.data('select2')\n\t\t\t\t\t\t\t\t\t.$selection.find('.select2-search__field')\n\t\t\t\t\t\t\t\t\t.parent()\n\t\t\t\t\t\t\t\t\t.css('width', '100%');\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t\tfieldsSelect2.on('change', function() {\n\t\t\t\t\t\t\tif (!fieldsSelect2.val()) {\n\t\t\t\t\t\t\t\tfooter.hide();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tfooter.show();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tform.validationEngine(app.validationEngineOptions);\n\t\t\t\t\t\tform.on('submit', e => {\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\tif (form.validationEngine('validate') === true) {\n\t\t\t\t\t\t\t\tlet selectedFields = [];\n\t\t\t\t\t\t\t\tfieldsSelect2.select2('data').map(obj => {\n\t\t\t\t\t\t\t\t\tselectedFields.push(obj.id);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tthisInstance.saveMiniListWidget(\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tmodule: moduleNameSelect2.val(),\n\t\t\t\t\t\t\t\t\t\tfields: selectedFields,\n\t\t\t\t\t\t\t\t\t\tfilterFields: filterFieldsSelect2.val()\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\telement,\n\t\t\t\t\t\t\t\t\tmoduleNameSelect2.find(':selected').text(),\n\t\t\t\t\t\t\t\t\tfilteridSelect2.val(),\n\t\t\t\t\t\t\t\t\tfilteridSelect2.find(':selected').text(),\n\t\t\t\t\t\t\t\t\tform\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t},\n\t\tsaveMiniListWidget: function(data, element, moduleNameLabel, filterid, filterLabel, form) {\n\t\t\tconst thisInstance = this,\n\t\t\t\tparamsForm = {\n\t\t\t\t\tdata: JSON.stringify(data),\n\t\t\t\t\tblockid: element.data('block-id'),\n\t\t\t\t\tlinkid: element.data('linkid'),\n\t\t\t\t\tlabel: moduleNameLabel + ' - ' + filterLabel,\n\t\t\t\t\ttitle: form.find('[name=\"widgetTitle\"]').val(),\n\t\t\t\t\tname: 'Mini List',\n\t\t\t\t\tfilterid: filterid,\n\t\t\t\t\tisdefault: 0,\n\t\t\t\t\theight: 4,\n\t\t\t\t\twidth: 4,\n\t\t\t\t\towners_all: ['mine', 'all', 'users', 'groups'],\n\t\t\t\t\tdefault_owner: 'mine',\n\t\t\t\t\tdashboardId: thisInstance.getCurrentDashboard()\n\t\t\t\t},\n\t\t\t\tsourceModule = $('[name=\"selectedModuleName\"]').val();\n\t\t\tthisInstance.saveWidget(paramsForm, 'add', sourceModule, paramsForm.linkid).done(function(data) {\n\t\t\t\tlet result = data['result'],\n\t\t\t\t\tparams = {};\n\t\t\t\tif (data['success']) {\n\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\tparamsForm['id'] = result['id'];\n\t\t\t\t\tparamsForm['status'] = result['status'];\n\t\t\t\t\tparams['text'] = result['text'];\n\t\t\t\t\tparams['type'] = 'success';\n\t\t\t\t\tlet linkElement = element.clone();\n\t\t\t\t\tlinkElement.data('name', 'MiniList');\n\t\t\t\t\tlinkElement.data('id', result['wid']);\n\t\t\t\t\tthisInstance.addWidget(\n\t\t\t\t\t\tlinkElement,\n\t\t\t\t\t\t'index.php?module=Home&view=ShowWidget&name=MiniList&linkid=' +\n\t\t\t\t\t\t\telement.data('linkid') +\n\t\t\t\t\t\t\t'&widgetid=' +\n\t\t\t\t\t\t\tresult['wid'] +\n\t\t\t\t\t\t\t'&active=0'\n\t\t\t\t\t);\n\t\t\t\t\tVtiger_Helper_Js.showMessage(params);\n\t\t\t\t} else {\n\t\t\t\t\tlet message = data['error']['message'],\n\t\t\t\t\t\terrorField;\n\t\t\t\t\tif (data['error']['code'] != 513) {\n\t\t\t\t\t\terrorField = form.find('[name=\"fieldName\"]');\n\t\t\t\t\t} else {\n\t\t\t\t\t\terrorField = form.find('[name=\"fieldLabel\"]');\n\t\t\t\t\t}\n\t\t\t\t\terrorField.validationEngine('showPrompt', message, 'error', 'topLeft', true);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tsaveWidget: function(form, mode, sourceModule, linkid) {\n\t\t\tvar aDeferred = $.Deferred();\n\t\t\tvar progressIndicatorElement = $.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (typeof sourceModule === 'undefined') {\n\t\t\t\tsourceModule = app.getModuleName();\n\t\t\t}\n\t\t\tvar params = {\n\t\t\t\tform: form,\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tsourceModule: sourceModule,\n\t\t\t\taction: 'Widget',\n\t\t\t\tmode: mode,\n\t\t\t\taddToUser: true,\n\t\t\t\tlinkid: linkid\n\t\t\t};\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function(data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t})\n\t\t\t\t.fail(function(error) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\taDeferred.reject(error);\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\tregisterTabModules: function() {\n\t\t\tvar thisInstance = this;\n\t\t\t$('.selectDashboradView li').on('click', function(e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\t$('.selectDashboradView li').removeClass('active');\n\t\t\t\tcurrentTarget.addClass('active');\n\t\t\t\tvar params = {\n\t\t\t\t\tmodule: currentTarget.data('module'),\n\t\t\t\t\tview: app.getViewName(),\n\t\t\t\t\tsourceModule: app.getModuleName(),\n\t\t\t\t\tdashboardId: thisInstance.getCurrentDashboard()\n\t\t\t\t};\n\t\t\t\tAppConnector.request(params).done(function(data) {\n\t\t\t\t\t$('.dashboardViewContainer').html(data);\n\t\t\t\t\tthisInstance.noCache = true;\n\t\t\t\t\tthisInstance.registerEvents();\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Remove widget from list\n\t\t */\n\t\tremoveWidgetFromList: function() {\n\t\t\tconst thisInstance = this;\n\t\t\t$('.dashboardHeading').on('click', '.removeWidgetFromList', function(e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tvar id = currentTarget.data('widget-id');\n\t\t\t\tvar params = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\taction: 'Widget',\n\t\t\t\t\tmode: 'removeWidgetFromList',\n\t\t\t\t\twidgetid: id\n\t\t\t\t};\n\t\t\t\tAppConnector.request(params).done(function(data) {\n\t\t\t\t\tvar params = {\n\t\t\t\t\t\ttext: app.vtranslate('JS_WIDGET_DELETED'),\n\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t};\n\t\t\t\t\tVtiger_Helper_Js.showMessage(params);\n\t\t\t\t\tcurrentTarget.closest('.js-widget-list__item').remove();\n\t\t\t\t\tif ($('.js-widget-list .js-widget-list__item').length < 1) {\n\t\t\t\t\t\t$('.js-widget-list')\n\t\t\t\t\t\t\t.prev('.js-widget-predefined')\n\t\t\t\t\t\t\t.addClass('d-none');\n\t\t\t\t\t}\n\t\t\t\t\tthisInstance.updateLazyWidget();\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Updates tablet scroll top position\n\t\t */\n\t\tregisterTabletScrollEvent() {\n\t\t\tif (!app.touchDevice || !Quasar.plugins.Platform.is.desktop) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet scollbarContainer = $('.js-tablet-scroll');\n\t\t\tscollbarContainer.parent().removeClass('d-none');\n\n\t\t\tlet scollbarContainerH = scollbarContainer.outerHeight(),\n\t\t\t\tscollbarOffsetTop = scollbarContainer.offset().top,\n\t\t\t\tmaxOffset = $('.js-header').outerHeight() + 8;\n\n\t\t\tthis.scrollContainer.on('scroll', () => {\n\t\t\t\tif (this.scrollContainer.scrollTop() + maxOffset >= scollbarOffsetTop) {\n\t\t\t\t\tscollbarContainer.css({ top: maxOffset });\n\t\t\t\t} else {\n\t\t\t\t\tscollbarContainer.css({\n\t\t\t\t\t\ttop: scollbarOffsetTop - this.scrollContainer.scrollTop(),\n\t\t\t\t\t\theight: scollbarContainerH + this.scrollContainer.scrollTop()\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Updates list of predefined widgets after changed dashboard\n\t\t */\n\t\tregisterUpdatePredefinedWidgets: function() {\n\t\t\tlet container = $('.js-predefined-widgets');\n\t\t\tcontainer.off('click', '.js-widget-list__item');\n\t\t\tcontainer.on('click', '.js-widget-list__item', e => {\n\t\t\t\tif (!$(e.target).hasClass('removeWidgetFromList')) {\n\t\t\t\t\tthis.addWidget($(e.currentTarget), $(e.currentTarget).data('widgetUrl'));\n\t\t\t\t}\n\t\t\t});\n\t\t\tAppConnector.request({\n\t\t\t\tview: 'BasicAjax',\n\t\t\t\tmode: 'getDashBoardPredefinedWidgets',\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tdashboardId: this.getCurrentDashboard()\n\t\t\t}).done(data => {\n\t\t\t\tcontainer.html(data);\n\t\t\t});\n\t\t},\n\t\taddWidget(element, url) {\n\t\t\telement = $(element);\n\t\t\tvar linkId = element.data('linkid');\n\t\t\tvar name = element.data('name');\n\t\t\tvar widgetId = element.data('id');\n\t\t\telement.remove();\n\t\t\tif ($('.js-widget-list .js-widget-list__item').length < 1) {\n\t\t\t\t$('.js-widget-list')\n\t\t\t\t\t.prev('.js-widget-predefined')\n\t\t\t\t\t.addClass('d-none');\n\t\t\t}\n\t\t\tvar widgetContainer = $(\n\t\t\t\t'<div class=\"grid-stack-item js-css-element-queries\" data-js=\"css-element-queries\"><div id=\"' +\n\t\t\t\t\tlinkId +\n\t\t\t\t\t'-' +\n\t\t\t\t\twidgetId +\n\t\t\t\t\t'\" data-name=\"' +\n\t\t\t\t\tname +\n\t\t\t\t\t'\" data-mode=\"open\" class=\"grid-stack-item-content dashboardWidget new\"></div></div>'\n\t\t\t);\n\t\t\twidgetContainer.find('.dashboardWidget').data('url', url);\n\t\t\tvar width = element.data('width');\n\t\t\tvar height = element.data('height');\n\t\t\tVtiger_DashBoard_Js.grid.addWidget(widgetContainer, 0, 0, width, height);\n\t\t\tVtiger_DashBoard_Js.currentInstance.loadWidget(widgetContainer.find('.grid-stack-item-content'));\n\t\t},\n\t\tregisterEvents: function() {\n\t\t\tthis.registerGrid();\n\t\t\tthis.registerRefreshWidget();\n\t\t\tthis.removeWidget();\n\t\t\tthis.registerDatePickerHideInitiater();\n\t\t\tthis.registerShowMailBody();\n\t\t\tthis.registerChangeMailUser();\n\t\t\tthis.registerMiniListWidget();\n\t\t\tthis.registerChartFilterWidget();\n\t\t\tthis.registerTabModules();\n\t\t\tthis.removeWidgetFromList();\n\t\t\tthis.registerSelectDashboard();\n\t\t\tthis.registerTabletScrollEvent();\n\t\t\tthis.registerUpdatePredefinedWidgets();\n\t\t\tElementQueries.listen();\n\t\t}\n\t}\n);\n"],"names":["$","Class","container","on","e","target","closest","length","stopPropagation","currentInstance","this","noCache","dashboardId","data","widgetContainer","id","attr","instancesCache","widgetName","Vtiger_Widget_Js","getInstance","thisInstance","grid","getContainer","gridstack","test","navigator","userAgent","event","ui","savePositions","loadWidgets","width","parent","parentWidth","css","widgets","widgetRowColPositions","widgetSizes","index","len","widget","find","JSON","stringify","updateLazyWidget","request","app","getModuleName","scrollTop","scrollContainer","App","Components","Scrollbar","page","element","Quasar","plugins","Platform","is","desktop","showNewScrollbar","Lazy","loadWidget","self","urlParams","mode","moduleName","sourceModule","progressIndicator","name","cache","userId","CONFIG","cecheUrl","cacheGet","done","html","elem","adjustHeightWidget","Fields","Picklist","showSelect2ElementView","getWidgetInstance","trigger","widgetPostLoadEvent","remove","headerHeight","outerHeight","adjustedHeight","height","widgetContent","wheelPropagation","currentTarget","refreshWidget","listItem","parents","url","widgetTitle","message","vtranslate","showConfirmationBox","response","success","fadeOut","inArray","removeWidget","prev","removeClass","result","linkid","title","deleteFromList","divider","insertBefore","append","fail","error","err","progressIndicatorElement","params","getViewName","registerEvents","dashboardWidgetHeader","addClickOutSideEvent","date","DatePickerHide","blur","mailBody","bodyIcon","show","addClass","hide","contentContainer","optionSelected","val","widgetPostRefereshEvent","off","showModalWindow","wizardContainer","form","keyCode","sectorContainer","chartType","moduleNameSelectDOM","moduleNameSelect2","step1","step2","step3","footer","value","step2Response","after","filtersIdElement","valueTypeElement","step3Response","last","groupField","step4Response","step4","registerModalEvents","preventDefault","save","InvalidFields","formAlignmentAfterValidation","selectedModule","selectedModuleLabel","text","selectedFiltersId","Array","isArray","join","selectedFieldLabel","each","prop","saveChartFilterWidget","moduleNameLabel","filtersId","filterLabel","groupFieldName","label","paramsForm","getCurrentDashboard","saveWidget","hideModalWindow","linkElement","clone","addWidget","showMessage","validationEngine","filteridSelectDOM","fieldsSelectDOM","filterFieldsSelectDOM","filteridSelect2","fieldsSelect2","filterFieldsSelect2","res","empty","responseHTML","fieldsHTML","filterFieldsHTML","$selection","validationEngineOptions","selectedFields","select2","map","push","obj","saveMiniListWidget","filterid","aDeferred","Deferred","resolve","reject","promise","touchDevice","scollbarContainer","scollbarContainerH","scollbarOffsetTop","offset","top","maxOffset","_this","hasClass","linkId","widgetId","registerGrid","registerRefreshWidget","registerDatePickerHideInitiater","registerShowMailBody","registerChangeMailUser","registerMiniListWidget","registerChartFilterWidget","registerTabModules","removeWidgetFromList","registerSelectDashboard","registerTabletScrollEvent","registerUpdatePredefinedWidgets","listen"],"mappings":"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"}