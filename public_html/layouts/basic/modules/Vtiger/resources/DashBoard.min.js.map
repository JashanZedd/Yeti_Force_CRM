{"version":3,"file":"DashBoard.min.js","sources":["DashBoard.js"],"sourcesContent":["/*+**********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.1\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n * Contributor(s): YetiForce.com\n ************************************************************************************/\n'use strict';\n\n$.Class(\n\t'Vtiger_DashBoard_Js',\n\t{\n\t\tgrid: false,\n\t\t//static property which will store the instance of dashboard\n\t\tcurrentInstance: false,\n\t\tscrollContainer: false,\n\t\trestrictContentDrag: function(container) {\n\t\t\tcontainer.on('mousedown.draggable', function(e) {\n\t\t\t\tvar element = $(e.target);\n\t\t\t\tvar isHeaderElement = element.closest('.dashboardWidgetHeader').length > 0 ? true : false;\n\t\t\t\tif (isHeaderElement) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t//Stop the event propagation so that drag will not start for contents\n\t\t\t\te.stopPropagation();\n\t\t\t});\n\t\t}\n\t},\n\t{\n\t\tcontainer: false,\n\t\tnoCache: false,\n\t\tinstancesCache: {},\n\t\tinit: function() {\n\t\t\tVtiger_DashBoard_Js.currentInstance = this;\n\t\t},\n\t\tgetContainer: function() {\n\t\t\tif (this.noCache == true || this.container == false) {\n\t\t\t\tthis.container = $('.grid-stack');\n\t\t\t}\n\t\t\treturn this.container;\n\t\t},\n\t\tgetCurrentDashboard: function() {\n\t\t\treturn $('.selectDashboard li a.active')\n\t\t\t\t.closest('li')\n\t\t\t\t.data('id');\n\t\t},\n\t\tgetWidgetInstance: function(widgetContainer) {\n\t\t\tvar id = widgetContainer.attr('id');\n\t\t\tif (this.noCache || !(id in this.instancesCache)) {\n\t\t\t\tvar widgetName = widgetContainer.data('name');\n\t\t\t\tthis.instancesCache[id] = Vtiger_Widget_Js.getInstance(widgetContainer, widgetName);\n\t\t\t}\n\t\t\treturn this.instancesCache[id];\n\t\t},\n\t\tregisterGrid: function() {\n\t\t\tconst thisInstance = this;\n\t\t\tVtiger_DashBoard_Js.grid = this.getContainer()\n\t\t\t\t.gridstack({\n\t\t\t\t\tverticalMargin: '0.5rem',\n\t\t\t\t\talwaysShowResizeHandle: /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(\n\t\t\t\t\t\tnavigator.userAgent\n\t\t\t\t\t)\n\t\t\t\t})\n\t\t\t\t.data('gridstack');\n\t\t\t$('.grid-stack').on('change', function(event, ui) {\n\t\t\t\tthisInstance.savePositions($('.grid-stack-item'));\n\t\t\t});\n\t\t\t// load widgets after grid initialization to prevent too early lazy loading - visible viewport changes\n\t\t\tthis.loadWidgets();\n\t\t\t// recalculate positions with scrollbars\n\t\t\tif (\n\t\t\t\tthis.getContainer().width() !==\n\t\t\t\tthis.getContainer()\n\t\t\t\t\t.parent()\n\t\t\t\t\t.width()\n\t\t\t) {\n\t\t\t\tconst parentWidth = thisInstance\n\t\t\t\t\t.getContainer()\n\t\t\t\t\t.parent()\n\t\t\t\t\t.width();\n\t\t\t\tthis.getContainer().css('width', parentWidth + 'px');\n\t\t\t}\n\t\t},\n\t\tsavePositions: function(widgets) {\n\t\t\tvar widgetRowColPositions = {},\n\t\t\t\twidgetSizes = {};\n\t\t\tfor (var index = 0, len = widgets.length; index < len; ++index) {\n\t\t\t\tvar widget = $(widgets[index]);\n\t\t\t\twidgetRowColPositions[widget.find('.grid-stack-item-content').attr('id')] = JSON.stringify({\n\t\t\t\t\trow: widget.attr('data-gs-y'),\n\t\t\t\t\tcol: widget.attr('data-gs-x')\n\t\t\t\t});\n\t\t\t\twidgetSizes[widget.find('.grid-stack-item-content').attr('id')] = JSON.stringify({\n\t\t\t\t\twidth: widget.attr('data-gs-width'),\n\t\t\t\t\theight: widget.attr('data-gs-height')\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis.updateLazyWidget();\n\t\t\tAppConnector.request({\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\taction: 'SaveWidgetPositions',\n\t\t\t\tposition: widgetRowColPositions,\n\t\t\t\tsize: widgetSizes\n\t\t\t});\n\t\t},\n\t\tupdateLazyWidget() {\n\t\t\tconst scrollTop = this.scrollContainer.scrollTop();\n\t\t\tthis.scrollContainer.scrollTop(scrollTop + 1).scrollTop(scrollTop);\n\t\t},\n\t\tloadWidgets: function() {\n\t\t\tconst thisInstance = this;\n\t\t\tthis.scrollContainer = $('.mainBody');\n\t\t\tif ($(window).width() < app.breakpoints.sm) {\n\t\t\t\tthis.scrollContainer = $('.bodyContent');\n\t\t\t\tapp.showNewScrollbar(this.scrollContainer);\n\t\t\t}\n\t\t\tthisInstance\n\t\t\t\t.getContainer()\n\t\t\t\t.find('.dashboardWidget')\n\t\t\t\t.Lazy({\n\t\t\t\t\tthreshold: 0,\n\t\t\t\t\tappendScroll: thisInstance.scrollContainer,\n\t\t\t\t\twidgetLoader(element) {\n\t\t\t\t\t\tthisInstance.loadWidget(element);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\tthis.updateLazyWidget(this.scrollContainer);\n\t\t},\n\t\tloadWidget: function(widgetContainer) {\n\t\t\tconst self = this;\n\t\t\tlet urlParams = widgetContainer.data('url');\n\t\t\tlet mode = widgetContainer.data('mode');\n\t\t\tlet module = app.getModuleName();\n  \t\tlet sourceModule = $('a.active', 'ul.selectDashboradView').parent().data('module');\n\t\t\twidgetContainer.progressIndicator();\n\t\t\tif (mode === 'open') {\n\t\t\t\tlet name = widgetContainer.data('name');\n\t\t\t\tlet cache = widgetContainer.data('cache');\n\t\t\t\tlet userId = CONFIG.userId;\n\t\t\t\tif (cache === 1) {\n\t\t\t\t\tlet cecheUrl = app.cacheGet(name + userId, false);\n\t\t\t\t\turlParams = cecheUrl ? cecheUrl : urlParams;\n\t\t\t\t}\n\t\t\t\tAppConnector.request(urlParams).done(data => {\n\t\t\t\t\twidgetContainer.html(data);\n\t\t\t\t\twidgetContainer.closest('.grid-stack').on('gsresizestop', (event, elem) => {\n\t\t\t\t\t\tself.adjustHeightWidget(widgetContainer);\n\t\t\t\t\t});\n\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(widgetContainer.find('.select2'));\n\t\t\t\t\tself.getWidgetInstance(widgetContainer);\n\t\t\t\t\twidgetContainer.trigger(Vtiger_Widget_Js.widgetPostLoadEvent);\n\t\t\t\t\tself.adjustHeightWidget(widgetContainer);\n\t\t\t\t\tif(module != sourceModule) {\n\t\t\t\t\t\t$('a.js-widget-remove', widgetContainer).remove();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Adjust the height of the widget.\n\t\t * @param {jQuery} widgetContainer\n\t\t */\n\t\tadjustHeightWidget(widgetContainer) {\n\t\t\tconst headerHeight = widgetContainer.find('.dashboardWidgetHeader').outerHeight();\n\t\t\tlet adjustedHeight = widgetContainer.height() - headerHeight;\n\t\t\tif (widgetContainer.find('.dashboardWidgetFooter').length) {\n\t\t\t\tadjustedHeight -= widgetContainer.find('.dashboardWidgetFooter').outerHeight();\n\t\t\t}\n\t\t\tconst widgetContent = widgetContainer.find('.dashboardWidgetContent');\n\t\t\twidgetContent.css('max-height', adjustedHeight + 'px');\n\t\t\tapp.showNewScrollbar(widgetContent, { wheelPropagation: true });\n\t\t},\n\t\tregisterRefreshWidget: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tthis.getContainer().on('click', 'a[name=\"drefresh\"]', function(e) {\n\t\t\t\tvar element = $(e.currentTarget);\n\t\t\t\tvar parent = element.closest('.dashboardWidget');\n\t\t\t\tvar widgetInstnace = thisInstance.getWidgetInstance(parent);\n\t\t\t\twidgetInstnace.refreshWidget();\n\t\t\t\treturn;\n\t\t\t});\n\t\t},\n\t\tremoveWidget: function() {\n\t\t\tconst thisInstance = this;\n\t\t\tthis.getContainer().on('click', '.js-widget-remove', function(e) {\n\t\t\t\tlet element = $(e.currentTarget),\n\t\t\t\t\tlistItem = $(element).parents('.grid-stack-item'),\n\t\t\t\t\twidth = listItem.attr('data-gs-width'),\n\t\t\t\t\theight = listItem.attr('data-gs-height'),\n\t\t\t\t\turl = element.data('url'),\n\t\t\t\t\tparent = element.closest('.dashboardWidgetHeader').parent(),\n\t\t\t\t\twidgetName = parent.data('name'),\n\t\t\t\t\twidgetTitle = parent.find('.dashboardTitle').attr('title'),\n\t\t\t\t\tmessage =\n\t\t\t\t\t\tapp.vtranslate('JS_ARE_YOU_SURE_TO_DELETE_WIDGET') +\n\t\t\t\t\t\t' [' +\n\t\t\t\t\t\twidgetTitle +\n\t\t\t\t\t\t']. ' +\n\t\t\t\t\t\tapp.vtranslate('JS_ARE_YOU_SURE_TO_DELETE_WIDGET_INFO');\n\t\t\t\tVtiger_Helper_Js.showConfirmationBox({ message: message })\n\t\t\t\t\t.done(function(e) {\n\t\t\t\t\t\tAppConnector.request(url).done(function(response) {\n\t\t\t\t\t\t\tif (response.success) {\n\t\t\t\t\t\t\t\tlet nonReversableWidgets = [];\n\t\t\t\t\t\t\t\tparent.fadeOut('slow', function() {\n\t\t\t\t\t\t\t\t\tparent.remove();\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tif ($.inArray(widgetName, nonReversableWidgets) == -1) {\n\t\t\t\t\t\t\t\t\tVtiger_DashBoard_Js.grid.removeWidget(element.closest('.grid-stack-item'));\n\t\t\t\t\t\t\t\t\t$('.js-widget-list')\n\t\t\t\t\t\t\t\t\t\t.prev('.js-widget-predefined')\n\t\t\t\t\t\t\t\t\t\t.removeClass('d-none');\n\t\t\t\t\t\t\t\t\tlet data = `<a class=\"js-widget-list__item dropdown-item d-flex\"\n\t\t\t\t\t\t\t\t\t\thref=\"#\"\n\t\t\t\t\t\t\t\t\t\tdata-widget-url=\"${response.result.url}\"\n\t\t\t\t\t\t\t\t\t\tdata-linkid=\"${response.result.linkid}\"\n\t\t\t\t\t\t\t\t\t\tdata-name=\"${response.result.name}\"\n\t\t\t\t\t\t\t\t\t\tdata-width=\"${width}\"\n\t\t\t\t\t\t\t\t\t\tdata-height=\"${height}\" data-js=\"remove | click\">${response.result.title}`;\n\t\t\t\t\t\t\t\t\tif (response.result.deleteFromList) {\n\t\t\t\t\t\t\t\t\t\tdata += `<span class=\"text-danger pl-5 ml-auto\">\n\t\t\t\t\t\t\t\t\t\t\t<span class=\"fas fa-trash-alt removeWidgetFromList u-hover-opacity\" data-widget-id=\"${\n\t\t\t\t\t\t\t\t\t\t\t\tresponse.result.id\n\t\t\t\t\t\t\t\t\t\t\t}\" data-js=\"click\"></span>\n\t\t\t\t\t\t\t\t\t\t</span>`;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tdata += `</a>`;\n\t\t\t\t\t\t\t\t\tlet divider = $('.js-widget-list .dropdown-divider');\n\t\t\t\t\t\t\t\t\tif (divider.length) {\n\t\t\t\t\t\t\t\t\t\t$(data).insertBefore(divider);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t$('.js-widget-list').append(data);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tthisInstance.updateLazyWidget();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function(error, err) {});\n\t\t\t});\n\t\t},\n\t\tregisterSelectDashboard: function() {\n\t\t\tvar thisInstance = this;\n\t\t\t$('.selectDashboard li').on('click', function(e) {\n\t\t\t\tvar progressIndicatorElement = $.progressIndicator({\n\t\t\t\t\tposition: 'html',\n\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\tenabled: true\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tvar dashboardId = currentTarget.data('id');\n\t\t\t\tvar params = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tview: app.getViewName(),\n\t\t\t\t\tdashboardId: dashboardId\n\t\t\t\t};\n\t\t\t\tAppConnector.request(params).done(function(data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t$('.dashboardViewContainer').html(data);\n\t\t\t\t\tthisInstance.noCache = true;\n\t\t\t\t\tthisInstance.registerEvents();\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterDatePickerHideInitiater: function() {\n\t\t\tvar container = this.getContainer();\n\t\t\tcontainer.on('click', 'input.dateRange', function(e) {\n\t\t\t\tvar widgetContainer = $(e.currentTarget).closest('.dashboardWidget');\n\t\t\t\tvar dashboardWidgetHeader = $('.dashboardWidgetHeader', widgetContainer);\n\n\t\t\t\tvar callbackFunction = function() {\n\t\t\t\t\tvar date = $('.dateRange');\n\t\t\t\t\tdate.DatePickerHide();\n\t\t\t\t\tdate.blur();\n\t\t\t\t};\n\t\t\t\t//adding clickoutside event on the dashboardWidgetHeader\n\t\t\t\tVtiger_Helper_Js.addClickOutSideEvent(dashboardWidgetHeader.find('.dateRange'), callbackFunction);\n\t\t\t\treturn false;\n\t\t\t});\n\t\t},\n\t\tregisterShowMailBody: function() {\n\t\t\tvar container = this.getContainer();\n\t\t\tcontainer.on('click', '.showMailBody', function(e) {\n\t\t\t\tvar widgetContainer = $(e.currentTarget).closest('.mailRow');\n\t\t\t\tvar mailBody = widgetContainer.find('.mailBody');\n\t\t\t\tvar bodyIcon = $(e.currentTarget).find('.body-icon');\n\t\t\t\tif (mailBody.css('display') == 'none') {\n\t\t\t\t\tmailBody.show();\n\t\t\t\t\tbodyIcon.removeClass('fa-chevron-down').addClass('fa-chevron-up');\n\t\t\t\t} else {\n\t\t\t\t\tmailBody.hide();\n\t\t\t\t\tbodyIcon.removeClass('fa-chevron-up').addClass('fa-chevron-down');\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterChangeMailUser: function() {\n\t\t\tvar container = this.getContainer();\n\n\t\t\tcontainer.on('change', '#mailUserList', function(e) {\n\t\t\t\tvar element = $(e.currentTarget);\n\t\t\t\tvar parent = element.closest('.dashboardWidget');\n\t\t\t\tvar contentContainer = parent.find('.dashboardWidgetContent');\n\t\t\t\tvar optionSelected = $('option:selected', this);\n\t\t\t\tvar url = parent.data('url') + '&user=' + optionSelected.val();\n\n\t\t\t\tvar params = {};\n\t\t\t\tparams.url = url;\n\t\t\t\tparams.data = {};\n\t\t\t\tcontentContainer.progressIndicator({});\n\t\t\t\tAppConnector.request(params)\n\t\t\t\t\t.done(function(data) {\n\t\t\t\t\t\tcontentContainer.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tparent.html(data).trigger(Vtiger_Widget_Js.widgetPostRefereshEvent);\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function() {\n\t\t\t\t\t\tcontentContainer.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterChartFilterWidget: function() {\n\t\t\tvar thisInstance = this;\n\t\t\t$('.dashboardHeading')\n\t\t\t\t.off('click', '.addChartFilter')\n\t\t\t\t.on('click', '.addChartFilter', function(e) {\n\t\t\t\t\tvar element = $(e.currentTarget);\n\t\t\t\t\tapp.showModalWindow(null, 'index.php?module=Home&view=ChartFilter&step=step1', function(wizardContainer) {\n\t\t\t\t\t\tvar form = $('form', wizardContainer);\n\t\t\t\t\t\tform.on('keypress', function(event) {\n\t\t\t\t\t\t\treturn event.keyCode != 13;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tvar sectorContainer = form.find('.sectorContainer');\n\t\t\t\t\t\tvar chartType = $('select[name=\"chartType\"]', wizardContainer);\n\t\t\t\t\t\tvar moduleNameSelectDOM = $('select[name=\"module\"]', wizardContainer);\n\t\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(sectorContainer.find('.select2'));\n\t\t\t\t\t\tvar moduleNameSelect2 = App.Fields.Picklist.showSelect2ElementView(moduleNameSelectDOM, {\n\t\t\t\t\t\t\tplaceholder: app.vtranslate('JS_SELECT_MODULE')\n\t\t\t\t\t\t});\n\t\t\t\t\t\tvar step1 = $('.step1', wizardContainer);\n\t\t\t\t\t\tvar step2 = $('.step2', wizardContainer);\n\t\t\t\t\t\tvar step3 = $('.step3', wizardContainer);\n\t\t\t\t\t\tvar footer = $('.modal-footer', wizardContainer);\n\t\t\t\t\t\tstep2.remove();\n\t\t\t\t\t\tstep3.remove();\n\t\t\t\t\t\tfooter.hide();\n\t\t\t\t\t\tchartType.on('change', function(e) {\n\t\t\t\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\t\t\t\tvar value = currentTarget.val();\n\t\t\t\t\t\t\tif (value == 'Barchat' || value == 'Horizontal') {\n\t\t\t\t\t\t\t\tform.find('.isColorContainer').removeClass('d-none');\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tform.find('.isColorContainer').addClass('d-none');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (wizardContainer.find('#widgetStep').val() == 4) {\n\t\t\t\t\t\t\t\twizardContainer.find('.step3 .groupField').trigger('change');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tmoduleNameSelect2.on('change', function() {\n\t\t\t\t\t\t\tif (!moduleNameSelect2.val()) return;\n\t\t\t\t\t\t\tfooter.hide();\n\t\t\t\t\t\t\twizardContainer.find('.step2').remove();\n\t\t\t\t\t\t\twizardContainer.find('.step3').remove();\n\t\t\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\t\t\tmodule: 'Home',\n\t\t\t\t\t\t\t\tview: 'ChartFilter',\n\t\t\t\t\t\t\t\tstep: 'step2',\n\t\t\t\t\t\t\t\tchartType: chartType.val(),\n\t\t\t\t\t\t\t\tselectedModule: moduleNameSelect2.val()\n\t\t\t\t\t\t\t}).done(function(step2Response) {\n\t\t\t\t\t\t\t\tstep1.after(step2Response);\n\t\t\t\t\t\t\t\twizardContainer.find('#widgetStep').val(2);\n\t\t\t\t\t\t\t\tconst step2 = wizardContainer.find('.step2');\n\t\t\t\t\t\t\t\tfooter.hide();\n\t\t\t\t\t\t\t\tconst filtersIdElement = step2.find('.filtersId');\n\t\t\t\t\t\t\t\tconst valueTypeElement = step2.find('.valueType');\n\t\t\t\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(filtersIdElement);\n\t\t\t\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(valueTypeElement);\n\t\t\t\t\t\t\t\tstep2.find('.filtersId, .valueType').on('change', function() {\n\t\t\t\t\t\t\t\t\twizardContainer.find('.step3').remove();\n\t\t\t\t\t\t\t\t\twizardContainer.find('.step4').remove();\n\t\t\t\t\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\t\t\t\t\tmodule: 'Home',\n\t\t\t\t\t\t\t\t\t\tview: 'ChartFilter',\n\t\t\t\t\t\t\t\t\t\tstep: 'step3',\n\t\t\t\t\t\t\t\t\t\tselectedModule: moduleNameSelect2.val(),\n\t\t\t\t\t\t\t\t\t\tchartType: chartType.val(),\n\t\t\t\t\t\t\t\t\t\tfiltersId: filtersIdElement.val(),\n\t\t\t\t\t\t\t\t\t\tvalueType: valueTypeElement.val()\n\t\t\t\t\t\t\t\t\t}).done(function(step3Response) {\n\t\t\t\t\t\t\t\t\t\tstep2.last().after(step3Response);\n\t\t\t\t\t\t\t\t\t\twizardContainer.find('#widgetStep').val(3);\n\t\t\t\t\t\t\t\t\t\tvar step3 = wizardContainer.find('.step3');\n\t\t\t\t\t\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(step3.find('select'));\n\t\t\t\t\t\t\t\t\t\tfooter.hide();\n\t\t\t\t\t\t\t\t\t\tstep3.find('.groupField').on('change', function() {\n\t\t\t\t\t\t\t\t\t\t\twizardContainer.find('.step4').remove();\n\t\t\t\t\t\t\t\t\t\t\tvar groupField = $(this);\n\t\t\t\t\t\t\t\t\t\t\tif (!groupField.val()) return;\n\t\t\t\t\t\t\t\t\t\t\tfooter.show();\n\t\t\t\t\t\t\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\t\t\t\t\t\t\tmodule: 'Home',\n\t\t\t\t\t\t\t\t\t\t\t\tview: 'ChartFilter',\n\t\t\t\t\t\t\t\t\t\t\t\tstep: 'step4',\n\t\t\t\t\t\t\t\t\t\t\t\tselectedModule: moduleNameSelect2.val(),\n\t\t\t\t\t\t\t\t\t\t\t\tfiltersId: filtersIdElement.val(),\n\t\t\t\t\t\t\t\t\t\t\t\tgroupField: groupField.val(),\n\t\t\t\t\t\t\t\t\t\t\t\tchartType: chartType.val()\n\t\t\t\t\t\t\t\t\t\t\t}).done(function(step4Response) {\n\t\t\t\t\t\t\t\t\t\t\t\tstep3.last().after(step4Response);\n\t\t\t\t\t\t\t\t\t\t\t\twizardContainer.find('#widgetStep').val(4);\n\t\t\t\t\t\t\t\t\t\t\t\tvar step4 = wizardContainer.find('.step4');\n\t\t\t\t\t\t\t\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(step4.find('select'));\n\t\t\t\t\t\t\t\t\t\t\t\tapp.registerModalEvents(wizardContainer);\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t\tform.on('submit', function(e) {\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\tlet save = true;\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\tif (form.data('jqv').InvalidFields.length > 0) {\n\t\t\t\t\t\t\t\tapp.formAlignmentAfterValidation(form);\n\t\t\t\t\t\t\t\tsave = false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (save) {\n\t\t\t\t\t\t\t\tconst selectedModule = moduleNameSelect2.val();\n\t\t\t\t\t\t\t\tconst selectedModuleLabel = moduleNameSelect2.find(':selected').text();\n\t\t\t\t\t\t\t\tlet selectedFiltersId = form.find('.filtersId').val();\n\t\t\t\t\t\t\t\tif (Array.isArray(selectedFiltersId)) {\n\t\t\t\t\t\t\t\t\tselectedFiltersId = selectedFiltersId.join(',');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tconst selectedFieldLabel = form\n\t\t\t\t\t\t\t\t\t.find('.groupField')\n\t\t\t\t\t\t\t\t\t.find(':selected')\n\t\t\t\t\t\t\t\t\t.text();\n\t\t\t\t\t\t\t\tconst data = {\n\t\t\t\t\t\t\t\t\tmodule: selectedModule,\n\t\t\t\t\t\t\t\t\tgroupField: form.find('.groupField').val(),\n\t\t\t\t\t\t\t\t\tchartType: chartType.val()\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tform.find('.saveParam').each(function(index, element) {\n\t\t\t\t\t\t\t\t\telement = $(element);\n\t\t\t\t\t\t\t\t\tif (!(element.is('input') && element.prop('type') === 'checkbox' && !element.prop('checked'))) {\n\t\t\t\t\t\t\t\t\t\tdata[element.attr('name')] = element.val();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tthisInstance.saveChartFilterWidget(\n\t\t\t\t\t\t\t\t\tdata,\n\t\t\t\t\t\t\t\t\telement,\n\t\t\t\t\t\t\t\t\tselectedModuleLabel,\n\t\t\t\t\t\t\t\t\tselectedFiltersId,\n\t\t\t\t\t\t\t\t\t'',\n\t\t\t\t\t\t\t\t\tselectedFieldLabel,\n\t\t\t\t\t\t\t\t\tform\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t},\n\t\tsaveChartFilterWidget: function(data, element, moduleNameLabel, filtersId, filterLabel, groupFieldName, form) {\n\t\t\tconst thisInstance = this;\n\t\t\tlet label = moduleNameLabel;\n\t\t\tif (typeof filterLabel !== 'undefined' && filterLabel !== null && filterLabel !== '') {\n\t\t\t\tlabel += ' - ' + filterLabel;\n\t\t\t}\n\t\t\tif (typeof groupFieldName !== 'undefined' && groupFieldName !== null && groupFieldName !== '') {\n\t\t\t\tlabel += ' - ' + groupFieldName;\n\t\t\t}\n\t\t\tconst paramsForm = {\n\t\t\t\tdata: JSON.stringify(data),\n\t\t\t\tblockid: element.data('block-id'),\n\t\t\t\tlinkid: element.data('linkid'),\n\t\t\t\tlabel: label,\n\t\t\t\tname: 'ChartFilter',\n\t\t\t\ttitle: form.find('[name=\"widgetTitle\"]').val(),\n\t\t\t\tfilterid: filtersId,\n\t\t\t\tisdefault: 0,\n\t\t\t\theight: 4,\n\t\t\t\twidth: 4,\n\t\t\t\towners_all: ['mine', 'all', 'users', 'groups'],\n\t\t\t\tdefault_owner: 'mine',\n\t\t\t\tdashboardId: thisInstance.getCurrentDashboard()\n\t\t\t};\n\t\t\tconst sourceModule = $('[name=\"selectedModuleName\"]').val();\n\t\t\tthisInstance.saveWidget(paramsForm, 'add', sourceModule, paramsForm.linkid).done(function(data) {\n\t\t\t\tlet result = data['result'],\n\t\t\t\t\tparams = {};\n\t\t\t\tif (data['success']) {\n\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\tparamsForm['id'] = result['id'];\n\t\t\t\t\tparamsForm['status'] = result['status'];\n\t\t\t\t\tparams['text'] = result['text'];\n\t\t\t\t\tparams['type'] = 'success';\n\t\t\t\t\tlet linkElement = element.clone();\n\t\t\t\t\tlinkElement.data('name', 'ChartFilter');\n\t\t\t\t\tlinkElement.data('id', result['wid']);\n\t\t\t\t\tthisInstance.addWidget(\n\t\t\t\t\t\tlinkElement,\n\t\t\t\t\t\t'index.php?module=Home&view=ShowWidget&name=ChartFilter&linkid=' +\n\t\t\t\t\t\t\telement.data('linkid') +\n\t\t\t\t\t\t\t'&widgetid=' +\n\t\t\t\t\t\t\tresult['wid'] +\n\t\t\t\t\t\t\t'&active=0'\n\t\t\t\t\t);\n\t\t\t\t\tVtiger_Helper_Js.showMessage(params);\n\t\t\t\t} else {\n\t\t\t\t\tlet message = data['error']['message'],\n\t\t\t\t\t\terrorField;\n\t\t\t\t\tif (data['error']['code'] != 513) {\n\t\t\t\t\t\terrorField = form.find('[name=\"fieldName\"]');\n\t\t\t\t\t} else {\n\t\t\t\t\t\terrorField = form.find('[name=\"fieldLabel\"]');\n\t\t\t\t\t}\n\t\t\t\t\terrorField.validationEngine('showPrompt', message, 'error', 'topLeft', true);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterMiniListWidget: function() {\n\t\t\tconst thisInstance = this;\n\t\t\t$('.dashboardHeading')\n\t\t\t\t.off('click', '.addFilter')\n\t\t\t\t.on('click', '.addFilter', function(e) {\n\t\t\t\t\tconst element = $(e.currentTarget);\n\t\t\t\t\tapp.showModalWindow(null, 'index.php?module=Home&view=MiniListWizard&step=step1', function(wizardContainer) {\n\t\t\t\t\t\tconst form = $('form', wizardContainer);\n\t\t\t\t\t\tform.on('keypress', function(event) {\n\t\t\t\t\t\t\treturn event.keyCode != 13;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tconst moduleNameSelectDOM = $('select[name=\"module\"]', wizardContainer);\n\t\t\t\t\t\tconst filteridSelectDOM = $('select[name=\"filterid\"]', wizardContainer);\n\t\t\t\t\t\tconst fieldsSelectDOM = $('select[name=\"fields\"]', wizardContainer);\n\t\t\t\t\t\tconst filterFieldsSelectDOM = $('select[name=\"filter_fields\"]', wizardContainer);\n\n\t\t\t\t\t\tconst moduleNameSelect2 = App.Fields.Picklist.showSelect2ElementView(moduleNameSelectDOM, {\n\t\t\t\t\t\t\tplaceholder: app.vtranslate('JS_SELECT_MODULE')\n\t\t\t\t\t\t});\n\t\t\t\t\t\tconst filteridSelect2 = App.Fields.Picklist.showSelect2ElementView(filteridSelectDOM, {\n\t\t\t\t\t\t\tplaceholder: app.vtranslate('JS_PLEASE_SELECT_ATLEAST_ONE_OPTION'),\n\t\t\t\t\t\t\tdropdownParent: wizardContainer\n\t\t\t\t\t\t});\n\t\t\t\t\t\tconst fieldsSelect2 = App.Fields.Picklist.showSelect2ElementView(fieldsSelectDOM, {\n\t\t\t\t\t\t\tplaceholder: app.vtranslate('JS_PLEASE_SELECT_ATLEAST_ONE_OPTION'),\n\t\t\t\t\t\t\tcloseOnSelect: true,\n\t\t\t\t\t\t\tmaximumSelectionLength: 6\n\t\t\t\t\t\t});\n\t\t\t\t\t\tconst filterFieldsSelect2 = App.Fields.Picklist.showSelect2ElementView(filterFieldsSelectDOM, {\n\t\t\t\t\t\t\tplaceholder: app.vtranslate('JS_PLEASE_SELECT_ATLEAST_ONE_OPTION')\n\t\t\t\t\t\t});\n\t\t\t\t\t\tconst footer = $('.modal-footer', wizardContainer);\n\n\t\t\t\t\t\tfilteridSelectDOM.closest('tr').hide();\n\t\t\t\t\t\tfieldsSelectDOM.closest('tr').hide();\n\t\t\t\t\t\tfooter.hide();\n\n\t\t\t\t\t\tmoduleNameSelect2.on('change', function() {\n\t\t\t\t\t\t\tif (!moduleNameSelect2.val()) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tfooter.hide();\n\t\t\t\t\t\t\tfieldsSelectDOM.closest('tr').hide();\n\t\t\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\t\t\tmodule: 'Home',\n\t\t\t\t\t\t\t\tview: 'MiniListWizard',\n\t\t\t\t\t\t\t\tstep: 'step2',\n\t\t\t\t\t\t\t\tselectedModule: moduleNameSelect2.val()\n\t\t\t\t\t\t\t}).done(function(res) {\n\t\t\t\t\t\t\t\tfilteridSelectDOM\n\t\t\t\t\t\t\t\t\t.empty()\n\t\t\t\t\t\t\t\t\t.html(res)\n\t\t\t\t\t\t\t\t\t.trigger('change');\n\t\t\t\t\t\t\t\tfilteridSelect2.closest('tr').show();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t\tfilteridSelect2.on('change', function() {\n\t\t\t\t\t\t\tif (!filteridSelect2.val()) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\t\t\tmodule: 'Home',\n\t\t\t\t\t\t\t\tview: 'MiniListWizard',\n\t\t\t\t\t\t\t\tstep: 'step3',\n\t\t\t\t\t\t\t\tselectedModule: moduleNameSelect2.val(),\n\t\t\t\t\t\t\t\tfilterid: filteridSelect2.val()\n\t\t\t\t\t\t\t}).done(function(res) {\n\t\t\t\t\t\t\t\tconst responseHTML = $(res);\n\t\t\t\t\t\t\t\tconst fieldsHTML = responseHTML.find('select[name=\"fields\"]').html();\n\t\t\t\t\t\t\t\tconst filterFieldsHTML = responseHTML.find('select[name=\"filter_fields\"]').html();\n\t\t\t\t\t\t\t\tfieldsSelectDOM\n\t\t\t\t\t\t\t\t\t.empty()\n\t\t\t\t\t\t\t\t\t.html(fieldsHTML)\n\t\t\t\t\t\t\t\t\t.trigger('change');\n\t\t\t\t\t\t\t\tfieldsSelect2.closest('tr').show();\n\t\t\t\t\t\t\t\tfieldsSelect2\n\t\t\t\t\t\t\t\t\t.data('select2')\n\t\t\t\t\t\t\t\t\t.$selection.find('.select2-search__field')\n\t\t\t\t\t\t\t\t\t.parent()\n\t\t\t\t\t\t\t\t\t.css('width', '100%');\n\t\t\t\t\t\t\t\tfilterFieldsSelectDOM\n\t\t\t\t\t\t\t\t\t.empty()\n\t\t\t\t\t\t\t\t\t.html(filterFieldsHTML)\n\t\t\t\t\t\t\t\t\t.trigger('change');\n\t\t\t\t\t\t\t\tfilterFieldsSelect2.closest('tr').show();\n\t\t\t\t\t\t\t\tfilterFieldsSelect2\n\t\t\t\t\t\t\t\t\t.data('select2')\n\t\t\t\t\t\t\t\t\t.$selection.find('.select2-search__field')\n\t\t\t\t\t\t\t\t\t.parent()\n\t\t\t\t\t\t\t\t\t.css('width', '100%');\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t\tfieldsSelect2.on('change', function() {\n\t\t\t\t\t\t\tif (!fieldsSelect2.val()) {\n\t\t\t\t\t\t\t\tfooter.hide();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tfooter.show();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tform.validationEngine(app.validationEngineOptions);\n\t\t\t\t\t\tform.on('submit', e => {\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\tif (form.validationEngine('validate') === true) {\n\t\t\t\t\t\t\t\tlet selectedFields = [];\n\t\t\t\t\t\t\t\tfieldsSelect2.select2('data').map(obj => {\n\t\t\t\t\t\t\t\t\tselectedFields.push(obj.id);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tthisInstance.saveMiniListWidget(\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tmodule: moduleNameSelect2.val(),\n\t\t\t\t\t\t\t\t\t\tfields: selectedFields,\n\t\t\t\t\t\t\t\t\t\tfilterFields: filterFieldsSelect2.val()\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\telement,\n\t\t\t\t\t\t\t\t\tmoduleNameSelect2.find(':selected').text(),\n\t\t\t\t\t\t\t\t\tfilteridSelect2.val(),\n\t\t\t\t\t\t\t\t\tfilteridSelect2.find(':selected').text(),\n\t\t\t\t\t\t\t\t\tform\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t},\n\t\tsaveMiniListWidget: function(data, element, moduleNameLabel, filterid, filterLabel, form) {\n\t\t\tconst thisInstance = this,\n\t\t\t\tparamsForm = {\n\t\t\t\t\tdata: JSON.stringify(data),\n\t\t\t\t\tblockid: element.data('block-id'),\n\t\t\t\t\tlinkid: element.data('linkid'),\n\t\t\t\t\tlabel: moduleNameLabel + ' - ' + filterLabel,\n\t\t\t\t\ttitle: form.find('[name=\"widgetTitle\"]').val(),\n\t\t\t\t\tname: 'Mini List',\n\t\t\t\t\tfilterid: filterid,\n\t\t\t\t\tisdefault: 0,\n\t\t\t\t\theight: 4,\n\t\t\t\t\twidth: 4,\n\t\t\t\t\towners_all: ['mine', 'all', 'users', 'groups'],\n\t\t\t\t\tdefault_owner: 'mine',\n\t\t\t\t\tdashboardId: thisInstance.getCurrentDashboard()\n\t\t\t\t},\n\t\t\t\tsourceModule = $('[name=\"selectedModuleName\"]').val();\n\t\t\tthisInstance.saveWidget(paramsForm, 'add', sourceModule, paramsForm.linkid).done(function(data) {\n\t\t\t\tlet result = data['result'],\n\t\t\t\t\tparams = {};\n\t\t\t\tif (data['success']) {\n\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\tparamsForm['id'] = result['id'];\n\t\t\t\t\tparamsForm['status'] = result['status'];\n\t\t\t\t\tparams['text'] = result['text'];\n\t\t\t\t\tparams['type'] = 'success';\n\t\t\t\t\tlet linkElement = element.clone();\n\t\t\t\t\tlinkElement.data('name', 'MiniList');\n\t\t\t\t\tlinkElement.data('id', result['wid']);\n\t\t\t\t\tthisInstance.addWidget(\n\t\t\t\t\t\tlinkElement,\n\t\t\t\t\t\t'index.php?module=Home&view=ShowWidget&name=MiniList&linkid=' +\n\t\t\t\t\t\t\telement.data('linkid') +\n\t\t\t\t\t\t\t'&widgetid=' +\n\t\t\t\t\t\t\tresult['wid'] +\n\t\t\t\t\t\t\t'&active=0'\n\t\t\t\t\t);\n\t\t\t\t\tVtiger_Helper_Js.showMessage(params);\n\t\t\t\t} else {\n\t\t\t\t\tlet message = data['error']['message'],\n\t\t\t\t\t\terrorField;\n\t\t\t\t\tif (data['error']['code'] != 513) {\n\t\t\t\t\t\terrorField = form.find('[name=\"fieldName\"]');\n\t\t\t\t\t} else {\n\t\t\t\t\t\terrorField = form.find('[name=\"fieldLabel\"]');\n\t\t\t\t\t}\n\t\t\t\t\terrorField.validationEngine('showPrompt', message, 'error', 'topLeft', true);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tsaveWidget: function(form, mode, sourceModule, linkid) {\n\t\t\tvar aDeferred = $.Deferred();\n\t\t\tvar progressIndicatorElement = $.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (typeof sourceModule === 'undefined') {\n\t\t\t\tsourceModule = app.getModuleName();\n\t\t\t}\n\t\t\tvar params = {\n\t\t\t\tform: form,\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tsourceModule: sourceModule,\n\t\t\t\taction: 'Widget',\n\t\t\t\tmode: mode,\n\t\t\t\taddToUser: true,\n\t\t\t\tlinkid: linkid\n\t\t\t};\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function(data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t})\n\t\t\t\t.fail(function(error) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\taDeferred.reject(error);\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\tregisterTabModules: function() {\n\t\t\tvar thisInstance = this;\n\t\t\t$('.selectDashboradView li').on('click', function(e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\t$('.selectDashboradView li').removeClass('active');\n\t\t\t\tcurrentTarget.addClass('active');\n\t\t\t\tvar params = {\n\t\t\t\t\tmodule: currentTarget.data('module'),\n\t\t\t\t\tview: app.getViewName(),\n\t\t\t\t\tsourceModule: app.getModuleName(),\n\t\t\t\t\tdashboardId: thisInstance.getCurrentDashboard()\n\t\t\t\t};\n\t\t\t\tAppConnector.request(params).done(function(data) {\n\t\t\t\t\t$('.dashboardViewContainer').html(data);\n\t\t\t\t\tthisInstance.noCache = true;\n\t\t\t\t\tthisInstance.registerEvents();\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Remove widget from list\n\t\t */\n\t\tremoveWidgetFromList: function() {\n\t\t\tconst thisInstance = this;\n\t\t\t$('.dashboardHeading').on('click', '.removeWidgetFromList', function(e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tvar id = currentTarget.data('widget-id');\n\t\t\t\tvar params = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\taction: 'Widget',\n\t\t\t\t\tmode: 'removeWidgetFromList',\n\t\t\t\t\twidgetid: id\n\t\t\t\t};\n\t\t\t\tAppConnector.request(params).done(function(data) {\n\t\t\t\t\tvar params = {\n\t\t\t\t\t\ttext: app.vtranslate('JS_WIDGET_DELETED'),\n\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t};\n\t\t\t\t\tVtiger_Helper_Js.showMessage(params);\n\t\t\t\t\tcurrentTarget.closest('.js-widget-list__item').remove();\n\t\t\t\t\tif ($('.js-widget-list .js-widget-list__item').length < 1) {\n\t\t\t\t\t\t$('.js-widget-list')\n\t\t\t\t\t\t\t.prev('.js-widget-predefined')\n\t\t\t\t\t\t\t.addClass('d-none');\n\t\t\t\t\t}\n\t\t\t\t\tthisInstance.updateLazyWidget();\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Updates tablet scroll top position\n\t\t */\n\t\tregisterTabletScrollEvent() {\n\t\t\tif (!app.touchDevice || $(window).width() < app.breakpoints.sm) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet scollbarContainer = $('.js-tablet-scroll');\n\t\t\tscollbarContainer.parent().removeClass('d-none');\n\n\t\t\tlet scollbarContainerH = scollbarContainer.outerHeight(),\n\t\t\t\tscollbarOffsetTop = scollbarContainer.offset().top,\n\t\t\t\tmaxOffset = $('.js-header').outerHeight() + 8;\n\n\t\t\tthis.scrollContainer.on('scroll', () => {\n\t\t\t\tif (this.scrollContainer.scrollTop() + maxOffset >= scollbarOffsetTop) {\n\t\t\t\t\tscollbarContainer.css({ top: maxOffset });\n\t\t\t\t} else {\n\t\t\t\t\tscollbarContainer.css({\n\t\t\t\t\t\ttop: scollbarOffsetTop - this.scrollContainer.scrollTop(),\n\t\t\t\t\t\theight: scollbarContainerH + this.scrollContainer.scrollTop()\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Updates list of predefined widgets after changed dashboard\n\t\t */\n\t\tregisterUpdatePredefinedWidgets: function() {\n\t\t\tlet container = $('.js-predefined-widgets');\n\t\t\tcontainer.off('click', '.js-widget-list__item');\n\t\t\tcontainer.on('click', '.js-widget-list__item', e => {\n\t\t\t\tif (!$(e.target).hasClass('removeWidgetFromList')) {\n\t\t\t\t\tthis.addWidget($(e.currentTarget), $(e.currentTarget).data('widgetUrl'));\n\t\t\t\t}\n\t\t\t});\n\t\t\tAppConnector.request({\n\t\t\t\tview: 'BasicAjax',\n\t\t\t\tmode: 'getDashBoardPredefinedWidgets',\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tdashboardId: this.getCurrentDashboard()\n\t\t\t}).done(data => {\n\t\t\t\tcontainer.html(data);\n\t\t\t});\n\t\t},\n\t\taddWidget(element, url) {\n\t\t\telement = $(element);\n\t\t\tvar linkId = element.data('linkid');\n\t\t\tvar name = element.data('name');\n\t\t\tvar widgetId = element.data('id');\n\t\t\telement.remove();\n\t\t\tif ($('.js-widget-list .js-widget-list__item').length < 1) {\n\t\t\t\t$('.js-widget-list')\n\t\t\t\t\t.prev('.js-widget-predefined')\n\t\t\t\t\t.addClass('d-none');\n\t\t\t}\n\t\t\tvar widgetContainer = $(\n\t\t\t\t'<div class=\"grid-stack-item js-css-element-queries\" data-js=\"css-element-queries\"><div id=\"' +\n\t\t\t\t\tlinkId +\n\t\t\t\t\t'-' +\n\t\t\t\t\twidgetId +\n\t\t\t\t\t'\" data-name=\"' +\n\t\t\t\t\tname +\n\t\t\t\t\t'\" data-mode=\"open\" class=\"grid-stack-item-content dashboardWidget new\"></div></div>'\n\t\t\t);\n\t\t\twidgetContainer.find('.dashboardWidget').data('url', url);\n\t\t\tvar width = element.data('width');\n\t\t\tvar height = element.data('height');\n\t\t\tVtiger_DashBoard_Js.grid.addWidget(widgetContainer, 0, 0, width, height);\n\t\t\tVtiger_DashBoard_Js.currentInstance.loadWidget(widgetContainer.find('.grid-stack-item-content'));\n\t\t},\n\t\tregisterEvents: function() {\n\t\t\tthis.registerGrid();\n\t\t\tthis.registerRefreshWidget();\n\t\t\tthis.removeWidget();\n\t\t\tthis.registerDatePickerHideInitiater();\n\t\t\tthis.registerShowMailBody();\n\t\t\tthis.registerChangeMailUser();\n\t\t\tthis.registerMiniListWidget();\n\t\t\tthis.registerChartFilterWidget();\n\t\t\tthis.registerTabModules();\n\t\t\tthis.removeWidgetFromList();\n\t\t\tthis.registerSelectDashboard();\n\t\t\tthis.registerTabletScrollEvent();\n\t\t\tthis.registerUpdatePredefinedWidgets();\n\t\t\tElementQueries.listen();\n\t\t}\n\t}\n);\n"],"names":["$","Class","grid","currentInstance","scrollContainer","restrictContentDrag","container","on","e","target","isHeaderElement","closest","length","stopPropagation","noCache","instancesCache","init","Vtiger_DashBoard_Js","getContainer","getCurrentDashboard","data","getWidgetInstance","widgetContainer","attr","id","Vtiger_Widget_Js","getInstance","widgetName","registerGrid","gridstack","verticalMargin","alwaysShowResizeHandle","test","navigator","userAgent","thisInstance","savePositions","loadWidgets","width","parent","css","parentWidth","widgets","widgetRowColPositions","widgetSizes","index","len","widget","find","JSON","stringify","row","col","height","updateLazyWidget","AppConnector","request","module","app","getModuleName","action","position","size","scrollTop","window","breakpoints","sm","showNewScrollbar","Lazy","threshold","appendScroll","widgetLoader","element","loadWidget","urlParams","mode","sourceModule","progressIndicator","cache","userId","CONFIG","cacheGet","name","cecheUrl","done","html","self","adjustHeightWidget","App","Fields","Picklist","showSelect2ElementView","trigger","widgetPostLoadEvent","remove","outerHeight","adjustedHeight","headerHeight","widgetContent","wheelPropagation","registerRefreshWidget","currentTarget","widgetInstnace","refreshWidget","removeWidget","listItem","parents","url","widgetTitle","message","vtranslate","Vtiger_Helper_Js","showConfirmationBox","response","success","fadeOut","inArray","prev","removeClass","result","linkid","title","deleteFromList","divider","insertBefore","append","fail","registerSelectDashboard","blockInfo","enabled","dashboardId","params","view","getViewName","progressIndicatorElement","registerEvents","registerDatePickerHideInitiater","dashboardWidgetHeader","addClickOutSideEvent","date","DatePickerHide","blur","registerShowMailBody","mailBody","bodyIcon","show","addClass","hide","registerChangeMailUser","contentContainer","optionSelected","val","widgetPostRefereshEvent","registerChartFilterWidget","off","showModalWindow","wizardContainer","form","event","keyCode","chartType","moduleNameSelectDOM","sectorContainer","placeholder","step1","step2","step3","footer","value","moduleNameSelect2","step","selectedModule","step2Response","after","valueTypeElement","filtersIdElement","filtersId","valueType","step3Response","last","groupField","step4Response","step4","registerModalEvents","preventDefault","InvalidFields","formAlignmentAfterValidation","save","selectedModuleLabel","text","selectedFiltersId","Array","isArray","join","each","is","prop","saveChartFilterWidget","selectedFieldLabel","moduleNameLabel","filterLabel","groupFieldName","label","blockid","filterid","isdefault","owners_all","default_owner","saveWidget","paramsForm","hideModalWindow","clone","linkElement","addWidget","showMessage","errorField","validationEngine","registerMiniListWidget","filteridSelectDOM","fieldsSelectDOM","filterFieldsSelectDOM","filteridSelect2","dropdownParent","fieldsSelect2","closeOnSelect","maximumSelectionLength","filterFieldsSelect2","res","empty","fieldsHTML","responseHTML","filterFieldsHTML","$selection","validationEngineOptions","select2","map","selectedFields","push","obj","saveMiniListWidget","fields","filterFields","Deferred","addToUser","aDeferred","resolve","error","reject","promise","registerTabModules","removeWidgetFromList","widgetid","type","registerTabletScrollEvent","touchDevice","scollbarContainer","scollbarOffsetTop","offset","top","maxOffset","scollbarContainerH","registerUpdatePredefinedWidgets","hasClass","widgetId","linkId","ElementQueries","listen"],"mappings":"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"}