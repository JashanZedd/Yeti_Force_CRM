{"version":3,"file":"DashBoard.min.js","sources":["DashBoard.js"],"sourcesContent":["/*+**********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.1\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n * Contributor(s): YetiForce.com\n ************************************************************************************/\n'use strict';\n\n$.Class(\n\t'Vtiger_DashBoard_Js',\n\t{\n\t\tgrid: false,\n\t\t//static property which will store the instance of dashboard\n\t\tcurrentInstance: false,\n\t\tscrollContainer: false,\n\t\trestrictContentDrag: function(container) {\n\t\t\tcontainer.on('mousedown.draggable', function(e) {\n\t\t\t\tvar element = $(e.target);\n\t\t\t\tvar isHeaderElement = element.closest('.dashboardWidgetHeader').length > 0 ? true : false;\n\t\t\t\tif (isHeaderElement) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t//Stop the event propagation so that drag will not start for contents\n\t\t\t\te.stopPropagation();\n\t\t\t});\n\t\t}\n\t},\n\t{\n\t\tcontainer: false,\n\t\tnoCache: false,\n\t\tinstancesCache: {},\n\t\tinit: function() {\n\t\t\tVtiger_DashBoard_Js.currentInstance = this;\n\t\t},\n\t\tgetContainer: function() {\n\t\t\tif (this.noCache == true || this.container == false) {\n\t\t\t\tthis.container = $('.grid-stack');\n\t\t\t}\n\t\t\treturn this.container;\n\t\t},\n\t\tgetCurrentDashboard: function() {\n\t\t\tlet dashboardId = $('.selectDashboard li a.active').closest('li').data('id');\n\t\t\tif(!dashboardId){\n\t\t\t\tdashboardId = 1;\n\t\t\t}\n\t\t\treturn dashboardId;\n\t\t},\n\t\tgetWidgetInstance: function(widgetContainer) {\n\t\t\tvar id = widgetContainer.attr('id');\n\t\t\tif (this.noCache || !(id in this.instancesCache)) {\n\t\t\t\tvar widgetName = widgetContainer.data('name');\n\t\t\t\tthis.instancesCache[id] = Vtiger_Widget_Js.getInstance(widgetContainer, widgetName);\n\t\t\t}\n\t\t\treturn this.instancesCache[id];\n\t\t},\n\t\tregisterGrid: function() {\n\t\t\tconst thisInstance = this;\n\t\t\tVtiger_DashBoard_Js.grid = this.getContainer()\n\t\t\t\t.gridstack({\n\t\t\t\t\tverticalMargin: '0.5rem',\n\t\t\t\t\talwaysShowResizeHandle: /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(\n\t\t\t\t\t\tnavigator.userAgent\n\t\t\t\t\t)\n\t\t\t\t})\n\t\t\t\t.data('gridstack');\n\t\t\t$('.grid-stack').on('change', function(event, ui) {\n\t\t\t\tthisInstance.savePositions($('.grid-stack-item'));\n\t\t\t});\n\t\t\t// load widgets after grid initialization to prevent too early lazy loading - visible viewport changes\n\t\t\tthis.loadWidgets();\n\t\t\t// recalculate positions with scrollbars\n\t\t\tif (\n\t\t\t\tthis.getContainer().width() !==\n\t\t\t\tthis.getContainer()\n\t\t\t\t\t.parent()\n\t\t\t\t\t.width()\n\t\t\t) {\n\t\t\t\tconst parentWidth = thisInstance\n\t\t\t\t\t.getContainer()\n\t\t\t\t\t.parent()\n\t\t\t\t\t.width();\n\t\t\t\tthis.getContainer().css('width', parentWidth + 'px');\n\t\t\t}\n\t\t},\n\t\tsavePositions: function(widgets) {\n\t\t\tvar widgetRowColPositions = {},\n\t\t\t\twidgetSizes = {};\n\t\t\tfor (var index = 0, len = widgets.length; index < len; ++index) {\n\t\t\t\tvar widget = $(widgets[index]);\n\t\t\t\twidgetRowColPositions[widget.find('.grid-stack-item-content').attr('id')] = JSON.stringify({\n\t\t\t\t\trow: widget.attr('data-gs-y'),\n\t\t\t\t\tcol: widget.attr('data-gs-x')\n\t\t\t\t});\n\t\t\t\twidgetSizes[widget.find('.grid-stack-item-content').attr('id')] = JSON.stringify({\n\t\t\t\t\twidth: widget.attr('data-gs-width'),\n\t\t\t\t\theight: widget.attr('data-gs-height')\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis.updateLazyWidget();\n\t\t\tAppConnector.request({\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\taction: 'SaveWidgetPositions',\n\t\t\t\tposition: widgetRowColPositions,\n\t\t\t\tsize: widgetSizes\n\t\t\t});\n\t\t},\n\t\tupdateLazyWidget() {\n\t\t\tconst scrollTop = this.scrollContainer.scrollTop();\n\t\t\tthis.scrollContainer.scrollTop(scrollTop + 1).scrollTop(scrollTop);\n\t\t},\n\t\tloadWidgets: function() {\n\t\t\tconst thisInstance = this;\n\t\t\tthis.scrollContainer = App.Components.Scrollbar.page.element;\n\t\t\tif (!Quasar.plugins.Platform.is.desktop) {\n\t\t\t\tthis.scrollContainer = $('.bodyContent');\n\t\t\t\tapp.showNewScrollbar(this.scrollContainer);\n\t\t\t}\n\t\t\tthisInstance\n\t\t\t\t.getContainer()\n\t\t\t\t.find('.dashboardWidget')\n\t\t\t\t.Lazy({\n\t\t\t\t\tthreshold: 0,\n\t\t\t\t\tappendScroll: this.scrollContainer,\n\t\t\t\t\twidgetLoader(element) {\n\t\t\t\t\t\tthisInstance.loadWidget(element);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\tthis.updateLazyWidget(this.scrollContainer);\n\t\t},\n\t\tloadWidget: function(widgetContainer) {\n\t\t\tconst self = this;\n\t\t\tlet urlParams = widgetContainer.data('url');\n\t\t\tlet mode = widgetContainer.data('mode');\n\t\t\tlet moduleName = app.getModuleName();\n\t\t\tlet sourceModule = $('a.active', 'ul.selectDashboradView')\n\t\t\t\t.parent()\n\t\t\t\t.data('module');\n\t\t\twidgetContainer.progressIndicator();\n\t\t\tif (mode === 'open') {\n\t\t\t\tlet name = widgetContainer.data('name');\n\t\t\t\tlet cache = widgetContainer.data('cache');\n\t\t\t\tlet userId = CONFIG.userId;\n\t\t\t\tif (cache === 1) {\n\t\t\t\t\tlet cecheUrl = app.cacheGet(name + userId, false);\n\t\t\t\t\turlParams = cecheUrl ? cecheUrl : urlParams;\n\t\t\t\t}\n\t\t\t\tAppConnector.request(urlParams).done(data => {\n\t\t\t\t\twidgetContainer.html(data);\n\t\t\t\t\twidgetContainer.closest('.grid-stack').on('gsresizestop', (event, elem) => {\n\t\t\t\t\t\tself.adjustHeightWidget(widgetContainer);\n\t\t\t\t\t});\n\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(widgetContainer.find('.select2'));\n\t\t\t\t\tself.getWidgetInstance(widgetContainer);\n\t\t\t\t\twidgetContainer.trigger(Vtiger_Widget_Js.widgetPostLoadEvent);\n\t\t\t\t\tself.adjustHeightWidget(widgetContainer);\n\t\t\t\t\tif (sourceModule && moduleName != sourceModule) {\n\t\t\t\t\t\t$('a.js-widget-remove', widgetContainer).remove();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Adjust the height of the widget.\n\t\t * @param {jQuery} widgetContainer\n\t\t */\n\t\tadjustHeightWidget(widgetContainer) {\n\t\t\tconst headerHeight = widgetContainer.find('.dashboardWidgetHeader').outerHeight();\n\t\t\tlet adjustedHeight = widgetContainer.height() - headerHeight;\n\t\t\tif (widgetContainer.find('.dashboardWidgetFooter').length) {\n\t\t\t\tadjustedHeight -= widgetContainer.find('.dashboardWidgetFooter').outerHeight();\n\t\t\t}\n\t\t\tconst widgetContent = widgetContainer.find('.dashboardWidgetContent');\n\t\t\twidgetContent.css('max-height', adjustedHeight + 'px');\n\t\t\tapp.showNewScrollbar(widgetContent, { wheelPropagation: true });\n\t\t},\n\t\tregisterRefreshWidget: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tthis.getContainer().on('click', 'a[name=\"drefresh\"]', function(e) {\n\t\t\t\tvar element = $(e.currentTarget);\n\t\t\t\tvar parent = element.closest('.dashboardWidget');\n\t\t\t\tvar widgetInstnace = thisInstance.getWidgetInstance(parent);\n\t\t\t\twidgetInstnace.refreshWidget();\n\t\t\t\treturn;\n\t\t\t});\n\t\t},\n\t\tremoveWidget: function() {\n\t\t\tconst thisInstance = this;\n\t\t\tthis.getContainer().on('click', '.js-widget-remove', function(e) {\n\t\t\t\tlet element = $(e.currentTarget),\n\t\t\t\t\tlistItem = $(element).parents('.grid-stack-item'),\n\t\t\t\t\twidth = listItem.attr('data-gs-width'),\n\t\t\t\t\theight = listItem.attr('data-gs-height'),\n\t\t\t\t\turl = element.data('url'),\n\t\t\t\t\tparent = element.closest('.dashboardWidgetHeader').parent(),\n\t\t\t\t\twidgetName = parent.data('name'),\n\t\t\t\t\twidgetTitle = parent.find('.dashboardTitle').attr('title'),\n\t\t\t\t\tmessage =\n\t\t\t\t\t\tapp.vtranslate('JS_ARE_YOU_SURE_TO_DELETE_WIDGET') +\n\t\t\t\t\t\t' [' +\n\t\t\t\t\t\twidgetTitle +\n\t\t\t\t\t\t']. ' +\n\t\t\t\t\t\tapp.vtranslate('JS_ARE_YOU_SURE_TO_DELETE_WIDGET_INFO');\n\t\t\t\tVtiger_Helper_Js.showConfirmationBox({ message: message })\n\t\t\t\t\t.done(function(e) {\n\t\t\t\t\t\tAppConnector.request(url).done(function(response) {\n\t\t\t\t\t\t\tif (response.success) {\n\t\t\t\t\t\t\t\tlet nonReversableWidgets = [];\n\t\t\t\t\t\t\t\tparent.fadeOut('slow', function() {\n\t\t\t\t\t\t\t\t\tparent.remove();\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tif ($.inArray(widgetName, nonReversableWidgets) == -1) {\n\t\t\t\t\t\t\t\t\tVtiger_DashBoard_Js.grid.removeWidget(element.closest('.grid-stack-item'));\n\t\t\t\t\t\t\t\t\t$('.js-widget-list')\n\t\t\t\t\t\t\t\t\t\t.prev('.js-widget-predefined')\n\t\t\t\t\t\t\t\t\t\t.removeClass('d-none');\n\t\t\t\t\t\t\t\t\tlet data = `<a class=\"js-widget-list__item dropdown-item d-flex\"\n\t\t\t\t\t\t\t\t\t\thref=\"#\"\n\t\t\t\t\t\t\t\t\t\tdata-widget-url=\"${response.result.url}\"\n\t\t\t\t\t\t\t\t\t\tdata-linkid=\"${response.result.linkid}\"\n\t\t\t\t\t\t\t\t\t\tdata-name=\"${response.result.name}\"\n\t\t\t\t\t\t\t\t\t\tdata-width=\"${width}\"\n\t\t\t\t\t\t\t\t\t\tdata-height=\"${height}\" data-js=\"remove | click\">${response.result.title}`;\n\t\t\t\t\t\t\t\t\tif (response.result.deleteFromList) {\n\t\t\t\t\t\t\t\t\t\tdata += `<span class=\"text-danger pl-5 ml-auto\">\n\t\t\t\t\t\t\t\t\t\t\t<span class=\"fas fa-trash-alt removeWidgetFromList u-hover-opacity\" data-widget-id=\"${response.result.id}\" data-js=\"click\"></span>\n\t\t\t\t\t\t\t\t\t\t</span>`;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tdata += `</a>`;\n\t\t\t\t\t\t\t\t\tlet divider = $('.js-widget-list .dropdown-divider');\n\t\t\t\t\t\t\t\t\tif (divider.length) {\n\t\t\t\t\t\t\t\t\t\t$(data).insertBefore(divider);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t$('.js-widget-list').append(data);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tthisInstance.updateLazyWidget();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function(error, err) {});\n\t\t\t});\n\t\t},\n\t\tregisterSelectDashboard: function() {\n\t\t\tvar thisInstance = this;\n\t\t\t$('.selectDashboard li').on('click', function(e) {\n\t\t\t\tvar progressIndicatorElement = $.progressIndicator({\n\t\t\t\t\tposition: 'html',\n\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\tenabled: true\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tvar dashboardId = currentTarget.data('id');\n\t\t\t\tvar params = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tview: app.getViewName(),\n\t\t\t\t\tdashboardId: dashboardId\n\t\t\t\t};\n\t\t\t\tAppConnector.request(params).done(function(data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t$('.dashboardViewContainer').html(data);\n\t\t\t\t\tthisInstance.noCache = true;\n\t\t\t\t\tthisInstance.registerEvents();\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterDatePickerHideInitiater: function() {\n\t\t\tvar container = this.getContainer();\n\t\t\tcontainer.on('click', 'input.dateRange', function(e) {\n\t\t\t\tvar widgetContainer = $(e.currentTarget).closest('.dashboardWidget');\n\t\t\t\tvar dashboardWidgetHeader = $('.dashboardWidgetHeader', widgetContainer);\n\n\t\t\t\tvar callbackFunction = function() {\n\t\t\t\t\tvar date = $('.dateRange');\n\t\t\t\t\tdate.DatePickerHide();\n\t\t\t\t\tdate.blur();\n\t\t\t\t};\n\t\t\t\t//adding clickoutside event on the dashboardWidgetHeader\n\t\t\t\tVtiger_Helper_Js.addClickOutSideEvent(dashboardWidgetHeader.find('.dateRange'), callbackFunction);\n\t\t\t\treturn false;\n\t\t\t});\n\t\t},\n\t\tregisterShowMailBody: function() {\n\t\t\tvar container = this.getContainer();\n\t\t\tcontainer.on('click', '.showMailBody', function(e) {\n\t\t\t\tvar widgetContainer = $(e.currentTarget).closest('.mailRow');\n\t\t\t\tvar mailBody = widgetContainer.find('.mailBody');\n\t\t\t\tvar bodyIcon = $(e.currentTarget).find('.body-icon');\n\t\t\t\tif (mailBody.css('display') == 'none') {\n\t\t\t\t\tmailBody.show();\n\t\t\t\t\tbodyIcon.removeClass('fa-chevron-down').addClass('fa-chevron-up');\n\t\t\t\t} else {\n\t\t\t\t\tmailBody.hide();\n\t\t\t\t\tbodyIcon.removeClass('fa-chevron-up').addClass('fa-chevron-down');\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterChangeMailUser: function() {\n\t\t\tvar container = this.getContainer();\n\n\t\t\tcontainer.on('change', '#mailUserList', function(e) {\n\t\t\t\tvar element = $(e.currentTarget);\n\t\t\t\tvar parent = element.closest('.dashboardWidget');\n\t\t\t\tvar contentContainer = parent.find('.dashboardWidgetContent');\n\t\t\t\tvar optionSelected = $('option:selected', this);\n\t\t\t\tvar url = parent.data('url') + '&user=' + optionSelected.val();\n\n\t\t\t\tvar params = {};\n\t\t\t\tparams.url = url;\n\t\t\t\tparams.data = {};\n\t\t\t\tcontentContainer.progressIndicator({});\n\t\t\t\tAppConnector.request(params)\n\t\t\t\t\t.done(function(data) {\n\t\t\t\t\t\tcontentContainer.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tparent.html(data).trigger(Vtiger_Widget_Js.widgetPostRefereshEvent);\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function() {\n\t\t\t\t\t\tcontentContainer.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterChartFilterWidget: function() {\n\t\t\tvar thisInstance = this;\n\t\t\t$('.dashboardHeading')\n\t\t\t\t.off('click', '.addChartFilter')\n\t\t\t\t.on('click', '.addChartFilter', function(e) {\n\t\t\t\t\tvar element = $(e.currentTarget);\n\t\t\t\t\tapp.showModalWindow(null, 'index.php?module=Home&view=ChartFilter&step=step1', function(\n\t\t\t\t\t\twizardContainer\n\t\t\t\t\t) {\n\t\t\t\t\t\tvar form = $('form', wizardContainer);\n\t\t\t\t\t\tform.on('keypress', function(event) {\n\t\t\t\t\t\t\treturn event.keyCode != 13;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tvar sectorContainer = form.find('.sectorContainer');\n\t\t\t\t\t\tvar chartType = $('select[name=\"chartType\"]', wizardContainer);\n\t\t\t\t\t\tvar moduleNameSelectDOM = $('select[name=\"module\"]', wizardContainer);\n\t\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(sectorContainer.find('.select2'));\n\t\t\t\t\t\tvar moduleNameSelect2 = App.Fields.Picklist.showSelect2ElementView(moduleNameSelectDOM, {\n\t\t\t\t\t\t\tplaceholder: app.vtranslate('JS_SELECT_MODULE')\n\t\t\t\t\t\t});\n\t\t\t\t\t\tvar step1 = $('.step1', wizardContainer);\n\t\t\t\t\t\tvar step2 = $('.step2', wizardContainer);\n\t\t\t\t\t\tvar step3 = $('.step3', wizardContainer);\n\t\t\t\t\t\tvar footer = $('.modal-footer', wizardContainer);\n\t\t\t\t\t\tstep2.remove();\n\t\t\t\t\t\tstep3.remove();\n\t\t\t\t\t\tfooter.hide();\n\t\t\t\t\t\tchartType.on('change', function(e) {\n\t\t\t\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\t\t\t\tvar value = currentTarget.val();\n\t\t\t\t\t\t\tif (value == 'Barchat' || value == 'Horizontal') {\n\t\t\t\t\t\t\t\tform.find('.isColorContainer').removeClass('d-none');\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tform.find('.isColorContainer').addClass('d-none');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (wizardContainer.find('#widgetStep').val() == 4) {\n\t\t\t\t\t\t\t\twizardContainer.find('.step3 .groupField').trigger('change');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tmoduleNameSelect2.on('change', function() {\n\t\t\t\t\t\t\tif (!moduleNameSelect2.val()) return;\n\t\t\t\t\t\t\tfooter.hide();\n\t\t\t\t\t\t\twizardContainer.find('.step2').remove();\n\t\t\t\t\t\t\twizardContainer.find('.step3').remove();\n\t\t\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\t\t\tmodule: 'Home',\n\t\t\t\t\t\t\t\tview: 'ChartFilter',\n\t\t\t\t\t\t\t\tstep: 'step2',\n\t\t\t\t\t\t\t\tchartType: chartType.val(),\n\t\t\t\t\t\t\t\tselectedModule: moduleNameSelect2.val()\n\t\t\t\t\t\t\t}).done(function(step2Response) {\n\t\t\t\t\t\t\t\tstep1.after(step2Response);\n\t\t\t\t\t\t\t\twizardContainer.find('#widgetStep').val(2);\n\t\t\t\t\t\t\t\tconst step2 = wizardContainer.find('.step2');\n\t\t\t\t\t\t\t\tfooter.hide();\n\t\t\t\t\t\t\t\tconst filtersIdElement = step2.find('.filtersId');\n\t\t\t\t\t\t\t\tconst valueTypeElement = step2.find('.valueType');\n\t\t\t\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(filtersIdElement);\n\t\t\t\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(valueTypeElement);\n\t\t\t\t\t\t\t\tstep2.find('.filtersId, .valueType').on('change', function() {\n\t\t\t\t\t\t\t\t\twizardContainer.find('.step3').remove();\n\t\t\t\t\t\t\t\t\twizardContainer.find('.step4').remove();\n\t\t\t\t\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\t\t\t\t\tmodule: 'Home',\n\t\t\t\t\t\t\t\t\t\tview: 'ChartFilter',\n\t\t\t\t\t\t\t\t\t\tstep: 'step3',\n\t\t\t\t\t\t\t\t\t\tselectedModule: moduleNameSelect2.val(),\n\t\t\t\t\t\t\t\t\t\tchartType: chartType.val(),\n\t\t\t\t\t\t\t\t\t\tfiltersId: filtersIdElement.val(),\n\t\t\t\t\t\t\t\t\t\tvalueType: valueTypeElement.val()\n\t\t\t\t\t\t\t\t\t}).done(function(step3Response) {\n\t\t\t\t\t\t\t\t\t\tstep2.last().after(step3Response);\n\t\t\t\t\t\t\t\t\t\twizardContainer.find('#widgetStep').val(3);\n\t\t\t\t\t\t\t\t\t\tvar step3 = wizardContainer.find('.step3');\n\t\t\t\t\t\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(step3.find('select'));\n\t\t\t\t\t\t\t\t\t\tfooter.hide();\n\t\t\t\t\t\t\t\t\t\tstep3.find('.groupField').on('change', function() {\n\t\t\t\t\t\t\t\t\t\t\twizardContainer.find('.step4').remove();\n\t\t\t\t\t\t\t\t\t\t\tvar groupField = $(this);\n\t\t\t\t\t\t\t\t\t\t\tif (!groupField.val()) return;\n\t\t\t\t\t\t\t\t\t\t\tfooter.show();\n\t\t\t\t\t\t\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\t\t\t\t\t\t\tmodule: 'Home',\n\t\t\t\t\t\t\t\t\t\t\t\tview: 'ChartFilter',\n\t\t\t\t\t\t\t\t\t\t\t\tstep: 'step4',\n\t\t\t\t\t\t\t\t\t\t\t\tselectedModule: moduleNameSelect2.val(),\n\t\t\t\t\t\t\t\t\t\t\t\tfiltersId: filtersIdElement.val(),\n\t\t\t\t\t\t\t\t\t\t\t\tgroupField: groupField.val(),\n\t\t\t\t\t\t\t\t\t\t\t\tchartType: chartType.val()\n\t\t\t\t\t\t\t\t\t\t\t}).done(function(step4Response) {\n\t\t\t\t\t\t\t\t\t\t\t\tstep3.last().after(step4Response);\n\t\t\t\t\t\t\t\t\t\t\t\twizardContainer.find('#widgetStep').val(4);\n\t\t\t\t\t\t\t\t\t\t\t\tvar step4 = wizardContainer.find('.step4');\n\t\t\t\t\t\t\t\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(step4.find('select'));\n\t\t\t\t\t\t\t\t\t\t\t\tapp.registerModalEvents(wizardContainer);\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t\tform.on('submit', function(e) {\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\tlet save = true;\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\tif (form.data('jqv').InvalidFields.length > 0) {\n\t\t\t\t\t\t\t\tapp.formAlignmentAfterValidation(form);\n\t\t\t\t\t\t\t\tsave = false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (save) {\n\t\t\t\t\t\t\t\tconst selectedModule = moduleNameSelect2.val();\n\t\t\t\t\t\t\t\tconst selectedModuleLabel = moduleNameSelect2.find(':selected').text();\n\t\t\t\t\t\t\t\tlet selectedFiltersId = form.find('.filtersId').val();\n\t\t\t\t\t\t\t\tif (Array.isArray(selectedFiltersId)) {\n\t\t\t\t\t\t\t\t\tselectedFiltersId = selectedFiltersId.join(',');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tconst selectedFieldLabel = form\n\t\t\t\t\t\t\t\t\t.find('.groupField')\n\t\t\t\t\t\t\t\t\t.find(':selected')\n\t\t\t\t\t\t\t\t\t.text();\n\t\t\t\t\t\t\t\tconst data = {\n\t\t\t\t\t\t\t\t\tmodule: selectedModule,\n\t\t\t\t\t\t\t\t\tgroupField: form.find('.groupField').val(),\n\t\t\t\t\t\t\t\t\tchartType: chartType.val()\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tform.find('.saveParam').each(function(index, element) {\n\t\t\t\t\t\t\t\t\telement = $(element);\n\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t!(\n\t\t\t\t\t\t\t\t\t\t\telement.is('input') &&\n\t\t\t\t\t\t\t\t\t\t\telement.prop('type') === 'checkbox' &&\n\t\t\t\t\t\t\t\t\t\t\t!element.prop('checked')\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\tdata[element.attr('name')] = element.val();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tthisInstance.saveChartFilterWidget(\n\t\t\t\t\t\t\t\t\tdata,\n\t\t\t\t\t\t\t\t\telement,\n\t\t\t\t\t\t\t\t\tselectedModuleLabel,\n\t\t\t\t\t\t\t\t\tselectedFiltersId,\n\t\t\t\t\t\t\t\t\t'',\n\t\t\t\t\t\t\t\t\tselectedFieldLabel,\n\t\t\t\t\t\t\t\t\tform\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t},\n\t\tsaveChartFilterWidget: function(data, element, moduleNameLabel, filtersId, filterLabel, groupFieldName, form) {\n\t\t\tconst thisInstance = this;\n\t\t\tlet label = moduleNameLabel;\n\t\t\tif (typeof filterLabel !== 'undefined' && filterLabel !== null && filterLabel !== '') {\n\t\t\t\tlabel += ' - ' + filterLabel;\n\t\t\t}\n\t\t\tif (typeof groupFieldName !== 'undefined' && groupFieldName !== null && groupFieldName !== '') {\n\t\t\t\tlabel += ' - ' + groupFieldName;\n\t\t\t}\n\t\t\tconst paramsForm = {\n\t\t\t\tdata: JSON.stringify(data),\n\t\t\t\tblockid: element.data('block-id'),\n\t\t\t\tlinkid: element.data('linkid'),\n\t\t\t\tlabel: label,\n\t\t\t\tname: 'ChartFilter',\n\t\t\t\ttitle: form.find('[name=\"widgetTitle\"]').val(),\n\t\t\t\tfilterid: filtersId,\n\t\t\t\tisdefault: 0,\n\t\t\t\theight: 4,\n\t\t\t\twidth: 4,\n\t\t\t\towners_all: ['mine', 'all', 'users', 'groups'],\n\t\t\t\tdefault_owner: 'mine',\n\t\t\t\tdashboardId: thisInstance.getCurrentDashboard()\n\t\t\t};\n\t\t\tconst sourceModule = $('[name=\"selectedModuleName\"]').val();\n\t\t\tthisInstance.saveWidget(paramsForm, 'add', sourceModule, paramsForm.linkid).done(function(data) {\n\t\t\t\tlet result = data['result'],\n\t\t\t\t\tparams = {};\n\t\t\t\tif (data['success']) {\n\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\tparamsForm['id'] = result['id'];\n\t\t\t\t\tparamsForm['status'] = result['status'];\n\t\t\t\t\tparams['text'] = result['text'];\n\t\t\t\t\tparams['type'] = 'success';\n\t\t\t\t\tlet linkElement = element.clone();\n\t\t\t\t\tlinkElement.data('name', 'ChartFilter');\n\t\t\t\t\tlinkElement.data('id', result['wid']);\n\t\t\t\t\tthisInstance.addWidget(\n\t\t\t\t\t\tlinkElement,\n\t\t\t\t\t\t'index.php?module=Home&view=ShowWidget&name=ChartFilter&linkid=' +\n\t\t\t\t\t\t\telement.data('linkid') +\n\t\t\t\t\t\t\t'&widgetid=' +\n\t\t\t\t\t\t\tresult['wid'] +\n\t\t\t\t\t\t\t'&active=0'\n\t\t\t\t\t);\n\t\t\t\t\tVtiger_Helper_Js.showMessage(params);\n\t\t\t\t} else {\n\t\t\t\t\tlet message = data['error']['message'],\n\t\t\t\t\t\terrorField;\n\t\t\t\t\tif (data['error']['code'] != 513) {\n\t\t\t\t\t\terrorField = form.find('[name=\"fieldName\"]');\n\t\t\t\t\t} else {\n\t\t\t\t\t\terrorField = form.find('[name=\"fieldLabel\"]');\n\t\t\t\t\t}\n\t\t\t\t\terrorField.validationEngine('showPrompt', message, 'error', 'topLeft', true);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterMiniListWidget: function() {\n\t\t\tconst thisInstance = this;\n\t\t\t$('.dashboardHeading')\n\t\t\t\t.off('click', '.addFilter')\n\t\t\t\t.on('click', '.addFilter', function(e) {\n\t\t\t\t\tconst element = $(e.currentTarget);\n\t\t\t\t\tapp.showModalWindow(null, 'index.php?module=Home&view=MiniListWizard&step=step1', function(\n\t\t\t\t\t\twizardContainer\n\t\t\t\t\t) {\n\t\t\t\t\t\tconst form = $('form', wizardContainer);\n\t\t\t\t\t\tform.on('keypress', function(event) {\n\t\t\t\t\t\t\treturn event.keyCode != 13;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tconst moduleNameSelectDOM = $('select[name=\"module\"]', wizardContainer);\n\t\t\t\t\t\tconst filteridSelectDOM = $('select[name=\"filterid\"]', wizardContainer);\n\t\t\t\t\t\tconst fieldsSelectDOM = $('select[name=\"fields\"]', wizardContainer);\n\t\t\t\t\t\tconst filterFieldsSelectDOM = $('select[name=\"filter_fields\"]', wizardContainer);\n\n\t\t\t\t\t\tconst moduleNameSelect2 = App.Fields.Picklist.showSelect2ElementView(moduleNameSelectDOM, {\n\t\t\t\t\t\t\tplaceholder: app.vtranslate('JS_SELECT_MODULE')\n\t\t\t\t\t\t});\n\t\t\t\t\t\tconst filteridSelect2 = App.Fields.Picklist.showSelect2ElementView(filteridSelectDOM, {\n\t\t\t\t\t\t\tplaceholder: app.vtranslate('JS_PLEASE_SELECT_ATLEAST_ONE_OPTION'),\n\t\t\t\t\t\t\tdropdownParent: wizardContainer\n\t\t\t\t\t\t});\n\t\t\t\t\t\tconst fieldsSelect2 = App.Fields.Picklist.showSelect2ElementView(fieldsSelectDOM, {\n\t\t\t\t\t\t\tplaceholder: app.vtranslate('JS_PLEASE_SELECT_ATLEAST_ONE_OPTION'),\n\t\t\t\t\t\t\tcloseOnSelect: true,\n\t\t\t\t\t\t\tmaximumSelectionLength: 6\n\t\t\t\t\t\t});\n\t\t\t\t\t\tconst filterFieldsSelect2 = App.Fields.Picklist.showSelect2ElementView(filterFieldsSelectDOM, {\n\t\t\t\t\t\t\tplaceholder: app.vtranslate('JS_PLEASE_SELECT_ATLEAST_ONE_OPTION')\n\t\t\t\t\t\t});\n\t\t\t\t\t\tconst footer = $('.modal-footer', wizardContainer);\n\n\t\t\t\t\t\tfilteridSelectDOM.closest('tr').hide();\n\t\t\t\t\t\tfieldsSelectDOM.closest('tr').hide();\n\t\t\t\t\t\tfooter.hide();\n\n\t\t\t\t\t\tmoduleNameSelect2.on('change', function() {\n\t\t\t\t\t\t\tif (!moduleNameSelect2.val()) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tfooter.hide();\n\t\t\t\t\t\t\tfieldsSelectDOM.closest('tr').hide();\n\t\t\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\t\t\tmodule: 'Home',\n\t\t\t\t\t\t\t\tview: 'MiniListWizard',\n\t\t\t\t\t\t\t\tstep: 'step2',\n\t\t\t\t\t\t\t\tselectedModule: moduleNameSelect2.val()\n\t\t\t\t\t\t\t}).done(function(res) {\n\t\t\t\t\t\t\t\tfilteridSelectDOM\n\t\t\t\t\t\t\t\t\t.empty()\n\t\t\t\t\t\t\t\t\t.html(res)\n\t\t\t\t\t\t\t\t\t.trigger('change');\n\t\t\t\t\t\t\t\tfilteridSelect2.closest('tr').show();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t\tfilteridSelect2.on('change', function() {\n\t\t\t\t\t\t\tif (!filteridSelect2.val()) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\t\t\tmodule: 'Home',\n\t\t\t\t\t\t\t\tview: 'MiniListWizard',\n\t\t\t\t\t\t\t\tstep: 'step3',\n\t\t\t\t\t\t\t\tselectedModule: moduleNameSelect2.val(),\n\t\t\t\t\t\t\t\tfilterid: filteridSelect2.val()\n\t\t\t\t\t\t\t}).done(function(res) {\n\t\t\t\t\t\t\t\tconst responseHTML = $(res);\n\t\t\t\t\t\t\t\tconst fieldsHTML = responseHTML.find('select[name=\"fields\"]').html();\n\t\t\t\t\t\t\t\tconst filterFieldsHTML = responseHTML.find('select[name=\"filter_fields\"]').html();\n\t\t\t\t\t\t\t\tfieldsSelectDOM\n\t\t\t\t\t\t\t\t\t.empty()\n\t\t\t\t\t\t\t\t\t.html(fieldsHTML)\n\t\t\t\t\t\t\t\t\t.trigger('change');\n\t\t\t\t\t\t\t\tfieldsSelect2.closest('tr').show();\n\t\t\t\t\t\t\t\tfieldsSelect2\n\t\t\t\t\t\t\t\t\t.data('select2')\n\t\t\t\t\t\t\t\t\t.$selection.find('.select2-search__field')\n\t\t\t\t\t\t\t\t\t.parent()\n\t\t\t\t\t\t\t\t\t.css('width', '100%');\n\t\t\t\t\t\t\t\tfilterFieldsSelectDOM\n\t\t\t\t\t\t\t\t\t.empty()\n\t\t\t\t\t\t\t\t\t.html(filterFieldsHTML)\n\t\t\t\t\t\t\t\t\t.trigger('change');\n\t\t\t\t\t\t\t\tfilterFieldsSelect2.closest('tr').show();\n\t\t\t\t\t\t\t\tfilterFieldsSelect2\n\t\t\t\t\t\t\t\t\t.data('select2')\n\t\t\t\t\t\t\t\t\t.$selection.find('.select2-search__field')\n\t\t\t\t\t\t\t\t\t.parent()\n\t\t\t\t\t\t\t\t\t.css('width', '100%');\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t\tfieldsSelect2.on('change', function() {\n\t\t\t\t\t\t\tif (!fieldsSelect2.val()) {\n\t\t\t\t\t\t\t\tfooter.hide();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tfooter.show();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tform.validationEngine(app.validationEngineOptions);\n\t\t\t\t\t\tform.on('submit', e => {\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\tif (form.validationEngine('validate') === true) {\n\t\t\t\t\t\t\t\tlet selectedFields = [];\n\t\t\t\t\t\t\t\tfieldsSelect2.select2('data').map(obj => {\n\t\t\t\t\t\t\t\t\tselectedFields.push(obj.id);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tthisInstance.saveMiniListWidget(\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tmodule: moduleNameSelect2.val(),\n\t\t\t\t\t\t\t\t\t\tfields: selectedFields,\n\t\t\t\t\t\t\t\t\t\tfilterFields: filterFieldsSelect2.val()\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\telement,\n\t\t\t\t\t\t\t\t\tmoduleNameSelect2.find(':selected').text(),\n\t\t\t\t\t\t\t\t\tfilteridSelect2.val(),\n\t\t\t\t\t\t\t\t\tfilteridSelect2.find(':selected').text(),\n\t\t\t\t\t\t\t\t\tform\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t},\n\t\tsaveMiniListWidget: function(data, element, moduleNameLabel, filterid, filterLabel, form) {\n\t\t\tconst thisInstance = this,\n\t\t\t\tparamsForm = {\n\t\t\t\t\tdata: JSON.stringify(data),\n\t\t\t\t\tblockid: element.data('block-id'),\n\t\t\t\t\tlinkid: element.data('linkid'),\n\t\t\t\t\tlabel: moduleNameLabel + ' - ' + filterLabel,\n\t\t\t\t\ttitle: form.find('[name=\"widgetTitle\"]').val(),\n\t\t\t\t\tname: 'Mini List',\n\t\t\t\t\tfilterid: filterid,\n\t\t\t\t\tisdefault: 0,\n\t\t\t\t\theight: 4,\n\t\t\t\t\twidth: 4,\n\t\t\t\t\towners_all: ['mine', 'all', 'users', 'groups'],\n\t\t\t\t\tdefault_owner: 'mine',\n\t\t\t\t\tdashboardId: thisInstance.getCurrentDashboard()\n\t\t\t\t},\n\t\t\t\tsourceModule = $('[name=\"selectedModuleName\"]').val();\n\t\t\tthisInstance.saveWidget(paramsForm, 'add', sourceModule, paramsForm.linkid).done(function(data) {\n\t\t\t\tlet result = data['result'],\n\t\t\t\t\tparams = {};\n\t\t\t\tif (data['success']) {\n\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\tparamsForm['id'] = result['id'];\n\t\t\t\t\tparamsForm['status'] = result['status'];\n\t\t\t\t\tparams['text'] = result['text'];\n\t\t\t\t\tparams['type'] = 'success';\n\t\t\t\t\tlet linkElement = element.clone();\n\t\t\t\t\tlinkElement.data('name', 'MiniList');\n\t\t\t\t\tlinkElement.data('id', result['wid']);\n\t\t\t\t\tthisInstance.addWidget(\n\t\t\t\t\t\tlinkElement,\n\t\t\t\t\t\t'index.php?module=Home&view=ShowWidget&name=MiniList&linkid=' +\n\t\t\t\t\t\t\telement.data('linkid') +\n\t\t\t\t\t\t\t'&widgetid=' +\n\t\t\t\t\t\t\tresult['wid'] +\n\t\t\t\t\t\t\t'&active=0'\n\t\t\t\t\t);\n\t\t\t\t\tVtiger_Helper_Js.showMessage(params);\n\t\t\t\t} else {\n\t\t\t\t\tlet message = data['error']['message'],\n\t\t\t\t\t\terrorField;\n\t\t\t\t\tif (data['error']['code'] != 513) {\n\t\t\t\t\t\terrorField = form.find('[name=\"fieldName\"]');\n\t\t\t\t\t} else {\n\t\t\t\t\t\terrorField = form.find('[name=\"fieldLabel\"]');\n\t\t\t\t\t}\n\t\t\t\t\terrorField.validationEngine('showPrompt', message, 'error', 'topLeft', true);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tsaveWidget: function(form, mode, sourceModule, linkid) {\n\t\t\tvar aDeferred = $.Deferred();\n\t\t\tvar progressIndicatorElement = $.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (typeof sourceModule === 'undefined') {\n\t\t\t\tsourceModule = app.getModuleName();\n\t\t\t}\n\t\t\tvar params = {\n\t\t\t\tform: form,\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tsourceModule: sourceModule,\n\t\t\t\taction: 'Widget',\n\t\t\t\tmode: mode,\n\t\t\t\taddToUser: true,\n\t\t\t\tlinkid: linkid\n\t\t\t};\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function(data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t})\n\t\t\t\t.fail(function(error) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\taDeferred.reject(error);\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\tregisterTabModules: function() {\n\t\t\tvar thisInstance = this;\n\t\t\t$('.selectDashboradView li').on('click', function(e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\t$('.selectDashboradView li').removeClass('active');\n\t\t\t\tcurrentTarget.addClass('active');\n\t\t\t\tvar params = {\n\t\t\t\t\tmodule: currentTarget.data('module'),\n\t\t\t\t\tview: app.getViewName(),\n\t\t\t\t\tsourceModule: app.getModuleName(),\n\t\t\t\t\tdashboardId: thisInstance.getCurrentDashboard()\n\t\t\t\t};\n\t\t\t\tAppConnector.request(params).done(function(data) {\n\t\t\t\t\t$('.dashboardViewContainer').html(data);\n\t\t\t\t\tthisInstance.noCache = true;\n\t\t\t\t\tthisInstance.registerEvents();\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Remove widget from list\n\t\t */\n\t\tremoveWidgetFromList: function() {\n\t\t\tconst thisInstance = this;\n\t\t\t$('.dashboardHeading').on('click', '.removeWidgetFromList', function(e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tvar id = currentTarget.data('widget-id');\n\t\t\t\tvar params = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\taction: 'Widget',\n\t\t\t\t\tmode: 'removeWidgetFromList',\n\t\t\t\t\twidgetid: id\n\t\t\t\t};\n\t\t\t\tAppConnector.request(params).done(function(data) {\n\t\t\t\t\tvar params = {\n\t\t\t\t\t\ttext: app.vtranslate('JS_WIDGET_DELETED'),\n\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t};\n\t\t\t\t\tVtiger_Helper_Js.showMessage(params);\n\t\t\t\t\tcurrentTarget.closest('.js-widget-list__item').remove();\n\t\t\t\t\tif ($('.js-widget-list .js-widget-list__item').length < 1) {\n\t\t\t\t\t\t$('.js-widget-list')\n\t\t\t\t\t\t\t.prev('.js-widget-predefined')\n\t\t\t\t\t\t\t.addClass('d-none');\n\t\t\t\t\t}\n\t\t\t\t\tthisInstance.updateLazyWidget();\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Updates tablet scroll top position\n\t\t */\n\t\tregisterTabletScrollEvent() {\n\t\t\tif (!app.touchDevice || !Quasar.plugins.Platform.is.desktop) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet scollbarContainer = $('.js-tablet-scroll');\n\t\t\tscollbarContainer.parent().removeClass('d-none');\n\n\t\t\tlet scollbarContainerH = scollbarContainer.outerHeight(),\n\t\t\t\tscollbarOffsetTop = scollbarContainer.offset().top,\n\t\t\t\tmaxOffset = $('.js-header').outerHeight() + 8;\n\n\t\t\tthis.scrollContainer.on('scroll', () => {\n\t\t\t\tif (this.scrollContainer.scrollTop() + maxOffset >= scollbarOffsetTop) {\n\t\t\t\t\tscollbarContainer.css({ top: maxOffset });\n\t\t\t\t} else {\n\t\t\t\t\tscollbarContainer.css({\n\t\t\t\t\t\ttop: scollbarOffsetTop - this.scrollContainer.scrollTop(),\n\t\t\t\t\t\theight: scollbarContainerH + this.scrollContainer.scrollTop()\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Updates list of predefined widgets after changed dashboard\n\t\t */\n\t\tregisterUpdatePredefinedWidgets: function() {\n\t\t\tlet container = $('.js-predefined-widgets');\n\t\t\tcontainer.off('click', '.js-widget-list__item');\n\t\t\tcontainer.on('click', '.js-widget-list__item', e => {\n\t\t\t\tif (!$(e.target).hasClass('removeWidgetFromList')) {\n\t\t\t\t\tthis.addWidget($(e.currentTarget), $(e.currentTarget).data('widgetUrl'));\n\t\t\t\t}\n\t\t\t});\n\t\t\tAppConnector.request({\n\t\t\t\tview: 'BasicAjax',\n\t\t\t\tmode: 'getDashBoardPredefinedWidgets',\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tdashboardId: this.getCurrentDashboard()\n\t\t\t}).done(data => {\n\t\t\t\tcontainer.html(data);\n\t\t\t});\n\t\t},\n\t\taddWidget(element, url) {\n\t\t\telement = $(element);\n\t\t\tvar linkId = element.data('linkid');\n\t\t\tvar name = element.data('name');\n\t\t\tvar widgetId = element.data('id');\n\t\t\telement.remove();\n\t\t\tif ($('.js-widget-list .js-widget-list__item').length < 1) {\n\t\t\t\t$('.js-widget-list')\n\t\t\t\t\t.prev('.js-widget-predefined')\n\t\t\t\t\t.addClass('d-none');\n\t\t\t}\n\t\t\tvar widgetContainer = $(\n\t\t\t\t'<div class=\"grid-stack-item js-css-element-queries\" data-js=\"css-element-queries\"><div id=\"' +\n\t\t\t\t\tlinkId +\n\t\t\t\t\t'-' +\n\t\t\t\t\twidgetId +\n\t\t\t\t\t'\" data-name=\"' +\n\t\t\t\t\tname +\n\t\t\t\t\t'\" data-mode=\"open\" class=\"grid-stack-item-content dashboardWidget new\"></div></div>'\n\t\t\t);\n\t\t\twidgetContainer.find('.dashboardWidget').data('url', url);\n\t\t\tvar width = element.data('width');\n\t\t\tvar height = element.data('height');\n\t\t\tVtiger_DashBoard_Js.grid.addWidget(widgetContainer, 0, 0, width, height);\n\t\t\tVtiger_DashBoard_Js.currentInstance.loadWidget(widgetContainer.find('.grid-stack-item-content'));\n\t\t},\n\t\tregisterEvents: function() {\n\t\t\tthis.registerGrid();\n\t\t\tthis.registerRefreshWidget();\n\t\t\tthis.removeWidget();\n\t\t\tthis.registerDatePickerHideInitiater();\n\t\t\tthis.registerShowMailBody();\n\t\t\tthis.registerChangeMailUser();\n\t\t\tthis.registerMiniListWidget();\n\t\t\tthis.registerChartFilterWidget();\n\t\t\tthis.registerTabModules();\n\t\t\tthis.removeWidgetFromList();\n\t\t\tthis.registerSelectDashboard();\n\t\t\tthis.registerTabletScrollEvent();\n\t\t\tthis.registerUpdatePredefinedWidgets();\n\t\t\tElementQueries.listen();\n\t\t}\n\t}\n);\n"],"names":["$","Class","container","on","e","element","target","isHeaderElement","closest","length","stopPropagation","currentInstance","noCache","dashboardId","data","widgetContainer","id","attr","instancesCache","widgetName","Vtiger_Widget_Js","getInstance","thisInstance","grid","getContainer","gridstack","test","navigator","userAgent","event","ui","savePositions","loadWidgets","width","parent","parentWidth","css","widgets","widgetRowColPositions","widgetSizes","index","len","widget","find","JSON","stringify","updateLazyWidget","request","app","getModuleName","scrollTop","scrollContainer","App","Components","Scrollbar","page","Quasar","plugins","Platform","is","desktop","showNewScrollbar","Lazy","loadWidget","self","urlParams","mode","moduleName","sourceModule","progressIndicator","name","cache","userId","CONFIG","cecheUrl","cacheGet","done","html","elem","adjustHeightWidget","Fields","Picklist","showSelect2ElementView","getWidgetInstance","trigger","widgetPostLoadEvent","remove","headerHeight","outerHeight","adjustedHeight","height","widgetContent","wheelPropagation","currentTarget","widgetInstnace","refreshWidget","listItem","parents","url","widgetTitle","message","vtranslate","showConfirmationBox","response","success","nonReversableWidgets","fadeOut","inArray","removeWidget","prev","removeClass","result","linkid","title","deleteFromList","divider","insertBefore","append","fail","error","err","progressIndicatorElement","params","getViewName","registerEvents","dashboardWidgetHeader","callbackFunction","date","DatePickerHide","blur","addClickOutSideEvent","mailBody","bodyIcon","show","addClass","hide","contentContainer","optionSelected","val","widgetPostRefereshEvent","off","showModalWindow","wizardContainer","form","keyCode","sectorContainer","chartType","moduleNameSelectDOM","moduleNameSelect2","step1","step2","step3","footer","value","step2Response","after","filtersIdElement","valueTypeElement","step3Response","last","groupField","step4Response","step4","registerModalEvents","preventDefault","save","InvalidFields","formAlignmentAfterValidation","selectedModule","selectedModuleLabel","text","selectedFiltersId","Array","isArray","join","selectedFieldLabel","each","prop","saveChartFilterWidget","moduleNameLabel","filtersId","filterLabel","groupFieldName","label","paramsForm","getCurrentDashboard","saveWidget","hideModalWindow","linkElement","clone","addWidget","showMessage","errorField","validationEngine","filteridSelectDOM","fieldsSelectDOM","filterFieldsSelectDOM","filteridSelect2","fieldsSelect2","filterFieldsSelect2","res","empty","responseHTML","fieldsHTML","filterFieldsHTML","$selection","validationEngineOptions","selectedFields","select2","map","push","obj","saveMiniListWidget","filterid","aDeferred","Deferred","resolve","reject","promise","touchDevice","scollbarContainer","scollbarContainerH","scollbarOffsetTop","offset","top","maxOffset","hasClass","linkId","widgetId","registerGrid","registerRefreshWidget","registerDatePickerHideInitiater","registerShowMailBody","registerChangeMailUser","registerMiniListWidget","registerChartFilterWidget","registerTabModules","removeWidgetFromList","registerSelectDashboard","registerTabletScrollEvent","registerUpdatePredefinedWidgets","listen"],"mappings":"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"}