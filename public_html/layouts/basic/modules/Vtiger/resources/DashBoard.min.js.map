{"version":3,"file":"DashBoard.min.js","sources":["DashBoard.js"],"sourcesContent":["/*+**********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.1\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n * Contributor(s): YetiForce S.A.\n ************************************************************************************/\n'use strict';\n\n$.Class(\n\t'Vtiger_DashBoard_Js',\n\t{\n\t\tgrid: false,\n\t\t//static property which will store the instance of dashboard\n\t\tcurrentInstance: false,\n\t\tscrollContainer: false,\n\t\trestrictContentDrag: function (container) {\n\t\t\tcontainer.on('mousedown.draggable', function (e) {\n\t\t\t\tlet element = $(e.target);\n\t\t\t\tlet isHeaderElement = element.closest('.dashboardWidgetHeader').length > 0 ? true : false;\n\t\t\t\tif (isHeaderElement) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t//Stop the event propagation so that drag will not start for contents\n\t\t\t\te.stopPropagation();\n\t\t\t});\n\t\t}\n\t},\n\t{\n\t\tcontainer: false,\n\t\tnoCache: false,\n\t\tinstancesCache: {},\n\t\tinit: function () {\n\t\t\tVtiger_DashBoard_Js.currentInstance = this;\n\t\t},\n\t\t/**\n\t\t * Get container\n\t\t * @returns JQuery\n\t\t */\n\t\tgetContainer: function () {\n\t\t\tif (this.noCache == true || this.container == false) {\n\t\t\t\tthis.container = $('.grid-stack');\n\t\t\t}\n\t\t\treturn this.container;\n\t\t},\n\t\tgetCurrentDashboard: function () {\n\t\t\tlet dashboardId = $('.selectDashboard li a.active').closest('li').data('id');\n\t\t\tif (!dashboardId) {\n\t\t\t\tdashboardId = 1;\n\t\t\t}\n\t\t\treturn dashboardId;\n\t\t},\n\t\tgetWidgetInstance: function (widgetContainer) {\n\t\t\tlet id = widgetContainer.attr('id');\n\t\t\tif (this.noCache || !(id in this.instancesCache)) {\n\t\t\t\tlet widgetName = widgetContainer.data('name');\n\t\t\t\tthis.instancesCache[id] = Vtiger_Widget_Js.getInstance(widgetContainer, widgetName);\n\t\t\t}\n\t\t\treturn this.instancesCache[id];\n\t\t},\n\t\tregisterGrid: function () {\n\t\t\tconst self = this;\n\t\t\tVtiger_DashBoard_Js.grid = GridStack.init(\n\t\t\t\t{\n\t\t\t\t\tmargin: '5px',\n\t\t\t\t\tcellHeight: '70px',\n\t\t\t\t\talwaysShowResizeHandle: /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(\n\t\t\t\t\t\tnavigator.userAgent\n\t\t\t\t\t)\n\t\t\t\t},\n\t\t\t\t'.grid-stack'\n\t\t\t);\n\t\t\tVtiger_DashBoard_Js.grid.on('change', function (event, ui) {\n\t\t\t\tself.savePositions(self.getContainer().find('.grid-stack-item'));\n\t\t\t});\n\t\t\t// load widgets after grid initialization to prevent too early lazy loading - visible viewport changes\n\t\t\tthis.loadWidgets();\n\t\t\t// recalculate positions with scrollbars\n\t\t\tif (this.getContainer().width() !== this.getContainer().parent().width()) {\n\t\t\t\tconst parentWidth = self.getContainer().parent().width();\n\t\t\t\tthis.getContainer().css('width', parentWidth + 'px');\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Save widgets positions\n\t\t * @param {JQuery} widgets\n\t\t */\n\t\tsavePositions: function (widgets) {\n\t\t\tlet widgetRowColPositions = {},\n\t\t\t\twidgetSizes = {};\n\t\t\twidgets.each((_index, element) => {\n\t\t\t\tlet widget = $(element);\n\t\t\t\tlet widgetId = widget.find('.grid-stack-item-content').attr('id');\n\t\t\t\twidgetRowColPositions[widgetId] = {\n\t\t\t\t\trow: widget.attr('gs-y'),\n\t\t\t\t\tcol: widget.attr('gs-x')\n\t\t\t\t};\n\t\t\t\twidgetSizes[widgetId] = {\n\t\t\t\t\twidth: widget.attr('gs-w'),\n\t\t\t\t\theight: widget.attr('gs-h')\n\t\t\t\t};\n\t\t\t\tthis.getWidgetInstance(widget.find('.dashboardWidget')).loadScrollbar();\n\t\t\t});\n\t\t\tthis.updateLazyWidget();\n\t\t\tAppConnector.request({\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\taction: 'Widget',\n\t\t\t\tmode: 'positions',\n\t\t\t\tposition: widgetRowColPositions,\n\t\t\t\tsize: widgetSizes\n\t\t\t});\n\t\t},\n\t\tupdateLazyWidget() {\n\t\t\tconst scrollTop = this.scrollContainer.scrollTop();\n\t\t\tthis.scrollContainer.scrollTop(scrollTop + 1).scrollTop(scrollTop);\n\t\t},\n\t\tloadWidgets: function () {\n\t\t\tconst thisInstance = this;\n\t\t\tthis.scrollContainer = App.Components.Scrollbar.page.element;\n\t\t\tif (!Quasar.plugins.Platform.is.desktop) {\n\t\t\t\tthis.scrollContainer = $('.bodyContent');\n\t\t\t\tapp.showNewScrollbar(this.scrollContainer);\n\t\t\t}\n\t\t\tthisInstance\n\t\t\t\t.getContainer()\n\t\t\t\t.find('.dashboardWidget')\n\t\t\t\t.Lazy({\n\t\t\t\t\tthreshold: 0,\n\t\t\t\t\tappendScroll: this.scrollContainer,\n\t\t\t\t\twidgetLoader(element) {\n\t\t\t\t\t\tthisInstance.loadWidget(element);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\tthis.updateLazyWidget();\n\t\t},\n\t\tloadWidget: function (widgetContainer) {\n\t\t\tconst self = this;\n\t\t\tlet urlParams = widgetContainer.data('url');\n\t\t\tlet mode = widgetContainer.data('mode');\n\t\t\tlet moduleName = app.getModuleName();\n\t\t\tlet sourceModule = $('a.active', 'ul.selectDashboradView').parent().data('module');\n\t\t\twidgetContainer.progressIndicator();\n\t\t\tif (mode === 'open') {\n\t\t\t\tlet name = widgetContainer.attr('id');\n\t\t\t\tlet userId = CONFIG.userId;\n\t\t\t\tif (widgetContainer.data('cache') === 1) {\n\t\t\t\t\tlet cacheUrl = app.cacheGet(name + '_' + userId, false);\n\t\t\t\t\turlParams = cacheUrl ? cacheUrl : urlParams;\n\t\t\t\t}\n\t\t\t\tAppConnector.request(urlParams)\n\t\t\t\t\t.done((data) => {\n\t\t\t\t\t\twidgetContainer.html(data);\n\t\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(widgetContainer.find('.select2'));\n\t\t\t\t\t\tApp.Fields.Tree.register(widgetContainer);\n\t\t\t\t\t\tself.getWidgetInstance(widgetContainer);\n\t\t\t\t\t\twidgetContainer.trigger(Vtiger_Widget_Js.widgetPostLoadEvent);\n\t\t\t\t\t\tself.adjustHeightWidget(widgetContainer);\n\t\t\t\t\t\tif (sourceModule && moduleName != sourceModule) {\n\t\t\t\t\t\t\t$('.js-widget-remove', widgetContainer).remove();\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function (textStatus, errorThrown, errorObj) {\n\t\t\t\t\t\twidgetContainer.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tif (CONFIG.debug) {\n\t\t\t\t\t\t\twidgetContainer.html(errorObj.responseText);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlet url = app.convertUrlToObject(urlParams);\n\t\t\t\t\t\tdelete url.view, url.name;\n\t\t\t\t\t\turl.action = 'Widget';\n\t\t\t\t\t\turl.mode = 'remove';\n\t\t\t\t\t\turl = app.convertObjectToUrl(url);\n\t\t\t\t\t\twidgetContainer.prepend(\n\t\t\t\t\t\t\t`<span style=\"float: right;\"><button class=\"btn btn-sm btn-light js-widget-remove\" data-url=\"${url}\" data-js=\"click\"><span class=\"fas fa-times\"></span></button></span>`\n\t\t\t\t\t\t);\n\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\ttitle: app.vtranslate('JS_ERROR'),\n\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Adjust the height of the widget.\n\t\t * @param {jQuery} widgetContainer\n\t\t */\n\t\tadjustHeightWidget(widgetContainer) {\n\t\t\tconst headerHeight = widgetContainer.find('.dashboardWidgetHeader').outerHeight();\n\t\t\tlet adjustedHeight = widgetContainer.height() - headerHeight;\n\t\t\tif (widgetContainer.find('.dashboardWidgetFooter').length) {\n\t\t\t\tadjustedHeight -= widgetContainer.find('.dashboardWidgetFooter').outerHeight();\n\t\t\t}\n\t\t\tconst widgetContent = widgetContainer.find('.dashboardWidgetContent');\n\t\t\twidgetContent.css('max-height', adjustedHeight + 'px');\n\t\t\tapp.showNewScrollbar(widgetContent, { wheelPropagation: true });\n\t\t},\n\t\tregisterRefreshWidget: function () {\n\t\t\tlet thisInstance = this;\n\t\t\tthis.getContainer().on('click', '.js-widget-refresh', function (e) {\n\t\t\t\tlet element = $(e.currentTarget);\n\t\t\t\tthisInstance.getWidgetInstance(element.closest('.dashboardWidget')).refreshWidget();\n\t\t\t\treturn;\n\t\t\t});\n\t\t},\n\t\tremoveWidget: function () {\n\t\t\tconst self = this;\n\t\t\tthis.getContainer().on('click', '.js-widget-remove', function (e) {\n\t\t\t\tlet element = $(e.currentTarget),\n\t\t\t\t\tlistItem = $(element).parents('.grid-stack-item'),\n\t\t\t\t\twidth = listItem.attr('gs-w'),\n\t\t\t\t\theight = listItem.attr('gs-h'),\n\t\t\t\t\turl = element.data('url'),\n\t\t\t\t\tparent = element.closest('.dashboardWidgetHeader').parent(),\n\t\t\t\t\twidgetTitle = parent.find('.js-widget__header__title').text().trim();\n\t\t\t\tapp.showConfirmModal({\n\t\t\t\t\ttitle: `${app.vtranslate('JS_ARE_YOU_SURE_TO_DELETE_WIDGET')} (${widgetTitle})<br>${app.vtranslate(\n\t\t\t\t\t\t'JS_ARE_YOU_SURE_TO_DELETE_WIDGET_INFO'\n\t\t\t\t\t)}`,\n\t\t\t\t\tconfirmedCallback: () => {\n\t\t\t\t\t\tAppConnector.request(url).done(function (response) {\n\t\t\t\t\t\t\tif (response.success) {\n\t\t\t\t\t\t\t\tparent.fadeOut('slow', function () {\n\t\t\t\t\t\t\t\t\tparent.remove();\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tVtiger_DashBoard_Js.grid.removeWidget(listItem.get(0));\n\t\t\t\t\t\t\t\t$('.js-widget-list').prev('.js-widget-predefined').removeClass('d-none');\n\t\t\t\t\t\t\t\tlet data = `<a class=\"js-widget-list__item dropdown-item d-flex\" href=\"#\"\n\t\t\t\t\t\t\t\t\t\tdata-widget-url=\"${response.result.url}\" data-linkid=\"${response.result.linkid}\"\n\t\t\t\t\t\t\t\t\t\tdata-name=\"${response.result.name}\" data-width=\"${width}\" data-height=\"${height}\"\n\t\t\t\t\t\t\t\t\t\tdata-js=\"remove | click\">${response.result.title}`;\n\t\t\t\t\t\t\t\tif (response.result.deleteFromList) {\n\t\t\t\t\t\t\t\t\tdata += `<span class=\"text-danger pl-5 ml-auto\"><span class=\"fas fa-trash-alt removeWidgetFromList u-hover-opacity\" data-widget-id=\"${response.result.id}\" data-js=\"click\"></span></span>`;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tdata += '</a>';\n\t\t\t\t\t\t\t\tlet divider = $('.js-widget-list .dropdown-divider');\n\t\t\t\t\t\t\t\tif (divider.length) {\n\t\t\t\t\t\t\t\t\t$(data).insertBefore(divider);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t$('.js-widget-list').append(data);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tself.updateLazyWidget();\n\t\t\t\t\t\t\t\tself.showAndHideAlert(false);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterSelectDashboard: function () {\n\t\t\tlet thisInstance = this;\n\t\t\t$('.selectDashboard li').on('click', function (e) {\n\t\t\t\tlet progressIndicatorElement = $.progressIndicator({\n\t\t\t\t\tposition: 'html',\n\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\tenabled: true\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tlet currentTarget = $(e.currentTarget);\n\t\t\t\tlet dashboardId = currentTarget.data('id');\n\t\t\t\tlet params = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tview: app.getViewName(),\n\t\t\t\t\tdashboardId: dashboardId\n\t\t\t\t};\n\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t$('.dashboardViewContainer').html(data);\n\t\t\t\t\tthisInstance.noCache = true;\n\t\t\t\t\tthisInstance.registerEvents();\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterDatePickerHideInitiater: function () {\n\t\t\tlet container = this.getContainer();\n\t\t\tcontainer.on('click', 'input.dateRange', function (e) {\n\t\t\t\tlet widgetContainer = $(e.currentTarget).closest('.dashboardWidget');\n\t\t\t\tlet dashboardWidgetHeader = $('.dashboardWidgetHeader', widgetContainer);\n\n\t\t\t\tlet callbackFunction = function () {\n\t\t\t\t\tlet date = $('.dateRange');\n\t\t\t\t\tdate.DatePickerHide();\n\t\t\t\t\tdate.blur();\n\t\t\t\t};\n\t\t\t\t//adding clickoutside event on the dashboardWidgetHeader\n\t\t\t\tVtiger_Helper_Js.addClickOutSideEvent(dashboardWidgetHeader.find('.dateRange'), callbackFunction);\n\t\t\t\treturn false;\n\t\t\t});\n\t\t},\n\t\tregisterShowMailBody: function () {\n\t\t\tlet container = this.getContainer();\n\t\t\tcontainer.on('click', '.showMailBody', function (e) {\n\t\t\t\tlet widgetContainer = $(e.currentTarget).closest('.mailRow');\n\t\t\t\tlet mailBody = widgetContainer.find('.mailBody');\n\t\t\t\tlet bodyIcon = $(e.currentTarget).find('.body-icon');\n\t\t\t\tif (mailBody.css('display') == 'none') {\n\t\t\t\t\tmailBody.show();\n\t\t\t\t\tbodyIcon.removeClass('fa-chevron-down').addClass('fa-chevron-up');\n\t\t\t\t} else {\n\t\t\t\t\tmailBody.hide();\n\t\t\t\t\tbodyIcon.removeClass('fa-chevron-up').addClass('fa-chevron-down');\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterMiniListWidget: function () {\n\t\t\tconst thisInstance = this;\n\t\t\t$('.dashboardHeading')\n\t\t\t\t.off('click', '.js-add-filter')\n\t\t\t\t.on('click', '.js-add-filter', function (e) {\n\t\t\t\t\tconst element = $(e.currentTarget);\n\t\t\t\t\tapp.showModalWindow(null, 'index.php?module=Home&view=MiniListWizard&step=step1', function (wizardContainer) {\n\t\t\t\t\t\tconst form = $('form', wizardContainer);\n\t\t\t\t\t\tform.on('keypress', function (event) {\n\t\t\t\t\t\t\treturn event.keyCode != 13;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tconst moduleNameSelectDOM = $('select[name=\"module\"]', wizardContainer);\n\t\t\t\t\t\tconst filteridSelectDOM = $('select[name=\"filterid\"]', wizardContainer);\n\t\t\t\t\t\tconst fieldHrefDOM = $('select[name=\"field_href\"]', wizardContainer);\n\t\t\t\t\t\tconst fieldsSelectDOM = $('select[name=\"fields\"]', wizardContainer);\n\t\t\t\t\t\tconst filterFieldsSelectDOM = $('select[name=\"filter_fields\"]', wizardContainer);\n\t\t\t\t\t\tconst moduleNameSelect2 = App.Fields.Picklist.showSelect2ElementView(moduleNameSelectDOM, {\n\t\t\t\t\t\t\tplaceholder: app.vtranslate('JS_SELECT_MODULE')\n\t\t\t\t\t\t});\n\t\t\t\t\t\tconst filteridSelect2 = App.Fields.Picklist.showSelect2ElementView(filteridSelectDOM, {\n\t\t\t\t\t\t\tplaceholder: app.vtranslate('JS_PLEASE_SELECT_ATLEAST_ONE_OPTION'),\n\t\t\t\t\t\t\tdropdownParent: wizardContainer\n\t\t\t\t\t\t});\n\t\t\t\t\t\tconst fieldHrefSelect2 = App.Fields.Picklist.showSelect2ElementView(fieldHrefDOM, {\n\t\t\t\t\t\t\tallowClear: true\n\t\t\t\t\t\t});\n\t\t\t\t\t\tconst fieldsSelect2 = App.Fields.Picklist.showSelect2ElementView(fieldsSelectDOM, {\n\t\t\t\t\t\t\tplaceholder: app.vtranslate('JS_PLEASE_SELECT_ATLEAST_ONE_OPTION'),\n\t\t\t\t\t\t\tcloseOnSelect: true,\n\t\t\t\t\t\t\tmaximumSelectionLength: 6\n\t\t\t\t\t\t});\n\t\t\t\t\t\tconst filterFieldsSelect2 = App.Fields.Picklist.showSelect2ElementView(filterFieldsSelectDOM, {\n\t\t\t\t\t\t\tplaceholder: app.vtranslate('JS_PLEASE_SELECT_ATLEAST_ONE_OPTION')\n\t\t\t\t\t\t});\n\t\t\t\t\t\tconst footer = $('.modal-footer', wizardContainer);\n\t\t\t\t\t\tfilteridSelectDOM.closest('tr').hide();\n\t\t\t\t\t\tfieldsSelectDOM.closest('tr').hide();\n\t\t\t\t\t\tfieldHrefDOM.closest('tr').hide();\n\t\t\t\t\t\tfooter.hide();\n\t\t\t\t\t\tmoduleNameSelect2.on('change', function () {\n\t\t\t\t\t\t\tif (!moduleNameSelect2.val()) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tfooter.hide();\n\t\t\t\t\t\t\tfieldsSelectDOM.closest('tr').hide();\n\t\t\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\t\t\tmodule: 'Home',\n\t\t\t\t\t\t\t\tview: 'MiniListWizard',\n\t\t\t\t\t\t\t\tstep: 'step2',\n\t\t\t\t\t\t\t\tselectedModule: moduleNameSelect2.val()\n\t\t\t\t\t\t\t}).done(function (res) {\n\t\t\t\t\t\t\t\tfilteridSelectDOM.empty().html(res).trigger('change');\n\t\t\t\t\t\t\t\tfilteridSelect2.closest('tr').show();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t\tfilteridSelect2.on('change', function () {\n\t\t\t\t\t\t\tif (!filteridSelect2.val()) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\t\t\tmodule: 'Home',\n\t\t\t\t\t\t\t\tview: 'MiniListWizard',\n\t\t\t\t\t\t\t\tstep: 'step3',\n\t\t\t\t\t\t\t\tselectedModule: moduleNameSelect2.val(),\n\t\t\t\t\t\t\t\tfilterid: filteridSelect2.val()\n\t\t\t\t\t\t\t}).done(function (res) {\n\t\t\t\t\t\t\t\tconst responseHTML = $(res);\n\t\t\t\t\t\t\t\tconst fieldsHTML = responseHTML.find('select[name=\"fields\"]').html();\n\t\t\t\t\t\t\t\tconst filterFieldsHTML = responseHTML.find('select[name=\"filter_fields\"]').html();\n\t\t\t\t\t\t\t\tfieldsSelectDOM.empty().html(fieldsHTML).trigger('change');\n\t\t\t\t\t\t\t\tfieldsSelect2.closest('tr').show();\n\t\t\t\t\t\t\t\tfieldsSelect2.data('select2').$selection.find('.select2-search__field').parent().css('width', '100%');\n\t\t\t\t\t\t\t\tfilterFieldsSelectDOM.empty().html(filterFieldsHTML).trigger('change');\n\t\t\t\t\t\t\t\tfilterFieldsSelect2.closest('tr').show();\n\t\t\t\t\t\t\t\tfilterFieldsSelect2\n\t\t\t\t\t\t\t\t\t.data('select2')\n\t\t\t\t\t\t\t\t\t.$selection.find('.select2-search__field')\n\t\t\t\t\t\t\t\t\t.parent()\n\t\t\t\t\t\t\t\t\t.css('width', '100%');\n\t\t\t\t\t\t\t\tfieldHrefSelect2.closest('tr').show();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t\tfieldsSelect2.on('change', function () {\n\t\t\t\t\t\t\tfieldHrefDOM.find('option:not([value=\"\"]').remove();\n\t\t\t\t\t\t\t$(this)\n\t\t\t\t\t\t\t\t.find('option:checked')\n\t\t\t\t\t\t\t\t.each(function (index, element) {\n\t\t\t\t\t\t\t\t\tlet option = $(element);\n\t\t\t\t\t\t\t\t\tlet newOption = new Option(option.text(), option.val(), true, true);\n\t\t\t\t\t\t\t\t\tfieldHrefSelect2.append(newOption);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tfieldHrefSelect2.val('').trigger('change');\n\t\t\t\t\t\t\tif (!fieldsSelect2.val()) {\n\t\t\t\t\t\t\t\tfooter.hide();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tfooter.show();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tform.validationEngine(app.validationEngineOptions);\n\t\t\t\t\t\tform.on('submit', (e) => {\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\tif (form.validationEngine('validate') === true) {\n\t\t\t\t\t\t\t\tlet selectedFields = [];\n\t\t\t\t\t\t\t\tfieldsSelect2.select2('data').map((obj) => {\n\t\t\t\t\t\t\t\t\tselectedFields.push(obj.id);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tthisInstance.saveMiniListWidget(\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tmodule: moduleNameSelect2.val(),\n\t\t\t\t\t\t\t\t\t\tfields: selectedFields,\n\t\t\t\t\t\t\t\t\t\tfilterFields: filterFieldsSelect2.val(),\n\t\t\t\t\t\t\t\t\t\tfieldHref: fieldHrefSelect2.val()\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\telement,\n\t\t\t\t\t\t\t\t\tmoduleNameSelect2.find(':selected').text(),\n\t\t\t\t\t\t\t\t\tfilteridSelect2.val(),\n\t\t\t\t\t\t\t\t\tfilteridSelect2.find(':selected').text(),\n\t\t\t\t\t\t\t\t\tform\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t},\n\t\tsaveMiniListWidget: function (data, element, moduleNameLabel, filterid, filterLabel, form) {\n\t\t\tconst thisInstance = this,\n\t\t\t\tparamsForm = {\n\t\t\t\t\tdata: JSON.stringify(data),\n\t\t\t\t\tblockid: element.data('block-id'),\n\t\t\t\t\tlinkid: element.data('linkid'),\n\t\t\t\t\tlabel: moduleNameLabel + ' - ' + filterLabel,\n\t\t\t\t\ttitle: form.find('[name=\"widgetTitle\"]').val(),\n\t\t\t\t\tname: 'Mini List',\n\t\t\t\t\tfilterid: filterid,\n\t\t\t\t\tisdefault: 0,\n\t\t\t\t\theight: 4,\n\t\t\t\t\twidth: 4,\n\t\t\t\t\towners_all: ['mine', 'all', 'users', 'groups'],\n\t\t\t\t\tdefault_owner: 'mine',\n\t\t\t\t\tdashboardId: thisInstance.getCurrentDashboard()\n\t\t\t\t},\n\t\t\t\tsourceModule = $('[name=\"selectedModuleName\"]').val();\n\t\t\tthisInstance.saveWidget(paramsForm, 'add', sourceModule, paramsForm.linkid, 'MiniList').done(function (data) {\n\t\t\t\tlet result = data['result'],\n\t\t\t\t\tparams = {};\n\t\t\t\tif (data['success']) {\n\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\tparamsForm['id'] = result['id'];\n\t\t\t\t\tparamsForm['status'] = result['status'];\n\t\t\t\t\tparams['text'] = result['text'];\n\t\t\t\t\tparams['type'] = 'success';\n\t\t\t\t\tlet linkElement = element.clone();\n\t\t\t\t\tlinkElement.data('name', 'MiniList');\n\t\t\t\t\tlinkElement.data('id', result['wid']);\n\t\t\t\t\tthisInstance.addWidget(\n\t\t\t\t\t\tlinkElement,\n\t\t\t\t\t\t'index.php?module=Home&view=ShowWidget&name=MiniList&linkid=' +\n\t\t\t\t\t\t\telement.data('linkid') +\n\t\t\t\t\t\t\t'&widgetid=' +\n\t\t\t\t\t\t\tresult['wid'] +\n\t\t\t\t\t\t\t'&active=0'\n\t\t\t\t\t);\n\t\t\t\t\tVtiger_Helper_Js.showMessage(params);\n\t\t\t\t} else {\n\t\t\t\t\tlet message = data['error']['message'],\n\t\t\t\t\t\terrorField;\n\t\t\t\t\tif (data['error']['code'] != 513) {\n\t\t\t\t\t\terrorField = form.find('[name=\"fieldName\"]');\n\t\t\t\t\t} else {\n\t\t\t\t\t\terrorField = form.find('[name=\"fieldLabel\"]');\n\t\t\t\t\t}\n\t\t\t\t\terrorField.validationEngine('showPrompt', message, 'error', 'topLeft', true);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tsaveWidget: function (form, mode, sourceModule, linkid, type) {\n\t\t\tlet aDeferred = $.Deferred();\n\t\t\tlet progressIndicatorElement = $.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (typeof sourceModule === 'undefined') {\n\t\t\t\tsourceModule = app.getModuleName();\n\t\t\t}\n\t\t\tlet params = {\n\t\t\t\tform: form,\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tsourceModule: sourceModule,\n\t\t\t\taction: 'Widget',\n\t\t\t\tmode: mode,\n\t\t\t\taddToUser: true,\n\t\t\t\tlinkid: linkid,\n\t\t\t\tname: type\n\t\t\t};\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t})\n\t\t\t\t.fail(function (error) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\taDeferred.reject(error);\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\tregisterTabModules: function () {\n\t\t\tlet thisInstance = this;\n\t\t\t$('.selectDashboradView li').on('click', function (e) {\n\t\t\t\tlet currentTarget = $(e.currentTarget);\n\t\t\t\t$('.selectDashboradView li').removeClass('active');\n\t\t\t\tcurrentTarget.addClass('active');\n\t\t\t\tlet params = {\n\t\t\t\t\tmodule: currentTarget.data('module'),\n\t\t\t\t\tview: app.getViewName(),\n\t\t\t\t\tsourceModule: app.getModuleName(),\n\t\t\t\t\tdashboardId: thisInstance.getCurrentDashboard()\n\t\t\t\t};\n\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\t$('.dashboardViewContainer').html(data);\n\t\t\t\t\tthisInstance.noCache = true;\n\t\t\t\t\tthisInstance.registerEvents();\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Remove widget from list\n\t\t */\n\t\tremoveWidgetFromList: function () {\n\t\t\tconst thisInstance = this;\n\t\t\t$('.dashboardHeading').on('click', '.removeWidgetFromList', function (e) {\n\t\t\t\tlet currentTarget = $(e.currentTarget);\n\t\t\t\tlet id = currentTarget.data('widget-id');\n\t\t\t\tlet params = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\taction: 'Widget',\n\t\t\t\t\tmode: 'removeWidgetFromList',\n\t\t\t\t\twidgetid: id\n\t\t\t\t};\n\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\tlet params = {\n\t\t\t\t\t\ttext: app.vtranslate('JS_WIDGET_DELETED'),\n\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t};\n\t\t\t\t\tVtiger_Helper_Js.showMessage(params);\n\t\t\t\t\tcurrentTarget.closest('.js-widget-list__item').remove();\n\t\t\t\t\tif ($('.js-widget-list .js-widget-list__item').length < 1) {\n\t\t\t\t\t\t$('.js-widget-list').prev('.js-widget-predefined').addClass('d-none');\n\t\t\t\t\t}\n\t\t\t\t\tthisInstance.updateLazyWidget();\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Updates tablet scroll top position\n\t\t */\n\t\tregisterTabletScrollEvent() {\n\t\t\tif (!app.touchDevice || !Quasar.plugins.Platform.is.desktop) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet scollbarContainer = $('.js-tablet-scroll');\n\t\t\tscollbarContainer.parent().removeClass('d-none');\n\n\t\t\tlet scollbarContainerH = scollbarContainer.outerHeight(),\n\t\t\t\tscollbarOffsetTop = scollbarContainer.offset().top,\n\t\t\t\tmaxOffset = $('.js-header').outerHeight() + 8;\n\n\t\t\tthis.scrollContainer.on('scroll', () => {\n\t\t\t\tif (this.scrollContainer.scrollTop() + maxOffset >= scollbarOffsetTop) {\n\t\t\t\t\tscollbarContainer.css({ top: maxOffset });\n\t\t\t\t} else {\n\t\t\t\t\tscollbarContainer.css({\n\t\t\t\t\t\ttop: scollbarOffsetTop - this.scrollContainer.scrollTop(),\n\t\t\t\t\t\theight: scollbarContainerH + this.scrollContainer.scrollTop()\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Updates list of predefined widgets after changed dashboard\n\t\t */\n\t\tregisterUpdatePredefinedWidgets: function () {\n\t\t\tlet container = $('.js-predefined-widgets');\n\t\t\tcontainer.off('click', '.js-widget-list__item');\n\t\t\tcontainer.on('click', '.js-widget-list__item', (e) => {\n\t\t\t\tif (!$(e.target).hasClass('removeWidgetFromList')) {\n\t\t\t\t\tthis.addWidget($(e.currentTarget), $(e.currentTarget).data('widgetUrl'));\n\t\t\t\t}\n\t\t\t});\n\t\t\tAppConnector.request({\n\t\t\t\tview: 'BasicAjax',\n\t\t\t\tmode: 'getDashBoardPredefinedWidgets',\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tdashboardId: this.getCurrentDashboard()\n\t\t\t}).done((data) => {\n\t\t\t\tcontainer.html(data);\n\t\t\t});\n\t\t},\n\t\taddWidget(element, url) {\n\t\t\telement = $(element);\n\t\t\tlet linkId = element.data('linkid');\n\t\t\tlet name = element.data('name');\n\t\t\tlet widgetId = element.data('id');\n\t\t\telement.remove();\n\t\t\tif ($('.js-widget-list .js-widget-list__item').length < 1) {\n\t\t\t\t$('.js-widget-list').prev('.js-widget-predefined').addClass('d-none');\n\t\t\t}\n\t\t\tlet widget = Vtiger_DashBoard_Js.grid.addWidget(\n\t\t\t\t`<div class=\"grid-stack-item js-css-element-queries\" data-js=\"css-element-queries\"><div id=\"${linkId}-${widgetId}\" data-name=\"${name}\" data-mode=\"open\" class=\"grid-stack-item-content dashboardWidget new\" data-url=\"${url}\"></div></div>`,\n\t\t\t\t{\n\t\t\t\t\tw: element.data('width'),\n\t\t\t\t\th: element.data('height'),\n\t\t\t\t\tauto_position: true\n\t\t\t\t}\n\t\t\t);\n\t\t\tVtiger_DashBoard_Js.currentInstance.loadWidget($(widget).find('.grid-stack-item-content'));\n\t\t\tthis.showAndHideAlert('addWidget');\n\t\t},\n\n\t\t/**\n\t\t * Show or hide the alert for a dashboard.\n\t\t * @param {string} widgetAction\n\t\t */\n\t\tshowAndHideAlert(widgetAction) {\n\t\t\tlet container = this.getContainer();\n\t\t\tlet alertContainer = container.find('.js-dashboards-alert');\n\t\t\tif (widgetAction === 'addWidget') {\n\t\t\t\talertContainer.addClass('d-none');\n\t\t\t} else if (container.find('.js-css-element-queries').length == 0) {\n\t\t\t\talertContainer.removeClass('d-none');\n\t\t\t}\n\t\t},\n\n\t\tregisterEvents: function () {\n\t\t\tthis.registerGrid();\n\t\t\tthis.registerRefreshWidget();\n\t\t\tthis.removeWidget();\n\t\t\tthis.registerDatePickerHideInitiater();\n\t\t\tthis.registerShowMailBody();\n\t\t\tthis.registerMiniListWidget();\n\t\t\tthis.registerTabModules();\n\t\t\tthis.removeWidgetFromList();\n\t\t\tthis.registerSelectDashboard();\n\t\t\tthis.registerTabletScrollEvent();\n\t\t\tthis.registerUpdatePredefinedWidgets();\n\t\t\tElementQueries.listen();\n\t\t}\n\t}\n);\n"],"names":["$","Class","grid","currentInstance","scrollContainer","restrictContentDrag","container","on","e","element","target","isHeaderElement","closest","length","stopPropagation","noCache","instancesCache","init","Vtiger_DashBoard_Js","getContainer","getCurrentDashboard","data","dashboardId","getWidgetInstance","widgetContainer","attr","id","widgetName","Vtiger_Widget_Js","getInstance","registerGrid","GridStack","margin","cellHeight","alwaysShowResizeHandle","test","navigator","userAgent","self","savePositions","find","loadWidgets","width","parent","css","parentWidth","widgets","widgetRowColPositions","widgetSizes","each","_index","widget","widgetId","row","col","height","loadScrollbar","updateLazyWidget","AppConnector","request","module","app","getModuleName","action","mode","position","size","scrollTop","App","Components","Scrollbar","page","Quasar","plugins","Platform","is","desktop","showNewScrollbar","thisInstance","Lazy","threshold","appendScroll","widgetLoader","loadWidget","urlParams","moduleName","sourceModule","progressIndicator","userId","CONFIG","cacheGet","name","cacheUrl","done","html","Fields","Picklist","showSelect2ElementView","Tree","register","trigger","widgetPostLoadEvent","adjustHeightWidget","remove","fail","textStatus","errorThrown","errorObj","debug","responseText","convertUrlToObject","url","view","convertObjectToUrl","prepend","showNotify","title","vtranslate","type","headerHeight","outerHeight","adjustedHeight","widgetContent","wheelPropagation","registerRefreshWidget","currentTarget","refreshWidget","removeWidget","listItem","parents","widgetTitle","text","trim","showConfirmModal","confirmedCallback","response","success","fadeOut","get","prev","removeClass","result","linkid","deleteFromList","divider","insertBefore","append","showAndHideAlert","registerSelectDashboard","blockInfo","enabled","params","getViewName","progressIndicatorElement","registerEvents","registerDatePickerHideInitiater","dashboardWidgetHeader","addClickOutSideEvent","date","DatePickerHide","blur","registerShowMailBody","mailBody","bodyIcon","show","addClass","hide","registerMiniListWidget","off","showModalWindow","wizardContainer","form","event","keyCode","moduleNameSelectDOM","filteridSelectDOM","fieldHrefDOM","fieldsSelectDOM","filterFieldsSelectDOM","moduleNameSelect2","placeholder","filteridSelect2","dropdownParent","fieldHrefSelect2","allowClear","fieldsSelect2","closeOnSelect","maximumSelectionLength","filterFieldsSelect2","footer","val","step","selectedModule","res","empty","filterid","responseHTML","fieldsHTML","filterFieldsHTML","$selection","index","newOption","option","validationEngine","validationEngineOptions","preventDefault","select2","map","obj","selectedFields","push","saveMiniListWidget","fields","filterFields","fieldHref","moduleNameLabel","filterLabel","paramsForm","JSON","stringify","blockid","label","isdefault","owners_all","default_owner","saveWidget","hideModalWindow","linkElement","clone","addWidget","Vtiger_Helper_Js","showMessage","errorField","message","aDeferred","Deferred","addToUser","resolve","error","reject","promise","registerTabModules","removeWidgetFromList","widgetid","registerTabletScrollEvent","touchDevice","scollbarContainer","scollbarOffsetTop","offset","top","maxOffset","scollbarContainerH","registerUpdatePredefinedWidgets","hasClass","linkId","w","h","auto_position","widgetAction","alertContainer","ElementQueries","listen"],"mappings":"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"}