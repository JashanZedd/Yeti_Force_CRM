{"version":3,"file":"Vtiger.min.js","sources":["Vtiger.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n * Contributor(s): YetiForce.com\n *************************************************************************************/\n'use strict';\n\nvar Vtiger_Index_Js = {\n\tshowLocation: function(element) {\n\t\tapp.showModalWindow(null, 'index.php?module=OpenStreetMap&view=MapModal', function(container) {\n\t\t\tvar mapView = new OpenStreetMap_Map_Js();\n\t\t\tmapView.registerModalView(container);\n\t\t\tcontainer.find('.searchValue').val($(element).data('location'));\n\t\t\tcontainer.find('.searchBtn').trigger('click');\n\t\t});\n\t},\n\tmassAddDocuments: function(url) {\n\t\tapp.showModalWindow(null, url, function(container) {\n\t\t\tvar uploadButton = container.find('#filesToUpload');\n\t\t\tvar template = container.find('.fileContainer');\n\t\t\tvar uploadContainer = container.find('.uploadFileContainer');\n\t\t\tvar form = container.find('form');\n\t\t\tuploadButton.on('change', function() {\n\t\t\t\tuploadContainer.find('.fileItem').remove();\n\t\t\t\tvar files = uploadButton[0].files;\n\t\t\t\tfor (var i = 0; i < files.length; i++) {\n\t\t\t\t\tuploadContainer.append(template.html());\n\t\t\t\t\tuploadContainer.find('[name=\"nameFile[]\"]:last').val(files[i].name);\n\t\t\t\t}\n\t\t\t});\n\t\t\tform.on('submit', function(e) {\n\t\t\t\te.preventDefault();\n\t\t\t\tapp.removeEmptyFilesInput(form[0]);\n\t\t\t\tvar formData = new FormData(form[0]);\n\t\t\t\turl = 'index.php';\n\t\t\t\tif (app.getViewName() === 'Detail') {\n\t\t\t\t\tformData.append('createmode', 'link');\n\t\t\t\t\tformData.append('return_module', app.getModuleName());\n\t\t\t\t\tformData.append('return_id', app.getRecordId());\n\t\t\t\t}\n\t\t\t\tvar params = {\n\t\t\t\t\turl: url,\n\t\t\t\t\ttype: 'POST',\n\t\t\t\t\tdata: formData,\n\t\t\t\t\tprocessData: false,\n\t\t\t\t\tcontentType: false\n\t\t\t\t};\n\t\t\t\tvar progressIndicatorElement = $.progressIndicator({\n\t\t\t\t\tblockInfo: { enabled: true }\n\t\t\t\t});\n\t\t\t\tAppConnector.request(params).done(function(data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\tvar relatedModuleName = 'Documents';\n\t\t\t\t\tif (app.getViewName() === 'Detail') {\n\t\t\t\t\t\tvar detailView = Vtiger_Detail_Js.getInstance();\n\t\t\t\t\t\tvar selectedTabElement = detailView.getSelectedTab();\n\t\t\t\t\t\tif (selectedTabElement.data('reference') === relatedModuleName) {\n\t\t\t\t\t\t\tdetailView.reloadTabContent();\n\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\tdetailView\n\t\t\t\t\t\t\t\t.getContentHolder()\n\t\t\t\t\t\t\t\t.find('.detailViewBlockLink')\n\t\t\t\t\t\t\t\t.data('reference') === relatedModuleName\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tVtiger_RelatedList_Js.getInstance(\n\t\t\t\t\t\t\t\tdetailView.getRecordId(),\n\t\t\t\t\t\t\t\tapp.getModuleName(),\n\t\t\t\t\t\t\t\tselectedTabElement,\n\t\t\t\t\t\t\t\trelatedModuleName\n\t\t\t\t\t\t\t).loadRelatedList();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvar updatesWidget = detailView\n\t\t\t\t\t\t\t\t.getContentHolder()\n\t\t\t\t\t\t\t\t.find(\"[data-type='RelatedModule'][data-name='Documents']\");\n\t\t\t\t\t\t\tif (updatesWidget.length > 0) {\n\t\t\t\t\t\t\t\tvar params = detailView.getFiltersData(updatesWidget);\n\t\t\t\t\t\t\t\tdetailView.loadWidget(updatesWidget, params['params']);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tVtiger_List_Js.getInstance().getListViewRecords();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t},\n\tgetEmailFromRecord(record, module, maxEmails) {\n\t\tconst aDeferred = $.Deferred();\n\t\tconst progress = $.progressIndicator({ position: 'html', blockInfo: { enabled: true } });\n\t\tAppConnector.request({\n\t\t\tdataType: 'html',\n\t\t\tdata: {\n\t\t\t\tmodule: 'OSSMail',\n\t\t\t\taction: 'GetMail',\n\t\t\t\tsourceModule: module,\n\t\t\t\tsourceRecord: record,\n\t\t\t\tmaxEmails: maxEmails\n\t\t\t}\n\t\t})\n\t\t\t.done(data => {\n\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\tif (data.substring(0, 1) == '{') {\n\t\t\t\t\tdata = JSON.parse(data);\n\t\t\t\t\tdata = data['result'];\n\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t} else {\n\t\t\t\t\tapp.showModalWindow(data, data => {\n\t\t\t\t\t\tdata.find('.selectButton').on('click', e => {\n\t\t\t\t\t\t\tif (data.find('input:checked').length) {\n\t\t\t\t\t\t\t\tlet email = data.find('input:checked').val();\n\t\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\t\taDeferred.resolve(email);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\t\t\t\ttext: app.vtranslate('JS_SELECT_AN_OPTION'),\n\t\t\t\t\t\t\t\t\ttype: 'info'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t})\n\t\t\t.fail((error, err) => {\n\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\taDeferred.reject(error);\n\t\t\t});\n\t\treturn aDeferred.promise();\n\t},\n\tregisterMailButtons: function(container) {\n\t\tvar thisInstance = this;\n\t\tcontainer.find('.sendMailBtn:not(.mailBtnActive)').each(function(e) {\n\t\t\tvar sendButton = $(this);\n\t\t\tsendButton.addClass('mailBtnActive');\n\t\t\tsendButton.on('click', function(e) {\n\t\t\t\te.stopPropagation();\n\t\t\t\tvar url = sendButton.data('url');\n\t\t\t\tvar popup = sendButton.data('popup');\n\t\t\t\tvar toMail = sendButton.data('to');\n\t\t\t\tif (toMail) {\n\t\t\t\t\turl += '&to=' + toMail;\n\t\t\t\t}\n\t\t\t\tif (app.getRecordId() && sendButton.data('record') !== app.getRecordId()) {\n\t\t\t\t\turl += '&crmModule=' + app.getModuleName() + '&crmRecord=' + app.getRecordId();\n\t\t\t\t}\n\t\t\t\tthisInstance.sendMailWindow(url, popup);\n\t\t\t});\n\t\t});\n\t},\n\tsendMailWindow: function(url, popup, postData) {\n\t\tif (popup) {\n\t\t\tvar width = screen.width - 15;\n\t\t\tvar height = screen.height - 150;\n\t\t\tvar left = 0;\n\t\t\tvar top = 30;\n\t\t\tvar popupParams = 'width=' + width + ', height=' + height + ', left=' + left + ', top=' + top;\n\t\t\tif (postData == undefined) {\n\t\t\t\twindow.open(\n\t\t\t\t\turl,\n\t\t\t\t\t'_blank',\n\t\t\t\t\tpopupParams + ',resizable=yes,scrollbars=yes,toolbar=yes,menubar=no,location=no,status=nomenubar=no'\n\t\t\t\t);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar form = $('<form/>', { action: 'index.php' });\n\t\t\turl.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m, key, value) {\n\t\t\t\tform.append($('<input>', { name: key, value: value }));\n\t\t\t});\n\t\t\tfor (var i in postData) {\n\t\t\t\tform.append($('<input>', { name: i, value: JSON.stringify(postData[i]) }));\n\t\t\t}\n\t\t\t$('body').append(form);\n\t\t\tform.submit();\n\t\t} else {\n\t\t\twindow.location.href = url;\n\t\t}\n\t},\n\tregisterWidgetsEvents: function() {\n\t\tvar widgets = $('div.widgetContainer');\n\t\twidgets.on('shown.bs.collapse', function(e) {\n\t\t\tvar widgetContainer = $(e.currentTarget);\n\t\t\tVtiger_Index_Js.loadWidgets(widgetContainer);\n\t\t\tvar key = widgetContainer.attr('id');\n\t\t\tapp.cacheSet(key, 1);\n\t\t});\n\t\twidgets.on('hidden.bs.collapse', function(e) {\n\t\t\tvar widgetContainer = $(e.currentTarget);\n\t\t\tvar imageEle = widgetContainer.parent().find('.imageElement');\n\t\t\tvar imagePath = imageEle.data('rightimage');\n\t\t\timageEle.attr('src', imagePath);\n\t\t\tvar key = widgetContainer.attr('id');\n\t\t\tapp.cacheSet(key, 0);\n\t\t});\n\t},\n\t/**\n\t * Function is used to load the sidebar widgets\n\t * @param widgetContainer - widget container\n\t * @param open - widget should be open or closed\n\t */\n\tloadWidgets: function(widgetContainer, open) {\n\t\tvar message = $('.loadingWidgetMsg').html();\n\t\tif (\n\t\t\twidgetContainer\n\t\t\t\t.find('.card-body')\n\t\t\t\t.html()\n\t\t\t\t.trim()\n\t\t) {\n\t\t\tvar imageEle = widgetContainer.parent().find('.imageElement');\n\t\t\tvar imagePath = imageEle.data('downimage');\n\t\t\timageEle.attr('src', imagePath);\n\t\t\twidgetContainer.css('height', 'auto');\n\t\t\treturn;\n\t\t}\n\n\t\twidgetContainer.progressIndicator({ message: message });\n\t\tvar url = widgetContainer.data('url');\n\t\tvar listViewWidgetParams = {\n\t\t\ttype: 'GET',\n\t\t\turl: 'index.php',\n\t\t\tdataType: 'html',\n\t\t\tdata: url\n\t\t};\n\t\tAppConnector.request(listViewWidgetParams).done(function(data) {\n\t\t\tif (typeof open === 'undefined') open = true;\n\t\t\tif (open) {\n\t\t\t\twidgetContainer.progressIndicator({ mode: 'hide' });\n\t\t\t\tvar imageEle = widgetContainer.parent().find('.imageElement');\n\t\t\t\tvar imagePath = imageEle.data('downimage');\n\t\t\t\timageEle.attr('src', imagePath);\n\t\t\t\twidgetContainer.css('height', 'auto');\n\t\t\t}\n\t\t\twidgetContainer.html(data);\n\t\t\tif (data == '') {\n\t\t\t\twidgetContainer.closest('.quickWidget').addClass('d-none');\n\t\t\t} else {\n\t\t\t\tvar label = widgetContainer\n\t\t\t\t\t.closest('.quickWidget')\n\t\t\t\t\t.find('.quickWidgetHeader')\n\t\t\t\t\t.data('label');\n\t\t\t}\n\t\t\t$('.bodyContents').trigger('Vtiger.Widget.Load.' + label, $(widgetContainer));\n\t\t});\n\t},\n\tloadWidgetsOnLoad: function() {\n\t\tvar widgets = $('div.widgetContainer');\n\t\twidgets.each(function(index, element) {\n\t\t\tVtiger_Index_Js.loadWidgets($(element));\n\t\t});\n\t},\n\t/**\n\t * Function to change user theme(colour)\n\t * @params : colour name\n\t */\n\tchangeSkin: function() {\n\t\t$('.themeElement').on('click', function(e) {\n\t\t\te.stopPropagation();\n\t\t\tvar currentElement = $(e.currentTarget);\n\t\t\tcurrentElement.closest('#themeContainer').hide();\n\t\t\tvar progressElement = $('#progressDiv');\n\t\t\tprogressElement.progressIndicator();\n\t\t\tvar params = {\n\t\t\t\tmodule: 'Users',\n\t\t\t\taction: 'SaveAjax',\n\t\t\t\trecord: CONFIG.userId,\n\t\t\t\tfield: 'theme',\n\t\t\t\tvalue: currentElement.data('skinName')\n\t\t\t};\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function(data) {\n\t\t\t\t\tif (data.success && data.result) {\n\t\t\t\t\t\tprogressElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t$('.settingIcons').removeClass('open');\n\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.fail(function(error, err) {});\n\t\t});\n\t},\n\tmarkNotifications: function(id) {\n\t\tvar aDeferred = $.Deferred();\n\t\tvar thisInstance = this;\n\t\tvar params = {\n\t\t\tmodule: 'Notification',\n\t\t\taction: 'Notification',\n\t\t\tmode: 'setMark',\n\t\t\tids: id\n\t\t};\n\t\tAppConnector.request(params)\n\t\t\t.done(function(data) {\n\t\t\t\tvar row = $('.notificationEntries .noticeRow[data-id=\"' + id + '\"]');\n\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\ttitle: app.vtranslate('JS_MESSAGE'),\n\t\t\t\t\ttext: app.vtranslate('JS_MARKED_AS_READ'),\n\t\t\t\t\ttype: 'info'\n\t\t\t\t});\n\t\t\t\tif (row.length) {\n\t\t\t\t\trow.fadeOut(300, function() {\n\t\t\t\t\t\tvar entries = row.closest('.notificationEntries');\n\t\t\t\t\t\trow.remove();\n\t\t\t\t\t\tentries.each(function(index) {\n\t\t\t\t\t\t\tvar block = $(this);\n\t\t\t\t\t\t\tif (block.find('.noticeRow').length == 0) {\n\t\t\t\t\t\t\t\tblock.closest('.panel').hide();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t\tthisInstance.getNotificationsForReminder();\n\t\t\t\t}\n\t\t\t\taDeferred.resolve(data);\n\t\t\t})\n\t\t\t.fail(function(textStatus, errorThrown) {\n\t\t\t\tapp.errorLog(textStatus, errorThrown);\n\t\t\t\taDeferred.reject(textStatus, errorThrown);\n\t\t\t});\n\t\treturn aDeferred.promise();\n\t},\n\tmarkAllNotifications: function(element) {\n\t\tvar ids = [];\n\t\tvar li = $(element).closest('.notificationContainer');\n\t\tli.find('.notificationEntries .noticeRow').each(function(index) {\n\t\t\tids.push($(this).data('id'));\n\t\t});\n\t\tif (ids.length == 0) {\n\t\t\telement.remove();\n\t\t\treturn false;\n\t\t}\n\t\tvar params = {\n\t\t\tmodule: 'Notification',\n\t\t\taction: 'Notification',\n\t\t\tmode: 'setMark',\n\t\t\tids: ids\n\t\t};\n\t\tli.progressIndicator({ position: 'html' });\n\t\tAppConnector.request(params).done(function(data) {\n\t\t\tli.progressIndicator({ mode: 'hide' });\n\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\ttitle: app.vtranslate('JS_MESSAGE'),\n\t\t\t\ttext: app.vtranslate('JS_MARKED_AS_READ'),\n\t\t\t\ttype: 'info'\n\t\t\t});\n\t\t\tVtiger_Index_Js.getNotificationsForReminder();\n\t\t});\n\t},\n\t/**\n\t * Function registers event for Reminder popups\n\t */\n\tregisterReminders: function() {\n\t\tvar activityReminder = (parseInt(app.getMainParams('activityReminder')) || 0) * 1000;\n\t\tif (activityReminder != 0 && $('.remindersNotice.autoRefreshing').length) {\n\t\t\tVtiger_Index_Js.requestReminder();\n\t\t\twindow.reminder = setInterval(function() {\n\t\t\t\tVtiger_Index_Js.requestReminder();\n\t\t\t}, activityReminder);\n\t\t}\n\t\tvar reminder = (parseInt(app.getMainParams('intervalForNotificationNumberCheck')) || 0) * 1000;\n\t\tif (reminder != 0 && $('.notificationsNotice.autoRefreshing').length) {\n\t\t\tVtiger_Index_Js.getNotificationsForReminder();\n\t\t\twindow.reminderNotifications = setInterval(function() {\n\t\t\t\tVtiger_Index_Js.getNotificationsForReminder();\n\t\t\t}, reminder);\n\t\t}\n\t},\n\tgetNotificationsForReminder: function() {\n\t\tvar thisInstance = this;\n\t\tvar content = $('.remindersNotificationContainer');\n\t\tvar element = $('.notificationsNotice');\n\t\tvar url = 'index.php?module=Notification&view=Reminders';\n\t\tAppConnector.request(url)\n\t\t\t.done(function(data) {\n\t\t\t\tcontent.html(data);\n\t\t\t\tthisInstance.refreshReminderCount(content, element, 'js-count-notifications-reminder');\n\t\t\t\tcontent.find('.js-set-marked').on('click', function(e) {\n\t\t\t\t\tvar currentElement = $(e.currentTarget);\n\t\t\t\t\tvar recordID = currentElement.closest('.js-notification-panel').data('record');\n\t\t\t\t\tthisInstance.markNotifications(recordID).done(function(data) {\n\t\t\t\t\t\tcurrentElement.closest('.js-notification-panel').fadeOut(300, function() {\n\t\t\t\t\t\t\t$(this).remove();\n\t\t\t\t\t\t\tthisInstance.refreshReminderCount(content, element, 'js-count-notifications-reminder');\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t})\n\t\t\t.fail(function(data, err) {\n\t\t\t\tclearInterval(window.reminderNotifications);\n\t\t\t});\n\t},\n\t/**\n\t * Function request for reminder popups\n\t */\n\trequestReminder: function() {\n\t\tvar thisInstance = this;\n\t\tvar content = $('.remindersNoticeContainer');\n\t\tvar element = $('.remindersNotice');\n\t\tvar url = 'index.php?module=Calendar&view=Reminders&type_remainder=true';\n\t\tAppConnector.request(url)\n\t\t\t.done(function(data) {\n\t\t\t\tcontent.html(data);\n\t\t\t\tthisInstance.refreshReminderCount(content, element, 'countRemindersNotice');\n\t\t\t\tapp.registerModal(content);\n\t\t\t\tcontent.find('.reminderPostpone').on('click', function(e) {\n\t\t\t\t\tvar currentElement = $(e.currentTarget);\n\t\t\t\t\tvar recordID = currentElement.closest('.js-toggle-panel').data('record');\n\t\t\t\t\tvar url =\n\t\t\t\t\t\t'index.php?module=Calendar&action=ActivityReminder&mode=postpone&record=' +\n\t\t\t\t\t\trecordID +\n\t\t\t\t\t\t'&time=' +\n\t\t\t\t\t\tcurrentElement.data('time');\n\t\t\t\t\tAppConnector.request(url).done(function(data) {\n\t\t\t\t\t\tcurrentElement.closest('.js-toggle-panel').fadeOut(300, function() {\n\t\t\t\t\t\t\t$(this).remove();\n\t\t\t\t\t\t\tthisInstance.refreshReminderCount(content, element, 'countRemindersNotice');\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t})\n\t\t\t.fail(function(data, err) {\n\t\t\t\tclearInterval(window.reminder);\n\t\t\t});\n\t},\n\trefreshReminderCount: function(content, element, tag) {\n\t\tvar badge = element.find('.badge');\n\t\tvar count = content.find('.js-toggle-panel').length;\n\t\tbadge.text(count);\n\t\tbadge.removeClass('d-none');\n\t\tif (count > 0 && element.hasClass('autoRefreshing')) {\n\t\t\telement.effect('pulsate', 1500);\n\t\t\tif (app.cacheGet(tag) != count) {\n\t\t\t\tapp.playSound('REMINDERS');\n\t\t\t\tapp.cacheSet(tag, count);\n\t\t\t}\n\t\t} else {\n\t\t\tbadge.addClass('d-none');\n\t\t}\n\t},\n\tregisterResizeEvent: function() {\n\t\t$(window).on('resize', function() {\n\t\t\tif (this.resizeTO) clearTimeout(this.resizeTO);\n\t\t\tthis.resizeTO = setTimeout(function() {\n\t\t\t\t$(this).trigger('resizeEnd');\n\t\t\t}, 600);\n\t\t});\n\t},\n\tchangeWatching: function(instance) {\n\t\tvar value, module, state, className, user, record;\n\t\tif (instance != undefined) {\n\t\t\tinstance = $(instance);\n\t\t\tvalue = instance.data('value');\n\t\t\tif (instance.data('module') != undefined) {\n\t\t\t\tmodule = instance.data('module');\n\t\t\t} else {\n\t\t\t\tmodule = app.getModuleName();\n\t\t\t}\n\t\t\tif (instance.data('user') != undefined) {\n\t\t\t\tuser = instance.data('user');\n\t\t\t}\n\t\t\tif (instance.data('record') != undefined) {\n\t\t\t\trecord = instance.data('record');\n\t\t\t}\n\t\t}\n\t\tbootbox.dialog({\n\t\t\tmessage: app.vtranslate('JS_WATCHING_MESSAGE' + value),\n\t\t\ttitle: '<span class=\"fas fa-eye mr-1\"></span>' + app.vtranslate('JS_WATCHING_TITLE'),\n\t\t\tbuttons: {\n\t\t\t\tsuccess: {\n\t\t\t\t\tlabel: '<span class=\"fas fa-check mr-1\"></span>' + app.vtranslate('LBL_YES'),\n\t\t\t\t\tclassName: 'btn-success',\n\t\t\t\t\tcallback: function() {\n\t\t\t\t\t\tVtiger_Index_Js.updateWatching(module, value, user, record).done(function(data) {\n\t\t\t\t\t\t\tif (instance != undefined) {\n\t\t\t\t\t\t\t\tvar buttonIcon = instance.find('.fas');\n\t\t\t\t\t\t\t\tstate = data.result == 1 ? 0 : 1;\n\t\t\t\t\t\t\t\tinstance.data('value', state);\n\t\t\t\t\t\t\t\tif (state == 1) {\n\t\t\t\t\t\t\t\t\tinstance.toggleClass(instance.data('off') + ' ' + instance.data('on'));\n\t\t\t\t\t\t\t\t\tbuttonIcon.removeClass('fas fa-eye');\n\t\t\t\t\t\t\t\t\tbuttonIcon.addClass('fas fa-eye-slash');\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tinstance.toggleClass(instance.data('on') + ' ' + instance.data('off'));\n\t\t\t\t\t\t\t\t\tbuttonIcon.removeClass('fas fa-eye-slash');\n\t\t\t\t\t\t\t\t\tbuttonIcon.addClass('fas fa-eye');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tdanger: {\n\t\t\t\t\tlabel: '<span class=\"fas fa-times mr-1\"></span>' + app.vtranslate('LBL_NO'),\n\t\t\t\t\tclassName: 'btn-danger',\n\t\t\t\t\tcallback: function() {}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\tupdateWatching: function(module, value, user, record) {\n\t\tvar aDeferred = $.Deferred();\n\t\tvar params = {\n\t\t\tmodule: module,\n\t\t\taction: 'Watchdog',\n\t\t\tstate: value\n\t\t};\n\t\tif (user != undefined) {\n\t\t\tparams['user'] = user;\n\t\t}\n\t\tif (record != undefined && record != 0) {\n\t\t\tparams['record'] = record;\n\t\t}\n\t\tAppConnector.request(params)\n\t\t\t.done(function(data) {\n\t\t\t\taDeferred.resolve(data);\n\t\t\t})\n\t\t\t.fail(function(textStatus, errorThrown) {\n\t\t\t\taDeferred.reject(textStatus, errorThrown);\n\t\t\t\tapp.errorLog(textStatus, errorThrown);\n\t\t\t});\n\t\treturn aDeferred.promise();\n\t},\n\tassignToOwner: function(element, userId) {\n\t\telement = $(element);\n\t\tif (userId == undefined) {\n\t\t\tuserId = CONFIG.userId;\n\t\t}\n\t\tvar params = {\n\t\t\tmodule: element.data('module'),\n\t\t\trecord: element.data('record'),\n\t\t\tfield: 'assigned_user_id',\n\t\t\tvalue: userId\n\t\t};\n\t\tapp.saveAjax('', null, params).done(function(e) {\n\t\t\tapp.hideModalWindow();\n\t\t\tif (app.getViewName() === 'List') {\n\t\t\t\tvar listinstance = new Vtiger_List_Js();\n\t\t\t\tlistinstance.getListViewRecords();\n\t\t\t}\n\t\t});\n\t},\n\tsendNotification: function() {\n\t\tVtiger_Header_Js.getInstance().quickCreateModule('Notification');\n\t},\n\tperformPhoneCall: function(phoneNumber, record) {\n\t\tAppConnector.request({\n\t\t\tmodule: app.getModuleName(),\n\t\t\tview: 'BasicAjax',\n\t\t\tmode: 'performPhoneCall',\n\t\t\tphoneNumber: phoneNumber,\n\t\t\trecord: record\n\t\t}).done(function(response) {\n\t\t\tresponse = JSON.parse(response);\n\t\t\tVtiger_Helper_Js.showMessage({ text: response.result });\n\t\t});\n\t},\n\tregisterAterloginEvents: function() {\n\t\tif (typeof CONFIG.ShowUserPasswordChange !== 'undefined') {\n\t\t\tapp.showModalWindow(null, 'index.php?module=Users&view=PasswordModal&mode=change&record=' + CONFIG.userId);\n\t\t}\n\t\tif (typeof CONFIG.ShowAuthy2faModal !== 'undefined') {\n\t\t\tapp.showModalWindow({\n\t\t\t\tbackdrop: 'static',\n\t\t\t\turl: 'index.php?module=Users&view=TwoFactorAuthenticationModal&record=' + CONFIG.userId\n\t\t\t});\n\t\t}\n\t},\n\tregisterEvents: function() {\n\t\tVtiger_Index_Js.registerWidgetsEvents();\n\t\tVtiger_Index_Js.loadWidgetsOnLoad();\n\t\tVtiger_Index_Js.registerReminders();\n\t\tVtiger_Index_Js.changeSkin();\n\t\tVtiger_Index_Js.registerResizeEvent();\n\t\tVtiger_Index_Js.registerAterloginEvents();\n\t}\n};\n//On Page Load\n$(document).ready(function() {\n\tVtiger_Index_Js.registerEvents();\n});\n"],"names":["Vtiger_Index_Js","element","showModalWindow","container","mapView","OpenStreetMap_Map_Js","registerModalView","find","val","$","data","trigger","url","uploadButton","template","uploadContainer","form","on","remove","files","i","length","append","html","name","e","preventDefault","removeEmptyFilesInput","formData","FormData","app","getViewName","getModuleName","getRecordId","params","progressIndicatorElement","progressIndicator","enabled","request","done","mode","hideModalWindow","relatedModuleName","detailView","Vtiger_Detail_Js","getInstance","selectedTabElement","getSelectedTab","reloadTabContent","getContentHolder","loadRelatedList","updatesWidget","getFiltersData","loadWidget","getListViewRecords","record","module","maxEmails","aDeferred","Deferred","progress","position","blockInfo","substring","JSON","parse","resolve","email","showPnotify","vtranslate","fail","error","err","reject","promise","thisInstance","each","sendButton","addClass","stopPropagation","popup","toMail","sendMailWindow","postData","width","screen","height","left","top","popupParams","undefined","open","action","replace","m","key","value","stringify","submit","location","href","widgets","widgetContainer","currentTarget","loadWidgets","attr","cacheSet","imageEle","parent","imagePath","message","trim","css","listViewWidgetParams","closest","label","index","currentElement","hide","progressElement","CONFIG","userId","success","result","removeClass","reload","id","row","fadeOut","entries","block","getNotificationsForReminder","textStatus","errorThrown","errorLog","ids","li","push","activityReminder","parseInt","getMainParams","requestReminder","reminder","setInterval","reminderNotifications","content","refreshReminderCount","recordID","markNotifications","window","registerModal","tag","badge","count","text","hasClass","effect","cacheGet","playSound","resizeTO","clearTimeout","setTimeout","instance","state","className","user","dialog","updateWatching","buttonIcon","toggleClass","saveAjax","listinstance","Vtiger_List_Js","quickCreateModule","phoneNumber","response","showMessage","ShowUserPasswordChange","ShowAuthy2faModal","registerWidgetsEvents","loadWidgetsOnLoad","registerReminders","changeSkin","registerResizeEvent","registerAterloginEvents","document","ready","registerEvents"],"mappings":";;AAAA;;;;;;;;;AASA;AAEA,IAAIA,kBAAkB;eACP,sBAASC,OAAT,EAAkB;MAC3BC,eAAJ,CAAoB,IAApB,EAA0B,8CAA1B,EAA0E,UAASC,SAAT,EAAoB;OACzFC,UAAU,IAAIC,oBAAJ,EAAd;WACQC,iBAAR,CAA0BH,SAA1B;aACUI,IAAV,CAAe,cAAf,EAA+BC,GAA/B,CAAmCC,EAAER,OAAF,EAAWS,IAAX,CAAgB,UAAhB,CAAnC;aACUH,IAAV,CAAe,YAAf,EAA6BI,OAA7B,CAAqC,OAArC;GAJD;EAFoB;mBASH,0BAASC,GAAT,EAAc;MAC3BV,eAAJ,CAAoB,IAApB,EAA0BU,GAA1B,EAA+B,UAAST,SAAT,EAAoB;OAC9CU,eAAeV,UAAUI,IAAV,CAAe,gBAAf,CAAnB;OACIO,WAAWX,UAAUI,IAAV,CAAe,gBAAf,CAAf;OACIQ,kBAAkBZ,UAAUI,IAAV,CAAe,sBAAf,CAAtB;OACIS,OAAOb,UAAUI,IAAV,CAAe,MAAf,CAAX;gBACaU,EAAb,CAAgB,QAAhB,EAA0B,YAAW;oBACpBV,IAAhB,CAAqB,WAArB,EAAkCW,MAAlC;QACIC,QAAQN,aAAa,CAAb,EAAgBM,KAA5B;SACK,IAAIC,IAAI,CAAb,EAAgBA,IAAID,MAAME,MAA1B,EAAkCD,GAAlC,EAAuC;qBACtBE,MAAhB,CAAuBR,SAASS,IAAT,EAAvB;qBACgBhB,IAAhB,CAAqB,0BAArB,EAAiDC,GAAjD,CAAqDW,MAAMC,CAAN,EAASI,IAA9D;;IALF;QAQKP,EAAL,CAAQ,QAAR,EAAkB,UAASQ,CAAT,EAAY;MAC3BC,cAAF;QACIC,qBAAJ,CAA0BX,KAAK,CAAL,CAA1B;QACIY,WAAW,IAAIC,QAAJ,CAAab,KAAK,CAAL,CAAb,CAAf;UACM,WAAN;QACIc,IAAIC,WAAJ,OAAsB,QAA1B,EAAoC;cAC1BT,MAAT,CAAgB,YAAhB,EAA8B,MAA9B;cACSA,MAAT,CAAgB,eAAhB,EAAiCQ,IAAIE,aAAJ,EAAjC;cACSV,MAAT,CAAgB,WAAhB,EAA6BQ,IAAIG,WAAJ,EAA7B;;QAEGC,SAAS;UACPtB,GADO;WAEN,MAFM;WAGNgB,QAHM;kBAIC,KAJD;kBAKC;KALd;QAOIO,2BAA2B1B,EAAE2B,iBAAF,CAAoB;gBACvC,EAAEC,SAAS,IAAX;KADmB,CAA/B;iBAGaC,OAAb,CAAqBJ,MAArB,EAA6BK,IAA7B,CAAkC,UAAS7B,IAAT,EAAe;8BACvB0B,iBAAzB,CAA2C,EAAEI,MAAM,MAAR,EAA3C;SACIC,eAAJ;SACIC,oBAAoB,WAAxB;SACIZ,IAAIC,WAAJ,OAAsB,QAA1B,EAAoC;UAC/BY,aAAaC,iBAAiBC,WAAjB,EAAjB;UACIC,qBAAqBH,WAAWI,cAAX,EAAzB;UACID,mBAAmBpC,IAAnB,CAAwB,WAAxB,MAAyCgC,iBAA7C,EAAgE;kBACpDM,gBAAX;OADD,MAEO,IACNL,WACEM,gBADF,GAEE1C,IAFF,CAEO,sBAFP,EAGEG,IAHF,CAGO,WAHP,MAGwBgC,iBAJlB,EAKL;6BACqBG,WAAtB,CACCF,WAAWV,WAAX,EADD,EAECH,IAAIE,aAAJ,EAFD,EAGCc,kBAHD,EAICJ,iBAJD,EAKEQ,eALF;OANM,MAYA;WACFC,gBAAgBR,WAClBM,gBADkB,GAElB1C,IAFkB,CAEb,oDAFa,CAApB;WAGI4C,cAAc9B,MAAd,GAAuB,CAA3B,EAA8B;YACzBa,SAASS,WAAWS,cAAX,CAA0BD,aAA1B,CAAb;mBACWE,UAAX,CAAsBF,aAAtB,EAAqCjB,OAAO,QAAP,CAArC;;;MAvBH,MA0BO;qBACSW,WAAf,GAA6BS,kBAA7B;;KA/BF;IApBD;GAbD;EAVoB;mBAAA,8BAgFFC,MAhFE,EAgFMC,MAhFN,EAgFcC,SAhFd,EAgFyB;MACvCC,YAAYjD,EAAEkD,QAAF,EAAlB;MACMC,WAAWnD,EAAE2B,iBAAF,CAAoB,EAAEyB,UAAU,MAAZ,EAAoBC,WAAW,EAAEzB,SAAS,IAAX,EAA/B,EAApB,CAAjB;eACaC,OAAb,CAAqB;aACV,MADU;SAEd;YACG,SADH;YAEG,SAFH;kBAGSkB,MAHT;kBAISD,MAJT;eAKME;;GAPb,EAUElB,IAVF,CAUO,gBAAQ;YACJH,iBAAT,CAA2B,EAAEI,MAAM,MAAR,EAA3B;OACI9B,KAAKqD,SAAL,CAAe,CAAf,EAAkB,CAAlB,KAAwB,GAA5B,EAAiC;WACzBC,KAAKC,KAAL,CAAWvD,IAAX,CAAP;WACOA,KAAK,QAAL,CAAP;cACUwD,OAAV,CAAkBxD,IAAlB;IAHD,MAIO;QACFR,eAAJ,CAAoBQ,IAApB,EAA0B,gBAAQ;UAC5BH,IAAL,CAAU,eAAV,EAA2BU,EAA3B,CAA8B,OAA9B,EAAuC,aAAK;UACvCP,KAAKH,IAAL,CAAU,eAAV,EAA2Bc,MAA/B,EAAuC;WAClC8C,QAAQzD,KAAKH,IAAL,CAAU,eAAV,EAA2BC,GAA3B,EAAZ;WACIiC,eAAJ;iBACUyB,OAAV,CAAkBC,KAAlB;OAHD,MAIO;wBACWC,WAAjB,CAA6B;cACtBtC,IAAIuC,UAAJ,CAAe,qBAAf,CADsB;cAEtB;QAFP;;MANF;KADD;;GAjBH,EAiCEC,IAjCF,CAiCO,UAACC,KAAD,EAAQC,GAAR,EAAgB;YACZpC,iBAAT,CAA2B,EAAEI,MAAM,MAAR,EAA3B;aACUiC,MAAV,CAAiBF,KAAjB;GAnCF;SAqCOb,UAAUgB,OAAV,EAAP;EAxHoB;;sBA0HA,6BAASvE,SAAT,EAAoB;MACpCwE,eAAe,IAAnB;YACUpE,IAAV,CAAe,kCAAf,EAAmDqE,IAAnD,CAAwD,UAASnD,CAAT,EAAY;OAC/DoD,aAAapE,EAAE,IAAF,CAAjB;cACWqE,QAAX,CAAoB,eAApB;cACW7D,EAAX,CAAc,OAAd,EAAuB,UAASQ,CAAT,EAAY;MAChCsD,eAAF;QACInE,MAAMiE,WAAWnE,IAAX,CAAgB,KAAhB,CAAV;QACIsE,QAAQH,WAAWnE,IAAX,CAAgB,OAAhB,CAAZ;QACIuE,SAASJ,WAAWnE,IAAX,CAAgB,IAAhB,CAAb;QACIuE,MAAJ,EAAY;YACJ,SAASA,MAAhB;;QAEGnD,IAAIG,WAAJ,MAAqB4C,WAAWnE,IAAX,CAAgB,QAAhB,MAA8BoB,IAAIG,WAAJ,EAAvD,EAA0E;YAClE,gBAAgBH,IAAIE,aAAJ,EAAhB,GAAsC,aAAtC,GAAsDF,IAAIG,WAAJ,EAA7D;;iBAEYiD,cAAb,CAA4BtE,GAA5B,EAAiCoE,KAAjC;IAXD;GAHD;EA5HoB;iBA8IL,wBAASpE,GAAT,EAAcoE,KAAd,EAAqBG,QAArB,EAA+B;MAC1CH,KAAJ,EAAW;OACNI,QAAQC,OAAOD,KAAP,GAAe,EAA3B;OACIE,SAASD,OAAOC,MAAP,GAAgB,GAA7B;OACIC,OAAO,CAAX;OACIC,MAAM,EAAV;OACIC,cAAc,WAAWL,KAAX,GAAmB,WAAnB,GAAiCE,MAAjC,GAA0C,SAA1C,GAAsDC,IAAtD,GAA6D,QAA7D,GAAwEC,GAA1F;OACIL,YAAYO,SAAhB,EAA2B;WACnBC,IAAP,CACC/E,GADD,EAEC,QAFD,EAGC6E,cAAc,sFAHf;;;OAOGzE,OAAOP,EAAE,SAAF,EAAa,EAAEmF,QAAQ,WAAV,EAAb,CAAX;OACIC,OAAJ,CAAY,yBAAZ,EAAuC,UAASC,CAAT,EAAYC,GAAZ,EAAiBC,KAAjB,EAAwB;SACzD1E,MAAL,CAAYb,EAAE,SAAF,EAAa,EAAEe,MAAMuE,GAAR,EAAaC,OAAOA,KAApB,EAAb,CAAZ;IADD;QAGK,IAAI5E,CAAT,IAAc+D,QAAd,EAAwB;SAClB7D,MAAL,CAAYb,EAAE,SAAF,EAAa,EAAEe,MAAMJ,CAAR,EAAW4E,OAAOhC,KAAKiC,SAAL,CAAed,SAAS/D,CAAT,CAAf,CAAlB,EAAb,CAAZ;;KAEC,MAAF,EAAUE,MAAV,CAAiBN,IAAjB;QACKkF,MAAL;GAtBD,MAuBO;UACCC,QAAP,CAAgBC,IAAhB,GAAuBxF,GAAvB;;EAvKmB;wBA0KE,iCAAW;MAC7ByF,UAAU5F,EAAE,qBAAF,CAAd;UACQQ,EAAR,CAAW,mBAAX,EAAgC,UAASQ,CAAT,EAAY;OACvC6E,kBAAkB7F,EAAEgB,EAAE8E,aAAJ,CAAtB;mBACgBC,WAAhB,CAA4BF,eAA5B;OACIP,MAAMO,gBAAgBG,IAAhB,CAAqB,IAArB,CAAV;OACIC,QAAJ,CAAaX,GAAb,EAAkB,CAAlB;GAJD;UAMQ9E,EAAR,CAAW,oBAAX,EAAiC,UAASQ,CAAT,EAAY;OACxC6E,kBAAkB7F,EAAEgB,EAAE8E,aAAJ,CAAtB;OACII,WAAWL,gBAAgBM,MAAhB,GAAyBrG,IAAzB,CAA8B,eAA9B,CAAf;OACIsG,YAAYF,SAASjG,IAAT,CAAc,YAAd,CAAhB;YACS+F,IAAT,CAAc,KAAd,EAAqBI,SAArB;OACId,MAAMO,gBAAgBG,IAAhB,CAAqB,IAArB,CAAV;OACIC,QAAJ,CAAaX,GAAb,EAAkB,CAAlB;GAND;EAlLoB;;;;;;cAgMR,qBAASO,eAAT,EAA0BX,IAA1B,EAAgC;MACxCmB,UAAUrG,EAAE,mBAAF,EAAuBc,IAAvB,EAAd;MAEC+E,gBACE/F,IADF,CACO,YADP,EAEEgB,IAFF,GAGEwF,IAHF,EADD,EAKE;OACGJ,WAAWL,gBAAgBM,MAAhB,GAAyBrG,IAAzB,CAA8B,eAA9B,CAAf;OACIsG,YAAYF,SAASjG,IAAT,CAAc,WAAd,CAAhB;YACS+F,IAAT,CAAc,KAAd,EAAqBI,SAArB;mBACgBG,GAAhB,CAAoB,QAApB,EAA8B,MAA9B;;;;kBAIe5E,iBAAhB,CAAkC,EAAE0E,SAASA,OAAX,EAAlC;MACIlG,MAAM0F,gBAAgB5F,IAAhB,CAAqB,KAArB,CAAV;MACIuG,uBAAuB;SACpB,KADoB;QAErB,WAFqB;aAGhB,MAHgB;SAIpBrG;GAJP;eAMa0B,OAAb,CAAqB2E,oBAArB,EAA2C1E,IAA3C,CAAgD,UAAS7B,IAAT,EAAe;OAC1D,OAAOiF,IAAP,KAAgB,WAApB,EAAiCA,OAAO,IAAP;OAC7BA,IAAJ,EAAU;oBACOvD,iBAAhB,CAAkC,EAAEI,MAAM,MAAR,EAAlC;QACImE,WAAWL,gBAAgBM,MAAhB,GAAyBrG,IAAzB,CAA8B,eAA9B,CAAf;QACIsG,YAAYF,SAASjG,IAAT,CAAc,WAAd,CAAhB;aACS+F,IAAT,CAAc,KAAd,EAAqBI,SAArB;oBACgBG,GAAhB,CAAoB,QAApB,EAA8B,MAA9B;;mBAEezF,IAAhB,CAAqBb,IAArB;OACIA,QAAQ,EAAZ,EAAgB;oBACCwG,OAAhB,CAAwB,cAAxB,EAAwCpC,QAAxC,CAAiD,QAAjD;IADD,MAEO;QACFqC,QAAQb,gBACVY,OADU,CACF,cADE,EAEV3G,IAFU,CAEL,oBAFK,EAGVG,IAHU,CAGL,OAHK,CAAZ;;KAKC,eAAF,EAAmBC,OAAnB,CAA2B,wBAAwBwG,KAAnD,EAA0D1G,EAAE6F,eAAF,CAA1D;GAlBD;EAvNoB;oBA4OF,6BAAW;MACzBD,UAAU5F,EAAE,qBAAF,CAAd;UACQmE,IAAR,CAAa,UAASwC,KAAT,EAAgBnH,OAAhB,EAAyB;mBACrBuG,WAAhB,CAA4B/F,EAAER,OAAF,CAA5B;GADD;EA9OoB;;;;;aAsPT,sBAAW;IACpB,eAAF,EAAmBgB,EAAnB,CAAsB,OAAtB,EAA+B,UAASQ,CAAT,EAAY;KACxCsD,eAAF;OACIsC,iBAAiB5G,EAAEgB,EAAE8E,aAAJ,CAArB;kBACeW,OAAf,CAAuB,iBAAvB,EAA0CI,IAA1C;OACIC,kBAAkB9G,EAAE,cAAF,CAAtB;mBACgB2B,iBAAhB;OACIF,SAAS;YACJ,OADI;YAEJ,UAFI;YAGJsF,OAAOC,MAHH;WAIL,OAJK;WAKLJ,eAAe3G,IAAf,CAAoB,UAApB;IALR;gBAOa4B,OAAb,CAAqBJ,MAArB,EACEK,IADF,CACO,UAAS7B,IAAT,EAAe;QAChBA,KAAKgH,OAAL,IAAgBhH,KAAKiH,MAAzB,EAAiC;qBAChBvF,iBAAhB,CAAkC,EAAEI,MAAM,MAAR,EAAlC;OACE,eAAF,EAAmBoF,WAAnB,CAA+B,MAA/B;YACOzB,QAAP,CAAgB0B,MAAhB;;IALH,EAQEvD,IARF,CAQO,UAASC,KAAT,EAAgBC,GAAhB,EAAqB,EAR5B;GAbD;EAvPoB;oBA+QF,2BAASsD,EAAT,EAAa;MAC3BpE,YAAYjD,EAAEkD,QAAF,EAAhB;MACIgB,eAAe,IAAnB;MACIzC,SAAS;WACJ,cADI;WAEJ,cAFI;SAGN,SAHM;QAIP4F;GAJN;eAMaxF,OAAb,CAAqBJ,MAArB,EACEK,IADF,CACO,UAAS7B,IAAT,EAAe;OAChBqH,MAAMtH,EAAE,8CAA8CqH,EAA9C,GAAmD,IAArD,CAAV;oBACiB1D,WAAjB,CAA6B;WACrBtC,IAAIuC,UAAJ,CAAe,YAAf,CADqB;UAEtBvC,IAAIuC,UAAJ,CAAe,mBAAf,CAFsB;UAGtB;IAHP;OAKI0D,IAAI1G,MAAR,EAAgB;QACX2G,OAAJ,CAAY,GAAZ,EAAiB,YAAW;SACvBC,UAAUF,IAAIb,OAAJ,CAAY,sBAAZ,CAAd;SACIhG,MAAJ;aACQ0D,IAAR,CAAa,UAASwC,KAAT,EAAgB;UACxBc,QAAQzH,EAAE,IAAF,CAAZ;UACIyH,MAAM3H,IAAN,CAAW,YAAX,EAAyBc,MAAzB,IAAmC,CAAvC,EAA0C;aACnC6F,OAAN,CAAc,QAAd,EAAwBI,IAAxB;;MAHF;KAHD;iBAUaa,2BAAb;;aAESjE,OAAV,CAAkBxD,IAAlB;GArBF,EAuBE4D,IAvBF,CAuBO,UAAS8D,UAAT,EAAqBC,WAArB,EAAkC;OACnCC,QAAJ,CAAaF,UAAb,EAAyBC,WAAzB;aACU5D,MAAV,CAAiB2D,UAAjB,EAA6BC,WAA7B;GAzBF;SA2BO3E,UAAUgB,OAAV,EAAP;EAnToB;uBAqTC,8BAASzE,OAAT,EAAkB;MACnCsI,MAAM,EAAV;MACIC,KAAK/H,EAAER,OAAF,EAAWiH,OAAX,CAAmB,wBAAnB,CAAT;KACG3G,IAAH,CAAQ,iCAAR,EAA2CqE,IAA3C,CAAgD,UAASwC,KAAT,EAAgB;OAC3DqB,IAAJ,CAAShI,EAAE,IAAF,EAAQC,IAAR,CAAa,IAAb,CAAT;GADD;MAGI6H,IAAIlH,MAAJ,IAAc,CAAlB,EAAqB;WACZH,MAAR;UACO,KAAP;;MAEGgB,SAAS;WACJ,cADI;WAEJ,cAFI;SAGN,SAHM;QAIPqG;GAJN;KAMGnG,iBAAH,CAAqB,EAAEyB,UAAU,MAAZ,EAArB;eACavB,OAAb,CAAqBJ,MAArB,EAA6BK,IAA7B,CAAkC,UAAS7B,IAAT,EAAe;MAC7C0B,iBAAH,CAAqB,EAAEI,MAAM,MAAR,EAArB;oBACiB4B,WAAjB,CAA6B;WACrBtC,IAAIuC,UAAJ,CAAe,YAAf,CADqB;UAEtBvC,IAAIuC,UAAJ,CAAe,mBAAf,CAFsB;UAGtB;IAHP;mBAKgB8D,2BAAhB;GAPD;EAtUoB;;;;oBAmVF,6BAAW;MACzBO,mBAAmB,CAACC,SAAS7G,IAAI8G,aAAJ,CAAkB,kBAAlB,CAAT,KAAmD,CAApD,IAAyD,IAAhF;MACIF,oBAAoB,CAApB,IAAyBjI,EAAE,iCAAF,EAAqCY,MAAlE,EAA0E;mBACzDwH,eAAhB;UACOC,QAAP,GAAkBC,YAAY,YAAW;oBACxBF,eAAhB;IADiB,EAEfH,gBAFe,CAAlB;;MAIGI,WAAW,CAACH,SAAS7G,IAAI8G,aAAJ,CAAkB,oCAAlB,CAAT,KAAqE,CAAtE,IAA2E,IAA1F;MACIE,YAAY,CAAZ,IAAiBrI,EAAE,qCAAF,EAAyCY,MAA9D,EAAsE;mBACrD8G,2BAAhB;UACOa,qBAAP,GAA+BD,YAAY,YAAW;oBACrCZ,2BAAhB;IAD8B,EAE5BW,QAF4B,CAA/B;;EA9VmB;8BAmWQ,uCAAW;MACnCnE,eAAe,IAAnB;MACIsE,UAAUxI,EAAE,iCAAF,CAAd;MACIR,UAAUQ,EAAE,sBAAF,CAAd;MACIG,MAAM,8CAAV;eACa0B,OAAb,CAAqB1B,GAArB,EACE2B,IADF,CACO,UAAS7B,IAAT,EAAe;WACZa,IAAR,CAAab,IAAb;gBACawI,oBAAb,CAAkCD,OAAlC,EAA2ChJ,OAA3C,EAAoD,iCAApD;WACQM,IAAR,CAAa,gBAAb,EAA+BU,EAA/B,CAAkC,OAAlC,EAA2C,UAASQ,CAAT,EAAY;QAClD4F,iBAAiB5G,EAAEgB,EAAE8E,aAAJ,CAArB;QACI4C,WAAW9B,eAAeH,OAAf,CAAuB,wBAAvB,EAAiDxG,IAAjD,CAAsD,QAAtD,CAAf;iBACa0I,iBAAb,CAA+BD,QAA/B,EAAyC5G,IAAzC,CAA8C,UAAS7B,IAAT,EAAe;oBAC7CwG,OAAf,CAAuB,wBAAvB,EAAiDc,OAAjD,CAAyD,GAAzD,EAA8D,YAAW;QACtE,IAAF,EAAQ9G,MAAR;mBACagI,oBAAb,CAAkCD,OAAlC,EAA2ChJ,OAA3C,EAAoD,iCAApD;MAFD;KADD;IAHD;GAJF,EAeEqE,IAfF,CAeO,UAAS5D,IAAT,EAAe8D,GAAf,EAAoB;iBACX6E,OAAOL,qBAArB;GAhBF;EAxWoB;;;;kBA8XJ,2BAAW;MACvBrE,eAAe,IAAnB;MACIsE,UAAUxI,EAAE,2BAAF,CAAd;MACIR,UAAUQ,EAAE,kBAAF,CAAd;MACIG,MAAM,8DAAV;eACa0B,OAAb,CAAqB1B,GAArB,EACE2B,IADF,CACO,UAAS7B,IAAT,EAAe;WACZa,IAAR,CAAab,IAAb;gBACawI,oBAAb,CAAkCD,OAAlC,EAA2ChJ,OAA3C,EAAoD,sBAApD;OACIqJ,aAAJ,CAAkBL,OAAlB;WACQ1I,IAAR,CAAa,mBAAb,EAAkCU,EAAlC,CAAqC,OAArC,EAA8C,UAASQ,CAAT,EAAY;QACrD4F,iBAAiB5G,EAAEgB,EAAE8E,aAAJ,CAArB;QACI4C,WAAW9B,eAAeH,OAAf,CAAuB,kBAAvB,EAA2CxG,IAA3C,CAAgD,QAAhD,CAAf;QACIE,MACH,4EACAuI,QADA,GAEA,QAFA,GAGA9B,eAAe3G,IAAf,CAAoB,MAApB,CAJD;iBAKa4B,OAAb,CAAqB1B,GAArB,EAA0B2B,IAA1B,CAA+B,UAAS7B,IAAT,EAAe;oBAC9BwG,OAAf,CAAuB,kBAAvB,EAA2Cc,OAA3C,CAAmD,GAAnD,EAAwD,YAAW;QAChE,IAAF,EAAQ9G,MAAR;mBACagI,oBAAb,CAAkCD,OAAlC,EAA2ChJ,OAA3C,EAAoD,sBAApD;MAFD;KADD;IARD;GALF,EAqBEqE,IArBF,CAqBO,UAAS5D,IAAT,EAAe8D,GAAf,EAAoB;iBACX6E,OAAOP,QAArB;GAtBF;EAnYoB;uBA4ZC,8BAASG,OAAT,EAAkBhJ,OAAlB,EAA2BsJ,GAA3B,EAAgC;MACjDC,QAAQvJ,QAAQM,IAAR,CAAa,QAAb,CAAZ;MACIkJ,QAAQR,QAAQ1I,IAAR,CAAa,kBAAb,EAAiCc,MAA7C;QACMqI,IAAN,CAAWD,KAAX;QACM7B,WAAN,CAAkB,QAAlB;MACI6B,QAAQ,CAAR,IAAaxJ,QAAQ0J,QAAR,CAAiB,gBAAjB,CAAjB,EAAqD;WAC5CC,MAAR,CAAe,SAAf,EAA0B,IAA1B;OACI9H,IAAI+H,QAAJ,CAAaN,GAAb,KAAqBE,KAAzB,EAAgC;QAC3BK,SAAJ,CAAc,WAAd;QACIpD,QAAJ,CAAa6C,GAAb,EAAkBE,KAAlB;;GAJF,MAMO;SACA3E,QAAN,CAAe,QAAf;;EAxamB;sBA2aA,+BAAW;IAC7BuE,MAAF,EAAUpI,EAAV,CAAa,QAAb,EAAuB,YAAW;OAC7B,KAAK8I,QAAT,EAAmBC,aAAa,KAAKD,QAAlB;QACdA,QAAL,GAAgBE,WAAW,YAAW;MACnC,IAAF,EAAQtJ,OAAR,CAAgB,WAAhB;IADe,EAEb,GAFa,CAAhB;GAFD;EA5aoB;iBAmbL,wBAASuJ,QAAT,EAAmB;MAC9BlE,KAAJ,EAAWxC,MAAX,EAAmB2G,KAAnB,EAA0BC,AAAWC,IAArC,EAA2C9G,MAA3C;MACI2G,YAAYxE,SAAhB,EAA2B;cACfjF,EAAEyJ,QAAF,CAAX;WACQA,SAASxJ,IAAT,CAAc,OAAd,CAAR;OACIwJ,SAASxJ,IAAT,CAAc,QAAd,KAA2BgF,SAA/B,EAA0C;aAChCwE,SAASxJ,IAAT,CAAc,QAAd,CAAT;IADD,MAEO;aACGoB,IAAIE,aAAJ,EAAT;;OAEGkI,SAASxJ,IAAT,CAAc,MAAd,KAAyBgF,SAA7B,EAAwC;WAChCwE,SAASxJ,IAAT,CAAc,MAAd,CAAP;;OAEGwJ,SAASxJ,IAAT,CAAc,QAAd,KAA2BgF,SAA/B,EAA0C;aAChCwE,SAASxJ,IAAT,CAAc,QAAd,CAAT;;;UAGM4J,MAAR,CAAe;YACLxI,IAAIuC,UAAJ,CAAe,wBAAwB2B,KAAvC,CADK;UAEP,0CAA0ClE,IAAIuC,UAAJ,CAAe,mBAAf,CAFnC;YAGL;aACC;YACD,4CAA4CvC,IAAIuC,UAAJ,CAAe,SAAf,CAD3C;gBAEG,aAFH;eAGE,oBAAW;sBACJkG,cAAhB,CAA+B/G,MAA/B,EAAuCwC,KAAvC,EAA8CqE,IAA9C,EAAoD9G,MAApD,EAA4DhB,IAA5D,CAAiE,UAAS7B,IAAT,EAAe;WAC3EwJ,YAAYxE,SAAhB,EAA2B;YACtB8E,aAAaN,SAAS3J,IAAT,CAAc,MAAd,CAAjB;gBACQG,KAAKiH,MAAL,IAAe,CAAf,GAAmB,CAAnB,GAAuB,CAA/B;iBACSjH,IAAT,CAAc,OAAd,EAAuByJ,KAAvB;YACIA,SAAS,CAAb,EAAgB;kBACNM,WAAT,CAAqBP,SAASxJ,IAAT,CAAc,KAAd,IAAuB,GAAvB,GAA6BwJ,SAASxJ,IAAT,CAAc,IAAd,CAAlD;oBACWkH,WAAX,CAAuB,YAAvB;oBACW9C,QAAX,CAAoB,kBAApB;SAHD,MAIO;kBACG2F,WAAT,CAAqBP,SAASxJ,IAAT,CAAc,IAAd,IAAsB,GAAtB,GAA4BwJ,SAASxJ,IAAT,CAAc,KAAd,CAAjD;oBACWkH,WAAX,CAAuB,kBAAvB;oBACW9C,QAAX,CAAoB,YAApB;;;OAZH;;KALM;YAuBA;YACA,4CAA4ChD,IAAIuC,UAAJ,CAAe,QAAf,CAD5C;gBAEI,YAFJ;eAGG,oBAAW;;;GA7BxB;EApcoB;iBAseL,wBAASb,MAAT,EAAiBwC,KAAjB,EAAwBqE,IAAxB,EAA8B9G,MAA9B,EAAsC;MACjDG,YAAYjD,EAAEkD,QAAF,EAAhB;MACIzB,SAAS;WACJsB,MADI;WAEJ,UAFI;UAGLwC;GAHR;MAKIqE,QAAQ3E,SAAZ,EAAuB;UACf,MAAP,IAAiB2E,IAAjB;;MAEG9G,UAAUmC,SAAV,IAAuBnC,UAAU,CAArC,EAAwC;UAChC,QAAP,IAAmBA,MAAnB;;eAEYjB,OAAb,CAAqBJ,MAArB,EACEK,IADF,CACO,UAAS7B,IAAT,EAAe;aACVwD,OAAV,CAAkBxD,IAAlB;GAFF,EAIE4D,IAJF,CAIO,UAAS8D,UAAT,EAAqBC,WAArB,EAAkC;aAC7B5D,MAAV,CAAiB2D,UAAjB,EAA6BC,WAA7B;OACIC,QAAJ,CAAaF,UAAb,EAAyBC,WAAzB;GANF;SAQO3E,UAAUgB,OAAV,EAAP;EA3foB;gBA6fN,uBAASzE,OAAT,EAAkBwH,MAAlB,EAA0B;YAC9BhH,EAAER,OAAF,CAAV;MACIwH,UAAU/B,SAAd,EAAyB;YACf8B,OAAOC,MAAhB;;MAEGvF,SAAS;WACJjC,QAAQS,IAAR,CAAa,QAAb,CADI;WAEJT,QAAQS,IAAR,CAAa,QAAb,CAFI;UAGL,kBAHK;UAIL+G;GAJR;MAMIiD,QAAJ,CAAa,EAAb,EAAiB,IAAjB,EAAuBxI,MAAvB,EAA+BK,IAA/B,CAAoC,UAASd,CAAT,EAAY;OAC3CgB,eAAJ;OACIX,IAAIC,WAAJ,OAAsB,MAA1B,EAAkC;QAC7B4I,eAAe,IAAIC,cAAJ,EAAnB;iBACatH,kBAAb;;GAJF;EAxgBoB;mBAghBH,4BAAW;mBACXT,WAAjB,GAA+BgI,iBAA/B,CAAiD,cAAjD;EAjhBoB;mBAmhBH,0BAASC,WAAT,EAAsBvH,MAAtB,EAA8B;eAClCjB,OAAb,CAAqB;WACZR,IAAIE,aAAJ,EADY;SAEd,WAFc;SAGd,kBAHc;gBAIP8I,WAJO;WAKZvH;GALT,EAMGhB,IANH,CAMQ,UAASwI,QAAT,EAAmB;cACf/G,KAAKC,KAAL,CAAW8G,QAAX,CAAX;oBACiBC,WAAjB,CAA6B,EAAEtB,MAAMqB,SAASpD,MAAjB,EAA7B;GARD;EAphBoB;0BA+hBI,mCAAW;MAC/B,OAAOH,OAAOyD,sBAAd,KAAyC,WAA7C,EAA0D;OACrD/K,eAAJ,CAAoB,IAApB,EAA0B,kEAAkEsH,OAAOC,MAAnG;;MAEG,OAAOD,OAAO0D,iBAAd,KAAoC,WAAxC,EAAqD;OAChDhL,eAAJ,CAAoB;cACT,QADS;SAEd,qEAAqEsH,OAAOC;IAFlF;;EApiBmB;iBA0iBL,0BAAW;kBACV0D,qBAAhB;kBACgBC,iBAAhB;kBACgBC,iBAAhB;kBACgBC,UAAhB;kBACgBC,mBAAhB;kBACgBC,uBAAhB;;CAhjBF;;AAojBA/K,EAAEgL,QAAF,EAAYC,KAAZ,CAAkB,YAAW;iBACZC,cAAhB;CADD"}