{"version":3,"file":"Vtiger.min.js","sources":["Vtiger.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n * Contributor(s): YetiForce S.A.\n *************************************************************************************/\n'use strict';\n\nvar Vtiger_Index_Js = {\n\tshowLocation: function (element) {\n\t\tapp.showModalWindow(null, 'index.php?module=OpenStreetMap&view=MapModal', function (container) {\n\t\t\tlet mapView = new OpenStreetMap_Map_Js();\n\t\t\tmapView.registerModalView(container);\n\t\t\tcontainer.find('.searchValue').val($(element).data('location'));\n\t\t\tcontainer.find('.searchBtn').trigger('click');\n\t\t});\n\t},\n\tgetEmailFromRecord(record, module, maxEmails) {\n\t\tconst aDeferred = $.Deferred();\n\t\tconst progress = $.progressIndicator({ position: 'html', blockInfo: { enabled: true } });\n\t\tAppConnector.request({\n\t\t\tdataType: 'html',\n\t\t\tdata: {\n\t\t\t\tmodule: 'OSSMail',\n\t\t\t\taction: 'GetMail',\n\t\t\t\tsourceModule: module,\n\t\t\t\tsourceRecord: record,\n\t\t\t\tmaxEmails: maxEmails\n\t\t\t}\n\t\t})\n\t\t\t.done((data) => {\n\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\tif (data.substring(0, 1) == '{') {\n\t\t\t\t\tdata = JSON.parse(data);\n\t\t\t\t\tdata = data['result'];\n\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t} else {\n\t\t\t\t\tapp.showModalWindow(data, (data) => {\n\t\t\t\t\t\tdata.find('.selectButton').on('click', (e) => {\n\t\t\t\t\t\t\tif (data.find('input:checked').length) {\n\t\t\t\t\t\t\t\tlet email = data.find('input:checked').val();\n\t\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\t\taDeferred.resolve(email);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\t\ttext: app.vtranslate('JS_SELECT_AN_OPTION'),\n\t\t\t\t\t\t\t\t\ttype: 'info'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t})\n\t\t\t.fail((error, err) => {\n\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\taDeferred.reject(error);\n\t\t\t});\n\t\treturn aDeferred.promise();\n\t},\n\tregisterMailButtons: function (container) {\n\t\tlet thisInstance = this;\n\t\tcontainer.find('.sendMailBtn:not(.mailBtnActive)').each(function (e) {\n\t\t\tlet sendButton = $(this);\n\t\t\tsendButton.addClass('mailBtnActive');\n\t\t\tsendButton.on('click', function (e) {\n\t\t\t\te.stopPropagation();\n\t\t\t\tlet url = sendButton.data('url');\n\t\t\t\tlet popup = sendButton.data('popup');\n\t\t\t\tlet toMail = sendButton.data('to');\n\t\t\t\tif (toMail) {\n\t\t\t\t\turl += '&to=' + encodeURIComponent(toMail);\n\t\t\t\t}\n\t\t\t\tif (app.getRecordId() && sendButton.data('record') !== app.getRecordId()) {\n\t\t\t\t\turl += '&crmModule=' + app.getModuleName() + '&crmRecord=' + app.getRecordId();\n\t\t\t\t}\n\t\t\t\tthisInstance.sendMailWindow(url, popup);\n\t\t\t});\n\t\t});\n\t},\n\tsendMailWindow: function (url, popup, postData) {\n\t\tif (popup) {\n\t\t\tlet width = screen.width - 15;\n\t\t\tlet height = screen.height - 150;\n\t\t\tlet left = 0;\n\t\t\tlet top = 30;\n\t\t\tlet popupParams = 'width=' + width + ', height=' + height + ', left=' + left + ', top=' + top;\n\t\t\tif (postData == undefined) {\n\t\t\t\twindow.open(\n\t\t\t\t\turl,\n\t\t\t\t\t'_blank',\n\t\t\t\t\tpopupParams + ',resizable=yes,scrollbars=yes,toolbar=no,menubar=no,location=no,status=no,menubar=no'\n\t\t\t\t);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet form = $('<form/>', { action: 'index.php' });\n\t\t\turl.replace(/[?&]+([^=&]+)=([^&]*)/gi, function (m, key, value) {\n\t\t\t\tform.append($('<input>', { name: key, value: value }));\n\t\t\t});\n\t\t\tfor (let i in postData) {\n\t\t\t\tform.append($('<input>', { name: i, value: JSON.stringify(postData[i]) }));\n\t\t\t}\n\t\t\t$('body').append(form);\n\t\t\tform.trigger('submit');\n\t\t} else {\n\t\t\twindow.location.href = url;\n\t\t}\n\t},\n\t/**\n\t * Function to change user theme(colour)\n\t * @params : colour name\n\t */\n\tchangeSkin: function () {\n\t\t$('.themeElement').on('click', function (e) {\n\t\t\te.stopPropagation();\n\t\t\tlet currentElement = $(e.currentTarget);\n\t\t\tcurrentElement.closest('#themeContainer').hide();\n\t\t\tlet progressElement = $('#progressDiv');\n\t\t\tprogressElement.progressIndicator();\n\t\t\tlet params = {\n\t\t\t\tmodule: 'Users',\n\t\t\t\taction: 'SaveAjax',\n\t\t\t\trecord: CONFIG.userId,\n\t\t\t\tfield: 'theme',\n\t\t\t\tvalue: currentElement.data('skinName')\n\t\t\t};\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\tif (data.success && data.result) {\n\t\t\t\t\t\tprogressElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t$('.settingIcons').removeClass('open');\n\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.fail(function (error, err) {});\n\t\t});\n\t},\n\tmarkNotifications: function (id) {\n\t\tlet aDeferred = $.Deferred();\n\t\tlet thisInstance = this;\n\t\tlet params = {\n\t\t\tmodule: 'Notification',\n\t\t\taction: 'Notification',\n\t\t\tmode: 'setMark',\n\t\t\trecord: id\n\t\t};\n\t\tAppConnector.request(params)\n\t\t\t.done(function (data) {\n\t\t\t\tlet row = $('.notificationEntries .noticeRow[data-id=\"' + id + '\"]');\n\t\t\t\tapp.showNotify({\n\t\t\t\t\ttitle: app.vtranslate('JS_MESSAGE'),\n\t\t\t\t\ttext: app.vtranslate('JS_MARKED_AS_READ'),\n\t\t\t\t\ttype: 'info'\n\t\t\t\t});\n\t\t\t\tif (row.length) {\n\t\t\t\t\trow.fadeOut(300, function () {\n\t\t\t\t\t\tlet entries = row.closest('.notificationEntries');\n\t\t\t\t\t\trow.remove();\n\t\t\t\t\t\tentries.each(function (index) {\n\t\t\t\t\t\t\tlet block = $(this);\n\t\t\t\t\t\t\tif (block.find('.noticeRow').length == 0) {\n\t\t\t\t\t\t\t\tblock.closest('.panel').hide();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t\tthisInstance.getNotificationsForReminder();\n\t\t\t\t}\n\t\t\t\taDeferred.resolve(data);\n\t\t\t})\n\t\t\t.fail(function (textStatus, errorThrown) {\n\t\t\t\tapp.errorLog(textStatus, errorThrown);\n\t\t\t\taDeferred.reject(textStatus, errorThrown);\n\t\t\t});\n\t\treturn aDeferred.promise();\n\t},\n\t/**\n\t * Function registers event for Reminder popups\n\t */\n\tregisterReminders: function () {\n\t\tlet activityReminder = (parseInt(app.getMainParams('activityReminder')) || 0) * 1000;\n\t\tif (activityReminder != 0 && $('.remindersNotice.autoRefreshing').length) {\n\t\t\tVtiger_Index_Js.requestReminder();\n\t\t\twindow.reminder = setInterval(function () {\n\t\t\t\tVtiger_Index_Js.requestReminder();\n\t\t\t}, activityReminder);\n\t\t}\n\t\tlet reminder = (parseInt(app.getMainParams('intervalForNotificationNumberCheck')) || 0) * 1000;\n\t\tif (reminder != 0 && $('.notificationsNotice.autoRefreshing').length) {\n\t\t\tVtiger_Index_Js.getNotificationsForReminder();\n\t\t\twindow.reminderNotifications = setInterval(function () {\n\t\t\t\tVtiger_Index_Js.getNotificationsForReminder();\n\t\t\t}, reminder);\n\t\t}\n\t},\n\tgetNotificationsForReminder: function () {\n\t\tlet thisInstance = this;\n\t\tlet content = $('.remindersNotificationContainer');\n\t\tlet element = $('.notificationsNotice');\n\t\tlet url = 'index.php?module=Notification&view=Reminders';\n\t\tAppConnector.request(url)\n\t\t\t.done(function (data) {\n\t\t\t\tcontent.html(data);\n\t\t\t\tthisInstance.refreshReminderCount(content, element, 'js-count-notifications-reminder');\n\t\t\t\tcontent.find('.js-set-marked').on('click', function (e) {\n\t\t\t\t\tlet currentElement = $(e.currentTarget);\n\t\t\t\t\tlet recordID = currentElement.closest('.js-notification-panel').data('record');\n\t\t\t\t\tthisInstance.markNotifications(recordID).done(function (data) {\n\t\t\t\t\t\tcurrentElement.closest('.js-notification-panel').fadeOut(300, function () {\n\t\t\t\t\t\t\t$(this).remove();\n\t\t\t\t\t\t\tthisInstance.refreshReminderCount(content, element, 'js-count-notifications-reminder');\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t})\n\t\t\t.fail(function (data, err) {\n\t\t\t\tclearInterval(window.reminderNotifications);\n\t\t\t});\n\t},\n\t/**\n\t * Function request for reminder popups\n\t */\n\trequestReminder: function () {\n\t\tlet thisInstance = this;\n\t\tlet content = $('.remindersNoticeContainer');\n\t\tlet element = $('.remindersNotice');\n\t\tlet url = 'index.php?module=Calendar&view=Reminders&type_remainder=true';\n\t\tAppConnector.request(url)\n\t\t\t.done(function (data) {\n\t\t\t\tcontent.html(data);\n\t\t\t\tthisInstance.refreshReminderCount(content, element, 'countRemindersNotice');\n\t\t\t\tapp.registerModal(content);\n\t\t\t\tcontent.find('.reminderPostpone').on('click', function (e) {\n\t\t\t\t\tlet currentElement = $(e.currentTarget);\n\t\t\t\t\tlet recordID = currentElement.closest('.js-toggle-panel').data('record');\n\t\t\t\t\tlet url =\n\t\t\t\t\t\t'index.php?module=Calendar&action=ActivityReminder&mode=postpone&record=' +\n\t\t\t\t\t\trecordID +\n\t\t\t\t\t\t'&time=' +\n\t\t\t\t\t\tcurrentElement.data('time');\n\t\t\t\t\tAppConnector.request(url).done(function (data) {\n\t\t\t\t\t\tcurrentElement.closest('.js-toggle-panel').fadeOut(300, function () {\n\t\t\t\t\t\t\t$(this).remove();\n\t\t\t\t\t\t\tthisInstance.refreshReminderCount(content, element, 'countRemindersNotice');\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t})\n\t\t\t.fail(function (data, err) {\n\t\t\t\tclearInterval(window.reminder);\n\t\t\t});\n\t},\n\trefreshReminderCount: function (content, element, tag) {\n\t\tlet badge = element.find('.badge');\n\t\tlet count = content.find('.js-toggle-panel').length;\n\t\tbadge.text(count);\n\t\tbadge.removeClass('d-none');\n\t\tif (count > 0 && element.hasClass('autoRefreshing')) {\n\t\t\telement.effect('pulsate', 1500);\n\t\t\tif (app.cacheGet(tag) != count) {\n\t\t\t\tapp.playSound('REMINDERS');\n\t\t\t\tapp.cacheSet(tag, count);\n\t\t\t}\n\t\t} else {\n\t\t\tbadge.addClass('d-none');\n\t\t}\n\t},\n\tregisterResizeEvent: function () {\n\t\t$(window).on('resize', function () {\n\t\t\tif (this.resizeTO) clearTimeout(this.resizeTO);\n\t\t\tthis.resizeTO = setTimeout(function () {\n\t\t\t\t$(this).trigger('resizeEnd');\n\t\t\t}, 600);\n\t\t});\n\t},\n\tchangeWatching: function (instance) {\n\t\tlet value, module, state, className, user, record;\n\t\tif (instance != undefined) {\n\t\t\tinstance = $(instance);\n\t\t\tvalue = instance.data('value');\n\t\t\tif (instance.data('module') != undefined) {\n\t\t\t\tmodule = instance.data('module');\n\t\t\t} else {\n\t\t\t\tmodule = app.getModuleName();\n\t\t\t}\n\t\t\tif (instance.data('user') != undefined) {\n\t\t\t\tuser = instance.data('user');\n\t\t\t}\n\t\t\tif (instance.data('record') != undefined) {\n\t\t\t\trecord = instance.data('record');\n\t\t\t}\n\t\t}\n\t\tapp.showConfirmModal({\n\t\t\ttitle: app.vtranslate('JS_WATCHING_TITLE'),\n\t\t\ttext: app.vtranslate('JS_WATCHING_MESSAGE' + value),\n\t\t\ticon: 'fas fa-eye',\n\t\t\tconfirmButtonLabel: 'LBL_YES',\n\t\t\trejectedButtonLabel: 'LBL_NO',\n\t\t\tconfirmedCallback: () => {\n\t\t\t\tVtiger_Index_Js.updateWatching(module, value, user, record).done(function (data) {\n\t\t\t\t\tif (instance != undefined) {\n\t\t\t\t\t\tlet buttonIcon = instance.find('.fas');\n\t\t\t\t\t\tstate = data.result == 1 ? 0 : 1;\n\t\t\t\t\t\tinstance.data('value', state);\n\t\t\t\t\t\tif (state == 1) {\n\t\t\t\t\t\t\tinstance.toggleClass(instance.data('off') + ' ' + instance.data('on'));\n\t\t\t\t\t\t\tbuttonIcon.removeClass('fas fa-eye');\n\t\t\t\t\t\t\tbuttonIcon.addClass('fas fa-eye-slash');\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tinstance.toggleClass(instance.data('on') + ' ' + instance.data('off'));\n\t\t\t\t\t\t\tbuttonIcon.removeClass('fas fa-eye-slash');\n\t\t\t\t\t\t\tbuttonIcon.addClass('fas fa-eye');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t},\n\tupdateWatching: function (module, value, user, record) {\n\t\tlet aDeferred = $.Deferred();\n\t\tlet params = {\n\t\t\tmodule: module,\n\t\t\taction: 'Watchdog',\n\t\t\tstate: value\n\t\t};\n\t\tif (user != undefined) {\n\t\t\tparams['user'] = user;\n\t\t}\n\t\tif (record != undefined && record != 0) {\n\t\t\tparams['record'] = record;\n\t\t}\n\t\tAppConnector.request(params)\n\t\t\t.done(function (data) {\n\t\t\t\taDeferred.resolve(data);\n\t\t\t})\n\t\t\t.fail(function (textStatus, errorThrown) {\n\t\t\t\taDeferred.reject(textStatus, errorThrown);\n\t\t\t\tapp.errorLog(textStatus, errorThrown);\n\t\t\t});\n\t\treturn aDeferred.promise();\n\t},\n\tassignToOwner: function (element, userId) {\n\t\telement = $(element);\n\t\tif (userId == undefined) {\n\t\t\tuserId = CONFIG.userId;\n\t\t}\n\t\tlet params = {\n\t\t\tmodule: element.data('module'),\n\t\t\trecord: element.data('record'),\n\t\t\tfield: 'assigned_user_id',\n\t\t\tvalue: userId\n\t\t};\n\t\tapp.saveAjax('', null, params).done(function (e) {\n\t\t\tapp.hideModalWindow();\n\t\t\tif (app.getViewName() === 'List') {\n\t\t\t\tlet listinstance = new Vtiger_List_Js();\n\t\t\t\tlistinstance.getListViewRecords();\n\t\t\t} else if (app.getViewName() === 'Detail') {\n\t\t\t\tdocument.location.reload();\n\t\t\t}\n\t\t});\n\t},\n\tsendNotification: function () {\n\t\tApp.Components.QuickCreate.createRecord('Notification');\n\t},\n\tregisterEvents: function () {\n\t\tVtiger_Index_Js.registerReminders();\n\t\tVtiger_Index_Js.changeSkin();\n\t\tVtiger_Index_Js.registerResizeEvent();\n\t}\n};\n//On Page Load\njQuery(function () {\n\tVtiger_Index_Js.registerEvents();\n});\n"],"names":["Vtiger_Index_Js","showLocation","element","app","showModalWindow","container","OpenStreetMap_Map_Js","mapView","registerModalView","find","val","$","data","trigger","getEmailFromRecord","record","module","maxEmails","aDeferred","Deferred","progress","progressIndicator","position","blockInfo","enabled","AppConnector","request","dataType","action","sourceModule","sourceRecord","done","mode","substring","JSON","parse","resolve","on","length","email","hideModalWindow","showNotify","text","vtranslate","type","fail","error","reject","promise","registerMailButtons","thisInstance","each","sendButton","addClass","e","stopPropagation","popup","toMail","url","encodeURIComponent","getRecordId","getModuleName","sendMailWindow","postData","width","screen","height","open","replace","m","key","value","form","append","name","i","stringify","location","href","changeSkin","currentTarget","currentElement","closest","hide","progressElement","CONFIG","userId","field","params","success","result","removeClass","window","reload","markNotifications","id","title","row","fadeOut","remove","entries","block","getNotificationsForReminder","textStatus","errorThrown","errorLog","registerReminders","activityReminder","parseInt","getMainParams","requestReminder","reminder","setInterval","reminderNotifications","content","html","refreshReminderCount","recordID","clearInterval","registerModal","tag","badge","count","hasClass","effect","cacheGet","playSound","cacheSet","registerResizeEvent","resizeTO","clearTimeout","setTimeout","changeWatching","instance","state","user","showConfirmModal","icon","confirmButtonLabel","rejectedButtonLabel","confirmedCallback","updateWatching","toggleClass","buttonIcon","assignToOwner","saveAjax","getViewName","listinstance","getListViewRecords","document","sendNotification","App","Components","QuickCreate","createRecord","registerEvents","jQuery"],"mappings":"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"}