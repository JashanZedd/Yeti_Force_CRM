{"version":3,"file":"Widget.min.js","sources":["Widget.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n * Contributor(s): YetiForce.com\n *************************************************************************************/\n'use strict';\n\njQuery.Class(\n\t'Vtiger_Widget_Js',\n\t{\n\t\twidgetPostLoadEvent: 'Vtiget.Dashboard.PostLoad',\n\t\twidgetPostRefereshEvent: 'Vtiger.Dashboard.PostRefresh',\n\t\tgetInstance: function getInstance(container, widgetClassName, moduleName) {\n\t\t\tif (typeof moduleName === 'undefined') {\n\t\t\t\tmoduleName = app.getModuleName();\n\t\t\t}\n\t\t\tconst moduleClass = window[moduleName + '_' + widgetClassName + '_Widget_Js'];\n\t\t\tconst fallbackClass = window['Vtiger_' + widgetClassName + '_Widget_Js'];\n\t\t\tconst yetiClass = window['YetiForce_' + widgetClassName + '_Widget_Js'];\n\t\t\tconst basicClass = YetiForce_Widget_Js;\n\t\t\tlet instance;\n\t\t\tif (typeof moduleClass !== 'undefined') {\n\t\t\t\tinstance = new moduleClass(container, false, widgetClassName);\n\t\t\t} else if (typeof fallbackClass !== 'undefined') {\n\t\t\t\tinstance = new fallbackClass(container, false, widgetClassName);\n\t\t\t} else if (typeof yetiClass !== 'undefined') {\n\t\t\t\tinstance = new yetiClass(container, false, widgetClassName);\n\t\t\t} else {\n\t\t\t\tinstance = new basicClass(container, false, widgetClassName);\n\t\t\t}\n\t\t\treturn instance;\n\t\t}\n\t},\n\t{\n\t\tcontainer: false,\n\t\tplotContainer: false,\n\t\tchartInstance: false,\n\t\tchartData: [],\n\t\tparamCache: false,\n\t\tinit: function init(container, reload, widgetClassName) {\n\t\t\tcontainer = $(container);\n\t\t\tthis.setContainer(container);\n\t\t\tthis.registerWidgetPostLoadEvent(container);\n\t\t\tif (!reload) {\n\t\t\t\tthis.registerWidgetPostRefreshEvent(container);\n\t\t\t}\n\t\t\tthis.registerCache(container);\n\t\t},\n\t\tareColorsFromDividingField() {\n\t\t\treturn !!Number(\n\t\t\t\tthis.getContainer()\n\t\t\t\t\t.find('[name=\"colorsFromDividingField\"]')\n\t\t\t\t\t.val()\n\t\t\t);\n\t\t},\n\t\tgetSourceChartType() {\n\t\t\treturn this.getContainer()\n\t\t\t\t.find('[name=\"typeChart\"]')\n\t\t\t\t.val();\n\t\t},\n\t\tisMultiFilter() {\n\t\t\tif (typeof this.filterIds !== 'undefined') {\n\t\t\t\treturn this.filterIds.length > 1;\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\t/**\n\t\t * Get widget data\n\t\t * @returns {*}\n\t\t */\n\t\tgetWidgetData() {\n\t\t\tif (typeof this.widgetData !== 'undefined') {\n\t\t\t\treturn this.widgetData;\n\t\t\t}\n\t\t\tlet widgetDataEl = this.getContainer().find('.widgetData');\n\t\t\tif (widgetDataEl.length) {\n\t\t\t\treturn (this.widgetData = JSON.parse(widgetDataEl.val()));\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\t/**\n\t\t * Predefined functions that will replace options function type\n\t\t * @type {Object}\n\t\t */\n\t\tglobalChartFunctions: {\n\t\t\t/**\n\t\t\t * Functions for x or y axes scales xAxes:[{here}]\n\t\t\t */\n\t\t\tscales: {\n\t\t\t\tformatAxesLabels: function formatAxesLabels(value, index, values) {\n\t\t\t\t\tif (String(value).length > 0 && !isNaN(Number(value))) {\n\t\t\t\t\t\treturn App.Fields.Double.formatToDisplay(value);\n\t\t\t\t\t}\n\t\t\t\t\treturn value;\n\t\t\t\t}\n\t\t\t},\n\t\t\t/**\n\t\t\t * Functions for datalabels\n\t\t\t */\n\t\t\tdatalabels: {\n\t\t\t\tdisplay(context) {\n\t\t\t\t\tconst meta = context.chart.getDatasetMeta(context.datasetIndex);\n\t\t\t\t\treturn meta.hidden !== true;\n\t\t\t\t},\n\t\t\t\tformatter: function datalabelsFormatter(value, context) {\n\t\t\t\t\tif (\n\t\t\t\t\t\ttypeof this.widgetData !== 'undefined' &&\n\t\t\t\t\t\ttypeof this.widgetData.valueType !== 'undefined' &&\n\t\t\t\t\t\tthis.widgetData.valueType === 'count'\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn App.Fields.Double.formatToDisplay(value, 0);\n\t\t\t\t\t}\n\t\t\t\t\tif (\n\t\t\t\t\t\ttypeof context.chart.data.datasets[context.datasetIndex].dataFormatted !== 'undefined' &&\n\t\t\t\t\t\ttypeof context.chart.data.datasets[context.datasetIndex].dataFormatted[context.dataIndex] !== 'undefined'\n\t\t\t\t\t) {\n\t\t\t\t\t\t// data presented in different format usually exists in alternative dataFormatted array\n\t\t\t\t\t\treturn context.chart.data.datasets[context.datasetIndex].dataFormatted[context.dataIndex];\n\t\t\t\t\t}\n\t\t\t\t\tif (String(value).length > 0 && isNaN(Number(value))) {\n\t\t\t\t\t\treturn App.Fields.Double.formatToDisplay(value);\n\t\t\t\t\t}\n\t\t\t\t\treturn value;\n\t\t\t\t}\n\t\t\t},\n\t\t\t/**\n\t\t\t * Tooltips functions\n\t\t\t */\n\t\t\ttooltips: {\n\t\t\t\tlabel: function tooltipLabelCallback(tooltipItem, data) {\n\t\t\t\t\t// get already formatted data if exists\n\t\t\t\t\tif (\n\t\t\t\t\t\ttypeof data.datasets[tooltipItem.datasetIndex].dataFormatted !== 'undefined' &&\n\t\t\t\t\t\tdata.datasets[tooltipItem.datasetIndex].dataFormatted[tooltipItem.index] !== 'undefined'\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn data.datasets[tooltipItem.datasetIndex].dataFormatted[tooltipItem.index];\n\t\t\t\t\t}\n\t\t\t\t\t// if there is no formatted data so try to format it\n\t\t\t\t\tif (\n\t\t\t\t\t\tString(data.datasets[tooltipItem.datasetIndex].data[tooltipItem.index]).length > 0 &&\n\t\t\t\t\t\t!isNaN(Number(data.datasets[tooltipItem.datasetIndex].data[tooltipItem.index]))\n\t\t\t\t\t) {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\ttypeof this.widgetData !== 'undefined' &&\n\t\t\t\t\t\t\ttypeof this.widgetData.valueType !== 'undefined' &&\n\t\t\t\t\t\t\tthis.widgetData.valueType === 'count'\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\treturn App.Fields.Double.formatToDisplay(\n\t\t\t\t\t\t\t\tdata.datasets[tooltipItem.datasetIndex].data[tooltipItem.index],\n\t\t\t\t\t\t\t\t0\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn App.Fields.Double.formatToDisplay(data.datasets[tooltipItem.datasetIndex].data[tooltipItem.index]);\n\t\t\t\t\t}\n\t\t\t\t\t// return raw data at idex\n\t\t\t\t\treturn data.datasets[tooltipItem.datasetIndex].data[tooltipItem.index];\n\t\t\t\t},\n\t\t\t\ttitle: function tooltipTitleCallback(tooltipItems, data) {\n\t\t\t\t\tconst tooltipItem = tooltipItems[0];\n\t\t\t\t\t// get already formatted title if exists\n\t\t\t\t\tif (\n\t\t\t\t\t\ttypeof data.datasets[tooltipItem.datasetIndex].titlesFormatted !== 'undefined' &&\n\t\t\t\t\t\tdata.datasets[tooltipItem.datasetIndex].titlesFormatted[tooltipItem.index] !== 'undefined'\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn data.datasets[tooltipItem.datasetIndex].titlesFormatted[tooltipItem.index];\n\t\t\t\t\t}\n\t\t\t\t\t// if there is no formatted title so try to format it\n\t\t\t\t\tif (String(data.labels[tooltipItem.index]).length > 0 && !isNaN(Number(data.labels[tooltipItem.index]))) {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\ttypeof this.widgetData !== 'undefined' &&\n\t\t\t\t\t\t\ttypeof this.widgetData.valueType !== 'undefined' &&\n\t\t\t\t\t\t\tthis.widgetData.valueType === 'count'\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\treturn App.Fields.Double.formatToDisplay(data.labels[tooltipItem.index], 0);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn App.Fields.Double.formatToDisplay(data.labels[tooltipItem.index]);\n\t\t\t\t\t}\n\t\t\t\t\t// return label at index\n\t\t\t\t\treturn data.labels[tooltipItem.index];\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tlegend: {\n\t\t\t\tonClick(e, legendItem) {\n\t\t\t\t\tlet type = this.chartInstance.config.type;\n\t\t\t\t\tif (typeof Chart.defaults[type] !== 'undefined') {\n\t\t\t\t\t\treturn Chart.defaults[type].legend.onClick.apply(this.chartInstance, [e, legendItem]);\n\t\t\t\t\t}\n\t\t\t\t\treturn Chart.defaults.global.legend.onClick.apply(this.chartInstance, [e, legendItem]);\n\t\t\t\t},\n\t\t\t\tgenerateLabels(chart) {\n\t\t\t\t\tlet type = chart.config.type;\n\t\t\t\t\tlet labels;\n\t\t\t\t\tif (typeof Chart.defaults[type] !== 'undefined') {\n\t\t\t\t\t\tlabels = Chart.defaults[type].legend.labels.generateLabels(chart);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlabels = Chart.defaults.global.legend.labels.generateLabels(chart);\n\t\t\t\t\t}\n\t\t\t\t\tif (this.areColorsFromDividingField() || this.isMultiFilter()) {\n\t\t\t\t\t\tchart.config.options.legend.labels.boxWidth = 12;\n\t\t\t\t\t\tlabels.forEach((label, index) => {\n\t\t\t\t\t\t\tlabel.fillStyle = 'rgba(0,0,0,0)';\n\t\t\t\t\t\t\tlabel.strokeStyle = 'rgba(0,0,0,0.15)';\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\treturn labels;\n\t\t\t\t},\n\t\t\t\tdisplay() {\n\t\t\t\t\tif (this.isMultiFilter() || this.areColorsFromDividingField()) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * plugins\n\t\t\t */\n\t\t\tplugins: {\n\t\t\t\t/**\n\t\t\t\t * If datalabels doesn't fit - hide them individually\n\t\t\t\t * @param  {Chart} chart chart instance\n\t\t\t\t * @return {undefined}\n\t\t\t\t */\n\t\t\t\thideVerticalBarDatalabelsIfNeeded: function (chart) {\n\t\t\t\t\tlet getDatasetsMeta = function (chart) {\n\t\t\t\t\t\tconst datasets = [];\n\t\t\t\t\t\tconst data = chart.data;\n\t\t\t\t\t\tif (typeof data !== 'undefined' && typeof data.datasets !== 'undefined' && Array.isArray(data.datasets)) {\n\t\t\t\t\t\t\tfor (let i = 0, len = data.datasets.length; i < len; i++) {\n\t\t\t\t\t\t\t\tconst meta = chart.getDatasetMeta(i);\n\t\t\t\t\t\t\t\tif (typeof meta.data !== 'undefined' && Array.isArray(meta.data)) {\n\t\t\t\t\t\t\t\t\tdatasets.push(meta);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn datasets;\n\t\t\t\t\t};\n\t\t\t\t\tlet datasetsMeta = getDatasetsMeta(chart);\n\t\t\t\t\tlet datasets = chart.data.datasets;\n\t\t\t\t\tfor (let i = 0, len = datasets.length; i < len; i++) {\n\t\t\t\t\t\tconst dataset = datasets[i];\n\t\t\t\t\t\tconst meta = datasetsMeta[i];\n\t\t\t\t\t\tif (meta.hidden) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst metaData = meta.data;\n\t\t\t\t\t\tif (typeof dataset._models === 'undefined') {\n\t\t\t\t\t\t\tdataset._models = {};\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (typeof dataset.datalabels === 'undefined') {\n\t\t\t\t\t\t\tdataset.datalabels = {};\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (typeof dataset.datalabels.display === 'undefined') {\n\t\t\t\t\t\t\tdataset.datalabels.display = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor (let iItem = 0, lenItem = metaData.length; iItem < lenItem; iItem++) {\n\t\t\t\t\t\t\tconst dataItem = metaData[iItem];\n\t\t\t\t\t\t\tif (typeof dataItem.$datalabels !== 'undefined' && typeof dataItem.$datalabels._model !== 'undefined') {\n\t\t\t\t\t\t\t\tlet model = dataItem.$datalabels._model;\n\t\t\t\t\t\t\t\tif (model !== null && typeof model !== 'undefined') {\n\t\t\t\t\t\t\t\t\tdataset._models[iItem] = model;\n\t\t\t\t\t\t\t\t} else if (dataset._models[iItem] !== null && typeof dataset._models[iItem] !== 'undefined') {\n\t\t\t\t\t\t\t\t\tmodel = dataset._models[iItem];\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tconst labelWidth = model.size.width + model.padding.width + model.borderWidth * 2;\n\t\t\t\t\t\t\t\tconst labelHeight = model.size.height + model.padding.height + model.borderWidth * 2;\n\t\t\t\t\t\t\t\tconst barHeight = dataItem.height();\n\t\t\t\t\t\t\t\tlet threshold = 10;\n\t\t\t\t\t\t\t\tif (typeof chart.config.options.verticalBarLabelsThreshold !== 'undefined') {\n\t\t\t\t\t\t\t\t\tthreshold = chart.config.options.verticalBarLabelsThreshold;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (dataItem._view.width + threshold < labelWidth || barHeight + threshold < labelHeight) {\n\t\t\t\t\t\t\t\t\tdataItem.$datalabels._model.positioner = () => {\n\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tdataItem.$datalabels._model = model;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t/**\n\t\t\t\t * If datalabels doesn't fit - hide them individually\n\t\t\t\t * @param  {Chart} chart  Chart instance\n\t\t\t\t * @return {undefined}\n\t\t\t\t */\n\t\t\t\thideHorizontalBarDatalabelsIfNeeded: function hideHorizontalBarDatalabelsIfNeeded(chart) {\n\t\t\t\t\tlet getDatasetsMeta = function (chart) {\n\t\t\t\t\t\tconst datasets = [];\n\t\t\t\t\t\tconst data = chart.data;\n\t\t\t\t\t\tif (typeof data !== 'undefined' && typeof data.datasets !== 'undefined' && Array.isArray(data.datasets)) {\n\t\t\t\t\t\t\tfor (let i = 0, len = data.datasets.length; i < len; i++) {\n\t\t\t\t\t\t\t\tconst meta = chart.getDatasetMeta(i);\n\t\t\t\t\t\t\t\tif (typeof meta.data !== 'undefined' && Array.isArray(meta.data)) {\n\t\t\t\t\t\t\t\t\tdatasets.push(meta);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn datasets;\n\t\t\t\t\t};\n\t\t\t\t\tlet datasetsMeta = getDatasetsMeta(chart);\n\t\t\t\t\tlet datasets = chart.data.datasets;\n\t\t\t\t\tfor (let i = 0, len = datasets.length; i < len; i++) {\n\t\t\t\t\t\tconst dataset = datasets[i];\n\t\t\t\t\t\tconst meta = datasetsMeta[i];\n\t\t\t\t\t\tif (meta.hidden) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst metaData = meta.data;\n\t\t\t\t\t\tif (typeof dataset._models === 'undefined') {\n\t\t\t\t\t\t\tdataset._models = {};\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (typeof dataset.datalabels === 'undefined') {\n\t\t\t\t\t\t\tdataset.datalabels = {};\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (typeof dataset.datalabels.display === 'undefined') {\n\t\t\t\t\t\t\tdataset.datalabels.display = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor (let iItem = 0, lenItem = metaData.length; iItem < lenItem; iItem++) {\n\t\t\t\t\t\t\tconst dataItem = metaData[iItem];\n\t\t\t\t\t\t\tif (typeof dataItem.$datalabels !== 'undefined' && typeof dataItem.$datalabels._model !== 'undefined') {\n\t\t\t\t\t\t\t\tlet model = dataItem.$datalabels._model;\n\t\t\t\t\t\t\t\tif (model !== null && typeof model !== 'undefined') {\n\t\t\t\t\t\t\t\t\tdataset._models[iItem] = model;\n\t\t\t\t\t\t\t\t} else if (dataset._models[iItem] !== null && typeof dataset._models[iItem] !== 'undefined') {\n\t\t\t\t\t\t\t\t\tmodel = dataset._models[iItem];\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tconst labelWidth = model.size.width + model.padding.width + model.borderWidth * 2;\n\t\t\t\t\t\t\t\tconst labelHeight = model.size.height + model.padding.height + model.borderWidth * 2;\n\t\t\t\t\t\t\t\tconst barWidth = dataItem.width;\n\t\t\t\t\t\t\t\tlet threshold = 10;\n\t\t\t\t\t\t\t\tif (typeof chart.config.options.horizontalBarLabelsThreshold !== 'undefined') {\n\t\t\t\t\t\t\t\t\tthreshold = chart.config.options.horizontalBarLabelsThreshold;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (dataItem._view.height + threshold < labelHeight || barWidth + threshold < labelWidth) {\n\t\t\t\t\t\t\t\t\tdataItem.$datalabels._model.positioner = () => {\n\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tdataItem.$datalabels._model = model;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t/**\n\t\t\t\t * Fix to long axis labels\n\t\t\t\t * @param  {Chart}  chart    Chart instance\n\t\t\t\t * @return {Boolean}       [description]\n\t\t\t\t */\n\t\t\t\tfixXAxisLabels: function fixXAxisLabels(chart) {\n\t\t\t\t\tlet shortenXTicks = function shortenXTicks(data, options) {\n\t\t\t\t\t\tif (typeof options.scales === 'undefined') {\n\t\t\t\t\t\t\toptions.scales = {};\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (typeof options.scales.xAxes === 'undefined') {\n\t\t\t\t\t\t\toptions.scales.xAxes = [{}];\n\t\t\t\t\t\t}\n\t\t\t\t\t\toptions.scales.xAxes.forEach(axis => {\n\t\t\t\t\t\t\tif (typeof axis.ticks === 'undefined') {\n\t\t\t\t\t\t\t\taxis.ticks = {};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\taxis.ticks.callback = function xAxisTickCallback(value, index, values) {\n\t\t\t\t\t\t\t\tif (value.length > 13) {\n\t\t\t\t\t\t\t\t\treturn value.substr(0, 10) + '...';\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn options;\n\t\t\t\t\t};\n\t\t\t\t\tlet rotateXLabels90 = function rotateXLabels90(data, options) {\n\t\t\t\t\t\tif (typeof options.scales === 'undefined') {\n\t\t\t\t\t\t\toptions.scales = {};\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (typeof options.scales.xAxes === 'undefined') {\n\t\t\t\t\t\t\toptions.scales.xAxes = [{}];\n\t\t\t\t\t\t}\n\t\t\t\t\t\toptions.scales.xAxes.forEach(axis => {\n\t\t\t\t\t\t\tif (typeof axis.ticks === 'undefined') {\n\t\t\t\t\t\t\t\taxis.ticks = {};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\taxis.ticks.minRotation = 90;\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn options;\n\t\t\t\t\t};\n\n\t\t\t\t\tchart.data.datasets.forEach((dataset, index) => {\n\t\t\t\t\t\tif (dataset._updated) {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor (let prop in dataset._meta) {\n\t\t\t\t\t\t\tif (dataset._meta.hasOwnProperty(prop)) {\n\t\t\t\t\t\t\t\tfor (let i = 0, len = dataset._meta[prop].data.length; i < len; i++) {\n\t\t\t\t\t\t\t\t\tconst metaDataItem = dataset._meta[prop].data[i];\n\t\t\t\t\t\t\t\t\tconst label = metaDataItem._xScale.ticks[i];\n\t\t\t\t\t\t\t\t\tconst ctx = metaDataItem._xScale.ctx;\n\t\t\t\t\t\t\t\t\tlet categoryWidth = metaDataItem._xScale.width / dataset._meta[prop].data.length;\n\t\t\t\t\t\t\t\t\tif (typeof metaDataItem._xScale.options.categoryPercentage !== 'undefined') {\n\t\t\t\t\t\t\t\t\t\t// if it is bar chart there is category percentage option that we should use\n\t\t\t\t\t\t\t\t\t\tcategoryWidth *= metaDataItem._xScale.options.categoryPercentage;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tconst fullWidth = ctx.measureText(label).width;\n\t\t\t\t\t\t\t\t\tif (categoryWidth < fullWidth) {\n\t\t\t\t\t\t\t\t\t\tconst shortened = label.substr(0, 10) + '...';\n\t\t\t\t\t\t\t\t\t\tconst shortenedWidth = ctx.measureText(shortened).width;\n\t\t\t\t\t\t\t\t\t\tif (categoryWidth < shortenedWidth) {\n\t\t\t\t\t\t\t\t\t\t\tchart.options = rotateXLabels90(chart.data, chart.options);\n\t\t\t\t\t\t\t\t\t\t\tchart.options = shortenXTicks(chart.data, chart.options);\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\tchart.options = shortenXTicks(chart.data, chart.options);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tif (!dataset._updated) {\n\t\t\t\t\t\t\t\t\t\t\tdataset._updated = true;\n\t\t\t\t\t\t\t\t\t\t\tchart.update();\n\t\t\t\t\t\t\t\t\t\t\t// recalculate positions for smooth animation (for all datasets)\n\t\t\t\t\t\t\t\t\t\t\tchart.data.datasets.forEach((dataset, index) => {\n\t\t\t\t\t\t\t\t\t\t\t\tdataset._meta[prop].data.forEach((metaDataItem, dataIndex) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tmetaDataItem._view.x = metaDataItem._xScale.getPixelForValue(index, dataIndex);\n\t\t\t\t\t\t\t\t\t\t\t\t\tmetaDataItem._view.base = metaDataItem._xScale.getBasePixel();\n\t\t\t\t\t\t\t\t\t\t\t\t\tmetaDataItem._view.width =\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(metaDataItem._xScale.width / dataset._meta[prop].data.length) *\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmetaDataItem._xScale.options.categoryPercentage *\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmetaDataItem._xScale.options.barPercentage;\n\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tdataset._updated = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\t/**\n\t\t\t\t * Fix too long axis labels  - try to shorten and rotate\n\t\t\t\t * @param  {Chart}  chart    Chart instance\n\t\t\t\t * @return {Boolean}\n\t\t\t\t */\n\t\t\t\tfixYAxisLabels: function fixYAxisLabels(chart) {\n\t\t\t\t\tlet shortenYTicks = function shortenYTicks(data, options) {\n\t\t\t\t\t\tif (typeof options.scales === 'undefined') {\n\t\t\t\t\t\t\toptions.scales = {};\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (typeof options.scales.yAxes === 'undefined') {\n\t\t\t\t\t\t\toptions.scales.yAxes = [{}];\n\t\t\t\t\t\t}\n\t\t\t\t\t\toptions.scales.yAxes.forEach(axis => {\n\t\t\t\t\t\t\tif (typeof axis.ticks === 'undefined') {\n\t\t\t\t\t\t\t\taxis.ticks = {};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\taxis.ticks.callback = function yAxisTickCallback(value, index, values) {\n\t\t\t\t\t\t\t\tif (value.length > 13) {\n\t\t\t\t\t\t\t\t\treturn value.substr(0, 10) + '...';\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn options;\n\t\t\t\t\t};\n\t\t\t\t\tchart.data.datasets.forEach((dataset, index) => {\n\t\t\t\t\t\tif (dataset._updated) {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor (let prop in dataset._meta) {\n\t\t\t\t\t\t\tif (dataset._meta.hasOwnProperty(prop)) {\n\t\t\t\t\t\t\t\t// we have meta\n\t\t\t\t\t\t\t\tfor (let i = 0, len = dataset._meta[prop].data.length; i < len; i++) {\n\t\t\t\t\t\t\t\t\tconst metaDataItem = dataset._meta[prop].data[i];\n\t\t\t\t\t\t\t\t\tconst label = metaDataItem._view.label;\n\t\t\t\t\t\t\t\t\tif (label.length > 13) {\n\t\t\t\t\t\t\t\t\t\tchart.options = shortenYTicks(chart.data, chart.options);\n\t\t\t\t\t\t\t\t\t\tif (!dataset._updated) {\n\t\t\t\t\t\t\t\t\t\t\tdataset._updated = true;\n\t\t\t\t\t\t\t\t\t\t\tchart.update();\n\t\t\t\t\t\t\t\t\t\t\t// recalculate positions for smooth animation (for all datasets)\n\t\t\t\t\t\t\t\t\t\t\tchart.data.datasets.forEach((dataset, index) => {\n\t\t\t\t\t\t\t\t\t\t\t\tdataset._meta[prop].data.forEach((metaDataItem, dataIndex) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (typeof metaDataItem._xScale !== 'undefined') {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmetaDataItem._view.x = metaDataItem._xScale.getPixelForValue(index, dataIndex);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmetaDataItem._view.base = metaDataItem._xScale.getBasePixel();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmetaDataItem._view.width =\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(metaDataItem._xScale.width / dataset._meta[prop].data.length) *\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmetaDataItem._xScale.options.categoryPercentage *\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmetaDataItem._xScale.options.barPercentage;\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tdataset._updated = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Get function from global functions from replacement string\n\t\t * @param  {String} replacementStr replacement string from getFunctionReplacementString method\n\t\t * @return {Function}\n\t\t */\n\t\tgetFunctionFromReplacementString: function getFunctionFromReplacementString(replacementStr) {\n\t\t\tlet assignResult = false;\n\t\t\tif (replacementStr.substr(replacementStr.length - 2) === '()') {\n\t\t\t\treplacementStr = replacementStr.substr(0, replacementStr.length - 2);\n\t\t\t\tassignResult = true;\n\t\t\t}\n\t\t\tconst splitted = replacementStr.split(':');\n\t\t\tif (splitted.length !== 2) {\n\t\t\t\tapp.errorLog(\n\t\t\t\t\tnew Error(\n\t\t\t\t\t\t\"Function replacement string should look like 'function:path.to.fn' not like '\" + replacementStr + \"'\"\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t}\n\t\t\tlet finalFunction = splitted[1].split('.').reduce((previous, current) => {\n\t\t\t\treturn previous[current];\n\t\t\t}, this.globalChartFunctions);\n\t\t\tif (typeof finalFunction !== 'function') {\n\t\t\t\tapp.errorLog(new Error('Global function does not exists: ' + splitted[1]));\n\t\t\t}\n\t\t\tif (!assignResult) {\n\t\t\t\treturn finalFunction.bind(this);\n\t\t\t}\n\t\t\treturn finalFunction.call(this);\n\t\t},\n\t\t/**\n\t\t * Should options property be replaced by function?\n\t\t * @param  {String}  str\n\t\t * @return {Boolean}\n\t\t */\n\t\tisReplacementString: function isReplacementString(str) {\n\t\t\tif (typeof str !== 'string') {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn str.substr(0, 9) === 'function:';\n\t\t},\n\t\t/**\n\t\t * Recursively parse options and replace function replacement strings to functions\n\t\t * @param  {Object} options\n\t\t * @param  {bool} afterInit are we parsing chart after it was mounted ?\n\t\t * @return {Object} options with replaced string functions\n\t\t */\n\t\tparseOptionsObject: function parseOptionsObject(options, original, afterInit = false) {\n\t\t\tlet result = {};\n\t\t\tfor (let propertyName in options) {\n\t\t\t\tlet value = options[propertyName];\n\t\t\t\tif (afterInit) {\n\t\t\t\t\tif (propertyName.substr(0, 1) === '_') {\n\t\t\t\t\t\tresult[propertyName] = value;\n\t\t\t\t\t} else if (Array.isArray(value)) {\n\t\t\t\t\t\tresult[propertyName] = this.parseOptionsArray(value, original, afterInit);\n\t\t\t\t\t} else if (typeof value === 'object' && value !== null) {\n\t\t\t\t\t\tresult[propertyName] = this.parseOptionsObject(value, original, afterInit);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult[propertyName] = value;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (propertyName.substr(0, 1) === '_') {\n\t\t\t\t\t\tresult[propertyName] = value;\n\t\t\t\t\t} else if (this.isReplacementString(value)) {\n\t\t\t\t\t\tresult[propertyName] = this.getFunctionFromReplacementString(value, afterInit, original);\n\t\t\t\t\t} else if (Array.isArray(value)) {\n\t\t\t\t\t\tresult[propertyName] = this.parseOptionsArray(value, original, afterInit);\n\t\t\t\t\t} else if (typeof value === 'object' && value !== null) {\n\t\t\t\t\t\tresult[propertyName] = this.parseOptionsObject(value, original, afterInit);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult[propertyName] = value;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn result;\n\t\t},\n\t\t/**\n\t\t * Recursively parse options in array form and replace function replacement string with functions\n\t\t * @param  {Array} arr\n\t\t * @param  {bool} afterInit are we after chart js was mounted?\n\t\t * @return {Array}\n\t\t */\n\t\tparseOptionsArray: function parseOptionsArray(arr, original, afterInit = false) {\n\t\t\treturn arr.map((item, index) => {\n\t\t\t\tif (this.isReplacementString(item)) {\n\t\t\t\t\treturn this.getFunctionFromReplacementString(value);\n\t\t\t\t} else if (Array.isArray(item)) {\n\t\t\t\t\treturn this.parseOptionsArray(item, original, afterInit);\n\t\t\t\t} else if (typeof item === 'object' && item !== null) {\n\t\t\t\t\treturn this.parseOptionsObject(item, original, afterInit);\n\t\t\t\t}\n\t\t\t\treturn item;\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Recursively parse options object and replace function replacement strings with global functions\n\t\t * @param  {Object} options\n\t\t * @param  {bool} afterInit - is chartjs loaded ?\n\t\t * @return {Object}\n\t\t */\n\t\tparseOptions: function parseOptions(options, original, afterInit = false) {\n\t\t\tif (Array.isArray(options)) {\n\t\t\t\treturn this.parseOptionsArray(options, original, afterInit);\n\t\t\t} else if (typeof options === 'object' && options !== null) {\n\t\t\t\treturn this.parseOptionsObject(options, original, afterInit);\n\t\t\t}\n\t\t\tapp.errorLog(new Error('Unknown options format [' + typeof options + '] - should be object.'));\n\t\t},\n\t\t/**\n\t\t * Remove 'Divided' from chart sub type\n\t\t * for example 'barDivided' => 'bar'\n\t\t *\n\t\t * @param {String} chartSubType\n\t\t * @return {String}\n\t\t */\n\t\tremoveStackedFromName(chartSubType) {\n\t\t\tconst dividedPos = chartSubType.indexOf('Stacked');\n\t\t\tif (dividedPos > 0) {\n\t\t\t\treturn chartSubType.substr(0, dividedPos);\n\t\t\t}\n\t\t\treturn chartSubType;\n\t\t},\n\t\t/**\n\t\t * Get global charts default configuration - may be loaded from database in the future\n\t\t * We can modify something basing on chartData received from server (some custom options etc.)\n\t\t *\n\t\t * @param  {Object} chartData received from request ['labels':[],'datasets':['data':[]]] etc\n\t\t * @param  {String} chartSubType 'bar','pie' etc..\n\t\t * @return {Object}\n\t\t */\n\t\tgetGlobalDefaultChartsOptions: function getGlobalDefaultChartsOptions(chartSubType, chartData) {\n\t\t\tconst options = {\n\t\t\t\tbar: {\n\t\t\t\t\tbasic: {\n\t\t\t\t\t\tmaintainAspectRatio: false,\n\t\t\t\t\t\ttitle: {\n\t\t\t\t\t\t\tdisplay: false\n\t\t\t\t\t\t},\n\t\t\t\t\t\tlegend: {\n\t\t\t\t\t\t\tdisplay: 'function:legend.display()'\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttooltips: {\n\t\t\t\t\t\t\tmode: 'point',\n\t\t\t\t\t\t\tcallbacks: {\n\t\t\t\t\t\t\t\tlabel: 'function:tooltips.label',\n\t\t\t\t\t\t\t\ttitle: 'function:tooltips.title'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscales: {\n\t\t\t\t\t\t\txAxes: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tticks: {\n\t\t\t\t\t\t\t\t\t\tautoSkip: false,\n\t\t\t\t\t\t\t\t\t\tbeginAtZero: true,\n\t\t\t\t\t\t\t\t\t\tmaxRotation: 90,\n\t\t\t\t\t\t\t\t\t\tcallback: 'function:scales.formatAxesLabels'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tyAxes: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tticks: {\n\t\t\t\t\t\t\t\t\t\tautoSkip: false,\n\t\t\t\t\t\t\t\t\t\tbeginAtZero: true,\n\t\t\t\t\t\t\t\t\t\tcallback: 'function:scales.formatAxesLabels'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tdataset: {\n\t\t\t\t\t\tdatalabels: {\n\t\t\t\t\t\t\tfont: {\n\t\t\t\t\t\t\t\tsize: 11\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tcolor: 'white',\n\t\t\t\t\t\t\tbackgroundColor: 'rgba(0,0,0,0.2)',\n\t\t\t\t\t\t\tborderColor: 'rgba(255,255,255,0.2)',\n\t\t\t\t\t\t\tborderWidth: 2,\n\t\t\t\t\t\t\tborderRadius: 2,\n\t\t\t\t\t\t\tanchor: 'center',\n\t\t\t\t\t\t\talign: 'center',\n\t\t\t\t\t\t\tformatter: 'function:datalabels.formatter',\n\t\t\t\t\t\t\tdisplay: 'function:datalabels.display'\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tplugins: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tbeforeDraw: 'function:plugins.fixXAxisLabels'\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tbeforeDraw: 'function:plugins.hideVerticalBarDatalabelsIfNeeded'\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\tbarStacked: {\n\t\t\t\t\tbasic: {\n\t\t\t\t\t\tmaintainAspectRatio: false,\n\t\t\t\t\t\ttitle: {\n\t\t\t\t\t\t\tdisplay: false\n\t\t\t\t\t\t},\n\t\t\t\t\t\tlegend: {\n\t\t\t\t\t\t\tdisplay: 'function:legend.display()'\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttooltips: {\n\t\t\t\t\t\t\tmode: 'point',\n\t\t\t\t\t\t\tcallbacks: {\n\t\t\t\t\t\t\t\tlabel: 'function:tooltips.label',\n\t\t\t\t\t\t\t\ttitle: 'function:tooltips.title'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscales: {\n\t\t\t\t\t\t\txAxes: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tstacked: true,\n\t\t\t\t\t\t\t\t\tticks: {\n\t\t\t\t\t\t\t\t\t\tautoSkip: false,\n\t\t\t\t\t\t\t\t\t\tbeginAtZero: true,\n\t\t\t\t\t\t\t\t\t\tmaxRotation: 90,\n\t\t\t\t\t\t\t\t\t\tcallback: 'function:scales.formatAxesLabels'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tyAxes: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tstacked: true,\n\t\t\t\t\t\t\t\t\tticks: {\n\t\t\t\t\t\t\t\t\t\tautoSkip: false,\n\t\t\t\t\t\t\t\t\t\tbeginAtZero: true,\n\t\t\t\t\t\t\t\t\t\tcallback: 'function:scales.formatAxesLabels'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tdataset: {\n\t\t\t\t\t\tdatalabels: {\n\t\t\t\t\t\t\tfont: {\n\t\t\t\t\t\t\t\tsize: 11\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tcolor: 'white',\n\t\t\t\t\t\t\tbackgroundColor: 'rgba(0,0,0,0.2)',\n\t\t\t\t\t\t\tborderColor: 'rgba(255,255,255,0.2)',\n\t\t\t\t\t\t\tborderWidth: 2,\n\t\t\t\t\t\t\tborderRadius: 2,\n\t\t\t\t\t\t\tanchor: 'center',\n\t\t\t\t\t\t\talign: 'center',\n\t\t\t\t\t\t\tformatter: 'function:datalabels.formatter',\n\t\t\t\t\t\t\tdisplay: 'function:datalabels.display'\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tplugins: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tbeforeDraw: 'function:plugins.fixXAxisLabels'\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tbeforeDraw: 'function:plugins.hideVerticalBarDatalabelsIfNeeded'\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\thorizontalBar: {\n\t\t\t\t\tbasic: {\n\t\t\t\t\t\tmaintainAspectRatio: false,\n\t\t\t\t\t\ttitle: {\n\t\t\t\t\t\t\tdisplay: false\n\t\t\t\t\t\t},\n\t\t\t\t\t\tlegend: {\n\t\t\t\t\t\t\tdisplay: 'function:legend.display()'\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttooltips: {\n\t\t\t\t\t\t\tmode: 'point',\n\t\t\t\t\t\t\tcallbacks: {\n\t\t\t\t\t\t\t\tlabel: 'function:tooltips.label',\n\t\t\t\t\t\t\t\ttitle: 'function:tooltips.title'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscales: {\n\t\t\t\t\t\t\txAxes: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tticks: {\n\t\t\t\t\t\t\t\t\t\tautoSkip: false,\n\t\t\t\t\t\t\t\t\t\tbeginAtZero: true,\n\t\t\t\t\t\t\t\t\t\tmaxRotation: 90,\n\t\t\t\t\t\t\t\t\t\tcallback: 'function:scales.formatAxesLabels'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tyAxes: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tticks: {\n\t\t\t\t\t\t\t\t\t\tautoSkip: false,\n\t\t\t\t\t\t\t\t\t\tbeginAtZero: true,\n\t\t\t\t\t\t\t\t\t\tcallback: 'function:scales.formatAxesLabels'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tdataset: {\n\t\t\t\t\t\tdatalabels: {\n\t\t\t\t\t\t\tfont: {\n\t\t\t\t\t\t\t\tsize: 11\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tcolor: 'white',\n\t\t\t\t\t\t\tbackgroundColor: 'rgba(0,0,0,0.2)',\n\t\t\t\t\t\t\tborderColor: 'rgba(255,255,255,0.2)',\n\t\t\t\t\t\t\tborderWidth: 2,\n\t\t\t\t\t\t\tborderRadius: 2,\n\t\t\t\t\t\t\tanchor: 'center',\n\t\t\t\t\t\t\talign: 'center',\n\t\t\t\t\t\t\tformatter: 'function:datalabels.formatter',\n\t\t\t\t\t\t\tdisplay: 'function:datalabels.display'\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tplugins: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tbeforeDraw: 'function:plugins.fixYAxisLabels'\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tbeforeDraw: 'function:plugins.hideHorizontalBarDatalabelsIfNeeded'\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\thorizontalBarStacked: {\n\t\t\t\t\tbasic: {\n\t\t\t\t\t\tmaintainAspectRatio: false,\n\t\t\t\t\t\ttitle: {\n\t\t\t\t\t\t\tdisplay: false\n\t\t\t\t\t\t},\n\t\t\t\t\t\tlegend: {\n\t\t\t\t\t\t\tdisplay: 'function:legend.display()'\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttooltips: {\n\t\t\t\t\t\t\tmode: 'point',\n\t\t\t\t\t\t\tcallbacks: {\n\t\t\t\t\t\t\t\tlabel: 'function:tooltips.label',\n\t\t\t\t\t\t\t\ttitle: 'function:tooltips.title'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscales: {\n\t\t\t\t\t\t\txAxes: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tstacked: true,\n\t\t\t\t\t\t\t\t\tticks: {\n\t\t\t\t\t\t\t\t\t\tautoSkip: false,\n\t\t\t\t\t\t\t\t\t\tbeginAtZero: true,\n\t\t\t\t\t\t\t\t\t\tmaxRotation: 90,\n\t\t\t\t\t\t\t\t\t\tcallback: 'function:scales.formatAxesLabels'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tyAxes: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tstacked: true,\n\t\t\t\t\t\t\t\t\tticks: {\n\t\t\t\t\t\t\t\t\t\tautoSkip: false,\n\t\t\t\t\t\t\t\t\t\tbeginAtZero: true,\n\t\t\t\t\t\t\t\t\t\tcallback: 'function:scales.formatAxesLabels'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tdataset: {\n\t\t\t\t\t\tdatalabels: {\n\t\t\t\t\t\t\tfont: {\n\t\t\t\t\t\t\t\tsize: 11\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tcolor: 'white',\n\t\t\t\t\t\t\tbackgroundColor: 'rgba(0,0,0,0.2)',\n\t\t\t\t\t\t\tborderColor: 'rgba(255,255,255,0.2)',\n\t\t\t\t\t\t\tborderWidth: 2,\n\t\t\t\t\t\t\tborderRadius: 2,\n\t\t\t\t\t\t\tanchor: 'center',\n\t\t\t\t\t\t\talign: 'center',\n\t\t\t\t\t\t\tformatter: 'function:datalabels.formatter',\n\t\t\t\t\t\t\tdisplay: 'function:datalabels.display'\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tplugins: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tbeforeDraw: 'function:plugins.fixYAxisLabels'\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tbeforeDraw: 'function:plugins.hideHorizontalBarDatalabelsIfNeeded'\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\tline: {\n\t\t\t\t\tbasic: {\n\t\t\t\t\t\tmaintainAspectRatio: false,\n\t\t\t\t\t\ttitle: {\n\t\t\t\t\t\t\tdisplay: false\n\t\t\t\t\t\t},\n\t\t\t\t\t\tlegend: {\n\t\t\t\t\t\t\tdisplay: 'function:legend.display()'\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttooltips: {\n\t\t\t\t\t\t\tmode: 'point',\n\t\t\t\t\t\t\tcallbacks: {\n\t\t\t\t\t\t\t\tlabel: 'function:tooltips.label',\n\t\t\t\t\t\t\t\ttitle: 'function:tooltips.title'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscales: {\n\t\t\t\t\t\t\txAxes: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tticks: {\n\t\t\t\t\t\t\t\t\t\tautoSkip: false,\n\t\t\t\t\t\t\t\t\t\tbeginAtZero: true,\n\t\t\t\t\t\t\t\t\t\tmaxRotation: 90,\n\t\t\t\t\t\t\t\t\t\tcallback: 'function:scales.formatAxesLabels',\n\t\t\t\t\t\t\t\t\t\tlabelOffset: 0\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tyAxes: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tticks: {\n\t\t\t\t\t\t\t\t\t\tautoSkip: false,\n\t\t\t\t\t\t\t\t\t\tbeginAtZero: true,\n\t\t\t\t\t\t\t\t\t\tcallback: 'function:scales.formatAxesLabels'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tdataset: {\n\t\t\t\t\t\tfill: false,\n\t\t\t\t\t\tdatalabels: {\n\t\t\t\t\t\t\tfont: {\n\t\t\t\t\t\t\t\tsize: 11\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tcolor: 'white',\n\t\t\t\t\t\t\tbackgroundColor: 'rgba(0,0,0,0.5)',\n\t\t\t\t\t\t\tborderColor: 'rgba(255,255,255,0.5)',\n\t\t\t\t\t\t\tborderWidth: 2,\n\t\t\t\t\t\t\tborderRadius: 2,\n\t\t\t\t\t\t\tanchor: 'bottom',\n\t\t\t\t\t\t\talign: 'bottom',\n\t\t\t\t\t\t\tformatter: 'function:datalabels.formatter',\n\t\t\t\t\t\t\tdisplay: 'function:datalabels.display'\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tplugins: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tbeforeDraw: 'function:plugins.fixXAxisLabels'\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\tlineStacked: {\n\t\t\t\t\tbasic: {\n\t\t\t\t\t\tmaintainAspectRatio: false,\n\t\t\t\t\t\ttitle: {\n\t\t\t\t\t\t\tdisplay: false\n\t\t\t\t\t\t},\n\t\t\t\t\t\tlegend: {\n\t\t\t\t\t\t\tdisplay: 'function:legend.display()'\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttooltips: {\n\t\t\t\t\t\t\tmode: 'point',\n\t\t\t\t\t\t\tcallbacks: {\n\t\t\t\t\t\t\t\tlabel: 'function:tooltips.label',\n\t\t\t\t\t\t\t\ttitle: 'function:tooltips.title'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscales: {\n\t\t\t\t\t\t\txAxes: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tticks: {\n\t\t\t\t\t\t\t\t\t\tautoSkip: false,\n\t\t\t\t\t\t\t\t\t\tbeginAtZero: true,\n\t\t\t\t\t\t\t\t\t\tmaxRotation: 90,\n\t\t\t\t\t\t\t\t\t\tcallback: 'function:scales.formatAxesLabels',\n\t\t\t\t\t\t\t\t\t\tlabelOffset: 0\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tyAxes: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tstacked: true,\n\t\t\t\t\t\t\t\t\tticks: {\n\t\t\t\t\t\t\t\t\t\tautoSkip: false,\n\t\t\t\t\t\t\t\t\t\tbeginAtZero: true,\n\t\t\t\t\t\t\t\t\t\tcallback: 'function:scales.formatAxesLabels'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tdataset: {\n\t\t\t\t\t\tfill: false,\n\t\t\t\t\t\tdatalabels: {\n\t\t\t\t\t\t\tfont: {\n\t\t\t\t\t\t\t\tsize: 11\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tcolor: 'white',\n\t\t\t\t\t\t\tbackgroundColor: 'rgba(0,0,0,0.5)',\n\t\t\t\t\t\t\tborderColor: 'rgba(255,255,255,0.5)',\n\t\t\t\t\t\t\tborderWidth: 2,\n\t\t\t\t\t\t\tborderRadius: 2,\n\t\t\t\t\t\t\tanchor: 'bottom',\n\t\t\t\t\t\t\talign: 'bottom',\n\t\t\t\t\t\t\tformatter: 'function:datalabels.formatter',\n\t\t\t\t\t\t\tdisplay: 'function:datalabels.display'\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tplugins: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tbeforeDraw: 'function:plugins.fixXAxisLabels'\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\tlinePlain: {\n\t\t\t\t\tbasic: {\n\t\t\t\t\t\tmaintainAspectRatio: false,\n\t\t\t\t\t\ttitle: {\n\t\t\t\t\t\t\tdisplay: false\n\t\t\t\t\t\t},\n\t\t\t\t\t\tlegend: {\n\t\t\t\t\t\t\tdisplay: 'function:legend.display()'\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttooltips: {\n\t\t\t\t\t\t\tmode: 'point',\n\t\t\t\t\t\t\tcallbacks: {\n\t\t\t\t\t\t\t\tlabel: 'function:tooltips.label',\n\t\t\t\t\t\t\t\ttitle: 'function:tooltips.title'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscales: {\n\t\t\t\t\t\t\txAxes: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tticks: {\n\t\t\t\t\t\t\t\t\t\tautoSkip: false,\n\t\t\t\t\t\t\t\t\t\tbeginAtZero: true,\n\t\t\t\t\t\t\t\t\t\tmaxRotation: 90,\n\t\t\t\t\t\t\t\t\t\tcallback: 'function:scales.formatAxesLabels',\n\t\t\t\t\t\t\t\t\t\tlabelOffset: 0\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tyAxes: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tticks: {\n\t\t\t\t\t\t\t\t\t\tautoSkip: false,\n\t\t\t\t\t\t\t\t\t\tbeginAtZero: true,\n\t\t\t\t\t\t\t\t\t\tcallback: 'function:scales.formatAxesLabels'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tdataset: {\n\t\t\t\t\t\tlineTension: 0,\n\t\t\t\t\t\tfill: false,\n\t\t\t\t\t\tdatalabels: {\n\t\t\t\t\t\t\tfont: {\n\t\t\t\t\t\t\t\tsize: 11\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tcolor: 'white',\n\t\t\t\t\t\t\tbackgroundColor: 'rgba(0,0,0,0.5)',\n\t\t\t\t\t\t\tborderColor: 'rgba(255,255,255,0.5)',\n\t\t\t\t\t\t\tborderWidth: 2,\n\t\t\t\t\t\t\tborderRadius: 2,\n\t\t\t\t\t\t\tanchor: 'bottom',\n\t\t\t\t\t\t\talign: 'bottom',\n\t\t\t\t\t\t\tformatter: 'function:datalabels.formatter',\n\t\t\t\t\t\t\tdisplay: 'function:datalabels.display'\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tplugins: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tbeforeDraw: 'function:plugins.fixXAxisLabels'\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\tlinePlainStacked: {\n\t\t\t\t\tbasic: {\n\t\t\t\t\t\tmaintainAspectRatio: false,\n\t\t\t\t\t\ttitle: {\n\t\t\t\t\t\t\tdisplay: false\n\t\t\t\t\t\t},\n\t\t\t\t\t\tlegend: {\n\t\t\t\t\t\t\tdisplay: 'function:legend.display()'\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttooltips: {\n\t\t\t\t\t\t\tmode: 'point',\n\t\t\t\t\t\t\tcallbacks: {\n\t\t\t\t\t\t\t\tlabel: 'function:tooltips.label',\n\t\t\t\t\t\t\t\ttitle: 'function:tooltips.title'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscales: {\n\t\t\t\t\t\t\txAxes: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tticks: {\n\t\t\t\t\t\t\t\t\t\tautoSkip: false,\n\t\t\t\t\t\t\t\t\t\tbeginAtZero: true,\n\t\t\t\t\t\t\t\t\t\tmaxRotation: 90,\n\t\t\t\t\t\t\t\t\t\tcallback: 'function:scales.formatAxesLabels',\n\t\t\t\t\t\t\t\t\t\tlabelOffset: 0\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tyAxes: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tstacked: true,\n\t\t\t\t\t\t\t\t\tticks: {\n\t\t\t\t\t\t\t\t\t\tautoSkip: false,\n\t\t\t\t\t\t\t\t\t\tbeginAtZero: true,\n\t\t\t\t\t\t\t\t\t\tcallback: 'function:scales.formatAxesLabels'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tdataset: {\n\t\t\t\t\t\tfill: false,\n\t\t\t\t\t\tlineTension: 0,\n\t\t\t\t\t\tdatalabels: {\n\t\t\t\t\t\t\tfont: {\n\t\t\t\t\t\t\t\tsize: 11\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tcolor: 'white',\n\t\t\t\t\t\t\tbackgroundColor: 'rgba(0,0,0,0.5)',\n\t\t\t\t\t\t\tborderColor: 'rgba(255,255,255,0.5)',\n\t\t\t\t\t\t\tborderWidth: 2,\n\t\t\t\t\t\t\tborderRadius: 2,\n\t\t\t\t\t\t\tanchor: 'bottom',\n\t\t\t\t\t\t\talign: 'bottom',\n\t\t\t\t\t\t\tformatter: 'function:datalabels.formatter',\n\t\t\t\t\t\t\tdisplay: 'function:datalabels.display'\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tplugins: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tbeforeDraw: 'function:plugins.fixXAxisLabels'\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\tpie: {\n\t\t\t\t\tbasic: {\n\t\t\t\t\t\tmaintainAspectRatio: false,\n\t\t\t\t\t\ttitle: {\n\t\t\t\t\t\t\tdisplay: false\n\t\t\t\t\t\t},\n\t\t\t\t\t\tlegend: {\n\t\t\t\t\t\t\tdisplay: true,\n\t\t\t\t\t\t\tlabels: {\n\t\t\t\t\t\t\t\tgenerateLabels: 'function:legend.generateLabels'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcutoutPercentage: 0,\n\t\t\t\t\t\tlayout: {\n\t\t\t\t\t\t\tpadding: {\n\t\t\t\t\t\t\t\tbottom: 12\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttooltips: {\n\t\t\t\t\t\t\tmode: 'point',\n\t\t\t\t\t\t\tcallbacks: {\n\t\t\t\t\t\t\t\tlabel: 'function:tooltips.label',\n\t\t\t\t\t\t\t\ttitle: 'function:tooltips.title'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscales: {}\n\t\t\t\t\t},\n\t\t\t\t\tdataset: {\n\t\t\t\t\t\tdatalabels: {\n\t\t\t\t\t\t\tfont: {\n\t\t\t\t\t\t\t\tsize: 11\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tcolor: 'white',\n\t\t\t\t\t\t\tbackgroundColor: 'rgba(0,0,0,0.5)',\n\t\t\t\t\t\t\tborderColor: 'rgba(255,255,255,0.5)',\n\t\t\t\t\t\t\tborderWidth: 2,\n\t\t\t\t\t\t\tborderRadius: 4,\n\t\t\t\t\t\t\tanchor: 'end',\n\t\t\t\t\t\t\talign: 'center',\n\t\t\t\t\t\t\tformatter: 'function:datalabels.formatter',\n\t\t\t\t\t\t\tdisplay: 'function:datalabels.display'\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tplugins: []\n\t\t\t\t},\n\t\t\t\tdoughnut: {\n\t\t\t\t\tbasic: {\n\t\t\t\t\t\tmaintainAspectRatio: false,\n\t\t\t\t\t\ttitle: {\n\t\t\t\t\t\t\tdisplay: false\n\t\t\t\t\t\t},\n\t\t\t\t\t\tlegend: {\n\t\t\t\t\t\t\tdisplay: true,\n\t\t\t\t\t\t\tonClick: 'function:legend.onClick',\n\t\t\t\t\t\t\tlabels: {\n\t\t\t\t\t\t\t\tgenerateLabels: 'function:legend.generateLabels'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcutoutPercentage: 50,\n\t\t\t\t\t\tlayout: {\n\t\t\t\t\t\t\tpadding: {\n\t\t\t\t\t\t\t\tbottom: 12\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttooltips: {\n\t\t\t\t\t\t\tmode: 'point',\n\t\t\t\t\t\t\tcallbacks: {\n\t\t\t\t\t\t\t\tlabel: 'function:tooltips.label',\n\t\t\t\t\t\t\t\ttitle: 'function:tooltips.title'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscales: {}\n\t\t\t\t\t},\n\t\t\t\t\tdataset: {\n\t\t\t\t\t\tdatalabels: {\n\t\t\t\t\t\t\tfont: {\n\t\t\t\t\t\t\t\tsize: 11\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tcolor: 'white',\n\t\t\t\t\t\t\tbackgroundColor: 'rgba(0,0,0,0.5)',\n\t\t\t\t\t\t\tborderColor: 'rgba(255,255,255,0.5)',\n\t\t\t\t\t\t\tborderWidth: 2,\n\t\t\t\t\t\t\tborderRadius: 4,\n\t\t\t\t\t\t\tanchor: 'end',\n\t\t\t\t\t\t\talign: 'center',\n\t\t\t\t\t\t\tformatter: 'function:datalabels.formatter',\n\t\t\t\t\t\t\tdisplay: 'function:datalabels.display'\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tplugins: []\n\t\t\t\t},\n\t\t\t\tfunnel: {\n\t\t\t\t\tbasic: {\n\t\t\t\t\t\tmaintainAspectRatio: false,\n\t\t\t\t\t\ttitle: {\n\t\t\t\t\t\t\tdisplay: false\n\t\t\t\t\t\t},\n\t\t\t\t\t\tlegend: {\n\t\t\t\t\t\t\tdisplay: false\n\t\t\t\t\t\t},\n\t\t\t\t\t\tsort: 'desc',\n\t\t\t\t\t\ttooltips: {\n\t\t\t\t\t\t\tmode: 'point',\n\t\t\t\t\t\t\tcallbacks: {\n\t\t\t\t\t\t\t\tlabel: 'function:tooltips.label',\n\t\t\t\t\t\t\t\ttitle: 'function:tooltips.title'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscales: {\n\t\t\t\t\t\t\tyAxes: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tdisplay: true,\n\t\t\t\t\t\t\t\t\tbeginAtZero: true,\n\t\t\t\t\t\t\t\t\tticks: {\n\t\t\t\t\t\t\t\t\t\tcallback: 'function:scales.formatAxesLabels'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tdataset: {\n\t\t\t\t\t\tdatalabels: {\n\t\t\t\t\t\t\tdisplay: false\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tplugins: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tbeforeDraw: 'function:plugins.fixYAxisLabels'\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t};\n\t\t\tif (typeof options[chartSubType] !== 'undefined') {\n\t\t\t\treturn options[chartSubType];\n\t\t\t}\n\t\t\t// if divided and standard chart types are equal\n\t\t\tconst notStackedChartSubType = this.removeStackedFromName(chartSubType);\n\t\t\tif (typeof options[notStackedChartSubType] !== 'undefined') {\n\t\t\t\treturn options[notStackedChartSubType];\n\t\t\t}\n\t\t\tapp.errorLog(new Error(chartSubType + ' chart does not exists!'));\n\t\t},\n\t\t/**\n\t\t * Get default chart basic options for specified chart subtype\n\t\t *\n\t\t * @param  {String} chartSubType 'bar','pie'...\n\t\t * @param  {Object} chartData received from request ['labels':[],'datasets':['data':[]]] etc\n\t\t * @return {Object}\n\t\t */\n\t\tgetDefaultBasicOptions: function getDefaultBasicOptions(chartSubType, chartData) {\n\t\t\treturn this.getGlobalDefaultChartsOptions(chartSubType, chartData).basic;\n\t\t},\n\t\t/**\n\t\t * Get default dataset options for specified chart subtype\n\t\t *\n\t\t * @param  {String} chartSubType 'bar','pie'...\n\t\t * @param  {Object} chartData received from request ['labels':[],'datasets':['data':[]]] etc\n\t\t * @return {Object}\n\t\t */\n\t\tgetDefaultDatasetOptions: function getDefaultDatasetOptions(chartSubType, chartData) {\n\t\t\treturn this.getGlobalDefaultChartsOptions(chartSubType, chartData).dataset;\n\t\t},\n\t\t/**\n\t\t * Get default plugins for specified chart subtype\n\t\t *\n\t\t * @param  {String} chartSubType 'bar','pie'...\n\t\t * @param  {Object} chartData received from request ['labels':[],'datasets':['data':[]]] etc\n\t\t * @return {Object}\n\t\t */\n\t\tgetDefaultPlugins: function getDefaultPlugins(chartSubType, chartData) {\n\t\t\treturn this.getGlobalDefaultChartsOptions(chartSubType, chartData).plugins;\n\t\t},\n\t\tgetContainer: function getContainer() {\n\t\t\treturn this.container;\n\t\t},\n\t\tsetContainer: function setContainer(element) {\n\t\t\tthis.container = element;\n\t\t\treturn this;\n\t\t},\n\t\tisEmptyData: function isEmptyData() {\n\t\t\treturn this.getContainer().find('.widgetData').length === 0 || this.getContainer().find('.noDataMsg').length > 0;\n\t\t},\n\t\tgetUserDateFormat: function getUserDateFormat() {\n\t\t\treturn CONFIG.dateFormat;\n\t\t},\n\t\tgetChartContainer: function getChartContainer(useCache) {\n\t\t\tif (typeof useCache === 'undefined') {\n\t\t\t\tuseCache = false;\n\t\t\t}\n\t\t\tif (this.plotContainer === false || !useCache) {\n\t\t\t\tthis.plotContainer = this.getContainer()\n\t\t\t\t\t.find('.widgetChartContainer')\n\t\t\t\t\t.find('canvas')\n\t\t\t\t\t.get(0);\n\t\t\t}\n\t\t\treturn this.plotContainer;\n\t\t},\n\t\tregisterRecordsCount: function registerRecordsCount() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar recordsCountBtn = thisInstance.getContainer().find('.recordCount');\n\t\t\trecordsCountBtn.on('click', function () {\n\t\t\t\tvar url = recordsCountBtn.data('url');\n\t\t\t\tAppConnector.request(url).done(function (response) {\n\t\t\t\t\trecordsCountBtn.find('.count').html(response.result.totalCount);\n\t\t\t\t\trecordsCountBtn\n\t\t\t\t\t\t.find('.fas')\n\t\t\t\t\t\t.addClass('d-none')\n\t\t\t\t\t\t.attr('aria-hidden', true);\n\t\t\t\t\trecordsCountBtn\n\t\t\t\t\t\t.find('a')\n\t\t\t\t\t\t.removeClass('d-none')\n\t\t\t\t\t\t.attr('aria-hidden', false);\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tloadScrollbar: function loadScrollbar() {\n\t\t\tconst container = $(this.getChartContainer(false));\n\t\t\tif (typeof container === 'undefined') {\n\t\t\t\t// if there is no data\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tconst widget = container.closest('.dashboardWidget');\n\t\t\tconst content = widget.find('.dashboardWidgetContent');\n\t\t\tconst footer = widget.find('.dashboardWidgetFooter');\n\t\t\tlet adjustedHeight = widget.innerHeight() - widget.find('.dashboardWidgetHeader').outerHeight();\n\t\t\tif (footer.length) {\n\t\t\t\tadjustedHeight -= footer.outerHeight();\n\t\t\t}\n\t\t\tif (!content.length) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tcontent.css('height', adjustedHeight + 'px');\n\t\t\tcontent.css('max-height', adjustedHeight + 'px');\n\t\t\tif (typeof this.scrollbar !== 'undefined') {\n\t\t\t\tthis.scrollbar.update();\n\t\t\t} else {\n\t\t\t\tthis.scrollbar = app.showNewScrollbar(content, {\n\t\t\t\t\twheelPropagation: true\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\trestrictContentDrag: function restrictContentDrag() {\n\t\t\tthis.getContainer().on('mousedown.draggable', function (e) {\n\t\t\t\tvar element = jQuery(e.target);\n\t\t\t\tvar isHeaderElement = element.closest('.dashboardWidgetHeader').length > 0 ? true : false;\n\t\t\t\tif (isHeaderElement) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t//Stop the event propagation so that drag will not start for contents\n\t\t\t\te.stopPropagation();\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Get data from JSON encoded input value\n\t\t *\n\t\t * @return {object} data from request\n\t\t */\n\t\tgenerateData: function generateData() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar jData = thisInstance\n\t\t\t\t.getContainer()\n\t\t\t\t.find('.widgetData')\n\t\t\t\t.val();\n\t\t\tif (typeof jData === 'undefined') {\n\t\t\t\treturn (thisInstance.chartData = jData);\n\t\t\t}\n\t\t\tthisInstance.chartData = JSON.parse(jData);\n\t\t\treturn thisInstance.chartData;\n\t\t},\n\t\tpositionNoDataMsg: function positionNoDataMsg() {\n\t\t\tvar container = this.getContainer();\n\t\t\tvar widgetContentsContainer = container.find('.dashboardWidgetContent');\n\t\t\tvar noDataMsgHolder = widgetContentsContainer.find('.noDataMsg');\n\t\t\tnoDataMsgHolder.position({\n\t\t\t\tmy: 'center center',\n\t\t\t\tat: 'center center',\n\t\t\t\tof: widgetContentsContainer\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Print html content as image\n\t\t * @param {jQuery} element\n\t\t */\n\t\tprintHtml(element) {\n\t\t\tlet widget = element.closest('.dashboardWidget'),\n\t\t\t\ttitle = widget.find('.dashboardTitle').prop('title'),\n\t\t\t\tprintContainer = widget.find('.js-print__container').get(0),\n\t\t\t\timgEl = $('<img style=\"width:100%\">');\n\t\t\timgEl.get(0).onload = () => {\n\t\t\t\tlet width = $(printContainer).outerWidth();\n\t\t\t\tlet height = $(printContainer).outerHeight();\n\t\t\t\tif (width < 600) {\n\t\t\t\t\twidth = 600;\n\t\t\t\t}\n\t\t\t\tif (height < 400) {\n\t\t\t\t\theight = 400;\n\t\t\t\t}\n\t\t\t\tthis.printImage(imgEl.get(0), title, width, height);\n\t\t\t};\n\t\t\tapp.htmlToImage(printContainer, imageBase64 => {\n\t\t\t\timgEl.get(0).src = imageBase64;\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Download html content as image\n\t\t * @param {jQuery} element\n\t\t */\n\t\tdownloadHtmlAsImage(element) {\n\t\t\tlet widget = element.closest('.dashboardWidget'),\n\t\t\t\ttitle = widget.find('.dashboardTitle').prop('title');\n\t\t\tapp.htmlToImage(widget.find('.js-print__container').get(0), imageBase64 => {\n\t\t\t\tlet anchor = document.createElement('a');\n\t\t\t\tanchor.setAttribute('href', imageBase64);\n\t\t\t\tanchor.setAttribute('download', title + '.png');\n\t\t\t\tanchor.click();\n\t\t\t});\n\t\t},\n\t\t//Place holdet can be extended by child classes and can use this to handle the post load\n\t\tpostLoadWidget: function postLoadWidget() {\n\t\t\tif (!this.isEmptyData()) {\n\t\t\t\tthis.loadChart(this.options);\n\t\t\t} else {\n\t\t\t\tthis.positionNoDataMsg();\n\t\t\t}\n\t\t\tthis.registerSectionClick();\n\t\t\tthis.registerFilter();\n\t\t\tthis.registerFilterChangeEvent();\n\t\t\tthis.restrictContentDrag();\n\t\t\tthis.registerContentAutoResize();\n\t\t\tthis.registerWidgetSwitch();\n\t\t\tthis.registerChangeSorting();\n\t\t\tthis.registerLoadMore();\n\t\t\tthis.registerHeaderButtons();\n\t\t\tthis.loadScrollbar();\n\t\t},\n\t\tpostRefreshWidget: function postRefreshWidget() {\n\t\t\tthis.loadScrollbar();\n\t\t\tif (!this.isEmptyData()) {\n\t\t\t\tthis.loadChart(this.options);\n\t\t\t} else {\n\t\t\t\tthis.positionNoDataMsg();\n\t\t\t}\n\t\t\tthis.registerSectionClick();\n\t\t\tthis.registerLoadMore();\n\t\t},\n\t\tsetSortingButton: function setSortingButton(currentElement) {\n\t\t\tif (currentElement.length) {\n\t\t\t\tlet container = this.getContainer(),\n\t\t\t\t\tdrefresh = container.find('a[name=\"drefresh\"]'),\n\t\t\t\t\turl = drefresh.data('url');\n\t\t\t\turl = url.replace('&sortorder=desc', '');\n\t\t\t\turl = url.replace('&sortorder=asc', '');\n\t\t\t\turl += '&sortorder=';\n\t\t\t\tlet sort = currentElement.data('sort'),\n\t\t\t\t\tsortorder = 'desc',\n\t\t\t\t\ticon = 'fa-sort-amount-down',\n\t\t\t\t\ticonBase = 'fa-sort-amount-up';\n\t\t\t\tif (sort == 'desc') {\n\t\t\t\t\tsortorder = 'asc';\n\t\t\t\t\ticon = 'fa-sort-amount-up';\n\t\t\t\t\ticonBase = 'fa-sort-amount-down';\n\t\t\t\t}\n\t\t\t\tcurrentElement.data('sort', sortorder);\n\t\t\t\tcurrentElement.attr('title', currentElement.data(sortorder));\n\t\t\t\tcurrentElement.attr('alt', currentElement.data(sortorder));\n\t\t\t\turl += sortorder;\n\t\t\t\tcurrentElement\n\t\t\t\t\t.find('.fas')\n\t\t\t\t\t.removeClass(iconBase)\n\t\t\t\t\t.addClass(icon);\n\t\t\t\tdrefresh.data('url', url);\n\t\t\t}\n\t\t},\n\t\tgetChartImage() {\n\t\t\tconst base64Image = this.chartInstance.toBase64Image();\n\t\t\tconst image = new Image();\n\t\t\timage.src = base64Image;\n\t\t\treturn image;\n\t\t},\n\t\tprintImage(imgEl, title, width, height) {\n\t\t\tconst print = window.open('', 'PRINT', 'height=' + height + ',width=' + width);\n\t\t\tprint.document.write('<html><head><title>' + title + '</title>');\n\t\t\tprint.document.write('</head><body >');\n\t\t\tprint.document.write(\n\t\t\t\t$('<div>')\n\t\t\t\t\t.append(imgEl)\n\t\t\t\t\t.html()\n\t\t\t);\n\t\t\tprint.document.write('</body></html>');\n\t\t\tprint.document.close(); // necessary for IE >= 10\n\t\t\tprint.focus(); // necessary for IE >= 10\n\t\t\tsetTimeout(function () {\n\t\t\t\tprint.print();\n\t\t\t\tprint.close();\n\t\t\t}, 1000);\n\t\t},\n\t\tregisterHeaderButtons: function registerHeaderButtons() {\n\t\t\tconst container = this.getContainer();\n\t\t\tconst header = container.find('.dashboardWidgetHeader');\n\t\t\tconst downloadWidget = header.find('.downloadWidget');\n\t\t\tconst printWidget = header.find('.printWidget');\n\t\t\tprintWidget.on('click', e => {\n\t\t\t\tconst imgEl = this.getChartImage();\n\t\t\t\tthis.printImage(imgEl, header.find('.dashboardTitle').text(), 600, 400);\n\t\t\t});\n\t\t\tdownloadWidget.on('click', e => {\n\t\t\t\tconst imgEl = $(this.getChartImage());\n\t\t\t\tconst a = $('<a>')\n\t\t\t\t\t.attr('href', imgEl.attr('src'))\n\t\t\t\t\t.attr('download', header.find('.js-widget__header__title').text() + '.png')\n\t\t\t\t\t.appendTo(container);\n\t\t\t\ta[0].click();\n\t\t\t\ta.remove();\n\t\t\t});\n\t\t\tcontainer.find('.js-widget-quick-create').on('click', function (e) {\n\t\t\t\tVtiger_Header_Js.getInstance().quickCreateModule($(this).data('module-name'));\n\t\t\t});\n\t\t},\n\t\tregisterChangeSorting: function registerChangeSorting() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar container = this.getContainer();\n\t\t\tthisInstance.setSortingButton(container.find('.changeRecordSort'));\n\t\t\tcontainer.find('.changeRecordSort').on('click', function (e) {\n\t\t\t\tvar drefresh = container.find('a[name=\"drefresh\"]');\n\t\t\t\tthisInstance.setSortingButton(jQuery(e.currentTarget));\n\t\t\t\tdrefresh.click();\n\t\t\t});\n\t\t},\n\t\tregisterWidgetSwitch: function registerWidgetSwitch() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar switchButtons = this.getContainer().find('.dashboardWidgetHeader .js-switch--calculations');\n\t\t\tthisInstance.setUrlSwitch(switchButtons);\n\t\t\tswitchButtons.on('change', e => {\n\t\t\t\tvar currentElement = $(e.currentTarget);\n\t\t\t\tvar dashboardWidgetHeader = currentElement.closest('.dashboardWidgetHeader');\n\t\t\t\tvar drefresh = dashboardWidgetHeader.find('a[name=\"drefresh\"]');\n\t\t\t\tthisInstance.setUrlSwitch(currentElement).done(function (data) {\n\t\t\t\t\tif (data) {\n\t\t\t\t\t\tdrefresh.click();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tsetUrlSwitch: function setUrlSwitch(switchButtons) {\n\t\t\tvar aDeferred = jQuery.Deferred();\n\t\t\tswitchButtons.each(function (index, e) {\n\t\t\t\tvar currentElement = jQuery(e);\n\t\t\t\tvar dashboardWidgetHeader = currentElement.closest('.dashboardWidgetHeader');\n\t\t\t\tvar drefresh = dashboardWidgetHeader.find('a[name=\"drefresh\"]');\n\t\t\t\tvar url = drefresh.data('url');\n\t\t\t\tvar urlparams = currentElement.data('urlparams');\n\t\t\t\tif (urlparams !== '') {\n\t\t\t\t\tvar switchUrl = currentElement.data('url-value');\n\t\t\t\t\turl = url.replace('&' + urlparams + '=' + switchUrl, '');\n\t\t\t\t\turl += '&' + urlparams + '=' + switchUrl;\n\t\t\t\t\tdrefresh.data('url', url);\n\t\t\t\t\taDeferred.resolve(true);\n\t\t\t\t} else {\n\t\t\t\t\taDeferred.reject();\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\tgetFilterData: function getFilterData() {\n\t\t\treturn {};\n\t\t},\n\t\t/**\n\t\t * Refresh widget\n\t\t * @returns {undefined}\n\t\t */\n\t\trefreshWidget: function refreshWidget() {\n\t\t\tlet thisInstance = this;\n\t\t\tlet parent = this.getContainer();\n\t\t\tlet element = parent.find('a[name=\"drefresh\"]');\n\t\t\tlet url = element.data('url');\n\t\t\tlet contentContainer = parent.find('.dashboardWidgetContent');\n\t\t\tlet params = url;\n\t\t\tlet widgetFilters = parent.find('.widgetFilter');\n\t\t\tif (widgetFilters.length > 0) {\n\t\t\t\tparams = {};\n\t\t\t\tparams.url = url;\n\t\t\t\tparams.data = {};\n\t\t\t\twidgetFilters.each((index, domElement) => {\n\t\t\t\t\tlet widgetFilter = $(domElement);\n\t\t\t\t\tlet filterName = widgetFilter.attr('name');\n\t\t\t\t\tif ('checkbox' === widgetFilter.attr('type')) {\n\t\t\t\t\t\tparams.data[filterName] = widgetFilter.is(':checked');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tparams.data[filterName] = widgetFilter.val();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tlet additionalWidgetFilters = parent.find('.js-chartFilter__additional-filter-field');\n\t\t\tif (additionalWidgetFilters.length > 0) {\n\t\t\t\tparams = {};\n\t\t\t\tparams.url = url;\n\t\t\t\tparams.data = {};\n\t\t\t\tadditionalWidgetFilters.each((index, domElement) => {\n\t\t\t\t\tlet widgetFilter = jQuery(domElement);\n\t\t\t\t\tlet filterName = widgetFilter.attr('name');\n\t\t\t\t\tlet arr = false;\n\t\t\t\t\tif (filterName.substr(-2) === '[]') {\n\t\t\t\t\t\tarr = true;\n\t\t\t\t\t\tfilterName = filterName.substr(0, filterName.length - 2);\n\t\t\t\t\t\tif (!Array.isArray(params.data[filterName])) {\n\t\t\t\t\t\t\tparams.data[filterName] = [];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif ('checkbox' === widgetFilter.attr('type')) {\n\t\t\t\t\t\tif (arr) {\n\t\t\t\t\t\t\tparams.data[filterName].push(widgetFilter.is(':checked'));\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tparams.data[filterName] = widgetFilter.is(':checked');\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (arr) {\n\t\t\t\t\t\t\tparams.data[filterName].push(widgetFilter.val());\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tparams.data[filterName] = widgetFilter.val();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tlet refreshContainer = parent.find('.dashboardWidgetContent');\n\t\t\tlet refreshContainerFooter = parent.find('.dashboardWidgetFooter');\n\t\t\trefreshContainer.html('');\n\t\t\trefreshContainerFooter.html('');\n\t\t\trefreshContainer.progressIndicator();\n\t\t\tif (\n\t\t\t\tthis.paramCache &&\n\t\t\t\t(additionalWidgetFilters.length || widgetFilters.length || parent.find('.listSearchContributor'))\n\t\t\t) {\n\t\t\t\tthisInstance.setFilterToCache(params.url ? params.url : params, params.data ? params.data : {});\n\t\t\t}\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(data => {\n\t\t\t\t\tdata = $(data);\n\t\t\t\t\tlet footer = data.filter('.widgetFooterContent');\n\t\t\t\t\trefreshContainer.progressIndicator({\n\t\t\t\t\t\tmode: 'hide'\n\t\t\t\t\t});\n\t\t\t\t\tif (footer.length) {\n\t\t\t\t\t\tfooter = footer.clone(true, true);\n\t\t\t\t\t\trefreshContainerFooter.html(footer);\n\t\t\t\t\t\tdata.each(function (n, e) {\n\t\t\t\t\t\t\tif (jQuery(this).hasClass('widgetFooterContent')) {\n\t\t\t\t\t\t\t\tdata.splice(n, 1);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tcontentContainer.html(data).trigger(YetiForce_Widget_Js.widgetPostRefereshEvent);\n\t\t\t\t})\n\t\t\t\t.fail(() => {\n\t\t\t\t\trefreshContainer.progressIndicator({\n\t\t\t\t\t\tmode: 'hide'\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t},\n\t\tregisterFilter: function registerFilter() {\n\t\t\tconst container = this.getContainer();\n\t\t\tconst search = container.find('.listSearchContributor');\n\t\t\tconst refreshBtn = container.find('a[name=\"drefresh\"]');\n\t\t\tconst originalUrl = refreshBtn.data('url');\n\t\t\tconst selects = container.find('.select2noactive');\n\t\t\tsearch.css('width', '100%');\n\t\t\tsearch.parent().addClass('w-100');\n\t\t\tsearch.each((index, element) => {\n\t\t\t\tconst fieldInfo = $(element).data('fieldinfo');\n\t\t\t\t$(element)\n\t\t\t\t\t.attr('placeholder', fieldInfo.label)\n\t\t\t\t\t.data('placeholder', fieldInfo.label);\n\t\t\t});\n\t\t\tApp.Fields.Picklist.changeSelectElementView(selects, 'select2', { containerCssClass: 'form-control' });\n\t\t\tApp.Fields.Date.register(container);\n\t\t\tApp.Fields.Date.registerRange(container);\n\t\t\tsearch.on('change apply.daterangepicker', e => {\n\t\t\t\tlet searchParams = [];\n\t\t\t\tcontainer.find('.listSearchContributor').each((index, domElement) => {\n\t\t\t\t\tlet searchInfo = [];\n\t\t\t\t\tconst searchContributorElement = $(domElement);\n\t\t\t\t\tconst fieldInfo = searchContributorElement.data('fieldinfo');\n\t\t\t\t\tconst fieldName = searchContributorElement.attr('name');\n\t\t\t\t\tlet searchValue = searchContributorElement.val();\n\t\t\t\t\tif (typeof searchValue === 'object') {\n\t\t\t\t\t\tif (searchValue == null) {\n\t\t\t\t\t\t\tsearchValue = '';\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsearchValue = searchValue.join('##');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tsearchValue = searchValue.trim();\n\t\t\t\t\tif (searchValue.length <= 0) {\n\t\t\t\t\t\t//continue\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\tlet searchOperator = 'a';\n\t\t\t\t\tif (fieldInfo.hasOwnProperty('searchOperator')) {\n\t\t\t\t\t\tsearchOperator = fieldInfo.searchOperator;\n\t\t\t\t\t} else if (\n\t\t\t\t\t\tjQuery.inArray(fieldInfo.type, [\n\t\t\t\t\t\t\t'modules',\n\t\t\t\t\t\t\t'time',\n\t\t\t\t\t\t\t'userCreator',\n\t\t\t\t\t\t\t'owner',\n\t\t\t\t\t\t\t'picklist',\n\t\t\t\t\t\t\t'tree',\n\t\t\t\t\t\t\t'boolean',\n\t\t\t\t\t\t\t'fileLocationType',\n\t\t\t\t\t\t\t'userRole',\n\t\t\t\t\t\t\t'companySelect',\n\t\t\t\t\t\t\t'multiReferenceValue'\n\t\t\t\t\t\t]) >= 0\n\t\t\t\t\t) {\n\t\t\t\t\t\tsearchOperator = 'e';\n\t\t\t\t\t} else if (fieldInfo.type === 'date' || fieldInfo.type === 'datetime') {\n\t\t\t\t\t\tsearchOperator = 'bw';\n\t\t\t\t\t} else if (fieldInfo.type === 'multipicklist' || fieldInfo.type === 'categoryMultipicklist') {\n\t\t\t\t\t\tsearchOperator = 'c';\n\t\t\t\t\t}\n\t\t\t\t\tsearchInfo.push(fieldName);\n\t\t\t\t\tsearchInfo.push(searchOperator);\n\t\t\t\t\tsearchInfo.push(searchValue);\n\t\t\t\t\tif (fieldInfo.type === 'tree' || fieldInfo.type === 'categoryMultipicklist') {\n\t\t\t\t\t\tsearchInfo.push(\n\t\t\t\t\t\t\t$('.listViewHeaders .searchInSubcategories[data-columnname=\"' + fieldName + '\"]').prop('checked')\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tsearchParams.push(searchInfo);\n\t\t\t\t});\n\t\t\t\tlet url = originalUrl + '&search_params=' + JSON.stringify([searchParams]);\n\t\t\t\trefreshBtn.data('url', url);\n\t\t\t\trefreshBtn.trigger('click');\n\t\t\t});\n\t\t},\n\t\tregisterFilterChangeEvent: function registerFilterChangeEvent() {\n\t\t\tlet container = this.getContainer();\n\t\t\tcontainer.on('change', '.widgetFilter', e => {\n\t\t\t\tcontainer.find('a[name=\"drefresh\"]').trigger('click');\n\t\t\t});\n\t\t\tif (container.find('.widgetFilterByField').length) {\n\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(container.find('.select2noactive'));\n\t\t\t\tthis.getContainer().on('change', '.widgetFilterByField .form-control', e => {\n\t\t\t\t\tcontainer.find('a[name=\"drefresh\"]').trigger('click');\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tregisterWidgetPostLoadEvent: function registerWidgetPostLoadEvent(container) {\n\t\t\tvar thisInstance = this;\n\t\t\tcontainer.on(YetiForce_Widget_Js.widgetPostLoadEvent, function (e) {\n\t\t\t\tthisInstance.postLoadWidget();\n\t\t\t});\n\t\t},\n\t\tregisterWidgetPostRefreshEvent: function registerWidgetPostRefreshEvent(container) {\n\t\t\tvar thisInstance = this;\n\t\t\tcontainer.off(YetiForce_Widget_Js.widgetPostRefereshEvent);\n\t\t\tcontainer.on(YetiForce_Widget_Js.widgetPostRefereshEvent, function (e) {\n\t\t\t\tthisInstance.postRefreshWidget();\n\t\t\t});\n\t\t},\n\t\tregisterSectionClick: function registerSectionClick() {\n\t\t\tconst thisInstance = this;\n\t\t\tlet pointer = false;\n\t\t\t$(thisInstance.chartInstance.canvas)\n\t\t\t\t.on('click', function (e) {\n\t\t\t\t\tif (typeof thisInstance.getDataFromEvent(e, ['links']).links !== 'undefined') {\n\t\t\t\t\t\twindow.location.href = thisInstance.getDataFromEvent(e, ['links']).links;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.on('mousemove', function (e) {\n\t\t\t\t\tif (typeof thisInstance.getDataFromEvent(e, ['links']).links !== 'undefined') {\n\t\t\t\t\t\tif (!pointer) {\n\t\t\t\t\t\t\t$(this).css('cursor', 'pointer');\n\t\t\t\t\t\t\tpointer = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (pointer) {\n\t\t\t\t\t\t\t$(this).css('cursor', 'auto');\n\t\t\t\t\t\t\tpointer = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.on('mouseout', function () {\n\t\t\t\t\tif (pointer) {\n\t\t\t\t\t\t$(this).css('cursor', 'auto');\n\t\t\t\t\t\tpointer = false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t},\n\t\tregisterLoadMore: function registerLoadMore() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar parent = thisInstance.getContainer();\n\t\t\tvar contentContainer = parent.find('.dashboardWidgetContent');\n\t\t\tcontentContainer.off('click', '.showMoreHistory');\n\t\t\tcontentContainer.on('click', '.showMoreHistory', function (e) {\n\t\t\t\tvar element = jQuery(e.currentTarget);\n\t\t\t\telement.hide();\n\t\t\t\tvar parent = jQuery(e.delegateTarget).closest('.dashboardWidget');\n\t\t\t\tjQuery(parent)\n\t\t\t\t\t.find('.slimScrollDiv')\n\t\t\t\t\t.css('overflow', 'visible');\n\t\t\t\tvar url = element.data('url') + '&content=true';\n\t\t\t\tlet additionalFilter = parent.find('.widgetFilter');\n\t\t\t\tif (additionalFilter.length > 0) {\n\t\t\t\t\tadditionalFilter.each(function () {\n\t\t\t\t\t\turl += '&' + $(this).attr('name') + '=' + $(this).val();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (parent.find('.changeRecordSort').length > 0) {\n\t\t\t\t\turl += '&sortorder=' + parent.find('.changeRecordSort').data('sort');\n\t\t\t\t}\n\t\t\t\tcontentContainer.progressIndicator();\n\t\t\t\tAppConnector.request(url).done(function (data) {\n\t\t\t\t\tcontentContainer.progressIndicator({\n\t\t\t\t\t\tmode: 'hide'\n\t\t\t\t\t});\n\t\t\t\t\tjQuery(parent)\n\t\t\t\t\t\t.find('.dashboardWidgetContent')\n\t\t\t\t\t\t.append(data);\n\t\t\t\t\telement.parent().remove();\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tsetFilterToCache: function setFilterToCache(url, data) {\n\t\t\tvar paramCache = url;\n\t\t\tvar container = this.getContainer();\n\t\t\tparamCache = paramCache.replace('&content=', '&notcontent=');\n\t\t\tfor (var i in data) {\n\t\t\t\tif (typeof data[i] == 'object') {\n\t\t\t\t\tdata[i] = JSON.stringify(data[i]);\n\t\t\t\t}\n\t\t\t\tparamCache += '&' + i + '=' + data[i];\n\t\t\t}\n\t\t\tvar userId = CONFIG.userId;\n\t\t\tvar name = container.data('name');\n\t\t\tapp.cacheSet(name + userId, paramCache);\n\t\t},\n\t\tregisterCache: function registerCache(container) {\n\t\t\tif (container.data('cache') == 1) {\n\t\t\t\tthis.paramCache = true;\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Auto resize charts when widget was resized\n\t\t */\n\t\tregisterContentAutoResize() {\n\t\t\tthis.getContainer()\n\t\t\t\t.closest('.grid-stack')\n\t\t\t\t.on('gsresizestop', (event, elem) => {\n\t\t\t\t\tthis.loadScrollbar();\n\t\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Load and display chart into the view\n\t\t *\n\t\t * @return {Chart} chartInstance\n\t\t */\n\t\tloadChart: function loadChart() {\n\t\t\tif (typeof this.chartData === 'undefined' || typeof this.getChartContainer() === 'undefined') {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.getWidgetData(); // load widget data for label formatters\n\t\t\tconst type = this.getType();\n\t\t\tlet data = this.generateData();\n\t\t\tdata.datasets = this.loadDatasetOptions(data);\n\t\t\tconst options = this.parseOptions(this.loadBasicOptions(data));\n\t\t\tconst plugins = this.parseOptions(this.loadPlugins(data));\n\t\t\tdata = this.parseOptions(data);\n\t\t\tconst chart = (this.chartInstance = new Chart(this.getChartContainer().getContext('2d'), {\n\t\t\t\ttype,\n\t\t\t\tdata,\n\t\t\t\toptions,\n\t\t\t\tplugins\n\t\t\t}));\n\t\t\t// parse chart one more time after it was mounted - some options need to have chart loaded\n\t\t\tdata.datasets = data.datasets.map((dataset, index) => {\n\t\t\t\tdataset.datasetIndex = index;\n\t\t\t\treturn this.parseOptions(dataset, dataset, true);\n\t\t\t});\n\t\t\treturn chart;\n\t\t},\n\t\t/**\n\t\t * Get data from event like mouse hover,click etc - get data which belongs to pointed element\n\t\t *\n\t\t * @param {Object} e\n\t\t * @param {array} additionalFields if element from event have additional\n\t\t * array in dataset like links for data then additionalFields will look like ['links']\n\t\t * @returns {object} {label,value,...additionalFields}\n\t\t */\n\t\tgetDataFromEvent: function getDataFromEvent(e, additionalFields) {\n\t\t\tlet chart = this.chartInstance;\n\t\t\tconst elements = chart.getElementAtEvent(e);\n\t\t\tif (elements.length === 0) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tconst element = elements[0];\n\t\t\tconst dataIndex = element._index;\n\t\t\tconst datasetIndex = element._datasetIndex;\n\t\t\tconst eventData = {\n\t\t\t\tlabel: chart.data.labels[dataIndex],\n\t\t\t\tvalue: chart.data.datasets[0].data[dataIndex]\n\t\t\t};\n\t\t\tif (typeof additionalFields !== 'undefined' && Array.isArray(additionalFields)) {\n\t\t\t\tadditionalFields.forEach(fieldName => {\n\t\t\t\t\tif (\n\t\t\t\t\t\ttypeof chart.data.datasets[datasetIndex][fieldName] !== 'undefined' &&\n\t\t\t\t\t\ttypeof chart.data.datasets[datasetIndex][fieldName][dataIndex] !== 'undefined'\n\t\t\t\t\t) {\n\t\t\t\t\t\teventData[fieldName] = chart.data.datasets[datasetIndex][fieldName][dataIndex];\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn eventData;\n\t\t},\n\t\t/**\n\t\t * Get default chart options for current chart subtype\n\t\t * basic and tooltip options share the same space\n\t\t *\n\t\t * @param  {Object} chartData\n\t\t * @return {Object} merged options\n\t\t */\n\t\tloadBasicOptions: function loadBasicOptions(chartData) {\n\t\t\tthis.formatTooltipTitles(chartData);\n\t\t\tthis.formatTooltipLabels(chartData);\n\t\t\treturn this.mergeOptions(\n\t\t\t\tthis.getBasicOptions(chartData),\n\t\t\t\tthis.getDefaultBasicOptions(this.getSubType(), chartData)\n\t\t\t);\n\t\t},\n\t\t/**\n\t\t * Apply default dataset options (usually datalabels configuration)\n\t\t *\n\t\t * @param {object} chartData from request\n\t\t * @returns {object} chartData\n\t\t */\n\t\tloadDatasetOptions: function loadDatasetOptions(chartData) {\n\t\t\treturn chartData.datasets.map((dataset, index) => {\n\t\t\t\tlet result = this.mergeOptions(\n\t\t\t\t\tdataset,\n\t\t\t\t\tthis.getDatasetOptions(chartData),\n\t\t\t\t\tthis.getDefaultDatasetOptions(this.getSubType(), chartData)\n\t\t\t\t);\n\t\t\t\treturn result;\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Load plugins from configuration\n\t\t * @param  {Object} chartData from the request\n\t\t * @return {Object}\n\t\t */\n\t\tloadPlugins: function loadPlugins(chartData) {\n\t\t\treturn this.mergeOptionsArray(this.getPlugins(chartData), this.getDefaultPlugins(this.getSubType(), chartData));\n\t\t},\n\t\t/**\n\t\t * Format tooltip titles to user number format and push this modification to titlesFormatted\n\t\t * it is better to parse tooltips at initialization phase than\n\t\t * in tooltip callback which is called after hover\n\t\t *\n\t\t * @param {object} data - data from request\n\t\t * @returns {undefined}\n\t\t */\n\t\tformatTooltipTitles: function formatTooltipTitles(data) {\n\t\t\tdata.datasets.forEach(dataset => {\n\t\t\t\tif (typeof dataset.titlesFormatted === 'undefined') {\n\t\t\t\t\tdataset.titlesFormatted = [];\n\t\t\t\t\tdataset.data.forEach((dataItem, index) => {\n\t\t\t\t\t\tlet defaultLabel = data.labels[index];\n\t\t\t\t\t\tif (String(defaultLabel).length > 0 && !isNaN(Number(defaultLabel))) {\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\ttypeof this.widgetData !== 'undefined' &&\n\t\t\t\t\t\t\t\ttypeof this.widgetData.valueType !== 'undefined' &&\n\t\t\t\t\t\t\t\tthis.widgetData.valueType === 'count'\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tdefaultLabel = App.Fields.Double.formatToDisplay(defaultLabel, 0);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tdefaultLabel = App.Fields.Double.formatToDisplay(defaultLabel);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (typeof dataset.label !== 'undefined') {\n\t\t\t\t\t\t\tlet label = dataset.label;\n\t\t\t\t\t\t\tif (String(label).length > 0 && !isNaN(Number(label))) {\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\ttypeof this.widgetData !== 'undefined' &&\n\t\t\t\t\t\t\t\t\ttypeof this.widgetData.valueType !== 'undefined' &&\n\t\t\t\t\t\t\t\t\tthis.widgetData.valueType === 'count'\n\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\tlabel = App.Fields.Double.formatToDisplay(label, 0);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tlabel = App.Fields.Double.formatToDisplay(label);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdefaultLabel += ' (' + label + ')';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdataset.titlesFormatted.push(defaultLabel);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Format tooltip titles to user number format and push this modification to titlesFormatted\n\t\t * it is better to parse tooltips at initialization phase than\n\t\t * in tooltip callback which is called after hover\n\t\t *\n\t\t * @param {object} data - data from request\n\t\t * @returns {undefined}\n\t\t */\n\t\tformatTooltipLabels: function formatTooltipTitles(data) {\n\t\t\tdata.datasets.forEach(dataset => {\n\t\t\t\tif (typeof dataset.dataFormatted === 'undefined') {\n\t\t\t\t\tdataset.dataFormatted = [];\n\t\t\t\t\tdataset.data.forEach((dataItem, index) => {\n\t\t\t\t\t\tlet dataFormatted = dataItem;\n\t\t\t\t\t\tif (String(dataItem).length > 0 && !isNaN(Number(dataItem))) {\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\ttypeof this.widgetData !== 'undefined' &&\n\t\t\t\t\t\t\t\ttypeof this.widgetData.valueType !== 'undefined' &&\n\t\t\t\t\t\t\t\tthis.widgetData.valueType === 'count'\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tdataFormatted = App.Fields.Double.formatToDisplay(dataItem, 0);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tdataFormatted = App.Fields.Double.formatToDisplay(dataItem);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdataset.dataFormatted.push(dataFormatted);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Same as mergeOptionsObject but in array ;)\n\t\t * @param  {Array} to\n\t\t * @param  {Array} fromArray\n\t\t * @return {Array}\n\t\t */\n\t\tmergeOptionsArray: function mergeOptionsArray(to, fromArray) {\n\t\t\tif (typeof to !== 'undefined') {\n\t\t\t\treturn to;\n\t\t\t}\n\t\t\tto = [];\n\t\t\tlet result = fromArray\n\t\t\t\t.map((from, index) => {\n\t\t\t\t\tif (Array.isArray(from) && !to.hasOwnProperty(key)) {\n\t\t\t\t\t\treturn this.mergeOptionsArray(to[index], from);\n\t\t\t\t\t}\n\t\t\t\t\tif (\n\t\t\t\t\t\ttypeof from === 'object' &&\n\t\t\t\t\t\tfrom !== null &&\n\t\t\t\t\t\t(typeof to[index] === 'undefined' || (typeof to[index] === 'object' && to[index] !== null))\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn this.mergeOptionsObject(to[index], from);\n\t\t\t\t\t}\n\t\t\t\t\treturn to[index];\n\t\t\t\t})\n\t\t\t\t.filter(item => typeof item !== 'undefined');\n\t\t\treturn result;\n\t\t},\n\t\t/**\n\t\t * Merge options object and do not override existing properties\n\t\t * @param  {Object} to   object to extend\n\t\t * @param  {Object} from copy properties from this object\n\t\t * @return {Object}      mixed properties\n\t\t */\n\t\tmergeOptionsObject: function mergeOptionsObject(to, from) {\n\t\t\tif (typeof to === 'undefined') {\n\t\t\t\tto = {};\n\t\t\t}\n\t\t\tfor (let key in from) {\n\t\t\t\tif (from.hasOwnProperty(key)) {\n\t\t\t\t\tif (Array.isArray(from[key])) {\n\t\t\t\t\t\tif (!to.hasOwnProperty(key)) {\n\t\t\t\t\t\t\tto[key] = this.mergeOptionsArray(undefined, from[key]);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (\n\t\t\t\t\t\ttypeof from[key] === 'object' &&\n\t\t\t\t\t\tfrom[key] !== null &&\n\t\t\t\t\t\t(!to.hasOwnProperty(key) || (typeof to[key] === 'object' && to[key] !== null && !Array.isArray(to[key])))\n\t\t\t\t\t) {\n\t\t\t\t\t\t// if property is an object - merge recursively\n\t\t\t\t\t\tto[key] = this.mergeOptionsObject(to[key], from[key]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (!to.hasOwnProperty(key)) {\n\t\t\t\t\t\t\tto[key] = from[key];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn to;\n\t\t},\n\t\t/**\n\t\t * Merge two objects with options and do not override existing properties\n\t\t *\n\t\t * @param  {Object} to\n\t\t * @param  {Array|arguments} fromArray\n\t\t * @return {object}\n\t\t */\n\t\tmergeOptions: function mergeOptions(to = {}, ...fromArray) {\n\t\t\tfor (let i = 0, len = fromArray.length; i < len; i++) {\n\t\t\t\tif (typeof fromArray[i] !== 'object' || Array.isArray(fromArray[i])) {\n\t\t\t\t\tapp.errorLog(\n\t\t\t\t\t\tnew Error(\n\t\t\t\t\t\t\t'Options argument should be an object! Chart subType: ' +\n\t\t\t\t\t\t\tthis.getSubType() +\n\t\t\t\t\t\t\t' [' +\n\t\t\t\t\t\t\tfromArray[i].toString() +\n\t\t\t\t\t\t\t']'\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tto = this.mergeOptionsObject(to, fromArray[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn to;\n\t\t},\n\t\t/**\n\t\t * Placeholder for individual chart type options\n\t\t * If you want to customize default options this is the right place - override this method in your class\n\t\t *\n\t\t * @param {object} chartData\n\t\t * @returns {object} chart options\n\t\t */\n\t\tgetBasicOptions: function getBasicOptions(chartData) {\n\t\t\treturn {\n\t\t\t\tresponsive: true,\n\t\t\t\tmaintainAspectRatio: false\n\t\t\t};\n\t\t},\n\t\t/**\n\t\t * Placeholder for individual chart type dataset options\n\t\t *\n\t\t * @param  {object} chartData\n\t\t * @return {Object} datalabels configurations\n\t\t */\n\t\tgetDatasetOptions: function getDatasetOptions(chartData) {\n\t\t\treturn {};\n\t\t},\n\t\t/**\n\t\t * Placeholder for individual chart type plugins\n\t\t * You can add custom plugins for individual charts by overriding this method\n\t\t * see: http://www.chartjs.org/docs/latest/developers/plugins.html\n\t\t *\n\t\t * @param {object} chartData\n\t\t * @returns {Array|undefined} plugins\n\t\t */\n\t\tgetPlugins: function getPlugins(chartData) {\n\t\t\t// do not return anything - undefined\n\t\t},\n\t\t/**\n\t\t * Get chart type\n\t\t * We don't wan't to override loadChart method (good practice)\n\t\t * so we can extend some chart type and change its type only to show data in different manner.\n\t\t * Get type is used to set up Chartjs chart type.\n\t\t *\n\t\t * @param {object} chartData\n\t\t * @returns {string}\n\t\t */\n\t\tgetType: function getType(chartData) {\n\t\t\treturn 'bar';\n\t\t},\n\t\t/**\n\t\t * Get sub type of a chart.\n\t\t * For example 'bar' is main type and barDivided is a subset of bar with little different options.\n\t\t * By default we are using standard type.\n\t\t * GetSubType is used to get properties - it does not set up Chartjs chart type per se (getType is used for this purpose)\n\t\t *\n\t\t * @param {object}  chartData\n\t\t * @returns {string}\n\t\t */\n\t\tgetSubType: function getSubType(chartData) {\n\t\t\treturn this.getType();\n\t\t}\n\t}\n);\nVtiger_Widget_Js('YetiForce_Widget_Js', {}, {});\nYetiForce_Widget_Js(\n\t'YetiForce_Bar_Widget_Js',\n\t{},\n\t{\n\t\tgetType: function getType() {\n\t\t\treturn 'bar';\n\t\t}\n\t}\n);\nYetiForce_Bar_Widget_Js(\n\t'YetiForce_BarStacked_Widget_Js',\n\t{},\n\t{\n\t\tgetSubType() {\n\t\t\treturn 'barStacked';\n\t\t}\n\t}\n);\nYetiForce_Bar_Widget_Js(\n\t'YetiForce_Horizontal_Widget_Js',\n\t{},\n\t{\n\t\tgetType: function () {\n\t\t\treturn 'horizontalBar';\n\t\t}\n\t}\n);\nYetiForce_Horizontal_Widget_Js(\n\t'YetiForce_HorizontalStacked_Widget_Js',\n\t{},\n\t{\n\t\tgetType: function () {\n\t\t\treturn 'horizontalBar';\n\t\t},\n\t\tgetSubType() {\n\t\t\treturn 'horizontalBarStacked';\n\t\t}\n\t}\n);\nYetiForce_Widget_Js(\n\t'YetiForce_Funnel_Widget_Js',\n\t{},\n\t{\n\t\tgetType: function getType() {\n\t\t\treturn 'funnel';\n\t\t}\n\t}\n);\nYetiForce_Widget_Js(\n\t'YetiForce_Pie_Widget_Js',\n\t{},\n\t{\n\t\tgetType: function getType() {\n\t\t\treturn 'pie';\n\t\t}\n\t}\n);\nYetiForce_Pie_Widget_Js(\n\t'YetiForce_PieDivided_Widget_Js',\n\t{},\n\t{\n\t\tgetSubType() {\n\t\t\treturn 'pieDivided';\n\t\t}\n\t}\n);\nYetiForce_Pie_Widget_Js(\n\t'YetiForce_Donut_Widget_Js',\n\t{},\n\t{\n\t\tgetType: function getType() {\n\t\t\treturn 'doughnut';\n\t\t}\n\t}\n);\nYetiForce_Donut_Widget_Js('YetiForce_Axis_Widget_Js', {}, {});\nYetiForce_Widget_Js(\n\t'YetiForce_BarDivided_Widget_Js',\n\t{},\n\t{\n\t\tgetType: function getType() {\n\t\t\treturn 'bar';\n\t\t},\n\t\tgetSubType: function getSubType() {\n\t\t\treturn 'barDivided';\n\t\t}\n\t}\n);\nYetiForce_Widget_Js(\n\t'YetiForce_Line_Widget_Js',\n\t{},\n\t{\n\t\tgetType: function getType() {\n\t\t\treturn 'line';\n\t\t}\n\t}\n);\nYetiForce_Line_Widget_Js(\n\t'YetiForce_LineStacked_Widget_Js',\n\t{},\n\t{\n\t\tgetType() {\n\t\t\treturn 'line';\n\t\t},\n\t\tgetSubType() {\n\t\t\treturn 'lineStacked';\n\t\t}\n\t}\n);\nYetiForce_Line_Widget_Js(\n\t'YetiForce_LinePlain_Widget_Js',\n\t{},\n\t{\n\t\tgetSubType: function getSubType() {\n\t\t\treturn 'linePlain';\n\t\t}\n\t}\n);\nYetiForce_LineStacked_Widget_Js(\n\t'YetiForce_LinePlainStacked_Widget_Js',\n\t{},\n\t{\n\t\tgetSubType() {\n\t\t\treturn 'linePlainStacked';\n\t\t}\n\t}\n);\nYetiForce_Bar_Widget_Js(\n\t'YetiForce_TicketsByStatus_Widget_Js',\n\t{},\n\t{\n\t\tgetBasicOptions: function () {\n\t\t\treturn {\n\t\t\t\tlegend: {\n\t\t\t\t\tdisplay: true\n\t\t\t\t},\n\t\t\t\tscales: {\n\t\t\t\t\txAxes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstacked: true\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\tyAxes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstacked: true\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t}\n);\nYetiForce_Widget_Js(\n\t'YetiForce_Calendar_Widget_Js',\n\t{},\n\t{\n\t\tcalendarView: false,\n\t\tcalendarCreateView: false,\n\n\t\tregisterCalendar: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar userDefaultActivityView = 'month';\n\t\t\tvar container = thisInstance.getContainer();\n\t\t\t//Default time format\n\t\t\tvar userDefaultTimeFormat = CONFIG.hourFormat;\n\t\t\tif (userDefaultTimeFormat == 24) {\n\t\t\t\tuserDefaultTimeFormat = 'H(:mm)';\n\t\t\t} else {\n\t\t\t\tuserDefaultTimeFormat = 'h(:mm) A';\n\t\t\t}\n\n\t\t\t//Default first day of the week\n\t\t\tvar convertedFirstDay = CONFIG.firstDayOfWeekNo;\n\t\t\t//Default first hour of the day\n\t\t\tvar defaultFirstHour = app.getMainParams('startHour');\n\t\t\tvar explodedTime = defaultFirstHour.split(':');\n\t\t\tdefaultFirstHour = explodedTime['0'];\n\t\t\tvar defaultDate = app.getMainParams('defaultDate');\n\t\t\tif (this.paramCache && defaultDate != moment().format('YYYY-MM-DD')) {\n\t\t\t\tdefaultDate = moment(defaultDate).format('D') == 1 ? moment(defaultDate) : moment(defaultDate).add(1, 'M');\n\t\t\t}\n\t\t\tcontainer.find('.js-widget-quick-create').on('click', function (e) {\n\t\t\t\tVtiger_Header_Js.getInstance().quickCreateModule($(this).data('module-name'));\n\t\t\t});\n\t\t\tthisInstance.getCalendarView().fullCalendar({\n\t\t\t\theader: {\n\t\t\t\t\tleft: ' ',\n\t\t\t\t\tcenter: 'prev title next',\n\t\t\t\t\tright: ' '\n\t\t\t\t},\n\t\t\t\tdefaultDate: defaultDate,\n\t\t\t\ttimeFormat: userDefaultTimeFormat,\n\t\t\t\taxisFormat: userDefaultTimeFormat,\n\t\t\t\tfirstHour: defaultFirstHour,\n\t\t\t\tfirstDay: convertedFirstDay,\n\t\t\t\tdefaultView: userDefaultActivityView,\n\t\t\t\teditable: false,\n\t\t\t\tslotMinutes: 15,\n\t\t\t\ttheme: false,\n\t\t\t\tdefaultEventMinutes: 0,\n\t\t\t\teventLimit: true,\n\t\t\t\tallDaySlot: false,\n\t\t\t\tmonthNames: [\n\t\t\t\t\tapp.vtranslate('JS_JANUARY'),\n\t\t\t\t\tapp.vtranslate('JS_FEBRUARY'),\n\t\t\t\t\tapp.vtranslate('JS_MARCH'),\n\t\t\t\t\tapp.vtranslate('JS_APRIL'),\n\t\t\t\t\tapp.vtranslate('JS_MAY'),\n\t\t\t\t\tapp.vtranslate('JS_JUNE'),\n\t\t\t\t\tapp.vtranslate('JS_JULY'),\n\t\t\t\t\tapp.vtranslate('JS_AUGUST'),\n\t\t\t\t\tapp.vtranslate('JS_SEPTEMBER'),\n\t\t\t\t\tapp.vtranslate('JS_OCTOBER'),\n\t\t\t\t\tapp.vtranslate('JS_NOVEMBER'),\n\t\t\t\t\tapp.vtranslate('JS_DECEMBER')\n\t\t\t\t],\n\t\t\t\tmonthNamesShort: [\n\t\t\t\t\tapp.vtranslate('JS_JAN'),\n\t\t\t\t\tapp.vtranslate('JS_FEB'),\n\t\t\t\t\tapp.vtranslate('JS_MAR'),\n\t\t\t\t\tapp.vtranslate('JS_APR'),\n\t\t\t\t\tapp.vtranslate('JS_MAY'),\n\t\t\t\t\tapp.vtranslate('JS_JUN'),\n\t\t\t\t\tapp.vtranslate('JS_JUL'),\n\t\t\t\t\tapp.vtranslate('JS_AUG'),\n\t\t\t\t\tapp.vtranslate('JS_SEP'),\n\t\t\t\t\tapp.vtranslate('JS_OCT'),\n\t\t\t\t\tapp.vtranslate('JS_NOV'),\n\t\t\t\t\tapp.vtranslate('JS_DEC')\n\t\t\t\t],\n\t\t\t\tdayNames: [\n\t\t\t\t\tapp.vtranslate('JS_SUNDAY'),\n\t\t\t\t\tapp.vtranslate('JS_MONDAY'),\n\t\t\t\t\tapp.vtranslate('JS_TUESDAY'),\n\t\t\t\t\tapp.vtranslate('JS_WEDNESDAY'),\n\t\t\t\t\tapp.vtranslate('JS_THURSDAY'),\n\t\t\t\t\tapp.vtranslate('JS_FRIDAY'),\n\t\t\t\t\tapp.vtranslate('JS_SATURDAY')\n\t\t\t\t],\n\t\t\t\tdayNamesShort: [\n\t\t\t\t\tapp.vtranslate('JS_SUN'),\n\t\t\t\t\tapp.vtranslate('JS_MON'),\n\t\t\t\t\tapp.vtranslate('JS_TUE'),\n\t\t\t\t\tapp.vtranslate('JS_WED'),\n\t\t\t\t\tapp.vtranslate('JS_THU'),\n\t\t\t\t\tapp.vtranslate('JS_FRI'),\n\t\t\t\t\tapp.vtranslate('JS_SAT')\n\t\t\t\t],\n\t\t\t\tbuttonText: {\n\t\t\t\t\ttoday: app.vtranslate('JS_TODAY'),\n\t\t\t\t\tmonth: app.vtranslate('JS_MONTH'),\n\t\t\t\t\tweek: app.vtranslate('JS_WEEK'),\n\t\t\t\t\tday: app.vtranslate('JS_DAY')\n\t\t\t\t},\n\t\t\t\tallDayText: app.vtranslate('JS_ALL_DAY'),\n\t\t\t\teventLimitText: app.vtranslate('JS_MORE'),\n\t\t\t\teventRender: function (event, element, view) {\n\t\t\t\t\telement = '<div class=\"cell-calendar\">';\n\t\t\t\t\tfor (var key in event.event) {\n\t\t\t\t\t\telement +=\n\t\t\t\t\t\t\t'<a class=\"\" href=\"javascript:;\"' +\n\t\t\t\t\t\t\t' data-date=\"' +\n\t\t\t\t\t\t\tevent.date +\n\t\t\t\t\t\t\t'\"' +\n\t\t\t\t\t\t\t' data-type=\"' +\n\t\t\t\t\t\t\tkey +\n\t\t\t\t\t\t\t'\" title=\"' +\n\t\t\t\t\t\t\tevent.event[key].label +\n\t\t\t\t\t\t\t'\">' +\n\t\t\t\t\t\t\t'<span class=\"' +\n\t\t\t\t\t\t\tevent.event[key].className +\n\t\t\t\t\t\t\t(event.width <= 20 ? ' small-badge' : '') +\n\t\t\t\t\t\t\t(event.width >= 24 ? ' big-badge' : '') +\n\t\t\t\t\t\t\t' badge badge-secondary u-font-size-95per\">' +\n\t\t\t\t\t\t\tevent.event[key].count +\n\t\t\t\t\t\t\t'</span>' +\n\t\t\t\t\t\t\t'</a>\\n';\n\t\t\t\t\t}\n\t\t\t\t\telement += '</div>';\n\t\t\t\t\treturn element;\n\t\t\t\t}\n\t\t\t});\n\t\t\tthisInstance\n\t\t\t\t.getCalendarView()\n\t\t\t\t.find('td.fc-day-top')\n\t\t\t\t.on('mouseenter', function () {\n\t\t\t\t\tjQuery('<span class=\"plus pull-left fas fa-plus\"></span>').prependTo($(this));\n\t\t\t\t})\n\t\t\t\t.on('mouseleave', function () {\n\t\t\t\t\t$(this)\n\t\t\t\t\t\t.find('.plus')\n\t\t\t\t\t\t.remove();\n\t\t\t\t});\n\t\t\tlet formatDate = CONFIG.dateFormat.toUpperCase();\n\t\t\tthisInstance\n\t\t\t\t.getCalendarView()\n\t\t\t\t.find('td.fc-day-top')\n\t\t\t\t.on('click', function () {\n\t\t\t\t\tlet date = moment($(this).data('date')).format(formatDate);\n\t\t\t\t\tlet params = {\n\t\t\t\t\t\tnoCache: true,\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tdate_start: date,\n\t\t\t\t\t\t\tdue_date: date\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\tparams.callbackFunction = function () {\n\t\t\t\t\t\tthisInstance\n\t\t\t\t\t\t\t.getCalendarView()\n\t\t\t\t\t\t\t.closest('.dashboardWidget')\n\t\t\t\t\t\t\t.find('a[name=\"drefresh\"]')\n\t\t\t\t\t\t\t.trigger('click');\n\t\t\t\t\t};\n\t\t\t\t\tVtiger_Header_Js.getInstance().quickCreateModule('Calendar', params);\n\t\t\t\t});\n\t\t\tvar switchBtn = container.find('.js-switch--calendar');\n\t\t\tswitchBtn.on('change', e => {\n\t\t\t\tconst currentTarget = $(e.currentTarget);\n\t\t\t\tif (typeof currentTarget.data('on-text') !== 'undefined') container.find('.widgetFilterSwitch').val('current');\n\t\t\t\telse if (typeof currentTarget.data('off-text') !== 'undefined')\n\t\t\t\t\tcontainer.find('.widgetFilterSwitch').val('history');\n\t\t\t\tthis.refreshWidget();\n\t\t\t});\n\t\t},\n\t\tloadCalendarData: function (allEvents) {\n\t\t\tvar thisInstance = this;\n\t\t\tthisInstance.getCalendarView().fullCalendar('removeEvents');\n\t\t\tvar view = thisInstance.getCalendarView().fullCalendar('getView');\n\t\t\tvar formatDate = CONFIG.dateFormat.toUpperCase();\n\t\t\tvar start_date = view.start.format(formatDate);\n\t\t\tvar end_date = view.end.format(formatDate);\n\t\t\tvar parent = thisInstance.getContainer();\n\t\t\tvar user = parent.find('.owner').val();\n\t\t\tif (user == 'all') {\n\t\t\t\tuser = '';\n\t\t\t}\n\t\t\tvar params = {\n\t\t\t\tmodule: 'Calendar',\n\t\t\t\taction: 'Calendar',\n\t\t\t\tmode: 'getEvents',\n\t\t\t\tstart: start_date,\n\t\t\t\tend: end_date,\n\t\t\t\tuser: user,\n\t\t\t\twidget: true\n\t\t\t};\n\t\t\tif (parent.find('.customFilter').length > 0) {\n\t\t\t\tvar customFilter = parent.find('.customFilter').val();\n\t\t\t\tparams.customFilter = customFilter;\n\t\t\t}\n\t\t\tif (parent.find('.widgetFilterSwitch').length > 0) {\n\t\t\t\tparams.time = parent.find('.widgetFilterSwitch').val();\n\t\t\t}\n\t\t\tif (this.paramCache) {\n\t\t\t\tvar drefresh = this.getContainer().find('a[name=\"drefresh\"]');\n\t\t\t\tvar url = drefresh.data('url');\n\t\t\t\tvar paramCache = {\n\t\t\t\t\towner: user,\n\t\t\t\t\tcustomFilter: customFilter,\n\t\t\t\t\tstart: start_date\n\t\t\t\t};\n\t\t\t\tthisInstance.setFilterToCache(url, paramCache);\n\t\t\t}\n\t\t\tAppConnector.request(params).done(function (events) {\n\t\t\t\tvar height =\n\t\t\t\t\tthisInstance\n\t\t\t\t\t\t.getCalendarView()\n\t\t\t\t\t\t.find('.fc-bg :first')\n\t\t\t\t\t\t.height() -\n\t\t\t\t\tthisInstance\n\t\t\t\t\t\t.getCalendarView()\n\t\t\t\t\t\t.find('.fc-day-number')\n\t\t\t\t\t\t.height() -\n\t\t\t\t\t10;\n\t\t\t\tvar width =\n\t\t\t\t\tthisInstance\n\t\t\t\t\t\t.getCalendarView()\n\t\t\t\t\t\t.find('.fc-day-number')\n\t\t\t\t\t\t.width() /\n\t\t\t\t\t2 -\n\t\t\t\t\t10;\n\t\t\t\tfor (var i in events.result) {\n\t\t\t\t\tevents.result[i]['width'] = width;\n\t\t\t\t\tevents.result[i]['height'] = height;\n\t\t\t\t}\n\t\t\t\tthisInstance.getCalendarView().fullCalendar('addEventSource', events.result);\n\t\t\t\tthisInstance\n\t\t\t\t\t.getCalendarView()\n\t\t\t\t\t.find('.cell-calendar a')\n\t\t\t\t\t.on('click', function () {\n\t\t\t\t\t\tvar container = thisInstance.getContainer();\n\t\t\t\t\t\tvar url = 'index.php?module=Calendar&view=List';\n\t\t\t\t\t\tif (customFilter) {\n\t\t\t\t\t\t\turl += '&viewname=' + container.find('select.widgetFilter.customFilter').val();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\turl += '&viewname=All';\n\t\t\t\t\t\t}\n\t\t\t\t\t\turl += '&search_params=[[';\n\t\t\t\t\t\tvar owner = container.find('.widgetFilter.owner option:selected');\n\t\t\t\t\t\tif (owner.val() != 'all') {\n\t\t\t\t\t\t\turl += '[\"assigned_user_id\",\"e\",\"' + owner.val() + '\"],';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (parent.find('.widgetFilterSwitch').length > 0) {\n\t\t\t\t\t\t\tvar status = parent.find('.widgetFilterSwitch').data();\n\t\t\t\t\t\t\turl += '[\"activitystatus\",\"e\",\"' + status[params.time] + '\"],';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar date = moment($(this).data('date')).format(thisInstance.getUserDateFormat().toUpperCase());\n\t\t\t\t\t\twindow.location.href =\n\t\t\t\t\t\t\turl +\n\t\t\t\t\t\t\t'[\"activitytype\",\"e\",\"' +\n\t\t\t\t\t\t\t$(this).data('type') +\n\t\t\t\t\t\t\t'\"],[\"date_start\",\"bw\",\"' +\n\t\t\t\t\t\t\tdate +\n\t\t\t\t\t\t\t',' +\n\t\t\t\t\t\t\tdate +\n\t\t\t\t\t\t\t'\"]]]';\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tgetCalendarView: function () {\n\t\t\tif (this.calendarView == false) {\n\t\t\t\tthis.calendarView = this.getContainer().find('.js-calendar__container');\n\t\t\t}\n\t\t\treturn this.calendarView;\n\t\t},\n\t\tgetMonthName: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar month = thisInstance\n\t\t\t\t.getCalendarView()\n\t\t\t\t.find('.fc-toolbar h2')\n\t\t\t\t.text();\n\t\t\tif (month) {\n\t\t\t\tthis.getContainer()\n\t\t\t\t\t.find('.headerCalendar .month')\n\t\t\t\t\t.html('<h3>' + month + '</h3>');\n\t\t\t}\n\t\t},\n\t\tregisterChangeView: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar container = this.getContainer();\n\t\t\tcontainer.find('.fc-toolbar').addClass('d-none');\n\t\t\tvar month = container.find('.fc-toolbar h2').text();\n\t\t\tif (month) {\n\t\t\t\tcontainer\n\t\t\t\t\t.find('.headerCalendar')\n\t\t\t\t\t.removeClass('d-none')\n\t\t\t\t\t.find('.month')\n\t\t\t\t\t.append('<h3>' + month + '</h3>');\n\t\t\t\tvar button = container.find('.headerCalendar button');\n\t\t\t\tbutton.each(function () {\n\t\t\t\t\tvar tag = jQuery(this).data('type');\n\t\t\t\t\tjQuery(this).on('click', function () {\n\t\t\t\t\t\tthisInstance\n\t\t\t\t\t\t\t.getCalendarView()\n\t\t\t\t\t\t\t.find('.fc-toolbar .' + tag)\n\t\t\t\t\t\t\t.trigger('click');\n\t\t\t\t\t\tthisInstance.loadCalendarData();\n\t\t\t\t\t\tthisInstance.getMonthName();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tpostLoadWidget: function () {\n\t\t\tthis.registerCalendar();\n\t\t\tthis.loadCalendarData(true);\n\t\t\tthis.registerChangeView();\n\t\t\tthis.registerFilterChangeEvent();\n\t\t},\n\t\trefreshWidget: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar refreshContainer = this.getContainer().find('.dashboardWidgetContent');\n\t\t\trefreshContainer.progressIndicator();\n\t\t\tthisInstance.loadCalendarData();\n\t\t\trefreshContainer.progressIndicator({\n\t\t\t\tmode: 'hide'\n\t\t\t});\n\t\t}\n\t}\n);\nYetiForce_Widget_Js(\n\t'YetiForce_CalendarActivities_Widget_Js',\n\t{},\n\t{\n\t\tmodalView: false,\n\t\tpostLoadWidget: function () {\n\t\t\tthis._super();\n\t\t\tthis.registerActivityChange();\n\t\t\tthis.registerListViewButton();\n\t\t},\n\t\tpostRefreshWidget: function () {\n\t\t\tthis._super();\n\t\t\tthis.registerActivityChange();\n\t\t},\n\t\tregisterActivityChange: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar refreshContainer = this.getContainer().find('.dashboardWidgetContent');\n\t\t\trefreshContainer.find('.changeActivity').on('click', function (e) {\n\t\t\t\tif (jQuery(e.target).is('a') || thisInstance.modalView) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tvar url = jQuery(this).data('url');\n\t\t\t\tif (typeof url !== 'undefined') {\n\t\t\t\t\tvar callbackFunction = function () {\n\t\t\t\t\t\tthisInstance.modalView = false;\n\t\t\t\t\t};\n\t\t\t\t\tthisInstance.modalView = true;\n\t\t\t\t\tapp.showModalWindow(null, url, callbackFunction);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tregisterListViewButton: function () {\n\t\t\tconst thisInstance = this,\n\t\t\t\tcontainer = thisInstance.getContainer();\n\t\t\tcontainer.find('.goToListView').on('click', function () {\n\t\t\t\tlet status;\n\t\t\t\tlet activitiesStatus = container.data('name');\n\t\t\t\tif (activitiesStatus === 'OverdueActivities') {\n\t\t\t\t\tstatus = 'PLL_OVERDUE';\n\t\t\t\t} else if (activitiesStatus === 'CalendarActivities') {\n\t\t\t\t\tstatus = 'PLL_IN_REALIZATION##PLL_PLANNED';\n\t\t\t\t} else {\n\t\t\t\t\tstatus = 'PLL_IN_REALIZATION##PLL_PLANNED##PLL_OVERDUE';\n\t\t\t\t}\n\t\t\t\tlet url = 'index.php?module=Calendar&view=List&viewname=All';\n\t\t\t\turl += '&search_params=[[';\n\t\t\t\tlet owner = container.find('.widgetFilter.owner option:selected');\n\t\t\t\tif (owner.val() !== 'all') {\n\t\t\t\t\turl += '[\"assigned_user_id\",\"e\",\"' + owner.val() + '\"],';\n\t\t\t\t}\n\t\t\t\turl += '[\"activitystatus\",\"e\",\"' + encodeURIComponent(status) + '\"]]]';\n\t\t\t\twindow.location.href = url;\n\t\t\t});\n\t\t}\n\t}\n);\nYetiForce_CalendarActivities_Widget_Js('YetiForce_CreatedNotMineActivities_Widget_Js', {}, {});\nYetiForce_CalendarActivities_Widget_Js('YetiForce_CreatedNotMineOverdueActivities_Widget_Js', {}, {});\nYetiForce_CalendarActivities_Widget_Js('YetiForce_OverDueActivities_Widget_Js', {}, {});\nYetiForce_CalendarActivities_Widget_Js('YetiForce_OverdueActivities_Widget_Js', {}, {});\nYetiForce_Widget_Js(\n\t'YetiForce_ProductsSoldToRenew_Widget_Js',\n\t{},\n\t{\n\t\tmodalView: false,\n\t\tpostLoadWidget: function () {\n\t\t\tthis._super();\n\t\t\tthis.registerAction();\n\t\t\tthis.registerListViewButton();\n\t\t},\n\t\tpostRefreshWidget: function () {\n\t\t\tthis._super();\n\t\t\tthis.registerAction();\n\t\t},\n\t\tregisterAction: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar refreshContainer = this.getContainer().find('.dashboardWidgetContent');\n\t\t\trefreshContainer.find('.rowAction').on('click', function (e) {\n\t\t\t\tif (jQuery(e.target).is('a') || thisInstance.modalView) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tvar url = jQuery(this).data('url');\n\t\t\t\tif (typeof url !== 'undefined') {\n\t\t\t\t\tvar callbackFunction = function () {\n\t\t\t\t\t\tthisInstance.modalView = false;\n\t\t\t\t\t};\n\t\t\t\t\tthisInstance.modalView = true;\n\t\t\t\t\tapp.showModalWindow(null, url, callbackFunction);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterListViewButton: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar container = thisInstance.getContainer();\n\t\t\tcontainer.on('click', '.goToListView', function () {\n\t\t\t\tvar url = jQuery(this).data('url');\n\t\t\t\tvar orderBy = container.find('.orderby');\n\t\t\t\tvar sortOrder = container.find('.changeRecordSort');\n\t\t\t\tif (orderBy.length) {\n\t\t\t\t\turl += '&orderby=' + orderBy.val();\n\t\t\t\t}\n\t\t\t\tif (sortOrder.length) {\n\t\t\t\t\turl += '&sortorder=' + sortOrder.data('sort').toUpperCase();\n\t\t\t\t}\n\t\t\t\twindow.location.href = url;\n\t\t\t});\n\t\t}\n\t}\n);\nYetiForce_ProductsSoldToRenew_Widget_Js('YetiForce_ServicesSoldToRenew_Widget_Js', {}, {});\nYetiForce_Bar_Widget_Js(\n\t'YetiForce_AllTimeControl_Widget_Js',\n\t{},\n\t{\n\t\tgetBasicOptions: function getBasicOptions() {\n\t\t\treturn {\n\t\t\t\tlegend: {\n\t\t\t\t\tdisplay: true\n\t\t\t\t},\n\t\t\t\tscales: {\n\t\t\t\t\tyAxes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstacked: true,\n\t\t\t\t\t\t\tticks: {\n\t\t\t\t\t\t\t\tcallback: function formatYAxisTick(value, index, values) {\n\t\t\t\t\t\t\t\t\treturn app.formatToHourText(value, 'short', false, false);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\txAxes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstacked: true,\n\t\t\t\t\t\t\tticks: {\n\t\t\t\t\t\t\t\tminRotation: 0\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\ttooltips: {\n\t\t\t\t\tcallbacks: {\n\t\t\t\t\t\tlabel: function (tooltipItem, data) {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\tdata.datasets[tooltipItem.datasetIndex].original_label + ': ' + app.formatToHourText(tooltipItem.yLabel)\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttitle: function (tooltipItems, data) {\n\t\t\t\t\t\t\treturn data.fullLabels[tooltipItems[0].index];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\tgetDatasetOptions: function getDatasetOptions(dataset, type, datasetIndex) {\n\t\t\treturn {\n\t\t\t\tdatalabels: {\n\t\t\t\t\tformatter: function datalabelsFormatter(value, context) {\n\t\t\t\t\t\treturn app.formatToHourText(value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t}\n);\nYetiForce_Bar_Widget_Js('YetiForce_LeadsBySource_Widget_Js', {}, {});\nYetiForce_Pie_Widget_Js('YetiForce_ClosedTicketsByPriority_Widget_Js', {}, {});\nYetiForce_Bar_Widget_Js('YetiForce_ClosedTicketsByUser_Widget_Js', {}, {});\nYetiForce_Bar_Widget_Js('YetiForce_OpenTickets_Widget_Js', {}, {});\nYetiForce_Bar_Widget_Js('YetiForce_AccountsByIndustry_Widget_Js', {}, {});\nYetiForce_Funnel_Widget_Js(\n\t'YetiForce_EstimatedvalueByStatus_Widget_Js',\n\t{},\n\t{\n\t\tgetBasicOptions: function getBasicOptions() {\n\t\t\treturn {\n\t\t\t\tsort: 'data-desc'\n\t\t\t};\n\t\t},\n\t\tgetPlugins: function getPlugins() {\n\t\t\treturn [];\n\t\t}\n\t}\n);\nYetiForce_Bar_Widget_Js('YetiForce_NotificationsBySender_Widget_Js', {}, {});\nYetiForce_Bar_Widget_Js('YetiForce_NotificationsByRecipient_Widget_Js', {}, {});\nYetiForce_Bar_Widget_Js(\n\t'YetiForce_TeamsEstimatedSales_Widget_Js',\n\t{},\n\t{\n\t\tgenerateChartData: function () {\n\t\t\tconst thisInstance = this,\n\t\t\t\tcontainer = this.getContainer(),\n\t\t\t\tjData = container.find('.widgetData').val(),\n\t\t\t\tdata = JSON.parse(jData);\n\t\t\tlet chartData = [[], [], [], []],\n\t\t\t\tyMaxValue,\n\t\t\t\tindex,\n\t\t\t\tparseData;\n\t\t\tif (data.hasOwnProperty('compare')) {\n\t\t\t\tfor (index in data) {\n\t\t\t\t\tparseData = thisInstance.parseChartData(data[index], chartData);\n\t\t\t\t\tchartData[0].push(parseData[0]);\n\t\t\t\t\tchartData[3].push(parseData[3]);\n\t\t\t\t\tchartData = [chartData[0], parseData[1], parseData[2], chartData[3], ['#CC6600', '#208CB3']];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tparseData = thisInstance.parseChartData(data, chartData);\n\t\t\t\tchartData = [[parseData[0]], parseData[1], parseData[2], [parseData[3]], ['#208CB3']];\n\t\t\t}\n\t\t\tyMaxValue = chartData[1];\n\t\t\tyMaxValue = yMaxValue + 2 + (yMaxValue / 100) * 25;\n\t\t\treturn {\n\t\t\t\tchartData: chartData[0],\n\t\t\t\tyMaxValue: yMaxValue,\n\t\t\t\tlabels: chartData[2],\n\t\t\t\tdata_labels: chartData[3],\n\t\t\t\tplacement: 'inside',\n\t\t\t\tlocation: 'n',\n\t\t\t\tcolors: chartData[4]\n\t\t\t};\n\t\t},\n\t\tparseChartData: function (data, chartDataGlobal) {\n\t\t\tvar chartData = [];\n\t\t\tvar xLabels = [];\n\t\t\tvar sum = 0;\n\t\t\tfor (var index in data) {\n\t\t\t\tvar row = data[index];\n\t\t\t\trow[0] = parseInt(row[0]);\n\t\t\t\tsum += row[0];\n\t\t\t\txLabels.push(app.getDecodedValue(row[1]));\n\t\t\t\tchartData.push(row[0]);\n\t\t\t\tif (parseInt(row[0]) > chartDataGlobal[1]) {\n\t\t\t\t\tchartDataGlobal[1] = parseInt(row[0]);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn [chartData, chartDataGlobal[1], xLabels, '&nbsp; \\u03A3 ' + sum + '&nbsp;'];\n\t\t},\n\t\tregisterSectionClick: function () {\n\t\t\tconst container = this.getContainer(),\n\t\t\t\tdata = container.find('.widgetData').val(),\n\t\t\t\tdataInfo = JSON.parse(data),\n\t\t\t\tcompare = dataInfo && dataInfo.hasOwnProperty('compare');\n\t\t\tlet url;\n\t\t\tthis.getContainer()\n\t\t\t\t.off('jqplotDataClick')\n\t\t\t\t.on('jqplotDataClick', function (ev, seriesIndex, pointIndex, args) {\n\t\t\t\t\tif (seriesIndex) {\n\t\t\t\t\t\turl = dataInfo['compare'][pointIndex][2];\n\t\t\t\t\t} else if (compare) {\n\t\t\t\t\t\turl = dataInfo[0][pointIndex][2];\n\t\t\t\t\t} else {\n\t\t\t\t\t\turl = dataInfo[pointIndex][2];\n\t\t\t\t\t}\n\t\t\t\t\twindow.location.href = url;\n\t\t\t\t});\n\t\t}\n\t}\n);\nYetiForce_TeamsEstimatedSales_Widget_Js('YetiForce_ActualSalesOfTeam_Widget_Js', {}, {});\nYetiForce_Widget_Js(\n\t'YetiForce_History_Widget_Js',\n\t{},\n\t{\n\t\tpostLoadWidget: function () {\n\t\t\tthis._super();\n\t\t\tthis.registerLoadMore();\n\t\t},\n\t\tpostRefreshWidget: function () {\n\t\t\tthis._super();\n\t\t\tthis.registerLoadMore();\n\t\t},\n\t\tregisterLoadMore: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar parent = thisInstance.getContainer();\n\t\t\tvar contentContainer = parent.find('.dashboardWidgetContent');\n\t\t\tvar loadMoreHandler = contentContainer.find('.load-more');\n\t\t\tloadMoreHandler.on('click', function () {\n\t\t\t\tvar parent = thisInstance.getContainer();\n\t\t\t\tvar element = parent.find('a[name=\"drefresh\"]');\n\t\t\t\tvar url = element.data('url');\n\t\t\t\tvar params = url;\n\t\t\t\tvar widgetFilters = parent.find('.widgetFilter');\n\t\t\t\tif (widgetFilters.length > 0) {\n\t\t\t\t\tparams = {\n\t\t\t\t\t\turl: url,\n\t\t\t\t\t\tdata: {}\n\t\t\t\t\t};\n\t\t\t\t\twidgetFilters.each(function (index, domElement) {\n\t\t\t\t\t\tvar widgetFilter = jQuery(domElement);\n\t\t\t\t\t\tvar filterName = widgetFilter.attr('name');\n\t\t\t\t\t\tvar filterValue = widgetFilter.val();\n\t\t\t\t\t\tparams.data[filterName] = filterValue;\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tvar filterData = thisInstance.getFilterData();\n\t\t\t\tif (!jQuery.isEmptyObject(filterData)) {\n\t\t\t\t\tif (typeof params == 'string') {\n\t\t\t\t\t\tparams = {\n\t\t\t\t\t\t\turl: url,\n\t\t\t\t\t\t\tdata: {}\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\tparams.data = jQuery.extend(params.data, thisInstance.getFilterData());\n\t\t\t\t}\n\n\t\t\t\t// Next page.\n\t\t\t\tparams.data['page'] = loadMoreHandler.data('nextpage');\n\t\t\t\tvar refreshContainer = parent.find('.dashboardWidgetContent');\n\t\t\t\trefreshContainer.progressIndicator();\n\t\t\t\tAppConnector.request(params)\n\t\t\t\t\t.done(function (data) {\n\t\t\t\t\t\trefreshContainer.progressIndicator({\n\t\t\t\t\t\t\tmode: 'hide'\n\t\t\t\t\t\t});\n\t\t\t\t\t\tloadMoreHandler.replaceWith(data);\n\t\t\t\t\t\tthisInstance.registerLoadMore();\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function () {\n\t\t\t\t\t\trefreshContainer.progressIndicator({\n\t\t\t\t\t\t\tmode: 'hide'\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n);\nYetiForce_Widget_Js(\n\t'YetiForce_MiniList_Widget_Js',\n\t{},\n\t{\n\t\tpostLoadWidget: function () {\n\t\t\tapp.hideModalWindow();\n\t\t\tthis.restrictContentDrag();\n\t\t\tthis.registerFilter();\n\t\t\tthis.registerFilterChangeEvent();\n\t\t\tthis.registerRecordsCount();\n\t\t},\n\t\tpostRefreshWidget: function () {\n\t\t\tthis.registerRecordsCount();\n\t\t}\n\t}\n);\nYetiForce_Widget_Js(\n\t'YetiForce_Notebook_Widget_Js',\n\t{},\n\t{\n\t\t// Override widget specific functions.\n\t\tpostLoadWidget: function () {\n\t\t\tthis.registerNotebookEvents();\n\t\t},\n\t\tregisterNotebookEvents: function () {\n\t\t\tthis.container.on('click', '.dashboard_notebookWidget_edit', () => {\n\t\t\t\tthis.editNotebookContent();\n\t\t\t});\n\t\t\tthis.container.on('click', '.dashboard_notebookWidget_save', () => {\n\t\t\t\tthis.saveNotebookContent();\n\t\t\t});\n\t\t},\n\t\teditNotebookContent: function () {\n\t\t\t$('.dashboard_notebookWidget_text', this.container).show();\n\t\t\t$('.dashboard_notebookWidget_view', this.container).hide();\n\t\t},\n\t\tsaveNotebookContent: function () {\n\t\t\tlet textarea = $('.dashboard_notebookWidget_textarea', this.container),\n\t\t\t\turl = this.container.data('url'),\n\t\t\t\tparams = url + '&content=true&mode=save&contents=' + encodeURIComponent(textarea.val()),\n\t\t\t\trefreshContainer = this.container.find('.dashboardWidgetContent');\n\t\t\trefreshContainer.progressIndicator();\n\t\t\tAppConnector.request(params).done(data => {\n\t\t\t\trefreshContainer.progressIndicator({\n\t\t\t\t\tmode: 'hide'\n\t\t\t\t});\n\t\t\t\t$('.dashboardWidgetContent', this.container).html(data);\n\t\t\t});\n\t\t}\n\t}\n);\nYetiForce_Widget_Js(\n\t'YetiForce_KpiBar_Widget_Js',\n\t{},\n\t{\n\t\tgenerateChartData: function () {\n\t\t\tvar container = this.getContainer();\n\t\t\tvar jData = container.find('.widgetData').val();\n\t\t\tvar data = JSON.parse(jData);\n\t\t\tvar chartData = [];\n\t\t\tvar xLabels = [];\n\t\t\tvar yMaxValue = 0;\n\t\t\treturn {\n\t\t\t\tchartData: [[[data['result'], data['all']]]],\n\t\t\t\tyMaxValue: data['maxValue'],\n\t\t\t\tlabels: ''\n\t\t\t};\n\t\t},\n\t\tloadChart: function () {\n\t\t\tvar data = this.generateChartData();\n\t\t\tthis.getChartContainer(false).jqplot(data['chartData'], {\n\t\t\t\tanimate: !$.jqplot.use_excanvas,\n\t\t\t\tseriesDefaults: {\n\t\t\t\t\trenderer: jQuery.jqplot.BarRenderer,\n\t\t\t\t\trendererOptions: {\n\t\t\t\t\t\tshowDataLabels: true,\n\t\t\t\t\t\tdataLabels: 'value',\n\t\t\t\t\t\tbarDirection: 'horizontal'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\taxes: {\n\t\t\t\t\txaxis: {\n\t\t\t\t\t\tmin: 0,\n\t\t\t\t\t\tmax: data['yMaxValue']\n\t\t\t\t\t},\n\t\t\t\t\tyaxis: {\n\t\t\t\t\t\trenderer: jQuery.jqplot.CategoryAxisRenderer\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n);\nYetiForce_Widget_Js(\n\t'YetiForce_ChartFilter_Widget_Js',\n\t{},\n\t{\n\t\tchartfilterInstance: false,\n\t\tinit: function (container, reload, widgetClassName) {\n\t\t\tthis.setContainer(jQuery(container));\n\t\t\tlet chartClassName = container.find('[name=\"typeChart\"]').val();\n\t\t\tconst stacked = !!Number(container.find('[name=\"stacked\"]').val());\n\t\t\tif (stacked) {\n\t\t\t\tchartClassName += 'Stacked';\n\t\t\t}\n\t\t\tthis.chartfilterInstance = YetiForce_Widget_Js.getInstance(container, chartClassName);\n\t\t\tif (this.chartfilterInstance) {\n\t\t\t\tconst filterIdsStr = container.find('[name=\"filterIds\"]').val();\n\t\t\t\tif (filterIdsStr) {\n\t\t\t\t\tthis.chartfilterInstance.filterIds = JSON.parse(filterIdsStr);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.registerRecordsCount();\n\t\t\tthis.registerCache(container);\n\t\t}\n\t}\n);\nYetiForce_Widget_Js(\n\t'YetiForce_Multifilter_Widget_Js',\n\t{},\n\t{\n\t\tmultifilterControlsView: false,\n\t\tmultifilterContentView: false,\n\t\tmultifilterSettingsView: false,\n\t\tregisterMultifilter() {\n\t\t\tlet selectValue = app.cacheGet('multifilterSelectValue', null),\n\t\t\t\tmultifilterSettings = this.getMultifilterSettings();\n\t\t\tif (null != selectValue && this.paramCache) {\n\t\t\t\tmultifilterSettings\n\t\t\t\t\t.find('.js-select')\n\t\t\t\t\t.val(selectValue)\n\t\t\t\t\t.trigger('change.select2');\n\t\t\t}\n\t\t\tthis.loadMultifilterData(true);\n\t\t\tmultifilterSettings.find('.js-select').on('select2:select', () => {\n\t\t\t\tthis.loadMultifilterData(true);\n\t\t\t\tif (this.paramCache) {\n\t\t\t\t\tapp.cacheSet('multifilterSelectValue', multifilterSettings.find('.js-select').val());\n\t\t\t\t}\n\t\t\t});\n\t\t\tmultifilterSettings.find('.js-select').on('select2:unselect', () => {\n\t\t\t\tthis.loadMultifilterData(false);\n\t\t\t\tif (this.paramCache) {\n\t\t\t\t\tapp.cacheSet('multifilterSelectValue', multifilterSettings.find('.js-select').val());\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.registerShowHideModuleSettings();\n\t\t},\n\t\tloadMultifilterData(select = true) {\n\t\t\tconst self = this;\n\t\t\tlet widgetId = self.getMultifilterControls().attr('data-widgetid'),\n\t\t\t\tmultifilterIds = self.getMultifilterSettings().find('.js-select option:selected'),\n\t\t\t\tparams = [];\n\t\t\tif (!select) {\n\t\t\t\tself.getMultifilterContent().html('');\n\t\t\t}\n\t\t\tmultifilterIds.each(function () {\n\t\t\t\tlet existFilter = self.getMultifilterContent().find('[data-id=\"' + $(this).val() + '\"]');\n\t\t\t\tlet thisInstance = $(this);\n\t\t\t\tif (0 < existFilter.length) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\tparams = {\n\t\t\t\t\tmodule: thisInstance.data('module'),\n\t\t\t\t\tmodulename: thisInstance.data('module'),\n\t\t\t\t\tview: 'ShowWidget',\n\t\t\t\t\tname: 'Multifilter',\n\t\t\t\t\tcontent: true,\n\t\t\t\t\twidget: true,\n\t\t\t\t\twidgetid: widgetId,\n\t\t\t\t\tfilterid: thisInstance.val()\n\t\t\t\t};\n\t\t\t\tself.loadListData(params);\n\t\t\t});\n\t\t},\n\t\tloadListData(params) {\n\t\t\tconst self = this;\n\t\t\tlet aDeferred = jQuery.Deferred(),\n\t\t\t\tmultiFilterContent = self.getMultifilterContent();\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\tif (\n\t\t\t\t\t\tself\n\t\t\t\t\t\t\t.getMultifilterSettings()\n\t\t\t\t\t\t\t.find('option[value=\"' + params.filterid + '\"]')\n\t\t\t\t\t\t\t.is(':selected') &&\n\t\t\t\t\t\t!multiFilterContent.find('.detailViewTable[data-id=\"' + params.filterid + '\"]').length\n\t\t\t\t\t) {\n\t\t\t\t\t\tself.registerRecordsCount(multiFilterContent.append(data).children('div:last-child'));\n\t\t\t\t\t\tself.registerShowHideBlocks();\n\t\t\t\t\t\taDeferred.resolve();\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.fail(function (error) {\n\t\t\t\t\taDeferred.reject();\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\tregisterShowHideModuleSettings() {\n\t\t\tthis.getMultifilterControls()\n\t\t\t\t.find('.js-widget-settings')\n\t\t\t\t.on('click', () => {\n\t\t\t\t\tthis.getMultifilterSettings().toggleClass('d-none');\n\t\t\t\t});\n\t\t},\n\t\tregisterShowHideBlocks() {\n\t\t\tlet detailContentsHolder = this.getMultifilterContent();\n\t\t\tdetailContentsHolder.find('.blockHeader').off('click');\n\t\t\tdetailContentsHolder.find('.blockHeader').click(function () {\n\t\t\t\tlet currentTarget = $(this)\n\t\t\t\t\t.find('.js-block-toggle')\n\t\t\t\t\t.not('.d-none'),\n\t\t\t\t\tclosestBlock = currentTarget.closest('.js-toggle-panel'),\n\t\t\t\t\tbodyContents = closestBlock.find('.blockContent'),\n\t\t\t\t\tdata = currentTarget.data();\n\t\t\t\tlet hideHandler = function () {\n\t\t\t\t\tbodyContents.addClass('d-none');\n\t\t\t\t};\n\t\t\t\tlet showHandler = function () {\n\t\t\t\t\tbodyContents.removeClass('d-none');\n\t\t\t\t};\n\t\t\t\tif ('show' == data.mode) {\n\t\t\t\t\thideHandler();\n\t\t\t\t\tcurrentTarget.addClass('d-none');\n\t\t\t\t\tclosestBlock.find('[data-mode=\"hide\"]').removeClass('d-none');\n\t\t\t\t} else {\n\t\t\t\t\tshowHandler();\n\t\t\t\t\tcurrentTarget.addClass('d-none');\n\t\t\t\t\tclosestBlock.find(\"[data-mode='show']\").removeClass('d-none');\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterRecordsCount(container) {\n\t\t\tlet url = container.data('url');\n\t\t\tAppConnector.request(url).done(function (data) {\n\t\t\t\tcontainer.find('.js-count').html(data.result.totalCount);\n\t\t\t});\n\t\t},\n\t\tgetMultifilterControls() {\n\t\t\tif (this.multifilterControlsView == false) {\n\t\t\t\tthis.multifilterControlsView = this.getContainer().find('.js-multifilterControls');\n\t\t\t}\n\t\t\treturn this.multifilterControlsView;\n\t\t},\n\t\tgetMultifilterContent() {\n\t\t\tif (this.multifilterContentView == false) {\n\t\t\t\tthis.multifilterContentView = this.getContainer().find('.js-multifilterContent');\n\t\t\t}\n\t\t\treturn this.multifilterContentView;\n\t\t},\n\t\tgetMultifilterSettings() {\n\t\t\tif (this.multifilterSettingsView == false) {\n\t\t\t\tthis.multifilterSettingsView = this.getContainer().find('.js-settings-widget');\n\t\t\t}\n\t\t\treturn this.multifilterSettingsView;\n\t\t},\n\t\tpostLoadWidget() {\n\t\t\tthis.registerMultifilter();\n\t\t},\n\t\trefreshWidget() {\n\t\t\tthis.loadMultifilterData(false);\n\t\t}\n\t}\n);\nYetiForce_Widget_Js(\n\t'YetiForce_UpcomingProjectTasks_Widget_Js',\n\t{},\n\t{\n\t\tpostLoadWidget: function () {\n\t\t\tthis._super();\n\t\t\tthis.registerListViewButton();\n\t\t},\n\t\tregisterListViewButton: function () {\n\t\t\tconst container = this.getContainer();\n\t\t\tcontainer.find('.goToListView').on('click', function () {\n\t\t\t\tlet url = 'index.php?module=ProjectTask&view=List&viewname=All';\n\t\t\t\turl += '&search_params=[[';\n\t\t\t\tlet owner = container.find('.widgetFilter.owner option:selected');\n\t\t\t\tif (owner.val() !== 'all') {\n\t\t\t\t\turl += '[\"assigned_user_id\",\"e\",\"' + owner.val() + '\"],';\n\t\t\t\t}\n\t\t\t\turl +=\n\t\t\t\t\t'[\"projecttaskstatus\",\"e\",\"' + encodeURIComponent(container.find('[name=\"status\"]').data('value')) + '\"]]]';\n\t\t\t\tapp.openUrl(url);\n\t\t\t});\n\t\t}\n\t}\n);\nYetiForce_UpcomingProjectTasks_Widget_Js('YetiForce_CompletedProjectTasks_Widget_Js', {}, {});\n"],"names":["jQuery","Class","getInstance","container","widgetClassName","moduleName","app","getModuleName","moduleClass","window","fallbackClass","yetiClass","basicClass","YetiForce_Widget_Js","instance","init","reload","$","setContainer","registerWidgetPostLoadEvent","registerWidgetPostRefreshEvent","registerCache","Number","getContainer","find","val","filterIds","length","widgetData","widgetDataEl","JSON","parse","formatAxesLabels","value","index","values","String","isNaN","App","Fields","Double","formatToDisplay","context","meta","chart","getDatasetMeta","datasetIndex","hidden","datalabelsFormatter","valueType","data","datasets","dataFormatted","dataIndex","tooltipLabelCallback","tooltipItem","tooltipTitleCallback","tooltipItems","titlesFormatted","labels","e","legendItem","type","chartInstance","config","Chart","defaults","legend","onClick","apply","global","generateLabels","areColorsFromDividingField","isMultiFilter","options","boxWidth","forEach","label","fillStyle","strokeStyle","getDatasetsMeta","Array","isArray","i","len","push","datasetsMeta","dataset","metaData","_models","datalabels","display","iItem","lenItem","dataItem","$datalabels","_model","model","labelWidth","size","width","padding","borderWidth","labelHeight","height","barHeight","threshold","verticalBarLabelsThreshold","_view","positioner","hideHorizontalBarDatalabelsIfNeeded","barWidth","horizontalBarLabelsThreshold","fixXAxisLabels","shortenXTicks","scales","xAxes","axis","ticks","callback","xAxisTickCallback","substr","rotateXLabels90","minRotation","_updated","prop","_meta","hasOwnProperty","metaDataItem","_xScale","ctx","categoryWidth","categoryPercentage","fullWidth","measureText","shortened","shortenedWidth","update","x","getPixelForValue","base","getBasePixel","barPercentage","fixYAxisLabels","shortenYTicks","yAxes","yAxisTickCallback","getFunctionFromReplacementString","replacementStr","assignResult","splitted","split","errorLog","Error","finalFunction","reduce","previous","current","globalChartFunctions","bind","call","isReplacementString","str","parseOptionsObject","original","afterInit","result","propertyName","parseOptionsArray","arr","map","item","parseOptions","chartSubType","dividedPos","indexOf","getGlobalDefaultChartsOptions","chartData","notStackedChartSubType","removeStackedFromName","getDefaultBasicOptions","basic","getDefaultDatasetOptions","getDefaultPlugins","plugins","element","isEmptyData","getUserDateFormat","CONFIG","dateFormat","getChartContainer","useCache","plotContainer","get","registerRecordsCount","thisInstance","recordsCountBtn","on","url","request","done","response","html","totalCount","addClass","attr","removeClass","loadScrollbar","widget","closest","content","footer","adjustedHeight","innerHeight","outerHeight","css","scrollbar","showNewScrollbar","restrictContentDrag","target","isHeaderElement","stopPropagation","generateData","jData","positionNoDataMsg","widgetContentsContainer","noDataMsgHolder","position","title","printContainer","imgEl","onload","outerWidth","printImage","htmlToImage","src","imageBase64","anchor","document","createElement","setAttribute","click","postLoadWidget","loadChart","registerSectionClick","registerFilter","registerFilterChangeEvent","registerContentAutoResize","registerWidgetSwitch","registerChangeSorting","registerLoadMore","registerHeaderButtons","postRefreshWidget","setSortingButton","currentElement","drefresh","replace","sort","sortorder","icon","iconBase","base64Image","toBase64Image","image","Image","print","open","write","append","close","focus","header","downloadWidget","printWidget","getChartImage","text","a","appendTo","remove","quickCreateModule","currentTarget","switchButtons","setUrlSwitch","dashboardWidgetHeader","aDeferred","Deferred","each","urlparams","switchUrl","resolve","reject","promise","getFilterData","refreshWidget","parent","contentContainer","params","widgetFilters","domElement","widgetFilter","filterName","is","additionalWidgetFilters","refreshContainer","refreshContainerFooter","progressIndicator","paramCache","setFilterToCache","filter","clone","n","hasClass","splice","trigger","widgetPostRefereshEvent","fail","search","refreshBtn","originalUrl","selects","fieldInfo","Picklist","changeSelectElementView","containerCssClass","Date","register","registerRange","searchParams","searchInfo","searchContributorElement","fieldName","searchValue","join","trim","searchOperator","inArray","stringify","showSelect2ElementView","widgetPostLoadEvent","off","pointer","canvas","getDataFromEvent","links","location","href","hide","delegateTarget","additionalFilter","babelHelpers.typeof","userId","name","cacheSet","event","elem","getWidgetData","getType","loadDatasetOptions","loadBasicOptions","loadPlugins","getContext","additionalFields","elements","getElementAtEvent","_index","_datasetIndex","eventData","formatTooltipTitles","formatTooltipLabels","mergeOptions","getBasicOptions","getSubType","getDatasetOptions","mergeOptionsArray","getPlugins","defaultLabel","to","fromArray","from","key","mergeOptionsObject","undefined","toString","Vtiger_Widget_Js","YetiForce_Bar_Widget_Js","YetiForce_Horizontal_Widget_Js","YetiForce_Pie_Widget_Js","YetiForce_Donut_Widget_Js","YetiForce_Line_Widget_Js","YetiForce_LineStacked_Widget_Js","userDefaultActivityView","userDefaultTimeFormat","hourFormat","convertedFirstDay","firstDayOfWeekNo","defaultFirstHour","getMainParams","explodedTime","defaultDate","moment","format","add","getCalendarView","fullCalendar","vtranslate","view","date","className","count","prependTo","formatDate","toUpperCase","callbackFunction","switchBtn","allEvents","start_date","start","end_date","end","user","customFilter","time","events","owner","status","calendarView","month","button","tag","loadCalendarData","getMonthName","registerCalendar","registerChangeView","_super","registerActivityChange","registerListViewButton","modalView","showModalWindow","activitiesStatus","encodeURIComponent","YetiForce_CalendarActivities_Widget_Js","registerAction","orderBy","sortOrder","YetiForce_ProductsSoldToRenew_Widget_Js","formatYAxisTick","formatToHourText","original_label","yLabel","fullLabels","YetiForce_Funnel_Widget_Js","yMaxValue","parseData","parseChartData","chartDataGlobal","xLabels","sum","row","parseInt","getDecodedValue","dataInfo","compare","ev","seriesIndex","pointIndex","args","YetiForce_TeamsEstimatedSales_Widget_Js","loadMoreHandler","filterValue","filterData","isEmptyObject","extend","replaceWith","hideModalWindow","registerNotebookEvents","editNotebookContent","saveNotebookContent","show","textarea","generateChartData","jqplot","use_excanvas","BarRenderer","CategoryAxisRenderer","chartClassName","stacked","chartfilterInstance","filterIdsStr","selectValue","cacheGet","multifilterSettings","getMultifilterSettings","loadMultifilterData","registerShowHideModuleSettings","select","self","widgetId","getMultifilterControls","multifilterIds","getMultifilterContent","existFilter","loadListData","multiFilterContent","filterid","children","registerShowHideBlocks","error","toggleClass","detailContentsHolder","not","closestBlock","bodyContents","hideHandler","showHandler","mode","multifilterControlsView","multifilterContentView","multifilterSettingsView","registerMultifilter","openUrl","YetiForce_UpcomingProjectTasks_Widget_Js"],"mappings":";;;;;;;;AAAA;;;;;;;;;AASA;AAEAA,OAAOC,KAAP,CACC,kBADD,EAEC;sBACsB,2BADtB;0BAE0B,8BAF1B;cAGc,SAASC,WAAT,CAAqBC,SAArB,EAAgCC,eAAhC,EAAiDC,UAAjD,EAA6D;MACrE,OAAOA,UAAP,KAAsB,WAA1B,EAAuC;gBACzBC,IAAIC,aAAJ,EAAb;;MAEKC,cAAcC,OAAOJ,aAAa,GAAb,GAAmBD,eAAnB,GAAqC,YAA5C,CAApB;MACMM,gBAAgBD,OAAO,YAAYL,eAAZ,GAA8B,YAArC,CAAtB;MACMO,YAAYF,OAAO,eAAeL,eAAf,GAAiC,YAAxC,CAAlB;MACMQ,aAAaC,mBAAnB;MACIC,iBAAJ;MACI,OAAON,WAAP,KAAuB,WAA3B,EAAwC;cAC5B,IAAIA,WAAJ,CAAgBL,SAAhB,EAA2B,KAA3B,EAAkCC,eAAlC,CAAX;GADD,MAEO,IAAI,OAAOM,aAAP,KAAyB,WAA7B,EAA0C;cACrC,IAAIA,aAAJ,CAAkBP,SAAlB,EAA6B,KAA7B,EAAoCC,eAApC,CAAX;GADM,MAEA,IAAI,OAAOO,SAAP,KAAqB,WAAzB,EAAsC;cACjC,IAAIA,SAAJ,CAAcR,SAAd,EAAyB,KAAzB,EAAgCC,eAAhC,CAAX;GADM,MAEA;cACK,IAAIQ,UAAJ,CAAeT,SAAf,EAA0B,KAA1B,EAAiCC,eAAjC,CAAX;;SAEMU,QAAP;;CAvBH,EA0BC;YACY,KADZ;gBAEgB,KAFhB;gBAGgB,KAHhB;YAIY,EAJZ;aAKa,KALb;OAMO,SAASC,IAAT,CAAcZ,SAAd,EAAyBa,MAAzB,EAAiCZ,eAAjC,EAAkD;cAC3Ca,EAAEd,SAAF,CAAZ;OACKe,YAAL,CAAkBf,SAAlB;OACKgB,2BAAL,CAAiChB,SAAjC;MACI,CAACa,MAAL,EAAa;QACPI,8BAAL,CAAoCjB,SAApC;;OAEIkB,aAAL,CAAmBlB,SAAnB;EAbF;2BAAA,wCAe8B;SACrB,CAAC,CAACmB,OACR,KAAKC,YAAL,GACEC,IADF,CACO,kCADP,EAEEC,GAFF,EADQ,CAAT;EAhBF;mBAAA,gCAsBsB;SACb,KAAKF,YAAL,GACLC,IADK,CACA,oBADA,EAELC,GAFK,EAAP;EAvBF;cAAA,2BA2BiB;MACX,OAAO,KAAKC,SAAZ,KAA0B,WAA9B,EAA2C;UACnC,KAAKA,SAAL,CAAeC,MAAf,GAAwB,CAA/B;;SAEM,KAAP;EA/BF;;;;;;cAAA,2BAqCiB;MACX,OAAO,KAAKC,UAAZ,KAA2B,WAA/B,EAA4C;UACpC,KAAKA,UAAZ;;MAEGC,eAAe,KAAKN,YAAL,GAAoBC,IAApB,CAAyB,aAAzB,CAAnB;MACIK,aAAaF,MAAjB,EAAyB;UAChB,KAAKC,UAAL,GAAkBE,KAAKC,KAAL,CAAWF,aAAaJ,GAAb,EAAX,CAA1B;;SAEM,KAAP;EA7CF;;;;;;uBAmDuB;;;;UAIb;qBACW,SAASO,gBAAT,CAA0BC,KAA1B,EAAiCC,KAAjC,EAAwCC,MAAxC,EAAgD;QAC7DC,OAAOH,KAAP,EAAcN,MAAd,GAAuB,CAAvB,IAA4B,CAACU,MAAMf,OAAOW,KAAP,CAAN,CAAjC,EAAuD;YAC/CK,IAAIC,MAAJ,CAAWC,MAAX,CAAkBC,eAAlB,CAAkCR,KAAlC,CAAP;;WAEMA,KAAP;;GATmB;;;;cAeT;UAAA,mBACHS,OADG,EACM;QACVC,OAAOD,QAAQE,KAAR,CAAcC,cAAd,CAA6BH,QAAQI,YAArC,CAAb;WACOH,KAAKI,MAAL,KAAgB,IAAvB;IAHU;;cAKA,SAASC,mBAAT,CAA6Bf,KAA7B,EAAoCS,OAApC,EAA6C;QAEtD,OAAO,KAAKd,UAAZ,KAA2B,WAA3B,IACA,OAAO,KAAKA,UAAL,CAAgBqB,SAAvB,KAAqC,WADrC,IAEA,KAAKrB,UAAL,CAAgBqB,SAAhB,KAA8B,OAH/B,EAIE;YACMX,IAAIC,MAAJ,CAAWC,MAAX,CAAkBC,eAAlB,CAAkCR,KAAlC,EAAyC,CAAzC,CAAP;;QAGA,OAAOS,QAAQE,KAAR,CAAcM,IAAd,CAAmBC,QAAnB,CAA4BT,QAAQI,YAApC,EAAkDM,aAAzD,KAA2E,WAA3E,IACA,OAAOV,QAAQE,KAAR,CAAcM,IAAd,CAAmBC,QAAnB,CAA4BT,QAAQI,YAApC,EAAkDM,aAAlD,CAAgEV,QAAQW,SAAxE,CAAP,KAA8F,WAF/F,EAGE;;YAEMX,QAAQE,KAAR,CAAcM,IAAd,CAAmBC,QAAnB,CAA4BT,QAAQI,YAApC,EAAkDM,aAAlD,CAAgEV,QAAQW,SAAxE,CAAP;;QAEGjB,OAAOH,KAAP,EAAcN,MAAd,GAAuB,CAAvB,IAA4BU,MAAMf,OAAOW,KAAP,CAAN,CAAhC,EAAsD;YAC9CK,IAAIC,MAAJ,CAAWC,MAAX,CAAkBC,eAAlB,CAAkCR,KAAlC,CAAP;;WAEMA,KAAP;;GAtCmB;;;;YA4CX;UACF,SAASqB,oBAAT,CAA8BC,WAA9B,EAA2CL,IAA3C,EAAiD;;QAGtD,OAAOA,KAAKC,QAAL,CAAcI,YAAYT,YAA1B,EAAwCM,aAA/C,KAAiE,WAAjE,IACAF,KAAKC,QAAL,CAAcI,YAAYT,YAA1B,EAAwCM,aAAxC,CAAsDG,YAAYrB,KAAlE,MAA6E,WAF9E,EAGE;YACMgB,KAAKC,QAAL,CAAcI,YAAYT,YAA1B,EAAwCM,aAAxC,CAAsDG,YAAYrB,KAAlE,CAAP;;;QAIAE,OAAOc,KAAKC,QAAL,CAAcI,YAAYT,YAA1B,EAAwCI,IAAxC,CAA6CK,YAAYrB,KAAzD,CAAP,EAAwEP,MAAxE,GAAiF,CAAjF,IACA,CAACU,MAAMf,OAAO4B,KAAKC,QAAL,CAAcI,YAAYT,YAA1B,EAAwCI,IAAxC,CAA6CK,YAAYrB,KAAzD,CAAP,CAAN,CAFF,EAGE;SAEA,OAAO,KAAKN,UAAZ,KAA2B,WAA3B,IACA,OAAO,KAAKA,UAAL,CAAgBqB,SAAvB,KAAqC,WADrC,IAEA,KAAKrB,UAAL,CAAgBqB,SAAhB,KAA8B,OAH/B,EAIE;aACMX,IAAIC,MAAJ,CAAWC,MAAX,CAAkBC,eAAlB,CACNS,KAAKC,QAAL,CAAcI,YAAYT,YAA1B,EAAwCI,IAAxC,CAA6CK,YAAYrB,KAAzD,CADM,EAEN,CAFM,CAAP;;YAKMI,IAAIC,MAAJ,CAAWC,MAAX,CAAkBC,eAAlB,CAAkCS,KAAKC,QAAL,CAAcI,YAAYT,YAA1B,EAAwCI,IAAxC,CAA6CK,YAAYrB,KAAzD,CAAlC,CAAP;;;WAGMgB,KAAKC,QAAL,CAAcI,YAAYT,YAA1B,EAAwCI,IAAxC,CAA6CK,YAAYrB,KAAzD,CAAP;IA3BQ;UA6BF,SAASsB,oBAAT,CAA8BC,YAA9B,EAA4CP,IAA5C,EAAkD;QAClDK,cAAcE,aAAa,CAAb,CAApB;;QAGC,OAAOP,KAAKC,QAAL,CAAcI,YAAYT,YAA1B,EAAwCY,eAA/C,KAAmE,WAAnE,IACAR,KAAKC,QAAL,CAAcI,YAAYT,YAA1B,EAAwCY,eAAxC,CAAwDH,YAAYrB,KAApE,MAA+E,WAFhF,EAGE;YACMgB,KAAKC,QAAL,CAAcI,YAAYT,YAA1B,EAAwCY,eAAxC,CAAwDH,YAAYrB,KAApE,CAAP;;;QAGGE,OAAOc,KAAKS,MAAL,CAAYJ,YAAYrB,KAAxB,CAAP,EAAuCP,MAAvC,GAAgD,CAAhD,IAAqD,CAACU,MAAMf,OAAO4B,KAAKS,MAAL,CAAYJ,YAAYrB,KAAxB,CAAP,CAAN,CAA1D,EAAyG;SAEvG,OAAO,KAAKN,UAAZ,KAA2B,WAA3B,IACA,OAAO,KAAKA,UAAL,CAAgBqB,SAAvB,KAAqC,WADrC,IAEA,KAAKrB,UAAL,CAAgBqB,SAAhB,KAA8B,OAH/B,EAIE;aACMX,IAAIC,MAAJ,CAAWC,MAAX,CAAkBC,eAAlB,CAAkCS,KAAKS,MAAL,CAAYJ,YAAYrB,KAAxB,CAAlC,EAAkE,CAAlE,CAAP;;YAEMI,IAAIC,MAAJ,CAAWC,MAAX,CAAkBC,eAAlB,CAAkCS,KAAKS,MAAL,CAAYJ,YAAYrB,KAAxB,CAAlC,CAAP;;;WAGMgB,KAAKS,MAAL,CAAYJ,YAAYrB,KAAxB,CAAP;;GA9FmB;;UAkGb;UAAA,mBACC0B,CADD,EACIC,UADJ,EACgB;QAClBC,OAAO,KAAKC,aAAL,CAAmBC,MAAnB,CAA0BF,IAArC;QACI,OAAOG,MAAMC,QAAN,CAAeJ,IAAf,CAAP,KAAgC,WAApC,EAAiD;YACzCG,MAAMC,QAAN,CAAeJ,IAAf,EAAqBK,MAArB,CAA4BC,OAA5B,CAAoCC,KAApC,CAA0C,KAAKN,aAA/C,EAA8D,CAACH,CAAD,EAAIC,UAAJ,CAA9D,CAAP;;WAEMI,MAAMC,QAAN,CAAeI,MAAf,CAAsBH,MAAtB,CAA6BC,OAA7B,CAAqCC,KAArC,CAA2C,KAAKN,aAAhD,EAA+D,CAACH,CAAD,EAAIC,UAAJ,CAA/D,CAAP;IANM;iBAAA,0BAQQjB,KARR,EAQe;QACjBkB,OAAOlB,MAAMoB,MAAN,CAAaF,IAAxB;QACIH,eAAJ;QACI,OAAOM,MAAMC,QAAN,CAAeJ,IAAf,CAAP,KAAgC,WAApC,EAAiD;cACvCG,MAAMC,QAAN,CAAeJ,IAAf,EAAqBK,MAArB,CAA4BR,MAA5B,CAAmCY,cAAnC,CAAkD3B,KAAlD,CAAT;KADD,MAEO;cACGqB,MAAMC,QAAN,CAAeI,MAAf,CAAsBH,MAAtB,CAA6BR,MAA7B,CAAoCY,cAApC,CAAmD3B,KAAnD,CAAT;;QAEG,KAAK4B,0BAAL,MAAqC,KAAKC,aAAL,EAAzC,EAA+D;WACxDT,MAAN,CAAaU,OAAb,CAAqBP,MAArB,CAA4BR,MAA5B,CAAmCgB,QAAnC,GAA8C,EAA9C;YACOC,OAAP,CAAe,UAACC,KAAD,EAAQ3C,KAAR,EAAkB;YAC1B4C,SAAN,GAAkB,eAAlB;YACMC,WAAN,GAAoB,kBAApB;MAFD;;WAKMpB,MAAP;IAvBM;UAAA,qBAyBG;QACL,KAAKc,aAAL,MAAwB,KAAKD,0BAAL,EAA5B,EAA+D;YACvD,IAAP;;WAEM,KAAP;;GA/HmB;;;;;WAsIZ;;;;;;sCAM2B,2CAAU5B,KAAV,EAAiB;QAC/CoC,kBAAkB,SAAlBA,eAAkB,CAAUpC,KAAV,EAAiB;SAChCO,WAAW,EAAjB;SACMD,OAAON,MAAMM,IAAnB;SACI,OAAOA,IAAP,KAAgB,WAAhB,IAA+B,OAAOA,KAAKC,QAAZ,KAAyB,WAAxD,IAAuE8B,MAAMC,OAAN,CAAchC,KAAKC,QAAnB,CAA3E,EAAyG;WACnG,IAAIgC,IAAI,CAAR,EAAWC,MAAMlC,KAAKC,QAAL,CAAcxB,MAApC,EAA4CwD,IAAIC,GAAhD,EAAqDD,GAArD,EAA0D;WACnDxC,OAAOC,MAAMC,cAAN,CAAqBsC,CAArB,CAAb;WACI,OAAOxC,KAAKO,IAAZ,KAAqB,WAArB,IAAoC+B,MAAMC,OAAN,CAAcvC,KAAKO,IAAnB,CAAxC,EAAkE;iBACxDmC,IAAT,CAAc1C,IAAd;;;;YAIIQ,QAAP;KAXD;QAaImC,eAAeN,gBAAgBpC,KAAhB,CAAnB;QACIO,WAAWP,MAAMM,IAAN,CAAWC,QAA1B;SACK,IAAIgC,IAAI,CAAR,EAAWC,MAAMjC,SAASxB,MAA/B,EAAuCwD,IAAIC,GAA3C,EAAgDD,GAAhD,EAAqD;SAC9CI,UAAUpC,SAASgC,CAAT,CAAhB;SACMxC,OAAO2C,aAAaH,CAAb,CAAb;SACIxC,KAAKI,MAAT,EAAiB;;;SAGXyC,WAAW7C,KAAKO,IAAtB;SACI,OAAOqC,QAAQE,OAAf,KAA2B,WAA/B,EAA4C;cACnCA,OAAR,GAAkB,EAAlB;;SAEG,OAAOF,QAAQG,UAAf,KAA8B,WAAlC,EAA+C;cACtCA,UAAR,GAAqB,EAArB;;SAEG,OAAOH,QAAQG,UAAR,CAAmBC,OAA1B,KAAsC,WAA1C,EAAuD;cAC9CD,UAAR,CAAmBC,OAAnB,GAA6B,IAA7B;;UAEI,IAAIC,QAAQ,CAAZ,EAAeC,UAAUL,SAAS7D,MAAvC,EAA+CiE,QAAQC,OAAvD,EAAgED,OAAhE,EAAyE;UAClEE,WAAWN,SAASI,KAAT,CAAjB;UACI,OAAOE,SAASC,WAAhB,KAAgC,WAAhC,IAA+C,OAAOD,SAASC,WAAT,CAAqBC,MAA5B,KAAuC,WAA1F,EAAuG;WAClGC,QAAQH,SAASC,WAAT,CAAqBC,MAAjC;WACIC,UAAU,IAAV,IAAkB,OAAOA,KAAP,KAAiB,WAAvC,EAAoD;gBAC3CR,OAAR,CAAgBG,KAAhB,IAAyBK,KAAzB;QADD,MAEO,IAAIV,QAAQE,OAAR,CAAgBG,KAAhB,MAA2B,IAA3B,IAAmC,OAAOL,QAAQE,OAAR,CAAgBG,KAAhB,CAAP,KAAkC,WAAzE,EAAsF;gBACpFL,QAAQE,OAAR,CAAgBG,KAAhB,CAAR;QADM,MAEA;eACC,KAAP;;WAEKM,aAAaD,MAAME,IAAN,CAAWC,KAAX,GAAmBH,MAAMI,OAAN,CAAcD,KAAjC,GAAyCH,MAAMK,WAAN,GAAoB,CAAhF;WACMC,cAAcN,MAAME,IAAN,CAAWK,MAAX,GAAoBP,MAAMI,OAAN,CAAcG,MAAlC,GAA2CP,MAAMK,WAAN,GAAoB,CAAnF;WACMG,YAAYX,SAASU,MAAT,EAAlB;WACIE,YAAY,EAAhB;WACI,OAAO9D,MAAMoB,MAAN,CAAaU,OAAb,CAAqBiC,0BAA5B,KAA2D,WAA/D,EAA4E;oBAC/D/D,MAAMoB,MAAN,CAAaU,OAAb,CAAqBiC,0BAAjC;;WAEGb,SAASc,KAAT,CAAeR,KAAf,GAAuBM,SAAvB,GAAmCR,UAAnC,IAAiDO,YAAYC,SAAZ,GAAwBH,WAA7E,EAA0F;iBAChFR,WAAT,CAAqBC,MAArB,CAA4Ba,UAA5B,GAAyC,YAAM;gBACvC,KAAP;SADD;QADD,MAIO;iBACGd,WAAT,CAAqBC,MAArB,GAA8BC,KAA9B;;;;;IA7DG;;;;;;wCAwE6B,SAASa,mCAAT,CAA6ClE,KAA7C,EAAoD;QACpFoC,kBAAkB,SAAlBA,eAAkB,CAAUpC,KAAV,EAAiB;SAChCO,WAAW,EAAjB;SACMD,OAAON,MAAMM,IAAnB;SACI,OAAOA,IAAP,KAAgB,WAAhB,IAA+B,OAAOA,KAAKC,QAAZ,KAAyB,WAAxD,IAAuE8B,MAAMC,OAAN,CAAchC,KAAKC,QAAnB,CAA3E,EAAyG;WACnG,IAAIgC,IAAI,CAAR,EAAWC,MAAMlC,KAAKC,QAAL,CAAcxB,MAApC,EAA4CwD,IAAIC,GAAhD,EAAqDD,GAArD,EAA0D;WACnDxC,OAAOC,MAAMC,cAAN,CAAqBsC,CAArB,CAAb;WACI,OAAOxC,KAAKO,IAAZ,KAAqB,WAArB,IAAoC+B,MAAMC,OAAN,CAAcvC,KAAKO,IAAnB,CAAxC,EAAkE;iBACxDmC,IAAT,CAAc1C,IAAd;;;;YAIIQ,QAAP;KAXD;QAaImC,eAAeN,gBAAgBpC,KAAhB,CAAnB;QACIO,WAAWP,MAAMM,IAAN,CAAWC,QAA1B;SACK,IAAIgC,IAAI,CAAR,EAAWC,MAAMjC,SAASxB,MAA/B,EAAuCwD,IAAIC,GAA3C,EAAgDD,GAAhD,EAAqD;SAC9CI,UAAUpC,SAASgC,CAAT,CAAhB;SACMxC,OAAO2C,aAAaH,CAAb,CAAb;SACIxC,KAAKI,MAAT,EAAiB;;;SAGXyC,WAAW7C,KAAKO,IAAtB;SACI,OAAOqC,QAAQE,OAAf,KAA2B,WAA/B,EAA4C;cACnCA,OAAR,GAAkB,EAAlB;;SAEG,OAAOF,QAAQG,UAAf,KAA8B,WAAlC,EAA+C;cACtCA,UAAR,GAAqB,EAArB;;SAEG,OAAOH,QAAQG,UAAR,CAAmBC,OAA1B,KAAsC,WAA1C,EAAuD;cAC9CD,UAAR,CAAmBC,OAAnB,GAA6B,IAA7B;;UAEI,IAAIC,QAAQ,CAAZ,EAAeC,UAAUL,SAAS7D,MAAvC,EAA+CiE,QAAQC,OAAvD,EAAgED,OAAhE,EAAyE;UAClEE,WAAWN,SAASI,KAAT,CAAjB;UACI,OAAOE,SAASC,WAAhB,KAAgC,WAAhC,IAA+C,OAAOD,SAASC,WAAT,CAAqBC,MAA5B,KAAuC,WAA1F,EAAuG;WAClGC,QAAQH,SAASC,WAAT,CAAqBC,MAAjC;WACIC,UAAU,IAAV,IAAkB,OAAOA,KAAP,KAAiB,WAAvC,EAAoD;gBAC3CR,OAAR,CAAgBG,KAAhB,IAAyBK,KAAzB;QADD,MAEO,IAAIV,QAAQE,OAAR,CAAgBG,KAAhB,MAA2B,IAA3B,IAAmC,OAAOL,QAAQE,OAAR,CAAgBG,KAAhB,CAAP,KAAkC,WAAzE,EAAsF;gBACpFL,QAAQE,OAAR,CAAgBG,KAAhB,CAAR;QADM,MAEA;eACC,KAAP;;WAEKM,aAAaD,MAAME,IAAN,CAAWC,KAAX,GAAmBH,MAAMI,OAAN,CAAcD,KAAjC,GAAyCH,MAAMK,WAAN,GAAoB,CAAhF;WACMC,cAAcN,MAAME,IAAN,CAAWK,MAAX,GAAoBP,MAAMI,OAAN,CAAcG,MAAlC,GAA2CP,MAAMK,WAAN,GAAoB,CAAnF;WACMS,WAAWjB,SAASM,KAA1B;WACIM,YAAY,EAAhB;WACI,OAAO9D,MAAMoB,MAAN,CAAaU,OAAb,CAAqBsC,4BAA5B,KAA6D,WAAjE,EAA8E;oBACjEpE,MAAMoB,MAAN,CAAaU,OAAb,CAAqBsC,4BAAjC;;WAEGlB,SAASc,KAAT,CAAeJ,MAAf,GAAwBE,SAAxB,GAAoCH,WAApC,IAAmDQ,WAAWL,SAAX,GAAuBR,UAA9E,EAA0F;iBAChFH,WAAT,CAAqBC,MAArB,CAA4Ba,UAA5B,GAAyC,YAAM;gBACvC,KAAP;SADD;QADD,MAIO;iBACGd,WAAT,CAAqBC,MAArB,GAA8BC,KAA9B;;;;;IA/HG;;;;;;mBA0IQ,SAASgB,cAAT,CAAwBrE,KAAxB,EAA+B;QAC1CsE,gBAAgB,SAASA,aAAT,CAAuBhE,IAAvB,EAA6BwB,OAA7B,EAAsC;SACrD,OAAOA,QAAQyC,MAAf,KAA0B,WAA9B,EAA2C;cAClCA,MAAR,GAAiB,EAAjB;;SAEG,OAAOzC,QAAQyC,MAAR,CAAeC,KAAtB,KAAgC,WAApC,EAAiD;cACxCD,MAAR,CAAeC,KAAf,GAAuB,CAAC,EAAD,CAAvB;;aAEOD,MAAR,CAAeC,KAAf,CAAqBxC,OAArB,CAA6B,gBAAQ;UAChC,OAAOyC,KAAKC,KAAZ,KAAsB,WAA1B,EAAuC;YACjCA,KAAL,GAAa,EAAb;;WAEIA,KAAL,CAAWC,QAAX,GAAsB,SAASC,iBAAT,CAA2BvF,KAA3B,EAAkCC,KAAlC,EAAyCC,MAAzC,EAAiD;WAClEF,MAAMN,MAAN,GAAe,EAAnB,EAAuB;eACfM,MAAMwF,MAAN,CAAa,CAAb,EAAgB,EAAhB,IAAsB,KAA7B;;cAEMxF,KAAP;OAJD;MAJD;YAWOyC,OAAP;KAlBD;QAoBIgD,kBAAkB,SAASA,eAAT,CAAyBxE,IAAzB,EAA+BwB,OAA/B,EAAwC;SACzD,OAAOA,QAAQyC,MAAf,KAA0B,WAA9B,EAA2C;cAClCA,MAAR,GAAiB,EAAjB;;SAEG,OAAOzC,QAAQyC,MAAR,CAAeC,KAAtB,KAAgC,WAApC,EAAiD;cACxCD,MAAR,CAAeC,KAAf,GAAuB,CAAC,EAAD,CAAvB;;aAEOD,MAAR,CAAeC,KAAf,CAAqBxC,OAArB,CAA6B,gBAAQ;UAChC,OAAOyC,KAAKC,KAAZ,KAAsB,WAA1B,EAAuC;YACjCA,KAAL,GAAa,EAAb;;WAEIA,KAAL,CAAWK,WAAX,GAAyB,EAAzB;MAJD;YAMOjD,OAAP;KAbD;;UAgBMxB,IAAN,CAAWC,QAAX,CAAoByB,OAApB,CAA4B,UAACW,OAAD,EAAUrD,KAAV,EAAoB;SAC3CqD,QAAQqC,QAAZ,EAAsB;aACd,KAAP;;;gCAEQC,IAJsC;UAK1CtC,QAAQuC,KAAR,CAAcC,cAAd,CAA6BF,IAA7B,CAAJ,EAAwC;YAClC,IAAI1C,IAAI,CAAR,EAAWC,MAAMG,QAAQuC,KAAR,CAAcD,IAAd,EAAoB3E,IAApB,CAAyBvB,MAA/C,EAAuDwD,IAAIC,GAA3D,EAAgED,GAAhE,EAAqE;YAC9D6C,eAAezC,QAAQuC,KAAR,CAAcD,IAAd,EAAoB3E,IAApB,CAAyBiC,CAAzB,CAArB;YACMN,QAAQmD,aAAaC,OAAb,CAAqBX,KAArB,CAA2BnC,CAA3B,CAAd;YACM+C,MAAMF,aAAaC,OAAb,CAAqBC,GAAjC;YACIC,gBAAgBH,aAAaC,OAAb,CAAqB7B,KAArB,GAA6Bb,QAAQuC,KAAR,CAAcD,IAAd,EAAoB3E,IAApB,CAAyBvB,MAA1E;YACI,OAAOqG,aAAaC,OAAb,CAAqBvD,OAArB,CAA6B0D,kBAApC,KAA2D,WAA/D,EAA4E;;0BAE1DJ,aAAaC,OAAb,CAAqBvD,OAArB,CAA6B0D,kBAA9C;;YAEKC,YAAYH,IAAII,WAAJ,CAAgBzD,KAAhB,EAAuBuB,KAAzC;YACI+B,gBAAgBE,SAApB,EAA+B;aACxBE,YAAY1D,MAAM4C,MAAN,CAAa,CAAb,EAAgB,EAAhB,IAAsB,KAAxC;aACMe,iBAAiBN,IAAII,WAAJ,CAAgBC,SAAhB,EAA2BnC,KAAlD;aACI+B,gBAAgBK,cAApB,EAAoC;gBAC7B9D,OAAN,GAAgBgD,gBAAgB9E,MAAMM,IAAtB,EAA4BN,MAAM8B,OAAlC,CAAhB;gBACMA,OAAN,GAAgBwC,cAActE,MAAMM,IAApB,EAA0BN,MAAM8B,OAAhC,CAAhB;UAFD,MAGO;gBACAA,OAAN,GAAgBwC,cAActE,MAAMM,IAApB,EAA0BN,MAAM8B,OAAhC,CAAhB;;aAEG,CAACa,QAAQqC,QAAb,EAAuB;kBACdA,QAAR,GAAmB,IAAnB;gBACMa,MAAN;;gBAEMvF,IAAN,CAAWC,QAAX,CAAoByB,OAApB,CAA4B,UAACW,OAAD,EAAUrD,KAAV,EAAoB;mBACvC4F,KAAR,CAAcD,IAAd,EAAoB3E,IAApB,CAAyB0B,OAAzB,CAAiC,UAACoD,YAAD,EAAe3E,SAAf,EAA6B;yBAChDuD,KAAb,CAAmB8B,CAAnB,GAAuBV,aAAaC,OAAb,CAAqBU,gBAArB,CAAsCzG,KAAtC,EAA6CmB,SAA7C,CAAvB;yBACauD,KAAb,CAAmBgC,IAAnB,GAA0BZ,aAAaC,OAAb,CAAqBY,YAArB,EAA1B;yBACajC,KAAb,CAAmBR,KAAnB,GACE4B,aAAaC,OAAb,CAAqB7B,KAArB,GAA6Bb,QAAQuC,KAAR,CAAcD,IAAd,EAAoB3E,IAApB,CAAyBvB,MAAvD,GACAqG,aAAaC,OAAb,CAAqBvD,OAArB,CAA6B0D,kBAD7B,GAEAJ,aAAaC,OAAb,CAAqBvD,OAArB,CAA6BoE,aAH9B;YAHD;WADD;;;;;eAcKlB,QAAR,GAAmB,IAAnB;;;;UAvCG,IAAIC,IAAT,IAAiBtC,QAAQuC,KAAzB,EAAgC;YAAvBD,IAAuB;;KAJjC;IA/KO;;;;;;mBAoOQ,SAASkB,cAAT,CAAwBnG,KAAxB,EAA+B;QAC1CoG,gBAAgB,SAASA,aAAT,CAAuB9F,IAAvB,EAA6BwB,OAA7B,EAAsC;SACrD,OAAOA,QAAQyC,MAAf,KAA0B,WAA9B,EAA2C;cAClCA,MAAR,GAAiB,EAAjB;;SAEG,OAAOzC,QAAQyC,MAAR,CAAe8B,KAAtB,KAAgC,WAApC,EAAiD;cACxC9B,MAAR,CAAe8B,KAAf,GAAuB,CAAC,EAAD,CAAvB;;aAEO9B,MAAR,CAAe8B,KAAf,CAAqBrE,OAArB,CAA6B,gBAAQ;UAChC,OAAOyC,KAAKC,KAAZ,KAAsB,WAA1B,EAAuC;YACjCA,KAAL,GAAa,EAAb;;WAEIA,KAAL,CAAWC,QAAX,GAAsB,SAAS2B,iBAAT,CAA2BjH,KAA3B,EAAkCC,KAAlC,EAAyCC,MAAzC,EAAiD;WAClEF,MAAMN,MAAN,GAAe,EAAnB,EAAuB;eACfM,MAAMwF,MAAN,CAAa,CAAb,EAAgB,EAAhB,IAAsB,KAA7B;;cAEMxF,KAAP;OAJD;MAJD;YAWOyC,OAAP;KAlBD;UAoBMxB,IAAN,CAAWC,QAAX,CAAoByB,OAApB,CAA4B,UAACW,OAAD,EAAUrD,KAAV,EAAoB;SAC3CqD,QAAQqC,QAAZ,EAAsB;aACd,KAAP;;;kCAEQC,IAJsC;UAK1CtC,QAAQuC,KAAR,CAAcC,cAAd,CAA6BF,IAA7B,CAAJ,EAAwC;;YAElC,IAAI1C,IAAI,CAAR,EAAWC,MAAMG,QAAQuC,KAAR,CAAcD,IAAd,EAAoB3E,IAApB,CAAyBvB,MAA/C,EAAuDwD,IAAIC,GAA3D,EAAgED,GAAhE,EAAqE;YAC9D6C,eAAezC,QAAQuC,KAAR,CAAcD,IAAd,EAAoB3E,IAApB,CAAyBiC,CAAzB,CAArB;YACMN,QAAQmD,aAAapB,KAAb,CAAmB/B,KAAjC;YACIA,MAAMlD,MAAN,GAAe,EAAnB,EAAuB;eAChB+C,OAAN,GAAgBsE,cAAcpG,MAAMM,IAApB,EAA0BN,MAAM8B,OAAhC,CAAhB;aACI,CAACa,QAAQqC,QAAb,EAAuB;kBACdA,QAAR,GAAmB,IAAnB;gBACMa,MAAN;;gBAEMvF,IAAN,CAAWC,QAAX,CAAoByB,OAApB,CAA4B,UAACW,OAAD,EAAUrD,KAAV,EAAoB;mBACvC4F,KAAR,CAAcD,IAAd,EAAoB3E,IAApB,CAAyB0B,OAAzB,CAAiC,UAACoD,YAAD,EAAe3E,SAAf,EAA6B;gBACzD,OAAO2E,aAAaC,OAApB,KAAgC,WAApC,EAAiD;0BACnCrB,KAAb,CAAmB8B,CAAnB,GAAuBV,aAAaC,OAAb,CAAqBU,gBAArB,CAAsCzG,KAAtC,EAA6CmB,SAA7C,CAAvB;0BACauD,KAAb,CAAmBgC,IAAnB,GAA0BZ,aAAaC,OAAb,CAAqBY,YAArB,EAA1B;0BACajC,KAAb,CAAmBR,KAAnB,GACE4B,aAAaC,OAAb,CAAqB7B,KAArB,GAA6Bb,QAAQuC,KAAR,CAAcD,IAAd,EAAoB3E,IAApB,CAAyBvB,MAAvD,GACAqG,aAAaC,OAAb,CAAqBvD,OAArB,CAA6B0D,kBAD7B,GAEAJ,aAAaC,OAAb,CAAqBvD,OAArB,CAA6BoE,aAH9B;;YAJF;WADD;;;;;eAgBKlB,QAAR,GAAmB,IAAnB;;;;UA5BG,IAAIC,IAAT,IAAiBtC,QAAQuC,KAAzB,EAAgC;aAAvBD,IAAuB;;KAJjC;;;EAlbJ;;;;;;mCA8dmC,SAASsB,gCAAT,CAA0CC,cAA1C,EAA0D;MACvFC,eAAe,KAAnB;MACID,eAAe3B,MAAf,CAAsB2B,eAAezH,MAAf,GAAwB,CAA9C,MAAqD,IAAzD,EAA+D;oBAC7CyH,eAAe3B,MAAf,CAAsB,CAAtB,EAAyB2B,eAAezH,MAAf,GAAwB,CAAjD,CAAjB;kBACe,IAAf;;MAEK2H,WAAWF,eAAeG,KAAf,CAAqB,GAArB,CAAjB;MACID,SAAS3H,MAAT,KAAoB,CAAxB,EAA2B;OACtB6H,QAAJ,CACC,IAAIC,KAAJ,CACC,kFAAkFL,cAAlF,GAAmG,GADpG,CADD;;MAMGM,gBAAgBJ,SAAS,CAAT,EAAYC,KAAZ,CAAkB,GAAlB,EAAuBI,MAAvB,CAA8B,UAACC,QAAD,EAAWC,OAAX,EAAuB;UACjED,SAASC,OAAT,CAAP;GADmB,EAEjB,KAAKC,oBAFY,CAApB;MAGI,OAAOJ,aAAP,KAAyB,UAA7B,EAAyC;OACpCF,QAAJ,CAAa,IAAIC,KAAJ,CAAU,sCAAsCH,SAAS,CAAT,CAAhD,CAAb;;MAEG,CAACD,YAAL,EAAmB;UACXK,cAAcK,IAAd,CAAmB,IAAnB,CAAP;;SAEML,cAAcM,IAAd,CAAmB,IAAnB,CAAP;EArfF;;;;;;sBA4fsB,SAASC,mBAAT,CAA6BC,GAA7B,EAAkC;MAClD,OAAOA,GAAP,KAAe,QAAnB,EAA6B;UACrB,KAAP;;SAEMA,IAAIzC,MAAJ,CAAW,CAAX,EAAc,CAAd,MAAqB,WAA5B;EAhgBF;;;;;;;qBAwgBqB,SAAS0C,kBAAT,CAA4BzF,OAA5B,EAAqC0F,QAArC,EAAkE;MAAnBC,SAAmB,uEAAP,KAAO;;MACjFC,SAAS,EAAb;OACK,IAAIC,YAAT,IAAyB7F,OAAzB,EAAkC;OAC7BzC,SAAQyC,QAAQ6F,YAAR,CAAZ;OACIF,SAAJ,EAAe;QACVE,aAAa9C,MAAb,CAAoB,CAApB,EAAuB,CAAvB,MAA8B,GAAlC,EAAuC;YAC/B8C,YAAP,IAAuBtI,MAAvB;KADD,MAEO,IAAIgD,MAAMC,OAAN,CAAcjD,MAAd,CAAJ,EAA0B;YACzBsI,YAAP,IAAuB,KAAKC,iBAAL,CAAuBvI,MAAvB,EAA8BmI,QAA9B,EAAwCC,SAAxC,CAAvB;KADM,MAEA,IAAI,QAAOpI,MAAP,yCAAOA,MAAP,OAAiB,QAAjB,IAA6BA,WAAU,IAA3C,EAAiD;YAChDsI,YAAP,IAAuB,KAAKJ,kBAAL,CAAwBlI,MAAxB,EAA+BmI,QAA/B,EAAyCC,SAAzC,CAAvB;KADM,MAEA;YACCE,YAAP,IAAuBtI,MAAvB;;IARF,MAUO;QACFsI,aAAa9C,MAAb,CAAoB,CAApB,EAAuB,CAAvB,MAA8B,GAAlC,EAAuC;YAC/B8C,YAAP,IAAuBtI,MAAvB;KADD,MAEO,IAAI,KAAKgI,mBAAL,CAAyBhI,MAAzB,CAAJ,EAAqC;YACpCsI,YAAP,IAAuB,KAAKpB,gCAAL,CAAsClH,MAAtC,EAA6CoI,SAA7C,EAAwDD,QAAxD,CAAvB;KADM,MAEA,IAAInF,MAAMC,OAAN,CAAcjD,MAAd,CAAJ,EAA0B;YACzBsI,YAAP,IAAuB,KAAKC,iBAAL,CAAuBvI,MAAvB,EAA8BmI,QAA9B,EAAwCC,SAAxC,CAAvB;KADM,MAEA,IAAI,QAAOpI,MAAP,yCAAOA,MAAP,OAAiB,QAAjB,IAA6BA,WAAU,IAA3C,EAAiD;YAChDsI,YAAP,IAAuB,KAAKJ,kBAAL,CAAwBlI,MAAxB,EAA+BmI,QAA/B,EAAyCC,SAAzC,CAAvB;KADM,MAEA;YACCE,YAAP,IAAuBtI,MAAvB;;;;SAIIqI,MAAP;EApiBF;;;;;;;oBA4iBoB,SAASE,iBAAT,CAA2BC,GAA3B,EAAgCL,QAAhC,EAA6D;;;MAAnBC,SAAmB,uEAAP,KAAO;;SACxEI,IAAIC,GAAJ,CAAQ,UAACC,IAAD,EAAOzI,KAAP,EAAiB;OAC3B,MAAK+H,mBAAL,CAAyBU,IAAzB,CAAJ,EAAoC;WAC5B,MAAKxB,gCAAL,CAAsClH,KAAtC,CAAP;IADD,MAEO,IAAIgD,MAAMC,OAAN,CAAcyF,IAAd,CAAJ,EAAyB;WACxB,MAAKH,iBAAL,CAAuBG,IAAvB,EAA6BP,QAA7B,EAAuCC,SAAvC,CAAP;IADM,MAEA,IAAI,QAAOM,IAAP,yCAAOA,IAAP,OAAgB,QAAhB,IAA4BA,SAAS,IAAzC,EAA+C;WAC9C,MAAKR,kBAAL,CAAwBQ,IAAxB,EAA8BP,QAA9B,EAAwCC,SAAxC,CAAP;;UAEMM,IAAP;GARM,CAAP;EA7iBF;;;;;;;eA8jBe,SAASC,YAAT,CAAsBlG,OAAtB,EAA+B0F,QAA/B,EAA4D;MAAnBC,SAAmB,uEAAP,KAAO;;MACrEpF,MAAMC,OAAN,CAAcR,OAAd,CAAJ,EAA4B;UACpB,KAAK8F,iBAAL,CAAuB9F,OAAvB,EAAgC0F,QAAhC,EAA0CC,SAA1C,CAAP;GADD,MAEO,IAAI,QAAO3F,OAAP,yCAAOA,OAAP,OAAmB,QAAnB,IAA+BA,YAAY,IAA/C,EAAqD;UACpD,KAAKyF,kBAAL,CAAwBzF,OAAxB,EAAiC0F,QAAjC,EAA2CC,SAA3C,CAAP;;MAEGb,QAAJ,CAAa,IAAIC,KAAJ,CAAU,qCAAoC/E,OAApC,yCAAoCA,OAApC,KAA8C,uBAAxD,CAAb;EApkBF;;;;;;;;sBAAA,iCA6kBuBmG,YA7kBvB,EA6kBqC;MAC7BC,aAAaD,aAAaE,OAAb,CAAqB,SAArB,CAAnB;MACID,aAAa,CAAjB,EAAoB;UACZD,aAAapD,MAAb,CAAoB,CAApB,EAAuBqD,UAAvB,CAAP;;SAEMD,YAAP;EAllBF;;;;;;;;;;gCA4lBgC,SAASG,6BAAT,CAAuCH,YAAvC,EAAqDI,SAArD,EAAgE;MACxFvG,UAAU;QACV;WACG;0BACe,KADf;YAEC;eACG;MAHJ;aAKE;eACE;MANJ;eAQI;YACH,OADG;iBAEE;cACH,yBADG;cAEH;;MAZH;aAeE;aACA,CACN;cACQ;kBACI,KADJ;qBAEO,IAFP;qBAGO,EAHP;kBAII;;OANN,CADA;aAWA,CACN;cACQ;kBACI,KADJ;qBAEO,IAFP;kBAGI;;OALN;;KA3BL;aAsCK;iBACI;YACL;aACC;OAFI;aAIJ,OAJI;uBAKM,iBALN;mBAME,uBANF;mBAOE,CAPF;oBAQG,CARH;cASH,QATG;aAUJ,QAVI;iBAWA,+BAXA;eAYF;;KAnDP;aAsDK,CACR;iBACa;KAFL,EAIR;iBACa;KALL;IAvDK;eAgEH;WACJ;0BACe,KADf;YAEC;eACG;MAHJ;aAKE;eACE;MANJ;eAQI;YACH,OADG;iBAEE;cACH,yBADG;cAEH;;MAZH;aAeE;aACA,CACN;gBACU,IADV;cAEQ;kBACI,KADJ;qBAEO,IAFP;qBAGO,EAHP;kBAII;;OAPN,CADA;aAYA,CACN;gBACU,IADV;cAEQ;kBACI,KADJ;qBAEO,IAFP;kBAGI;;OANN;;KA5BE;aAwCF;iBACI;YACL;aACC;OAFI;aAIJ,OAJI;uBAKM,iBALN;mBAME,uBANF;mBAOE,CAPF;oBAQG,CARH;cASH,QATG;aAUJ,QAVI;iBAWA,+BAXA;eAYF;;KArDA;aAwDF,CACR;iBACa;KAFL,EAIR;iBACa;KALL;IAxHK;kBAiIA;WACP;0BACe,KADf;YAEC;eACG;MAHJ;aAKE;eACE;MANJ;eAQI;YACH,OADG;iBAEE;cACH,yBADG;cAEH;;MAZH;aAeE;aACA,CACN;cACQ;kBACI,KADJ;qBAEO,IAFP;qBAGO,EAHP;kBAII;;OANN,CADA;aAWA,CACN;cACQ;kBACI,KADJ;qBAEO,IAFP;kBAGI;;OALN;;KA3BK;aAsCL;iBACI;YACL;aACC;OAFI;aAIJ,OAJI;uBAKM,iBALN;mBAME,uBANF;mBAOE,CAPF;oBAQG,CARH;cASH,QATG;aAUJ,QAVI;iBAWA,+BAXA;eAYF;;KAnDG;aAsDL,CACR;iBACa;KAFL,EAIR;iBACa;KALL;IAvLK;yBAgMO;WACd;0BACe,KADf;YAEC;eACG;MAHJ;aAKE;eACE;MANJ;eAQI;YACH,OADG;iBAEE;cACH,yBADG;cAEH;;MAZH;aAeE;aACA,CACN;gBACU,IADV;cAEQ;kBACI,KADJ;qBAEO,IAFP;qBAGO,EAHP;kBAII;;OAPN,CADA;aAYA,CACN;gBACU,IADV;cAEQ;kBACI,KADJ;qBAEO,IAFP;kBAGI;;OANN;;KA5BY;aAwCZ;iBACI;YACL;aACC;OAFI;aAIJ,OAJI;uBAKM,iBALN;mBAME,uBANF;mBAOE,CAPF;oBAQG,CARH;cASH,QATG;aAUJ,QAVI;iBAWA,+BAXA;eAYF;;KArDU;aAwDZ,CACR;iBACa;KAFL,EAIR;iBACa;KALL;IAxPK;SAiQT;WACE;0BACe,KADf;YAEC;eACG;MAHJ;aAKE;eACE;MANJ;eAQI;YACH,OADG;iBAEE;cACH,yBADG;cAEH;;MAZH;aAeE;aACA,CACN;cACQ;kBACI,KADJ;qBAEO,IAFP;qBAGO,EAHP;kBAII,kCAJJ;qBAKO;;OAPT,CADA;aAYA,CACN;cACQ;kBACI,KADJ;qBAEO,IAFP;kBAGI;;OALN;;KA5BJ;aAuCI;WACF,KADE;iBAEI;YACL;aACC;OAFI;aAIJ,OAJI;uBAKM,iBALN;mBAME,uBANF;mBAOE,CAPF;oBAQG,CARH;cASH,QATG;aAUJ,QAVI;iBAWA,+BAXA;eAYF;;KArDN;aAwDI,CACR;iBACa;KAFL;IAzTK;gBA+TF;WACL;0BACe,KADf;YAEC;eACG;MAHJ;aAKE;eACE;MANJ;eAQI;YACH,OADG;iBAEE;cACH,yBADG;cAEH;;MAZH;aAeE;aACA,CACN;cACQ;kBACI,KADJ;qBAEO,IAFP;qBAGO,EAHP;kBAII,kCAJJ;qBAKO;;OAPT,CADA;aAYA,CACN;gBACU,IADV;cAEQ;kBACI,KADJ;qBAEO,IAFP;kBAGI;;OANN;;KA5BG;aAwCH;WACF,KADE;iBAEI;YACL;aACC;OAFI;aAIJ,OAJI;uBAKM,iBALN;mBAME,uBANF;mBAOE,CAPF;oBAQG,CARH;cASH,QATG;aAUJ,QAVI;iBAWA,+BAXA;eAYF;;KAtDC;aAyDH,CACR;iBACa;KAFL;IAxXK;cA8XJ;WACH;0BACe,KADf;YAEC;eACG;MAHJ;aAKE;eACE;MANJ;eAQI;YACH,OADG;iBAEE;cACH,yBADG;cAEH;;MAZH;aAeE;aACA,CACN;cACQ;kBACI,KADJ;qBAEO,IAFP;qBAGO,EAHP;kBAII,kCAJJ;qBAKO;;OAPT,CADA;aAYA,CACN;cACQ;kBACI,KADJ;qBAEO,IAFP;kBAGI;;OALN;;KA5BC;aAuCD;kBACK,CADL;WAEF,KAFE;iBAGI;YACL;aACC;OAFI;aAIJ,OAJI;uBAKM,iBALN;mBAME,uBANF;mBAOE,CAPF;oBAQG,CARH;cASH,QATG;aAUJ,QAVI;iBAWA,+BAXA;eAYF;;KAtDD;aAyDD,CACR;iBACa;KAFL;IAvbK;qBA6bG;WACV;0BACe,KADf;YAEC;eACG;MAHJ;aAKE;eACE;MANJ;eAQI;YACH,OADG;iBAEE;cACH,yBADG;cAEH;;MAZH;aAeE;aACA,CACN;cACQ;kBACI,KADJ;qBAEO,IAFP;qBAGO,EAHP;kBAII,kCAJJ;qBAKO;;OAPT,CADA;aAYA,CACN;gBACU,IADV;cAEQ;kBACI,KADJ;qBAEO,IAFP;kBAGI;;OANN;;KA5BQ;aAwCR;WACF,KADE;kBAEK,CAFL;iBAGI;YACL;aACC;OAFI;aAIJ,OAJI;uBAKM,iBALN;mBAME,uBANF;mBAOE,CAPF;oBAQG,CARH;cASH,QATG;aAUJ,QAVI;iBAWA,+BAXA;eAYF;;KAvDM;aA0DR,CACR;iBACa;KAFL;IAvfK;QA6fV;WACG;0BACe,KADf;YAEC;eACG;MAHJ;aAKE;eACE,IADF;cAEC;uBACS;;MARZ;uBAWY,CAXZ;aAYE;eACE;eACA;;MAdJ;eAiBI;YACH,OADG;iBAEE;cACH,yBADG;cAEH;;MArBH;aAwBE;KAzBL;aA2BK;iBACI;YACL;aACC;OAFI;aAIJ,OAJI;uBAKM,iBALN;mBAME,uBANF;mBAOE,CAPF;oBAQG,CARH;cASH,KATG;aAUJ,QAVI;iBAWA,+BAXA;eAYF;;KAxCP;aA2CK;IAxiBK;aA0iBL;WACF;0BACe,KADf;YAEC;eACG;MAHJ;aAKE;eACE,IADF;eAEE,yBAFF;cAGC;uBACS;;MATZ;uBAYY,EAZZ;aAaE;eACE;eACA;;MAfJ;eAkBI;YACH,OADG;iBAEE;cACH,yBADG;cAEH;;MAtBH;aAyBE;KA1BA;aA4BA;iBACI;YACL;aACC;OAFI;aAIJ,OAJI;uBAKM,iBALN;mBAME,uBANF;mBAOE,CAPF;oBAQG,CARH;cASH,KATG;aAUJ,QAVI;iBAWA,+BAXA;eAYF;;KAzCF;aA4CA;IAtlBK;WAwlBP;WACA;0BACe,KADf;YAEC;eACG;MAHJ;aAKE;eACE;MANJ;WAQA,MARA;eASI;YACH,OADG;iBAEE;cACH,yBADG;cAEH;;MAbH;aAgBE;aACA,CACN;gBACU,IADV;oBAEc,IAFd;cAGQ;kBACI;;OALN;;KAlBF;aA6BE;iBACI;eACF;;KA/BJ;aAkCE,CACR;iBACa;KAFL;;GA1nBX;MAioBI,OAAOA,QAAQmG,YAAR,CAAP,KAAiC,WAArC,EAAkD;UAC1CnG,QAAQmG,YAAR,CAAP;;;MAGKK,yBAAyB,KAAKC,qBAAL,CAA2BN,YAA3B,CAA/B;MACI,OAAOnG,QAAQwG,sBAAR,CAAP,KAA2C,WAA/C,EAA4D;UACpDxG,QAAQwG,sBAAR,CAAP;;MAEG1B,QAAJ,CAAa,IAAIC,KAAJ,CAAUoB,eAAe,yBAAzB,CAAb;EAtuCF;;;;;;;;yBA+uCyB,SAASO,sBAAT,CAAgCP,YAAhC,EAA8CI,SAA9C,EAAyD;SACzE,KAAKD,6BAAL,CAAmCH,YAAnC,EAAiDI,SAAjD,EAA4DI,KAAnE;EAhvCF;;;;;;;;2BAyvC2B,SAASC,wBAAT,CAAkCT,YAAlC,EAAgDI,SAAhD,EAA2D;SAC7E,KAAKD,6BAAL,CAAmCH,YAAnC,EAAiDI,SAAjD,EAA4D1F,OAAnE;EA1vCF;;;;;;;;oBAmwCoB,SAASgG,iBAAT,CAA2BV,YAA3B,EAAyCI,SAAzC,EAAoD;SAC/D,KAAKD,6BAAL,CAAmCH,YAAnC,EAAiDI,SAAjD,EAA4DO,OAAnE;EApwCF;eAswCe,SAASjK,YAAT,GAAwB;SAC9B,KAAKpB,SAAZ;EAvwCF;eAywCe,SAASe,YAAT,CAAsBuK,OAAtB,EAA+B;OACvCtL,SAAL,GAAiBsL,OAAjB;SACO,IAAP;EA3wCF;cA6wCc,SAASC,WAAT,GAAuB;SAC5B,KAAKnK,YAAL,GAAoBC,IAApB,CAAyB,aAAzB,EAAwCG,MAAxC,KAAmD,CAAnD,IAAwD,KAAKJ,YAAL,GAAoBC,IAApB,CAAyB,YAAzB,EAAuCG,MAAvC,GAAgD,CAA/G;EA9wCF;oBAgxCoB,SAASgK,iBAAT,GAA6B;SACxCC,OAAOC,UAAd;EAjxCF;oBAmxCoB,SAASC,iBAAT,CAA2BC,QAA3B,EAAqC;MACnD,OAAOA,QAAP,KAAoB,WAAxB,EAAqC;cACzB,KAAX;;MAEG,KAAKC,aAAL,KAAuB,KAAvB,IAAgC,CAACD,QAArC,EAA+C;QACzCC,aAAL,GAAqB,KAAKzK,YAAL,GACnBC,IADmB,CACd,uBADc,EAEnBA,IAFmB,CAEd,QAFc,EAGnByK,GAHmB,CAGf,CAHe,CAArB;;SAKM,KAAKD,aAAZ;EA7xCF;uBA+xCuB,SAASE,oBAAT,GAAgC;MACjDC,eAAe,IAAnB;MACIC,kBAAkBD,aAAa5K,YAAb,GAA4BC,IAA5B,CAAiC,cAAjC,CAAtB;kBACgB6K,EAAhB,CAAmB,OAAnB,EAA4B,YAAY;OACnCC,MAAMF,gBAAgBlJ,IAAhB,CAAqB,KAArB,CAAV;gBACaqJ,OAAb,CAAqBD,GAArB,EAA0BE,IAA1B,CAA+B,UAAUC,QAAV,EAAoB;oBAClCjL,IAAhB,CAAqB,QAArB,EAA+BkL,IAA/B,CAAoCD,SAASnC,MAAT,CAAgBqC,UAApD;oBAEEnL,IADF,CACO,MADP,EAEEoL,QAFF,CAEW,QAFX,EAGEC,IAHF,CAGO,aAHP,EAGsB,IAHtB;oBAKErL,IADF,CACO,GADP,EAEEsL,WAFF,CAEc,QAFd,EAGED,IAHF,CAGO,aAHP,EAGsB,KAHtB;IAND;GAFD;EAlyCF;gBAizCgB,SAASE,aAAT,GAAyB;MACjC5M,YAAYc,EAAE,KAAK6K,iBAAL,CAAuB,KAAvB,CAAF,CAAlB;MACI,OAAO3L,SAAP,KAAqB,WAAzB,EAAsC;;UAE9B,KAAP;;MAEK6M,SAAS7M,UAAU8M,OAAV,CAAkB,kBAAlB,CAAf;MACMC,UAAUF,OAAOxL,IAAP,CAAY,yBAAZ,CAAhB;MACM2L,SAASH,OAAOxL,IAAP,CAAY,wBAAZ,CAAf;MACI4L,iBAAiBJ,OAAOK,WAAP,KAAuBL,OAAOxL,IAAP,CAAY,wBAAZ,EAAsC8L,WAAtC,EAA5C;MACIH,OAAOxL,MAAX,EAAmB;qBACAwL,OAAOG,WAAP,EAAlB;;MAEG,CAACJ,QAAQvL,MAAb,EAAqB;;;UAGb4L,GAAR,CAAY,QAAZ,EAAsBH,iBAAiB,IAAvC;UACQG,GAAR,CAAY,YAAZ,EAA0BH,iBAAiB,IAA3C;MACI,OAAO,KAAKI,SAAZ,KAA0B,WAA9B,EAA2C;QACrCA,SAAL,CAAe/E,MAAf;GADD,MAEO;QACD+E,SAAL,GAAiBlN,IAAImN,gBAAJ,CAAqBP,OAArB,EAA8B;sBAC5B;IADF,CAAjB;;EAt0CH;sBA20CsB,SAASQ,mBAAT,GAA+B;OAC9CnM,YAAL,GAAoB8K,EAApB,CAAuB,qBAAvB,EAA8C,UAAUzI,CAAV,EAAa;OACtD6H,UAAUzL,OAAO4D,EAAE+J,MAAT,CAAd;OACIC,kBAAkBnC,QAAQwB,OAAR,CAAgB,wBAAhB,EAA0CtL,MAA1C,GAAmD,CAAnD,GAAuD,IAAvD,GAA8D,KAApF;OACIiM,eAAJ,EAAqB;;;;KAInBC,eAAF;GAPD;EA50CF;;;;;;eA21Ce,SAASC,YAAT,GAAwB;MACjC3B,eAAe,IAAnB;MACI4B,QAAQ5B,aACV5K,YADU,GAEVC,IAFU,CAEL,aAFK,EAGVC,GAHU,EAAZ;MAII,OAAOsM,KAAP,KAAiB,WAArB,EAAkC;UACzB5B,aAAalB,SAAb,GAAyB8C,KAAjC;;eAEY9C,SAAb,GAAyBnJ,KAAKC,KAAL,CAAWgM,KAAX,CAAzB;SACO5B,aAAalB,SAApB;EAr2CF;oBAu2CoB,SAAS+C,iBAAT,GAA6B;MAC3C7N,YAAY,KAAKoB,YAAL,EAAhB;MACI0M,0BAA0B9N,UAAUqB,IAAV,CAAe,yBAAf,CAA9B;MACI0M,kBAAkBD,wBAAwBzM,IAAxB,CAA6B,YAA7B,CAAtB;kBACgB2M,QAAhB,CAAyB;OACpB,eADoB;OAEpB,eAFoB;OAGpBF;GAHL;EA32CF;;;;;UAAA,qBAq3CWxC,OAr3CX,EAq3CoB;;;MACduB,SAASvB,QAAQwB,OAAR,CAAgB,kBAAhB,CAAb;MACCmB,QAAQpB,OAAOxL,IAAP,CAAY,iBAAZ,EAA+BqG,IAA/B,CAAoC,OAApC,CADT;MAECwG,iBAAiBrB,OAAOxL,IAAP,CAAY,sBAAZ,EAAoCyK,GAApC,CAAwC,CAAxC,CAFlB;MAGCqC,QAAQrN,EAAE,0BAAF,CAHT;QAIMgL,GAAN,CAAU,CAAV,EAAasC,MAAb,GAAsB,YAAM;OACvBnI,QAAQnF,EAAEoN,cAAF,EAAkBG,UAAlB,EAAZ;OACIhI,SAASvF,EAAEoN,cAAF,EAAkBf,WAAlB,EAAb;OACIlH,QAAQ,GAAZ,EAAiB;YACR,GAAR;;OAEGI,SAAS,GAAb,EAAkB;aACR,GAAT;;UAEIiI,UAAL,CAAgBH,MAAMrC,GAAN,CAAU,CAAV,CAAhB,EAA8BmC,KAA9B,EAAqChI,KAArC,EAA4CI,MAA5C;GATD;MAWIkI,WAAJ,CAAgBL,cAAhB,EAAgC,uBAAe;SACxCpC,GAAN,CAAU,CAAV,EAAa0C,GAAb,GAAmBC,WAAnB;GADD;EAr4CF;;;;;;oBAAA,+BA64CqBnD,OA74CrB,EA64C8B;MACxBuB,SAASvB,QAAQwB,OAAR,CAAgB,kBAAhB,CAAb;MACCmB,QAAQpB,OAAOxL,IAAP,CAAY,iBAAZ,EAA+BqG,IAA/B,CAAoC,OAApC,CADT;MAEI6G,WAAJ,CAAgB1B,OAAOxL,IAAP,CAAY,sBAAZ,EAAoCyK,GAApC,CAAwC,CAAxC,CAAhB,EAA4D,uBAAe;OACtE4C,SAASC,SAASC,aAAT,CAAuB,GAAvB,CAAb;UACOC,YAAP,CAAoB,MAApB,EAA4BJ,WAA5B;UACOI,YAAP,CAAoB,UAApB,EAAgCZ,QAAQ,MAAxC;UACOa,KAAP;GAJD;EAh5CF;;;iBAw5CiB,SAASC,cAAT,GAA0B;MACrC,CAAC,KAAKxD,WAAL,EAAL,EAAyB;QACnByD,SAAL,CAAe,KAAKzK,OAApB;GADD,MAEO;QACDsJ,iBAAL;;OAEIoB,oBAAL;OACKC,cAAL;OACKC,yBAAL;OACK5B,mBAAL;OACK6B,yBAAL;OACKC,oBAAL;OACKC,qBAAL;OACKC,gBAAL;OACKC,qBAAL;OACK5C,aAAL;EAv6CF;oBAy6CoB,SAAS6C,iBAAT,GAA6B;OAC1C7C,aAAL;MACI,CAAC,KAAKrB,WAAL,EAAL,EAAyB;QACnByD,SAAL,CAAe,KAAKzK,OAApB;GADD,MAEO;QACDsJ,iBAAL;;OAEIoB,oBAAL;OACKM,gBAAL;EAj7CF;mBAm7CmB,SAASG,gBAAT,CAA0BC,cAA1B,EAA0C;MACvDA,eAAenO,MAAnB,EAA2B;OACtBxB,YAAY,KAAKoB,YAAL,EAAhB;OACCwO,WAAW5P,UAAUqB,IAAV,CAAe,oBAAf,CADZ;OAEC8K,MAAMyD,SAAS7M,IAAT,CAAc,KAAd,CAFP;SAGMoJ,IAAI0D,OAAJ,CAAY,iBAAZ,EAA+B,EAA/B,CAAN;SACM1D,IAAI0D,OAAJ,CAAY,gBAAZ,EAA8B,EAA9B,CAAN;UACO,aAAP;OACIC,OAAOH,eAAe5M,IAAf,CAAoB,MAApB,CAAX;OACCgN,YAAY,MADb;OAECC,OAAO,qBAFR;OAGCC,WAAW,mBAHZ;OAIIH,QAAQ,MAAZ,EAAoB;gBACP,KAAZ;WACO,mBAAP;eACW,qBAAX;;kBAEc/M,IAAf,CAAoB,MAApB,EAA4BgN,SAA5B;kBACerD,IAAf,CAAoB,OAApB,EAA6BiD,eAAe5M,IAAf,CAAoBgN,SAApB,CAA7B;kBACerD,IAAf,CAAoB,KAApB,EAA2BiD,eAAe5M,IAAf,CAAoBgN,SAApB,CAA3B;UACOA,SAAP;kBAEE1O,IADF,CACO,MADP,EAEEsL,WAFF,CAEcsD,QAFd,EAGExD,QAHF,CAGWuD,IAHX;YAISjN,IAAT,CAAc,KAAd,EAAqBoJ,GAArB;;EA58CH;cAAA,2BA+8CiB;MACT+D,cAAc,KAAKtM,aAAL,CAAmBuM,aAAnB,EAApB;MACMC,QAAQ,IAAIC,KAAJ,EAAd;QACM7B,GAAN,GAAY0B,WAAZ;SACOE,KAAP;EAn9CF;WAAA,sBAq9CYjC,KAr9CZ,EAq9CmBF,KAr9CnB,EAq9C0BhI,KAr9C1B,EAq9CiCI,MAr9CjC,EAq9CyC;MACjCiK,QAAQhQ,OAAOiQ,IAAP,CAAY,EAAZ,EAAgB,OAAhB,EAAyB,YAAYlK,MAAZ,GAAqB,SAArB,GAAiCJ,KAA1D,CAAd;QACM0I,QAAN,CAAe6B,KAAf,CAAqB,wBAAwBvC,KAAxB,GAAgC,UAArD;QACMU,QAAN,CAAe6B,KAAf,CAAqB,gBAArB;QACM7B,QAAN,CAAe6B,KAAf,CACC1P,EAAE,OAAF,EACE2P,MADF,CACStC,KADT,EAEE5B,IAFF,EADD;QAKMoC,QAAN,CAAe6B,KAAf,CAAqB,gBAArB;QACM7B,QAAN,CAAe+B,KAAf,GAVuC;QAWjCC,KAAN,GAXuC;aAY5B,YAAY;SAChBL,KAAN;SACMI,KAAN;GAFD,EAGG,IAHH;EAj+CF;;wBAs+CwB,SAASlB,qBAAT,GAAiC;;;MACjDxP,YAAY,KAAKoB,YAAL,EAAlB;MACMwP,SAAS5Q,UAAUqB,IAAV,CAAe,wBAAf,CAAf;MACMwP,iBAAiBD,OAAOvP,IAAP,CAAY,iBAAZ,CAAvB;MACMyP,cAAcF,OAAOvP,IAAP,CAAY,cAAZ,CAApB;cACY6K,EAAZ,CAAe,OAAf,EAAwB,aAAK;OACtBiC,QAAQ,OAAK4C,aAAL,EAAd;UACKzC,UAAL,CAAgBH,KAAhB,EAAuByC,OAAOvP,IAAP,CAAY,iBAAZ,EAA+B2P,IAA/B,EAAvB,EAA8D,GAA9D,EAAmE,GAAnE;GAFD;iBAIe9E,EAAf,CAAkB,OAAlB,EAA2B,aAAK;OACzBiC,QAAQrN,EAAE,OAAKiQ,aAAL,EAAF,CAAd;OACME,IAAInQ,EAAE,KAAF,EACR4L,IADQ,CACH,MADG,EACKyB,MAAMzB,IAAN,CAAW,KAAX,CADL,EAERA,IAFQ,CAEH,UAFG,EAESkE,OAAOvP,IAAP,CAAY,2BAAZ,EAAyC2P,IAAzC,KAAkD,MAF3D,EAGRE,QAHQ,CAGClR,SAHD,CAAV;KAIE,CAAF,EAAK8O,KAAL;KACEqC,MAAF;GAPD;YASU9P,IAAV,CAAe,yBAAf,EAA0C6K,EAA1C,CAA6C,OAA7C,EAAsD,UAAUzI,CAAV,EAAa;oBACjD1D,WAAjB,GAA+BqR,iBAA/B,CAAiDtQ,EAAE,IAAF,EAAQiC,IAAR,CAAa,aAAb,CAAjD;GADD;EAx/CF;wBA4/CwB,SAASuM,qBAAT,GAAiC;MACnDtD,eAAe,IAAnB;MACIhM,YAAY,KAAKoB,YAAL,EAAhB;eACasO,gBAAb,CAA8B1P,UAAUqB,IAAV,CAAe,mBAAf,CAA9B;YACUA,IAAV,CAAe,mBAAf,EAAoC6K,EAApC,CAAuC,OAAvC,EAAgD,UAAUzI,CAAV,EAAa;OACxDmM,WAAW5P,UAAUqB,IAAV,CAAe,oBAAf,CAAf;gBACaqO,gBAAb,CAA8B7P,OAAO4D,EAAE4N,aAAT,CAA9B;YACSvC,KAAT;GAHD;EAhgDF;uBAsgDuB,SAASO,oBAAT,GAAgC;MACjDrD,eAAe,IAAnB;MACIsF,gBAAgB,KAAKlQ,YAAL,GAAoBC,IAApB,CAAyB,iDAAzB,CAApB;eACakQ,YAAb,CAA0BD,aAA1B;gBACcpF,EAAd,CAAiB,QAAjB,EAA2B,aAAK;OAC3ByD,iBAAiB7O,EAAE2C,EAAE4N,aAAJ,CAArB;OACIG,wBAAwB7B,eAAe7C,OAAf,CAAuB,wBAAvB,CAA5B;OACI8C,WAAW4B,sBAAsBnQ,IAAtB,CAA2B,oBAA3B,CAAf;gBACakQ,YAAb,CAA0B5B,cAA1B,EAA0CtD,IAA1C,CAA+C,UAAUtJ,IAAV,EAAgB;QAC1DA,IAAJ,EAAU;cACA+L,KAAT;;IAFF;GAJD;EA1gDF;eAqhDe,SAASyC,YAAT,CAAsBD,aAAtB,EAAqC;MAC9CG,YAAY5R,OAAO6R,QAAP,EAAhB;gBACcC,IAAd,CAAmB,UAAU5P,KAAV,EAAiB0B,CAAjB,EAAoB;OAClCkM,iBAAiB9P,OAAO4D,CAAP,CAArB;OACI+N,wBAAwB7B,eAAe7C,OAAf,CAAuB,wBAAvB,CAA5B;OACI8C,WAAW4B,sBAAsBnQ,IAAtB,CAA2B,oBAA3B,CAAf;OACI8K,MAAMyD,SAAS7M,IAAT,CAAc,KAAd,CAAV;OACI6O,YAAYjC,eAAe5M,IAAf,CAAoB,WAApB,CAAhB;OACI6O,cAAc,EAAlB,EAAsB;QACjBC,YAAYlC,eAAe5M,IAAf,CAAoB,WAApB,CAAhB;UACMoJ,IAAI0D,OAAJ,CAAY,MAAM+B,SAAN,GAAkB,GAAlB,GAAwBC,SAApC,EAA+C,EAA/C,CAAN;WACO,MAAMD,SAAN,GAAkB,GAAlB,GAAwBC,SAA/B;aACS9O,IAAT,CAAc,KAAd,EAAqBoJ,GAArB;cACU2F,OAAV,CAAkB,IAAlB;IALD,MAMO;cACIC,MAAV;;GAbF;SAgBON,UAAUO,OAAV,EAAP;EAviDF;gBAyiDgB,SAASC,aAAT,GAAyB;SAChC,EAAP;EA1iDF;;;;;gBAgjDgB,SAASC,aAAT,GAAyB;MACnClG,eAAe,IAAnB;MACImG,SAAS,KAAK/Q,YAAL,EAAb;MACIkK,UAAU6G,OAAO9Q,IAAP,CAAY,oBAAZ,CAAd;MACI8K,MAAMb,QAAQvI,IAAR,CAAa,KAAb,CAAV;MACIqP,mBAAmBD,OAAO9Q,IAAP,CAAY,yBAAZ,CAAvB;MACIgR,SAASlG,GAAb;MACImG,gBAAgBH,OAAO9Q,IAAP,CAAY,eAAZ,CAApB;MACIiR,cAAc9Q,MAAd,GAAuB,CAA3B,EAA8B;YACpB,EAAT;UACO2K,GAAP,GAAaA,GAAb;UACOpJ,IAAP,GAAc,EAAd;iBACc4O,IAAd,CAAmB,UAAC5P,KAAD,EAAQwQ,UAAR,EAAuB;QACrCC,eAAe1R,EAAEyR,UAAF,CAAnB;QACIE,aAAaD,aAAa9F,IAAb,CAAkB,MAAlB,CAAjB;QACI,eAAe8F,aAAa9F,IAAb,CAAkB,MAAlB,CAAnB,EAA8C;YACtC3J,IAAP,CAAY0P,UAAZ,IAA0BD,aAAaE,EAAb,CAAgB,UAAhB,CAA1B;KADD,MAEO;YACC3P,IAAP,CAAY0P,UAAZ,IAA0BD,aAAalR,GAAb,EAA1B;;IANF;;;MAWGqR,0BAA0BR,OAAO9Q,IAAP,CAAY,0CAAZ,CAA9B;MACIsR,wBAAwBnR,MAAxB,GAAiC,CAArC,EAAwC;YAC9B,EAAT;UACO2K,GAAP,GAAaA,GAAb;UACOpJ,IAAP,GAAc,EAAd;2BACwB4O,IAAxB,CAA6B,UAAC5P,KAAD,EAAQwQ,UAAR,EAAuB;QAC/CC,eAAe3S,OAAO0S,UAAP,CAAnB;QACIE,aAAaD,aAAa9F,IAAb,CAAkB,MAAlB,CAAjB;QACIpC,MAAM,KAAV;QACImI,WAAWnL,MAAX,CAAkB,CAAC,CAAnB,MAA0B,IAA9B,EAAoC;WAC7B,IAAN;kBACamL,WAAWnL,MAAX,CAAkB,CAAlB,EAAqBmL,WAAWjR,MAAX,GAAoB,CAAzC,CAAb;SACI,CAACsD,MAAMC,OAAN,CAAcsN,OAAOtP,IAAP,CAAY0P,UAAZ,CAAd,CAAL,EAA6C;aACrC1P,IAAP,CAAY0P,UAAZ,IAA0B,EAA1B;;;QAGE,eAAeD,aAAa9F,IAAb,CAAkB,MAAlB,CAAnB,EAA8C;SACzCpC,GAAJ,EAAS;aACDvH,IAAP,CAAY0P,UAAZ,EAAwBvN,IAAxB,CAA6BsN,aAAaE,EAAb,CAAgB,UAAhB,CAA7B;MADD,MAEO;aACC3P,IAAP,CAAY0P,UAAZ,IAA0BD,aAAaE,EAAb,CAAgB,UAAhB,CAA1B;;KAJF,MAMO;SACFpI,GAAJ,EAAS;aACDvH,IAAP,CAAY0P,UAAZ,EAAwBvN,IAAxB,CAA6BsN,aAAalR,GAAb,EAA7B;MADD,MAEO;aACCyB,IAAP,CAAY0P,UAAZ,IAA0BD,aAAalR,GAAb,EAA1B;;;IArBH;;MA0BGsR,mBAAmBT,OAAO9Q,IAAP,CAAY,yBAAZ,CAAvB;MACIwR,yBAAyBV,OAAO9Q,IAAP,CAAY,wBAAZ,CAA7B;mBACiBkL,IAAjB,CAAsB,EAAtB;yBACuBA,IAAvB,CAA4B,EAA5B;mBACiBuG,iBAAjB;MAEC,KAAKC,UAAL,KACCJ,wBAAwBnR,MAAxB,IAAkC8Q,cAAc9Q,MAAhD,IAA0D2Q,OAAO9Q,IAAP,CAAY,wBAAZ,CAD3D,CADD,EAGE;gBACY2R,gBAAb,CAA8BX,OAAOlG,GAAP,GAAakG,OAAOlG,GAApB,GAA0BkG,MAAxD,EAAgEA,OAAOtP,IAAP,GAAcsP,OAAOtP,IAArB,GAA4B,EAA5F;;eAEYqJ,OAAb,CAAqBiG,MAArB,EACEhG,IADF,CACO,gBAAQ;UACNvL,EAAEiC,IAAF,CAAP;OACIiK,SAASjK,KAAKkQ,MAAL,CAAY,sBAAZ,CAAb;oBACiBH,iBAAjB,CAAmC;UAC5B;IADP;OAGI9F,OAAOxL,MAAX,EAAmB;aACTwL,OAAOkG,KAAP,CAAa,IAAb,EAAmB,IAAnB,CAAT;2BACuB3G,IAAvB,CAA4BS,MAA5B;SACK2E,IAAL,CAAU,UAAUwB,CAAV,EAAa1P,CAAb,EAAgB;SACrB5D,OAAO,IAAP,EAAauT,QAAb,CAAsB,qBAAtB,CAAJ,EAAkD;WAC5CC,MAAL,CAAYF,CAAZ,EAAe,CAAf;;KAFF;;oBAMgB5G,IAAjB,CAAsBxJ,IAAtB,EAA4BuQ,OAA5B,CAAoC5S,oBAAoB6S,uBAAxD;GAhBF,EAkBEC,IAlBF,CAkBO,YAAM;oBACMV,iBAAjB,CAAmC;UAC5B;IADP;GAnBF;EAjnDF;iBAyoDiB,SAAS5D,cAAT,GAA0B;MACnClP,YAAY,KAAKoB,YAAL,EAAlB;MACMqS,SAASzT,UAAUqB,IAAV,CAAe,wBAAf,CAAf;MACMqS,aAAa1T,UAAUqB,IAAV,CAAe,oBAAf,CAAnB;MACMsS,cAAcD,WAAW3Q,IAAX,CAAgB,KAAhB,CAApB;MACM6Q,UAAU5T,UAAUqB,IAAV,CAAe,kBAAf,CAAhB;SACO+L,GAAP,CAAW,OAAX,EAAoB,MAApB;SACO+E,MAAP,GAAgB1F,QAAhB,CAAyB,OAAzB;SACOkF,IAAP,CAAY,UAAC5P,KAAD,EAAQuJ,OAAR,EAAoB;OACzBuI,YAAY/S,EAAEwK,OAAF,EAAWvI,IAAX,CAAgB,WAAhB,CAAlB;KACEuI,OAAF,EACEoB,IADF,CACO,aADP,EACsBmH,UAAUnP,KADhC,EAEE3B,IAFF,CAEO,aAFP,EAEsB8Q,UAAUnP,KAFhC;GAFD;MAMItC,MAAJ,CAAW0R,QAAX,CAAoBC,uBAApB,CAA4CH,OAA5C,EAAqD,SAArD,EAAgE,EAAEI,mBAAmB,cAArB,EAAhE;MACI5R,MAAJ,CAAW6R,IAAX,CAAgBC,QAAhB,CAAyBlU,SAAzB;MACIoC,MAAJ,CAAW6R,IAAX,CAAgBE,aAAhB,CAA8BnU,SAA9B;SACOkM,EAAP,CAAU,8BAAV,EAA0C,aAAK;OAC1CkI,eAAe,EAAnB;aACU/S,IAAV,CAAe,wBAAf,EAAyCsQ,IAAzC,CAA8C,UAAC5P,KAAD,EAAQwQ,UAAR,EAAuB;QAChE8B,aAAa,EAAjB;QACMC,2BAA2BxT,EAAEyR,UAAF,CAAjC;QACMsB,YAAYS,yBAAyBvR,IAAzB,CAA8B,WAA9B,CAAlB;QACMwR,YAAYD,yBAAyB5H,IAAzB,CAA8B,MAA9B,CAAlB;QACI8H,cAAcF,yBAAyBhT,GAAzB,EAAlB;QACI,QAAOkT,WAAP,yCAAOA,WAAP,OAAuB,QAA3B,EAAqC;SAChCA,eAAe,IAAnB,EAAyB;oBACV,EAAd;MADD,MAEO;oBACQA,YAAYC,IAAZ,CAAiB,IAAjB,CAAd;;;kBAGYD,YAAYE,IAAZ,EAAd;QACIF,YAAYhT,MAAZ,IAAsB,CAA1B,EAA6B;;YAErB,IAAP;;QAEGmT,iBAAiB,GAArB;QACId,UAAUjM,cAAV,CAAyB,gBAAzB,CAAJ,EAAgD;sBAC9BiM,UAAUc,cAA3B;KADD,MAEO,IACN9U,OAAO+U,OAAP,CAAef,UAAUlQ,IAAzB,EAA+B,CAC9B,SAD8B,EAE9B,MAF8B,EAG9B,aAH8B,EAI9B,OAJ8B,EAK9B,UAL8B,EAM9B,MAN8B,EAO9B,SAP8B,EAQ9B,kBAR8B,EAS9B,UAT8B,EAU9B,eAV8B,EAW9B,qBAX8B,CAA/B,KAYM,CAbA,EAcL;sBACgB,GAAjB;KAfM,MAgBA,IAAIkQ,UAAUlQ,IAAV,KAAmB,MAAnB,IAA6BkQ,UAAUlQ,IAAV,KAAmB,UAApD,EAAgE;sBACrD,IAAjB;KADM,MAEA,IAAIkQ,UAAUlQ,IAAV,KAAmB,eAAnB,IAAsCkQ,UAAUlQ,IAAV,KAAmB,uBAA7D,EAAsF;sBAC3E,GAAjB;;eAEUuB,IAAX,CAAgBqP,SAAhB;eACWrP,IAAX,CAAgByP,cAAhB;eACWzP,IAAX,CAAgBsP,WAAhB;QACIX,UAAUlQ,IAAV,KAAmB,MAAnB,IAA6BkQ,UAAUlQ,IAAV,KAAmB,uBAApD,EAA6E;gBACjEuB,IAAX,CACCpE,EAAE,8DAA8DyT,SAA9D,GAA0E,IAA5E,EAAkF7M,IAAlF,CAAuF,SAAvF,CADD;;iBAIYxC,IAAb,CAAkBmP,UAAlB;IAlDD;OAoDIlI,MAAMwH,cAAc,iBAAd,GAAkChS,KAAKkT,SAAL,CAAe,CAACT,YAAD,CAAf,CAA5C;cACWrR,IAAX,CAAgB,KAAhB,EAAuBoJ,GAAvB;cACWmH,OAAX,CAAmB,OAAnB;GAxDD;EA1pDF;4BAqtD4B,SAASnE,yBAAT,GAAqC;MAC3DnP,YAAY,KAAKoB,YAAL,EAAhB;YACU8K,EAAV,CAAa,QAAb,EAAuB,eAAvB,EAAwC,aAAK;aAClC7K,IAAV,CAAe,oBAAf,EAAqCiS,OAArC,CAA6C,OAA7C;GADD;MAGItT,UAAUqB,IAAV,CAAe,sBAAf,EAAuCG,MAA3C,EAAmD;OAC9CY,MAAJ,CAAW0R,QAAX,CAAoBgB,sBAApB,CAA2C9U,UAAUqB,IAAV,CAAe,kBAAf,CAA3C;QACKD,YAAL,GAAoB8K,EAApB,CAAuB,QAAvB,EAAiC,oCAAjC,EAAuE,aAAK;cACjE7K,IAAV,CAAe,oBAAf,EAAqCiS,OAArC,CAA6C,OAA7C;IADD;;EA5tDH;8BAiuD8B,SAAStS,2BAAT,CAAqChB,SAArC,EAAgD;MACxEgM,eAAe,IAAnB;YACUE,EAAV,CAAaxL,oBAAoBqU,mBAAjC,EAAsD,UAAUtR,CAAV,EAAa;gBACrDsL,cAAb;GADD;EAnuDF;iCAuuDiC,SAAS9N,8BAAT,CAAwCjB,SAAxC,EAAmD;MAC9EgM,eAAe,IAAnB;YACUgJ,GAAV,CAActU,oBAAoB6S,uBAAlC;YACUrH,EAAV,CAAaxL,oBAAoB6S,uBAAjC,EAA0D,UAAU9P,CAAV,EAAa;gBACzDgM,iBAAb;GADD;EA1uDF;uBA8uDuB,SAASR,oBAAT,GAAgC;MAC/CjD,eAAe,IAArB;MACIiJ,UAAU,KAAd;IACEjJ,aAAapI,aAAb,CAA2BsR,MAA7B,EACEhJ,EADF,CACK,OADL,EACc,UAAUzI,CAAV,EAAa;OACrB,OAAOuI,aAAamJ,gBAAb,CAA8B1R,CAA9B,EAAiC,CAAC,OAAD,CAAjC,EAA4C2R,KAAnD,KAA6D,WAAjE,EAA8E;WACtEC,QAAP,CAAgBC,IAAhB,GAAuBtJ,aAAamJ,gBAAb,CAA8B1R,CAA9B,EAAiC,CAAC,OAAD,CAAjC,EAA4C2R,KAAnE;;GAHH,EAMElJ,EANF,CAMK,WANL,EAMkB,UAAUzI,CAAV,EAAa;OACzB,OAAOuI,aAAamJ,gBAAb,CAA8B1R,CAA9B,EAAiC,CAAC,OAAD,CAAjC,EAA4C2R,KAAnD,KAA6D,WAAjE,EAA8E;QACzE,CAACH,OAAL,EAAc;OACX,IAAF,EAAQ7H,GAAR,CAAY,QAAZ,EAAsB,SAAtB;eACU,IAAV;;IAHF,MAKO;QACF6H,OAAJ,EAAa;OACV,IAAF,EAAQ7H,GAAR,CAAY,QAAZ,EAAsB,MAAtB;eACU,KAAV;;;GAfJ,EAmBElB,EAnBF,CAmBK,UAnBL,EAmBiB,YAAY;OACvB+I,OAAJ,EAAa;MACV,IAAF,EAAQ7H,GAAR,CAAY,QAAZ,EAAsB,MAAtB;cACU,KAAV;;GAtBH;EAjvDF;mBA2wDmB,SAASmC,gBAAT,GAA4B;MACzCvD,eAAe,IAAnB;MACImG,SAASnG,aAAa5K,YAAb,EAAb;MACIgR,mBAAmBD,OAAO9Q,IAAP,CAAY,yBAAZ,CAAvB;mBACiB2T,GAAjB,CAAqB,OAArB,EAA8B,kBAA9B;mBACiB9I,EAAjB,CAAoB,OAApB,EAA6B,kBAA7B,EAAiD,UAAUzI,CAAV,EAAa;OACzD6H,UAAUzL,OAAO4D,EAAE4N,aAAT,CAAd;WACQkE,IAAR;OACIpD,SAAStS,OAAO4D,EAAE+R,cAAT,EAAyB1I,OAAzB,CAAiC,kBAAjC,CAAb;UACOqF,MAAP,EACE9Q,IADF,CACO,gBADP,EAEE+L,GAFF,CAEM,UAFN,EAEkB,SAFlB;OAGIjB,MAAMb,QAAQvI,IAAR,CAAa,KAAb,IAAsB,eAAhC;OACI0S,mBAAmBtD,OAAO9Q,IAAP,CAAY,eAAZ,CAAvB;OACIoU,iBAAiBjU,MAAjB,GAA0B,CAA9B,EAAiC;qBACfmQ,IAAjB,CAAsB,YAAY;YAC1B,MAAM7Q,EAAE,IAAF,EAAQ4L,IAAR,CAAa,MAAb,CAAN,GAA6B,GAA7B,GAAmC5L,EAAE,IAAF,EAAQQ,GAAR,EAA1C;KADD;;OAIG6Q,OAAO9Q,IAAP,CAAY,mBAAZ,EAAiCG,MAAjC,GAA0C,CAA9C,EAAiD;WACzC,gBAAgB2Q,OAAO9Q,IAAP,CAAY,mBAAZ,EAAiC0B,IAAjC,CAAsC,MAAtC,CAAvB;;oBAEgB+P,iBAAjB;gBACa1G,OAAb,CAAqBD,GAArB,EAA0BE,IAA1B,CAA+B,UAAUtJ,IAAV,EAAgB;qBAC7B+P,iBAAjB,CAAmC;WAC5B;KADP;WAGOX,MAAP,EACE9Q,IADF,CACO,yBADP,EAEEoP,MAFF,CAES1N,IAFT;YAGQoP,MAAR,GAAiBhB,MAAjB;IAPD;GAlBD;EAhxDF;mBA6yDmB,SAAS6B,gBAAT,CAA0B7G,GAA1B,EAA+BpJ,IAA/B,EAAqC;MAClDgQ,aAAa5G,GAAjB;MACInM,YAAY,KAAKoB,YAAL,EAAhB;eACa2R,WAAWlD,OAAX,CAAmB,WAAnB,EAAgC,cAAhC,CAAb;OACK,IAAI7K,CAAT,IAAcjC,IAAd,EAAoB;OACf2S,QAAO3S,KAAKiC,CAAL,CAAP,KAAkB,QAAtB,EAAgC;SAC1BA,CAAL,IAAUrD,KAAKkT,SAAL,CAAe9R,KAAKiC,CAAL,CAAf,CAAV;;iBAEa,MAAMA,CAAN,GAAU,GAAV,GAAgBjC,KAAKiC,CAAL,CAA9B;;MAEG2Q,SAASlK,OAAOkK,MAApB;MACIC,OAAO5V,UAAU+C,IAAV,CAAe,MAAf,CAAX;MACI8S,QAAJ,CAAaD,OAAOD,MAApB,EAA4B5C,UAA5B;EAzzDF;gBA2zDgB,SAAS7R,aAAT,CAAuBlB,SAAvB,EAAkC;MAC5CA,UAAU+C,IAAV,CAAe,OAAf,KAA2B,CAA/B,EAAkC;QAC5BgQ,UAAL,GAAkB,IAAlB;;EA7zDH;;;;0BAAA,uCAm0D6B;;;OACtB3R,YAAL,GACE0L,OADF,CACU,aADV,EAEEZ,EAFF,CAEK,cAFL,EAEqB,UAAC4J,KAAD,EAAQC,IAAR,EAAiB;UAC/BnJ,aAAL;GAHF;EAp0DF;;;;;;;YA+0DY,SAASoC,SAAT,GAAqB;;;MAC3B,OAAO,KAAKlE,SAAZ,KAA0B,WAA1B,IAAyC,OAAO,KAAKa,iBAAL,EAAP,KAAoC,WAAjF,EAA8F;UACtF,KAAP;;OAEIqK,aAAL,GAJ+B;MAKzBrS,OAAO,KAAKsS,OAAL,EAAb;MACIlT,OAAO,KAAK4K,YAAL,EAAX;OACK3K,QAAL,GAAgB,KAAKkT,kBAAL,CAAwBnT,IAAxB,CAAhB;MACMwB,UAAU,KAAKkG,YAAL,CAAkB,KAAK0L,gBAAL,CAAsBpT,IAAtB,CAAlB,CAAhB;MACMsI,UAAU,KAAKZ,YAAL,CAAkB,KAAK2L,WAAL,CAAiBrT,IAAjB,CAAlB,CAAhB;SACO,KAAK0H,YAAL,CAAkB1H,IAAlB,CAAP;MACMN,QAAS,KAAKmB,aAAL,GAAqB,IAAIE,KAAJ,CAAU,KAAK6H,iBAAL,GAAyB0K,UAAzB,CAAoC,IAApC,CAAV,EAAqD;aAAA;aAAA;mBAAA;;GAArD,CAApC;;OAOKrT,QAAL,GAAgBD,KAAKC,QAAL,CAAcuH,GAAd,CAAkB,UAACnF,OAAD,EAAUrD,KAAV,EAAoB;WAC7CY,YAAR,GAAuBZ,KAAvB;UACO,OAAK0I,YAAL,CAAkBrF,OAAlB,EAA2BA,OAA3B,EAAoC,IAApC,CAAP;GAFe,CAAhB;SAIO3C,KAAP;EAr2DF;;;;;;;;;mBA+2DmB,SAAS0S,gBAAT,CAA0B1R,CAA1B,EAA6B6S,gBAA7B,EAA+C;MAC5D7T,QAAQ,KAAKmB,aAAjB;MACM2S,WAAW9T,MAAM+T,iBAAN,CAAwB/S,CAAxB,CAAjB;MACI8S,SAAS/U,MAAT,KAAoB,CAAxB,EAA2B;UACnB,KAAP;;MAEK8J,UAAUiL,SAAS,CAAT,CAAhB;MACMrT,YAAYoI,QAAQmL,MAA1B;MACM9T,eAAe2I,QAAQoL,aAA7B;MACMC,YAAY;UACVlU,MAAMM,IAAN,CAAWS,MAAX,CAAkBN,SAAlB,CADU;UAEVT,MAAMM,IAAN,CAAWC,QAAX,CAAoB,CAApB,EAAuBD,IAAvB,CAA4BG,SAA5B;GAFR;MAII,OAAOoT,gBAAP,KAA4B,WAA5B,IAA2CxR,MAAMC,OAAN,CAAcuR,gBAAd,CAA/C,EAAgF;oBAC9D7R,OAAjB,CAAyB,qBAAa;QAEpC,OAAOhC,MAAMM,IAAN,CAAWC,QAAX,CAAoBL,YAApB,EAAkC4R,SAAlC,CAAP,KAAwD,WAAxD,IACA,OAAO9R,MAAMM,IAAN,CAAWC,QAAX,CAAoBL,YAApB,EAAkC4R,SAAlC,EAA6CrR,SAA7C,CAAP,KAAmE,WAFpE,EAGE;eACSqR,SAAV,IAAuB9R,MAAMM,IAAN,CAAWC,QAAX,CAAoBL,YAApB,EAAkC4R,SAAlC,EAA6CrR,SAA7C,CAAvB;;IALF;;SASMyT,SAAP;EAt4DF;;;;;;;;mBA+4DmB,SAASR,gBAAT,CAA0BrL,SAA1B,EAAqC;OACjD8L,mBAAL,CAAyB9L,SAAzB;OACK+L,mBAAL,CAAyB/L,SAAzB;SACO,KAAKgM,YAAL,CACN,KAAKC,eAAL,CAAqBjM,SAArB,CADM,EAEN,KAAKG,sBAAL,CAA4B,KAAK+L,UAAL,EAA5B,EAA+ClM,SAA/C,CAFM,CAAP;EAl5DF;;;;;;;qBA65DqB,SAASoL,kBAAT,CAA4BpL,SAA5B,EAAuC;;;SACnDA,UAAU9H,QAAV,CAAmBuH,GAAnB,CAAuB,UAACnF,OAAD,EAAUrD,KAAV,EAAoB;OAC7CoI,SAAS,OAAK2M,YAAL,CACZ1R,OADY,EAEZ,OAAK6R,iBAAL,CAAuBnM,SAAvB,CAFY,EAGZ,OAAKK,wBAAL,CAA8B,OAAK6L,UAAL,EAA9B,EAAiDlM,SAAjD,CAHY,CAAb;UAKOX,MAAP;GANM,CAAP;EA95DF;;;;;;cA46Dc,SAASiM,WAAT,CAAqBtL,SAArB,EAAgC;SACrC,KAAKoM,iBAAL,CAAuB,KAAKC,UAAL,CAAgBrM,SAAhB,CAAvB,EAAmD,KAAKM,iBAAL,CAAuB,KAAK4L,UAAL,EAAvB,EAA0ClM,SAA1C,CAAnD,CAAP;EA76DF;;;;;;;;;sBAu7DsB,SAAS8L,mBAAT,CAA6B7T,IAA7B,EAAmC;;;OAClDC,QAAL,CAAcyB,OAAd,CAAsB,mBAAW;OAC5B,OAAOW,QAAQ7B,eAAf,KAAmC,WAAvC,EAAoD;YAC3CA,eAAR,GAA0B,EAA1B;YACQR,IAAR,CAAa0B,OAAb,CAAqB,UAACkB,QAAD,EAAW5D,KAAX,EAAqB;SACrCqV,eAAerU,KAAKS,MAAL,CAAYzB,KAAZ,CAAnB;SACIE,OAAOmV,YAAP,EAAqB5V,MAArB,GAA8B,CAA9B,IAAmC,CAACU,MAAMf,OAAOiW,YAAP,CAAN,CAAxC,EAAqE;UAEnE,OAAO,OAAK3V,UAAZ,KAA2B,WAA3B,IACA,OAAO,OAAKA,UAAL,CAAgBqB,SAAvB,KAAqC,WADrC,IAEA,OAAKrB,UAAL,CAAgBqB,SAAhB,KAA8B,OAH/B,EAIE;sBACcX,IAAIC,MAAJ,CAAWC,MAAX,CAAkBC,eAAlB,CAAkC8U,YAAlC,EAAgD,CAAhD,CAAf;OALD,MAMO;sBACSjV,IAAIC,MAAJ,CAAWC,MAAX,CAAkBC,eAAlB,CAAkC8U,YAAlC,CAAf;;;SAGE,OAAOhS,QAAQV,KAAf,KAAyB,WAA7B,EAA0C;UACrCA,QAAQU,QAAQV,KAApB;UACIzC,OAAOyC,KAAP,EAAclD,MAAd,GAAuB,CAAvB,IAA4B,CAACU,MAAMf,OAAOuD,KAAP,CAAN,CAAjC,EAAuD;WAErD,OAAO,OAAKjD,UAAZ,KAA2B,WAA3B,IACA,OAAO,OAAKA,UAAL,CAAgBqB,SAAvB,KAAqC,WADrC,IAEA,OAAKrB,UAAL,CAAgBqB,SAAhB,KAA8B,OAH/B,EAIE;gBACOX,IAAIC,MAAJ,CAAWC,MAAX,CAAkBC,eAAlB,CAAkCoC,KAAlC,EAAyC,CAAzC,CAAR;QALD,MAMO;gBACEvC,IAAIC,MAAJ,CAAWC,MAAX,CAAkBC,eAAlB,CAAkCoC,KAAlC,CAAR;;;sBAGc,OAAOA,KAAP,GAAe,GAA/B;;aAEOnB,eAAR,CAAwB2B,IAAxB,CAA6BkS,YAA7B;KA5BD;;GAHF;EAx7DF;;;;;;;;;sBAo+DsB,SAASR,mBAAT,CAA6B7T,IAA7B,EAAmC;;;OAClDC,QAAL,CAAcyB,OAAd,CAAsB,mBAAW;OAC5B,OAAOW,QAAQnC,aAAf,KAAiC,WAArC,EAAkD;YACzCA,aAAR,GAAwB,EAAxB;YACQF,IAAR,CAAa0B,OAAb,CAAqB,UAACkB,QAAD,EAAW5D,KAAX,EAAqB;SACrCkB,gBAAgB0C,QAApB;SACI1D,OAAO0D,QAAP,EAAiBnE,MAAjB,GAA0B,CAA1B,IAA+B,CAACU,MAAMf,OAAOwE,QAAP,CAAN,CAApC,EAA6D;UAE3D,OAAO,OAAKlE,UAAZ,KAA2B,WAA3B,IACA,OAAO,OAAKA,UAAL,CAAgBqB,SAAvB,KAAqC,WADrC,IAEA,OAAKrB,UAAL,CAAgBqB,SAAhB,KAA8B,OAH/B,EAIE;uBACeX,IAAIC,MAAJ,CAAWC,MAAX,CAAkBC,eAAlB,CAAkCqD,QAAlC,EAA4C,CAA5C,CAAhB;OALD,MAMO;uBACUxD,IAAIC,MAAJ,CAAWC,MAAX,CAAkBC,eAAlB,CAAkCqD,QAAlC,CAAhB;;;aAGM1C,aAAR,CAAsBiC,IAAtB,CAA2BjC,aAA3B;KAbD;;GAHF;EAr+DF;;;;;;;oBAggEoB,SAASiU,iBAAT,CAA2BG,EAA3B,EAA+BC,SAA/B,EAA0C;;;MACxD,OAAOD,EAAP,KAAc,WAAlB,EAA+B;UACvBA,EAAP;;OAEI,EAAL;MACIlN,SAASmN,UACX/M,GADW,CACP,UAACgN,IAAD,EAAOxV,KAAP,EAAiB;OACjB+C,MAAMC,OAAN,CAAcwS,IAAd,KAAuB,CAACF,GAAGzP,cAAH,CAAkB4P,GAAlB,CAA5B,EAAoD;WAC5C,OAAKN,iBAAL,CAAuBG,GAAGtV,KAAH,CAAvB,EAAkCwV,IAAlC,CAAP;;OAGA,QAAOA,IAAP,yCAAOA,IAAP,OAAgB,QAAhB,IACAA,SAAS,IADT,KAEC,OAAOF,GAAGtV,KAAH,CAAP,KAAqB,WAArB,IAAqC2T,QAAO2B,GAAGtV,KAAH,CAAP,MAAqB,QAArB,IAAiCsV,GAAGtV,KAAH,MAAc,IAFrF,CADD,EAIE;WACM,OAAK0V,kBAAL,CAAwBJ,GAAGtV,KAAH,CAAxB,EAAmCwV,IAAnC,CAAP;;UAEMF,GAAGtV,KAAH,CAAP;GAZW,EAcXkR,MAdW,CAcJ;UAAQ,OAAOzI,IAAP,KAAgB,WAAxB;GAdI,CAAb;SAeOL,MAAP;EAphEF;;;;;;;qBA4hEqB,SAASsN,kBAAT,CAA4BJ,EAA5B,EAAgCE,IAAhC,EAAsC;MACrD,OAAOF,EAAP,KAAc,WAAlB,EAA+B;QACzB,EAAL;;OAEI,IAAIG,IAAT,IAAgBD,IAAhB,EAAsB;OACjBA,KAAK3P,cAAL,CAAoB4P,IAApB,CAAJ,EAA8B;QACzB1S,MAAMC,OAAN,CAAcwS,KAAKC,IAAL,CAAd,CAAJ,EAA8B;SACzB,CAACH,GAAGzP,cAAH,CAAkB4P,IAAlB,CAAL,EAA6B;SACzBA,IAAH,IAAU,KAAKN,iBAAL,CAAuBQ,SAAvB,EAAkCH,KAAKC,IAAL,CAAlC,CAAV;;KAFF,MAIO,IACN9B,QAAO6B,KAAKC,IAAL,CAAP,MAAqB,QAArB,IACAD,KAAKC,IAAL,MAAc,IADd,KAEC,CAACH,GAAGzP,cAAH,CAAkB4P,IAAlB,CAAD,IAA4B9B,QAAO2B,GAAGG,IAAH,CAAP,MAAmB,QAAnB,IAA+BH,GAAGG,IAAH,MAAY,IAA3C,IAAmD,CAAC1S,MAAMC,OAAN,CAAcsS,GAAGG,IAAH,CAAd,CAFjF,CADM,EAIL;;QAEEA,IAAH,IAAU,KAAKC,kBAAL,CAAwBJ,GAAGG,IAAH,CAAxB,EAAiCD,KAAKC,IAAL,CAAjC,CAAV;KANM,MAOA;SACF,CAACH,GAAGzP,cAAH,CAAkB4P,IAAlB,CAAL,EAA6B;SACzBA,IAAH,IAAUD,KAAKC,IAAL,CAAV;;;;;SAKGH,EAAP;EApjEF;;;;;;;;eA6jEe,SAASP,YAAT,GAA6C;MAAvBO,EAAuB,uEAAlB,EAAkB;;oCAAXC,SAAW;YAAA;;;OACrD,IAAItS,IAAI,CAAR,EAAWC,MAAMqS,UAAU9V,MAAhC,EAAwCwD,IAAIC,GAA5C,EAAiDD,GAAjD,EAAsD;OACjD0Q,QAAO4B,UAAUtS,CAAV,CAAP,MAAwB,QAAxB,IAAoCF,MAAMC,OAAN,CAAcuS,UAAUtS,CAAV,CAAd,CAAxC,EAAqE;QAChEqE,QAAJ,CACC,IAAIC,KAAJ,CACC,0DACA,KAAK0N,UAAL,EADA,GAEA,IAFA,GAGAM,UAAUtS,CAAV,EAAa2S,QAAb,EAHA,GAIA,GALD,CADD;IADD,MAUO;SACD,KAAKF,kBAAL,CAAwBJ,EAAxB,EAA4BC,UAAUtS,CAAV,CAA5B,CAAL;;;SAGKqS,EAAP;EA7kEF;;;;;;;;kBAslEkB,SAASN,eAAT,CAAyBjM,SAAzB,EAAoC;SAC7C;eACM,IADN;wBAEe;GAFtB;EAvlEF;;;;;;;oBAkmEoB,SAASmM,iBAAT,CAA2BnM,SAA3B,EAAsC;SACjD,EAAP;EAnmEF;;;;;;;;;aA6mEa,SAASqM,UAAT,CAAoBrM,SAApB,EAA+B;;EA7mE5C;;;;;;;;;;UAynEU,SAASmL,OAAT,CAAiBnL,SAAjB,EAA4B;SAC7B,KAAP;EA1nEF;;;;;;;;;;aAqoEa,SAASkM,UAAT,CAAoBlM,SAApB,EAA+B;SACnC,KAAKmL,OAAL,EAAP;;CAhqEH;AAoqEA2B,iBAAiB,qBAAjB,EAAwC,EAAxC,EAA4C,EAA5C;AACAlX,oBACC,yBADD,EAEC,EAFD,EAGC;UACU,SAASuV,OAAT,GAAmB;SACpB,KAAP;;CALH;AASA4B,wBACC,gCADD,EAEC,EAFD,EAGC;WAAA,wBACc;SACL,YAAP;;CALH;AASAA,wBACC,gCADD,EAEC,EAFD,EAGC;UACU,mBAAY;SACb,eAAP;;CALH;AASAC,+BACC,uCADD,EAEC,EAFD,EAGC;UACU,mBAAY;SACb,eAAP;EAFF;WAAA,wBAIc;SACL,sBAAP;;CARH;AAYApX,oBACC,4BADD,EAEC,EAFD,EAGC;UACU,SAASuV,OAAT,GAAmB;SACpB,QAAP;;CALH;AASAvV,oBACC,yBADD,EAEC,EAFD,EAGC;UACU,SAASuV,OAAT,GAAmB;SACpB,KAAP;;CALH;AASA8B,wBACC,gCADD,EAEC,EAFD,EAGC;WAAA,wBACc;SACL,YAAP;;CALH;AASAA,wBACC,2BADD,EAEC,EAFD,EAGC;UACU,SAAS9B,OAAT,GAAmB;SACpB,UAAP;;CALH;AASA+B,0BAA0B,0BAA1B,EAAsD,EAAtD,EAA0D,EAA1D;AACAtX,oBACC,gCADD,EAEC,EAFD,EAGC;UACU,SAASuV,OAAT,GAAmB;SACpB,KAAP;EAFF;aAIa,SAASe,UAAT,GAAsB;SAC1B,YAAP;;CARH;AAYAtW,oBACC,0BADD,EAEC,EAFD,EAGC;UACU,SAASuV,OAAT,GAAmB;SACpB,MAAP;;CALH;AASAgC,yBACC,iCADD,EAEC,EAFD,EAGC;QAAA,qBACW;SACF,MAAP;EAFF;WAAA,wBAIc;SACL,aAAP;;CARH;AAYAA,yBACC,+BADD,EAEC,EAFD,EAGC;aACa,SAASjB,UAAT,GAAsB;SAC1B,WAAP;;CALH;AASAkB,gCACC,sCADD,EAEC,EAFD,EAGC;WAAA,wBACc;SACL,kBAAP;;CALH;AASAL,wBACC,qCADD,EAEC,EAFD,EAGC;kBACkB,2BAAY;SACrB;WACE;aACE;IAFJ;WAIE;WACA,CACN;cACU;KAFJ,CADA;WAMA,CACN;cACU;KAFJ;;GAVT;;CALH;AAyBAnX,oBACC,8BADD,EAEC,EAFD,EAGC;eACe,KADf;qBAEqB,KAFrB;;mBAImB,4BAAY;;;MACzBsL,eAAe,IAAnB;MACImM,0BAA0B,OAA9B;MACInY,YAAYgM,aAAa5K,YAAb,EAAhB;;MAEIgX,wBAAwB3M,OAAO4M,UAAnC;MACID,yBAAyB,EAA7B,EAAiC;2BACR,QAAxB;GADD,MAEO;2BACkB,UAAxB;;;;MAIGE,oBAAoB7M,OAAO8M,gBAA/B;;MAEIC,mBAAmBrY,IAAIsY,aAAJ,CAAkB,WAAlB,CAAvB;MACIC,eAAeF,iBAAiBpP,KAAjB,CAAuB,GAAvB,CAAnB;qBACmBsP,aAAa,GAAb,CAAnB;MACIC,cAAcxY,IAAIsY,aAAJ,CAAkB,aAAlB,CAAlB;MACI,KAAK1F,UAAL,IAAmB4F,eAAeC,SAASC,MAAT,CAAgB,YAAhB,CAAtC,EAAqE;iBACtDD,OAAOD,WAAP,EAAoBE,MAApB,CAA2B,GAA3B,KAAmC,CAAnC,GAAuCD,OAAOD,WAAP,CAAvC,GAA6DC,OAAOD,WAAP,EAAoBG,GAApB,CAAwB,CAAxB,EAA2B,GAA3B,CAA3E;;YAESzX,IAAV,CAAe,yBAAf,EAA0C6K,EAA1C,CAA6C,OAA7C,EAAsD,UAAUzI,CAAV,EAAa;oBACjD1D,WAAjB,GAA+BqR,iBAA/B,CAAiDtQ,EAAE,IAAF,EAAQiC,IAAR,CAAa,aAAb,CAAjD;GADD;eAGagW,eAAb,GAA+BC,YAA/B,CAA4C;WACnC;UACD,GADC;YAEC,iBAFD;WAGA;IAJmC;gBAM9BL,WAN8B;eAO/BP,qBAP+B;eAQ/BA,qBAR+B;cAShCI,gBATgC;aAUjCF,iBAViC;gBAW9BH,uBAX8B;aAYjC,KAZiC;gBAa9B,EAb8B;UAcpC,KAdoC;wBAetB,CAfsB;eAgB/B,IAhB+B;eAiB/B,KAjB+B;eAkB/B,CACXhY,IAAI8Y,UAAJ,CAAe,YAAf,CADW,EAEX9Y,IAAI8Y,UAAJ,CAAe,aAAf,CAFW,EAGX9Y,IAAI8Y,UAAJ,CAAe,UAAf,CAHW,EAIX9Y,IAAI8Y,UAAJ,CAAe,UAAf,CAJW,EAKX9Y,IAAI8Y,UAAJ,CAAe,QAAf,CALW,EAMX9Y,IAAI8Y,UAAJ,CAAe,SAAf,CANW,EAOX9Y,IAAI8Y,UAAJ,CAAe,SAAf,CAPW,EAQX9Y,IAAI8Y,UAAJ,CAAe,WAAf,CARW,EASX9Y,IAAI8Y,UAAJ,CAAe,cAAf,CATW,EAUX9Y,IAAI8Y,UAAJ,CAAe,YAAf,CAVW,EAWX9Y,IAAI8Y,UAAJ,CAAe,aAAf,CAXW,EAYX9Y,IAAI8Y,UAAJ,CAAe,aAAf,CAZW,CAlB+B;oBAgC1B,CAChB9Y,IAAI8Y,UAAJ,CAAe,QAAf,CADgB,EAEhB9Y,IAAI8Y,UAAJ,CAAe,QAAf,CAFgB,EAGhB9Y,IAAI8Y,UAAJ,CAAe,QAAf,CAHgB,EAIhB9Y,IAAI8Y,UAAJ,CAAe,QAAf,CAJgB,EAKhB9Y,IAAI8Y,UAAJ,CAAe,QAAf,CALgB,EAMhB9Y,IAAI8Y,UAAJ,CAAe,QAAf,CANgB,EAOhB9Y,IAAI8Y,UAAJ,CAAe,QAAf,CAPgB,EAQhB9Y,IAAI8Y,UAAJ,CAAe,QAAf,CARgB,EAShB9Y,IAAI8Y,UAAJ,CAAe,QAAf,CATgB,EAUhB9Y,IAAI8Y,UAAJ,CAAe,QAAf,CAVgB,EAWhB9Y,IAAI8Y,UAAJ,CAAe,QAAf,CAXgB,EAYhB9Y,IAAI8Y,UAAJ,CAAe,QAAf,CAZgB,CAhC0B;aA8CjC,CACT9Y,IAAI8Y,UAAJ,CAAe,WAAf,CADS,EAET9Y,IAAI8Y,UAAJ,CAAe,WAAf,CAFS,EAGT9Y,IAAI8Y,UAAJ,CAAe,YAAf,CAHS,EAIT9Y,IAAI8Y,UAAJ,CAAe,cAAf,CAJS,EAKT9Y,IAAI8Y,UAAJ,CAAe,aAAf,CALS,EAMT9Y,IAAI8Y,UAAJ,CAAe,WAAf,CANS,EAOT9Y,IAAI8Y,UAAJ,CAAe,aAAf,CAPS,CA9CiC;kBAuD5B,CACd9Y,IAAI8Y,UAAJ,CAAe,QAAf,CADc,EAEd9Y,IAAI8Y,UAAJ,CAAe,QAAf,CAFc,EAGd9Y,IAAI8Y,UAAJ,CAAe,QAAf,CAHc,EAId9Y,IAAI8Y,UAAJ,CAAe,QAAf,CAJc,EAKd9Y,IAAI8Y,UAAJ,CAAe,QAAf,CALc,EAMd9Y,IAAI8Y,UAAJ,CAAe,QAAf,CANc,EAOd9Y,IAAI8Y,UAAJ,CAAe,QAAf,CAPc,CAvD4B;eAgE/B;WACJ9Y,IAAI8Y,UAAJ,CAAe,UAAf,CADI;WAEJ9Y,IAAI8Y,UAAJ,CAAe,UAAf,CAFI;UAGL9Y,IAAI8Y,UAAJ,CAAe,SAAf,CAHK;SAIN9Y,IAAI8Y,UAAJ,CAAe,QAAf;IApEqC;eAsE/B9Y,IAAI8Y,UAAJ,CAAe,YAAf,CAtE+B;mBAuE3B9Y,IAAI8Y,UAAJ,CAAe,SAAf,CAvE2B;gBAwE9B,qBAAUnD,KAAV,EAAiBxK,OAAjB,EAA0B4N,IAA1B,EAAgC;cAClC,6BAAV;SACK,IAAI1B,GAAT,IAAgB1B,MAAMA,KAAtB,EAA6B;gBAE3B,oCACA,cADA,GAEAA,MAAMqD,IAFN,GAGA,GAHA,GAIA,cAJA,GAKA3B,GALA,GAMA,WANA,GAOA1B,MAAMA,KAAN,CAAY0B,GAAZ,EAAiB9S,KAPjB,GAQA,IARA,GASA,eATA,GAUAoR,MAAMA,KAAN,CAAY0B,GAAZ,EAAiB4B,SAVjB,IAWCtD,MAAM7P,KAAN,IAAe,EAAf,GAAoB,cAApB,GAAqC,EAXtC,KAYC6P,MAAM7P,KAAN,IAAe,EAAf,GAAoB,YAApB,GAAmC,EAZpC,IAaA,4CAbA,GAcA6P,MAAMA,KAAN,CAAY0B,GAAZ,EAAiB6B,KAdjB,GAeA,SAfA,GAgBA,QAjBD;;eAmBU,QAAX;WACO/N,OAAP;;GA/FF;eAmGEyN,eADF,GAEE1X,IAFF,CAEO,eAFP,EAGE6K,EAHF,CAGK,YAHL,EAGmB,YAAY;UACtB,kDAAP,EAA2DoN,SAA3D,CAAqExY,EAAE,IAAF,CAArE;GAJF,EAMEoL,EANF,CAMK,YANL,EAMmB,YAAY;KAC3B,IAAF,EACE7K,IADF,CACO,OADP,EAEE8P,MAFF;GAPF;MAWIoI,aAAa9N,OAAOC,UAAP,CAAkB8N,WAAlB,EAAjB;eAEET,eADF,GAEE1X,IAFF,CAEO,eAFP,EAGE6K,EAHF,CAGK,OAHL,EAGc,YAAY;OACpBiN,OAAOP,OAAO9X,EAAE,IAAF,EAAQiC,IAAR,CAAa,MAAb,CAAP,EAA6B8V,MAA7B,CAAoCU,UAApC,CAAX;OACIlH,SAAS;aACH,IADG;UAEN;iBACO8G,IADP;eAEKA;;IAJZ;UAOOM,gBAAP,GAA0B,YAAY;iBAEnCV,eADF,GAEEjM,OAFF,CAEU,kBAFV,EAGEzL,IAHF,CAGO,oBAHP,EAIEiS,OAJF,CAIU,OAJV;IADD;oBAOiBvT,WAAjB,GAA+BqR,iBAA/B,CAAiD,UAAjD,EAA6DiB,MAA7D;GAnBF;MAqBIqH,YAAY1Z,UAAUqB,IAAV,CAAe,sBAAf,CAAhB;YACU6K,EAAV,CAAa,QAAb,EAAuB,aAAK;OACrBmF,gBAAgBvQ,EAAE2C,EAAE4N,aAAJ,CAAtB;OACI,OAAOA,cAActO,IAAd,CAAmB,SAAnB,CAAP,KAAyC,WAA7C,EAA0D/C,UAAUqB,IAAV,CAAe,qBAAf,EAAsCC,GAAtC,CAA0C,SAA1C,EAA1D,KACK,IAAI,OAAO+P,cAActO,IAAd,CAAmB,UAAnB,CAAP,KAA0C,WAA9C,EACJ/C,UAAUqB,IAAV,CAAe,qBAAf,EAAsCC,GAAtC,CAA0C,SAA1C;WACI4Q,aAAL;GALD;EAjKF;mBAyKmB,0BAAUyH,SAAV,EAAqB;MAClC3N,eAAe,IAAnB;eACa+M,eAAb,GAA+BC,YAA/B,CAA4C,cAA5C;MACIE,OAAOlN,aAAa+M,eAAb,GAA+BC,YAA/B,CAA4C,SAA5C,CAAX;MACIO,aAAa9N,OAAOC,UAAP,CAAkB8N,WAAlB,EAAjB;MACII,aAAaV,KAAKW,KAAL,CAAWhB,MAAX,CAAkBU,UAAlB,CAAjB;MACIO,WAAWZ,KAAKa,GAAL,CAASlB,MAAT,CAAgBU,UAAhB,CAAf;MACIpH,SAASnG,aAAa5K,YAAb,EAAb;MACI4Y,OAAO7H,OAAO9Q,IAAP,CAAY,QAAZ,EAAsBC,GAAtB,EAAX;MACI0Y,QAAQ,KAAZ,EAAmB;UACX,EAAP;;MAEG3H,SAAS;WACJ,UADI;WAEJ,UAFI;SAGN,WAHM;UAILuH,UAJK;QAKPE,QALO;SAMNE,IANM;WAOJ;GAPT;MASI7H,OAAO9Q,IAAP,CAAY,eAAZ,EAA6BG,MAA7B,GAAsC,CAA1C,EAA6C;OACxCyY,eAAe9H,OAAO9Q,IAAP,CAAY,eAAZ,EAA6BC,GAA7B,EAAnB;UACO2Y,YAAP,GAAsBA,YAAtB;;MAEG9H,OAAO9Q,IAAP,CAAY,qBAAZ,EAAmCG,MAAnC,GAA4C,CAAhD,EAAmD;UAC3C0Y,IAAP,GAAc/H,OAAO9Q,IAAP,CAAY,qBAAZ,EAAmCC,GAAnC,EAAd;;MAEG,KAAKyR,UAAT,EAAqB;OAChBnD,WAAW,KAAKxO,YAAL,GAAoBC,IAApB,CAAyB,oBAAzB,CAAf;OACI8K,MAAMyD,SAAS7M,IAAT,CAAc,KAAd,CAAV;OACIgQ,aAAa;WACTiH,IADS;kBAEFC,YAFE;WAGTL;IAHR;gBAKa5G,gBAAb,CAA8B7G,GAA9B,EAAmC4G,UAAnC;;eAEY3G,OAAb,CAAqBiG,MAArB,EAA6BhG,IAA7B,CAAkC,UAAU8N,MAAV,EAAkB;OAC/C9T,SACH2F,aACE+M,eADF,GAEE1X,IAFF,CAEO,eAFP,EAGEgF,MAHF,KAIA2F,aACE+M,eADF,GAEE1X,IAFF,CAEO,gBAFP,EAGEgF,MAHF,EAJA,GAQA,EATD;OAUIJ,QACH+F,aACE+M,eADF,GAEE1X,IAFF,CAEO,gBAFP,EAGE4E,KAHF,KAIA,CAJA,GAKA,EAND;QAOK,IAAIjB,CAAT,IAAcmV,OAAOhQ,MAArB,EAA6B;WACrBA,MAAP,CAAcnF,CAAd,EAAiB,OAAjB,IAA4BiB,KAA5B;WACOkE,MAAP,CAAcnF,CAAd,EAAiB,QAAjB,IAA6BqB,MAA7B;;gBAEY0S,eAAb,GAA+BC,YAA/B,CAA4C,gBAA5C,EAA8DmB,OAAOhQ,MAArE;gBAEE4O,eADF,GAEE1X,IAFF,CAEO,kBAFP,EAGE6K,EAHF,CAGK,OAHL,EAGc,YAAY;QACpBlM,YAAYgM,aAAa5K,YAAb,EAAhB;QACI+K,MAAM,qCAAV;QACI8N,YAAJ,EAAkB;YACV,eAAeja,UAAUqB,IAAV,CAAe,kCAAf,EAAmDC,GAAnD,EAAtB;KADD,MAEO;YACC,eAAP;;WAEM,mBAAP;QACI8Y,QAAQpa,UAAUqB,IAAV,CAAe,qCAAf,CAAZ;QACI+Y,MAAM9Y,GAAN,MAAe,KAAnB,EAA0B;YAClB,8BAA8B8Y,MAAM9Y,GAAN,EAA9B,GAA4C,KAAnD;;QAEG6Q,OAAO9Q,IAAP,CAAY,qBAAZ,EAAmCG,MAAnC,GAA4C,CAAhD,EAAmD;SAC9C6Y,SAASlI,OAAO9Q,IAAP,CAAY,qBAAZ,EAAmC0B,IAAnC,EAAb;YACO,4BAA4BsX,OAAOhI,OAAO6H,IAAd,CAA5B,GAAkD,KAAzD;;QAEGf,OAAOP,OAAO9X,EAAE,IAAF,EAAQiC,IAAR,CAAa,MAAb,CAAP,EAA6B8V,MAA7B,CAAoC7M,aAAaR,iBAAb,GAAiCgO,WAAjC,EAApC,CAAX;WACOnE,QAAP,CAAgBC,IAAhB,GACCnJ,MACA,uBADA,GAEArL,EAAE,IAAF,EAAQiC,IAAR,CAAa,MAAb,CAFA,GAGA,yBAHA,GAIAoW,IAJA,GAKA,GALA,GAMAA,IANA,GAOA,MARD;IArBF;GAvBD;EA/MF;kBAuQkB,2BAAY;MACxB,KAAKmB,YAAL,IAAqB,KAAzB,EAAgC;QAC1BA,YAAL,GAAoB,KAAKlZ,YAAL,GAAoBC,IAApB,CAAyB,yBAAzB,CAApB;;SAEM,KAAKiZ,YAAZ;EA3QF;eA6Qe,wBAAY;MACrBtO,eAAe,IAAnB;MACIuO,QAAQvO,aACV+M,eADU,GAEV1X,IAFU,CAEL,gBAFK,EAGV2P,IAHU,EAAZ;MAIIuJ,KAAJ,EAAW;QACLnZ,YAAL,GACEC,IADF,CACO,wBADP,EAEEkL,IAFF,CAEO,SAASgO,KAAT,GAAiB,OAFxB;;EApRH;qBAyRqB,8BAAY;MAC3BvO,eAAe,IAAnB;MACIhM,YAAY,KAAKoB,YAAL,EAAhB;YACUC,IAAV,CAAe,aAAf,EAA8BoL,QAA9B,CAAuC,QAAvC;MACI8N,QAAQva,UAAUqB,IAAV,CAAe,gBAAf,EAAiC2P,IAAjC,EAAZ;MACIuJ,KAAJ,EAAW;aAERlZ,IADF,CACO,iBADP,EAEEsL,WAFF,CAEc,QAFd,EAGEtL,IAHF,CAGO,QAHP,EAIEoP,MAJF,CAIS,SAAS8J,KAAT,GAAiB,OAJ1B;OAKIC,SAASxa,UAAUqB,IAAV,CAAe,wBAAf,CAAb;UACOsQ,IAAP,CAAY,YAAY;QACnB8I,MAAM5a,OAAO,IAAP,EAAakD,IAAb,CAAkB,MAAlB,CAAV;WACO,IAAP,EAAamJ,EAAb,CAAgB,OAAhB,EAAyB,YAAY;kBAElC6M,eADF,GAEE1X,IAFF,CAEO,kBAAkBoZ,GAFzB,EAGEnH,OAHF,CAGU,OAHV;kBAIaoH,gBAAb;kBACaC,YAAb;KAND;IAFD;;EArSH;iBAkTiB,0BAAY;OACtBC,gBAAL;OACKF,gBAAL,CAAsB,IAAtB;OACKG,kBAAL;OACK1L,yBAAL;EAtTF;gBAwTgB,yBAAY;MACtBnD,eAAe,IAAnB;MACI4G,mBAAmB,KAAKxR,YAAL,GAAoBC,IAApB,CAAyB,yBAAzB,CAAvB;mBACiByR,iBAAjB;eACa4H,gBAAb;mBACiB5H,iBAAjB,CAAmC;SAC5B;GADP;;CAhUH;AAsUApS,oBACC,wCADD,EAEC,EAFD,EAGC;YACY,KADZ;iBAEiB,0BAAY;OACtBoa,MAAL;OACKC,sBAAL;OACKC,sBAAL;EALF;oBAOoB,6BAAY;OACzBF,MAAL;OACKC,sBAAL;EATF;yBAWyB,kCAAY;MAC/B/O,eAAe,IAAnB;MACI4G,mBAAmB,KAAKxR,YAAL,GAAoBC,IAApB,CAAyB,yBAAzB,CAAvB;mBACiBA,IAAjB,CAAsB,iBAAtB,EAAyC6K,EAAzC,CAA4C,OAA5C,EAAqD,UAAUzI,CAAV,EAAa;OAC7D5D,OAAO4D,EAAE+J,MAAT,EAAiBkF,EAAjB,CAAoB,GAApB,KAA4B1G,aAAaiP,SAA7C,EAAwD;;;OAGpD9O,MAAMtM,OAAO,IAAP,EAAakD,IAAb,CAAkB,KAAlB,CAAV;OACI,OAAOoJ,GAAP,KAAe,WAAnB,EAAgC;QAC3BsN,mBAAmB,SAAnBA,gBAAmB,GAAY;kBACrBwB,SAAb,GAAyB,KAAzB;KADD;iBAGaA,SAAb,GAAyB,IAAzB;QACIC,eAAJ,CAAoB,IAApB,EAA0B/O,GAA1B,EAA+BsN,gBAA/B;;GAVF;EAdF;;yBA6ByB,kCAAY;MAC7BzN,eAAe,IAArB;MACChM,YAAYgM,aAAa5K,YAAb,EADb;YAEUC,IAAV,CAAe,eAAf,EAAgC6K,EAAhC,CAAmC,OAAnC,EAA4C,YAAY;OACnDmO,eAAJ;OACIc,mBAAmBnb,UAAU+C,IAAV,CAAe,MAAf,CAAvB;OACIoY,qBAAqB,mBAAzB,EAA8C;aACpC,aAAT;IADD,MAEO,IAAIA,qBAAqB,oBAAzB,EAA+C;aAC5C,iCAAT;IADM,MAEA;aACG,8CAAT;;OAEGhP,MAAM,kDAAV;UACO,mBAAP;OACIiO,QAAQpa,UAAUqB,IAAV,CAAe,qCAAf,CAAZ;OACI+Y,MAAM9Y,GAAN,OAAgB,KAApB,EAA2B;WACnB,8BAA8B8Y,MAAM9Y,GAAN,EAA9B,GAA4C,KAAnD;;UAEM,4BAA4B8Z,mBAAmBf,MAAnB,CAA5B,GAAyD,MAAhE;UACOhF,QAAP,CAAgBC,IAAhB,GAAuBnJ,GAAvB;GAjBD;;CAnCH;AAyDAkP,uCAAuC,8CAAvC,EAAuF,EAAvF,EAA2F,EAA3F;AACAA,uCAAuC,qDAAvC,EAA8F,EAA9F,EAAkG,EAAlG;AACAA,uCAAuC,uCAAvC,EAAgF,EAAhF,EAAoF,EAApF;AACAA,uCAAuC,uCAAvC,EAAgF,EAAhF,EAAoF,EAApF;AACA3a,oBACC,yCADD,EAEC,EAFD,EAGC;YACY,KADZ;iBAEiB,0BAAY;OACtBoa,MAAL;OACKQ,cAAL;OACKN,sBAAL;EALF;oBAOoB,6BAAY;OACzBF,MAAL;OACKQ,cAAL;EATF;iBAWiB,0BAAY;MACvBtP,eAAe,IAAnB;MACI4G,mBAAmB,KAAKxR,YAAL,GAAoBC,IAApB,CAAyB,yBAAzB,CAAvB;mBACiBA,IAAjB,CAAsB,YAAtB,EAAoC6K,EAApC,CAAuC,OAAvC,EAAgD,UAAUzI,CAAV,EAAa;OACxD5D,OAAO4D,EAAE+J,MAAT,EAAiBkF,EAAjB,CAAoB,GAApB,KAA4B1G,aAAaiP,SAA7C,EAAwD;;;OAGpD9O,MAAMtM,OAAO,IAAP,EAAakD,IAAb,CAAkB,KAAlB,CAAV;OACI,OAAOoJ,GAAP,KAAe,WAAnB,EAAgC;QAC3BsN,mBAAmB,SAAnBA,gBAAmB,GAAY;kBACrBwB,SAAb,GAAyB,KAAzB;KADD;iBAGaA,SAAb,GAAyB,IAAzB;QACIC,eAAJ,CAAoB,IAApB,EAA0B/O,GAA1B,EAA+BsN,gBAA/B;;GAVF;EAdF;yBA4ByB,kCAAY;MAC/BzN,eAAe,IAAnB;MACIhM,YAAYgM,aAAa5K,YAAb,EAAhB;YACU8K,EAAV,CAAa,OAAb,EAAsB,eAAtB,EAAuC,YAAY;OAC9CC,MAAMtM,OAAO,IAAP,EAAakD,IAAb,CAAkB,KAAlB,CAAV;OACIwY,UAAUvb,UAAUqB,IAAV,CAAe,UAAf,CAAd;OACIma,YAAYxb,UAAUqB,IAAV,CAAe,mBAAf,CAAhB;OACIka,QAAQ/Z,MAAZ,EAAoB;WACZ,cAAc+Z,QAAQja,GAAR,EAArB;;OAEGka,UAAUha,MAAd,EAAsB;WACd,gBAAgBga,UAAUzY,IAAV,CAAe,MAAf,EAAuByW,WAAvB,EAAvB;;UAEMnE,QAAP,CAAgBC,IAAhB,GAAuBnJ,GAAvB;GAVD;;CAlCH;AAiDAsP,wCAAwC,yCAAxC,EAAmF,EAAnF,EAAuF,EAAvF;AACA5D,wBACC,oCADD,EAEC,EAFD,EAGC;kBACkB,SAASd,eAAT,GAA2B;SACpC;WACE;aACE;IAFJ;WAIE;WACA,CACN;cACU,IADV;YAEQ;gBACI,SAAS2E,eAAT,CAAyB5Z,KAAzB,EAAgCC,KAAhC,EAAuCC,MAAvC,EAA+C;cACjD7B,IAAIwb,gBAAJ,CAAqB7Z,KAArB,EAA4B,OAA5B,EAAqC,KAArC,EAA4C,KAA5C,CAAP;;;KALG,CADA;WAWA,CACN;cACU,IADV;YAEQ;mBACO;;KAJT;IAfF;aAwBI;eACE;YACH,eAAUsB,WAAV,EAAuBL,IAAvB,EAA6B;aAElCA,KAAKC,QAAL,CAAcI,YAAYT,YAA1B,EAAwCiZ,cAAxC,GAAyD,IAAzD,GAAgEzb,IAAIwb,gBAAJ,CAAqBvY,YAAYyY,MAAjC,CADjE;MAFS;YAMH,eAAUvY,YAAV,EAAwBP,IAAxB,EAA8B;aAC7BA,KAAK+Y,UAAL,CAAgBxY,aAAa,CAAb,EAAgBvB,KAAhC,CAAP;;;;GAhCJ;EAFF;oBAwCoB,SAASkV,iBAAT,CAA2B7R,OAA3B,EAAoCzB,IAApC,EAA0ChB,YAA1C,EAAwD;SACnE;eACM;eACA,SAASE,mBAAT,CAA6Bf,KAA7B,EAAoCS,OAApC,EAA6C;YAChDpC,IAAIwb,gBAAJ,CAAqB7Z,KAArB,CAAP;;;GAHH;;CA5CH;AAsDA+V,wBAAwB,mCAAxB,EAA6D,EAA7D,EAAiE,EAAjE;AACAE,wBAAwB,6CAAxB,EAAuE,EAAvE,EAA2E,EAA3E;AACAF,wBAAwB,yCAAxB,EAAmE,EAAnE,EAAuE,EAAvE;AACAA,wBAAwB,iCAAxB,EAA2D,EAA3D,EAA+D,EAA/D;AACAA,wBAAwB,wCAAxB,EAAkE,EAAlE,EAAsE,EAAtE;AACAkE,2BACC,4CADD,EAEC,EAFD,EAGC;kBACkB,SAAShF,eAAT,GAA2B;SACpC;SACA;GADP;EAFF;aAMa,SAASI,UAAT,GAAsB;SAC1B,EAAP;;CAVH;AAcAU,wBAAwB,2CAAxB,EAAqE,EAArE,EAAyE,EAAzE;AACAA,wBAAwB,8CAAxB,EAAwE,EAAxE,EAA4E,EAA5E;AACAA,wBACC,yCADD,EAEC,EAFD,EAGC;oBACoB,6BAAY;MACxB7L,eAAe,IAArB;MACChM,YAAY,KAAKoB,YAAL,EADb;MAECwM,QAAQ5N,UAAUqB,IAAV,CAAe,aAAf,EAA8BC,GAA9B,EAFT;MAGCyB,OAAOpB,KAAKC,KAAL,CAAWgM,KAAX,CAHR;MAII9C,YAAY,CAAC,EAAD,EAAK,EAAL,EAAS,EAAT,EAAa,EAAb,CAAhB;MACCkR,kBADD;MAECja,cAFD;MAGCka,kBAHD;MAIIlZ,KAAK6E,cAAL,CAAoB,SAApB,CAAJ,EAAoC;QAC9B7F,KAAL,IAAcgB,IAAd,EAAoB;gBACPiJ,aAAakQ,cAAb,CAA4BnZ,KAAKhB,KAAL,CAA5B,EAAyC+I,SAAzC,CAAZ;cACU,CAAV,EAAa5F,IAAb,CAAkB+W,UAAU,CAAV,CAAlB;cACU,CAAV,EAAa/W,IAAb,CAAkB+W,UAAU,CAAV,CAAlB;gBACY,CAACnR,UAAU,CAAV,CAAD,EAAemR,UAAU,CAAV,CAAf,EAA6BA,UAAU,CAAV,CAA7B,EAA2CnR,UAAU,CAAV,CAA3C,EAAyD,CAAC,SAAD,EAAY,SAAZ,CAAzD,CAAZ;;GALF,MAOO;eACMkB,aAAakQ,cAAb,CAA4BnZ,IAA5B,EAAkC+H,SAAlC,CAAZ;eACY,CAAC,CAACmR,UAAU,CAAV,CAAD,CAAD,EAAiBA,UAAU,CAAV,CAAjB,EAA+BA,UAAU,CAAV,CAA/B,EAA6C,CAACA,UAAU,CAAV,CAAD,CAA7C,EAA6D,CAAC,SAAD,CAA7D,CAAZ;;cAEWnR,UAAU,CAAV,CAAZ;cACYkR,YAAY,CAAZ,GAAiBA,YAAY,GAAb,GAAoB,EAAhD;SACO;cACKlR,UAAU,CAAV,CADL;cAEKkR,SAFL;WAGElR,UAAU,CAAV,CAHF;gBAIOA,UAAU,CAAV,CAJP;cAKK,QALL;aAMI,GANJ;WAOEA,UAAU,CAAV;GAPT;EAvBF;iBAiCiB,wBAAU/H,IAAV,EAAgBoZ,eAAhB,EAAiC;MAC5CrR,YAAY,EAAhB;MACIsR,UAAU,EAAd;MACIC,MAAM,CAAV;OACK,IAAIta,KAAT,IAAkBgB,IAAlB,EAAwB;OACnBuZ,MAAMvZ,KAAKhB,KAAL,CAAV;OACI,CAAJ,IAASwa,SAASD,IAAI,CAAJ,CAAT,CAAT;UACOA,IAAI,CAAJ,CAAP;WACQpX,IAAR,CAAa/E,IAAIqc,eAAJ,CAAoBF,IAAI,CAAJ,CAApB,CAAb;aACUpX,IAAV,CAAeoX,IAAI,CAAJ,CAAf;OACIC,SAASD,IAAI,CAAJ,CAAT,IAAmBH,gBAAgB,CAAhB,CAAvB,EAA2C;oBAC1B,CAAhB,IAAqBI,SAASD,IAAI,CAAJ,CAAT,CAArB;;;SAGK,CAACxR,SAAD,EAAYqR,gBAAgB,CAAhB,CAAZ,EAAgCC,OAAhC,EAAyC,mBAAmBC,GAAnB,GAAyB,QAAlE,CAAP;EA/CF;uBAiDuB,gCAAY;MAC3Brc,YAAY,KAAKoB,YAAL,EAAlB;MACC2B,OAAO/C,UAAUqB,IAAV,CAAe,aAAf,EAA8BC,GAA9B,EADR;MAECmb,WAAW9a,KAAKC,KAAL,CAAWmB,IAAX,CAFZ;MAGC2Z,UAAUD,YAAYA,SAAS7U,cAAT,CAAwB,SAAxB,CAHvB;MAIIuE,YAAJ;OACK/K,YAAL,GACE4T,GADF,CACM,iBADN,EAEE9I,EAFF,CAEK,iBAFL,EAEwB,UAAUyQ,EAAV,EAAcC,WAAd,EAA2BC,UAA3B,EAAuCC,IAAvC,EAA6C;OAC/DF,WAAJ,EAAiB;UACVH,SAAS,SAAT,EAAoBI,UAApB,EAAgC,CAAhC,CAAN;IADD,MAEO,IAAIH,OAAJ,EAAa;UACbD,SAAS,CAAT,EAAYI,UAAZ,EAAwB,CAAxB,CAAN;IADM,MAEA;UACAJ,SAASI,UAAT,EAAqB,CAArB,CAAN;;UAEMxH,QAAP,CAAgBC,IAAhB,GAAuBnJ,GAAvB;GAVF;;CA1DH;AAyEA4Q,wCAAwC,uCAAxC,EAAiF,EAAjF,EAAqF,EAArF;AACArc,oBACC,6BADD,EAEC,EAFD,EAGC;iBACiB,0BAAY;OACtBoa,MAAL;OACKvL,gBAAL;EAHF;oBAKoB,6BAAY;OACzBuL,MAAL;OACKvL,gBAAL;EAPF;mBASmB,4BAAY;MACzBvD,eAAe,IAAnB;MACImG,SAASnG,aAAa5K,YAAb,EAAb;MACIgR,mBAAmBD,OAAO9Q,IAAP,CAAY,yBAAZ,CAAvB;MACI2b,kBAAkB5K,iBAAiB/Q,IAAjB,CAAsB,YAAtB,CAAtB;kBACgB6K,EAAhB,CAAmB,OAAnB,EAA4B,YAAY;OACnCiG,SAASnG,aAAa5K,YAAb,EAAb;OACIkK,UAAU6G,OAAO9Q,IAAP,CAAY,oBAAZ,CAAd;OACI8K,MAAMb,QAAQvI,IAAR,CAAa,KAAb,CAAV;OACIsP,SAASlG,GAAb;OACImG,gBAAgBH,OAAO9Q,IAAP,CAAY,eAAZ,CAApB;OACIiR,cAAc9Q,MAAd,GAAuB,CAA3B,EAA8B;aACpB;UACH2K,GADG;WAEF;KAFP;kBAIcwF,IAAd,CAAmB,UAAU5P,KAAV,EAAiBwQ,UAAjB,EAA6B;SAC3CC,eAAe3S,OAAO0S,UAAP,CAAnB;SACIE,aAAaD,aAAa9F,IAAb,CAAkB,MAAlB,CAAjB;SACIuQ,cAAczK,aAAalR,GAAb,EAAlB;YACOyB,IAAP,CAAY0P,UAAZ,IAA0BwK,WAA1B;KAJD;;;OAQGC,aAAalR,aAAaiG,aAAb,EAAjB;OACI,CAACpS,OAAOsd,aAAP,CAAqBD,UAArB,CAAL,EAAuC;QAClC,OAAO7K,MAAP,IAAiB,QAArB,EAA+B;cACrB;WACHlG,GADG;YAEF;MAFP;;WAKMpJ,IAAP,GAAclD,OAAOud,MAAP,CAAc/K,OAAOtP,IAArB,EAA2BiJ,aAAaiG,aAAb,EAA3B,CAAd;;;;UAIMlP,IAAP,CAAY,MAAZ,IAAsBia,gBAAgBja,IAAhB,CAAqB,UAArB,CAAtB;OACI6P,mBAAmBT,OAAO9Q,IAAP,CAAY,yBAAZ,CAAvB;oBACiByR,iBAAjB;gBACa1G,OAAb,CAAqBiG,MAArB,EACEhG,IADF,CACO,UAAUtJ,IAAV,EAAgB;qBACJ+P,iBAAjB,CAAmC;WAC5B;KADP;oBAGgBuK,WAAhB,CAA4Bta,IAA5B;iBACawM,gBAAb;IANF,EAQEiE,IARF,CAQO,YAAY;qBACAV,iBAAjB,CAAmC;WAC5B;KADP;IATF;GAlCD;;CAjBH;AAoEApS,oBACC,8BADD,EAEC,EAFD,EAGC;iBACiB,0BAAY;MACvB4c,eAAJ;OACK/P,mBAAL;OACK2B,cAAL;OACKC,yBAAL;OACKpD,oBAAL;EANF;oBAQoB,6BAAY;OACzBA,oBAAL;;CAZH;AAgBArL,oBACC,8BADD,EAEC,EAFD,EAGC;;iBAEiB,0BAAY;OACtB6c,sBAAL;EAHF;yBAKyB,kCAAY;;;OAC9Bvd,SAAL,CAAekM,EAAf,CAAkB,OAAlB,EAA2B,gCAA3B,EAA6D,YAAM;WAC7DsR,mBAAL;GADD;OAGKxd,SAAL,CAAekM,EAAf,CAAkB,OAAlB,EAA2B,gCAA3B,EAA6D,YAAM;WAC7DuR,mBAAL;GADD;EATF;sBAasB,+BAAY;IAC9B,gCAAF,EAAoC,KAAKzd,SAAzC,EAAoD0d,IAApD;IACE,gCAAF,EAAoC,KAAK1d,SAAzC,EAAoDuV,IAApD;EAfF;sBAiBsB,+BAAY;;;MAC5BoI,WAAW7c,EAAE,oCAAF,EAAwC,KAAKd,SAA7C,CAAf;MACCmM,MAAM,KAAKnM,SAAL,CAAe+C,IAAf,CAAoB,KAApB,CADP;MAECsP,SAASlG,MAAM,mCAAN,GAA4CiP,mBAAmBuC,SAASrc,GAAT,EAAnB,CAFtD;MAGCsR,mBAAmB,KAAK5S,SAAL,CAAeqB,IAAf,CAAoB,yBAApB,CAHpB;mBAIiByR,iBAAjB;eACa1G,OAAb,CAAqBiG,MAArB,EAA6BhG,IAA7B,CAAkC,gBAAQ;oBACxByG,iBAAjB,CAAmC;UAC5B;IADP;KAGE,yBAAF,EAA6B,QAAK9S,SAAlC,EAA6CuM,IAA7C,CAAkDxJ,IAAlD;GAJD;;CA1BH;AAmCArC,oBACC,4BADD,EAEC,EAFD,EAGC;oBACoB,6BAAY;MAC1BV,YAAY,KAAKoB,YAAL,EAAhB;MACIwM,QAAQ5N,UAAUqB,IAAV,CAAe,aAAf,EAA8BC,GAA9B,EAAZ;MACIyB,OAAOpB,KAAKC,KAAL,CAAWgM,KAAX,CAAX;AACA,AAGA,SAAO;cACK,CAAC,CAAC,CAAC7K,KAAK,QAAL,CAAD,EAAiBA,KAAK,KAAL,CAAjB,CAAD,CAAD,CADL;cAEKA,KAAK,UAAL,CAFL;WAGE;GAHT;EARF;YAcY,qBAAY;MAClBA,OAAO,KAAK6a,iBAAL,EAAX;OACKjS,iBAAL,CAAuB,KAAvB,EAA8BkS,MAA9B,CAAqC9a,KAAK,WAAL,CAArC,EAAwD;YAC9C,CAACjC,EAAE+c,MAAF,CAASC,YADoC;mBAEvC;cACLje,OAAOge,MAAP,CAAcE,WADT;qBAEE;qBACA,IADA;iBAEJ,OAFI;mBAGF;;IAPuC;SAUjD;WACE;UACD,CADC;UAEDhb,KAAK,WAAL;KAHD;WAKE;eACIlD,OAAOge,MAAP,CAAcG;;;GAhB3B;;CAnBH;AA0CAtd,oBACC,iCADD,EAEC,EAFD,EAGC;sBACsB,KADtB;OAEO,cAAUV,SAAV,EAAqBa,MAArB,EAA6BZ,eAA7B,EAA8C;OAC9Cc,YAAL,CAAkBlB,OAAOG,SAAP,CAAlB;MACIie,iBAAiBje,UAAUqB,IAAV,CAAe,oBAAf,EAAqCC,GAArC,EAArB;MACM4c,UAAU,CAAC,CAAC/c,OAAOnB,UAAUqB,IAAV,CAAe,kBAAf,EAAmCC,GAAnC,EAAP,CAAlB;MACI4c,OAAJ,EAAa;qBACM,SAAlB;;OAEIC,mBAAL,GAA2Bzd,oBAAoBX,WAApB,CAAgCC,SAAhC,EAA2Cie,cAA3C,CAA3B;MACI,KAAKE,mBAAT,EAA8B;OACvBC,eAAepe,UAAUqB,IAAV,CAAe,oBAAf,EAAqCC,GAArC,EAArB;OACI8c,YAAJ,EAAkB;SACZD,mBAAL,CAAyB5c,SAAzB,GAAqCI,KAAKC,KAAL,CAAWwc,YAAX,CAArC;;;OAGGrS,oBAAL;OACK7K,aAAL,CAAmBlB,SAAnB;;CApBH;AAwBAU,oBACC,iCADD,EAEC,EAFD,EAGC;0BAC0B,KAD1B;yBAEyB,KAFzB;0BAG0B,KAH1B;oBAAA,iCAIuB;;;MACjB2d,cAAcle,IAAIme,QAAJ,CAAa,wBAAb,EAAuC,IAAvC,CAAlB;MACCC,sBAAsB,KAAKC,sBAAL,EADvB;MAEI,QAAQH,WAAR,IAAuB,KAAKtL,UAAhC,EAA4C;uBAEzC1R,IADF,CACO,YADP,EAEEC,GAFF,CAEM+c,WAFN,EAGE/K,OAHF,CAGU,gBAHV;;OAKImL,mBAAL,CAAyB,IAAzB;sBACoBpd,IAApB,CAAyB,YAAzB,EAAuC6K,EAAvC,CAA0C,gBAA1C,EAA4D,YAAM;WAC5DuS,mBAAL,CAAyB,IAAzB;OACI,QAAK1L,UAAT,EAAqB;QAChB8C,QAAJ,CAAa,wBAAb,EAAuC0I,oBAAoBld,IAApB,CAAyB,YAAzB,EAAuCC,GAAvC,EAAvC;;GAHF;sBAMoBD,IAApB,CAAyB,YAAzB,EAAuC6K,EAAvC,CAA0C,kBAA1C,EAA8D,YAAM;WAC9DuS,mBAAL,CAAyB,KAAzB;OACI,QAAK1L,UAAT,EAAqB;QAChB8C,QAAJ,CAAa,wBAAb,EAAuC0I,oBAAoBld,IAApB,CAAyB,YAAzB,EAAuCC,GAAvC,EAAvC;;GAHF;OAMKod,8BAAL;EA1BF;oBAAA,iCA4BoC;MAAfC,MAAe,uEAAN,IAAM;;MAC5BC,OAAO,IAAb;MACIC,WAAWD,KAAKE,sBAAL,GAA8BpS,IAA9B,CAAmC,eAAnC,CAAf;MACCqS,iBAAiBH,KAAKJ,sBAAL,GAA8Bnd,IAA9B,CAAmC,4BAAnC,CADlB;MAECgR,SAAS,EAFV;MAGI,CAACsM,MAAL,EAAa;QACPK,qBAAL,GAA6BzS,IAA7B,CAAkC,EAAlC;;iBAEcoF,IAAf,CAAoB,YAAY;OAC3BsN,cAAcL,KAAKI,qBAAL,GAA6B3d,IAA7B,CAAkC,eAAeP,EAAE,IAAF,EAAQQ,GAAR,EAAf,GAA+B,IAAjE,CAAlB;OACI0K,eAAelL,EAAE,IAAF,CAAnB;OACI,IAAIme,YAAYzd,MAApB,EAA4B;WACpB,IAAP;;YAEQ;YACAwK,aAAajJ,IAAb,CAAkB,QAAlB,CADA;gBAEIiJ,aAAajJ,IAAb,CAAkB,QAAlB,CAFJ;UAGF,YAHE;UAIF,aAJE;aAKC,IALD;YAMA,IANA;cAOE8b,QAPF;cAQE7S,aAAa1K,GAAb;IARX;QAUK4d,YAAL,CAAkB7M,MAAlB;GAhBD;EApCF;aAAA,wBAuDcA,MAvDd,EAuDsB;MACduM,OAAO,IAAb;MACInN,YAAY5R,OAAO6R,QAAP,EAAhB;MACCyN,qBAAqBP,KAAKI,qBAAL,EADtB;eAEa5S,OAAb,CAAqBiG,MAArB,EACEhG,IADF,CACO,UAAUtJ,IAAV,EAAgB;OAEpB6b,KACEJ,sBADF,GAEEnd,IAFF,CAEO,mBAAmBgR,OAAO+M,QAA1B,GAAqC,IAF5C,EAGE1M,EAHF,CAGK,WAHL,KAIA,CAACyM,mBAAmB9d,IAAnB,CAAwB,+BAA+BgR,OAAO+M,QAAtC,GAAiD,IAAzE,EAA+E5d,MALjF,EAME;SACIuK,oBAAL,CAA0BoT,mBAAmB1O,MAAnB,CAA0B1N,IAA1B,EAAgCsc,QAAhC,CAAyC,gBAAzC,CAA1B;SACKC,sBAAL;cACUxN,OAAV;;GAXH,EAcE0B,IAdF,CAcO,UAAU+L,KAAV,EAAiB;aACZxN,MAAV;GAfF;SAiBON,UAAUO,OAAV,EAAP;EA5EF;+BAAA,4CA8EkC;;;OAC3B8M,sBAAL,GACEzd,IADF,CACO,qBADP,EAEE6K,EAFF,CAEK,OAFL,EAEc,YAAM;WACbsS,sBAAL,GAA8BgB,WAA9B,CAA0C,QAA1C;GAHF;EA/EF;uBAAA,oCAqF0B;MACpBC,uBAAuB,KAAKT,qBAAL,EAA3B;uBACqB3d,IAArB,CAA0B,cAA1B,EAA0C2T,GAA1C,CAA8C,OAA9C;uBACqB3T,IAArB,CAA0B,cAA1B,EAA0CyN,KAA1C,CAAgD,YAAY;OACvDuC,gBAAgBvQ,EAAE,IAAF,EAClBO,IADkB,CACb,kBADa,EAElBqe,GAFkB,CAEd,SAFc,CAApB;OAGCC,eAAetO,cAAcvE,OAAd,CAAsB,kBAAtB,CAHhB;OAIC8S,eAAeD,aAAate,IAAb,CAAkB,eAAlB,CAJhB;OAKC0B,OAAOsO,cAActO,IAAd,EALR;OAMI8c,cAAc,SAAdA,WAAc,GAAY;iBAChBpT,QAAb,CAAsB,QAAtB;IADD;OAGIqT,cAAc,SAAdA,WAAc,GAAY;iBAChBnT,WAAb,CAAyB,QAAzB;IADD;OAGI,UAAU5J,KAAKgd,IAAnB,EAAyB;;kBAEVtT,QAAd,CAAuB,QAAvB;iBACapL,IAAb,CAAkB,oBAAlB,EAAwCsL,WAAxC,CAAoD,QAApD;IAHD,MAIO;;kBAEQF,QAAd,CAAuB,QAAvB;iBACapL,IAAb,CAAkB,oBAAlB,EAAwCsL,WAAxC,CAAoD,QAApD;;GApBF;EAxFF;qBAAA,gCAgHsB3M,SAhHtB,EAgHiC;MAC3BmM,MAAMnM,UAAU+C,IAAV,CAAe,KAAf,CAAV;eACaqJ,OAAb,CAAqBD,GAArB,EAA0BE,IAA1B,CAA+B,UAAUtJ,IAAV,EAAgB;aACpC1B,IAAV,CAAe,WAAf,EAA4BkL,IAA5B,CAAiCxJ,KAAKoH,MAAL,CAAYqC,UAA7C;GADD;EAlHF;uBAAA,oCAsH0B;MACpB,KAAKwT,uBAAL,IAAgC,KAApC,EAA2C;QACrCA,uBAAL,GAA+B,KAAK5e,YAAL,GAAoBC,IAApB,CAAyB,yBAAzB,CAA/B;;SAEM,KAAK2e,uBAAZ;EA1HF;sBAAA,mCA4HyB;MACnB,KAAKC,sBAAL,IAA+B,KAAnC,EAA0C;QACpCA,sBAAL,GAA8B,KAAK7e,YAAL,GAAoBC,IAApB,CAAyB,wBAAzB,CAA9B;;SAEM,KAAK4e,sBAAZ;EAhIF;uBAAA,oCAkI0B;MACpB,KAAKC,uBAAL,IAAgC,KAApC,EAA2C;QACrCA,uBAAL,GAA+B,KAAK9e,YAAL,GAAoBC,IAApB,CAAyB,qBAAzB,CAA/B;;SAEM,KAAK6e,uBAAZ;EAtIF;eAAA,4BAwIkB;OACXC,mBAAL;EAzIF;cAAA,2BA2IiB;OACV1B,mBAAL,CAAyB,KAAzB;;CA/IH;AAmJA/d,oBACC,0CADD,EAEC,EAFD,EAGC;iBACiB,0BAAY;OACtBoa,MAAL;OACKE,sBAAL;EAHF;yBAKyB,kCAAY;MAC7Bhb,YAAY,KAAKoB,YAAL,EAAlB;YACUC,IAAV,CAAe,eAAf,EAAgC6K,EAAhC,CAAmC,OAAnC,EAA4C,YAAY;OACnDC,MAAM,qDAAV;UACO,mBAAP;OACIiO,QAAQpa,UAAUqB,IAAV,CAAe,qCAAf,CAAZ;OACI+Y,MAAM9Y,GAAN,OAAgB,KAApB,EAA2B;WACnB,8BAA8B8Y,MAAM9Y,GAAN,EAA9B,GAA4C,KAAnD;;UAGA,+BAA+B8Z,mBAAmBpb,UAAUqB,IAAV,CAAe,iBAAf,EAAkC0B,IAAlC,CAAuC,OAAvC,CAAnB,CAA/B,GAAqG,MADtG;OAEIqd,OAAJ,CAAYjU,GAAZ;GATD;;CAVH;AAwBAkU,yCAAyC,2CAAzC,EAAsF,EAAtF,EAA0F,EAA1F"}