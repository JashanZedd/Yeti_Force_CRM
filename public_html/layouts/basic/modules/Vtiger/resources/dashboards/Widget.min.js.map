{"version":3,"file":"Widget.min.js","sources":["Widget.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n * Contributor(s): YetiForce.com\n *************************************************************************************/\n'use strict';\n\njQuery.Class(\n\t'Vtiger_Widget_Js',\n\t{\n\t\twidgetPostLoadEvent: 'Vtiget.Dashboard.PostLoad',\n\t\twidgetPostRefereshEvent: 'Vtiger.Dashboard.PostRefresh',\n\t\tgetInstance: function getInstance(container, widgetClassName, moduleName) {\n\t\t\tif (typeof moduleName === 'undefined') {\n\t\t\t\tmoduleName = app.getModuleName();\n\t\t\t}\n\t\t\tconst moduleClass = window[moduleName + '_' + widgetClassName + '_Widget_Js'];\n\t\t\tconst fallbackClass = window['Vtiger_' + widgetClassName + '_Widget_Js'];\n\t\t\tconst yetiClass = window['YetiForce_' + widgetClassName + '_Widget_Js'];\n\t\t\tconst basicClass = YetiForce_Widget_Js;\n\t\t\tlet instance;\n\t\t\tif (typeof moduleClass !== 'undefined') {\n\t\t\t\tinstance = new moduleClass(container, false, widgetClassName);\n\t\t\t} else if (typeof fallbackClass !== 'undefined') {\n\t\t\t\tinstance = new fallbackClass(container, false, widgetClassName);\n\t\t\t} else if (typeof yetiClass !== 'undefined') {\n\t\t\t\tinstance = new yetiClass(container, false, widgetClassName);\n\t\t\t} else {\n\t\t\t\tinstance = new basicClass(container, false, widgetClassName);\n\t\t\t}\n\t\t\treturn instance;\n\t\t}\n\t},\n\t{\n\t\tcontainer: false,\n\t\tplotContainer: false,\n\t\tchartInstance: false,\n\t\tchartData: [],\n\t\tparamCache: false,\n\t\tinit: function init(container, reload, widgetClassName) {\n\t\t\tcontainer = $(container);\n\t\t\tthis.setContainer(container);\n\t\t\tthis.registerWidgetPostLoadEvent(container);\n\t\t\tif (!reload) {\n\t\t\t\tthis.registerWidgetPostRefreshEvent(container);\n\t\t\t}\n\t\t\tthis.registerCache(container);\n\t\t},\n\t\tareColorsFromDividingField() {\n\t\t\treturn !!Number(\n\t\t\t\tthis.getContainer()\n\t\t\t\t\t.find('[name=\"colorsFromDividingField\"]')\n\t\t\t\t\t.val()\n\t\t\t);\n\t\t},\n\t\tgetSourceChartType() {\n\t\t\treturn this.getContainer()\n\t\t\t\t.find('[name=\"typeChart\"]')\n\t\t\t\t.val();\n\t\t},\n\t\tisMultiFilter() {\n\t\t\tif (typeof this.filterIds !== 'undefined') {\n\t\t\t\treturn this.filterIds.length > 1;\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\t/**\n\t\t * Get widget data\n\t\t * @returns {*}\n\t\t */\n\t\tgetWidgetData() {\n\t\t\tif (typeof this.widgetData !== 'undefined') {\n\t\t\t\treturn this.widgetData;\n\t\t\t}\n\t\t\tlet widgetDataEl = this.getContainer().find('.widgetData');\n\t\t\tif (widgetDataEl.length) {\n\t\t\t\treturn (this.widgetData = JSON.parse(widgetDataEl.val()));\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\t/**\n\t\t * Predefined functions that will replace options function type\n\t\t * @type {Object}\n\t\t */\n\t\tglobalChartFunctions: {\n\t\t\t/**\n\t\t\t * Functions for x or y axes scales xAxes:[{here}]\n\t\t\t */\n\t\t\tscales: {\n\t\t\t\tformatAxesLabels: function formatAxesLabels(value, index, values) {\n\t\t\t\t\tif (String(value).length > 0 && !isNaN(Number(value))) {\n\t\t\t\t\t\treturn App.Fields.Double.formatToDisplay(value);\n\t\t\t\t\t}\n\t\t\t\t\treturn value;\n\t\t\t\t}\n\t\t\t},\n\t\t\t/**\n\t\t\t * Functions for datalabels\n\t\t\t */\n\t\t\tdatalabels: {\n\t\t\t\tdisplay(context) {\n\t\t\t\t\tconst meta = context.chart.getDatasetMeta(context.datasetIndex);\n\t\t\t\t\treturn meta.hidden !== true;\n\t\t\t\t},\n\t\t\t\tformatter: function datalabelsFormatter(value, context) {\n\t\t\t\t\tif (\n\t\t\t\t\t\ttypeof this.widgetData !== 'undefined' &&\n\t\t\t\t\t\ttypeof this.widgetData.valueType !== 'undefined' &&\n\t\t\t\t\t\tthis.widgetData.valueType === 'count'\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn App.Fields.Double.formatToDisplay(value, 0);\n\t\t\t\t\t}\n\t\t\t\t\tif (\n\t\t\t\t\t\ttypeof context.chart.data.datasets[context.datasetIndex].dataFormatted !== 'undefined' &&\n\t\t\t\t\t\ttypeof context.chart.data.datasets[context.datasetIndex].dataFormatted[context.dataIndex] !== 'undefined'\n\t\t\t\t\t) {\n\t\t\t\t\t\t// data presented in different format usually exists in alternative dataFormatted array\n\t\t\t\t\t\treturn context.chart.data.datasets[context.datasetIndex].dataFormatted[context.dataIndex];\n\t\t\t\t\t}\n\t\t\t\t\tif (String(value).length > 0 && isNaN(Number(value))) {\n\t\t\t\t\t\treturn App.Fields.Double.formatToDisplay(value);\n\t\t\t\t\t}\n\t\t\t\t\treturn value;\n\t\t\t\t}\n\t\t\t},\n\t\t\t/**\n\t\t\t * Tooltips functions\n\t\t\t */\n\t\t\ttooltips: {\n\t\t\t\tlabel: function tooltipLabelCallback(tooltipItem, data) {\n\t\t\t\t\t// get already formatted data if exists\n\t\t\t\t\tif (\n\t\t\t\t\t\ttypeof data.datasets[tooltipItem.datasetIndex].dataFormatted !== 'undefined' &&\n\t\t\t\t\t\tdata.datasets[tooltipItem.datasetIndex].dataFormatted[tooltipItem.index] !== 'undefined'\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn data.datasets[tooltipItem.datasetIndex].dataFormatted[tooltipItem.index];\n\t\t\t\t\t}\n\t\t\t\t\t// if there is no formatted data so try to format it\n\t\t\t\t\tif (\n\t\t\t\t\t\tString(data.datasets[tooltipItem.datasetIndex].data[tooltipItem.index]).length > 0 &&\n\t\t\t\t\t\t!isNaN(Number(data.datasets[tooltipItem.datasetIndex].data[tooltipItem.index]))\n\t\t\t\t\t) {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\ttypeof this.widgetData !== 'undefined' &&\n\t\t\t\t\t\t\ttypeof this.widgetData.valueType !== 'undefined' &&\n\t\t\t\t\t\t\tthis.widgetData.valueType === 'count'\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\treturn App.Fields.Double.formatToDisplay(\n\t\t\t\t\t\t\t\tdata.datasets[tooltipItem.datasetIndex].data[tooltipItem.index],\n\t\t\t\t\t\t\t\t0\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn App.Fields.Double.formatToDisplay(data.datasets[tooltipItem.datasetIndex].data[tooltipItem.index]);\n\t\t\t\t\t}\n\t\t\t\t\t// return raw data at idex\n\t\t\t\t\treturn data.datasets[tooltipItem.datasetIndex].data[tooltipItem.index];\n\t\t\t\t},\n\t\t\t\ttitle: function tooltipTitleCallback(tooltipItems, data) {\n\t\t\t\t\tconst tooltipItem = tooltipItems[0];\n\t\t\t\t\t// get already formatted title if exists\n\t\t\t\t\tif (\n\t\t\t\t\t\ttypeof data.datasets[tooltipItem.datasetIndex].titlesFormatted !== 'undefined' &&\n\t\t\t\t\t\tdata.datasets[tooltipItem.datasetIndex].titlesFormatted[tooltipItem.index] !== 'undefined'\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn data.datasets[tooltipItem.datasetIndex].titlesFormatted[tooltipItem.index];\n\t\t\t\t\t}\n\t\t\t\t\t// if there is no formatted title so try to format it\n\t\t\t\t\tif (String(data.labels[tooltipItem.index]).length > 0 && !isNaN(Number(data.labels[tooltipItem.index]))) {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\ttypeof this.widgetData !== 'undefined' &&\n\t\t\t\t\t\t\ttypeof this.widgetData.valueType !== 'undefined' &&\n\t\t\t\t\t\t\tthis.widgetData.valueType === 'count'\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\treturn App.Fields.Double.formatToDisplay(data.labels[tooltipItem.index], 0);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn App.Fields.Double.formatToDisplay(data.labels[tooltipItem.index]);\n\t\t\t\t\t}\n\t\t\t\t\t// return label at index\n\t\t\t\t\treturn data.labels[tooltipItem.index];\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tlegend: {\n\t\t\t\tonClick(e, legendItem) {\n\t\t\t\t\tlet type = this.chartInstance.config.type;\n\t\t\t\t\tif (typeof Chart.defaults[type] !== 'undefined') {\n\t\t\t\t\t\treturn Chart.defaults[type].legend.onClick.apply(this.chartInstance, [e, legendItem]);\n\t\t\t\t\t}\n\t\t\t\t\treturn Chart.defaults.global.legend.onClick.apply(this.chartInstance, [e, legendItem]);\n\t\t\t\t},\n\t\t\t\tgenerateLabels(chart) {\n\t\t\t\t\tlet type = chart.config.type;\n\t\t\t\t\tlet labels;\n\t\t\t\t\tif (typeof Chart.defaults[type] !== 'undefined') {\n\t\t\t\t\t\tlabels = Chart.defaults[type].legend.labels.generateLabels(chart);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlabels = Chart.defaults.global.legend.labels.generateLabels(chart);\n\t\t\t\t\t}\n\t\t\t\t\tif (this.areColorsFromDividingField() || this.isMultiFilter()) {\n\t\t\t\t\t\tchart.config.options.legend.labels.boxWidth = 12;\n\t\t\t\t\t\tlabels.forEach((label, index) => {\n\t\t\t\t\t\t\tlabel.fillStyle = 'rgba(0,0,0,0)';\n\t\t\t\t\t\t\tlabel.strokeStyle = 'rgba(0,0,0,0.15)';\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\treturn labels;\n\t\t\t\t},\n\t\t\t\tdisplay() {\n\t\t\t\t\tif (this.isMultiFilter() || this.areColorsFromDividingField()) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * plugins\n\t\t\t */\n\t\t\tplugins: {\n\t\t\t\t/**\n\t\t\t\t * If datalabels doesn't fit - hide them individually\n\t\t\t\t * @param  {Chart} chart chart instance\n\t\t\t\t * @return {undefined}\n\t\t\t\t */\n\t\t\t\thideVerticalBarDatalabelsIfNeeded: function (chart) {\n\t\t\t\t\tlet getDatasetsMeta = function (chart) {\n\t\t\t\t\t\tconst datasets = [];\n\t\t\t\t\t\tconst data = chart.data;\n\t\t\t\t\t\tif (typeof data !== 'undefined' && typeof data.datasets !== 'undefined' && Array.isArray(data.datasets)) {\n\t\t\t\t\t\t\tfor (let i = 0, len = data.datasets.length; i < len; i++) {\n\t\t\t\t\t\t\t\tconst meta = chart.getDatasetMeta(i);\n\t\t\t\t\t\t\t\tif (typeof meta.data !== 'undefined' && Array.isArray(meta.data)) {\n\t\t\t\t\t\t\t\t\tdatasets.push(meta);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn datasets;\n\t\t\t\t\t};\n\t\t\t\t\tlet datasetsMeta = getDatasetsMeta(chart);\n\t\t\t\t\tlet datasets = chart.data.datasets;\n\t\t\t\t\tfor (let i = 0, len = datasets.length; i < len; i++) {\n\t\t\t\t\t\tconst dataset = datasets[i];\n\t\t\t\t\t\tconst meta = datasetsMeta[i];\n\t\t\t\t\t\tif (meta.hidden) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst metaData = meta.data;\n\t\t\t\t\t\tif (typeof dataset._models === 'undefined') {\n\t\t\t\t\t\t\tdataset._models = {};\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (typeof dataset.datalabels === 'undefined') {\n\t\t\t\t\t\t\tdataset.datalabels = {};\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (typeof dataset.datalabels.display === 'undefined') {\n\t\t\t\t\t\t\tdataset.datalabels.display = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor (let iItem = 0, lenItem = metaData.length; iItem < lenItem; iItem++) {\n\t\t\t\t\t\t\tconst dataItem = metaData[iItem];\n\t\t\t\t\t\t\tif (typeof dataItem.$datalabels !== 'undefined' && typeof dataItem.$datalabels._model !== 'undefined') {\n\t\t\t\t\t\t\t\tlet model = dataItem.$datalabels._model;\n\t\t\t\t\t\t\t\tif (model !== null && typeof model !== 'undefined') {\n\t\t\t\t\t\t\t\t\tdataset._models[iItem] = model;\n\t\t\t\t\t\t\t\t} else if (dataset._models[iItem] !== null && typeof dataset._models[iItem] !== 'undefined') {\n\t\t\t\t\t\t\t\t\tmodel = dataset._models[iItem];\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tconst labelWidth = model.size.width + model.padding.width + model.borderWidth * 2;\n\t\t\t\t\t\t\t\tconst labelHeight = model.size.height + model.padding.height + model.borderWidth * 2;\n\t\t\t\t\t\t\t\tconst barHeight = dataItem.height();\n\t\t\t\t\t\t\t\tlet threshold = 10;\n\t\t\t\t\t\t\t\tif (typeof chart.config.options.verticalBarLabelsThreshold !== 'undefined') {\n\t\t\t\t\t\t\t\t\tthreshold = chart.config.options.verticalBarLabelsThreshold;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (dataItem._view.width + threshold < labelWidth || barHeight + threshold < labelHeight) {\n\t\t\t\t\t\t\t\t\tdataItem.$datalabels._model.positioner = () => {\n\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tdataItem.$datalabels._model = model;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t/**\n\t\t\t\t * If datalabels doesn't fit - hide them individually\n\t\t\t\t * @param  {Chart} chart  Chart instance\n\t\t\t\t * @return {undefined}\n\t\t\t\t */\n\t\t\t\thideHorizontalBarDatalabelsIfNeeded: function hideHorizontalBarDatalabelsIfNeeded(chart) {\n\t\t\t\t\tlet getDatasetsMeta = function (chart) {\n\t\t\t\t\t\tconst datasets = [];\n\t\t\t\t\t\tconst data = chart.data;\n\t\t\t\t\t\tif (typeof data !== 'undefined' && typeof data.datasets !== 'undefined' && Array.isArray(data.datasets)) {\n\t\t\t\t\t\t\tfor (let i = 0, len = data.datasets.length; i < len; i++) {\n\t\t\t\t\t\t\t\tconst meta = chart.getDatasetMeta(i);\n\t\t\t\t\t\t\t\tif (typeof meta.data !== 'undefined' && Array.isArray(meta.data)) {\n\t\t\t\t\t\t\t\t\tdatasets.push(meta);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn datasets;\n\t\t\t\t\t};\n\t\t\t\t\tlet datasetsMeta = getDatasetsMeta(chart);\n\t\t\t\t\tlet datasets = chart.data.datasets;\n\t\t\t\t\tfor (let i = 0, len = datasets.length; i < len; i++) {\n\t\t\t\t\t\tconst dataset = datasets[i];\n\t\t\t\t\t\tconst meta = datasetsMeta[i];\n\t\t\t\t\t\tif (meta.hidden) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst metaData = meta.data;\n\t\t\t\t\t\tif (typeof dataset._models === 'undefined') {\n\t\t\t\t\t\t\tdataset._models = {};\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (typeof dataset.datalabels === 'undefined') {\n\t\t\t\t\t\t\tdataset.datalabels = {};\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (typeof dataset.datalabels.display === 'undefined') {\n\t\t\t\t\t\t\tdataset.datalabels.display = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor (let iItem = 0, lenItem = metaData.length; iItem < lenItem; iItem++) {\n\t\t\t\t\t\t\tconst dataItem = metaData[iItem];\n\t\t\t\t\t\t\tif (typeof dataItem.$datalabels !== 'undefined' && typeof dataItem.$datalabels._model !== 'undefined') {\n\t\t\t\t\t\t\t\tlet model = dataItem.$datalabels._model;\n\t\t\t\t\t\t\t\tif (model !== null && typeof model !== 'undefined') {\n\t\t\t\t\t\t\t\t\tdataset._models[iItem] = model;\n\t\t\t\t\t\t\t\t} else if (dataset._models[iItem] !== null && typeof dataset._models[iItem] !== 'undefined') {\n\t\t\t\t\t\t\t\t\tmodel = dataset._models[iItem];\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tconst labelWidth = model.size.width + model.padding.width + model.borderWidth * 2;\n\t\t\t\t\t\t\t\tconst labelHeight = model.size.height + model.padding.height + model.borderWidth * 2;\n\t\t\t\t\t\t\t\tconst barWidth = dataItem.width;\n\t\t\t\t\t\t\t\tlet threshold = 10;\n\t\t\t\t\t\t\t\tif (typeof chart.config.options.horizontalBarLabelsThreshold !== 'undefined') {\n\t\t\t\t\t\t\t\t\tthreshold = chart.config.options.horizontalBarLabelsThreshold;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (dataItem._view.height + threshold < labelHeight || barWidth + threshold < labelWidth) {\n\t\t\t\t\t\t\t\t\tdataItem.$datalabels._model.positioner = () => {\n\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tdataItem.$datalabels._model = model;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t/**\n\t\t\t\t * Fix to long axis labels\n\t\t\t\t * @param  {Chart}  chart    Chart instance\n\t\t\t\t * @return {Boolean}       [description]\n\t\t\t\t */\n\t\t\t\tfixXAxisLabels: function fixXAxisLabels(chart) {\n\t\t\t\t\tlet shortenXTicks = function shortenXTicks(data, options) {\n\t\t\t\t\t\tif (typeof options.scales === 'undefined') {\n\t\t\t\t\t\t\toptions.scales = {};\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (typeof options.scales.xAxes === 'undefined') {\n\t\t\t\t\t\t\toptions.scales.xAxes = [{}];\n\t\t\t\t\t\t}\n\t\t\t\t\t\toptions.scales.xAxes.forEach(axis => {\n\t\t\t\t\t\t\tif (typeof axis.ticks === 'undefined') {\n\t\t\t\t\t\t\t\taxis.ticks = {};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\taxis.ticks.callback = function xAxisTickCallback(value, index, values) {\n\t\t\t\t\t\t\t\tif (value.length > 13) {\n\t\t\t\t\t\t\t\t\treturn value.substr(0, 10) + '...';\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn options;\n\t\t\t\t\t};\n\t\t\t\t\tlet rotateXLabels90 = function rotateXLabels90(data, options) {\n\t\t\t\t\t\tif (typeof options.scales === 'undefined') {\n\t\t\t\t\t\t\toptions.scales = {};\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (typeof options.scales.xAxes === 'undefined') {\n\t\t\t\t\t\t\toptions.scales.xAxes = [{}];\n\t\t\t\t\t\t}\n\t\t\t\t\t\toptions.scales.xAxes.forEach(axis => {\n\t\t\t\t\t\t\tif (typeof axis.ticks === 'undefined') {\n\t\t\t\t\t\t\t\taxis.ticks = {};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\taxis.ticks.minRotation = 90;\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn options;\n\t\t\t\t\t};\n\n\t\t\t\t\tchart.data.datasets.forEach((dataset, index) => {\n\t\t\t\t\t\tif (dataset._updated) {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor (let prop in dataset._meta) {\n\t\t\t\t\t\t\tif (dataset._meta.hasOwnProperty(prop)) {\n\t\t\t\t\t\t\t\tfor (let i = 0, len = dataset._meta[prop].data.length; i < len; i++) {\n\t\t\t\t\t\t\t\t\tconst metaDataItem = dataset._meta[prop].data[i];\n\t\t\t\t\t\t\t\t\tconst label = metaDataItem._xScale.ticks[i];\n\t\t\t\t\t\t\t\t\tconst ctx = metaDataItem._xScale.ctx;\n\t\t\t\t\t\t\t\t\tlet categoryWidth = metaDataItem._xScale.width / dataset._meta[prop].data.length;\n\t\t\t\t\t\t\t\t\tif (typeof metaDataItem._xScale.options.categoryPercentage !== 'undefined') {\n\t\t\t\t\t\t\t\t\t\t// if it is bar chart there is category percentage option that we should use\n\t\t\t\t\t\t\t\t\t\tcategoryWidth *= metaDataItem._xScale.options.categoryPercentage;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tconst fullWidth = ctx.measureText(label).width;\n\t\t\t\t\t\t\t\t\tif (categoryWidth < fullWidth) {\n\t\t\t\t\t\t\t\t\t\tconst shortened = label.substr(0, 10) + '...';\n\t\t\t\t\t\t\t\t\t\tconst shortenedWidth = ctx.measureText(shortened).width;\n\t\t\t\t\t\t\t\t\t\tif (categoryWidth < shortenedWidth) {\n\t\t\t\t\t\t\t\t\t\t\tchart.options = rotateXLabels90(chart.data, chart.options);\n\t\t\t\t\t\t\t\t\t\t\tchart.options = shortenXTicks(chart.data, chart.options);\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\tchart.options = shortenXTicks(chart.data, chart.options);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tif (!dataset._updated) {\n\t\t\t\t\t\t\t\t\t\t\tdataset._updated = true;\n\t\t\t\t\t\t\t\t\t\t\tchart.update();\n\t\t\t\t\t\t\t\t\t\t\t// recalculate positions for smooth animation (for all datasets)\n\t\t\t\t\t\t\t\t\t\t\tchart.data.datasets.forEach((dataset, index) => {\n\t\t\t\t\t\t\t\t\t\t\t\tdataset._meta[prop].data.forEach((metaDataItem, dataIndex) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tmetaDataItem._view.x = metaDataItem._xScale.getPixelForValue(index, dataIndex);\n\t\t\t\t\t\t\t\t\t\t\t\t\tmetaDataItem._view.base = metaDataItem._xScale.getBasePixel();\n\t\t\t\t\t\t\t\t\t\t\t\t\tmetaDataItem._view.width =\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(metaDataItem._xScale.width / dataset._meta[prop].data.length) *\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmetaDataItem._xScale.options.categoryPercentage *\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmetaDataItem._xScale.options.barPercentage;\n\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tdataset._updated = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\t/**\n\t\t\t\t * Fix too long axis labels  - try to shorten and rotate\n\t\t\t\t * @param  {Chart}  chart    Chart instance\n\t\t\t\t * @return {Boolean}\n\t\t\t\t */\n\t\t\t\tfixYAxisLabels: function fixYAxisLabels(chart) {\n\t\t\t\t\tlet shortenYTicks = function shortenYTicks(data, options) {\n\t\t\t\t\t\tif (typeof options.scales === 'undefined') {\n\t\t\t\t\t\t\toptions.scales = {};\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (typeof options.scales.yAxes === 'undefined') {\n\t\t\t\t\t\t\toptions.scales.yAxes = [{}];\n\t\t\t\t\t\t}\n\t\t\t\t\t\toptions.scales.yAxes.forEach(axis => {\n\t\t\t\t\t\t\tif (typeof axis.ticks === 'undefined') {\n\t\t\t\t\t\t\t\taxis.ticks = {};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\taxis.ticks.callback = function yAxisTickCallback(value, index, values) {\n\t\t\t\t\t\t\t\tif (value.length > 13) {\n\t\t\t\t\t\t\t\t\treturn value.substr(0, 10) + '...';\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn options;\n\t\t\t\t\t};\n\t\t\t\t\tchart.data.datasets.forEach((dataset, index) => {\n\t\t\t\t\t\tif (dataset._updated) {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor (let prop in dataset._meta) {\n\t\t\t\t\t\t\tif (dataset._meta.hasOwnProperty(prop)) {\n\t\t\t\t\t\t\t\t// we have meta\n\t\t\t\t\t\t\t\tfor (let i = 0, len = dataset._meta[prop].data.length; i < len; i++) {\n\t\t\t\t\t\t\t\t\tconst metaDataItem = dataset._meta[prop].data[i];\n\t\t\t\t\t\t\t\t\tconst label = metaDataItem._view.label;\n\t\t\t\t\t\t\t\t\tif (label.length > 13) {\n\t\t\t\t\t\t\t\t\t\tchart.options = shortenYTicks(chart.data, chart.options);\n\t\t\t\t\t\t\t\t\t\tif (!dataset._updated) {\n\t\t\t\t\t\t\t\t\t\t\tdataset._updated = true;\n\t\t\t\t\t\t\t\t\t\t\tchart.update();\n\t\t\t\t\t\t\t\t\t\t\t// recalculate positions for smooth animation (for all datasets)\n\t\t\t\t\t\t\t\t\t\t\tchart.data.datasets.forEach((dataset, index) => {\n\t\t\t\t\t\t\t\t\t\t\t\tdataset._meta[prop].data.forEach((metaDataItem, dataIndex) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (typeof metaDataItem._xScale !== 'undefined') {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmetaDataItem._view.x = metaDataItem._xScale.getPixelForValue(index, dataIndex);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmetaDataItem._view.base = metaDataItem._xScale.getBasePixel();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmetaDataItem._view.width =\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(metaDataItem._xScale.width / dataset._meta[prop].data.length) *\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmetaDataItem._xScale.options.categoryPercentage *\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmetaDataItem._xScale.options.barPercentage;\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tdataset._updated = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Get function from global functions from replacement string\n\t\t * @param  {String} replacementStr replacement string from getFunctionReplacementString method\n\t\t * @return {Function}\n\t\t */\n\t\tgetFunctionFromReplacementString: function getFunctionFromReplacementString(replacementStr) {\n\t\t\tlet assignResult = false;\n\t\t\tif (replacementStr.substr(replacementStr.length - 2) === '()') {\n\t\t\t\treplacementStr = replacementStr.substr(0, replacementStr.length - 2);\n\t\t\t\tassignResult = true;\n\t\t\t}\n\t\t\tconst splitted = replacementStr.split(':');\n\t\t\tif (splitted.length !== 2) {\n\t\t\t\tapp.errorLog(\n\t\t\t\t\tnew Error(\n\t\t\t\t\t\t\"Function replacement string should look like 'function:path.to.fn' not like '\" + replacementStr + \"'\"\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t}\n\t\t\tlet finalFunction = splitted[1].split('.').reduce((previous, current) => {\n\t\t\t\treturn previous[current];\n\t\t\t}, this.globalChartFunctions);\n\t\t\tif (typeof finalFunction !== 'function') {\n\t\t\t\tapp.errorLog(new Error('Global function does not exists: ' + splitted[1]));\n\t\t\t}\n\t\t\tif (!assignResult) {\n\t\t\t\treturn finalFunction.bind(this);\n\t\t\t}\n\t\t\treturn finalFunction.call(this);\n\t\t},\n\t\t/**\n\t\t * Should options property be replaced by function?\n\t\t * @param  {String}  str\n\t\t * @return {Boolean}\n\t\t */\n\t\tisReplacementString: function isReplacementString(str) {\n\t\t\tif (typeof str !== 'string') {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn str.substr(0, 9) === 'function:';\n\t\t},\n\t\t/**\n\t\t * Recursively parse options and replace function replacement strings to functions\n\t\t * @param  {Object} options\n\t\t * @param  {bool} afterInit are we parsing chart after it was mounted ?\n\t\t * @return {Object} options with replaced string functions\n\t\t */\n\t\tparseOptionsObject: function parseOptionsObject(options, original, afterInit = false) {\n\t\t\tlet result = {};\n\t\t\tfor (let propertyName in options) {\n\t\t\t\tlet value = options[propertyName];\n\t\t\t\tif (afterInit) {\n\t\t\t\t\tif (propertyName.substr(0, 1) === '_') {\n\t\t\t\t\t\tresult[propertyName] = value;\n\t\t\t\t\t} else if (Array.isArray(value)) {\n\t\t\t\t\t\tresult[propertyName] = this.parseOptionsArray(value, original, afterInit);\n\t\t\t\t\t} else if (typeof value === 'object' && value !== null) {\n\t\t\t\t\t\tresult[propertyName] = this.parseOptionsObject(value, original, afterInit);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult[propertyName] = value;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (propertyName.substr(0, 1) === '_') {\n\t\t\t\t\t\tresult[propertyName] = value;\n\t\t\t\t\t} else if (this.isReplacementString(value)) {\n\t\t\t\t\t\tresult[propertyName] = this.getFunctionFromReplacementString(value, afterInit, original);\n\t\t\t\t\t} else if (Array.isArray(value)) {\n\t\t\t\t\t\tresult[propertyName] = this.parseOptionsArray(value, original, afterInit);\n\t\t\t\t\t} else if (typeof value === 'object' && value !== null) {\n\t\t\t\t\t\tresult[propertyName] = this.parseOptionsObject(value, original, afterInit);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult[propertyName] = value;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn result;\n\t\t},\n\t\t/**\n\t\t * Recursively parse options in array form and replace function replacement string with functions\n\t\t * @param  {Array} arr\n\t\t * @param  {bool} afterInit are we after chart js was mounted?\n\t\t * @return {Array}\n\t\t */\n\t\tparseOptionsArray: function parseOptionsArray(arr, original, afterInit = false) {\n\t\t\treturn arr.map((item, index) => {\n\t\t\t\tif (this.isReplacementString(item)) {\n\t\t\t\t\treturn this.getFunctionFromReplacementString(value);\n\t\t\t\t} else if (Array.isArray(item)) {\n\t\t\t\t\treturn this.parseOptionsArray(item, original, afterInit);\n\t\t\t\t} else if (typeof item === 'object' && item !== null) {\n\t\t\t\t\treturn this.parseOptionsObject(item, original, afterInit);\n\t\t\t\t}\n\t\t\t\treturn item;\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Recursively parse options object and replace function replacement strings with global functions\n\t\t * @param  {Object} options\n\t\t * @param  {bool} afterInit - is chartjs loaded ?\n\t\t * @return {Object}\n\t\t */\n\t\tparseOptions: function parseOptions(options, original, afterInit = false) {\n\t\t\tif (Array.isArray(options)) {\n\t\t\t\treturn this.parseOptionsArray(options, original, afterInit);\n\t\t\t} else if (typeof options === 'object' && options !== null) {\n\t\t\t\treturn this.parseOptionsObject(options, original, afterInit);\n\t\t\t}\n\t\t\tapp.errorLog(new Error('Unknown options format [' + typeof options + '] - should be object.'));\n\t\t},\n\t\t/**\n\t\t * Remove 'Divided' from chart sub type\n\t\t * for example 'barDivided' => 'bar'\n\t\t *\n\t\t * @param {String} chartSubType\n\t\t * @return {String}\n\t\t */\n\t\tremoveStackedFromName(chartSubType) {\n\t\t\tconst dividedPos = chartSubType.indexOf('Stacked');\n\t\t\tif (dividedPos > 0) {\n\t\t\t\treturn chartSubType.substr(0, dividedPos);\n\t\t\t}\n\t\t\treturn chartSubType;\n\t\t},\n\t\t/**\n\t\t * Get global charts default configuration - may be loaded from database in the future\n\t\t * We can modify something basing on chartData received from server (some custom options etc.)\n\t\t *\n\t\t * @param  {Object} chartData received from request ['labels':[],'datasets':['data':[]]] etc\n\t\t * @param  {String} chartSubType 'bar','pie' etc..\n\t\t * @return {Object}\n\t\t */\n\t\tgetGlobalDefaultChartsOptions: function getGlobalDefaultChartsOptions(chartSubType, chartData) {\n\t\t\tconst options = {\n\t\t\t\tbar: {\n\t\t\t\t\tbasic: {\n\t\t\t\t\t\tmaintainAspectRatio: false,\n\t\t\t\t\t\ttitle: {\n\t\t\t\t\t\t\tdisplay: false\n\t\t\t\t\t\t},\n\t\t\t\t\t\tlegend: {\n\t\t\t\t\t\t\tdisplay: 'function:legend.display()'\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttooltips: {\n\t\t\t\t\t\t\tmode: 'point',\n\t\t\t\t\t\t\tcallbacks: {\n\t\t\t\t\t\t\t\tlabel: 'function:tooltips.label',\n\t\t\t\t\t\t\t\ttitle: 'function:tooltips.title'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscales: {\n\t\t\t\t\t\t\txAxes: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tticks: {\n\t\t\t\t\t\t\t\t\t\tautoSkip: false,\n\t\t\t\t\t\t\t\t\t\tbeginAtZero: true,\n\t\t\t\t\t\t\t\t\t\tmaxRotation: 90,\n\t\t\t\t\t\t\t\t\t\tcallback: 'function:scales.formatAxesLabels'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tyAxes: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tticks: {\n\t\t\t\t\t\t\t\t\t\tautoSkip: false,\n\t\t\t\t\t\t\t\t\t\tbeginAtZero: true,\n\t\t\t\t\t\t\t\t\t\tcallback: 'function:scales.formatAxesLabels'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tdataset: {\n\t\t\t\t\t\tdatalabels: {\n\t\t\t\t\t\t\tfont: {\n\t\t\t\t\t\t\t\tsize: 11\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tcolor: 'white',\n\t\t\t\t\t\t\tbackgroundColor: 'rgba(0,0,0,0.2)',\n\t\t\t\t\t\t\tborderColor: 'rgba(255,255,255,0.2)',\n\t\t\t\t\t\t\tborderWidth: 2,\n\t\t\t\t\t\t\tborderRadius: 2,\n\t\t\t\t\t\t\tanchor: 'center',\n\t\t\t\t\t\t\talign: 'center',\n\t\t\t\t\t\t\tformatter: 'function:datalabels.formatter',\n\t\t\t\t\t\t\tdisplay: 'function:datalabels.display'\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tplugins: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tbeforeDraw: 'function:plugins.fixXAxisLabels'\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tbeforeDraw: 'function:plugins.hideVerticalBarDatalabelsIfNeeded'\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\tbarStacked: {\n\t\t\t\t\tbasic: {\n\t\t\t\t\t\tmaintainAspectRatio: false,\n\t\t\t\t\t\ttitle: {\n\t\t\t\t\t\t\tdisplay: false\n\t\t\t\t\t\t},\n\t\t\t\t\t\tlegend: {\n\t\t\t\t\t\t\tdisplay: 'function:legend.display()'\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttooltips: {\n\t\t\t\t\t\t\tmode: 'point',\n\t\t\t\t\t\t\tcallbacks: {\n\t\t\t\t\t\t\t\tlabel: 'function:tooltips.label',\n\t\t\t\t\t\t\t\ttitle: 'function:tooltips.title'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscales: {\n\t\t\t\t\t\t\txAxes: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tstacked: true,\n\t\t\t\t\t\t\t\t\tticks: {\n\t\t\t\t\t\t\t\t\t\tautoSkip: false,\n\t\t\t\t\t\t\t\t\t\tbeginAtZero: true,\n\t\t\t\t\t\t\t\t\t\tmaxRotation: 90,\n\t\t\t\t\t\t\t\t\t\tcallback: 'function:scales.formatAxesLabels'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tyAxes: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tstacked: true,\n\t\t\t\t\t\t\t\t\tticks: {\n\t\t\t\t\t\t\t\t\t\tautoSkip: false,\n\t\t\t\t\t\t\t\t\t\tbeginAtZero: true,\n\t\t\t\t\t\t\t\t\t\tcallback: 'function:scales.formatAxesLabels'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tdataset: {\n\t\t\t\t\t\tdatalabels: {\n\t\t\t\t\t\t\tfont: {\n\t\t\t\t\t\t\t\tsize: 11\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tcolor: 'white',\n\t\t\t\t\t\t\tbackgroundColor: 'rgba(0,0,0,0.2)',\n\t\t\t\t\t\t\tborderColor: 'rgba(255,255,255,0.2)',\n\t\t\t\t\t\t\tborderWidth: 2,\n\t\t\t\t\t\t\tborderRadius: 2,\n\t\t\t\t\t\t\tanchor: 'center',\n\t\t\t\t\t\t\talign: 'center',\n\t\t\t\t\t\t\tformatter: 'function:datalabels.formatter',\n\t\t\t\t\t\t\tdisplay: 'function:datalabels.display'\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tplugins: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tbeforeDraw: 'function:plugins.fixXAxisLabels'\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tbeforeDraw: 'function:plugins.hideVerticalBarDatalabelsIfNeeded'\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\thorizontalBar: {\n\t\t\t\t\tbasic: {\n\t\t\t\t\t\tmaintainAspectRatio: false,\n\t\t\t\t\t\ttitle: {\n\t\t\t\t\t\t\tdisplay: false\n\t\t\t\t\t\t},\n\t\t\t\t\t\tlegend: {\n\t\t\t\t\t\t\tdisplay: 'function:legend.display()'\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttooltips: {\n\t\t\t\t\t\t\tmode: 'point',\n\t\t\t\t\t\t\tcallbacks: {\n\t\t\t\t\t\t\t\tlabel: 'function:tooltips.label',\n\t\t\t\t\t\t\t\ttitle: 'function:tooltips.title'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscales: {\n\t\t\t\t\t\t\txAxes: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tticks: {\n\t\t\t\t\t\t\t\t\t\tautoSkip: false,\n\t\t\t\t\t\t\t\t\t\tbeginAtZero: true,\n\t\t\t\t\t\t\t\t\t\tmaxRotation: 90,\n\t\t\t\t\t\t\t\t\t\tcallback: 'function:scales.formatAxesLabels'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tyAxes: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tticks: {\n\t\t\t\t\t\t\t\t\t\tautoSkip: false,\n\t\t\t\t\t\t\t\t\t\tbeginAtZero: true,\n\t\t\t\t\t\t\t\t\t\tcallback: 'function:scales.formatAxesLabels'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tdataset: {\n\t\t\t\t\t\tdatalabels: {\n\t\t\t\t\t\t\tfont: {\n\t\t\t\t\t\t\t\tsize: 11\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tcolor: 'white',\n\t\t\t\t\t\t\tbackgroundColor: 'rgba(0,0,0,0.2)',\n\t\t\t\t\t\t\tborderColor: 'rgba(255,255,255,0.2)',\n\t\t\t\t\t\t\tborderWidth: 2,\n\t\t\t\t\t\t\tborderRadius: 2,\n\t\t\t\t\t\t\tanchor: 'center',\n\t\t\t\t\t\t\talign: 'center',\n\t\t\t\t\t\t\tformatter: 'function:datalabels.formatter',\n\t\t\t\t\t\t\tdisplay: 'function:datalabels.display'\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tplugins: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tbeforeDraw: 'function:plugins.fixYAxisLabels'\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tbeforeDraw: 'function:plugins.hideHorizontalBarDatalabelsIfNeeded'\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\thorizontalBarStacked: {\n\t\t\t\t\tbasic: {\n\t\t\t\t\t\tmaintainAspectRatio: false,\n\t\t\t\t\t\ttitle: {\n\t\t\t\t\t\t\tdisplay: false\n\t\t\t\t\t\t},\n\t\t\t\t\t\tlegend: {\n\t\t\t\t\t\t\tdisplay: 'function:legend.display()'\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttooltips: {\n\t\t\t\t\t\t\tmode: 'point',\n\t\t\t\t\t\t\tcallbacks: {\n\t\t\t\t\t\t\t\tlabel: 'function:tooltips.label',\n\t\t\t\t\t\t\t\ttitle: 'function:tooltips.title'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscales: {\n\t\t\t\t\t\t\txAxes: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tstacked: true,\n\t\t\t\t\t\t\t\t\tticks: {\n\t\t\t\t\t\t\t\t\t\tautoSkip: false,\n\t\t\t\t\t\t\t\t\t\tbeginAtZero: true,\n\t\t\t\t\t\t\t\t\t\tmaxRotation: 90,\n\t\t\t\t\t\t\t\t\t\tcallback: 'function:scales.formatAxesLabels'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tyAxes: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tstacked: true,\n\t\t\t\t\t\t\t\t\tticks: {\n\t\t\t\t\t\t\t\t\t\tautoSkip: false,\n\t\t\t\t\t\t\t\t\t\tbeginAtZero: true,\n\t\t\t\t\t\t\t\t\t\tcallback: 'function:scales.formatAxesLabels'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tdataset: {\n\t\t\t\t\t\tdatalabels: {\n\t\t\t\t\t\t\tfont: {\n\t\t\t\t\t\t\t\tsize: 11\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tcolor: 'white',\n\t\t\t\t\t\t\tbackgroundColor: 'rgba(0,0,0,0.2)',\n\t\t\t\t\t\t\tborderColor: 'rgba(255,255,255,0.2)',\n\t\t\t\t\t\t\tborderWidth: 2,\n\t\t\t\t\t\t\tborderRadius: 2,\n\t\t\t\t\t\t\tanchor: 'center',\n\t\t\t\t\t\t\talign: 'center',\n\t\t\t\t\t\t\tformatter: 'function:datalabels.formatter',\n\t\t\t\t\t\t\tdisplay: 'function:datalabels.display'\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tplugins: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tbeforeDraw: 'function:plugins.fixYAxisLabels'\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tbeforeDraw: 'function:plugins.hideHorizontalBarDatalabelsIfNeeded'\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\tline: {\n\t\t\t\t\tbasic: {\n\t\t\t\t\t\tmaintainAspectRatio: false,\n\t\t\t\t\t\ttitle: {\n\t\t\t\t\t\t\tdisplay: false\n\t\t\t\t\t\t},\n\t\t\t\t\t\tlegend: {\n\t\t\t\t\t\t\tdisplay: 'function:legend.display()'\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttooltips: {\n\t\t\t\t\t\t\tmode: 'point',\n\t\t\t\t\t\t\tcallbacks: {\n\t\t\t\t\t\t\t\tlabel: 'function:tooltips.label',\n\t\t\t\t\t\t\t\ttitle: 'function:tooltips.title'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscales: {\n\t\t\t\t\t\t\txAxes: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tticks: {\n\t\t\t\t\t\t\t\t\t\tautoSkip: false,\n\t\t\t\t\t\t\t\t\t\tbeginAtZero: true,\n\t\t\t\t\t\t\t\t\t\tmaxRotation: 90,\n\t\t\t\t\t\t\t\t\t\tcallback: 'function:scales.formatAxesLabels',\n\t\t\t\t\t\t\t\t\t\tlabelOffset: 0\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tyAxes: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tticks: {\n\t\t\t\t\t\t\t\t\t\tautoSkip: false,\n\t\t\t\t\t\t\t\t\t\tbeginAtZero: true,\n\t\t\t\t\t\t\t\t\t\tcallback: 'function:scales.formatAxesLabels'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tdataset: {\n\t\t\t\t\t\tfill: false,\n\t\t\t\t\t\tdatalabels: {\n\t\t\t\t\t\t\tfont: {\n\t\t\t\t\t\t\t\tsize: 11\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tcolor: 'white',\n\t\t\t\t\t\t\tbackgroundColor: 'rgba(0,0,0,0.5)',\n\t\t\t\t\t\t\tborderColor: 'rgba(255,255,255,0.5)',\n\t\t\t\t\t\t\tborderWidth: 2,\n\t\t\t\t\t\t\tborderRadius: 2,\n\t\t\t\t\t\t\tanchor: 'bottom',\n\t\t\t\t\t\t\talign: 'bottom',\n\t\t\t\t\t\t\tformatter: 'function:datalabels.formatter',\n\t\t\t\t\t\t\tdisplay: 'function:datalabels.display'\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tplugins: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tbeforeDraw: 'function:plugins.fixXAxisLabels'\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\tlineStacked: {\n\t\t\t\t\tbasic: {\n\t\t\t\t\t\tmaintainAspectRatio: false,\n\t\t\t\t\t\ttitle: {\n\t\t\t\t\t\t\tdisplay: false\n\t\t\t\t\t\t},\n\t\t\t\t\t\tlegend: {\n\t\t\t\t\t\t\tdisplay: 'function:legend.display()'\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttooltips: {\n\t\t\t\t\t\t\tmode: 'point',\n\t\t\t\t\t\t\tcallbacks: {\n\t\t\t\t\t\t\t\tlabel: 'function:tooltips.label',\n\t\t\t\t\t\t\t\ttitle: 'function:tooltips.title'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscales: {\n\t\t\t\t\t\t\txAxes: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tticks: {\n\t\t\t\t\t\t\t\t\t\tautoSkip: false,\n\t\t\t\t\t\t\t\t\t\tbeginAtZero: true,\n\t\t\t\t\t\t\t\t\t\tmaxRotation: 90,\n\t\t\t\t\t\t\t\t\t\tcallback: 'function:scales.formatAxesLabels',\n\t\t\t\t\t\t\t\t\t\tlabelOffset: 0\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tyAxes: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tstacked: true,\n\t\t\t\t\t\t\t\t\tticks: {\n\t\t\t\t\t\t\t\t\t\tautoSkip: false,\n\t\t\t\t\t\t\t\t\t\tbeginAtZero: true,\n\t\t\t\t\t\t\t\t\t\tcallback: 'function:scales.formatAxesLabels'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tdataset: {\n\t\t\t\t\t\tfill: false,\n\t\t\t\t\t\tdatalabels: {\n\t\t\t\t\t\t\tfont: {\n\t\t\t\t\t\t\t\tsize: 11\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tcolor: 'white',\n\t\t\t\t\t\t\tbackgroundColor: 'rgba(0,0,0,0.5)',\n\t\t\t\t\t\t\tborderColor: 'rgba(255,255,255,0.5)',\n\t\t\t\t\t\t\tborderWidth: 2,\n\t\t\t\t\t\t\tborderRadius: 2,\n\t\t\t\t\t\t\tanchor: 'bottom',\n\t\t\t\t\t\t\talign: 'bottom',\n\t\t\t\t\t\t\tformatter: 'function:datalabels.formatter',\n\t\t\t\t\t\t\tdisplay: 'function:datalabels.display'\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tplugins: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tbeforeDraw: 'function:plugins.fixXAxisLabels'\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\tlinePlain: {\n\t\t\t\t\tbasic: {\n\t\t\t\t\t\tmaintainAspectRatio: false,\n\t\t\t\t\t\ttitle: {\n\t\t\t\t\t\t\tdisplay: false\n\t\t\t\t\t\t},\n\t\t\t\t\t\tlegend: {\n\t\t\t\t\t\t\tdisplay: 'function:legend.display()'\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttooltips: {\n\t\t\t\t\t\t\tmode: 'point',\n\t\t\t\t\t\t\tcallbacks: {\n\t\t\t\t\t\t\t\tlabel: 'function:tooltips.label',\n\t\t\t\t\t\t\t\ttitle: 'function:tooltips.title'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscales: {\n\t\t\t\t\t\t\txAxes: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tticks: {\n\t\t\t\t\t\t\t\t\t\tautoSkip: false,\n\t\t\t\t\t\t\t\t\t\tbeginAtZero: true,\n\t\t\t\t\t\t\t\t\t\tmaxRotation: 90,\n\t\t\t\t\t\t\t\t\t\tcallback: 'function:scales.formatAxesLabels',\n\t\t\t\t\t\t\t\t\t\tlabelOffset: 0\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tyAxes: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tticks: {\n\t\t\t\t\t\t\t\t\t\tautoSkip: false,\n\t\t\t\t\t\t\t\t\t\tbeginAtZero: true,\n\t\t\t\t\t\t\t\t\t\tcallback: 'function:scales.formatAxesLabels'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tdataset: {\n\t\t\t\t\t\tlineTension: 0,\n\t\t\t\t\t\tfill: false,\n\t\t\t\t\t\tdatalabels: {\n\t\t\t\t\t\t\tfont: {\n\t\t\t\t\t\t\t\tsize: 11\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tcolor: 'white',\n\t\t\t\t\t\t\tbackgroundColor: 'rgba(0,0,0,0.5)',\n\t\t\t\t\t\t\tborderColor: 'rgba(255,255,255,0.5)',\n\t\t\t\t\t\t\tborderWidth: 2,\n\t\t\t\t\t\t\tborderRadius: 2,\n\t\t\t\t\t\t\tanchor: 'bottom',\n\t\t\t\t\t\t\talign: 'bottom',\n\t\t\t\t\t\t\tformatter: 'function:datalabels.formatter',\n\t\t\t\t\t\t\tdisplay: 'function:datalabels.display'\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tplugins: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tbeforeDraw: 'function:plugins.fixXAxisLabels'\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\tlinePlainStacked: {\n\t\t\t\t\tbasic: {\n\t\t\t\t\t\tmaintainAspectRatio: false,\n\t\t\t\t\t\ttitle: {\n\t\t\t\t\t\t\tdisplay: false\n\t\t\t\t\t\t},\n\t\t\t\t\t\tlegend: {\n\t\t\t\t\t\t\tdisplay: 'function:legend.display()'\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttooltips: {\n\t\t\t\t\t\t\tmode: 'point',\n\t\t\t\t\t\t\tcallbacks: {\n\t\t\t\t\t\t\t\tlabel: 'function:tooltips.label',\n\t\t\t\t\t\t\t\ttitle: 'function:tooltips.title'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscales: {\n\t\t\t\t\t\t\txAxes: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tticks: {\n\t\t\t\t\t\t\t\t\t\tautoSkip: false,\n\t\t\t\t\t\t\t\t\t\tbeginAtZero: true,\n\t\t\t\t\t\t\t\t\t\tmaxRotation: 90,\n\t\t\t\t\t\t\t\t\t\tcallback: 'function:scales.formatAxesLabels',\n\t\t\t\t\t\t\t\t\t\tlabelOffset: 0\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tyAxes: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tstacked: true,\n\t\t\t\t\t\t\t\t\tticks: {\n\t\t\t\t\t\t\t\t\t\tautoSkip: false,\n\t\t\t\t\t\t\t\t\t\tbeginAtZero: true,\n\t\t\t\t\t\t\t\t\t\tcallback: 'function:scales.formatAxesLabels'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tdataset: {\n\t\t\t\t\t\tfill: false,\n\t\t\t\t\t\tlineTension: 0,\n\t\t\t\t\t\tdatalabels: {\n\t\t\t\t\t\t\tfont: {\n\t\t\t\t\t\t\t\tsize: 11\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tcolor: 'white',\n\t\t\t\t\t\t\tbackgroundColor: 'rgba(0,0,0,0.5)',\n\t\t\t\t\t\t\tborderColor: 'rgba(255,255,255,0.5)',\n\t\t\t\t\t\t\tborderWidth: 2,\n\t\t\t\t\t\t\tborderRadius: 2,\n\t\t\t\t\t\t\tanchor: 'bottom',\n\t\t\t\t\t\t\talign: 'bottom',\n\t\t\t\t\t\t\tformatter: 'function:datalabels.formatter',\n\t\t\t\t\t\t\tdisplay: 'function:datalabels.display'\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tplugins: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tbeforeDraw: 'function:plugins.fixXAxisLabels'\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\tpie: {\n\t\t\t\t\tbasic: {\n\t\t\t\t\t\tmaintainAspectRatio: false,\n\t\t\t\t\t\ttitle: {\n\t\t\t\t\t\t\tdisplay: false\n\t\t\t\t\t\t},\n\t\t\t\t\t\tlegend: {\n\t\t\t\t\t\t\tdisplay: true,\n\t\t\t\t\t\t\tlabels: {\n\t\t\t\t\t\t\t\tgenerateLabels: 'function:legend.generateLabels'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcutoutPercentage: 0,\n\t\t\t\t\t\tlayout: {\n\t\t\t\t\t\t\tpadding: {\n\t\t\t\t\t\t\t\tbottom: 12\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttooltips: {\n\t\t\t\t\t\t\tmode: 'point',\n\t\t\t\t\t\t\tcallbacks: {\n\t\t\t\t\t\t\t\tlabel: 'function:tooltips.label',\n\t\t\t\t\t\t\t\ttitle: 'function:tooltips.title'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscales: {}\n\t\t\t\t\t},\n\t\t\t\t\tdataset: {\n\t\t\t\t\t\tdatalabels: {\n\t\t\t\t\t\t\tfont: {\n\t\t\t\t\t\t\t\tsize: 11\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tcolor: 'white',\n\t\t\t\t\t\t\tbackgroundColor: 'rgba(0,0,0,0.5)',\n\t\t\t\t\t\t\tborderColor: 'rgba(255,255,255,0.5)',\n\t\t\t\t\t\t\tborderWidth: 2,\n\t\t\t\t\t\t\tborderRadius: 4,\n\t\t\t\t\t\t\tanchor: 'end',\n\t\t\t\t\t\t\talign: 'center',\n\t\t\t\t\t\t\tformatter: 'function:datalabels.formatter',\n\t\t\t\t\t\t\tdisplay: 'function:datalabels.display'\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tplugins: []\n\t\t\t\t},\n\t\t\t\tdoughnut: {\n\t\t\t\t\tbasic: {\n\t\t\t\t\t\tmaintainAspectRatio: false,\n\t\t\t\t\t\ttitle: {\n\t\t\t\t\t\t\tdisplay: false\n\t\t\t\t\t\t},\n\t\t\t\t\t\tlegend: {\n\t\t\t\t\t\t\tdisplay: true,\n\t\t\t\t\t\t\tonClick: 'function:legend.onClick',\n\t\t\t\t\t\t\tlabels: {\n\t\t\t\t\t\t\t\tgenerateLabels: 'function:legend.generateLabels'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcutoutPercentage: 50,\n\t\t\t\t\t\tlayout: {\n\t\t\t\t\t\t\tpadding: {\n\t\t\t\t\t\t\t\tbottom: 12\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttooltips: {\n\t\t\t\t\t\t\tmode: 'point',\n\t\t\t\t\t\t\tcallbacks: {\n\t\t\t\t\t\t\t\tlabel: 'function:tooltips.label',\n\t\t\t\t\t\t\t\ttitle: 'function:tooltips.title'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscales: {}\n\t\t\t\t\t},\n\t\t\t\t\tdataset: {\n\t\t\t\t\t\tdatalabels: {\n\t\t\t\t\t\t\tfont: {\n\t\t\t\t\t\t\t\tsize: 11\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tcolor: 'white',\n\t\t\t\t\t\t\tbackgroundColor: 'rgba(0,0,0,0.5)',\n\t\t\t\t\t\t\tborderColor: 'rgba(255,255,255,0.5)',\n\t\t\t\t\t\t\tborderWidth: 2,\n\t\t\t\t\t\t\tborderRadius: 4,\n\t\t\t\t\t\t\tanchor: 'end',\n\t\t\t\t\t\t\talign: 'center',\n\t\t\t\t\t\t\tformatter: 'function:datalabels.formatter',\n\t\t\t\t\t\t\tdisplay: 'function:datalabels.display'\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tplugins: []\n\t\t\t\t},\n\t\t\t\tfunnel: {\n\t\t\t\t\tbasic: {\n\t\t\t\t\t\tmaintainAspectRatio: false,\n\t\t\t\t\t\ttitle: {\n\t\t\t\t\t\t\tdisplay: false\n\t\t\t\t\t\t},\n\t\t\t\t\t\tlegend: {\n\t\t\t\t\t\t\tdisplay: false\n\t\t\t\t\t\t},\n\t\t\t\t\t\tsort: 'desc',\n\t\t\t\t\t\ttooltips: {\n\t\t\t\t\t\t\tmode: 'point',\n\t\t\t\t\t\t\tcallbacks: {\n\t\t\t\t\t\t\t\tlabel: 'function:tooltips.label',\n\t\t\t\t\t\t\t\ttitle: 'function:tooltips.title'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscales: {\n\t\t\t\t\t\t\tyAxes: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tdisplay: true,\n\t\t\t\t\t\t\t\t\tbeginAtZero: true,\n\t\t\t\t\t\t\t\t\tticks: {\n\t\t\t\t\t\t\t\t\t\tcallback: 'function:scales.formatAxesLabels'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tdataset: {\n\t\t\t\t\t\tdatalabels: {\n\t\t\t\t\t\t\tdisplay: false\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tplugins: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tbeforeDraw: 'function:plugins.fixYAxisLabels'\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t};\n\t\t\tif (typeof options[chartSubType] !== 'undefined') {\n\t\t\t\treturn options[chartSubType];\n\t\t\t}\n\t\t\t// if divided and standard chart types are equal\n\t\t\tconst notStackedChartSubType = this.removeStackedFromName(chartSubType);\n\t\t\tif (typeof options[notStackedChartSubType] !== 'undefined') {\n\t\t\t\treturn options[notStackedChartSubType];\n\t\t\t}\n\t\t\tapp.errorLog(new Error(chartSubType + ' chart does not exists!'));\n\t\t},\n\t\t/**\n\t\t * Get default chart basic options for specified chart subtype\n\t\t *\n\t\t * @param  {String} chartSubType 'bar','pie'...\n\t\t * @param  {Object} chartData received from request ['labels':[],'datasets':['data':[]]] etc\n\t\t * @return {Object}\n\t\t */\n\t\tgetDefaultBasicOptions: function getDefaultBasicOptions(chartSubType, chartData) {\n\t\t\treturn this.getGlobalDefaultChartsOptions(chartSubType, chartData).basic;\n\t\t},\n\t\t/**\n\t\t * Get default dataset options for specified chart subtype\n\t\t *\n\t\t * @param  {String} chartSubType 'bar','pie'...\n\t\t * @param  {Object} chartData received from request ['labels':[],'datasets':['data':[]]] etc\n\t\t * @return {Object}\n\t\t */\n\t\tgetDefaultDatasetOptions: function getDefaultDatasetOptions(chartSubType, chartData) {\n\t\t\treturn this.getGlobalDefaultChartsOptions(chartSubType, chartData).dataset;\n\t\t},\n\t\t/**\n\t\t * Get default plugins for specified chart subtype\n\t\t *\n\t\t * @param  {String} chartSubType 'bar','pie'...\n\t\t * @param  {Object} chartData received from request ['labels':[],'datasets':['data':[]]] etc\n\t\t * @return {Object}\n\t\t */\n\t\tgetDefaultPlugins: function getDefaultPlugins(chartSubType, chartData) {\n\t\t\treturn this.getGlobalDefaultChartsOptions(chartSubType, chartData).plugins;\n\t\t},\n\t\tgetContainer: function getContainer() {\n\t\t\treturn this.container;\n\t\t},\n\t\tsetContainer: function setContainer(element) {\n\t\t\tthis.container = element;\n\t\t\treturn this;\n\t\t},\n\t\tisEmptyData: function isEmptyData() {\n\t\t\treturn this.getContainer().find('.widgetData').length === 0 || this.getContainer().find('.noDataMsg').length > 0;\n\t\t},\n\t\tgetUserDateFormat: function getUserDateFormat() {\n\t\t\treturn CONFIG.dateFormat;\n\t\t},\n\t\tgetChartContainer: function getChartContainer(useCache) {\n\t\t\tif (typeof useCache === 'undefined') {\n\t\t\t\tuseCache = false;\n\t\t\t}\n\t\t\tif (this.plotContainer === false || !useCache) {\n\t\t\t\tthis.plotContainer = this.getContainer()\n\t\t\t\t\t.find('.widgetChartContainer')\n\t\t\t\t\t.find('canvas')\n\t\t\t\t\t.get(0);\n\t\t\t}\n\t\t\treturn this.plotContainer;\n\t\t},\n\t\tregisterRecordsCount: function registerRecordsCount() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar recordsCountBtn = thisInstance.getContainer().find('.recordCount');\n\t\t\trecordsCountBtn.on('click', function () {\n\t\t\t\tvar url = recordsCountBtn.data('url');\n\t\t\t\tAppConnector.request(url).done(function (response) {\n\t\t\t\t\trecordsCountBtn.find('.count').html(response.result.totalCount);\n\t\t\t\t\trecordsCountBtn\n\t\t\t\t\t\t.find('.fas')\n\t\t\t\t\t\t.addClass('d-none')\n\t\t\t\t\t\t.attr('aria-hidden', true);\n\t\t\t\t\trecordsCountBtn\n\t\t\t\t\t\t.find('a')\n\t\t\t\t\t\t.removeClass('d-none')\n\t\t\t\t\t\t.attr('aria-hidden', false);\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tloadScrollbar: function loadScrollbar() {\n\t\t\tconst container = $(this.getChartContainer(false));\n\t\t\tif (typeof container === 'undefined') {\n\t\t\t\t// if there is no data\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tconst widget = container.closest('.dashboardWidget');\n\t\t\tconst content = widget.find('.dashboardWidgetContent');\n\t\t\tconst footer = widget.find('.dashboardWidgetFooter');\n\t\t\tlet adjustedHeight = widget.innerHeight() - widget.find('.dashboardWidgetHeader').outerHeight();\n\t\t\tif (footer.length) {\n\t\t\t\tadjustedHeight -= footer.outerHeight();\n\t\t\t}\n\t\t\tif (!content.length) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tcontent.css('height', adjustedHeight + 'px');\n\t\t\tcontent.css('max-height', adjustedHeight + 'px');\n\t\t\tif (typeof this.scrollbar !== 'undefined') {\n\t\t\t\tthis.scrollbar.update();\n\t\t\t} else {\n\t\t\t\tthis.scrollbar = app.showNewScrollbar(content, {\n\t\t\t\t\twheelPropagation: true\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\trestrictContentDrag: function restrictContentDrag() {\n\t\t\tthis.getContainer().on('mousedown.draggable', function (e) {\n\t\t\t\tvar element = jQuery(e.target);\n\t\t\t\tvar isHeaderElement = element.closest('.dashboardWidgetHeader').length > 0 ? true : false;\n\t\t\t\tif (isHeaderElement) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t//Stop the event propagation so that drag will not start for contents\n\t\t\t\te.stopPropagation();\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Get data from JSON encoded input value\n\t\t *\n\t\t * @return {object} data from request\n\t\t */\n\t\tgenerateData: function generateData() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar jData = thisInstance\n\t\t\t\t.getContainer()\n\t\t\t\t.find('.widgetData')\n\t\t\t\t.val();\n\t\t\tif (typeof jData === 'undefined') {\n\t\t\t\treturn (thisInstance.chartData = jData);\n\t\t\t}\n\t\t\tthisInstance.chartData = JSON.parse(jData);\n\t\t\treturn thisInstance.chartData;\n\t\t},\n\t\tpositionNoDataMsg: function positionNoDataMsg() {\n\t\t\tvar container = this.getContainer();\n\t\t\tvar widgetContentsContainer = container.find('.dashboardWidgetContent');\n\t\t\tvar noDataMsgHolder = widgetContentsContainer.find('.noDataMsg');\n\t\t\tnoDataMsgHolder.position({\n\t\t\t\tmy: 'center center',\n\t\t\t\tat: 'center center',\n\t\t\t\tof: widgetContentsContainer\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Print html content as image\n\t\t * @param {jQuery} element\n\t\t */\n\t\tprintHtml(element) {\n\t\t\tlet widget = element.closest('.dashboardWidget'),\n\t\t\t\ttitle = widget.find('.dashboardTitle').prop('title'),\n\t\t\t\tprintContainer = widget.find('.js-print__container').get(0),\n\t\t\t\timgEl = $('<img style=\"width:100%\">');\n\t\t\timgEl.get(0).onload = () => {\n\t\t\t\tlet width = $(printContainer).outerWidth();\n\t\t\t\tlet height = $(printContainer).outerHeight();\n\t\t\t\tif (width < 600) {\n\t\t\t\t\twidth = 600;\n\t\t\t\t}\n\t\t\t\tif (height < 400) {\n\t\t\t\t\theight = 400;\n\t\t\t\t}\n\t\t\t\tthis.printImage(imgEl.get(0), title, width, height);\n\t\t\t};\n\t\t\tapp.htmlToImage(printContainer, imageBase64 => {\n\t\t\t\timgEl.get(0).src = imageBase64;\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Download html content as image\n\t\t * @param {jQuery} element\n\t\t */\n\t\tdownloadHtmlAsImage(element) {\n\t\t\tlet widget = element.closest('.dashboardWidget'),\n\t\t\t\ttitle = widget.find('.dashboardTitle').prop('title');\n\t\t\tapp.htmlToImage(widget.find('.js-print__container').get(0), imageBase64 => {\n\t\t\t\tlet anchor = document.createElement('a');\n\t\t\t\tanchor.setAttribute('href', imageBase64);\n\t\t\t\tanchor.setAttribute('download', title + '.png');\n\t\t\t\tanchor.click();\n\t\t\t});\n\t\t},\n\t\t//Place holdet can be extended by child classes and can use this to handle the post load\n\t\tpostLoadWidget: function postLoadWidget() {\n\t\t\tif (!this.isEmptyData()) {\n\t\t\t\tthis.loadChart(this.options);\n\t\t\t} else {\n\t\t\t\tthis.positionNoDataMsg();\n\t\t\t}\n\t\t\tthis.registerSectionClick();\n\t\t\tthis.registerFilter();\n\t\t\tthis.registerFilterChangeEvent();\n\t\t\tthis.restrictContentDrag();\n\t\t\tthis.registerContentAutoResize();\n\t\t\tthis.registerWidgetSwitch();\n\t\t\tthis.registerChangeSorting();\n\t\t\tthis.registerLoadMore();\n\t\t\tthis.registerHeaderButtons();\n\t\t\tthis.loadScrollbar();\n\t\t},\n\t\tpostRefreshWidget: function postRefreshWidget() {\n\t\t\tthis.loadScrollbar();\n\t\t\tif (!this.isEmptyData()) {\n\t\t\t\tthis.loadChart(this.options);\n\t\t\t} else {\n\t\t\t\tthis.positionNoDataMsg();\n\t\t\t}\n\t\t\tthis.registerSectionClick();\n\t\t\tthis.registerLoadMore();\n\t\t},\n\t\tsetSortingButton: function setSortingButton(currentElement) {\n\t\t\tif (currentElement.length) {\n\t\t\t\tlet container = this.getContainer(),\n\t\t\t\t\tdrefresh = container.find('a[name=\"drefresh\"]'),\n\t\t\t\t\turl = drefresh.data('url');\n\t\t\t\turl = url.replace('&sortorder=desc', '');\n\t\t\t\turl = url.replace('&sortorder=asc', '');\n\t\t\t\turl += '&sortorder=';\n\t\t\t\tlet sort = currentElement.data('sort'),\n\t\t\t\t\tsortorder = 'desc',\n\t\t\t\t\ticon = 'fa-sort-amount-down',\n\t\t\t\t\ticonBase = 'fa-sort-amount-up';\n\t\t\t\tif (sort == 'desc') {\n\t\t\t\t\tsortorder = 'asc';\n\t\t\t\t\ticon = 'fa-sort-amount-up';\n\t\t\t\t\ticonBase = 'fa-sort-amount-down';\n\t\t\t\t}\n\t\t\t\tcurrentElement.data('sort', sortorder);\n\t\t\t\tcurrentElement.attr('title', currentElement.data(sortorder));\n\t\t\t\tcurrentElement.attr('alt', currentElement.data(sortorder));\n\t\t\t\turl += sortorder;\n\t\t\t\tcurrentElement\n\t\t\t\t\t.find('.fas')\n\t\t\t\t\t.removeClass(iconBase)\n\t\t\t\t\t.addClass(icon);\n\t\t\t\tdrefresh.data('url', url);\n\t\t\t}\n\t\t},\n\t\tgetChartImage() {\n\t\t\tconst base64Image = this.chartInstance.toBase64Image();\n\t\t\tconst image = new Image();\n\t\t\timage.src = base64Image;\n\t\t\treturn image;\n\t\t},\n\t\tprintImage(imgEl, title, width, height) {\n\t\t\tconst print = window.open('', 'PRINT', 'height=' + height + ',width=' + width);\n\t\t\tprint.document.write('<html><head><title>' + title + '</title>');\n\t\t\tprint.document.write('</head><body >');\n\t\t\tprint.document.write(\n\t\t\t\t$('<div>')\n\t\t\t\t\t.append(imgEl)\n\t\t\t\t\t.html()\n\t\t\t);\n\t\t\tprint.document.write('</body></html>');\n\t\t\tprint.document.close(); // necessary for IE >= 10\n\t\t\tprint.focus(); // necessary for IE >= 10\n\t\t\tsetTimeout(function () {\n\t\t\t\tprint.print();\n\t\t\t\tprint.close();\n\t\t\t}, 1000);\n\t\t},\n\t\tregisterHeaderButtons: function registerHeaderButtons() {\n\t\t\tconst container = this.getContainer();\n\t\t\tconst header = container.find('.dashboardWidgetHeader');\n\t\t\tconst downloadWidget = header.find('.downloadWidget');\n\t\t\tconst printWidget = header.find('.printWidget');\n\t\t\tprintWidget.on('click', e => {\n\t\t\t\tconst imgEl = this.getChartImage();\n\t\t\t\tthis.printImage(imgEl, header.find('.dashboardTitle').text(), 600, 400);\n\t\t\t});\n\t\t\tdownloadWidget.on('click', e => {\n\t\t\t\tconst imgEl = $(this.getChartImage());\n\t\t\t\tconst a = $('<a>')\n\t\t\t\t\t.attr('href', imgEl.attr('src'))\n\t\t\t\t\t.attr('download', header.find('.js-widget__header__title').text() + '.png')\n\t\t\t\t\t.appendTo(container);\n\t\t\t\ta[0].click();\n\t\t\t\ta.remove();\n\t\t\t});\n\t\t\tcontainer.find('.js-widget-quick-create').on('click', function (e) {\n\t\t\t\tVtiger_Header_Js.getInstance().quickCreateModule($(this).data('module-name'));\n\t\t\t});\n\t\t},\n\t\tregisterChangeSorting: function registerChangeSorting() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar container = this.getContainer();\n\t\t\tthisInstance.setSortingButton(container.find('.changeRecordSort'));\n\t\t\tcontainer.find('.changeRecordSort').on('click', function (e) {\n\t\t\t\tvar drefresh = container.find('a[name=\"drefresh\"]');\n\t\t\t\tthisInstance.setSortingButton(jQuery(e.currentTarget));\n\t\t\t\tdrefresh.click();\n\t\t\t});\n\t\t},\n\t\tregisterWidgetSwitch: function registerWidgetSwitch() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar switchButtons = this.getContainer().find('.dashboardWidgetHeader .js-switch--calculations');\n\t\t\tthisInstance.setUrlSwitch(switchButtons);\n\t\t\tswitchButtons.on('change', e => {\n\t\t\t\tvar currentElement = $(e.currentTarget);\n\t\t\t\tvar dashboardWidgetHeader = currentElement.closest('.dashboardWidgetHeader');\n\t\t\t\tvar drefresh = dashboardWidgetHeader.find('a[name=\"drefresh\"]');\n\t\t\t\tthisInstance.setUrlSwitch(currentElement).done(function (data) {\n\t\t\t\t\tif (data) {\n\t\t\t\t\t\tdrefresh.click();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tsetUrlSwitch: function setUrlSwitch(switchButtons) {\n\t\t\tvar aDeferred = jQuery.Deferred();\n\t\t\tswitchButtons.each(function (index, e) {\n\t\t\t\tvar currentElement = jQuery(e);\n\t\t\t\tvar dashboardWidgetHeader = currentElement.closest('.dashboardWidgetHeader');\n\t\t\t\tvar drefresh = dashboardWidgetHeader.find('a[name=\"drefresh\"]');\n\t\t\t\tvar url = drefresh.data('url');\n\t\t\t\tvar urlparams = currentElement.data('urlparams');\n\t\t\t\tif (urlparams !== '') {\n\t\t\t\t\tvar switchUrl = currentElement.data('url-value');\n\t\t\t\t\turl = url.replace('&' + urlparams + '=' + switchUrl, '');\n\t\t\t\t\turl += '&' + urlparams + '=' + switchUrl;\n\t\t\t\t\tdrefresh.data('url', url);\n\t\t\t\t\taDeferred.resolve(true);\n\t\t\t\t} else {\n\t\t\t\t\taDeferred.reject();\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\tgetFilterData: function getFilterData() {\n\t\t\treturn {};\n\t\t},\n\t\t/**\n\t\t * Refresh widget\n\t\t * @returns {undefined}\n\t\t */\n\t\trefreshWidget: function refreshWidget() {\n\t\t\tlet thisInstance = this;\n\t\t\tlet parent = this.getContainer();\n\t\t\tlet element = parent.find('a[name=\"drefresh\"]');\n\t\t\tlet url = element.data('url');\n\t\t\tlet contentContainer = parent.find('.dashboardWidgetContent');\n\t\t\tlet params = url;\n\t\t\tlet widgetFilters = parent.find('.widgetFilter');\n\t\t\tif (widgetFilters.length > 0) {\n\t\t\t\tparams = {};\n\t\t\t\tparams.url = url;\n\t\t\t\tparams.data = {};\n\t\t\t\twidgetFilters.each((index, domElement) => {\n\t\t\t\t\tlet widgetFilter = $(domElement);\n\t\t\t\t\tlet filterName = widgetFilter.attr('name');\n\t\t\t\t\tif ('checkbox' === widgetFilter.attr('type')) {\n\t\t\t\t\t\tparams.data[filterName] = widgetFilter.is(':checked');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tparams.data[filterName] = widgetFilter.val();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tlet additionalWidgetFilters = parent.find('.js-chartFilter__additional-filter-field');\n\t\t\tif (additionalWidgetFilters.length > 0) {\n\t\t\t\tparams = {};\n\t\t\t\tparams.url = url;\n\t\t\t\tparams.data = {};\n\t\t\t\tadditionalWidgetFilters.each((index, domElement) => {\n\t\t\t\t\tlet widgetFilter = jQuery(domElement);\n\t\t\t\t\tlet filterName = widgetFilter.attr('name');\n\t\t\t\t\tlet arr = false;\n\t\t\t\t\tif (filterName.substr(-2) === '[]') {\n\t\t\t\t\t\tarr = true;\n\t\t\t\t\t\tfilterName = filterName.substr(0, filterName.length - 2);\n\t\t\t\t\t\tif (!Array.isArray(params.data[filterName])) {\n\t\t\t\t\t\t\tparams.data[filterName] = [];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif ('checkbox' === widgetFilter.attr('type')) {\n\t\t\t\t\t\tif (arr) {\n\t\t\t\t\t\t\tparams.data[filterName].push(widgetFilter.is(':checked'));\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tparams.data[filterName] = widgetFilter.is(':checked');\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (arr) {\n\t\t\t\t\t\t\tparams.data[filterName].push(widgetFilter.val());\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tparams.data[filterName] = widgetFilter.val();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tlet refreshContainer = parent.find('.dashboardWidgetContent');\n\t\t\tlet refreshContainerFooter = parent.find('.dashboardWidgetFooter');\n\t\t\trefreshContainer.html('');\n\t\t\trefreshContainerFooter.html('');\n\t\t\trefreshContainer.progressIndicator();\n\t\t\tif (\n\t\t\t\tthis.paramCache &&\n\t\t\t\t(additionalWidgetFilters.length || widgetFilters.length || parent.find('.listSearchContributor'))\n\t\t\t) {\n\t\t\t\tthisInstance.setFilterToCache(params.url ? params.url : params, params.data ? params.data : {});\n\t\t\t}\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(data => {\n\t\t\t\t\tdata = $(data);\n\t\t\t\t\tlet footer = data.filter('.widgetFooterContent');\n\t\t\t\t\trefreshContainer.progressIndicator({\n\t\t\t\t\t\tmode: 'hide'\n\t\t\t\t\t});\n\t\t\t\t\tif (footer.length) {\n\t\t\t\t\t\tfooter = footer.clone(true, true);\n\t\t\t\t\t\trefreshContainerFooter.html(footer);\n\t\t\t\t\t\tdata.each(function (n, e) {\n\t\t\t\t\t\t\tif (jQuery(this).hasClass('widgetFooterContent')) {\n\t\t\t\t\t\t\t\tdata.splice(n, 1);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tcontentContainer.html(data).trigger(YetiForce_Widget_Js.widgetPostRefereshEvent);\n\t\t\t\t})\n\t\t\t\t.fail(() => {\n\t\t\t\t\trefreshContainer.progressIndicator({\n\t\t\t\t\t\tmode: 'hide'\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t},\n\t\tregisterFilter: function registerFilter() {\n\t\t\tconst container = this.getContainer();\n\t\t\tconst search = container.find('.listSearchContributor');\n\t\t\tconst refreshBtn = container.find('a[name=\"drefresh\"]');\n\t\t\tconst originalUrl = refreshBtn.data('url');\n\t\t\tconst selects = container.find('.select2noactive');\n\t\t\tsearch.css('width', '100%');\n\t\t\tsearch.parent().addClass('w-100');\n\t\t\tsearch.each((index, element) => {\n\t\t\t\tconst fieldInfo = $(element).data('fieldinfo');\n\t\t\t\t$(element)\n\t\t\t\t\t.attr('placeholder', fieldInfo.label)\n\t\t\t\t\t.data('placeholder', fieldInfo.label);\n\t\t\t});\n\t\t\tApp.Fields.Picklist.changeSelectElementView(selects, 'select2', { containerCssClass: 'form-control' });\n\t\t\tApp.Fields.Date.register(container);\n\t\t\tApp.Fields.Date.registerRange(container);\n\t\t\tsearch.on('change apply.daterangepicker', e => {\n\t\t\t\tlet searchParams = [];\n\t\t\t\tcontainer.find('.listSearchContributor').each((index, domElement) => {\n\t\t\t\t\tlet searchInfo = [];\n\t\t\t\t\tconst searchContributorElement = $(domElement);\n\t\t\t\t\tconst fieldInfo = searchContributorElement.data('fieldinfo');\n\t\t\t\t\tconst fieldName = searchContributorElement.attr('name');\n\t\t\t\t\tlet searchValue = searchContributorElement.val();\n\t\t\t\t\tif (typeof searchValue === 'object') {\n\t\t\t\t\t\tif (searchValue == null) {\n\t\t\t\t\t\t\tsearchValue = '';\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsearchValue = searchValue.join('##');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tsearchValue = searchValue.trim();\n\t\t\t\t\tif (searchValue.length <= 0) {\n\t\t\t\t\t\t//continue\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\tlet searchOperator = 'a';\n\t\t\t\t\tif (fieldInfo.hasOwnProperty('searchOperator')) {\n\t\t\t\t\t\tsearchOperator = fieldInfo.searchOperator;\n\t\t\t\t\t} else if (\n\t\t\t\t\t\tjQuery.inArray(fieldInfo.type, [\n\t\t\t\t\t\t\t'modules',\n\t\t\t\t\t\t\t'time',\n\t\t\t\t\t\t\t'userCreator',\n\t\t\t\t\t\t\t'owner',\n\t\t\t\t\t\t\t'picklist',\n\t\t\t\t\t\t\t'tree',\n\t\t\t\t\t\t\t'boolean',\n\t\t\t\t\t\t\t'fileLocationType',\n\t\t\t\t\t\t\t'userRole',\n\t\t\t\t\t\t\t'companySelect',\n\t\t\t\t\t\t\t'multiReferenceValue'\n\t\t\t\t\t\t]) >= 0\n\t\t\t\t\t) {\n\t\t\t\t\t\tsearchOperator = 'e';\n\t\t\t\t\t} else if (fieldInfo.type === 'date' || fieldInfo.type === 'datetime') {\n\t\t\t\t\t\tsearchOperator = 'bw';\n\t\t\t\t\t} else if (fieldInfo.type === 'multipicklist' || fieldInfo.type === 'categoryMultipicklist') {\n\t\t\t\t\t\tsearchOperator = 'c';\n\t\t\t\t\t}\n\t\t\t\t\tsearchInfo.push(fieldName);\n\t\t\t\t\tsearchInfo.push(searchOperator);\n\t\t\t\t\tsearchInfo.push(searchValue);\n\t\t\t\t\tif (fieldInfo.type === 'tree' || fieldInfo.type === 'categoryMultipicklist') {\n\t\t\t\t\t\tsearchInfo.push(\n\t\t\t\t\t\t\t$('.listViewHeaders .searchInSubcategories[data-columnname=\"' + fieldName + '\"]').prop('checked')\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tsearchParams.push(searchInfo);\n\t\t\t\t});\n\t\t\t\tlet url = originalUrl + '&search_params=' + JSON.stringify([searchParams]);\n\t\t\t\trefreshBtn.data('url', url);\n\t\t\t\trefreshBtn.trigger('click');\n\t\t\t});\n\t\t},\n\t\tregisterFilterChangeEvent: function registerFilterChangeEvent() {\n\t\t\tlet container = this.getContainer();\n\t\t\tcontainer.on('change', '.widgetFilter', e => {\n\t\t\t\tcontainer.find('a[name=\"drefresh\"]').trigger('click');\n\t\t\t});\n\t\t\tif (container.find('.widgetFilterByField').length) {\n\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(container.find('.select2noactive'));\n\t\t\t\tthis.getContainer().on('change', '.widgetFilterByField .form-control', e => {\n\t\t\t\t\tcontainer.find('a[name=\"drefresh\"]').trigger('click');\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tregisterWidgetPostLoadEvent: function registerWidgetPostLoadEvent(container) {\n\t\t\tvar thisInstance = this;\n\t\t\tcontainer.on(YetiForce_Widget_Js.widgetPostLoadEvent, function (e) {\n\t\t\t\tthisInstance.postLoadWidget();\n\t\t\t});\n\t\t},\n\t\tregisterWidgetPostRefreshEvent: function registerWidgetPostRefreshEvent(container) {\n\t\t\tvar thisInstance = this;\n\t\t\tcontainer.off(YetiForce_Widget_Js.widgetPostRefereshEvent);\n\t\t\tcontainer.on(YetiForce_Widget_Js.widgetPostRefereshEvent, function (e) {\n\t\t\t\tthisInstance.postRefreshWidget();\n\t\t\t});\n\t\t},\n\t\tregisterSectionClick: function registerSectionClick() {\n\t\t\tconst thisInstance = this;\n\t\t\tlet pointer = false;\n\t\t\t$(thisInstance.chartInstance.canvas)\n\t\t\t\t.on('click', function (e) {\n\t\t\t\t\tif (typeof thisInstance.getDataFromEvent(e, ['links']).links !== 'undefined') {\n\t\t\t\t\t\twindow.location.href = thisInstance.getDataFromEvent(e, ['links']).links;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.on('mousemove', function (e) {\n\t\t\t\t\tif (typeof thisInstance.getDataFromEvent(e, ['links']).links !== 'undefined') {\n\t\t\t\t\t\tif (!pointer) {\n\t\t\t\t\t\t\t$(this).css('cursor', 'pointer');\n\t\t\t\t\t\t\tpointer = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (pointer) {\n\t\t\t\t\t\t\t$(this).css('cursor', 'auto');\n\t\t\t\t\t\t\tpointer = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.on('mouseout', function () {\n\t\t\t\t\tif (pointer) {\n\t\t\t\t\t\t$(this).css('cursor', 'auto');\n\t\t\t\t\t\tpointer = false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t},\n\t\tregisterLoadMore: function registerLoadMore() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar parent = thisInstance.getContainer();\n\t\t\tvar contentContainer = parent.find('.dashboardWidgetContent');\n\t\t\tcontentContainer.off('click', '.showMoreHistory');\n\t\t\tcontentContainer.on('click', '.showMoreHistory', function (e) {\n\t\t\t\tvar element = jQuery(e.currentTarget);\n\t\t\t\telement.hide();\n\t\t\t\tvar parent = jQuery(e.delegateTarget).closest('.dashboardWidget');\n\t\t\t\tjQuery(parent)\n\t\t\t\t\t.find('.slimScrollDiv')\n\t\t\t\t\t.css('overflow', 'visible');\n\t\t\t\tvar url = element.data('url') + '&content=true';\n\t\t\t\tlet additionalFilter = parent.find('.widgetFilter');\n\t\t\t\tif (additionalFilter.length > 0) {\n\t\t\t\t\tadditionalFilter.each(function () {\n\t\t\t\t\t\turl += '&' + $(this).attr('name') + '=' + $(this).val();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (parent.find('.changeRecordSort').length > 0) {\n\t\t\t\t\turl += '&sortorder=' + parent.find('.changeRecordSort').data('sort');\n\t\t\t\t}\n\t\t\t\tcontentContainer.progressIndicator();\n\t\t\t\tAppConnector.request(url).done(function (data) {\n\t\t\t\t\tcontentContainer.progressIndicator({\n\t\t\t\t\t\tmode: 'hide'\n\t\t\t\t\t});\n\t\t\t\t\tjQuery(parent)\n\t\t\t\t\t\t.find('.dashboardWidgetContent')\n\t\t\t\t\t\t.append(data);\n\t\t\t\t\telement.parent().remove();\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tsetFilterToCache: function setFilterToCache(url, data) {\n\t\t\tvar paramCache = url;\n\t\t\tvar container = this.getContainer();\n\t\t\tparamCache = paramCache.replace('&content=', '&notcontent=');\n\t\t\tfor (var i in data) {\n\t\t\t\tif (typeof data[i] == 'object') {\n\t\t\t\t\tdata[i] = JSON.stringify(data[i]);\n\t\t\t\t}\n\t\t\t\tparamCache += '&' + i + '=' + data[i];\n\t\t\t}\n\t\t\tvar userId = CONFIG.userId;\n\t\t\tvar name = container.data('name');\n\t\t\tapp.cacheSet(name + userId, paramCache);\n\t\t},\n\t\tregisterCache: function registerCache(container) {\n\t\t\tif (container.data('cache') == 1) {\n\t\t\t\tthis.paramCache = true;\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Auto resize charts when widget was resized\n\t\t */\n\t\tregisterContentAutoResize() {\n\t\t\tthis.getContainer()\n\t\t\t\t.closest('.grid-stack')\n\t\t\t\t.on('gsresizestop', (event, elem) => {\n\t\t\t\t\tthis.loadScrollbar();\n\t\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Load and display chart into the view\n\t\t *\n\t\t * @return {Chart} chartInstance\n\t\t */\n\t\tloadChart: function loadChart() {\n\t\t\tif (typeof this.chartData === 'undefined' || typeof this.getChartContainer() === 'undefined') {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.getWidgetData(); // load widget data for label formatters\n\t\t\tconst type = this.getType();\n\t\t\tlet data = this.generateData();\n\t\t\tdata.datasets = this.loadDatasetOptions(data);\n\t\t\tconst options = this.parseOptions(this.loadBasicOptions(data));\n\t\t\tconst plugins = this.parseOptions(this.loadPlugins(data));\n\t\t\tdata = this.parseOptions(data);\n\t\t\tconst chart = (this.chartInstance = new Chart(this.getChartContainer().getContext('2d'), {\n\t\t\t\ttype,\n\t\t\t\tdata,\n\t\t\t\toptions,\n\t\t\t\tplugins\n\t\t\t}));\n\t\t\t// parse chart one more time after it was mounted - some options need to have chart loaded\n\t\t\tdata.datasets = data.datasets.map((dataset, index) => {\n\t\t\t\tdataset.datasetIndex = index;\n\t\t\t\treturn this.parseOptions(dataset, dataset, true);\n\t\t\t});\n\t\t\treturn chart;\n\t\t},\n\t\t/**\n\t\t * Get data from event like mouse hover,click etc - get data which belongs to pointed element\n\t\t *\n\t\t * @param {Object} e\n\t\t * @param {array} additionalFields if element from event have additional\n\t\t * array in dataset like links for data then additionalFields will look like ['links']\n\t\t * @returns {object} {label,value,...additionalFields}\n\t\t */\n\t\tgetDataFromEvent: function getDataFromEvent(e, additionalFields) {\n\t\t\tlet chart = this.chartInstance;\n\t\t\tconst elements = chart.getElementAtEvent(e);\n\t\t\tif (elements.length === 0) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tconst element = elements[0];\n\t\t\tconst dataIndex = element._index;\n\t\t\tconst datasetIndex = element._datasetIndex;\n\t\t\tconst eventData = {\n\t\t\t\tlabel: chart.data.labels[dataIndex],\n\t\t\t\tvalue: chart.data.datasets[0].data[dataIndex]\n\t\t\t};\n\t\t\tif (typeof additionalFields !== 'undefined' && Array.isArray(additionalFields)) {\n\t\t\t\tadditionalFields.forEach(fieldName => {\n\t\t\t\t\tif (\n\t\t\t\t\t\ttypeof chart.data.datasets[datasetIndex][fieldName] !== 'undefined' &&\n\t\t\t\t\t\ttypeof chart.data.datasets[datasetIndex][fieldName][dataIndex] !== 'undefined'\n\t\t\t\t\t) {\n\t\t\t\t\t\teventData[fieldName] = chart.data.datasets[datasetIndex][fieldName][dataIndex];\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn eventData;\n\t\t},\n\t\t/**\n\t\t * Get default chart options for current chart subtype\n\t\t * basic and tooltip options share the same space\n\t\t *\n\t\t * @param  {Object} chartData\n\t\t * @return {Object} merged options\n\t\t */\n\t\tloadBasicOptions: function loadBasicOptions(chartData) {\n\t\t\tthis.formatTooltipTitles(chartData);\n\t\t\tthis.formatTooltipLabels(chartData);\n\t\t\treturn this.mergeOptions(\n\t\t\t\tthis.getBasicOptions(chartData),\n\t\t\t\tthis.getDefaultBasicOptions(this.getSubType(), chartData)\n\t\t\t);\n\t\t},\n\t\t/**\n\t\t * Apply default dataset options (usually datalabels configuration)\n\t\t *\n\t\t * @param {object} chartData from request\n\t\t * @returns {object} chartData\n\t\t */\n\t\tloadDatasetOptions: function loadDatasetOptions(chartData) {\n\t\t\treturn chartData.datasets.map((dataset, index) => {\n\t\t\t\tlet result = this.mergeOptions(\n\t\t\t\t\tdataset,\n\t\t\t\t\tthis.getDatasetOptions(chartData),\n\t\t\t\t\tthis.getDefaultDatasetOptions(this.getSubType(), chartData)\n\t\t\t\t);\n\t\t\t\treturn result;\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Load plugins from configuration\n\t\t * @param  {Object} chartData from the request\n\t\t * @return {Object}\n\t\t */\n\t\tloadPlugins: function loadPlugins(chartData) {\n\t\t\treturn this.mergeOptionsArray(this.getPlugins(chartData), this.getDefaultPlugins(this.getSubType(), chartData));\n\t\t},\n\t\t/**\n\t\t * Format tooltip titles to user number format and push this modification to titlesFormatted\n\t\t * it is better to parse tooltips at initialization phase than\n\t\t * in tooltip callback which is called after hover\n\t\t *\n\t\t * @param {object} data - data from request\n\t\t * @returns {undefined}\n\t\t */\n\t\tformatTooltipTitles: function formatTooltipTitles(data) {\n\t\t\tdata.datasets.forEach(dataset => {\n\t\t\t\tif (typeof dataset.titlesFormatted === 'undefined') {\n\t\t\t\t\tdataset.titlesFormatted = [];\n\t\t\t\t\tdataset.data.forEach((dataItem, index) => {\n\t\t\t\t\t\tlet defaultLabel = data.labels[index];\n\t\t\t\t\t\tif (String(defaultLabel).length > 0 && !isNaN(Number(defaultLabel))) {\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\ttypeof this.widgetData !== 'undefined' &&\n\t\t\t\t\t\t\t\ttypeof this.widgetData.valueType !== 'undefined' &&\n\t\t\t\t\t\t\t\tthis.widgetData.valueType === 'count'\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tdefaultLabel = App.Fields.Double.formatToDisplay(defaultLabel, 0);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tdefaultLabel = App.Fields.Double.formatToDisplay(defaultLabel);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (typeof dataset.label !== 'undefined') {\n\t\t\t\t\t\t\tlet label = dataset.label;\n\t\t\t\t\t\t\tif (String(label).length > 0 && !isNaN(Number(label))) {\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\ttypeof this.widgetData !== 'undefined' &&\n\t\t\t\t\t\t\t\t\ttypeof this.widgetData.valueType !== 'undefined' &&\n\t\t\t\t\t\t\t\t\tthis.widgetData.valueType === 'count'\n\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\tlabel = App.Fields.Double.formatToDisplay(label, 0);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tlabel = App.Fields.Double.formatToDisplay(label);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdefaultLabel += ' (' + label + ')';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdataset.titlesFormatted.push(defaultLabel);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Format tooltip titles to user number format and push this modification to titlesFormatted\n\t\t * it is better to parse tooltips at initialization phase than\n\t\t * in tooltip callback which is called after hover\n\t\t *\n\t\t * @param {object} data - data from request\n\t\t * @returns {undefined}\n\t\t */\n\t\tformatTooltipLabels: function formatTooltipTitles(data) {\n\t\t\tdata.datasets.forEach(dataset => {\n\t\t\t\tif (typeof dataset.dataFormatted === 'undefined') {\n\t\t\t\t\tdataset.dataFormatted = [];\n\t\t\t\t\tdataset.data.forEach((dataItem, index) => {\n\t\t\t\t\t\tlet dataFormatted = dataItem;\n\t\t\t\t\t\tif (String(dataItem).length > 0 && !isNaN(Number(dataItem))) {\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\ttypeof this.widgetData !== 'undefined' &&\n\t\t\t\t\t\t\t\ttypeof this.widgetData.valueType !== 'undefined' &&\n\t\t\t\t\t\t\t\tthis.widgetData.valueType === 'count'\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tdataFormatted = App.Fields.Double.formatToDisplay(dataItem, 0);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tdataFormatted = App.Fields.Double.formatToDisplay(dataItem);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdataset.dataFormatted.push(dataFormatted);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Same as mergeOptionsObject but in array ;)\n\t\t * @param  {Array} to\n\t\t * @param  {Array} fromArray\n\t\t * @return {Array}\n\t\t */\n\t\tmergeOptionsArray: function mergeOptionsArray(to, fromArray) {\n\t\t\tif (typeof to !== 'undefined') {\n\t\t\t\treturn to;\n\t\t\t}\n\t\t\tto = [];\n\t\t\tlet result = fromArray\n\t\t\t\t.map((from, index) => {\n\t\t\t\t\tif (Array.isArray(from) && !to.hasOwnProperty(key)) {\n\t\t\t\t\t\treturn this.mergeOptionsArray(to[index], from);\n\t\t\t\t\t}\n\t\t\t\t\tif (\n\t\t\t\t\t\ttypeof from === 'object' &&\n\t\t\t\t\t\tfrom !== null &&\n\t\t\t\t\t\t(typeof to[index] === 'undefined' || (typeof to[index] === 'object' && to[index] !== null))\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn this.mergeOptionsObject(to[index], from);\n\t\t\t\t\t}\n\t\t\t\t\treturn to[index];\n\t\t\t\t})\n\t\t\t\t.filter(item => typeof item !== 'undefined');\n\t\t\treturn result;\n\t\t},\n\t\t/**\n\t\t * Merge options object and do not override existing properties\n\t\t * @param  {Object} to   object to extend\n\t\t * @param  {Object} from copy properties from this object\n\t\t * @return {Object}      mixed properties\n\t\t */\n\t\tmergeOptionsObject: function mergeOptionsObject(to, from) {\n\t\t\tif (typeof to === 'undefined') {\n\t\t\t\tto = {};\n\t\t\t}\n\t\t\tfor (let key in from) {\n\t\t\t\tif (from.hasOwnProperty(key)) {\n\t\t\t\t\tif (Array.isArray(from[key])) {\n\t\t\t\t\t\tif (!to.hasOwnProperty(key)) {\n\t\t\t\t\t\t\tto[key] = this.mergeOptionsArray(undefined, from[key]);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (\n\t\t\t\t\t\ttypeof from[key] === 'object' &&\n\t\t\t\t\t\tfrom[key] !== null &&\n\t\t\t\t\t\t(!to.hasOwnProperty(key) || (typeof to[key] === 'object' && to[key] !== null && !Array.isArray(to[key])))\n\t\t\t\t\t) {\n\t\t\t\t\t\t// if property is an object - merge recursively\n\t\t\t\t\t\tto[key] = this.mergeOptionsObject(to[key], from[key]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (!to.hasOwnProperty(key)) {\n\t\t\t\t\t\t\tto[key] = from[key];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn to;\n\t\t},\n\t\t/**\n\t\t * Merge two objects with options and do not override existing properties\n\t\t *\n\t\t * @param  {Object} to\n\t\t * @param  {Array|arguments} fromArray\n\t\t * @return {object}\n\t\t */\n\t\tmergeOptions: function mergeOptions(to = {}, ...fromArray) {\n\t\t\tfor (let i = 0, len = fromArray.length; i < len; i++) {\n\t\t\t\tif (typeof fromArray[i] !== 'object' || Array.isArray(fromArray[i])) {\n\t\t\t\t\tapp.errorLog(\n\t\t\t\t\t\tnew Error(\n\t\t\t\t\t\t\t'Options argument should be an object! Chart subType: ' +\n\t\t\t\t\t\t\tthis.getSubType() +\n\t\t\t\t\t\t\t' [' +\n\t\t\t\t\t\t\tfromArray[i].toString() +\n\t\t\t\t\t\t\t']'\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tto = this.mergeOptionsObject(to, fromArray[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn to;\n\t\t},\n\t\t/**\n\t\t * Placeholder for individual chart type options\n\t\t * If you want to customize default options this is the right place - override this method in your class\n\t\t *\n\t\t * @param {object} chartData\n\t\t * @returns {object} chart options\n\t\t */\n\t\tgetBasicOptions: function getBasicOptions(chartData) {\n\t\t\treturn {\n\t\t\t\tresponsive: true,\n\t\t\t\tmaintainAspectRatio: false\n\t\t\t};\n\t\t},\n\t\t/**\n\t\t * Placeholder for individual chart type dataset options\n\t\t *\n\t\t * @param  {object} chartData\n\t\t * @return {Object} datalabels configurations\n\t\t */\n\t\tgetDatasetOptions: function getDatasetOptions(chartData) {\n\t\t\treturn {};\n\t\t},\n\t\t/**\n\t\t * Placeholder for individual chart type plugins\n\t\t * You can add custom plugins for individual charts by overriding this method\n\t\t * see: http://www.chartjs.org/docs/latest/developers/plugins.html\n\t\t *\n\t\t * @param {object} chartData\n\t\t * @returns {Array|undefined} plugins\n\t\t */\n\t\tgetPlugins: function getPlugins(chartData) {\n\t\t\t// do not return anything - undefined\n\t\t},\n\t\t/**\n\t\t * Get chart type\n\t\t * We don't wan't to override loadChart method (good practice)\n\t\t * so we can extend some chart type and change its type only to show data in different manner.\n\t\t * Get type is used to set up Chartjs chart type.\n\t\t *\n\t\t * @param {object} chartData\n\t\t * @returns {string}\n\t\t */\n\t\tgetType: function getType(chartData) {\n\t\t\treturn 'bar';\n\t\t},\n\t\t/**\n\t\t * Get sub type of a chart.\n\t\t * For example 'bar' is main type and barDivided is a subset of bar with little different options.\n\t\t * By default we are using standard type.\n\t\t * GetSubType is used to get properties - it does not set up Chartjs chart type per se (getType is used for this purpose)\n\t\t *\n\t\t * @param {object}  chartData\n\t\t * @returns {string}\n\t\t */\n\t\tgetSubType: function getSubType(chartData) {\n\t\t\treturn this.getType();\n\t\t}\n\t}\n);\nVtiger_Widget_Js('YetiForce_Widget_Js', {}, {});\nYetiForce_Widget_Js(\n\t'YetiForce_Bar_Widget_Js',\n\t{},\n\t{\n\t\tgetType: function getType() {\n\t\t\treturn 'bar';\n\t\t}\n\t}\n);\nYetiForce_Bar_Widget_Js(\n\t'YetiForce_BarStacked_Widget_Js',\n\t{},\n\t{\n\t\tgetSubType() {\n\t\t\treturn 'barStacked';\n\t\t}\n\t}\n);\nYetiForce_Bar_Widget_Js(\n\t'YetiForce_Horizontal_Widget_Js',\n\t{},\n\t{\n\t\tgetType: function () {\n\t\t\treturn 'horizontalBar';\n\t\t}\n\t}\n);\nYetiForce_Horizontal_Widget_Js(\n\t'YetiForce_HorizontalStacked_Widget_Js',\n\t{},\n\t{\n\t\tgetType: function () {\n\t\t\treturn 'horizontalBar';\n\t\t},\n\t\tgetSubType() {\n\t\t\treturn 'horizontalBarStacked';\n\t\t}\n\t}\n);\nYetiForce_Widget_Js(\n\t'YetiForce_Funnel_Widget_Js',\n\t{},\n\t{\n\t\tgetType: function getType() {\n\t\t\treturn 'funnel';\n\t\t}\n\t}\n);\nYetiForce_Widget_Js(\n\t'YetiForce_Pie_Widget_Js',\n\t{},\n\t{\n\t\tgetType: function getType() {\n\t\t\treturn 'pie';\n\t\t}\n\t}\n);\nYetiForce_Pie_Widget_Js(\n\t'YetiForce_PieDivided_Widget_Js',\n\t{},\n\t{\n\t\tgetSubType() {\n\t\t\treturn 'pieDivided';\n\t\t}\n\t}\n);\nYetiForce_Pie_Widget_Js(\n\t'YetiForce_Donut_Widget_Js',\n\t{},\n\t{\n\t\tgetType: function getType() {\n\t\t\treturn 'doughnut';\n\t\t}\n\t}\n);\nYetiForce_Donut_Widget_Js('YetiForce_Axis_Widget_Js', {}, {});\nYetiForce_Widget_Js(\n\t'YetiForce_BarDivided_Widget_Js',\n\t{},\n\t{\n\t\tgetType: function getType() {\n\t\t\treturn 'bar';\n\t\t},\n\t\tgetSubType: function getSubType() {\n\t\t\treturn 'barDivided';\n\t\t}\n\t}\n);\nYetiForce_Widget_Js(\n\t'YetiForce_Line_Widget_Js',\n\t{},\n\t{\n\t\tgetType: function getType() {\n\t\t\treturn 'line';\n\t\t}\n\t}\n);\nYetiForce_Line_Widget_Js(\n\t'YetiForce_LineStacked_Widget_Js',\n\t{},\n\t{\n\t\tgetType() {\n\t\t\treturn 'line';\n\t\t},\n\t\tgetSubType() {\n\t\t\treturn 'lineStacked';\n\t\t}\n\t}\n);\nYetiForce_Line_Widget_Js(\n\t'YetiForce_LinePlain_Widget_Js',\n\t{},\n\t{\n\t\tgetSubType: function getSubType() {\n\t\t\treturn 'linePlain';\n\t\t}\n\t}\n);\nYetiForce_LineStacked_Widget_Js(\n\t'YetiForce_LinePlainStacked_Widget_Js',\n\t{},\n\t{\n\t\tgetSubType() {\n\t\t\treturn 'linePlainStacked';\n\t\t}\n\t}\n);\nYetiForce_Bar_Widget_Js(\n\t'YetiForce_TicketsByStatus_Widget_Js',\n\t{},\n\t{\n\t\tgetBasicOptions: function () {\n\t\t\treturn {\n\t\t\t\tlegend: {\n\t\t\t\t\tdisplay: true\n\t\t\t\t},\n\t\t\t\tscales: {\n\t\t\t\t\txAxes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstacked: true\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\tyAxes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstacked: true\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t}\n);\nYetiForce_Widget_Js(\n\t'YetiForce_Calendar_Widget_Js',\n\t{},\n\t{\n\t\tcalendarView: false,\n\t\tcalendarCreateView: false,\n\n\t\tregisterCalendar: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar userDefaultActivityView = 'month';\n\t\t\tvar container = thisInstance.getContainer();\n\t\t\t//Default time format\n\t\t\tvar userDefaultTimeFormat = CONFIG.hourFormat;\n\t\t\tif (userDefaultTimeFormat == 24) {\n\t\t\t\tuserDefaultTimeFormat = 'H(:mm)';\n\t\t\t} else {\n\t\t\t\tuserDefaultTimeFormat = 'h(:mm) A';\n\t\t\t}\n\n\t\t\t//Default first day of the week\n\t\t\tvar convertedFirstDay = CONFIG.firstDayOfWeekNo;\n\t\t\t//Default first hour of the day\n\t\t\tvar defaultFirstHour = app.getMainParams('startHour');\n\t\t\tvar explodedTime = defaultFirstHour.split(':');\n\t\t\tdefaultFirstHour = explodedTime['0'];\n\t\t\tvar defaultDate = app.getMainParams('defaultDate');\n\t\t\tif (this.paramCache && defaultDate != moment().format('YYYY-MM-DD')) {\n\t\t\t\tdefaultDate = moment(defaultDate).format('D') == 1 ? moment(defaultDate) : moment(defaultDate).add(1, 'M');\n\t\t\t}\n\t\t\tcontainer.find('.js-widget-quick-create').on('click', function (e) {\n\t\t\t\tVtiger_Header_Js.getInstance().quickCreateModule($(this).data('module-name'));\n\t\t\t});\n\t\t\tthisInstance.getCalendarView().fullCalendar({\n\t\t\t\theader: {\n\t\t\t\t\tleft: ' ',\n\t\t\t\t\tcenter: 'prev title next',\n\t\t\t\t\tright: ' '\n\t\t\t\t},\n\t\t\t\tdefaultDate: defaultDate,\n\t\t\t\ttimeFormat: userDefaultTimeFormat,\n\t\t\t\taxisFormat: userDefaultTimeFormat,\n\t\t\t\tfirstHour: defaultFirstHour,\n\t\t\t\tfirstDay: convertedFirstDay,\n\t\t\t\tdefaultView: userDefaultActivityView,\n\t\t\t\teditable: false,\n\t\t\t\tslotMinutes: 15,\n\t\t\t\ttheme: false,\n\t\t\t\tdefaultEventMinutes: 0,\n\t\t\t\teventLimit: true,\n\t\t\t\tallDaySlot: false,\n\t\t\t\tmonthNames: [\n\t\t\t\t\tapp.vtranslate('JS_JANUARY'),\n\t\t\t\t\tapp.vtranslate('JS_FEBRUARY'),\n\t\t\t\t\tapp.vtranslate('JS_MARCH'),\n\t\t\t\t\tapp.vtranslate('JS_APRIL'),\n\t\t\t\t\tapp.vtranslate('JS_MAY'),\n\t\t\t\t\tapp.vtranslate('JS_JUNE'),\n\t\t\t\t\tapp.vtranslate('JS_JULY'),\n\t\t\t\t\tapp.vtranslate('JS_AUGUST'),\n\t\t\t\t\tapp.vtranslate('JS_SEPTEMBER'),\n\t\t\t\t\tapp.vtranslate('JS_OCTOBER'),\n\t\t\t\t\tapp.vtranslate('JS_NOVEMBER'),\n\t\t\t\t\tapp.vtranslate('JS_DECEMBER')\n\t\t\t\t],\n\t\t\t\tmonthNamesShort: [\n\t\t\t\t\tapp.vtranslate('JS_JAN'),\n\t\t\t\t\tapp.vtranslate('JS_FEB'),\n\t\t\t\t\tapp.vtranslate('JS_MAR'),\n\t\t\t\t\tapp.vtranslate('JS_APR'),\n\t\t\t\t\tapp.vtranslate('JS_MAY'),\n\t\t\t\t\tapp.vtranslate('JS_JUN'),\n\t\t\t\t\tapp.vtranslate('JS_JUL'),\n\t\t\t\t\tapp.vtranslate('JS_AUG'),\n\t\t\t\t\tapp.vtranslate('JS_SEP'),\n\t\t\t\t\tapp.vtranslate('JS_OCT'),\n\t\t\t\t\tapp.vtranslate('JS_NOV'),\n\t\t\t\t\tapp.vtranslate('JS_DEC')\n\t\t\t\t],\n\t\t\t\tdayNames: [\n\t\t\t\t\tapp.vtranslate('JS_SUNDAY'),\n\t\t\t\t\tapp.vtranslate('JS_MONDAY'),\n\t\t\t\t\tapp.vtranslate('JS_TUESDAY'),\n\t\t\t\t\tapp.vtranslate('JS_WEDNESDAY'),\n\t\t\t\t\tapp.vtranslate('JS_THURSDAY'),\n\t\t\t\t\tapp.vtranslate('JS_FRIDAY'),\n\t\t\t\t\tapp.vtranslate('JS_SATURDAY')\n\t\t\t\t],\n\t\t\t\tdayNamesShort: [\n\t\t\t\t\tapp.vtranslate('JS_SUN'),\n\t\t\t\t\tapp.vtranslate('JS_MON'),\n\t\t\t\t\tapp.vtranslate('JS_TUE'),\n\t\t\t\t\tapp.vtranslate('JS_WED'),\n\t\t\t\t\tapp.vtranslate('JS_THU'),\n\t\t\t\t\tapp.vtranslate('JS_FRI'),\n\t\t\t\t\tapp.vtranslate('JS_SAT')\n\t\t\t\t],\n\t\t\t\tbuttonText: {\n\t\t\t\t\ttoday: app.vtranslate('JS_TODAY'),\n\t\t\t\t\tmonth: app.vtranslate('JS_MONTH'),\n\t\t\t\t\tweek: app.vtranslate('JS_WEEK'),\n\t\t\t\t\tday: app.vtranslate('JS_DAY')\n\t\t\t\t},\n\t\t\t\tallDayText: app.vtranslate('JS_ALL_DAY'),\n\t\t\t\teventLimitText: app.vtranslate('JS_MORE'),\n\t\t\t\teventRender: function (event, element, view) {\n\t\t\t\t\telement = '<div class=\"cell-calendar\">';\n\t\t\t\t\tfor (var key in event.event) {\n\t\t\t\t\t\telement +=\n\t\t\t\t\t\t\t'<a class=\"\" href=\"javascript:;\"' +\n\t\t\t\t\t\t\t' data-date=\"' +\n\t\t\t\t\t\t\tevent.date +\n\t\t\t\t\t\t\t'\"' +\n\t\t\t\t\t\t\t' data-type=\"' +\n\t\t\t\t\t\t\tkey +\n\t\t\t\t\t\t\t'\" title=\"' +\n\t\t\t\t\t\t\tevent.event[key].label +\n\t\t\t\t\t\t\t'\">' +\n\t\t\t\t\t\t\t'<span class=\"' +\n\t\t\t\t\t\t\tevent.event[key].className +\n\t\t\t\t\t\t\t(event.width <= 20 ? ' small-badge' : '') +\n\t\t\t\t\t\t\t(event.width >= 24 ? ' big-badge' : '') +\n\t\t\t\t\t\t\t' badge badge-secondary u-font-size-95per\">' +\n\t\t\t\t\t\t\tevent.event[key].count +\n\t\t\t\t\t\t\t'</span>' +\n\t\t\t\t\t\t\t'</a>\\n';\n\t\t\t\t\t}\n\t\t\t\t\telement += '</div>';\n\t\t\t\t\treturn element;\n\t\t\t\t}\n\t\t\t});\n\t\t\tthisInstance\n\t\t\t\t.getCalendarView()\n\t\t\t\t.find('td.fc-day-top')\n\t\t\t\t.on('mouseenter', function () {\n\t\t\t\t\tjQuery('<span class=\"plus pull-left fas fa-plus\"></span>').prependTo($(this));\n\t\t\t\t})\n\t\t\t\t.on('mouseleave', function () {\n\t\t\t\t\t$(this)\n\t\t\t\t\t\t.find('.plus')\n\t\t\t\t\t\t.remove();\n\t\t\t\t});\n\t\t\tlet formatDate = CONFIG.dateFormat.toUpperCase();\n\t\t\tthisInstance\n\t\t\t\t.getCalendarView()\n\t\t\t\t.find('td.fc-day-top')\n\t\t\t\t.on('click', function () {\n\t\t\t\t\tlet date = moment($(this).data('date')).format(formatDate);\n\t\t\t\t\tlet params = {\n\t\t\t\t\t\tnoCache: true,\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tdate_start: date,\n\t\t\t\t\t\t\tdue_date: date\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\tparams.callbackFunction = function () {\n\t\t\t\t\t\tthisInstance\n\t\t\t\t\t\t\t.getCalendarView()\n\t\t\t\t\t\t\t.closest('.dashboardWidget')\n\t\t\t\t\t\t\t.find('a[name=\"drefresh\"]')\n\t\t\t\t\t\t\t.trigger('click');\n\t\t\t\t\t};\n\t\t\t\t\tVtiger_Header_Js.getInstance().quickCreateModule('Calendar', params);\n\t\t\t\t});\n\t\t\tvar switchBtn = container.find('.js-switch--calendar');\n\t\t\tswitchBtn.on('change', e => {\n\t\t\t\tconst currentTarget = $(e.currentTarget);\n\t\t\t\tif (typeof currentTarget.data('on-text') !== 'undefined') container.find('.widgetFilterSwitch').val('current');\n\t\t\t\telse if (typeof currentTarget.data('off-text') !== 'undefined')\n\t\t\t\t\tcontainer.find('.widgetFilterSwitch').val('history');\n\t\t\t\tthis.refreshWidget();\n\t\t\t});\n\t\t},\n\t\tloadCalendarData: function (allEvents) {\n\t\t\tvar thisInstance = this;\n\t\t\tthisInstance.getCalendarView().fullCalendar('removeEvents');\n\t\t\tvar view = thisInstance.getCalendarView().fullCalendar('getView');\n\t\t\tvar formatDate = CONFIG.dateFormat.toUpperCase();\n\t\t\tvar start_date = view.start.format(formatDate);\n\t\t\tvar end_date = view.end.format(formatDate);\n\t\t\tvar parent = thisInstance.getContainer();\n\t\t\tvar user = parent.find('.owner').val();\n\t\t\tif (user == 'all') {\n\t\t\t\tuser = '';\n\t\t\t}\n\t\t\tvar params = {\n\t\t\t\tmodule: 'Calendar',\n\t\t\t\taction: 'Calendar',\n\t\t\t\tmode: 'getEvents',\n\t\t\t\tstart: start_date,\n\t\t\t\tend: end_date,\n\t\t\t\tuser: user,\n\t\t\t\twidget: true\n\t\t\t};\n\t\t\tif (parent.find('.customFilter').length > 0) {\n\t\t\t\tvar customFilter = parent.find('.customFilter').val();\n\t\t\t\tparams.customFilter = customFilter;\n\t\t\t}\n\t\t\tif (parent.find('.widgetFilterSwitch').length > 0) {\n\t\t\t\tparams.time = parent.find('.widgetFilterSwitch').val();\n\t\t\t}\n\t\t\tif (this.paramCache) {\n\t\t\t\tvar drefresh = this.getContainer().find('a[name=\"drefresh\"]');\n\t\t\t\tvar url = drefresh.data('url');\n\t\t\t\tvar paramCache = {\n\t\t\t\t\towner: user,\n\t\t\t\t\tcustomFilter: customFilter,\n\t\t\t\t\tstart: start_date\n\t\t\t\t};\n\t\t\t\tthisInstance.setFilterToCache(url, paramCache);\n\t\t\t}\n\t\t\tAppConnector.request(params).done(function (events) {\n\t\t\t\tvar height =\n\t\t\t\t\tthisInstance\n\t\t\t\t\t\t.getCalendarView()\n\t\t\t\t\t\t.find('.fc-bg :first')\n\t\t\t\t\t\t.height() -\n\t\t\t\t\tthisInstance\n\t\t\t\t\t\t.getCalendarView()\n\t\t\t\t\t\t.find('.fc-day-number')\n\t\t\t\t\t\t.height() -\n\t\t\t\t\t10;\n\t\t\t\tvar width =\n\t\t\t\t\tthisInstance\n\t\t\t\t\t\t.getCalendarView()\n\t\t\t\t\t\t.find('.fc-day-number')\n\t\t\t\t\t\t.width() /\n\t\t\t\t\t2 -\n\t\t\t\t\t10;\n\t\t\t\tfor (var i in events.result) {\n\t\t\t\t\tevents.result[i]['width'] = width;\n\t\t\t\t\tevents.result[i]['height'] = height;\n\t\t\t\t}\n\t\t\t\tthisInstance.getCalendarView().fullCalendar('addEventSource', events.result);\n\t\t\t\tthisInstance\n\t\t\t\t\t.getCalendarView()\n\t\t\t\t\t.find('.cell-calendar a')\n\t\t\t\t\t.on('click', function () {\n\t\t\t\t\t\tvar container = thisInstance.getContainer();\n\t\t\t\t\t\tvar url = 'index.php?module=Calendar&view=List';\n\t\t\t\t\t\tif (customFilter) {\n\t\t\t\t\t\t\turl += '&viewname=' + container.find('select.widgetFilter.customFilter').val();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\turl += '&viewname=All';\n\t\t\t\t\t\t}\n\t\t\t\t\t\turl += '&search_params=[[';\n\t\t\t\t\t\tvar owner = container.find('.widgetFilter.owner option:selected');\n\t\t\t\t\t\tif (owner.val() != 'all') {\n\t\t\t\t\t\t\turl += '[\"assigned_user_id\",\"e\",\"' + owner.val() + '\"],';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (parent.find('.widgetFilterSwitch').length > 0) {\n\t\t\t\t\t\t\tvar status = parent.find('.widgetFilterSwitch').data();\n\t\t\t\t\t\t\turl += '[\"activitystatus\",\"e\",\"' + status[params.time] + '\"],';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar date = moment($(this).data('date')).format(thisInstance.getUserDateFormat().toUpperCase());\n\t\t\t\t\t\twindow.location.href =\n\t\t\t\t\t\t\turl +\n\t\t\t\t\t\t\t'[\"activitytype\",\"e\",\"' +\n\t\t\t\t\t\t\t$(this).data('type') +\n\t\t\t\t\t\t\t'\"],[\"date_start\",\"bw\",\"' +\n\t\t\t\t\t\t\tdate +\n\t\t\t\t\t\t\t',' +\n\t\t\t\t\t\t\tdate +\n\t\t\t\t\t\t\t'\"]]]';\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tgetCalendarView: function () {\n\t\t\tif (this.calendarView == false) {\n\t\t\t\tthis.calendarView = this.getContainer().find('.js-calendar__container');\n\t\t\t}\n\t\t\treturn this.calendarView;\n\t\t},\n\t\tgetMonthName: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar month = thisInstance\n\t\t\t\t.getCalendarView()\n\t\t\t\t.find('.fc-toolbar h2')\n\t\t\t\t.text();\n\t\t\tif (month) {\n\t\t\t\tthis.getContainer()\n\t\t\t\t\t.find('.headerCalendar .month')\n\t\t\t\t\t.html('<h3>' + month + '</h3>');\n\t\t\t}\n\t\t},\n\t\tregisterChangeView: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar container = this.getContainer();\n\t\t\tcontainer.find('.fc-toolbar').addClass('d-none');\n\t\t\tvar month = container.find('.fc-toolbar h2').text();\n\t\t\tif (month) {\n\t\t\t\tcontainer\n\t\t\t\t\t.find('.headerCalendar')\n\t\t\t\t\t.removeClass('d-none')\n\t\t\t\t\t.find('.month')\n\t\t\t\t\t.append('<h3>' + month + '</h3>');\n\t\t\t\tvar button = container.find('.headerCalendar button');\n\t\t\t\tbutton.each(function () {\n\t\t\t\t\tvar tag = jQuery(this).data('type');\n\t\t\t\t\tjQuery(this).on('click', function () {\n\t\t\t\t\t\tthisInstance\n\t\t\t\t\t\t\t.getCalendarView()\n\t\t\t\t\t\t\t.find('.fc-toolbar .' + tag)\n\t\t\t\t\t\t\t.trigger('click');\n\t\t\t\t\t\tthisInstance.loadCalendarData();\n\t\t\t\t\t\tthisInstance.getMonthName();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tpostLoadWidget: function () {\n\t\t\tthis.registerCalendar();\n\t\t\tthis.loadCalendarData(true);\n\t\t\tthis.registerChangeView();\n\t\t\tthis.registerFilterChangeEvent();\n\t\t},\n\t\trefreshWidget: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar refreshContainer = this.getContainer().find('.dashboardWidgetContent');\n\t\t\trefreshContainer.progressIndicator();\n\t\t\tthisInstance.loadCalendarData();\n\t\t\trefreshContainer.progressIndicator({\n\t\t\t\tmode: 'hide'\n\t\t\t});\n\t\t}\n\t}\n);\nYetiForce_Widget_Js(\n\t'YetiForce_CalendarActivities_Widget_Js',\n\t{},\n\t{\n\t\tmodalView: false,\n\t\tpostLoadWidget: function () {\n\t\t\tthis._super();\n\t\t\tthis.registerActivityChange();\n\t\t\tthis.registerListViewButton();\n\t\t},\n\t\tpostRefreshWidget: function () {\n\t\t\tthis._super();\n\t\t\tthis.registerActivityChange();\n\t\t},\n\t\tregisterActivityChange: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar refreshContainer = this.getContainer().find('.dashboardWidgetContent');\n\t\t\trefreshContainer.find('.changeActivity').on('click', function (e) {\n\t\t\t\tif (jQuery(e.target).is('a') || thisInstance.modalView) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tvar url = jQuery(this).data('url');\n\t\t\t\tif (typeof url !== 'undefined') {\n\t\t\t\t\tvar callbackFunction = function () {\n\t\t\t\t\t\tthisInstance.modalView = false;\n\t\t\t\t\t};\n\t\t\t\t\tthisInstance.modalView = true;\n\t\t\t\t\tapp.showModalWindow(null, url, callbackFunction);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tregisterListViewButton: function () {\n\t\t\tconst thisInstance = this,\n\t\t\t\tcontainer = thisInstance.getContainer();\n\t\t\tcontainer.find('.goToListView').on('click', function () {\n\t\t\t\tlet status;\n\t\t\t\tlet activitiesStatus = container.data('name');\n\t\t\t\tif (activitiesStatus === 'OverdueActivities') {\n\t\t\t\t\tstatus = 'PLL_OVERDUE';\n\t\t\t\t} else if (activitiesStatus === 'CalendarActivities') {\n\t\t\t\t\tstatus = 'PLL_IN_REALIZATION##PLL_PLANNED';\n\t\t\t\t} else {\n\t\t\t\t\tstatus = 'PLL_IN_REALIZATION##PLL_PLANNED##PLL_OVERDUE';\n\t\t\t\t}\n\t\t\t\tlet url = 'index.php?module=Calendar&view=List&viewname=All';\n\t\t\t\turl += '&search_params=[[';\n\t\t\t\tlet owner = container.find('.widgetFilter.owner option:selected');\n\t\t\t\tif (owner.val() !== 'all') {\n\t\t\t\t\turl += '[\"assigned_user_id\",\"e\",\"' + owner.val() + '\"],';\n\t\t\t\t}\n\t\t\t\turl += '[\"activitystatus\",\"e\",\"' + encodeURIComponent(status) + '\"]]]';\n\t\t\t\twindow.location.href = url;\n\t\t\t});\n\t\t}\n\t}\n);\nYetiForce_CalendarActivities_Widget_Js('YetiForce_CreatedNotMineActivities_Widget_Js', {}, {});\nYetiForce_CalendarActivities_Widget_Js('YetiForce_CreatedNotMineOverdueActivities_Widget_Js', {}, {});\nYetiForce_CalendarActivities_Widget_Js('YetiForce_OverDueActivities_Widget_Js', {}, {});\nYetiForce_CalendarActivities_Widget_Js('YetiForce_OverdueActivities_Widget_Js', {}, {});\nYetiForce_Widget_Js(\n\t'YetiForce_ProductsSoldToRenew_Widget_Js',\n\t{},\n\t{\n\t\tmodalView: false,\n\t\tpostLoadWidget: function () {\n\t\t\tthis._super();\n\t\t\tthis.registerAction();\n\t\t\tthis.registerListViewButton();\n\t\t},\n\t\tpostRefreshWidget: function () {\n\t\t\tthis._super();\n\t\t\tthis.registerAction();\n\t\t},\n\t\tregisterAction: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar refreshContainer = this.getContainer().find('.dashboardWidgetContent');\n\t\t\trefreshContainer.find('.rowAction').on('click', function (e) {\n\t\t\t\tif (jQuery(e.target).is('a') || thisInstance.modalView) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tvar url = jQuery(this).data('url');\n\t\t\t\tif (typeof url !== 'undefined') {\n\t\t\t\t\tvar callbackFunction = function () {\n\t\t\t\t\t\tthisInstance.modalView = false;\n\t\t\t\t\t};\n\t\t\t\t\tthisInstance.modalView = true;\n\t\t\t\t\tapp.showModalWindow(null, url, callbackFunction);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterListViewButton: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar container = thisInstance.getContainer();\n\t\t\tcontainer.on('click', '.goToListView', function () {\n\t\t\t\tvar url = jQuery(this).data('url');\n\t\t\t\tvar orderBy = container.find('.orderby');\n\t\t\t\tvar sortOrder = container.find('.changeRecordSort');\n\t\t\t\tif (orderBy.length) {\n\t\t\t\t\turl += '&orderby=' + orderBy.val();\n\t\t\t\t}\n\t\t\t\tif (sortOrder.length) {\n\t\t\t\t\turl += '&sortorder=' + sortOrder.data('sort').toUpperCase();\n\t\t\t\t}\n\t\t\t\twindow.location.href = url;\n\t\t\t});\n\t\t}\n\t}\n);\nYetiForce_ProductsSoldToRenew_Widget_Js('YetiForce_ServicesSoldToRenew_Widget_Js', {}, {});\nYetiForce_Bar_Widget_Js(\n\t'YetiForce_AllTimeControl_Widget_Js',\n\t{},\n\t{\n\t\tgetBasicOptions: function getBasicOptions() {\n\t\t\treturn {\n\t\t\t\tlegend: {\n\t\t\t\t\tdisplay: true\n\t\t\t\t},\n\t\t\t\tscales: {\n\t\t\t\t\tyAxes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstacked: true,\n\t\t\t\t\t\t\tticks: {\n\t\t\t\t\t\t\t\tcallback: function formatYAxisTick(value, index, values) {\n\t\t\t\t\t\t\t\t\treturn app.formatToHourText(value, 'short', false, false);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\txAxes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstacked: true,\n\t\t\t\t\t\t\tticks: {\n\t\t\t\t\t\t\t\tminRotation: 0\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\ttooltips: {\n\t\t\t\t\tcallbacks: {\n\t\t\t\t\t\tlabel: function (tooltipItem, data) {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\tdata.datasets[tooltipItem.datasetIndex].original_label + ': ' + app.formatToHourText(tooltipItem.yLabel)\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttitle: function (tooltipItems, data) {\n\t\t\t\t\t\t\treturn data.fullLabels[tooltipItems[0].index];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\tgetDatasetOptions: function getDatasetOptions(dataset, type, datasetIndex) {\n\t\t\treturn {\n\t\t\t\tdatalabels: {\n\t\t\t\t\tformatter: function datalabelsFormatter(value, context) {\n\t\t\t\t\t\treturn app.formatToHourText(value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t}\n);\nYetiForce_Bar_Widget_Js('YetiForce_LeadsBySource_Widget_Js', {}, {});\nYetiForce_Pie_Widget_Js('YetiForce_ClosedTicketsByPriority_Widget_Js', {}, {});\nYetiForce_Bar_Widget_Js('YetiForce_ClosedTicketsByUser_Widget_Js', {}, {});\nYetiForce_Bar_Widget_Js('YetiForce_OpenTickets_Widget_Js', {}, {});\nYetiForce_Bar_Widget_Js('YetiForce_AccountsByIndustry_Widget_Js', {}, {});\nYetiForce_Funnel_Widget_Js(\n\t'YetiForce_EstimatedvalueByStatus_Widget_Js',\n\t{},\n\t{\n\t\tgetBasicOptions: function getBasicOptions() {\n\t\t\treturn {\n\t\t\t\tsort: 'data-desc'\n\t\t\t};\n\t\t},\n\t\tgetPlugins: function getPlugins() {\n\t\t\treturn [];\n\t\t}\n\t}\n);\nYetiForce_Bar_Widget_Js('YetiForce_NotificationsBySender_Widget_Js', {}, {});\nYetiForce_Bar_Widget_Js('YetiForce_NotificationsByRecipient_Widget_Js', {}, {});\nYetiForce_Bar_Widget_Js(\n\t'YetiForce_TeamsEstimatedSales_Widget_Js',\n\t{},\n\t{\n\t\tgenerateChartData: function () {\n\t\t\tconst thisInstance = this,\n\t\t\t\tcontainer = this.getContainer(),\n\t\t\t\tjData = container.find('.widgetData').val(),\n\t\t\t\tdata = JSON.parse(jData);\n\t\t\tlet chartData = [[], [], [], []],\n\t\t\t\tyMaxValue,\n\t\t\t\tindex,\n\t\t\t\tparseData;\n\t\t\tif (data.hasOwnProperty('compare')) {\n\t\t\t\tfor (index in data) {\n\t\t\t\t\tparseData = thisInstance.parseChartData(data[index], chartData);\n\t\t\t\t\tchartData[0].push(parseData[0]);\n\t\t\t\t\tchartData[3].push(parseData[3]);\n\t\t\t\t\tchartData = [chartData[0], parseData[1], parseData[2], chartData[3], ['#CC6600', '#208CB3']];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tparseData = thisInstance.parseChartData(data, chartData);\n\t\t\t\tchartData = [[parseData[0]], parseData[1], parseData[2], [parseData[3]], ['#208CB3']];\n\t\t\t}\n\t\t\tyMaxValue = chartData[1];\n\t\t\tyMaxValue = yMaxValue + 2 + (yMaxValue / 100) * 25;\n\t\t\treturn {\n\t\t\t\tchartData: chartData[0],\n\t\t\t\tyMaxValue: yMaxValue,\n\t\t\t\tlabels: chartData[2],\n\t\t\t\tdata_labels: chartData[3],\n\t\t\t\tplacement: 'inside',\n\t\t\t\tlocation: 'n',\n\t\t\t\tcolors: chartData[4]\n\t\t\t};\n\t\t},\n\t\tparseChartData: function (data, chartDataGlobal) {\n\t\t\tvar chartData = [];\n\t\t\tvar xLabels = [];\n\t\t\tvar sum = 0;\n\t\t\tfor (var index in data) {\n\t\t\t\tvar row = data[index];\n\t\t\t\trow[0] = parseInt(row[0]);\n\t\t\t\tsum += row[0];\n\t\t\t\txLabels.push(app.getDecodedValue(row[1]));\n\t\t\t\tchartData.push(row[0]);\n\t\t\t\tif (parseInt(row[0]) > chartDataGlobal[1]) {\n\t\t\t\t\tchartDataGlobal[1] = parseInt(row[0]);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn [chartData, chartDataGlobal[1], xLabels, '&nbsp; \\u03A3 ' + sum + '&nbsp;'];\n\t\t},\n\t\tregisterSectionClick: function () {\n\t\t\tconst container = this.getContainer(),\n\t\t\t\tdata = container.find('.widgetData').val(),\n\t\t\t\tdataInfo = JSON.parse(data),\n\t\t\t\tcompare = dataInfo && dataInfo.hasOwnProperty('compare');\n\t\t\tlet url;\n\t\t\tthis.getContainer()\n\t\t\t\t.off('jqplotDataClick')\n\t\t\t\t.on('jqplotDataClick', function (ev, seriesIndex, pointIndex, args) {\n\t\t\t\t\tif (seriesIndex) {\n\t\t\t\t\t\turl = dataInfo['compare'][pointIndex][2];\n\t\t\t\t\t} else if (compare) {\n\t\t\t\t\t\turl = dataInfo[0][pointIndex][2];\n\t\t\t\t\t} else {\n\t\t\t\t\t\turl = dataInfo[pointIndex][2];\n\t\t\t\t\t}\n\t\t\t\t\twindow.location.href = url;\n\t\t\t\t});\n\t\t}\n\t}\n);\nYetiForce_TeamsEstimatedSales_Widget_Js('YetiForce_ActualSalesOfTeam_Widget_Js', {}, {});\nYetiForce_Widget_Js(\n\t'YetiForce_History_Widget_Js',\n\t{},\n\t{\n\t\tpostLoadWidget: function () {\n\t\t\tthis._super();\n\t\t\tthis.registerLoadMore();\n\t\t},\n\t\tpostRefreshWidget: function () {\n\t\t\tthis._super();\n\t\t\tthis.registerLoadMore();\n\t\t},\n\t\tregisterLoadMore: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar parent = thisInstance.getContainer();\n\t\t\tvar contentContainer = parent.find('.dashboardWidgetContent');\n\t\t\tvar loadMoreHandler = contentContainer.find('.load-more');\n\t\t\tloadMoreHandler.on('click', function () {\n\t\t\t\tvar parent = thisInstance.getContainer();\n\t\t\t\tvar element = parent.find('a[name=\"drefresh\"]');\n\t\t\t\tvar url = element.data('url');\n\t\t\t\tvar params = url;\n\t\t\t\tvar widgetFilters = parent.find('.widgetFilter');\n\t\t\t\tif (widgetFilters.length > 0) {\n\t\t\t\t\tparams = {\n\t\t\t\t\t\turl: url,\n\t\t\t\t\t\tdata: {}\n\t\t\t\t\t};\n\t\t\t\t\twidgetFilters.each(function (index, domElement) {\n\t\t\t\t\t\tvar widgetFilter = jQuery(domElement);\n\t\t\t\t\t\tvar filterName = widgetFilter.attr('name');\n\t\t\t\t\t\tvar filterValue = widgetFilter.val();\n\t\t\t\t\t\tparams.data[filterName] = filterValue;\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tvar filterData = thisInstance.getFilterData();\n\t\t\t\tif (!jQuery.isEmptyObject(filterData)) {\n\t\t\t\t\tif (typeof params == 'string') {\n\t\t\t\t\t\tparams = {\n\t\t\t\t\t\t\turl: url,\n\t\t\t\t\t\t\tdata: {}\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\tparams.data = jQuery.extend(params.data, thisInstance.getFilterData());\n\t\t\t\t}\n\n\t\t\t\t// Next page.\n\t\t\t\tparams.data['page'] = loadMoreHandler.data('nextpage');\n\t\t\t\tvar refreshContainer = parent.find('.dashboardWidgetContent');\n\t\t\t\trefreshContainer.progressIndicator();\n\t\t\t\tAppConnector.request(params)\n\t\t\t\t\t.done(function (data) {\n\t\t\t\t\t\trefreshContainer.progressIndicator({\n\t\t\t\t\t\t\tmode: 'hide'\n\t\t\t\t\t\t});\n\t\t\t\t\t\tloadMoreHandler.replaceWith(data);\n\t\t\t\t\t\tthisInstance.registerLoadMore();\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function () {\n\t\t\t\t\t\trefreshContainer.progressIndicator({\n\t\t\t\t\t\t\tmode: 'hide'\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n);\nYetiForce_Widget_Js(\n\t'YetiForce_MiniList_Widget_Js',\n\t{},\n\t{\n\t\tpostLoadWidget: function () {\n\t\t\tapp.hideModalWindow();\n\t\t\tthis.restrictContentDrag();\n\t\t\tthis.registerFilter();\n\t\t\tthis.registerFilterChangeEvent();\n\t\t\tthis.registerRecordsCount();\n\t\t},\n\t\tpostRefreshWidget: function () {\n\t\t\tthis.registerRecordsCount();\n\t\t}\n\t}\n);\nYetiForce_Widget_Js(\n\t'YetiForce_Notebook_Widget_Js',\n\t{},\n\t{\n\t\t// Override widget specific functions.\n\t\tpostLoadWidget: function () {\n\t\t\tthis.registerNotebookEvents();\n\t\t},\n\t\tregisterNotebookEvents: function () {\n\t\t\tthis.container.on('click', '.dashboard_notebookWidget_edit', () => {\n\t\t\t\tthis.editNotebookContent();\n\t\t\t});\n\t\t\tthis.container.on('click', '.dashboard_notebookWidget_save', () => {\n\t\t\t\tthis.saveNotebookContent();\n\t\t\t});\n\t\t},\n\t\teditNotebookContent: function () {\n\t\t\t$('.dashboard_notebookWidget_text', this.container).show();\n\t\t\t$('.dashboard_notebookWidget_view', this.container).hide();\n\t\t},\n\t\tsaveNotebookContent: function () {\n\t\t\tlet textarea = $('.dashboard_notebookWidget_textarea', this.container),\n\t\t\t\turl = this.container.data('url'),\n\t\t\t\tparams = url + '&content=true&mode=save&contents=' + encodeURIComponent(textarea.val()),\n\t\t\t\trefreshContainer = this.container.find('.dashboardWidgetContent');\n\t\t\trefreshContainer.progressIndicator();\n\t\t\tAppConnector.request(params).done(data => {\n\t\t\t\trefreshContainer.progressIndicator({\n\t\t\t\t\tmode: 'hide'\n\t\t\t\t});\n\t\t\t\t$('.dashboardWidgetContent', this.container).html(data);\n\t\t\t});\n\t\t}\n\t}\n);\nYetiForce_Widget_Js(\n\t'YetiForce_KpiBar_Widget_Js',\n\t{},\n\t{\n\t\tgenerateChartData: function () {\n\t\t\tvar container = this.getContainer();\n\t\t\tvar jData = container.find('.widgetData').val();\n\t\t\tvar data = JSON.parse(jData);\n\t\t\tvar chartData = [];\n\t\t\tvar xLabels = [];\n\t\t\tvar yMaxValue = 0;\n\t\t\treturn {\n\t\t\t\tchartData: [[[data['result'], data['all']]]],\n\t\t\t\tyMaxValue: data['maxValue'],\n\t\t\t\tlabels: ''\n\t\t\t};\n\t\t},\n\t\tloadChart: function () {\n\t\t\tvar data = this.generateChartData();\n\t\t\tthis.getChartContainer(false).jqplot(data['chartData'], {\n\t\t\t\tanimate: !$.jqplot.use_excanvas,\n\t\t\t\tseriesDefaults: {\n\t\t\t\t\trenderer: jQuery.jqplot.BarRenderer,\n\t\t\t\t\trendererOptions: {\n\t\t\t\t\t\tshowDataLabels: true,\n\t\t\t\t\t\tdataLabels: 'value',\n\t\t\t\t\t\tbarDirection: 'horizontal'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\taxes: {\n\t\t\t\t\txaxis: {\n\t\t\t\t\t\tmin: 0,\n\t\t\t\t\t\tmax: data['yMaxValue']\n\t\t\t\t\t},\n\t\t\t\t\tyaxis: {\n\t\t\t\t\t\trenderer: jQuery.jqplot.CategoryAxisRenderer\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n);\nYetiForce_Widget_Js(\n\t'YetiForce_ChartFilter_Widget_Js',\n\t{},\n\t{\n\t\tchartfilterInstance: false,\n\t\tinit: function (container, reload, widgetClassName) {\n\t\t\tthis.setContainer(jQuery(container));\n\t\t\tlet chartClassName = container.find('[name=\"typeChart\"]').val();\n\t\t\tconst stacked = !!Number(container.find('[name=\"stacked\"]').val());\n\t\t\tif (stacked) {\n\t\t\t\tchartClassName += 'Stacked';\n\t\t\t}\n\t\t\tthis.chartfilterInstance = YetiForce_Widget_Js.getInstance(container, chartClassName);\n\t\t\tif (this.chartfilterInstance) {\n\t\t\t\tconst filterIdsStr = container.find('[name=\"filterIds\"]').val();\n\t\t\t\tif (filterIdsStr) {\n\t\t\t\t\tthis.chartfilterInstance.filterIds = JSON.parse(filterIdsStr);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.registerRecordsCount();\n\t\t\tthis.registerCache(container);\n\t\t}\n\t}\n);\nYetiForce_Widget_Js(\n\t'YetiForce_Multifilter_Widget_Js',\n\t{},\n\t{\n\t\tmultifilterControlsView: false,\n\t\tmultifilterContentView: false,\n\t\tmultifilterSettingsView: false,\n\t\tregisterMultifilter() {\n\t\t\tlet selectValue = app.cacheGet('multifilterSelectValue', null),\n\t\t\t\tmultifilterSettings = this.getMultifilterSettings();\n\t\t\tif (null != selectValue && this.paramCache) {\n\t\t\t\tmultifilterSettings\n\t\t\t\t\t.find('.js-select')\n\t\t\t\t\t.val(selectValue)\n\t\t\t\t\t.trigger('change.select2');\n\t\t\t}\n\t\t\tthis.loadMultifilterData(true);\n\t\t\tmultifilterSettings.find('.js-select').on('select2:select', () => {\n\t\t\t\tthis.loadMultifilterData(true);\n\t\t\t\tif (this.paramCache) {\n\t\t\t\t\tapp.cacheSet('multifilterSelectValue', multifilterSettings.find('.js-select').val());\n\t\t\t\t}\n\t\t\t});\n\t\t\tmultifilterSettings.find('.js-select').on('select2:unselect', () => {\n\t\t\t\tthis.loadMultifilterData(false);\n\t\t\t\tif (this.paramCache) {\n\t\t\t\t\tapp.cacheSet('multifilterSelectValue', multifilterSettings.find('.js-select').val());\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.registerShowHideModuleSettings();\n\t\t},\n\t\tloadMultifilterData(select = true) {\n\t\t\tconst self = this;\n\t\t\tlet widgetId = self.getMultifilterControls().attr('data-widgetid'),\n\t\t\t\tmultifilterIds = self.getMultifilterSettings().find('.js-select option:selected'),\n\t\t\t\tparams = [];\n\t\t\tif (!select) {\n\t\t\t\tself.getMultifilterContent().html('');\n\t\t\t}\n\t\t\tmultifilterIds.each(function () {\n\t\t\t\tlet existFilter = self.getMultifilterContent().find('[data-id=\"' + $(this).val() + '\"]');\n\t\t\t\tlet thisInstance = $(this);\n\t\t\t\tif (0 < existFilter.length) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\tparams = {\n\t\t\t\t\tmodule: thisInstance.data('module'),\n\t\t\t\t\tmodulename: thisInstance.data('module'),\n\t\t\t\t\tview: 'ShowWidget',\n\t\t\t\t\tname: 'Multifilter',\n\t\t\t\t\tcontent: true,\n\t\t\t\t\twidget: true,\n\t\t\t\t\twidgetid: widgetId,\n\t\t\t\t\tfilterid: thisInstance.val()\n\t\t\t\t};\n\t\t\t\tself.loadListData(params);\n\t\t\t});\n\t\t},\n\t\tloadListData(params) {\n\t\t\tconst self = this;\n\t\t\tlet aDeferred = jQuery.Deferred(),\n\t\t\t\tmultiFilterContent = self.getMultifilterContent();\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\tif (\n\t\t\t\t\t\tself\n\t\t\t\t\t\t\t.getMultifilterSettings()\n\t\t\t\t\t\t\t.find('option[value=\"' + params.filterid + '\"]')\n\t\t\t\t\t\t\t.is(':selected') &&\n\t\t\t\t\t\t!multiFilterContent.find('.detailViewTable[data-id=\"' + params.filterid + '\"]').length\n\t\t\t\t\t) {\n\t\t\t\t\t\tself.registerRecordsCount(multiFilterContent.append(data).children('div:last-child'));\n\t\t\t\t\t\tself.registerShowHideBlocks();\n\t\t\t\t\t\taDeferred.resolve();\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.fail(function (error) {\n\t\t\t\t\taDeferred.reject();\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\tregisterShowHideModuleSettings() {\n\t\t\tthis.getMultifilterControls()\n\t\t\t\t.find('.js-widget-settings')\n\t\t\t\t.on('click', () => {\n\t\t\t\t\tthis.getMultifilterSettings().toggleClass('d-none');\n\t\t\t\t});\n\t\t},\n\t\tregisterShowHideBlocks() {\n\t\t\tlet detailContentsHolder = this.getMultifilterContent();\n\t\t\tdetailContentsHolder.find('.blockHeader').off('click');\n\t\t\tdetailContentsHolder.find('.blockHeader').click(function () {\n\t\t\t\tlet currentTarget = $(this)\n\t\t\t\t\t.find('.js-block-toggle')\n\t\t\t\t\t.not('.d-none'),\n\t\t\t\t\tclosestBlock = currentTarget.closest('.js-toggle-panel'),\n\t\t\t\t\tbodyContents = closestBlock.find('.blockContent'),\n\t\t\t\t\tdata = currentTarget.data();\n\t\t\t\tlet hideHandler = function () {\n\t\t\t\t\tbodyContents.addClass('d-none');\n\t\t\t\t};\n\t\t\t\tlet showHandler = function () {\n\t\t\t\t\tbodyContents.removeClass('d-none');\n\t\t\t\t};\n\t\t\t\tif ('show' == data.mode) {\n\t\t\t\t\thideHandler();\n\t\t\t\t\tcurrentTarget.addClass('d-none');\n\t\t\t\t\tclosestBlock.find('[data-mode=\"hide\"]').removeClass('d-none');\n\t\t\t\t} else {\n\t\t\t\t\tshowHandler();\n\t\t\t\t\tcurrentTarget.addClass('d-none');\n\t\t\t\t\tclosestBlock.find(\"[data-mode='show']\").removeClass('d-none');\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterRecordsCount(container) {\n\t\t\tlet url = container.data('url');\n\t\t\tAppConnector.request(url).done(function (data) {\n\t\t\t\tcontainer.find('.js-count').html(data.result.totalCount);\n\t\t\t});\n\t\t},\n\t\tgetMultifilterControls() {\n\t\t\tif (this.multifilterControlsView == false) {\n\t\t\t\tthis.multifilterControlsView = this.getContainer().find('.js-multifilterControls');\n\t\t\t}\n\t\t\treturn this.multifilterControlsView;\n\t\t},\n\t\tgetMultifilterContent() {\n\t\t\tif (this.multifilterContentView == false) {\n\t\t\t\tthis.multifilterContentView = this.getContainer().find('.js-multifilterContent');\n\t\t\t}\n\t\t\treturn this.multifilterContentView;\n\t\t},\n\t\tgetMultifilterSettings() {\n\t\t\tif (this.multifilterSettingsView == false) {\n\t\t\t\tthis.multifilterSettingsView = this.getContainer().find('.js-settings-widget');\n\t\t\t}\n\t\t\treturn this.multifilterSettingsView;\n\t\t},\n\t\tpostLoadWidget() {\n\t\t\tthis.registerMultifilter();\n\t\t},\n\t\trefreshWidget() {\n\t\t\tthis.loadMultifilterData(false);\n\t\t}\n\t}\n);\nYetiForce_Widget_Js(\n\t'YetiForce_UpcomingProjectTasks_Widget_Js',\n\t{},\n\t{\n\t\tpostLoadWidget: function () {\n\t\t\tthis._super();\n\t\t\tthis.registerListViewButton();\n\t\t},\n\t\tregisterListViewButton: function () {\n\t\t\tconst container = this.getContainer();\n\t\t\tcontainer.find('.goToListView').on('click', function () {\n\t\t\t\tlet url = 'index.php?module=ProjectTask&view=List&viewname=All';\n\t\t\t\turl += '&search_params=[[';\n\t\t\t\tlet owner = container.find('.widgetFilter.owner option:selected');\n\t\t\t\tif (owner.val() !== 'all') {\n\t\t\t\t\turl += '[\"assigned_user_id\",\"e\",\"' + owner.val() + '\"],';\n\t\t\t\t}\n\t\t\t\turl +=\n\t\t\t\t\t'[\"projecttaskstatus\",\"e\",\"' + encodeURIComponent(container.find('[name=\"status\"]').data('value')) + '\"]]]';\n\t\t\t\tapp.openUrl(url);\n\t\t\t});\n\t\t}\n\t}\n);\nYetiForce_UpcomingProjectTasks_Widget_Js('YetiForce_CompletedProjectTasks_Widget_Js', {}, {});\n"],"names":["jQuery","Class","container","widgetClassName","moduleName","app","getModuleName","moduleClass","window","fallbackClass","yetiClass","basicClass","YetiForce_Widget_Js","reload","$","setContainer","registerWidgetPostLoadEvent","registerWidgetPostRefreshEvent","registerCache","Number","this","getContainer","find","val","filterIds","length","widgetData","widgetDataEl","JSON","parse","value","index","values","String","isNaN","App","Fields","Double","formatToDisplay","context","chart","getDatasetMeta","datasetIndex","hidden","valueType","data","datasets","dataFormatted","dataIndex","tooltipItem","tooltipItems","titlesFormatted","labels","e","legendItem","type","chartInstance","config","Chart","defaults","legend","onClick","apply","global","generateLabels","areColorsFromDividingField","isMultiFilter","options","boxWidth","forEach","label","fillStyle","strokeStyle","datasetsMeta","Array","isArray","i","len","meta","push","getDatasetsMeta","dataset","metaData","_models","datalabels","display","iItem","lenItem","dataItem","$datalabels","_model","model","labelWidth","size","width","padding","borderWidth","labelHeight","height","barHeight","threshold","verticalBarLabelsThreshold","_view","positioner","barWidth","horizontalBarLabelsThreshold","shortenXTicks","scales","xAxes","axis","ticks","callback","substr","_updated","prop","_meta","hasOwnProperty","metaDataItem","_xScale","ctx","categoryWidth","categoryPercentage","measureText","shortened","minRotation","update","x","getPixelForValue","base","getBasePixel","barPercentage","yAxes","replacementStr","assignResult","splitted","split","errorLog","Error","finalFunction","reduce","previous","current","globalChartFunctions","call","bind","str","original","afterInit","result","propertyName","parseOptionsArray","parseOptionsObject","isReplacementString","getFunctionFromReplacementString","arr","map","item","_this","chartSubType","dividedPos","indexOf","chartData","notStackedChartSubType","removeStackedFromName","getGlobalDefaultChartsOptions","basic","plugins","element","CONFIG","dateFormat","useCache","plotContainer","get","recordsCountBtn","on","url","request","done","response","html","totalCount","addClass","attr","removeClass","getChartContainer","widget","closest","content","footer","adjustedHeight","innerHeight","outerHeight","css","scrollbar","showNewScrollbar","target","stopPropagation","jData","widgetContentsContainer","position","title","printContainer","imgEl","onload","outerWidth","printImage","htmlToImage","src","imageBase64","anchor","document","createElement","setAttribute","click","isEmptyData","positionNoDataMsg","loadChart","registerSectionClick","registerFilter","registerFilterChangeEvent","restrictContentDrag","registerContentAutoResize","registerWidgetSwitch","registerChangeSorting","registerLoadMore","registerHeaderButtons","loadScrollbar","currentElement","drefresh","replace","sortorder","icon","iconBase","base64Image","toBase64Image","image","Image","print","open","write","append","close","focus","header","downloadWidget","_this3","getChartImage","text","a","appendTo","remove","getInstance","quickCreateModule","thisInstance","setSortingButton","currentTarget","switchButtons","setUrlSwitch","aDeferred","Deferred","each","urlparams","switchUrl","resolve","reject","promise","parent","contentContainer","params","widgetFilters","domElement","widgetFilter","filterName","is","additionalWidgetFilters","refreshContainer","refreshContainerFooter","progressIndicator","paramCache","setFilterToCache","filter","clone","n","hasClass","splice","trigger","widgetPostRefereshEvent","fail","search","refreshBtn","originalUrl","selects","fieldInfo","Picklist","changeSelectElementView","containerCssClass","Date","register","registerRange","searchParams","searchInfo","searchContributorElement","fieldName","searchValue","join","trim","searchOperator","inArray","stringify","showSelect2ElementView","widgetPostLoadEvent","postLoadWidget","off","postRefreshWidget","pointer","canvas","getDataFromEvent","links","location","href","hide","delegateTarget","additionalFilter","babelHelpers.typeof","userId","name","cacheSet","event","elem","getWidgetData","getType","generateData","loadDatasetOptions","parseOptions","loadBasicOptions","loadPlugins","getContext","_this5","additionalFields","elements","getElementAtEvent","_index","_datasetIndex","eventData","formatTooltipTitles","formatTooltipLabels","mergeOptions","getBasicOptions","getDefaultBasicOptions","getSubType","_this6","getDatasetOptions","getDefaultDatasetOptions","mergeOptionsArray","getPlugins","getDefaultPlugins","defaultLabel","_this7","_this8","to","fromArray","from","key","_this9","mergeOptionsObject","undefined","toString","Vtiger_Widget_Js","YetiForce_Bar_Widget_Js","YetiForce_Horizontal_Widget_Js","YetiForce_Pie_Widget_Js","YetiForce_Donut_Widget_Js","YetiForce_Line_Widget_Js","YetiForce_LineStacked_Widget_Js","userDefaultTimeFormat","hourFormat","convertedFirstDay","firstDayOfWeekNo","defaultFirstHour","getMainParams","explodedTime","defaultDate","moment","format","add","getCalendarView","fullCalendar","vtranslate","view","date","className","count","prependTo","formatDate","toUpperCase","refreshWidget","allEvents","start_date","start","end_date","end","user","customFilter","time","events","owner","getUserDateFormat","calendarView","month","tag","loadCalendarData","getMonthName","registerCalendar","registerChangeView","_super","registerActivityChange","registerListViewButton","modalView","showModalWindow","status","activitiesStatus","encodeURIComponent","YetiForce_CalendarActivities_Widget_Js","registerAction","orderBy","sortOrder","YetiForce_ProductsSoldToRenew_Widget_Js","formatToHourText","original_label","yLabel","fullLabels","YetiForce_Funnel_Widget_Js","yMaxValue","parseData","parseChartData","chartDataGlobal","xLabels","sum","row","parseInt","getDecodedValue","dataInfo","compare","ev","seriesIndex","pointIndex","args","YetiForce_TeamsEstimatedSales_Widget_Js","loadMoreHandler","filterValue","filterData","getFilterData","isEmptyObject","extend","replaceWith","hideModalWindow","registerRecordsCount","registerNotebookEvents","editNotebookContent","saveNotebookContent","show","textarea","_this12","generateChartData","jqplot","use_excanvas","BarRenderer","CategoryAxisRenderer","chartClassName","chartfilterInstance","filterIdsStr","selectValue","cacheGet","multifilterSettings","getMultifilterSettings","loadMultifilterData","_this13","registerShowHideModuleSettings","select","self","widgetId","getMultifilterControls","multifilterIds","getMultifilterContent","existFilter","loadListData","multiFilterContent","filterid","children","registerShowHideBlocks","error","toggleClass","detailContentsHolder","not","closestBlock","bodyContents","mode","multifilterControlsView","multifilterContentView","multifilterSettingsView","registerMultifilter","openUrl","YetiForce_UpcomingProjectTasks_Widget_Js"],"mappings":"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gCACA,mCAGD,OACA,CACN,OACQ,WACI,eACG,cACA,YACH,4CAIN,CACN,OACQ,WACI,eACG,WACH,gDAMN,YACI,MACL,MACC,UAEA,wBACU,8BACJ,oCACA,eACC,SACN,eACD,mBACI,wCACF,wCAGF,CACR,YACa,mCAEb,YACa,+EAIO,OACd,sBACe,QACd,UACG,UAEF,SACE,sCAEA,MACH,kBACK,OACH,gCACA,mCAGD,OACA,CACN,UACU,QACF,WACI,eACG,cACA,YACH,4CAIN,CACN,UACU,QACF,WACI,eACG,WACH,gDAMN,YACI,MACL,MACC,UAEA,wBACU,8BACJ,oCACA,eACC,SACN,eACD,mBACI,wCACF,wCAGF,CACR,YACa,mCAEb,YACa,+DAIT,OACE,sBACe,QACd,UACG,UAEF,SACE,sCAEA,MACH,kBACK,OACH,gCACA,mCAGD,OACA,CACN,OACQ,WACI,eACG,cACA,YACH,+CACG,WAIT,CACN,OACQ,WACI,eACG,WACH,gDAMN,OACF,aACM,MACL,MACC,UAEA,wBACU,8BACJ,oCACA,eACC,SACN,eACD,mBACI,wCACF,wCAGF,CACR,YACa,iDAIF,OACL,sBACe,QACd,UACG,UAEF,SACE,sCAEA,MACH,kBACK,OACH,gCACA,mCAGD,OACA,CACN,OACQ,WACI,eACG,cACA,YACH,+CACG,WAIT,CACN,UACU,QACF,WACI,eACG,WACH,gDAMN,OACF,aACM,MACL,MACC,UAEA,wBACU,8BACJ,oCACA,eACC,SACN,eACD,mBACI,wCACF,wCAGF,CACR,YACa,+CAIJ,OACH,sBACe,QACd,UACG,UAEF,SACE,sCAEA,MACH,kBACK,OACH,gCACA,mCAGD,OACA,CACN,OACQ,WACI,eACG,cACA,YACH,+CACG,WAIT,CACN,OACQ,WACI,eACG,WACH,gDAMN,aACK,QACP,aACM,MACL,MACC,UAEA,wBACU,8BACJ,oCACA,eACC,SACN,eACD,mBACI,wCACF,wCAGF,CACR,YACa,sDAIG,OACV,sBACe,QACd,UACG,UAEF,SACE,sCAEA,MACH,kBACK,OACH,gCACA,mC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"}