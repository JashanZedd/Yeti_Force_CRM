{"version":3,"file":"AdvanceSearch.min.js","sources":["AdvanceSearch.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n * Contributor(s): YetiForce S.A.\n *************************************************************************************/\n'use strict';\n\nVtiger_BasicSearch_Js(\n\t'Vtiger_AdvanceSearch_Js',\n\t{\n\t\t//cache will store the search data\n\t\tcache: {}\n\t},\n\t{\n\t\t//container which will store the search elements\n\t\telementContainer: false,\n\t\t//instance which represents advance filter\n\t\tadvanceFilter: false,\n\t\t//states whether the validation is registred for filter elements\n\t\tfilterValidationRegistered: false,\n\t\t//contains the filter form element\n\t\tfilterForm: false,\n\t\t//container which will store the parent elements\n\t\tparentContainer: false,\n\t\t/**\n\t\t * Function which will give the container\n\t\t */\n\t\tgetContainer: function () {\n\t\t\treturn this.elementContainer;\n\t\t},\n\t\t/**\n\t\t *Function which is used to set the continaer\n\t\t *@params : container - element which represent the container\n\t\t *@return current instance\n\t\t */\n\t\tsetContainer: function (container) {\n\t\t\tthis.elementContainer = container;\n\t\t\treturn this;\n\t\t},\n\t\t/**\n\t\t * Function which will give the parent container\n\t\t */\n\t\tgetParentContainer: function () {\n\t\t\treturn this.parentContainer;\n\t\t},\n\t\t/**\n\t\t *Function which is used to set the continaer\n\t\t *@params : container - element which represent the container\n\t\t *@return current instance\n\t\t */\n\t\tsetParentContainer: function (container) {\n\t\t\tthis.setMainContainer(container);\n\t\t\tthis.parentContainer = container;\n\t\t\treturn this;\n\t\t},\n\t\tgetFilterForm: function () {\n\t\t\treturn $('form[name=\"advanceFilterForm\"]', this.getContainer());\n\t\t},\n\t\t/**\n\t\t * Function used to get the advance search ui\n\t\t * @return : deferred promise\n\t\t */\n\t\tgetAdvanceSearch: function () {\n\t\t\tvar aDeferred = $.Deferred();\n\t\t\tvar searchModule = this.getSearchModule();\n\t\t\t//Exists in the cache\n\t\t\tif (searchModule in Vtiger_AdvanceSearch_Js.cache) {\n\t\t\t\taDeferred.resolve(Vtiger_AdvanceSearch_Js.cache[searchModule]);\n\t\t\t\treturn aDeferred.promise();\n\t\t\t}\n\t\t\tvar searchableModulesParams = {\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tsearchModule: searchModule,\n\t\t\t\tview: 'BasicAjax',\n\t\t\t\tmode: 'showAdvancedSearch'\n\t\t\t};\n\t\t\tif (app.getParentModuleName()) {\n\t\t\t\tsearchableModulesParams.parent = app.getParentModuleName();\n\t\t\t}\n\t\t\tvar progressInstance = $.progressIndicator();\n\t\t\tAppConnector.request(searchableModulesParams)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\tprogressInstance.hide();\n\t\t\t\t\t//add to cache\n\t\t\t\t\tVtiger_AdvanceSearch_Js.cache[searchModule] = data;\n\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t})\n\t\t\t\t.fail(function (error, err) {\n\t\t\t\t\taDeferred.reject(error);\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/**\n\t\t * Function which intializes search\n\t\t */\n\t\tinitiateSearch: function () {\n\t\t\tvar aDeferred = $.Deferred();\n\t\t\tvar thisInstance = this;\n\t\t\tvar postLoad = function (uiData) {\n\t\t\t\tthisInstance.setContainer($('#advanceSearchContainer'));\n\t\t\t\tthisInstance.filterValidationRegistered = false;\n\t\t\t\tthisInstance.registerEvents();\n\t\t\t\tthisInstance.advanceFilter = new Vtiger_ConditionBuilder_Js(\n\t\t\t\t\tthisInstance.getContainer().find('.js-condition-builder'),\n\t\t\t\t\tthisInstance.getSearchModule()\n\t\t\t\t);\n\t\t\t\tthisInstance.advanceFilter.registerEvents();\n\t\t\t\taDeferred.resolve();\n\t\t\t};\n\t\t\tthisInstance\n\t\t\t\t.getAdvanceSearch()\n\t\t\t\t.done(function (data) {\n\t\t\t\t\tvar params = {};\n\t\t\t\t\tparams.data = data;\n\t\t\t\t\tparams.cb = postLoad;\n\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\tapp.showModalWindow(params);\n\t\t\t\t})\n\t\t\t\t.fail(function (error) {\n\t\t\t\t\taDeferred.reject();\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/**\n\t\t * Function which invokes search\n\t\t */\n\t\tsearch: function () {\n\t\t\tvar conditionValues = this.advanceFilter.getConditions();\n\t\t\tvar module = this.getSearchModule();\n\t\t\treturn this._search({\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tsearchModule: module,\n\t\t\t\tadvfilterlist: JSON.stringify(conditionValues)\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function which shows search results in proper manner\n\t\t * @params : data to be shown\n\t\t */\n\t\tshowSearchResults: function (data) {\n\t\t\tvar aDeferred = $.Deferred();\n\t\t\tvar postLoad = function (data) {\n\t\t\t\t//app.showScrollBar($(data).find('.contents'));\n\t\t\t\taDeferred.resolve(data);\n\t\t\t};\n\t\t\tvar html =\n\t\t\t\t'<div class=\"row\">' +\n\t\t\t\t'<span class=\"col-md-4 searchHolder\"></span>' +\n\t\t\t\t'<span class=\"col-md-8 filterHolder marginLeftZero d-none\"></span>' +\n\t\t\t\t'</div>';\n\t\t\tvar jQhtml = $(html);\n\t\t\t$('.searchHolder', jQhtml).html(data);\n\n\t\t\tdata = jQhtml;\n\n\t\t\tvar params = {};\n\t\t\tparams.data = data;\n\t\t\tparams.cb = postLoad;\n\t\t\tapp.showModalWindow(params);\n\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/**\n\t\t * Function which will save the filter\n\t\t */\n\t\tsaveFilter: function (params) {\n\t\t\tvar aDeferred = $.Deferred();\n\t\t\tparams.source_module = this.getSearchModule();\n\t\t\tparams.status = 1;\n\t\t\tparams.advfilterlist = JSON.stringify(this.advanceFilter.getConditions());\n\t\t\tparams.module = 'CustomView';\n\t\t\tparams.action = 'Save';\n\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\tif (!data.success) {\n\t\t\t\t\tvar params = {\n\t\t\t\t\t\ttitle: app.vtranslate('JS_MESSAGE'),\n\t\t\t\t\t\ttext: data.error.message,\n\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t};\n\t\t\t\t\tapp.showNotify(params);\n\t\t\t\t}\n\t\t\t\taDeferred.resolve(data);\n\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/**\n\t\t * Function which will save the filter and show the list view of new custom view\n\t\t */\n\t\tsaveAndViewFilter: function (params) {\n\t\t\tthis.saveFilter(params).done(\n\t\t\t\tfunction (response) {\n\t\t\t\t\tvar url = response['result']['listviewurl'];\n\t\t\t\t\twindow.location.href = url;\n\t\t\t\t},\n\t\t\t\tfunction (error) {}\n\t\t\t);\n\t\t},\n\t\t/**\n\t\t * Function which specify whether the search component and filter component both are shown\n\t\t */\n\t\tisSearchAndFilterComponentsShown: function () {\n\t\t\tvar modalData = $('#' + Window.lastModalId);\n\t\t\tvar filterComponent = $('.filterHolder', modalData).find('#advanceSearchContainer');\n\t\t\tif (filterComponent.length <= 0) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\t\t/**\n\t\t * Function which will perform search and other operaions\n\t\t */\n\t\tperformSearch: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar isSearchResultsAndFilterShown = this.isSearchAndFilterComponentsShown();\n\t\t\tthis.search().done(function (data) {\n\t\t\t\tthisInstance.setContainer(thisInstance.getContainer().detach());\n\t\t\t\tthisInstance.showSearchResults(data).done(function (modalBlock) {\n\t\t\t\t\tthisInstance.registerShowFiler();\n\t\t\t\t\t//if the filter already shown , show again\n\t\t\t\t\tif (isSearchResultsAndFilterShown) {\n\t\t\t\t\t\tthisInstance.showFilter();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function which will show the advance filter next to search results\n\t\t */\n\t\tshowFilter: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar callback = function () {\n\t\t\t\tapp.showModalWindow(thisInstance.getContainer());\n\t\t\t};\n\t\t\tapp.hideModalWindow(callback);\n\t\t},\n\t\t/**\n\t\t * Function which will perform the validation for the advance filter fields\n\t\t * @return : deferred promise - resolves if validation succeded if not failure\n\t\t */\n\t\tperformValidation: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tthis.formValidationDeferred = $.Deferred();\n\t\t\tvar controlForm = this.getFilterForm();\n\n\t\t\tvar validationDone = function (form, status) {\n\t\t\t\tif (status) {\n\t\t\t\t\tthisInstance.formValidationDeferred.resolve();\n\t\t\t\t} else {\n\t\t\t\t\tthisInstance.formValidationDeferred.reject();\n\t\t\t\t}\n\t\t\t};\n\t\t\t//To perform validation registration only once\n\t\t\tif (!this.filterValidationRegistered) {\n\t\t\t\tthis.filterValidationRegistered = true;\n\t\t\t\tcontrolForm.validationEngine({\n\t\t\t\t\tonValidationComplete: validationDone\n\t\t\t\t});\n\t\t\t}\n\t\t\t//This will trigger the validation\n\t\t\tcontrolForm.submit();\n\t\t\treturn this.formValidationDeferred.promise();\n\t\t},\n\t\t/**\n\t\t * Function which will register the show filer invocation\n\t\t */\n\t\tregisterShowFiler: function () {\n\t\t\tvar thisInstance = this;\n\t\t\t$('#showFilter').on('click', function (e) {\n\t\t\t\tthisInstance.showFilter();\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function which will register events\n\t\t */\n\t\tregisterEvents: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar container = this.getContainer();\n\n\t\t\tcontainer.on('change', '#searchModuleList', function (e) {\n\t\t\t\tvar selectElement = $(e.currentTarget);\n\t\t\t\tvar selectedModuleName = selectElement.val();\n\t\t\t\tthisInstance.setSearchModule(selectedModuleName);\n\t\t\t\tthisInstance.initiateSearch();\n\t\t\t});\n\n\t\t\t$('#advanceSearchButton').on('click', function (e) {\n\t\t\t\tvar searchModule = thisInstance.getSearchModule();\n\t\t\t\t//If no module is selected\n\t\t\t\tif (searchModule.length <= 0) {\n\t\t\t\t\tapp\n\t\t\t\t\t\t.getChosenElementFromSelect($('#searchModuleList'))\n\t\t\t\t\t\t.validationEngine('showPrompt', app.vtranslate('JS_SELECT_MODULE'), 'error', 'topRight', true);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthisInstance\n\t\t\t\t\t.performValidation()\n\t\t\t\t\t.done(function () {\n\t\t\t\t\t\tthisInstance.performSearch();\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function () {});\n\t\t\t});\n\n\t\t\t$('#advanceIntiateSave').on('click', function (e) {\n\t\t\t\tvar currentElement = $(e.currentTarget);\n\t\t\t\tcurrentElement.addClass('d-none');\n\t\t\t\tvar actionsContainer = currentElement.closest('.actions');\n\t\t\t\t$('.js-name-filter', actionsContainer).removeClass('d-none').focus();\n\t\t\t\t$('#advanceSave').removeClass('d-none');\n\t\t\t});\n\n\t\t\t$('#advanceSave').on('click', function (e) {\n\t\t\t\tvar actionsContainer = $(e.currentTarget).closest('.actions');\n\t\t\t\tvar filterNameField = $('input[name=\"viewname\"]', actionsContainer);\n\t\t\t\tvar value = filterNameField.val();\n\t\t\t\tif (value.length <= 0) {\n\t\t\t\t\tfilterNameField.validationEngine(\n\t\t\t\t\t\t'showPrompt',\n\t\t\t\t\t\tapp.vtranslate('JS_REQUIRED_FIELD'),\n\t\t\t\t\t\t'error',\n\t\t\t\t\t\t'topRight',\n\t\t\t\t\t\ttrue\n\t\t\t\t\t);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar searchModule = thisInstance.getSearchModule();\n\t\t\t\t//If no module is selected\n\t\t\t\tif (searchModule.length <= 0) {\n\t\t\t\t\tapp\n\t\t\t\t\t\t.getChosenElementFromSelect($('#searchModuleList'))\n\t\t\t\t\t\t.validationEngine('showPrompt', app.vtranslate('JS_SELECT_MODULE'), 'error', 'topRight', true);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthisInstance.performValidation().done(function () {\n\t\t\t\t\tvar params = {};\n\t\t\t\t\tparams.viewname = value;\n\t\t\t\t\tthisInstance.saveAndViewFilter(params);\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t//DO nothing on submit of filter form\n\t\t\tthis.getFilterForm().on('submit', function (e) {\n\t\t\t\te.preventDefault();\n\t\t\t});\n\n\t\t\t//To set the search module with the currently selected values.\n\t\t\tthis.setSearchModule($('#searchModuleList').val());\n\t\t}\n\t}\n);\n"],"names":["Vtiger_BasicSearch_Js","cache","elementContainer","advanceFilter","filterValidationRegistered","filterForm","parentContainer","getContainer","setContainer","container","getParentContainer","setParentContainer","setMainContainer","getFilterForm","$","getAdvanceSearch","aDeferred","Deferred","searchModule","getSearchModule","resolve","Vtiger_AdvanceSearch_Js","promise","searchableModulesParams","module","app","getModuleName","view","mode","getParentModuleName","parent","progressIndicator","request","done","data","progressInstance","hide","fail","error","reject","initiateSearch","thisInstance","postLoad","registerEvents","find","params","cb","hideModalWindow","showModalWindow","search","getConditions","_search","advfilterlist","JSON","stringify","conditionValues","showSearchResults","jQhtml","html","saveFilter","source_module","status","action","AppConnector","success","title","vtranslate","text","message","type","showNotify","saveAndViewFilter","response","url","window","location","href","isSearchAndFilterComponentsShown","modalData","Window","lastModalId","filterComponent","length","performSearch","isSearchResultsAndFilterShown","detach","modalBlock","registerShowFiler","showFilter","callback","performValidation","formValidationDeferred","validationDone","form","controlForm","validationEngine","onValidationComplete","submit","on","e","selectElement","currentTarget","selectedModuleName","val","setSearchModule","getChosenElementFromSelect","currentElement","addClass","closest","actionsContainer","removeClass","focus","filterNameField","value","viewname","preventDefault"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uFACA,YAAY,CAEZA,qBAAqB,CACpB,yBAAyB,CACzB;AAECC,KAAK,CAAE,EACR,CAAC,CACD;AAECC,gBAAgB,GAAO;AAEvBC,aAAa,GAAO;AAEpBC,0BAA0B,GAAO;AAEjCC,UAAU,GAAO;AAEjBC,eAAe,GAAO;AAExB;AACA,KACEC,YAAY,CAAE,SAAY,YAAA,EAAA,CACzB,OAAW,IAAA,CAACL,gBACb,CAAC;AAEH;AACA;AACA;AACA,KACEM,YAAY,CAAE,SAAUC,YAAAA,CAAAA,SAAS,CAAE,CAElC,OADI,IAAA,CAACP,gBAAgB,CAAGO,SAAS,CAC1B,IACR,CAAC;AAEH;AACA,KACEC,kBAAkB,CAAE,SAAY,kBAAA,EAAA,CAC/B,OAAW,IAAA,CAACJ,eACb,CAAC;AAEH;AACA;AACA;AACA,KACEK,kBAAkB,CAAE,SAAA,kBAAA,CAAUF,SAAS,CAAE,CAGxC,OAFA,IAAI,CAACG,gBAAgB,CAACH,SAAS,CAAC,CAChC,IAAI,CAACH,eAAe,CAAGG,SAAS,CACzB,IACR,CAAC,CACDI,aAAa,CAAE,SAAA,aAAA,EAAY,CAC1B,OAAOC,CAAC,CAAC,kCAAgC,CAAE,IAAI,CAACP,YAAY,EAAE,CAC/D,CAAC;AAEH;AACA;AACA,KACEQ,gBAAgB,CAAE,SAAA,gBAAA,EAAY,CACzBC,IAAAA,SAAS,CAAGF,CAAC,CAACG,QAAQ,EAAE,CACxBC,YAAY,CAAG,IAAI,CAACC,eAAe,EAAE,CACzC;AACA,GAAID,YAAY,IAA2B,uBAAA,CAACjB,KAAK,CAEhD,OADAe,SAAS,CAACI,OAAO,CAACC,uBAAuB,CAACpB,KAAK,CAACiB,YAAY,CAAC,CAAC,CACvDF,SAAS,CAACM,OAAO,EAAE,CAE3B,IAAIC,uBAAuB,CAAG,CAC7BC,MAAM,CAAEC,GAAG,CAACC,aAAa,EAAE,CAC3BR,YAAY,CAAEA,YAAY,CAC1BS,IAAI,CAAE,WAAW,CACjBC,IAAI,CAAE,oBACP,CAAC,CACGH,GAAG,CAACI,mBAAmB,EAAE,GAC5BN,uBAAuB,CAACO,MAAM,CAAGL,GAAG,CAACI,mBAAmB,EAAE,CAE3D,CAAA,IAAoB,gBAAA,CAAGf,CAAC,CAACiB,iBAAiB,EAAE,CAW5C,OAVY,YAAA,CAACC,OAAO,CAACT,uBAAuB,CAAC,CAC3CU,IAAI,CAAC,SAAUC,IAAI,CAAE,CACrBC,gBAAgB,CAACC,IAAI,EAAE,CAEvBf,uBAAuB,CAACpB,KAAK,CAACiB,YAAY,CAAC,CAAGgB,IAAI,CAClDlB,SAAS,CAACI,OAAO,CAACc,IAAI,EACvB,CAAC,CAAC,CACDG,IAAI,CAAC,SAAUC,KAAK,CAAO,CAC3BtB,SAAS,CAACuB,MAAM,CAACD,KAAK,EACvB,CAAC,CAAC,CACItB,SAAS,CAACM,OAAO,EACzB,CAAC;AAEH;AACA,KACEkB,cAAc,CAAE,SAAY,cAAA,EAAA,CAAA,IACd,SAAA,CAAG1B,CAAC,CAACG,QAAQ,EAAE,CACxBwB,YAAY,CAAG,IAAI,CACnBC,QAAQ,CAAG,UAAkB,CAChCD,YAAY,CAACjC,YAAY,CAACM,CAAC,CAAC,yBAAyB,CAAC,CAAC,CACvD2B,YAAY,CAACrC,0BAA0B,CAAQ,CAAA,CAAA,CAC/CqC,YAAY,CAACE,cAAc,EAAE,CAC7BF,YAAY,CAACtC,aAAa,CAAG,IAA8B,0BAAA,CAC1DsC,YAAY,CAAClC,YAAY,EAAE,CAACqC,IAAI,CAAC,uBAAuB,CAAC,CACzDH,YAAY,CAACtB,eAAe,EAAE,CAC9B,CACDsB,YAAY,CAACtC,aAAa,CAACwC,cAAc,EAAE,CAC3C3B,SAAS,CAACI,OAAO,GAClB,CAAC,CAaD,OAZAqB,YAAY,CACV1B,gBAAgB,EAAE,CAClBkB,IAAI,CAAC,SAAUC,IAAI,CAAE,CACrB,IAAU,MAAA,CAAG,EAAE,CACfW,MAAM,CAACX,IAAI,CAAGA,IAAI,CAClBW,MAAM,CAACC,EAAE,CAAGJ,QAAQ,CACpBjB,GAAG,CAACsB,eAAe,EAAE,CACrBtB,GAAG,CAACuB,eAAe,CAACH,MAAM,EAC3B,CAAC,CAAC,CACDR,IAAI,CAAC,UAAiB,CACtBrB,SAAS,CAACuB,MAAM,GACjB,CAAC,CAAC,CACIvB,SAAS,CAACM,OAAO,EACzB,CAAC;AAEH;AACA,KACE2B,MAAM,CAAE,SAAY,MAAA,EAAA,CAAA,mBACA,CAAG,IAAI,CAAC9C,aAAa,CAAC+C,aAAa,EAAE,CACpD1B,MAAM,CAAG,IAAI,CAACL,eAAe,EAAE,CACnC,OAAO,IAAI,CAACgC,OAAO,CAAC,CACnB3B,MAAM,CAAEC,GAAG,CAACC,aAAa,EAAE,CAC3BR,YAAY,CAAEM,MAAM,CACpB4B,aAAa,CAAEC,IAAI,CAACC,SAAS,CAACC,eAAe,CAC9C,CAAC,CACF,CAAC;AAEH;AACA;AACA,KACEC,iBAAiB,CAAE,SAAA,iBAAA,CAAUtB,IAAI,CAAE,KACrB,SAAA,CAAGpB,CAAC,CAACG,QAAQ,EAAE,CACxByB,QAAQ,CAAG,iBAAH,CAAaR,IAAI,CAAE,CAE9BlB,SAAS,CAACI,OAAO,CAACc,IAAI,EACvB,CAAC,CAMGuB,MAAM,CAAG3C,CAAC,CAAM,2IAAA,CAAA,CACpBA,CAAC,CAAC,eAAe,CAAE2C,MAAM,CAAC,CAACC,IAAI,CAACxB,IAAI,CAAC,CAErCA,IAAI,CAAGuB,MAAM,CAEb,IAAIZ,MAAM,CAAG,EAAE,CAKf,OAJAA,MAAM,CAACX,IAAI,CAAGA,IAAI,CAClBW,MAAM,CAACC,EAAE,CAAGJ,QAAQ,CACpBjB,GAAG,CAACuB,eAAe,CAACH,MAAM,CAAC,CAEpB7B,SAAS,CAACM,OAAO,EACzB,CAAC;AAEH;AACA,KACEqC,UAAU,CAAE,SAAUd,UAAAA,CAAAA,MAAM,CAAE,CAC7B,IAAI7B,SAAS,CAAGF,CAAC,CAACG,QAAQ,EAAE,CAiB5B,OAhBA4B,MAAM,CAACe,aAAa,CAAG,IAAI,CAACzC,eAAe,EAAE,CAC7C0B,MAAM,CAACgB,MAAM,CAAG,CAAC,CACjBhB,MAAM,CAACO,aAAa,CAAGC,IAAI,CAACC,SAAS,CAAC,IAAI,CAACnD,aAAa,CAAC+C,aAAa,EAAE,CAAC,CACzEL,MAAM,CAACrB,MAAM,CAAG,YAAY,CAC5BqB,MAAM,CAACiB,MAAM,CAAG,MAAM,CACtBC,YAAY,CAAC/B,OAAO,CAACa,MAAM,CAAC,CAACZ,IAAI,CAAC,SAAUC,IAAI,CAAE,CACjD,GAAI,CAACA,IAAI,CAAC8B,OAAO,CAAE,CAClB,IAAInB,MAAM,CAAG,CACZoB,KAAK,CAAExC,GAAG,CAACyC,UAAU,CAAC,YAAY,CAAC,CACnCC,IAAI,CAAEjC,IAAI,CAACI,KAAK,CAAC8B,OAAO,CACxBC,IAAI,CAAE,OACP,CAAC,CACD5C,GAAG,CAAC6C,UAAU,CAACzB,MAAM,EACtB,CACA7B,SAAS,CAACI,OAAO,CAACc,IAAI,EACvB,CAAC,CAAC,CACKlB,SAAS,CAACM,OAAO,EACzB,CAAC;AAEH;AACA,KACEiD,iBAAiB,CAAE,SAAA,iBAAA,CAAU1B,MAAM,CAAE,CACpC,IAAI,CAACc,UAAU,CAACd,MAAM,CAAC,CAACZ,IAAI,CAC3B,SAAUuC,QAAQ,CAAE,CACnB,IAAIC,GAAG,CAAGD,QAAQ,OAAU,CAAe,WAAA,CAC3CE,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAGH,IACxB,CAAC,CACD,SAAUnC,KAAK,CAAE,EAAE,EAErB,CAAC;AAEH;AACA,KACEuC,gCAAgC,CAAE,SAAA,gCAAA,EAAY,CACzCC,IAAAA,SAAS,CAAGhE,CAAC,CAAC,GAAG,CAAGiE,MAAM,CAACC,WAAW,CAAC,CACvCC,eAAe,CAAGnE,CAAC,CAAC,eAAe,CAAEgE,SAAS,CAAC,CAAClC,IAAI,CAAC,yBAAyB,CAAC,CACrD,OAAA,EAAA,CAAC,EAA3BqC,eAAe,CAACC,MAAW,CAIhC,CAAC;AAEH;AACA,KACEC,aAAa,CAAE,SAAY,aAAA,EAAA,CAAA,gBACV,CAAG,IAAI,CACnBC,6BAA6B,CAAG,IAAI,CAACP,gCAAgC,EAAE,CAC3E,IAAI,CAAC5B,MAAM,EAAE,CAAChB,IAAI,CAAC,SAAUC,IAAI,CAAE,CAClCO,YAAY,CAACjC,YAAY,CAACiC,YAAY,CAAClC,YAAY,EAAE,CAAC8E,MAAM,EAAE,CAAC,CAC/D5C,YAAY,CAACe,iBAAiB,CAACtB,IAAI,CAAC,CAACD,IAAI,CAAC,SAAUqD,UAAU,CAAE,CAC/D7C,YAAY,CAAC8C,iBAAiB,EAAE,CAE5BH,6BAA6B,EAChC3C,YAAY,CAAC+C,UAAU,GAEzB,CAAC,EACF,CAAC,EACF,CAAC;AAEH;AACA,KACEA,UAAU,CAAE,SAAY,UAAA,EAAA,CAAA,gBACP,CAAG,IAAI,CACnBC,QAAQ,CAAG,SAAH,QAAA,EAAe,CAC1BhE,GAAG,CAACuB,eAAe,CAACP,YAAY,CAAClC,YAAY,EAAE,EAChD,CAAC,CACDkB,GAAG,CAACsB,eAAe,CAAC0C,QAAQ,EAC7B,CAAC;AAEH;AACA;AACA,KACEC,iBAAiB,CAAE,SAAA,iBAAA,EAAY,CAC9B,IAAIjD,YAAY,CAAG,IAAI,CACvB,IAAI,CAACkD,sBAAsB,CAAG7E,CAAC,CAACG,QAAQ,EAAE,KAC3B,WAAA,CAAG,IAAI,CAACJ,aAAa,EAAE,CAElC+E,cAAc,CAAG,uBAAH,CAAaC,IAAI,CAAEhC,MAAM,CAAE,CACxCA,MAAM,CACTpB,YAAY,CAACkD,sBAAsB,CAACvE,OAAO,EAAE,CAE7CqB,YAAY,CAACkD,sBAAsB,CAACpD,MAAM,GAE5C,CAAC,CAUD,OARS,IAAA,CAACnC,0BAA0B,GACnC,IAAI,CAACA,0BAA0B,CAAA,CAAA,CAAO,CACtC0F,WAAW,CAACC,gBAAgB,CAAC,CAC5BC,oBAAoB,CAAEJ,cACvB,CAAC,CAAC,EAGHE,WAAW,CAACG,MAAM,EAAE,CACb,IAAI,CAACN,sBAAsB,CAACrE,OAAO,EAC3C,CAAC;AAEH;AACA,KACEiE,iBAAiB,CAAE,SAAY,iBAAA,EAAA,CAC9B,IAAI9C,YAAY,CAAG,IAAI,CACvB3B,CAAC,CAAC,aAAa,CAAC,CAACoF,EAAE,CAAC,OAAO,CAAE,SAAUC,CAAC,CAAE,CACzC1D,YAAY,CAAC+C,UAAU,GACxB,CAAC,EACF,CAAC;AAEH;AACA,KACE7C,cAAc,CAAE,SAAY,cAAA,EAAA,CAAA,gBACX,CAAG,IAAI,CACnBlC,SAAS,CAAG,IAAI,CAACF,YAAY,EAAE,CAiEnC;AAKA;AApEAE,SAAS,CAACyF,EAAE,CAAC,QAAQ,CAAE,mBAAmB,CAAE,SAAUC,CAAC,CAAE,CACpDC,IAAAA,aAAa,CAAGtF,CAAC,CAACqF,CAAC,CAACE,aAAa,CAAC,CAClCC,kBAAkB,CAAGF,aAAa,CAACG,GAAG,EAAE,CAC5C9D,YAAY,CAAC+D,eAAe,CAACF,kBAAkB,CAAC,CAChD7D,YAAY,CAACD,cAAc,GAC5B,CAAC,CAAC,CAEF1B,CAAC,CAAC,sBAAsB,CAAC,CAACoF,EAAE,CAAC,OAAO,CAAE,SAAUC,CAAC,CAAE,CAClD,IAAIjF,YAAY,CAAGuB,YAAY,CAACtB,eAAe,EAAE,CACjD;AAAA,OAC2B,CAAC,EAAxBD,YAAY,CAACgE,MAAW,CAC3BzD,KAAAA,GAAG,CACDgF,0BAA0B,CAAC3F,CAAC,CAAC,mBAAmB,CAAC,CAAC,CAClDiF,gBAAgB,CAAC,YAAY,CAAEtE,GAAG,CAACyC,UAAU,CAAC,kBAAkB,CAAC,CAAE,OAAO,CAAE,UAAU,CAAO,CAAA,CAAA,CAAA,CAAA,KAGpF,YAAA,CACVwB,iBAAiB,EAAE,CACnBzD,IAAI,CAAC,UAAY,CACjBQ,YAAY,CAAC0C,aAAa,GAC3B,CAAC,CAAC,CACD9C,IAAI,CAAC,UAAY,EAAE,CACtB,CAAC,CAAC,CAEFvB,CAAC,CAAC,qBAAqB,CAAC,CAACoF,EAAE,CAAC,OAAO,CAAE,SAAUC,CAAC,CAAE,CACjD,IAAIO,cAAc,CAAG5F,CAAC,CAACqF,CAAC,CAACE,aAAa,CAAC,CACvCK,cAAc,CAACC,QAAQ,CAAC,QAAQ,CAAC,CACjC,IAAoB,gBAAA,CAAGD,cAAc,CAACE,OAAO,CAAC,UAAU,CAAC,CACzD9F,CAAC,CAAC,iBAAiB,CAAE+F,gBAAgB,CAAC,CAACC,WAAW,CAAC,QAAQ,CAAC,CAACC,KAAK,EAAE,CACpEjG,CAAC,CAAC,cAAc,CAAC,CAACgG,WAAW,CAAC,QAAQ,EACvC,CAAC,CAAC,CAEFhG,CAAC,CAAC,cAAc,CAAC,CAACoF,EAAE,CAAC,OAAO,CAAE,SAAUC,CAAC,CAAE,CACtCU,IAAAA,gBAAgB,CAAG/F,CAAC,CAACqF,CAAC,CAACE,aAAa,CAAC,CAACO,OAAO,CAAC,UAAU,CAAC,CACzDI,eAAe,CAAGlG,CAAC,CAAC,0BAAwB,CAAE+F,gBAAgB,CAAC,CAC/DI,KAAK,CAAGD,eAAe,CAACT,GAAG,EAAE,CACjC,GAAoB,CAAC,EAAjBU,KAAK,CAAC/B,MAAW,CAQpB,OAPA8B,KAAAA,eAAe,CAACjB,gBAAgB,CAC/B,YAAY,CACZtE,GAAG,CAACyC,UAAU,CAAC,mBAAmB,CAAC,CACnC,OAAO,CACP,UAAU,CAAA,CAAA,CAAA,CAEV,CAIF,IAAIhD,YAAY,CAAGuB,YAAY,CAACtB,eAAe,EAAE,CACjD;AAAA,OAC2B,CAAC,EAAxBD,YAAY,CAACgE,MAAW,CAC3BzD,KAAAA,GAAG,CACDgF,0BAA0B,CAAC3F,CAAC,CAAC,mBAAmB,CAAC,CAAC,CAClDiF,gBAAgB,CAAC,YAAY,CAAEtE,GAAG,CAACyC,UAAU,CAAC,kBAAkB,CAAC,CAAE,OAAO,CAAE,UAAU,CAAO,CAAA,CAAA,CAAA,CAAA,KAIpF,YAAA,CAACwB,iBAAiB,EAAE,CAACzD,IAAI,CAAC,UAAY,CACjD,UAAU,CAAG,EAAE,CACfY,MAAM,CAACqE,QAAQ,CAAGD,KAAK,CACvBxE,YAAY,CAAC8B,iBAAiB,CAAC1B,MAAM,EACtC,CAAC,CACF,CAAC,CAAC,CAGF,IAAI,CAAChC,aAAa,EAAE,CAACqF,EAAE,CAAC,QAAQ,CAAE,SAAUC,CAAC,CAAE,CAC9CA,CAAC,CAACgB,cAAc,GACjB,CAAC,CAAC,CAGF,IAAI,CAACX,eAAe,CAAC1F,CAAC,CAAC,mBAAmB,CAAC,CAACyF,GAAG,EAAE,EAClD,CACD,CAAC,CACD;;"}