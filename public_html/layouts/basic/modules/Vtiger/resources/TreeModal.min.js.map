{"version":3,"file":"TreeModal.min.js","sources":["TreeModal.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\n$.Class(\n\t'Base_TreeModal_JS',\n\t{},\n\t{\n\t\t/**\n\t\t * Event for select row\n\t\t */\n\t\tselectEvent: false,\n\t\t/**\n\t\t * Modal container\n\t\t */\n\t\tcontainer: false,\n\t\t/**\n\t\t * Jstree element\n\t\t */\n\t\ttree: false,\n\t\t/**\n\t\t * Multiple selection\n\t\t */\n\t\tmultiple: false,\n\t\t/**\n\t\t * Set event for select row\n\t\t * @param {function} cb\n\t\t */\n\t\tsetSelectEvent: function(cb) {\n\t\t\tthis.selectEvent = cb;\n\t\t},\n\t\t/**\n\t\t * Generate tree\n\t\t */\n\t\tgenerateTree: function() {\n\t\t\tlet plugins = [];\n\t\t\tif (this.multiple) {\n\t\t\t\tplugins.push('category');\n\t\t\t\tplugins.push('checkbox');\n\t\t\t}\n\t\t\tplugins.push('search');\n\t\t\tthis.tree.jstree(\n\t\t\t\t$.extend(\n\t\t\t\t\ttrue,\n\t\t\t\t\t{\n\t\t\t\t\t\tcore: {\n\t\t\t\t\t\t\tdata: JSON.parse(this.container.find('.js-tree-value').val()),\n\t\t\t\t\t\t\tthemes: {\n\t\t\t\t\t\t\t\tname: 'proton',\n\t\t\t\t\t\t\t\tresponsive: true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcheckbox: {\n\t\t\t\t\t\t\tthree_state: false\n\t\t\t\t\t\t},\n\t\t\t\t\t\tplugins: plugins\n\t\t\t\t\t},\n\t\t\t\t\tthis.tree.data('params')\n\t\t\t\t)\n\t\t\t);\n\t\t},\n\t\t/**\n\t\t * Register select events\n\t\t */\n\t\tregisterSelectEvent: function() {\n\t\t\tif (this.multiple) {\n\t\t\t\tthis.container.find('[name=\"saveButton\"]').on('click', () => {\n\t\t\t\t\tlet id = [],\n\t\t\t\t\t\tname = [];\n\t\t\t\t\t$.each(this.tree.jstree('getCategory', true), function(index, value) {\n\t\t\t\t\t\tid.push('T' + value.id);\n\t\t\t\t\t\tname.push(value.text);\n\t\t\t\t\t});\n\t\t\t\t\tthis.selectEvent({ id: id.join(), name: name.join(', ') });\n\t\t\t\t\tapp.hideModalWindow(false, this.container.parent().attr('id'));\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.tree.on('select_node.jstree', (event, data) => {\n\t\t\t\t\tthis.selectEvent({ id: 'T' + data.node.id, name: data.node.text });\n\t\t\t\t\tapp.hideModalWindow(false, this.container.parent().attr('id'));\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tregisterSearchEvent: function() {\n\t\t\tconst thisInstance = this;\n\t\t\tlet valueSearch = this.container.find('#valueSearchTree');\n\t\t\tvalueSearch.on('keypress', function(e) {\n\t\t\t\tif (e.which == 13) {\n\t\t\t\t\tthisInstance.searchingInTree(valueSearch.val());\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.container.find('#btnSearchTree').on('click', function() {\n\t\t\t\tthisInstance.searchingInTree(valueSearch.val());\n\t\t\t});\n\t\t},\n\t\tsearchingInTree: function(text) {\n\t\t\tthis.tree.jstree(true).search(text);\n\t\t},\n\t\t/**\n\t\t * Register base events\n\t\t * @param {jQuery} modalContainer\n\t\t */\n\t\tregisterEvents: function(modalContainer) {\n\t\t\tthis.container = modalContainer;\n\t\t\tthis.tree = this.container.find('.js-tree-contents');\n\t\t\tthis.multiple = this.container.find('.js-multiple').val() == 1 ? true : false;\n\t\t\tthis.generateTree();\n\t\t\tthis.registerSearchEvent();\n\t\t\tthis.registerSelectEvent();\n\t\t}\n\t}\n);\n"],"names":["$","Class","cb","selectEvent","plugins","multiple","push","tree","jstree","extend","JSON","parse","container","find","val","data","on","id","name","each","index","value","text","join","hideModalWindow","parent","attr","event","node","thisInstance","valueSearch","e","which","searchingInTree","search","modalContainer","generateTree","registerSearchEvent","registerSelectEvent"],"mappings":";;AAAA;AACA;AAEAA,EAAEC,KAAF,CACC,mBADD,EAEC,EAFD,EAGC;;;;cAIc,KAJd;;;;YAQY,KARZ;;;;OAYO,KAZP;;;;WAgBW,KAhBX;;;;;iBAqBiB,wBAASC,EAAT,EAAa;OACvBC,WAAL,GAAmBD,EAAnB;EAtBF;;;;eA2Be,wBAAW;MACpBE,UAAU,EAAd;MACI,KAAKC,QAAT,EAAmB;WACVC,IAAR,CAAa,UAAb;WACQA,IAAR,CAAa,UAAb;;UAEOA,IAAR,CAAa,QAAb;OACKC,IAAL,CAAUC,MAAV,CACCR,EAAES,MAAF,CACC,IADD,EAEC;SACO;UACCC,KAAKC,KAAL,CAAW,KAAKC,SAAL,CAAeC,IAAf,CAAoB,gBAApB,EAAsCC,GAAtC,EAAX,CADD;YAEG;WACD,QADC;iBAEK;;IALf;aAQW;iBACI;IATf;YAWUV;GAbX,EAeC,KAAKG,IAAL,CAAUQ,IAAV,CAAe,QAAf,CAfD,CADD;EAlCF;;;;sBAyDsB,+BAAW;;;MAC3B,KAAKV,QAAT,EAAmB;QACbO,SAAL,CAAeC,IAAf,CAAoB,qBAApB,EAA2CG,EAA3C,CAA8C,OAA9C,EAAuD,YAAM;QACxDC,KAAK,EAAT;QACCC,OAAO,EADR;MAEEC,IAAF,CAAO,MAAKZ,IAAL,CAAUC,MAAV,CAAiB,aAAjB,EAAgC,IAAhC,CAAP,EAA8C,UAASY,KAAT,EAAgBC,KAAhB,EAAuB;QACjEf,IAAH,CAAQ,MAAMe,MAAMJ,EAApB;UACKX,IAAL,CAAUe,MAAMC,IAAhB;KAFD;UAIKnB,WAAL,CAAiB,EAAEc,IAAIA,GAAGM,IAAH,EAAN,EAAiBL,MAAMA,KAAKK,IAAL,CAAU,IAAV,CAAvB,EAAjB;QACIC,eAAJ,CAAoB,KAApB,EAA2B,MAAKZ,SAAL,CAAea,MAAf,GAAwBC,IAAxB,CAA6B,IAA7B,CAA3B;IARD;GADD,MAWO;QACDnB,IAAL,CAAUS,EAAV,CAAa,oBAAb,EAAmC,UAACW,KAAD,EAAQZ,IAAR,EAAiB;UAC9CZ,WAAL,CAAiB,EAAEc,IAAI,MAAMF,KAAKa,IAAL,CAAUX,EAAtB,EAA0BC,MAAMH,KAAKa,IAAL,CAAUN,IAA1C,EAAjB;QACIE,eAAJ,CAAoB,KAApB,EAA2B,MAAKZ,SAAL,CAAea,MAAf,GAAwBC,IAAxB,CAA6B,IAA7B,CAA3B;IAFD;;EAtEH;sBA4EsB,+BAAW;MACzBG,eAAe,IAArB;MACIC,cAAc,KAAKlB,SAAL,CAAeC,IAAf,CAAoB,kBAApB,CAAlB;cACYG,EAAZ,CAAe,UAAf,EAA2B,UAASe,CAAT,EAAY;OAClCA,EAAEC,KAAF,IAAW,EAAf,EAAmB;iBACLC,eAAb,CAA6BH,YAAYhB,GAAZ,EAA7B;;GAFF;OAKKF,SAAL,CAAeC,IAAf,CAAoB,gBAApB,EAAsCG,EAAtC,CAAyC,OAAzC,EAAkD,YAAW;gBAC/CiB,eAAb,CAA6BH,YAAYhB,GAAZ,EAA7B;GADD;EApFF;kBAwFkB,yBAASQ,IAAT,EAAe;OAC1Bf,IAAL,CAAUC,MAAV,CAAiB,IAAjB,EAAuB0B,MAAvB,CAA8BZ,IAA9B;EAzFF;;;;;iBA+FiB,wBAASa,cAAT,EAAyB;OACnCvB,SAAL,GAAiBuB,cAAjB;OACK5B,IAAL,GAAY,KAAKK,SAAL,CAAeC,IAAf,CAAoB,mBAApB,CAAZ;OACKR,QAAL,GAAgB,KAAKO,SAAL,CAAeC,IAAf,CAAoB,cAApB,EAAoCC,GAApC,MAA6C,CAA7C,GAAiD,IAAjD,GAAwD,KAAxE;OACKsB,YAAL;OACKC,mBAAL;OACKC,mBAAL;;CAxGH"}