{"version":3,"file":"TreeModal.min.js","sources":["TreeModal.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\n$.Class(\n\t'Base_TreeModal_JS',\n\t{},\n\t{\n\t\t/**\n\t\t * Event for select row\n\t\t */\n\t\tselectEvent: false,\n\t\t/**\n\t\t * Modal container\n\t\t */\n\t\tcontainer: false,\n\t\t/**\n\t\t * Jstree element\n\t\t */\n\t\ttree: false,\n\t\t/**\n\t\t * Multiple selection\n\t\t */\n\t\tmultiple: false,\n\t\t/**\n\t\t * Set event for select row\n\t\t * @param {function} cb\n\t\t */\n\t\tsetSelectEvent: function (cb) {\n\t\t\tthis.selectEvent = cb;\n\t\t},\n\t\t/**\n\t\t * Generate tree\n\t\t */\n\t\tgenerateTree: function () {\n\t\t\tlet plugins = [];\n\t\t\tif (this.multiple) {\n\t\t\t\tplugins.push('category');\n\t\t\t\tplugins.push('checkbox');\n\t\t\t}\n\t\t\tplugins.push('search');\n\t\t\tthis.tree.jstree(\n\t\t\t\t$.extend(\n\t\t\t\t\ttrue,\n\t\t\t\t\t{\n\t\t\t\t\t\tcore: {\n\t\t\t\t\t\t\tdata: JSON.parse(this.container.find('.js-tree-value').val()),\n\t\t\t\t\t\t\tthemes: {\n\t\t\t\t\t\t\t\tname: 'proton',\n\t\t\t\t\t\t\t\tresponsive: true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcheckbox: {\n\t\t\t\t\t\t\tthree_state: false\n\t\t\t\t\t\t},\n\t\t\t\t\t\tplugins: plugins\n\t\t\t\t\t},\n\t\t\t\t\tthis.tree.data('params')\n\t\t\t\t)\n\t\t\t);\n\t\t},\n\t\t/**\n\t\t * Register select events\n\t\t */\n\t\tregisterSelectEvent: function () {\n\t\t\tif (this.multiple) {\n\t\t\t\tthis.container.find('[name=\"saveButton\"]').on('click', () => {\n\t\t\t\t\tlet id = [],\n\t\t\t\t\t\tname = [];\n\t\t\t\t\t$.each(this.tree.jstree('getCategory', true), function (index, value) {\n\t\t\t\t\t\tid.push('T' + value.id);\n\t\t\t\t\t\tname.push(value.text);\n\t\t\t\t\t});\n\t\t\t\t\tthis.selectEvent({ id: id.join(), name: name.join(', ') });\n\t\t\t\t\tapp.hideModalWindow(false, this.container.parent().attr('id'));\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.tree.on('select_node.jstree', (event, data) => {\n\t\t\t\t\tthis.selectEvent({ id: 'T' + data.node.id, name: data.node.text });\n\t\t\t\t\tapp.hideModalWindow(false, this.container.parent().attr('id'));\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tregisterSearchEvent: function () {\n\t\t\tconst thisInstance = this;\n\t\t\tlet valueSearch = this.container.find('#valueSearchTree');\n\t\t\tvalueSearch.on('keypress', function (e) {\n\t\t\t\tif (e.which == 13) {\n\t\t\t\t\tthisInstance.searchingInTree(valueSearch.val());\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.container.find('#btnSearchTree').on('click', function () {\n\t\t\t\tthisInstance.searchingInTree(valueSearch.val());\n\t\t\t});\n\t\t},\n\t\tsearchingInTree: function (text) {\n\t\t\tthis.tree.jstree(true).search(text);\n\t\t},\n\t\t/**\n\t\t * Register base events\n\t\t * @param {jQuery} modalContainer\n\t\t */\n\t\tregisterEvents: function (modalContainer) {\n\t\t\tthis.container = modalContainer;\n\t\t\tthis.tree = this.container.find('.js-tree-contents');\n\t\t\tthis.multiple = this.container.find('.js-multiple').val() == 1 ? true : false;\n\t\t\tthis.generateTree();\n\t\t\tthis.registerSearchEvent();\n\t\t\tthis.registerSelectEvent();\n\t\t}\n\t}\n);\n"],"names":["$","Class","selectEvent","container","tree","multiple","setSelectEvent","cb","generateTree","plugins","push","jstree","extend","core","data","JSON","parse","find","val","themes","name","responsive","checkbox","three_state","registerSelectEvent","on","each","index","value","id","text","join","app","hideModalWindow","parent","attr","event","node","registerSearchEvent","thisInstance","valueSearch","e","which","searchingInTree","search","registerEvents","modalContainer"],"mappings":"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"}