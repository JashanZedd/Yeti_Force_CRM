{"version":3,"file":"TreeModal.min.js","sources":["TreeModal.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\n$.Class(\n\t'Base_TreeModal_JS',\n\t{},\n\t{\n\t\t/**\n\t\t * Event for select row\n\t\t */\n\t\tselectEvent: false,\n\t\t/**\n\t\t * Modal container\n\t\t */\n\t\tcontainer: false,\n\t\t/**\n\t\t * Jstree element\n\t\t */\n\t\ttree: false,\n\t\t/**\n\t\t * Multiple selection\n\t\t */\n\t\tmultiple: false,\n\t\t/**\n\t\t * Set event for select row\n\t\t * @param {function} cb\n\t\t */\n\t\tsetSelectEvent: function(cb) {\n\t\t\tthis.selectEvent = cb;\n\t\t},\n\t\t/**\n\t\t * Generate tree\n\t\t */\n\t\tgenerateTree: function() {\n\t\t\tlet plugins = [];\n\t\t\tif (this.multiple) {\n\t\t\t\tplugins.push('category');\n\t\t\t\tplugins.push('checkbox');\n\t\t\t}\n\t\t\tplugins.push('search');\n\t\t\tthis.tree.jstree(\n\t\t\t\t$.extend(\n\t\t\t\t\ttrue,\n\t\t\t\t\t{\n\t\t\t\t\t\tcore: {\n\t\t\t\t\t\t\tdata: JSON.parse(this.container.find('.js-tree-value').val()),\n\t\t\t\t\t\t\tthemes: {\n\t\t\t\t\t\t\t\tname: 'proton',\n\t\t\t\t\t\t\t\tresponsive: true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcheckbox: {\n\t\t\t\t\t\t\tthree_state: false\n\t\t\t\t\t\t},\n\t\t\t\t\t\tplugins: plugins\n\t\t\t\t\t},\n\t\t\t\t\tthis.tree.data('params')\n\t\t\t\t)\n\t\t\t);\n\t\t},\n\t\t/**\n\t\t * Register select events\n\t\t */\n\t\tregisterSelectEvent: function() {\n\t\t\tif (this.multiple) {\n\t\t\t\tthis.container.find('[name=\"saveButton\"]').on('click', () => {\n\t\t\t\t\tlet id = [],\n\t\t\t\t\t\tname = [];\n\t\t\t\t\t$.each(this.tree.jstree('getCategory', true), function(index, value) {\n\t\t\t\t\t\tid.push('T' + value.id);\n\t\t\t\t\t\tname.push(value.text);\n\t\t\t\t\t});\n\t\t\t\t\tthis.selectEvent({ id: id.join(), name: name.join(', ') });\n\t\t\t\t\tapp.hideModalWindow(false, this.container.parent().attr('id'));\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.tree.on('select_node.jstree', (event, data) => {\n\t\t\t\t\tthis.selectEvent({ id: 'T' + data.node.id, name: data.node.text });\n\t\t\t\t\tapp.hideModalWindow(false, this.container.parent().attr('id'));\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tregisterSearchEvent: function() {\n\t\t\tconst thisInstance = this;\n\t\t\tlet valueSearch = this.container.find('#valueSearchTree');\n\t\t\tvalueSearch.on('keypress', function(e) {\n\t\t\t\tif (e.which == 13) {\n\t\t\t\t\tthisInstance.searchingInTree(valueSearch.val());\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.container.find('#btnSearchTree').on('click', function() {\n\t\t\t\tthisInstance.searchingInTree(valueSearch.val());\n\t\t\t});\n\t\t},\n\t\tsearchingInTree: function(text) {\n\t\t\tthis.tree.jstree(true).search(text);\n\t\t},\n\t\t/**\n\t\t * Register base events\n\t\t * @param {jQuery} modalContainer\n\t\t */\n\t\tregisterEvents: function(modalContainer) {\n\t\t\tthis.container = modalContainer;\n\t\t\tthis.tree = this.container.find('.js-tree-contents');\n\t\t\tthis.multiple = this.container.find('.js-multiple').val() == 1 ? true : false;\n\t\t\tthis.generateTree();\n\t\t\tthis.registerSearchEvent();\n\t\t\tthis.registerSelectEvent();\n\t\t}\n\t}\n);\n"],"names":["$","Class","cb","selectEvent","plugins","this","multiple","push","tree","jstree","extend","JSON","parse","container","find","val","data","on","id","name","each","_this","index","value","text","join","hideModalWindow","parent","attr","event","node","thisInstance","valueSearch","e","which","searchingInTree","search","modalContainer","generateTree","registerSearchEvent","registerSelectEvent"],"mappings":"aAGAA,EAAEC,MACD,oBACA,GACA,cAIc,aAIF,QAIL,YAII,iBAKM,SAASC,SACnBC,YAAcD,iBAKN,eACTE,QAAU,GACVC,KAAKC,mBACAC,KAAK,oBACLA,KAAK,qBAENA,KAAK,eACRC,KAAKC,OACTT,EAAEU,QACD,EACA,MACO,MACCC,KAAKC,MAAMP,KAAKQ,UAAUC,KAAK,kBAAkBC,cAC/C,MACD,qBACM,aAGJ,cACI,WAELX,SAEVC,KAAKG,KAAKQ,KAAK,iCAOG,0BAChBX,KAAKC,cACHO,UAAUC,KAAK,uBAAuBG,GAAG,SAAS,eAClDC,GAAK,GACRC,KAAO,KACNC,KAAKC,MAAKb,KAAKC,OAAO,eAAe,IAAO,SAASa,MAAOC,UAC1DhB,KAAK,IAAMgB,MAAML,SACfX,KAAKgB,MAAMC,eAEZrB,YAAY,CAAEe,GAAIA,GAAGO,OAAQN,KAAMA,KAAKM,KAAK,YAC9CC,iBAAgB,EAAOL,MAAKR,UAAUc,SAASC,KAAK,eAGpDpB,KAAKS,GAAG,sBAAsB,SAACY,MAAOb,YACrCb,YAAY,CAAEe,GAAI,IAAMF,KAAKc,KAAKZ,GAAIC,KAAMH,KAAKc,KAAKN,WACvDE,iBAAgB,EAAOL,MAAKR,UAAUc,SAASC,KAAK,+BAItC,eACdG,aAAe1B,KACjB2B,YAAc3B,KAAKQ,UAAUC,KAAK,gCAC1BG,GAAG,YAAY,SAASgB,GACpB,IAAXA,EAAEC,oBACQC,gBAAgBH,YAAYjB,eAGtCF,UAAUC,KAAK,kBAAkBG,GAAG,SAAS,wBACpCkB,gBAAgBH,YAAYjB,2BAG1B,SAASS,WACpBhB,KAAKC,QAAO,GAAM2B,OAAOZ,sBAMf,SAASa,qBACnBxB,UAAYwB,oBACZ7B,KAAOH,KAAKQ,UAAUC,KAAK,0BAC3BR,SAAwD,GAA7CD,KAAKQ,UAAUC,KAAK,gBAAgBC,WAC/CuB,oBACAC,2BACAC"}