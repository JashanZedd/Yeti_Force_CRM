{"version":3,"file":"Edit.min.js","sources":["Edit.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n * Contributor(s): YetiForce.com\n *************************************************************************************/\n'use strict';\n\n$.Class(\n\t'Vtiger_Edit_Js',\n\t{\n\t\t//Event that will triggered when reference field is selected\n\t\treferenceSelectionEvent: 'Vtiger.Reference.Selection',\n\t\t//Event that will triggered when reference field is selected\n\t\treferenceDeSelectionEvent: 'Vtiger.Reference.DeSelection',\n\t\t//Event that will triggered before saving the record\n\t\trecordPreSave: 'Vtiger.Record.PreSave',\n\t\teditInstance: false,\n\t\tinventoryController: false,\n\t\t/**\n\t\t * Function to get Instance by name\n\t\t * @params moduleName:-- Name of the module to create instance\n\t\t */\n\t\tgetInstanceByModuleName: function(moduleName) {\n\t\t\tif (typeof moduleName === 'undefined') {\n\t\t\t\tmoduleName = app.getModuleName();\n\t\t\t}\n\t\t\tlet parentModule = app.getParentModuleName(),\n\t\t\t\tmoduleClassName,\n\t\t\t\tfallbackClassName,\n\t\t\t\tinstance;\n\t\t\tif (parentModule === 'Settings') {\n\t\t\t\tmoduleClassName = parentModule + '_' + moduleName + '_Edit_Js';\n\t\t\t\tif (typeof window[moduleClassName] === 'undefined') {\n\t\t\t\t\tmoduleClassName = moduleName + '_Edit_Js';\n\t\t\t\t}\n\t\t\t\tfallbackClassName = parentModule + '_Vtiger_Edit_Js';\n\t\t\t\tif (typeof window[fallbackClassName] === 'undefined') {\n\t\t\t\t\tfallbackClassName = 'Vtiger_Edit_Js';\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tmoduleClassName = moduleName + '_Edit_Js';\n\t\t\t\tfallbackClassName = 'Vtiger_Edit_Js';\n\t\t\t}\n\t\t\tif (typeof window[moduleClassName] !== 'undefined') {\n\t\t\t\tinstance = new window[moduleClassName]();\n\t\t\t} else {\n\t\t\t\tinstance = new window[fallbackClassName]();\n\t\t\t}\n\t\t\tinstance.moduleName = moduleName;\n\t\t\treturn instance;\n\t\t},\n\t\tgetInstance: function() {\n\t\t\tif (Vtiger_Edit_Js.editInstance == false) {\n\t\t\t\tvar instance = Vtiger_Edit_Js.getInstanceByModuleName();\n\t\t\t\tVtiger_Edit_Js.editInstance = instance;\n\t\t\t\treturn instance;\n\t\t\t}\n\t\t\treturn Vtiger_Edit_Js.editInstance;\n\t\t}\n\t},\n\t{\n\t\tformElement: false,\n\t\trelationOperation: '',\n\t\tmoduleName: app.getModuleName(),\n\t\tgetForm: function() {\n\t\t\tif (this.formElement == false) {\n\t\t\t\tthis.setForm($('#EditView'));\n\t\t\t}\n\t\t\treturn this.formElement;\n\t\t},\n\t\tsetForm: function(element) {\n\t\t\tthis.formElement = element;\n\t\t\treturn this;\n\t\t},\n\t\tgetRecordsListParams: function(container) {\n\t\t\tlet sourceModule = app.getModuleName();\n\t\t\tlet popupReferenceModule = $('input[name=\"popupReferenceModule\"]', container).val();\n\t\t\tlet sourceFieldElement = $('input[class=\"sourceField\"]', container);\n\t\t\tlet sourceField = sourceFieldElement.attr('name');\n\t\t\tlet sourceRecordElement = $('input[name=\"record\"]');\n\t\t\tlet sourceRecordId = '';\n\t\t\tif (sourceRecordElement.length > 0) {\n\t\t\t\tsourceRecordId = sourceRecordElement.val();\n\t\t\t}\n\t\t\tlet isMultiple = false;\n\t\t\tif (sourceFieldElement.data('multiple') == true) {\n\t\t\t\tisMultiple = true;\n\t\t\t}\n\t\t\tlet filterFields = {};\n\t\t\tlet formElement = container.closest('form');\n\t\t\tlet mappingRelatedField = formElement.find('input[name=\"mappingRelatedField\"]').val();\n\t\t\tlet mappingRelatedModule = mappingRelatedField ? JSON.parse(mappingRelatedField) : [];\n\t\t\tif (\n\t\t\t\tmappingRelatedModule[sourceField] != undefined &&\n\t\t\t\tmappingRelatedModule[sourceField][popupReferenceModule] != undefined\n\t\t\t) {\n\t\t\t\t$.each(mappingRelatedModule[sourceField][popupReferenceModule], function(index, value) {\n\t\t\t\t\tlet mapFieldElement = formElement.find('[name=\"' + index + '\"]');\n\t\t\t\t\tif (mapFieldElement.length && mapFieldElement.val() != '') {\n\t\t\t\t\t\tfilterFields[index] = mapFieldElement.val();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tlet params = {\n\t\t\t\tmodule: popupReferenceModule,\n\t\t\t\tsrc_module: sourceModule,\n\t\t\t\tsrc_field: sourceField,\n\t\t\t\tsrc_record: sourceRecordId,\n\t\t\t\tfilterFields: filterFields\n\t\t\t};\n\t\t\t$.each(['link', 'process'], function(index, value) {\n\t\t\t\tlet fieldElement = formElement.find('[name=\"' + value + '\"]');\n\t\t\t\tif (fieldElement.length && fieldElement.val() != '' && fieldElement.val() != 0) {\n\t\t\t\t\tparams[value] = fieldElement.val();\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (isMultiple) {\n\t\t\t\tparams.multi_select = true;\n\t\t\t}\n\t\t\treturn params;\n\t\t},\n\t\t/**\n\t\t * Show records list modal\n\t\t * @param {jQuery.Event} e\n\t\t */\n\t\tshowRecordsList: function(e) {\n\t\t\tvar parentElem = $(e.target).closest('.fieldValue');\n\t\t\tif (parentElem.length <= 0) {\n\t\t\t\tparentElem = $(e.target).closest('td');\n\t\t\t}\n\t\t\tvar params = this.getRecordsListParams(parentElem);\n\t\t\tapp.showRecordsList(params, (modal, instance) => {\n\t\t\t\tinstance.setSelectEvent(data => {\n\t\t\t\t\tthis.setReferenceFieldValue(parentElem, data);\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tsetReferenceFieldValue: function(container, params) {\n\t\t\tconst thisInstance = this;\n\t\t\tlet sourceFieldElement = container.find('input.sourceField');\n\t\t\tlet sourceField = sourceFieldElement.attr('name');\n\t\t\tlet fieldElement = container.find('input[name=\"' + sourceField + '\"]');\n\t\t\tlet sourceFieldDisplay = sourceField + '_display';\n\t\t\tlet fieldDisplayElement = container.find('input[name=\"' + sourceFieldDisplay + '\"]');\n\t\t\tlet popupReferenceModule = container.find('input[name=\"popupReferenceModule\"]').val();\n\t\t\tlet selectedName = params.name;\n\t\t\tlet id = params.id;\n\n\t\t\tcontainer.find('.clearReferenceSelection').trigger('click');\n\n\t\t\tfieldElement.val(id);\n\t\t\tfieldDisplayElement.val(app.decodeHTML(selectedName)).attr('readonly', true);\n\t\t\tfieldElement.trigger(Vtiger_Edit_Js.referenceSelectionEvent, {\n\t\t\t\tmodule: popupReferenceModule,\n\t\t\t\trecord: id,\n\t\t\t\tselectedName: selectedName\n\t\t\t});\n\t\t\tfieldDisplayElement.validationEngine('closePrompt', fieldDisplayElement);\n\t\t\tif (sourceFieldElement.data('type') == 'inventory') {\n\t\t\t\treturn params;\n\t\t\t}\n\t\t\tlet formElement = container.closest('form');\n\t\t\tlet mappingRelatedField = this.getMappingRelatedField(sourceField, popupReferenceModule, formElement);\n\t\t\tif (typeof mappingRelatedField !== 'undefined') {\n\t\t\t\tlet params = {\n\t\t\t\t\tmodule: popupReferenceModule,\n\t\t\t\t\trecord: id\n\t\t\t\t};\n\t\t\t\tapp.getRecordDetails(params).done(function(data) {\n\t\t\t\t\tlet response = (params.data = data['result']['data']);\n\t\t\t\t\tapp.event.trigger('EditView.SelectReference', params, formElement);\n\t\t\t\t\t$.each(mappingRelatedField, function(key, value) {\n\t\t\t\t\t\tif (response[value[0]] != 0 && !thisInstance.getMappingValuesFromUrl(key)) {\n\t\t\t\t\t\t\tlet mapFieldElement = formElement.find('[name=\"' + key + '\"]');\n\t\t\t\t\t\t\tlet fieldinfo = mapFieldElement.data('fieldinfo');\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tdata['result']['type'][value[0]] === 'date' ||\n\t\t\t\t\t\t\t\tdata['result']['type'][value[0]] === 'datetime'\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tmapFieldElement.val(data['result']['displayData'][value[0]]);\n\t\t\t\t\t\t\t} else if (data['result']['type'][value[0]] === 'multipicklist') {\n\t\t\t\t\t\t\t\tlet mapFieldElementMultiselect = formElement.find('[name=\"' + key + '[]\"]');\n\t\t\t\t\t\t\t\tif (mapFieldElementMultiselect.length > 0) {\n\t\t\t\t\t\t\t\t\tlet multipleAttr = mapFieldElement.attr('multiple');\n\t\t\t\t\t\t\t\t\tlet splitValues = response[value[0]].split(' |##| ');\n\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\ttypeof multipleAttr !== undefined &&\n\t\t\t\t\t\t\t\t\t\tmultipleAttr !== false &&\n\t\t\t\t\t\t\t\t\t\tsplitValues.length > 0\n\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\tmapFieldElementMultiselect.val(splitValues).trigger('change');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else if (mapFieldElement.is('select')) {\n\t\t\t\t\t\t\t\tif (mapFieldElement.find('option[value=\"' + response[value[0]] + '\"]').length) {\n\t\t\t\t\t\t\t\t\tmapFieldElement.val(response[value[0]]).trigger('change');\n\t\t\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\t\t\tmapFieldElement.data('fieldinfo').picklistvalues.hasOwnProperty(response[value[0]])\n\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\tlet newOption = new Option(response[value[0]], response[value[0]], true, true);\n\t\t\t\t\t\t\t\t\tmapFieldElement.append(newOption).trigger('change');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else if (mapFieldElement.length == 0) {\n\t\t\t\t\t\t\t\t$(\"<input type='hidden'/>\")\n\t\t\t\t\t\t\t\t\t.attr('name', key)\n\t\t\t\t\t\t\t\t\t.attr('value', response[value[0]])\n\t\t\t\t\t\t\t\t\t.appendTo(formElement);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tmapFieldElement.val(response[value[0]]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tlet mapFieldDisplayElement = formElement.find('input[name=\"' + key + '_display\"]');\n\t\t\t\t\t\t\tif (mapFieldDisplayElement.length > 0) {\n\t\t\t\t\t\t\t\tmapFieldDisplayElement\n\t\t\t\t\t\t\t\t\t.val(data['result']['displayData'][value[0]])\n\t\t\t\t\t\t\t\t\t.attr('readonly', true);\n\t\t\t\t\t\t\t\tif (fieldinfo.type === 'reference') {\n\t\t\t\t\t\t\t\t\tlet referenceModulesList = mapFieldElement\n\t\t\t\t\t\t\t\t\t\t.closest('.fieldValue')\n\t\t\t\t\t\t\t\t\t\t.find('.referenceModulesList');\n\t\t\t\t\t\t\t\t\tif (referenceModulesList.length > 0 && value[1]) {\n\t\t\t\t\t\t\t\t\t\treferenceModulesList.val(value[1]).trigger('change');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tthisInstance.setReferenceFieldValue(mapFieldDisplayElement.closest('.fieldValue'), {\n\t\t\t\t\t\t\t\t\t\tname: data['result']['displayData'][value[0]],\n\t\t\t\t\t\t\t\t\t\tid: response[value[0]]\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tgetRelationOperation: function() {\n\t\t\tif (this.relationOperation === '') {\n\t\t\t\tvar relationOperation = $('[name=\"relationOperation\"]');\n\t\t\t\tif (relationOperation.length) {\n\t\t\t\t\tthis.relationOperation = relationOperation.val();\n\t\t\t\t} else {\n\t\t\t\t\tthis.relationOperation = false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn this.relationOperation;\n\t\t},\n\t\tgetMappingValuesFromUrl: function(key) {\n\t\t\tvar relationOperation = this.getRelationOperation();\n\t\t\tif (relationOperation) {\n\t\t\t\treturn app.getUrlVar(key);\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\tproceedRegisterEvents: function() {\n\t\t\tif ($('.recordEditView').length > 0) {\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Function which will register reference field clear event\n\t\t * @params - container <jQuery> - element in which auto complete fields needs to be searched\n\t\t */\n\t\tregisterClearTreeSelectionEvent: function(container) {\n\t\t\tvar thisInstance = this;\n\t\t\tcontainer.find('.clearTreeSelection').on('click', function(e) {\n\t\t\t\tthisInstance.clearFieldValue($(e.currentTarget));\n\t\t\t\te.preventDefault();\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function which will handle the reference auto complete event registrations\n\t\t * @params - container <jQuery> - element in which auto complete fields needs to be searched\n\t\t */\n\t\tregisterTreeAutoCompleteFields: function(container) {\n\t\t\tcontainer.find('input.treeAutoComplete').autocomplete({\n\t\t\t\tdelay: '600',\n\t\t\t\tminLength: '3',\n\t\t\t\tsource: function(request, response) {\n\t\t\t\t\t//element will be array of dom elements\n\t\t\t\t\t//here this refers to auto complete instance\n\t\t\t\t\tlet inputElement = $(this.element[0]);\n\t\t\t\t\tlet searchValue = request.term.toLowerCase();\n\t\t\t\t\tlet parentElem = inputElement.closest('.fieldValue');\n\t\t\t\t\tlet sourceFieldElement = $('input[class=\"sourceField\"]', parentElem);\n\t\t\t\t\tlet fieldInfo = sourceFieldElement.data('fieldinfo');\n\t\t\t\t\tlet allValues = fieldInfo.picklistvalues;\n\t\t\t\t\tlet reponseDataList = [];\n\t\t\t\t\tfor (let id in allValues) {\n\t\t\t\t\t\tif (allValues[id].toLowerCase().indexOf(searchValue) >= 0) {\n\t\t\t\t\t\t\treponseDataList.push({ label: allValues[id], value: id, id: id });\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (reponseDataList.length <= 0) {\n\t\t\t\t\t\t$(inputElement).val('');\n\t\t\t\t\t\treponseDataList.push({\n\t\t\t\t\t\t\tlabel: app.vtranslate('JS_NO_RESULTS_FOUND'),\n\t\t\t\t\t\t\ttype: 'no results'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tresponse(reponseDataList);\n\t\t\t\t},\n\t\t\t\tselect: function(event, ui) {\n\t\t\t\t\tvar selectedItemData = ui.item;\n\t\t\t\t\t//To stop selection if no results is selected\n\t\t\t\t\tif (typeof selectedItemData.type !== 'undefined' && selectedItemData.type == 'no results') {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\tselectedItemData.name = selectedItemData.value;\n\t\t\t\t\tvar element = $(this);\n\t\t\t\t\tvar parentElem = element.closest('.fieldValue');\n\t\t\t\t\tvar sourceField = parentElem.find('input[class=\"sourceField\"]');\n\t\t\t\t\tvar sourceFieldDisplay = sourceField.attr('name') + '_display';\n\t\t\t\t\tvar fieldDisplayElement = $('input[name=\"' + sourceFieldDisplay + '\"]', parentElem);\n\t\t\t\t\tsourceField.val(selectedItemData.id);\n\t\t\t\t\tthis.value = selectedItemData.label;\n\t\t\t\t\tfieldDisplayElement.attr('readonly', true);\n\t\t\t\t\treturn false;\n\t\t\t\t},\n\t\t\t\tchange: function(event, ui) {},\n\t\t\t\topen: function(event, ui) {\n\t\t\t\t\t//To Make the menu come up in the case of quick create\n\t\t\t\t\t$(this)\n\t\t\t\t\t\t.data('ui-autocomplete')\n\t\t\t\t\t\t.menu.element.css('z-index', '100001');\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\treferenceModulePopupRegisterEvent: function(container) {\n\t\t\tcontainer.on('click', '.relatedPopup', e => {\n\t\t\t\tthis.showRecordsList(e);\n\t\t\t});\n\t\t\tlet moduleList = container.find('.referenceModulesList');\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(container.find('.referenceModulesList:visible'));\n\t\t\tmoduleList.on('change', e => {\n\t\t\t\tlet element = $(e.currentTarget);\n\t\t\t\tlet parentElem = element.closest('.fieldValue');\n\t\t\t\tlet popupReferenceModule = element.val();\n\t\t\t\tlet referenceModuleElement = $('input[name=\"popupReferenceModule\"]', parentElem);\n\t\t\t\tlet prevSelectedReferenceModule = referenceModuleElement.val();\n\t\t\t\treferenceModuleElement.val(popupReferenceModule);\n\t\t\t\t//If Reference module is changed then we should clear the previous value\n\t\t\t\tif (prevSelectedReferenceModule != popupReferenceModule) {\n\t\t\t\t\tparentElem.find('.clearReferenceSelection').trigger('click');\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tgetReferencedModuleName: function(parenElement) {\n\t\t\treturn $('input[name=\"popupReferenceModule\"]', parenElement).val();\n\t\t},\n\t\tsearchModuleNames: function(params) {\n\t\t\tvar aDeferred = $.Deferred();\n\n\t\t\tif (typeof params.module === 'undefined') {\n\t\t\t\tparams.module = app.getModuleName();\n\t\t\t}\n\n\t\t\tif (typeof params.action === 'undefined') {\n\t\t\t\tparams.action = 'BasicAjax';\n\t\t\t}\n\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function(data) {\n\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t})\n\t\t\t\t.fail(function(error) {\n\t\t\t\t\taDeferred.reject();\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/**\n\t\t * Function to get reference search params\n\t\t */\n\t\tgetReferenceSearchParams: function(element) {\n\t\t\tvar tdElement = $(element).closest('.fieldValue');\n\t\t\tvar params = {};\n\t\t\tvar searchModule = this.getReferencedModuleName(tdElement);\n\t\t\tparams.search_module = searchModule;\n\t\t\treturn params;\n\t\t},\n\t\t/**\n\t\t * Function which will handle the reference auto complete event registrations\n\t\t * @params - container <jQuery> - element in which auto complete fields needs to be searched\n\t\t */\n\t\tregisterAutoCompleteFields: function(container) {\n\t\t\tvar thisInstance = this;\n\t\t\tcontainer.find('input.autoComplete').autocomplete({\n\t\t\t\tdelay: '600',\n\t\t\t\tminLength: '3',\n\t\t\t\tsource: function(request, response) {\n\t\t\t\t\t//element will be array of dom elements\n\t\t\t\t\t//here this refers to auto complete instance\n\t\t\t\t\tvar inputElement = $(this.element[0]);\n\t\t\t\t\tvar searchValue = request.term;\n\t\t\t\t\tvar params = thisInstance.getReferenceSearchParams(inputElement);\n\t\t\t\t\tparams.search_value = searchValue;\n\t\t\t\t\t//params.parent_id = app.getRecordId();\n\t\t\t\t\t//params.parent_module = app.getModuleName();\n\t\t\t\t\tthisInstance.searchModuleNames(params).done(function(data) {\n\t\t\t\t\t\tvar reponseDataList = [];\n\t\t\t\t\t\tvar serverDataFormat = data.result;\n\t\t\t\t\t\tif (serverDataFormat.length <= 0) {\n\t\t\t\t\t\t\t$(inputElement).val('');\n\t\t\t\t\t\t\tserverDataFormat = new Array({\n\t\t\t\t\t\t\t\tlabel: app.vtranslate('JS_NO_RESULTS_FOUND'),\n\t\t\t\t\t\t\t\ttype: 'no results'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor (var id in serverDataFormat) {\n\t\t\t\t\t\t\tvar responseData = serverDataFormat[id];\n\t\t\t\t\t\t\treponseDataList.push(responseData);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresponse(reponseDataList);\n\t\t\t\t\t\tapp.event.trigger('EditView.AfterSearch', {\n\t\t\t\t\t\t\tfield: inputElement,\n\t\t\t\t\t\t\tparams: params\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tselect: function(event, ui) {\n\t\t\t\t\tvar selectedItemData = ui.item;\n\t\t\t\t\t//To stop selection if no results is selected\n\t\t\t\t\tif (typeof selectedItemData.type !== 'undefined' && selectedItemData.type == 'no results') {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\tselectedItemData.name = selectedItemData.value;\n\t\t\t\t\tvar element = $(this);\n\t\t\t\t\tvar tdElement = element.closest('.fieldValue');\n\t\t\t\t\tthisInstance.setReferenceFieldValue(tdElement, selectedItemData);\n\t\t\t\t},\n\t\t\t\tchange: function(event, ui) {\n\t\t\t\t\tvar element = $(this);\n\t\t\t\t\t//if you dont have readonly attribute means the user didnt select the item\n\t\t\t\t\tif (element.attr('readonly') == undefined) {\n\t\t\t\t\t\telement\n\t\t\t\t\t\t\t.closest('.fieldValue')\n\t\t\t\t\t\t\t.find('.clearReferenceSelection')\n\t\t\t\t\t\t\t.trigger('click');\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\topen: function(event, ui) {\n\t\t\t\t\t//To Make the menu come up in the case of quick create\n\t\t\t\t\t$(this)\n\t\t\t\t\t\t.data('ui-autocomplete')\n\t\t\t\t\t\t.menu.element.css('z-index', '100001');\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function which will register reference field clear event\n\t\t * @params - container <jQuery> - element in which auto complete fields needs to be searched\n\t\t */\n\t\tregisterClearReferenceSelectionEvent: function(container) {\n\t\t\tvar thisInstance = this;\n\t\t\tcontainer.on('click', '.clearReferenceSelection', function(e) {\n\t\t\t\tvar element = $(e.currentTarget);\n\t\t\t\tthisInstance.clearFieldValue(element);\n\t\t\t\telement\n\t\t\t\t\t.closest('.fieldValue')\n\t\t\t\t\t.find('.sourceField')\n\t\t\t\t\t.trigger(Vtiger_Edit_Js.referenceDeSelectionEvent);\n\t\t\t\te.preventDefault();\n\t\t\t});\n\t\t},\n\t\tclearFieldValue: function(element) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar fieldValueContener = element.closest('.fieldValue');\n\t\t\tvar fieldNameElement = fieldValueContener.find('.sourceField');\n\t\t\tvar fieldName = fieldNameElement.attr('name');\n\t\t\tvar referenceModule = fieldValueContener.find('input[name=\"popupReferenceModule\"]').val();\n\t\t\tvar formElement = fieldValueContener.closest('form');\n\n\t\t\tfieldNameElement.val('');\n\t\t\tfieldValueContener\n\t\t\t\t.find('#' + fieldName + '_display')\n\t\t\t\t.removeAttr('readonly')\n\t\t\t\t.val('');\n\t\t\tapp.event.trigger('EditView.ClearField', { fieldName: fieldName, referenceModule: referenceModule });\n\t\t\tvar mappingRelatedField = this.getMappingRelatedField(fieldName, referenceModule, formElement);\n\t\t\t$.each(mappingRelatedField, function(key, value) {\n\t\t\t\tvar mapFieldElement = formElement.find('[name=\"' + key + '\"]');\n\t\t\t\tif (mapFieldElement.is('select')) {\n\t\t\t\t\tmapFieldElement.val(mapFieldElement.find('option:first').val()).trigger('change');\n\t\t\t\t} else {\n\t\t\t\t\tmapFieldElement.val('');\n\t\t\t\t}\n\t\t\t\tvar mapFieldDisplayElement = formElement.find('input[name=\"' + key + '_display\"]');\n\t\t\t\tif (mapFieldDisplayElement.length > 0) {\n\t\t\t\t\tmapFieldDisplayElement.val('').attr('readonly', false);\n\t\t\t\t\tvar referenceModulesList = formElement.find(\n\t\t\t\t\t\t'#' + thisInstance.moduleName + '_editView_fieldName_' + key + '_dropDown'\n\t\t\t\t\t);\n\t\t\t\t\tif (referenceModulesList.length > 0 && value[1]) {\n\t\t\t\t\t\treferenceModulesList.val(referenceModulesList.find('option:first').val()).trigger('change');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function which will register event to prevent form submission on pressing on enter\n\t\t * @params - container <jQuery> - element in which auto complete fields needs to be searched\n\t\t */\n\t\tregisterPreventingEnterSubmitEvent: function(container) {\n\t\t\tcontainer.on('keypress', function(e) {\n\t\t\t\t//Stop the submit when enter is pressed in the form\n\t\t\t\tvar currentElement = $(e.target);\n\t\t\t\tif (e.which == 13 && !currentElement.is('textarea')) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterTimeFields: function(container) {\n\t\t\tapp.registerEventForClockPicker();\n\t\t\tApp.Fields.Date.register(container);\n\t\t\tApp.Fields.DateTime.register(container);\n\t\t},\n\t\treferenceCreateHandler: function(container) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar postQuickCreateSave = function(data) {\n\t\t\t\tthisInstance.setReferenceFieldValue(container, {\n\t\t\t\t\tname: data.result._recordLabel,\n\t\t\t\t\tid: data.result._recordId\n\t\t\t\t});\n\t\t\t};\n\t\t\tvar params = { callbackFunction: postQuickCreateSave };\n\t\t\tif (app.getViewName() === 'Edit' && !app.getRecordId()) {\n\t\t\t\tvar formElement = this.getForm();\n\t\t\t\tvar formData = formElement.serializeFormData();\n\t\t\t\tfor (var i in formData) {\n\t\t\t\t\tif (!formData[i] || $.inArray(i, ['_csrf', 'action']) != -1) {\n\t\t\t\t\t\tdelete formData[i];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tparams.data = {};\n\t\t\t\tparams.data.sourceRecordData = formData;\n\t\t\t}\n\t\t\tvar referenceModuleName = this.getReferencedModuleName(container);\n\t\t\tVtiger_Header_Js.getInstance().quickCreateModule(referenceModuleName, params);\n\t\t},\n\t\t/**\n\t\t * Function which will register event for create of reference record\n\t\t * This will allow users to create reference record from edit view of other record\n\t\t */\n\t\tregisterReferenceCreate: function(container) {\n\t\t\tvar thisInstance = this;\n\t\t\tcontainer.on('click', '.createReferenceRecord', function(e) {\n\t\t\t\tvar element = $(e.currentTarget);\n\t\t\t\tvar controlElementDiv = element.closest('.fieldValue');\n\t\t\t\tthisInstance.referenceCreateHandler(controlElementDiv);\n\t\t\t});\n\t\t},\n\t\taddressFieldsMapping: [\n\t\t\t'buildingnumber',\n\t\t\t'localnumber',\n\t\t\t'addresslevel1',\n\t\t\t'addresslevel2',\n\t\t\t'addresslevel3',\n\t\t\t'addresslevel4',\n\t\t\t'addresslevel5',\n\t\t\t'addresslevel6',\n\t\t\t'addresslevel7',\n\t\t\t'addresslevel8',\n\t\t\t'pobox'\n\t\t],\n\t\taddressFieldsMappingBlockID: {\n\t\t\tLBL_ADDRESS_INFORMATION: 'a',\n\t\t\tLBL_ADDRESS_MAILING_INFORMATION: 'b',\n\t\t\tLBL_ADDRESS_DELIVERY_INFORMATION: 'c'\n\t\t},\n\t\taddressFieldsData: false,\n\t\t/**\n\t\t * Function to register event for copying addresses\n\t\t */\n\t\tregisterEventForCopyAddress: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar account_id = false;\n\t\t\tvar contact_id = false;\n\t\t\tvar lead_id = false;\n\t\t\tvar vendor_id = false;\n\t\t\t$(\n\t\t\t\t'#EditView .js-toggle-panel:not(.inventoryHeader):not(.inventoryItems) .fieldValue, #EditView .js-toggle-panel:not(.inventoryHeader):not(.inventoryItems) .fieldLabel'\n\t\t\t).each(function(index) {\n\t\t\t\tvar block = $(this);\n\t\t\t\tvar referenceModulesList = false;\n\t\t\t\tvar relatedField = block.find('[name=\"popupReferenceModule\"]').val();\n\t\t\t\tif (relatedField == 'Accounts') {\n\t\t\t\t\taccount_id = block.find('.sourceField').attr('name');\n\t\t\t\t}\n\t\t\t\tif (relatedField == 'Contacts') {\n\t\t\t\t\tcontact_id = block.find('.sourceField').attr('name');\n\t\t\t\t}\n\t\t\t\tif (relatedField == 'Leads') {\n\t\t\t\t\tlead_id = block.find('.sourceField').attr('name');\n\t\t\t\t}\n\t\t\t\tif (relatedField == 'Vendors') {\n\t\t\t\t\tvendor_id = block.find('.sourceField').attr('name');\n\t\t\t\t}\n\t\t\t\treferenceModulesList = block.find('.referenceModulesList');\n\t\t\t\tif (referenceModulesList.length > 0) {\n\t\t\t\t\t$.each(referenceModulesList.find('option'), function(key, data) {\n\t\t\t\t\t\tif (data.value == 'Accounts') {\n\t\t\t\t\t\t\taccount_id = block.find('.sourceField').attr('name');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (data.value == 'Contacts') {\n\t\t\t\t\t\t\tcontact_id = block.find('.sourceField').attr('name');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (data.value == 'Leads') {\n\t\t\t\t\t\t\tlead_id = block.find('.sourceField').attr('name');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (data.value == 'Vendors') {\n\t\t\t\t\t\t\tvendor_id = block.find('.sourceField').attr('name');\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (account_id == false) {\n\t\t\t\t$('.copyAddressFromAccount').addClass('d-none');\n\t\t\t} else {\n\t\t\t\t$('.copyAddressFromAccount').on('click', function(e) {\n\t\t\t\t\tvar element = $(this);\n\t\t\t\t\tvar block = element.closest('.js-toggle-panel');\n\t\t\t\t\tvar from = element.data('label');\n\t\t\t\t\tvar to = block.data('label');\n\t\t\t\t\tvar recordRelativeAccountId = $('[name=\"' + account_id + '\"]').val();\n\n\t\t\t\t\tif (recordRelativeAccountId == '' || recordRelativeAccountId == '0') {\n\t\t\t\t\t\tVtiger_Helper_Js.showPnotify(app.vtranslate('JS_PLEASE_SELECT_AN_ACCOUNT_TO_COPY_ADDRESS'));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar recordRelativeAccountName = $('#' + account_id + '_display').val();\n\t\t\t\t\t\tvar data = {\n\t\t\t\t\t\t\trecord: recordRelativeAccountId,\n\t\t\t\t\t\t\tselectedName: recordRelativeAccountName,\n\t\t\t\t\t\t\tmodule: 'Accounts'\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tthisInstance.copyAddressDetails(from, to, data, element.closest('.js-toggle-panel'));\n\t\t\t\t\t\telement.attr('checked', 'checked');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (contact_id == false) {\n\t\t\t\t$('.copyAddressFromContact').addClass('d-none');\n\t\t\t} else {\n\t\t\t\t$('.copyAddressFromContact').on('click', function(e) {\n\t\t\t\t\tvar element = $(this);\n\t\t\t\t\tvar block = element.closest('.js-toggle-panel');\n\t\t\t\t\tvar from = element.data('label');\n\t\t\t\t\tvar to = block.data('label');\n\t\t\t\t\tvar recordRelativeAccountId = $('[name=\"' + contact_id + '\"]').val();\n\t\t\t\t\tif (recordRelativeAccountId == '' || recordRelativeAccountId == '0') {\n\t\t\t\t\t\tVtiger_Helper_Js.showPnotify(app.vtranslate('JS_PLEASE_SELECT_AN_CONTACT_TO_COPY_ADDRESS'));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar recordRelativeAccountName = $('#' + contact_id + '_display').val();\n\t\t\t\t\t\tvar data = {\n\t\t\t\t\t\t\trecord: recordRelativeAccountId,\n\t\t\t\t\t\t\tselectedName: recordRelativeAccountName,\n\t\t\t\t\t\t\tmodule: 'Contacts'\n\t\t\t\t\t\t};\n\t\t\t\t\t\tthisInstance.copyAddressDetails(from, to, data, element.closest('.js-toggle-panel'));\n\t\t\t\t\t\telement.attr('checked', 'checked');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (lead_id == false) {\n\t\t\t\t$('.copyAddressFromLead').addClass('d-none');\n\t\t\t} else {\n\t\t\t\t$('.copyAddressFromLead').on('click', function(e) {\n\t\t\t\t\tvar element = $(this);\n\t\t\t\t\tvar block = element.closest('.js-toggle-panel');\n\t\t\t\t\tvar from = element.data('label');\n\t\t\t\t\tvar to = block.data('label');\n\t\t\t\t\tvar recordRelativeAccountId = $('[name=\"' + lead_id + '\"]').val();\n\t\t\t\t\tif (recordRelativeAccountId == '' || recordRelativeAccountId == '0') {\n\t\t\t\t\t\tVtiger_Helper_Js.showPnotify(app.vtranslate('JS_PLEASE_SELECT_AN_LEAD_TO_COPY_ADDRESS'));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar recordRelativeAccountName = $('#' + lead_id + '_display').val();\n\t\t\t\t\t\tvar data = {\n\t\t\t\t\t\t\trecord: recordRelativeAccountId,\n\t\t\t\t\t\t\tselectedName: recordRelativeAccountName,\n\t\t\t\t\t\t\tmodule: 'Leads'\n\t\t\t\t\t\t};\n\t\t\t\t\t\tthisInstance.copyAddressDetails(from, to, data, element.closest('.js-toggle-panel'));\n\t\t\t\t\t\telement.attr('checked', 'checked');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (vendor_id == false) {\n\t\t\t\t$('.copyAddressFromVendor').addClass('d-none');\n\t\t\t} else {\n\t\t\t\t$('.copyAddressFromVendor').on('click', function(e) {\n\t\t\t\t\tvar element = $(this);\n\t\t\t\t\tvar block = element.closest('.js-toggle-panel');\n\t\t\t\t\tvar from = element.data('label');\n\t\t\t\t\tvar to = block.data('label');\n\t\t\t\t\tvar recordRelativeAccountId = $('[name=\"' + vendor_id + '\"]').val();\n\t\t\t\t\tif (recordRelativeAccountId == '' || recordRelativeAccountId == '0') {\n\t\t\t\t\t\tVtiger_Helper_Js.showPnotify(app.vtranslate('JS_PLEASE_SELECT_AN_VENDOR_TO_COPY_ADDRESS'));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar recordRelativeAccountName = $('#' + vendor_id + '_display').val();\n\t\t\t\t\t\tvar data = {\n\t\t\t\t\t\t\trecord: recordRelativeAccountId,\n\t\t\t\t\t\t\tselectedName: recordRelativeAccountName,\n\t\t\t\t\t\t\tmodule: 'Vendors'\n\t\t\t\t\t\t};\n\t\t\t\t\t\tthisInstance.copyAddressDetails(from, to, data, element.closest('.js-toggle-panel'));\n\t\t\t\t\t\telement.attr('checked', 'checked');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t$('#EditView .js-toggle-panel').each(function(index) {\n\t\t\t\tvar hideCopyAddressLabel = true;\n\t\t\t\t$(this)\n\t\t\t\t\t.find('.adressAction button')\n\t\t\t\t\t.each(function(index) {\n\t\t\t\t\t\tif ($(this).hasClass('d-none') == false) {\n\t\t\t\t\t\t\thideCopyAddressLabel = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\tif (hideCopyAddressLabel) {\n\t\t\t\t\t$(this)\n\t\t\t\t\t\t.find('.copyAddressLabel')\n\t\t\t\t\t\t.addClass('d-none');\n\t\t\t\t}\n\t\t\t});\n\t\t\t$('.copyAddressFromMain').on('click', function(e) {\n\t\t\t\tvar element = $(this);\n\t\t\t\tvar block = element.closest('.js-toggle-panel');\n\t\t\t\tvar from = element.data('label');\n\t\t\t\tvar to = block.data('label');\n\t\t\t\tthisInstance.copyAddress(from, to, false, false);\n\t\t\t});\n\t\t\t$('.copyAddressFromMailing').on('click', function(e) {\n\t\t\t\tvar element = $(this);\n\t\t\t\tvar block = element.closest('.js-toggle-panel');\n\t\t\t\tvar from = element.data('label');\n\t\t\t\tvar to = block.data('label');\n\t\t\t\tthisInstance.copyAddress(from, to, false, false);\n\t\t\t});\n\t\t\t$('.copyAddressFromDelivery').on('click', function(e) {\n\t\t\t\tvar element = $(this);\n\t\t\t\tvar block = element.closest('.js-toggle-panel');\n\t\t\t\tvar from = element.data('label');\n\t\t\t\tvar to = block.data('label');\n\t\t\t\tthisInstance.copyAddress(from, to, false, false);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function which will copy the address details\n\t\t */\n\t\tcopyAddressDetails: function(from, to, data, container) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar sourceModule = data.module;\n\t\t\tapp.getRecordDetails(data).done(function(data) {\n\t\t\t\tvar response = data['result'];\n\t\t\t\tthisInstance.addressFieldsData = response;\n\t\t\t\tthisInstance.copyAddress(from, to, true, sourceModule);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to copy address between fields\n\t\t * @param strings which accepts value as either odd or even\n\t\t */\n\t\tcopyAddress: function(fromLabel, toLabel, relatedRecord, sourceModule) {\n\t\t\tconst thisInstance = this;\n\t\t\tlet formElement = this.getForm(),\n\t\t\t\tstatus = false,\n\t\t\t\taddressMapping = this.addressFieldsMapping,\n\t\t\t\tBlockIds = this.addressFieldsMappingBlockID,\n\t\t\t\tfrom = BlockIds[fromLabel];\n\t\t\tif (relatedRecord === false || sourceModule === false) from = BlockIds[fromLabel];\n\t\t\tlet to = BlockIds[toLabel],\n\t\t\t\tkey,\n\t\t\t\tfromElement,\n\t\t\t\tfromElementLabel,\n\t\t\t\tnameElementFrom,\n\t\t\t\tnameElementTo;\n\t\t\tfor (key in addressMapping) {\n\t\t\t\tnameElementFrom = addressMapping[key] + from;\n\t\t\t\tnameElementTo = addressMapping[key] + to;\n\t\t\t\tif (relatedRecord) {\n\t\t\t\t\tfromElement = thisInstance.addressFieldsData['data'][nameElementFrom];\n\t\t\t\t\tfromElementLabel = thisInstance.addressFieldsData['displayData'][nameElementFrom];\n\t\t\t\t} else {\n\t\t\t\t\tfromElement = formElement.find('[name=\"' + nameElementFrom + '\"]').val();\n\t\t\t\t\tfromElementLabel = formElement.find('[name=\"' + nameElementFrom + '_display\"]').val();\n\t\t\t\t}\n\t\t\t\tlet toElement = formElement.find('[name=\"' + nameElementTo + '\"]'),\n\t\t\t\t\ttoElementLable = formElement.find('[name=\"' + nameElementTo + '_display\"]');\n\t\t\t\tif (fromElement !== '' && fromElement !== '0' && fromElement !== undefined) {\n\t\t\t\t\tif (toElementLable.length > 0) toElementLable.attr('readonly', true);\n\t\t\t\t\tstatus = true;\n\t\t\t\t\ttoElement.val(fromElement);\n\t\t\t\t\ttoElementLable.val(fromElementLabel);\n\t\t\t\t\tif (toElement.is('[data-select2-id]')) {\n\t\t\t\t\t\tif (toElement.val() !== fromElement) {\n\t\t\t\t\t\t\ttoElement.val('');\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttoElement.trigger('change');\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\ttoElement.attr('readonly', false);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (status === false) {\n\t\t\t\tlet errorMsg;\n\t\t\t\tif (sourceModule === 'Accounts') {\n\t\t\t\t\terrorMsg = 'JS_SELECTED_ACCOUNT_DOES_NOT_HAVE_AN_ADDRESS';\n\t\t\t\t} else if (sourceModule === 'Contacts') {\n\t\t\t\t\terrorMsg = 'JS_SELECTED_CONTACT_DOES_NOT_HAVE_AN_ADDRESS';\n\t\t\t\t} else {\n\t\t\t\t\terrorMsg = 'JS_DOES_NOT_HAVE_AN_ADDRESS';\n\t\t\t\t}\n\t\t\t\tVtiger_Helper_Js.showPnotify(app.vtranslate(errorMsg));\n\t\t\t}\n\t\t},\n\t\tregisterReferenceSelectionEvent: function(container) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar relategField = container.find(\"input[name*='addresslevel']\");\n\t\t\trelategField.on(Vtiger_Edit_Js.referenceSelectionEvent, function(e, data) {\n\t\t\t\tvar blockContainer = $(e.currentTarget).closest('.js-toggle-panel');\n\t\t\t\tthisInstance.copyAddressDetailsRef(data, blockContainer);\n\t\t\t});\n\t\t},\n\t\tcopyAddressDetailsRef: function(data, container) {\n\t\t\tvar thisInstance = this;\n\t\t\tapp.getRecordDetails(data)\n\t\t\t\t.done(function(data) {\n\t\t\t\t\tvar response = data['result'];\n\t\t\t\t\tthisInstance.mapAddressDetails(response, container);\n\t\t\t\t})\n\t\t\t\t.fail(function(error, err) {});\n\t\t},\n\t\tmapAddressDetails: function(result, container) {\n\t\t\tfor (var key in result) {\n\t\t\t\tif (key.indexOf('addresslevel') != -1) {\n\t\t\t\t\tif (container.find('[name=\"' + key + '\"]').length != 0) {\n\t\t\t\t\t\tcontainer.find('[name=\"' + key + '\"]').val(result['data'][key]);\n\t\t\t\t\t\tcontainer.find('[name=\"' + key + '\"]').attr('readonly', true);\n\t\t\t\t\t\tcontainer.find('[name=\"' + key + '_display\"]').val(result['displayData'][key]);\n\t\t\t\t\t\tcontainer.find('[name=\"' + key + '_display\"]').attr('readonly', true);\n\t\t\t\t\t}\n\t\t\t\t\tif (\n\t\t\t\t\t\tcontainer.find('[name=\"' + key + 'a\"]').length != 0 &&\n\t\t\t\t\t\tcontainer.find('[name=\"' + key + 'a\"]').val() == 0 &&\n\t\t\t\t\t\tresult['data'][key] != 0\n\t\t\t\t\t) {\n\t\t\t\t\t\tcontainer.find('[name=\"' + key + 'a\"]').val(result['data'][key]);\n\t\t\t\t\t\tcontainer.find('[name=\"' + key + 'a\"]').attr('readonly', true);\n\t\t\t\t\t\tcontainer.find('[name=\"' + key + 'a_display\"]').val(result['displayData'][key]);\n\t\t\t\t\t\tcontainer.find('[name=\"' + key + 'a_display\"]').attr('readonly', true);\n\t\t\t\t\t}\n\t\t\t\t\tif (\n\t\t\t\t\t\tcontainer.find('[name=\"' + key + 'b\"]').length != 0 &&\n\t\t\t\t\t\tcontainer.find('[name=\"' + key + 'b\"]').val() == 0 &&\n\t\t\t\t\t\tresult['data'][key] != 0\n\t\t\t\t\t) {\n\t\t\t\t\t\tcontainer.find('[name=\"' + key + 'b\"]').val(result['data'][key]);\n\t\t\t\t\t\tcontainer.find('[name=\"' + key + 'b\"]').attr('readonly', true);\n\t\t\t\t\t\tcontainer.find('[name=\"' + key + 'b_display\"]').val(result['displayData'][key]);\n\t\t\t\t\t\tcontainer.find('[name=\"' + key + 'b_display\"]').attr('readonly', true);\n\t\t\t\t\t}\n\t\t\t\t\tif (\n\t\t\t\t\t\tcontainer.find('[name=\"' + key + 'c\"]').length != 0 &&\n\t\t\t\t\t\tcontainer.find('[name=\"' + key + 'c\"]').val() == 0 &&\n\t\t\t\t\t\tresult['data'][key] != 0\n\t\t\t\t\t) {\n\t\t\t\t\t\tcontainer.find('[name=\"' + key + 'c\"]').val(result['data'][key]);\n\t\t\t\t\t\tcontainer.find('[name=\"' + key + 'c\"]').attr('readonly', true);\n\t\t\t\t\t\tcontainer.find('[name=\"' + key + 'c_display\"]').val(result['displayData'][key]);\n\t\t\t\t\t\tcontainer.find('[name=\"' + key + 'c_display\"]').attr('readonly', true);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tregisterMaskFields: function(container) {\n\t\t\tcontainer.find('[data-inputmask]').inputmask();\n\t\t},\n\t\ttriggerDisplayTypeEvent: function() {\n\t\t\tvar widthType = app.cacheGet('widthType', 'narrowWidthType');\n\t\t\tif (widthType) {\n\t\t\t\tvar elements = $('#EditView').find('.fieldValue,.fieldLabel');\n\t\t\t\telements.addClass(widthType);\n\t\t\t}\n\t\t},\n\t\tregisterSubmitEvent: function() {\n\t\t\tvar editViewForm = this.getForm();\n\t\t\teditViewForm.on('submit', function(e) {\n\t\t\t\t//Form should submit only once for multiple clicks also\n\t\t\t\tif (typeof editViewForm.data('submit') !== 'undefined') {\n\t\t\t\t\treturn false;\n\t\t\t\t} else {\n\t\t\t\t\tdocument.progressLoader = $.progressIndicator({\n\t\t\t\t\t\tmessage: app.vtranslate('JS_SAVE_LOADER_INFO'),\n\t\t\t\t\t\tposition: 'html',\n\t\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\t\tenabled: true\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\teditViewForm\n\t\t\t\t\t\t.find('.js-toggle-panel')\n\t\t\t\t\t\t.find('.js-block-content')\n\t\t\t\t\t\t.removeClass('d-none');\n\t\t\t\t\tif (editViewForm.validationEngine('validate')) {\n\t\t\t\t\t\t//Once the form is submiting add data attribute to that form element\n\t\t\t\t\t\teditViewForm.data('submit', 'true');\n\t\t\t\t\t\t//on submit form trigger the recordPreSave event\n\t\t\t\t\t\tvar recordPreSaveEvent = $.Event(Vtiger_Edit_Js.recordPreSave);\n\t\t\t\t\t\teditViewForm.trigger(recordPreSaveEvent, { value: 'edit' });\n\t\t\t\t\t\tif (recordPreSaveEvent.isDefaultPrevented()) {\n\t\t\t\t\t\t\t//If duplicate record validation fails, form should submit again\n\t\t\t\t\t\t\tdocument.progressLoader.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\teditViewForm.removeData('submit');\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t//If validation fails, form should submit again\n\t\t\t\t\t\tdocument.progressLoader.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\teditViewForm.removeData('submit');\n\t\t\t\t\t\tapp.formAlignmentAfterValidation(editViewForm);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/*\n\t\t * Function to check the view permission of a record after save\n\t\t */\n\t\tregisterRecordPreSaveEventEvent: function(form) {\n\t\t\tform.on(Vtiger_Edit_Js.recordPreSave, function(e, data) {});\n\t\t},\n\t\t/**\n\t\t * Function to register event for setting up picklistdependency\n\t\t * for a module if exist on change of picklist value\n\t\t */\n\t\tregisterEventForPicklistDependencySetup: function(container) {\n\t\t\tlet picklistDependcyElemnt = $('[name=\"picklistDependency\"]', container);\n\t\t\tif (picklistDependcyElemnt.length <= 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet picklistDependencyMapping = JSON.parse(picklistDependcyElemnt.val());\n\n\t\t\tlet sourcePicklists = Object.keys(picklistDependencyMapping);\n\t\t\tif (sourcePicklists.length <= 0) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet sourcePickListNames = [],\n\t\t\t\ti;\n\t\t\tfor (i = 0; i < sourcePicklists.length; i++) {\n\t\t\t\tsourcePickListNames.push('[name=\"' + sourcePicklists[i] + '\"]');\n\t\t\t}\n\t\t\tsourcePickListNames = sourcePickListNames.join(',');\n\t\t\tlet sourcePickListElements = container.find(sourcePickListNames);\n\n\t\t\tsourcePickListElements.on('change', function(e) {\n\t\t\t\tlet currentElement = $(e.currentTarget),\n\t\t\t\t\tconfiguredDependencyObject = picklistDependencyMapping[currentElement.attr('name')],\n\t\t\t\t\ttargetObjectForSelectedSourceValue = configuredDependencyObject[currentElement.val()],\n\t\t\t\t\tpicklistmap = configuredDependencyObject['__DEFAULT__'];\n\n\t\t\t\tif (typeof targetObjectForSelectedSourceValue === 'undefined') {\n\t\t\t\t\ttargetObjectForSelectedSourceValue = picklistmap;\n\t\t\t\t}\n\t\t\t\t$.each(picklistmap, function(targetPickListName, targetPickListValues) {\n\t\t\t\t\tlet targetPickListMap = targetObjectForSelectedSourceValue[targetPickListName];\n\t\t\t\t\tif (typeof targetPickListMap === 'undefined') {\n\t\t\t\t\t\ttargetPickListMap = targetPickListValues;\n\t\t\t\t\t}\n\t\t\t\t\tlet targetPickList = $('[name=\"' + targetPickListName + '\"]', container);\n\t\t\t\t\tif (targetPickList.length <= 0) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tlet listOfAvailableOptions = targetPickList.data('availableOptions');\n\t\t\t\t\tif (typeof listOfAvailableOptions === 'undefined') {\n\t\t\t\t\t\tlistOfAvailableOptions = $('option', targetPickList);\n\t\t\t\t\t\ttargetPickList.data('available-options', listOfAvailableOptions);\n\t\t\t\t\t}\n\n\t\t\t\t\tlet targetOptions = new $(),\n\t\t\t\t\t\toptionSelector = [];\n\t\t\t\t\toptionSelector.push('');\n\t\t\t\t\tfor (i = 0; i < targetPickListMap.length; i++) {\n\t\t\t\t\t\toptionSelector.push(targetPickListMap[i]);\n\t\t\t\t\t}\n\n\t\t\t\t\t$.each(listOfAvailableOptions, function(i, e) {\n\t\t\t\t\t\tif ($.inArray($(e).val(), optionSelector) !== -1) {\n\t\t\t\t\t\t\ttargetOptions = targetOptions.add($(e));\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\ttargetPickList\n\t\t\t\t\t\t.html(targetOptions)\n\t\t\t\t\t\t.val(targetOptions.filter('[selected]').val())\n\t\t\t\t\t\t.trigger('change');\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t//To Trigger the change on load\n\t\t\tsourcePickListElements.trigger('change');\n\t\t},\n\t\tregisterLeavePageWithoutSubmit: function(form) {\n\t\t\tif (\n\t\t\t\ttypeof CKEDITOR !== 'undefined' &&\n\t\t\t\ttypeof CKEDITOR.instances !== 'undefined' &&\n\t\t\t\tObject.keys(CKEDITOR.instances).length\n\t\t\t) {\n\t\t\t\tCKEDITOR.on('instanceReady', function(e) {\n\t\t\t\t\tlet initialFormData = form.serialize();\n\t\t\t\t\twindow.onbeforeunload = function(e) {\n\t\t\t\t\t\tif (initialFormData != form.serialize() && form.data('submit') != 'true') {\n\t\t\t\t\t\t\treturn app.vtranslate('JS_CHANGES_WILL_BE_LOST');\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tlet initialFormData = form.serialize();\n\t\t\t\twindow.onbeforeunload = function(e) {\n\t\t\t\t\tif (initialFormData != form.serialize() && form.data('submit') != 'true') {\n\t\t\t\t\t\treturn app.vtranslate('JS_CHANGES_WILL_BE_LOST');\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\t\t},\n\t\tstretchCKEditor: function() {\n\t\t\tvar row = $('.js-editor').parents('.fieldRow');\n\t\t\tvar td = $('.js-editor').parent();\n\t\t\t$(row)\n\t\t\t\t.find('.fieldLabel')\n\t\t\t\t.remove();\n\t\t\t$(td).removeClass('col-md-10');\n\t\t\t$(td).addClass('col-md-12');\n\t\t},\n\t\t/**\n\t\t * Function to register event for ckeditor for description field\n\t\t */\n\t\tregisterEventForEditor: function() {\n\t\t\tvar form = this.getForm();\n\t\t\tvar thisInstance = this;\n\t\t\t$.each(form.find('.js-editor'), function(key, data) {\n\t\t\t\tthisInstance.loadEditorElement($(data));\n\t\t\t});\n\t\t},\n\t\tloadEditorElement: function(noteContentElement) {\n\t\t\tvar customConfig = {};\n\t\t\tif (noteContentElement.hasClass('js-editor--basic')) {\n\t\t\t\tcustomConfig.toolbar = 'Min';\n\t\t\t}\n\t\t\tif (noteContentElement.data('height')) {\n\t\t\t\tcustomConfig.height = noteContentElement.data('height');\n\t\t\t}\n\t\t\tnew App.Fields.Text.Editor(noteContentElement, customConfig);\n\t\t},\n\t\tregisterHelpInfo: function() {\n\t\t\tvar form = this.getForm();\n\t\t\tapp.showPopoverElementView(form.find('.js-help-info'));\n\t\t},\n\t\tregisterBlockAnimationEvent: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar detailContentsHolder = this.getForm();\n\t\t\tdetailContentsHolder.on('click', '.blockHeader', function(e) {\n\t\t\t\tconst target = $(e.target);\n\t\t\t\tif (\n\t\t\t\t\ttarget.is('input') ||\n\t\t\t\t\ttarget.is('button') ||\n\t\t\t\t\ttarget.parents().is('button') ||\n\t\t\t\t\ttarget.hasClass('js-stop-propagation') ||\n\t\t\t\t\ttarget.parents().hasClass('js-stop-propagation')\n\t\t\t\t) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tvar currentTarget = $(e.currentTarget)\n\t\t\t\t\t.find('.js-block-toggle')\n\t\t\t\t\t.not('.d-none');\n\t\t\t\tvar blockId = currentTarget.data('id');\n\t\t\t\tvar closestBlock = currentTarget.closest('.js-toggle-panel');\n\t\t\t\tvar bodyContents = closestBlock.find('.blockContent');\n\t\t\t\tvar data = currentTarget.data();\n\t\t\t\tvar module = app.getModuleName();\n\t\t\t\tvar hideHandler = function() {\n\t\t\t\t\tbodyContents.addClass('d-none');\n\t\t\t\t\tapp.cacheSet(module + '.' + blockId, 0);\n\t\t\t\t};\n\t\t\t\tvar showHandler = function() {\n\t\t\t\t\tbodyContents.removeClass('d-none');\n\t\t\t\t\tapp.cacheSet(module + '.' + blockId, 1);\n\t\t\t\t};\n\t\t\t\tif (data.mode == 'show') {\n\t\t\t\t\thideHandler();\n\t\t\t\t\tcurrentTarget.addClass('d-none');\n\t\t\t\t\tclosestBlock.find('[data-mode=\"hide\"]').removeClass('d-none');\n\t\t\t\t} else {\n\t\t\t\t\tshowHandler();\n\t\t\t\t\tcurrentTarget.addClass('d-none');\n\t\t\t\t\tclosestBlock.find(\"[data-mode='show']\").removeClass('d-none');\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterBlockStatusCheckOnLoad: function() {\n\t\t\tlet blocks = this.getForm().find('.js-toggle-panel');\n\t\t\tlet module = app.getModuleName();\n\t\t\tblocks.each(function(index, block) {\n\t\t\t\tlet currentBlock = $(block);\n\t\t\t\tlet dynamicAttr = currentBlock.attr('data-dynamic');\n\t\t\t\tif (typeof dynamicAttr !== typeof undefined && dynamicAttr !== false) {\n\t\t\t\t\tlet headerAnimationElement = currentBlock.find('.js-block-toggle').not('.d-none');\n\t\t\t\t\tlet bodyContents = currentBlock.find('.blockContent');\n\t\t\t\t\tlet blockId = headerAnimationElement.data('id');\n\t\t\t\t\tlet cacheKey = module + '.' + blockId;\n\t\t\t\t\tlet value = app.cacheGet(cacheKey, null);\n\t\t\t\t\tif (value != null) {\n\t\t\t\t\t\tif (value == 1) {\n\t\t\t\t\t\t\theaderAnimationElement.addClass('d-none');\n\t\t\t\t\t\t\tcurrentBlock.find(\"[data-mode='show']\").removeClass('d-none');\n\t\t\t\t\t\t\tbodyContents.removeClass('d-none');\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\theaderAnimationElement.addClass('d-none');\n\t\t\t\t\t\t\tcurrentBlock.find(\"[data-mode='hide']\").removeClass('d-none');\n\t\t\t\t\t\t\tbodyContents.addClass('d-none');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterAutoloadAddress: function() {\n\t\t\tthis.getForm()\n\t\t\t\t.find('.js-search-address')\n\t\t\t\t.each(function(index, item) {\n\t\t\t\t\tlet search = $(item);\n\t\t\t\t\tlet container = search.closest('.js-block-content');\n\t\t\t\t\tlet input = search.find('.js-autoload-address');\n\t\t\t\t\tinput.autocomplete({\n\t\t\t\t\t\tsource: function(request, response) {\n\t\t\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\t\t\t\taction: 'Fields',\n\t\t\t\t\t\t\t\tmode: 'findAddress',\n\t\t\t\t\t\t\t\ttype: search.find('.js-select-operator').val(),\n\t\t\t\t\t\t\t\tvalue: request.term\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.done(function(requestData) {\n\t\t\t\t\t\t\t\t\tif (requestData.result === false) {\n\t\t\t\t\t\t\t\t\t\tVtiger_Helper_Js.showPnotify(app.vtranslate('JS_ERROR'));\n\t\t\t\t\t\t\t\t\t} else if (requestData.result.length) {\n\t\t\t\t\t\t\t\t\t\tresponse(requestData.result);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tresponse([{ label: app.vtranslate('JS_NO_RESULTS_FOUND'), value: '' }]);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.fail(function(textStatus, errorThrown, jqXHR) {\n\t\t\t\t\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\t\t\t\t\ttext: jqXHR.responseJSON.error.message,\n\t\t\t\t\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\t\t\t\t\tanimation: 'show'\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tresponse([{ label: app.vtranslate('JS_NO_RESULTS_FOUND'), value: '' }]);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},\n\t\t\t\t\t\tminLength: input.data('min'),\n\t\t\t\t\t\tselect: function(event, ui) {\n\t\t\t\t\t\t\t$.each(ui.item.address, function(index, value) {\n\t\t\t\t\t\t\t\tlet field = container.find('.fieldValue [name^=' + index + ']');\n\t\t\t\t\t\t\t\tif (field.length && value) {\n\t\t\t\t\t\t\t\t\tif (typeof value !== 'object') {\n\t\t\t\t\t\t\t\t\t\tvalue = [value];\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t$.each(value, function(index, v) {\n\t\t\t\t\t\t\t\t\t\tlet select = false,\n\t\t\t\t\t\t\t\t\t\t\telement = false;\n\t\t\t\t\t\t\t\t\t\tif (field.prop('tagName') === 'SELECT') {\n\t\t\t\t\t\t\t\t\t\t\tif (typeof v === 'object') {\n\t\t\t\t\t\t\t\t\t\t\t\t$.each(v, function(index, x) {\n\t\t\t\t\t\t\t\t\t\t\t\t\telement = field.find('option[data-' + index + \"='\" + x + \"']\");\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (x && element.length) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tselect = element.val();\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\telement = field.find('option:contains(' + v + ')');\n\t\t\t\t\t\t\t\t\t\t\t\tif (v && element.length) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tselect = element.val();\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\telement = field.find('option[value=\"' + v + '\"]');\n\t\t\t\t\t\t\t\t\t\t\t\tif (v && element.length) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tselect = element.val();\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\tselect = v;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tif (select) {\n\t\t\t\t\t\t\t\t\t\t\tfield.val(select).change();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tfield.val('').change();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tui.item.value = input.val();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t},\n\t\tsetEnabledFields: function(element) {\n\t\t\tvar fieldValue = element.closest('.fieldValue');\n\t\t\tvar fieldName = fieldValue.find('input.sourceField').attr('name');\n\t\t\tvar fieldDisplay = fieldValue.find('#' + fieldName + '_display');\n\t\t\tfieldValue.find('button').removeAttr('disabled');\n\t\t\tif (fieldDisplay.val() == '') {\n\t\t\t\tfieldValue.find('input').removeAttr('readonly');\n\t\t\t}\n\t\t\tfieldValue.find('.referenceModulesListGroup').removeClass('d-none');\n\t\t\tvar placeholder = fieldDisplay.attr('placeholderDisabled');\n\t\t\tfieldDisplay.removeAttr('placeholderDisabled');\n\t\t\tfieldDisplay.attr('placeholder', placeholder);\n\t\t\tfieldValue.find('.referenceModulesList').attr('required', 'required');\n\t\t},\n\t\tsetDisabledFields: function(element) {\n\t\t\tvar fieldValue = element.closest('.fieldValue');\n\t\t\tvar fieldName = fieldValue.find('input.sourceField').attr('name');\n\t\t\tvar fieldDisplay = fieldValue.find('#' + fieldName + '_display');\n\t\t\tfieldValue.find('input').attr('readonly', 'readonly');\n\t\t\tfieldValue.find('button').attr('disabled', 'disabled');\n\t\t\tfieldValue.find('.referenceModulesListGroup').addClass('d-none');\n\t\t\tvar placeholder = fieldDisplay.attr('placeholder');\n\t\t\tfieldDisplay.removeAttr('placeholder');\n\t\t\tfieldDisplay.attr('placeholderDisabled', placeholder);\n\t\t\tfieldValue.find('.referenceModulesList').removeAttr('required');\n\t\t},\n\t\tgetMappingRelatedField: function(sourceField, sourceFieldModule, container) {\n\t\t\tconst mappingRelatedField = container.find('input[name=\"mappingRelatedField\"]').val();\n\t\t\tconst mappingRelatedModule = mappingRelatedField ? JSON.parse(mappingRelatedField) : [];\n\t\t\tif (\n\t\t\t\ttypeof mappingRelatedModule[sourceField] !== 'undefined' &&\n\t\t\t\ttypeof mappingRelatedModule[sourceField][sourceFieldModule] !== 'undefined'\n\t\t\t) {\n\t\t\t\treturn mappingRelatedModule[sourceField][sourceFieldModule];\n\t\t\t}\n\t\t\treturn [];\n\t\t},\n\t\tregisterValidationsFields: function(container) {\n\t\t\tvar params = app.validationEngineOptionsForRecord;\n\t\t\tcontainer.validationEngine(params);\n\t\t},\n\t\tcheckReferencesField: function(container, clear) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar activeProcess = false,\n\t\t\t\tactiveSubProcess = false;\n\t\t\tif (!CONFIG.fieldsReferencesDependent) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tcontainer.find('input[data-fieldtype=\"referenceLink\"]').each(function(index, element) {\n\t\t\t\telement = $(element);\n\t\t\t\tvar t = true;\n\t\t\t\tif (element.closest('.tab-pane').length > 0) {\n\t\t\t\t\tt = false;\n\t\t\t\t\tif (element.closest('.tab-pane.active').length > 0) {\n\t\t\t\t\t\tt = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tvar referenceLink = element.val();\n\t\t\t\tif (t && referenceLink != '' && referenceLink != '0') {\n\t\t\t\t\tactiveProcess = true;\n\t\t\t\t}\n\t\t\t});\n\t\t\tcontainer.find('input[data-fieldtype=\"referenceProcess\"]').each(function(index, element) {\n\t\t\t\telement = $(element);\n\t\t\t\tif (activeProcess) {\n\t\t\t\t\tthisInstance.setEnabledFields(element);\n\t\t\t\t} else {\n\t\t\t\t\tif (clear) {\n\t\t\t\t\t\tthisInstance.clearFieldValue(element);\n\t\t\t\t\t}\n\t\t\t\t\tthisInstance.setDisabledFields(element);\n\t\t\t\t}\n\n\t\t\t\tvar t = true;\n\t\t\t\tif (element.closest('.tab-pane').length > 0) {\n\t\t\t\t\tt = false;\n\t\t\t\t\tif (element.closest('.tab-pane.active').length > 0) {\n\t\t\t\t\t\tt = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvar referenceLink = element.val();\n\t\t\t\tif (t && referenceLink != '' && referenceLink != '0') {\n\t\t\t\t\tactiveSubProcess = true;\n\t\t\t\t}\n\t\t\t});\n\t\t\tcontainer.find('input[data-fieldtype=\"referenceSubProcess\"]').each(function(index, element) {\n\t\t\t\telement = $(element);\n\t\t\t\tvar processfieldElement = element.closest('.fieldValue');\n\t\t\t\tvar length = processfieldElement.find('.referenceModulesList option[disabled!=\"disabled\"]').length;\n\t\t\t\tif (activeSubProcess && length > 0) {\n\t\t\t\t\tthisInstance.setEnabledFields(element);\n\t\t\t\t} else {\n\t\t\t\t\tif (clear) {\n\t\t\t\t\t\tthisInstance.clearFieldValue(element);\n\t\t\t\t\t}\n\t\t\t\t\tthisInstance.setDisabledFields(element);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tcheckSubProcessModulesList: function(element) {\n\t\t\tvar option = element.find('option:selected');\n\t\t\tif (option.data('is-quickcreate') != 1) {\n\t\t\t\telement\n\t\t\t\t\t.closest('.fieldValue')\n\t\t\t\t\t.find('.createReferenceRecord')\n\t\t\t\t\t.addClass('d-none');\n\t\t\t} else {\n\t\t\t\telement\n\t\t\t\t\t.closest('.fieldValue')\n\t\t\t\t\t.find('.createReferenceRecord')\n\t\t\t\t\t.removeClass('d-none');\n\t\t\t}\n\t\t},\n\t\tcheckReferenceModulesList: function(container) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar processfieldElement = container.find('input[data-fieldtype=\"referenceProcess\"]').closest('.fieldValue');\n\t\t\tvar referenceProcess = processfieldElement.find('input[name=\"popupReferenceModule\"]').val();\n\t\t\tvar subProcessfieldElement = container\n\t\t\t\t.find('input[data-fieldtype=\"referenceSubProcess\"]')\n\t\t\t\t.closest('.fieldValue');\n\t\t\tVtiger_Helper_Js.hideOptions(\n\t\t\t\tsubProcessfieldElement.find('.referenceModulesList'),\n\t\t\t\t'parent',\n\t\t\t\treferenceProcess\n\t\t\t);\n\t\t\tvar subProcessValue = subProcessfieldElement.find('.referenceModulesList').val();\n\t\t\tsubProcessfieldElement.find('[name=\"popupReferenceModule\"]').val(subProcessValue);\n\t\t\tthisInstance.checkSubProcessModulesList(subProcessfieldElement.find('.referenceModulesList'));\n\t\t},\n\t\tregisterReferenceFields: function(container) {\n\t\t\tvar thisInstance = this;\n\t\t\tif (!CONFIG.fieldsReferencesDependent) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthisInstance.checkReferenceModulesList(container);\n\t\t\tthisInstance.checkReferencesField(container, false);\n\t\t\tcontainer.find('.sourceField').on(Vtiger_Edit_Js.referenceSelectionEvent, function(e, data) {\n\t\t\t\tthisInstance.checkReferencesField(container, true);\n\t\t\t});\n\t\t\tcontainer.find('.sourceField').on(Vtiger_Edit_Js.referenceDeSelectionEvent, function(e) {\n\t\t\t\tthisInstance.checkReferencesField(container, true);\n\t\t\t});\n\t\t\tcontainer\n\t\t\t\t.find('input[data-fieldtype=\"referenceProcess\"]')\n\t\t\t\t.closest('.fieldValue')\n\t\t\t\t.find('.referenceModulesList')\n\t\t\t\t.on('change', function() {\n\t\t\t\t\tthisInstance.checkReferenceModulesList(container);\n\t\t\t\t});\n\t\t\tcontainer\n\t\t\t\t.find('input[data-fieldtype=\"referenceSubProcess\"]')\n\t\t\t\t.closest('.fieldValue')\n\t\t\t\t.find('.referenceModulesList')\n\t\t\t\t.on('change', function(e) {\n\t\t\t\t\tthisInstance.checkSubProcessModulesList($(e.currentTarget));\n\t\t\t\t});\n\t\t},\n\t\tregisterFocusFirstField: function(container, afterTimeout) {\n\t\t\tlet elementToFocus, elementToFocusTabindex;\n\t\t\tif (afterTimeout === undefined && container.closest('.js-modal-container').length) {\n\t\t\t\tsetTimeout(_ => {\n\t\t\t\t\tthis.registerFocusFirstField(container, true);\n\t\t\t\t}, 500);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tcontainer\n\t\t\t\t.find(\n\t\t\t\t\t'.fieldValue input.form-control:not([type=hidden],.dateField,.clockPicker), .fieldValue input[type=checkbox], .select2-selection.form-control'\n\t\t\t\t)\n\t\t\t\t.each(function(i, e) {\n\t\t\t\t\tlet element = $(e);\n\t\t\t\t\tif (!element.prop('readonly') && !element.prop('disabled')) {\n\t\t\t\t\t\telement = element.get(0);\n\t\t\t\t\t\tif (element.type !== 'number' && element.type !== 'checkbox' && element.value !== undefined) {\n\t\t\t\t\t\t\tlet elemLen = element.value.length;\n\t\t\t\t\t\t\telement.selectionStart = elemLen;\n\t\t\t\t\t\t\telement.selectionEnd = elemLen;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (i === 0 || !elementToFocus) {\n\t\t\t\t\t\t\telementToFocus = element;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlet tabindex = $(element).attr('tabindex');\n\t\t\t\t\t\tif (tabindex > 0 && elementToFocusTabindex === undefined) {\n\t\t\t\t\t\t\telementToFocusTabindex = tabindex;\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (tabindex > 0 && tabindex < elementToFocusTabindex) {\n\t\t\t\t\t\t\telementToFocusTabindex = tabindex;\n\t\t\t\t\t\t\telementToFocus = element;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\tif (elementToFocus) {\n\t\t\t\telementToFocus.focus();\n\t\t\t}\n\t\t},\n\t\tregisterCopyValue: function(container) {\n\t\t\tcontainer.find('.fieldValue [data-copy-to-field]').on('change', function(e) {\n\t\t\t\tvar element = $(e.currentTarget);\n\t\t\t\tcontainer.find('[name=\"' + element.data('copyToField') + '\"]').val(element.val());\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register multi image upload fields\n\t\t * @param {HTMLElement|jQuery} container\n\t\t */\n\t\tregisterMultiImageFields(container) {\n\t\t\treturn App.Fields.MultiImage.register(container);\n\t\t},\n\t\t/**\n\t\t * Register inventory controller\n\t\t * @param {jQuery} container\n\t\t */\n\t\tregisterInventoryController(container) {\n\t\t\tif (typeof Vtiger_Inventory_Js !== 'undefined') {\n\t\t\t\tthis.inventoryController = Vtiger_Inventory_Js.getInventoryInstance(container);\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Function which will register basic events which will be used in quick create as well\n\t\t *\n\t\t */\n\t\tregisterBasicEvents: function(container) {\n\t\t\tthis.registerClearTreeSelectionEvent(container);\n\t\t\tthis.registerTreeAutoCompleteFields(container);\n\t\t\tthis.referenceModulePopupRegisterEvent(container);\n\t\t\tthis.registerAutoCompleteFields(container);\n\t\t\tthis.registerClearReferenceSelectionEvent(container);\n\t\t\tthis.registerPreventingEnterSubmitEvent(container);\n\t\t\tthis.registerTimeFields(container);\n\t\t\tthis.registerEventForPicklistDependencySetup(container);\n\t\t\tthis.registerRecordPreSaveEventEvent(container);\n\t\t\tthis.registerReferenceSelectionEvent(container);\n\t\t\tthis.registerMaskFields(container);\n\t\t\tthis.registerHelpInfo();\n\t\t\tthis.registerReferenceFields(container);\n\t\t\tthis.registerFocusFirstField(container);\n\t\t\tthis.registerCopyValue(container);\n\t\t\tthis.registerMultiImageFields(container);\n\t\t\tthis.registerReferenceCreate(container);\n\t\t\tApp.Fields.MultiEmail.register(container);\n\t\t\tApp.Fields.MultiDependField.register(container);\n\t\t\tApp.Fields.Tree.register(container);\n\t\t\tApp.Fields.MultiCurrency.register(container);\n\t\t},\n\t\tregisterEvents: function() {\n\t\t\tvar editViewForm = this.getForm();\n\t\t\tif (!this.proceedRegisterEvents()) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.registerInventoryController(editViewForm);\n\t\t\tthis.registerBlockAnimationEvent();\n\t\t\tthis.registerBlockStatusCheckOnLoad();\n\t\t\tthis.registerEventForEditor();\n\t\t\tthis.stretchCKEditor();\n\t\t\tthis.registerBasicEvents(editViewForm);\n\t\t\tthis.registerEventForCopyAddress();\n\t\t\tthis.registerSubmitEvent();\n\t\t\tthis.registerLeavePageWithoutSubmit(editViewForm);\n\t\t\tthis.registerValidationsFields(editViewForm);\n\t\t\tthis.registerAutoloadAddress();\n\t\t\teditViewForm.find('.js-form-submit-btn').prop('disabled', false);\n\t\t\t//this.triggerDisplayTypeEvent();\n\t\t}\n\t}\n);\n"],"names":["$","Class","moduleName","app","getModuleName","parentModule","getParentModuleName","moduleClassName","fallbackClassName","instance","window","Vtiger_Edit_Js","editInstance","getInstanceByModuleName","formElement","setForm","element","container","sourceModule","popupReferenceModule","val","sourceFieldElement","sourceField","attr","sourceRecordElement","sourceRecordId","length","isMultiple","data","filterFields","closest","mappingRelatedField","find","mappingRelatedModule","JSON","parse","undefined","each","index","value","mapFieldElement","params","fieldElement","multi_select","e","parentElem","target","getRecordsListParams","showRecordsList","modal","setSelectEvent","setReferenceFieldValue","thisInstance","sourceFieldDisplay","fieldDisplayElement","selectedName","name","id","trigger","decodeHTML","referenceSelectionEvent","validationEngine","getMappingRelatedField","getRecordDetails","done","response","event","key","getMappingValuesFromUrl","fieldinfo","mapFieldElementMultiselect","multipleAttr","splitValues","split","is","picklistvalues","hasOwnProperty","newOption","Option","append","appendTo","mapFieldDisplayElement","type","referenceModulesList","relationOperation","getRelationOperation","getUrlVar","on","clearFieldValue","currentTarget","preventDefault","autocomplete","request","inputElement","searchValue","term","toLowerCase","fieldInfo","allValues","reponseDataList","indexOf","push","label","vtranslate","ui","selectedItemData","item","menu","css","moduleList","Fields","Picklist","showSelect2ElementView","referenceModuleElement","prevSelectedReferenceModule","parenElement","aDeferred","Deferred","module","action","resolve","fail","error","reject","promise","tdElement","searchModule","getReferencedModuleName","search_module","getReferenceSearchParams","search_value","searchModuleNames","serverDataFormat","result","Array","responseData","referenceDeSelectionEvent","fieldValueContener","fieldNameElement","fieldName","referenceModule","removeAttr","currentElement","which","registerEventForClockPicker","Date","register","DateTime","postQuickCreateSave","_recordLabel","_recordId","callbackFunction","getViewName","getRecordId","getForm","formData","serializeFormData","i","inArray","sourceRecordData","referenceModuleName","getInstance","quickCreateModule","controlElementDiv","referenceCreateHandler","account_id","contact_id","lead_id","vendor_id","block","relatedField","addClass","from","to","recordRelativeAccountId","showPnotify","recordRelativeAccountName","copyAddressDetails","hideCopyAddressLabel","hasClass","copyAddress","addressFieldsData","fromLabel","toLabel","relatedRecord","status","addressMapping","addressFieldsMapping","BlockIds","addressFieldsMappingBlockID","fromElement","fromElementLabel","nameElementFrom","nameElementTo","toElement","toElementLable","errorMsg","relategField","blockContainer","copyAddressDetailsRef","mapAddressDetails","err","inputmask","widthType","cacheGet","elements","editViewForm","progressLoader","progressIndicator","removeClass","recordPreSaveEvent","Event","recordPreSave","isDefaultPrevented","mode","removeData","formAlignmentAfterValidation","form","picklistDependcyElemnt","picklistDependencyMapping","sourcePicklists","Object","keys","sourcePickListNames","join","sourcePickListElements","configuredDependencyObject","targetObjectForSelectedSourceValue","picklistmap","targetPickListName","targetPickListValues","targetPickListMap","targetPickList","listOfAvailableOptions","targetOptions","optionSelector","add","html","filter","CKEDITOR","instances","initialFormData","serialize","onbeforeunload","row","parents","td","parent","remove","loadEditorElement","noteContentElement","customConfig","toolbar","height","App","Text","Editor","showPopoverElementView","detailContentsHolder","not","blockId","closestBlock","bodyContents","hideHandler","cacheSet","showHandler","blocks","currentBlock","dynamicAttr","headerAnimationElement","cacheKey","search","input","requestData","textStatus","errorThrown","jqXHR","responseJSON","message","address","field","v","select","prop","x","change","fieldValue","fieldDisplay","placeholder","sourceFieldModule","validationEngineOptionsForRecord","clear","activeProcess","activeSubProcess","CONFIG","fieldsReferencesDependent","t","referenceLink","setEnabledFields","setDisabledFields","processfieldElement","option","referenceProcess","subProcessfieldElement","hideOptions","subProcessValue","checkSubProcessModulesList","checkReferenceModulesList","checkReferencesField","afterTimeout","elementToFocus","elementToFocusTabindex","registerFocusFirstField","get","elemLen","selectionStart","selectionEnd","tabindex","focus","MultiImage","Vtiger_Inventory_Js","inventoryController","getInventoryInstance","registerClearTreeSelectionEvent","registerTreeAutoCompleteFields","referenceModulePopupRegisterEvent","registerAutoCompleteFields","registerClearReferenceSelectionEvent","registerPreventingEnterSubmitEvent","registerTimeFields","registerEventForPicklistDependencySetup","registerRecordPreSaveEventEvent","registerReferenceSelectionEvent","registerMaskFields","registerHelpInfo","registerReferenceFields","registerCopyValue","registerMultiImageFields","registerReferenceCreate","MultiEmail","MultiDependField","Tree","MultiCurrency","proceedRegisterEvents","registerInventoryController","registerBlockAnimationEvent","registerBlockStatusCheckOnLoad","registerEventForEditor","stretchCKEditor","registerBasicEvents","registerEventForCopyAddress","registerSubmitEvent","registerLeavePageWithoutSubmit","registerValidationsFields","registerAutoloadAddress"],"mappings":"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"}