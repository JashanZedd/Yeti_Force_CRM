{"version":3,"file":"GenerateModal.min.js","sources":["GenerateModal.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class(\n\t'Vtiger_GenerateModal_Js',\n\t{},\n\t{\n\t\tregisterGenetateButton: function (container) {\n\t\t\tconst thisInstance = this;\n\t\t\tcontainer.find('button.js-genetate-button').on('click', function (e) {\n\t\t\t\tdocument.progressLoader = $.progressIndicator({\n\t\t\t\t\tmessage: app.vtranslate('JS_LOADING_PLEASE_WAIT'),\n\t\t\t\t\tposition: 'html',\n\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\tenabled: true\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tlet currentTarget = container.find('.js-generate-mapping option:selected'),\n\t\t\t\t\tactionUrl = currentTarget.data('url'),\n\t\t\t\t\tmethod = container.find('[name=\"method\"]:checked');\n\t\t\t\tif (method.length <= 0) {\n\t\t\t\t\twindow.location.href = actionUrl;\n\t\t\t\t} else {\n\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\t\t\taction: 'GenerateRecords',\n\t\t\t\t\t\t\trecords: container.find('[name=\"all_records\"]').val(),\n\t\t\t\t\t\t\ttemplate: currentTarget.data('id'),\n\t\t\t\t\t\t\ttarget: currentTarget.data('name'),\n\t\t\t\t\t\t\tmethod: method.val()\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdataType: 'json'\n\t\t\t\t\t})\n\t\t\t\t\t\t.done(function (data) {\n\t\t\t\t\t\t\tlet response = data['result'];\n\t\t\t\t\t\t\tif (data['success']) {\n\t\t\t\t\t\t\t\tlet records = response.ok;\n\t\t\t\t\t\t\t\tthisInstance.summary(container, response);\n\t\t\t\t\t\t\t\tdocument.progressLoader.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\t\tif ('1' === method.val()) {\n\t\t\t\t\t\t\t\t\tfor (let i in records) {\n\t\t\t\t\t\t\t\t\t\twindow.open(actionUrl + records[i], '_blank');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.fail(function (data, err) {\n\t\t\t\t\t\t\tapp.errorLog(data, err);\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tsummary: function (container, data) {\n\t\t\tcontainer.find('.modal-title').text(app.vtranslate('JS_SUMMARY'));\n\t\t\tcontainer\n\t\t\t\t.find('.modal-body')\n\t\t\t\t.html(\n\t\t\t\t\t'<div>' +\n\t\t\t\t\tapp.vtranslate('JS_SELECTED_RECORDS') +\n\t\t\t\t\t': <strong>' +\n\t\t\t\t\tdata.all +\n\t\t\t\t\t'</strong></div><div>' +\n\t\t\t\t\tapp.vtranslate('JS_SUCCESSFULLY_PERFORMED_ACTION_FOR') +\n\t\t\t\t\t': <strong>' +\n\t\t\t\t\tdata.ok.length +\n\t\t\t\t\t'</strong></div><div>' +\n\t\t\t\t\tapp.vtranslate('JS_ACTION_FAILED_FOR') +\n\t\t\t\t\t': <strong>' +\n\t\t\t\t\tdata.fail.length +\n\t\t\t\t\t'</strong></div>'\n\t\t\t\t);\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\tvar container = jQuery('.generateMappingModal');\n\t\t\tthis.registerGenetateButton(container);\n\t\t}\n\t}\n);\n\njQuery(document).ready(function (e) {\n\tvar instance = new Vtiger_GenerateModal_Js();\n\tinstance.registerEvents();\n});\n"],"names":["jQuery","Class","container","thisInstance","find","on","e","progressLoader","$","progressIndicator","app","vtranslate","currentTarget","actionUrl","data","method","length","location","href","request","getModuleName","val","done","response","records","ok","summary","mode","i","open","fail","err","errorLog","text","html","all","registerGenetateButton","document","ready","instance","Vtiger_GenerateModal_Js","registerEvents"],"mappings":";;AAAA;AACA;AAEAA,OAAOC,KAAP,CACC,yBADD,EAEC,EAFD,EAGC;yBACyB,gCAAUC,SAAV,EAAqB;MACtCC,eAAe,IAArB;YACUC,IAAV,CAAe,2BAAf,EAA4CC,EAA5C,CAA+C,OAA/C,EAAwD,UAAUC,CAAV,EAAa;YAC3DC,cAAT,GAA0BC,EAAEC,iBAAF,CAAoB;aACpCC,IAAIC,UAAJ,CAAe,wBAAf,CADoC;cAEnC,MAFmC;eAGlC;cACD;;IAJe,CAA1B;OAOIC,gBAAgBV,UAAUE,IAAV,CAAe,sCAAf,CAApB;OACCS,YAAYD,cAAcE,IAAd,CAAmB,KAAnB,CADb;OAECC,SAASb,UAAUE,IAAV,CAAe,yBAAf,CAFV;OAGIW,OAAOC,MAAP,IAAiB,CAArB,EAAwB;WAChBC,QAAP,CAAgBC,IAAhB,GAAuBL,SAAvB;IADD,MAEO;iBACOM,OAAb,CAAqB;WACd;cACGT,IAAIU,aAAJ,EADH;cAEG,iBAFH;eAGIlB,UAAUE,IAAV,CAAe,sBAAf,EAAuCiB,GAAvC,EAHJ;gBAIKT,cAAcE,IAAd,CAAmB,IAAnB,CAJL;cAKGF,cAAcE,IAAd,CAAmB,MAAnB,CALH;cAMGC,OAAOM,GAAP;MAPW;eASV;KATX,EAWEC,IAXF,CAWO,UAAUR,IAAV,EAAgB;SACjBS,WAAWT,KAAK,QAAL,CAAf;SACIA,KAAK,SAAL,CAAJ,EAAqB;UAChBU,UAAUD,SAASE,EAAvB;mBACaC,OAAb,CAAqBxB,SAArB,EAAgCqB,QAAhC;eACShB,cAAT,CAAwBE,iBAAxB,CAA0C,EAAEkB,MAAM,MAAR,EAA1C;UACI,QAAQZ,OAAOM,GAAP,EAAZ,EAA0B;YACpB,IAAIO,CAAT,IAAcJ,OAAd,EAAuB;eACfK,IAAP,CAAYhB,YAAYW,QAAQI,CAAR,CAAxB,EAAoC,QAApC;;;;KAnBL,EAwBEE,IAxBF,CAwBO,UAAUhB,IAAV,EAAgBiB,GAAhB,EAAqB;SACtBC,QAAJ,CAAalB,IAAb,EAAmBiB,GAAnB;KAzBF;;GAdF;EAHF;UA+CU,iBAAU7B,SAAV,EAAqBY,IAArB,EAA2B;YACzBV,IAAV,CAAe,cAAf,EAA+B6B,IAA/B,CAAoCvB,IAAIC,UAAJ,CAAe,YAAf,CAApC;YAEEP,IADF,CACO,aADP,EAEE8B,IAFF,CAGE,UACAxB,IAAIC,UAAJ,CAAe,qBAAf,CADA,GAEA,YAFA,GAGAG,KAAKqB,GAHL,GAIA,sBAJA,GAKAzB,IAAIC,UAAJ,CAAe,sCAAf,CALA,GAMA,YANA,GAOAG,KAAKW,EAAL,CAAQT,MAPR,GAQA,sBARA,GASAN,IAAIC,UAAJ,CAAe,sBAAf,CATA,GAUA,YAVA,GAWAG,KAAKgB,IAAL,CAAUd,MAXV,GAYA,iBAfF;EAjDF;iBAmEiB,0BAAY;MACvBd,YAAYF,OAAO,uBAAP,CAAhB;OACKoC,sBAAL,CAA4BlC,SAA5B;;CAxEH;;AA6EAF,OAAOqC,QAAP,EAAiBC,KAAjB,CAAuB,UAAUhC,CAAV,EAAa;KAC/BiC,WAAW,IAAIC,uBAAJ,EAAf;UACSC,cAAT;CAFD"}