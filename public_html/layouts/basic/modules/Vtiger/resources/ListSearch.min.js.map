{"version":3,"file":"ListSearch.min.js","sources":["ListSearch.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class(\n\t'YetiForce_ListSearch_Js',\n\t{\n\t\tgetInstance: function(container, noEvents, reletedInstance, moduleName) {\n\t\t\tif (typeof moduleName === 'undefined') {\n\t\t\t\tmoduleName = app.getModuleName();\n\t\t\t}\n\t\t\tlet moduleClassName = module + '_ListSearch_Js',\n\t\t\t\tinstance;\n\t\t\tif (typeof window[moduleClassName] !== 'undefined') {\n\t\t\t\tinstance = new window[moduleClassName](container, noEvents, reletedInstance);\n\t\t\t} else {\n\t\t\t\tinstance = new window['YetiForce_ListSearch_Js'](container, noEvents, reletedInstance);\n\t\t\t}\n\t\t\tinstance.moduleName = moduleName;\n\t\t\treturn instance;\n\t\t},\n\t\tregisterSearch: function(container, callBack) {\n\t\t\tcontainer.on(\"click\", \".js-change-order\", function(e) {\n\t\t\t\tlet element = $(e.currentTarget);\n\t\t\t\tcallBack({ orderby: { [element.data(\"columnname\")]: element.data(\"nextsortorderval\") } });\n\t\t\t});\n\t\t\tcontainer.on(\"click\", \".js-listview_header\", function(e) {\n\t\t\t\tlet element = $(e.currentTarget);\n\t\t\t\tcallBack({ orderby: element.data(\"columnname\"), sortorder: element.data(\"nextsortorderval\")});\n\t\t\t});\n\t\t\tcontainer.on(\"click\", \".js-list-reload\", function(e, data) {\n\t\t\t\tcallBack(data);\n\t\t\t});\n\t\t}\n\t},\n\t{\n\t\tmoduleName: false,\n\t\tcontainer: false,\n\t\treletedInstance: false,\n\t\tviewName: false,\n\t\tinit: function(container, noEvents, reletedInstance) {\n\t\t\tif (typeof container === 'undefined') {\n\t\t\t\tcontainer = jQuery('.bodyContents');\n\t\t\t}\n\t\t\tthis.setContainer(container);\n\t\t\tif (noEvents != true && this.getContainer().find('[data-trigger=\"listSearch\"]').length) {\n\t\t\t\tthis.initialize();\n\t\t\t}\n\t\t\tthis.reletedInstance = reletedInstance;\n\t\t},\n\t\tsetContainer: function(container) {\n\t\t\tthis.container = container;\n\t\t},\n\t\tgetContainer: function() {\n\t\t\treturn this.container;\n\t\t},\n\t\tsetViewName: function(viewName) {\n\t\t\tthis.viewName = viewName;\n\t\t},\n\t\t/**\n\t\t * Function  to initialize the advance filter\n\t\t */\n\t\tinitialize: function() {\n\t\t\tthis.registerEvents();\n\t\t},\n\t\tgetAlphabetSearchField: function() {\n\t\t\treturn jQuery('#alphabetSearchKey').val();\n\t\t},\n\t\tgetAlphabetSearchValue: function() {\n\t\t\treturn jQuery('#alphabetValue').val();\n\t\t},\n\t\tregisterListSearch: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar listViewContainer = this.getContainer();\n\t\t\tlistViewContainer.find('[data-trigger=\"listSearch\"]').on('click', function(e) {\n\t\t\t\tthisInstance.reloadList();\n\t\t\t});\n\t\t\tlistViewContainer.find('input.listSearchContributor').on('keypress', function(e) {\n\t\t\t\tif (e.keyCode == 13) {\n\t\t\t\t\tthisInstance.triggerListSearch();\n\t\t\t\t}\n\t\t\t});\n\t\t\tlistViewContainer.find('.removeSearchConditions').on('click', function() {\n\t\t\t\tthisInstance.reloadList({ search_params: [], search_key: '', search_value: '', operator: '' });\n\t\t\t});\n\t\t},\n\t\tregisterListViewSelect: function() {\n\t\t\tlet self = this,\n\t\t\t\tlistViewContainer = this.getContainer();\n\t\t\tlistViewContainer.find('.listViewEntriesTable .select2noactive').each((index, domElement) => {\n\t\t\t\tlet select = $(domElement);\n\t\t\t\tif (!select.data('select2')) {\n\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(select, { placeholder: app.vtranslate('JS_SELECT_AN_OPTION') });\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (app.getMainParams('autoRefreshListOnChange') == '1') {\n\t\t\t\tlistViewContainer.find('.listViewEntriesTable select, .searchInSubcategories').on('change', () => {\n\t\t\t\t\tthis.triggerListSearch();\n\t\t\t\t});\n\t\t\t\tlistViewContainer.find('.listViewEntriesTable .picklistSearchField').on('apply.daterangepicker', () => {\n\t\t\t\t\tthis.triggerListSearch();\n\t\t\t\t});\n\t\t\t\tlistViewContainer.find('.listViewEntriesTable .dateField').on('DatePicker.onHide', function(e, y) {\n\t\t\t\t\tlet prevVal = $(this).data('prevVal'),\n\t\t\t\t\t\tvalue = $(this).val();\n\t\t\t\t\tif (prevVal != value) {\n\t\t\t\t\t\tself.triggerListSearch();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tapp.event.off('Clockpicker.changed');\n\t\t\t\tapp.event.on('Clockpicker.changed', (e, inputEl) => {\n\t\t\t\t\tif (listViewContainer.find(inputEl).length) {\n\t\t\t\t\t\tself.triggerListSearch();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tresetPagination: function() {\n\t\t\t//To unmark the all the selected ids\n\t\t\tjQuery('#deSelectAllMsg').trigger('click');\n\t\t\tjQuery('#recordsCount').val('');\n\t\t\t//To Set the page number as first page\n\t\t\tjQuery('#pageNumber').val('1');\n\t\t\tjQuery('#pageToJump').val('1');\n\t\t\tjQuery('#totalPageCount').text('');\n\t\t\tjQuery('.pagination').data('totalCount', 0);\n\t\t},\n\t\ttriggerListSearch: function() {\n\t\t\tvar listInstance = this;\n\t\t\tvar listViewContainer = listInstance.getContainer();\n\t\t\tlistViewContainer.find('[data-trigger=\"listSearch\"]').trigger('click');\n\t\t},\n\t\tregisterDateListSearch: function(container) {\n\t\t\tApp.Fields.Date.registerRange(this.getContainer().find('.dateRangeField'));\n\t\t},\n\t\tregisterDateTimeListSearch: function(container) {\n\t\t\tApp.Fields.DateTime.register(this.getContainer());\n\t\t},\n\t\tregisterTimeListSearch: function() {\n\t\t\tapp.registerEventForClockPicker();\n\t\t},\n\t\tregisterAlphabetClick: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tthis.getContainer()\n\t\t\t\t.find('.alphabetBtn')\n\t\t\t\t.on('click', function() {\n\t\t\t\t\tapp.showModalWindow($('.alphabetModal').html(), function(data) {\n\t\t\t\t\t\tthisInstance.registerEventForAlphabetSearch(data);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t},\n\t\tgetCurrentCvId: function() {\n\t\t\treturn jQuery('#customFilter')\n\t\t\t\t.find('option:selected')\n\t\t\t\t.data('id');\n\t\t},\n\t\tregisterEventForAlphabetSearch: function(modalContainer) {\n\t\t\tvar thisInstance = this;\n\t\t\tmodalContainer.find('.alphabetSearch').on('click', function(e) {\n\t\t\t\tvar alphabet = jQuery(e.currentTarget)\n\t\t\t\t\t.find('a')\n\t\t\t\t\t.text();\n\t\t\t\tvar cvId = thisInstance.getCurrentCvId();\n\t\t\t\tvar AlphabetSearchKey = thisInstance.getAlphabetSearchField();\n\t\t\t\tvar urlParams = {\n\t\t\t\t\tviewname: cvId,\n\t\t\t\t\tsearch_key: AlphabetSearchKey,\n\t\t\t\t\tsearch_value: alphabet,\n\t\t\t\t\toperator: 's',\n\t\t\t\t\tpage: 1\n\t\t\t\t};\n\t\t\t\tthisInstance.resetPagination();\n\t\t\t\tthisInstance.reloadList(urlParams);\n\t\t\t\tapp.hideModalWindow();\n\t\t\t});\n\t\t\tmodalContainer.find('.removeAlfabetCondition').on('click', function() {\n\t\t\t\tthisInstance.reloadList({ search_key: '', search_value: '', operator: '' });\n\t\t\t\tapp.hideModalWindow();\n\t\t\t});\n\t\t},\n\t\tupdatePaginationOnAlphabetChange: function(alphabet, AlphabetSearchKey) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar params = {};\n\t\t\tparams['module'] = thisInstance.moduleName;\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['view'] = 'Pagination';\n\t\t\tparams['page'] = 1;\n\t\t\tparams['mode'] = 'getPagination';\n\t\t\tparams['search_key'] = AlphabetSearchKey;\n\t\t\tparams['search_value'] = alphabet;\n\t\t\tparams['operator'] = 's';\n\n\t\t\tAppConnector.request(params).done(function(data) {\n\t\t\t\tjQuery('.paginationDiv').html(data);\n\t\t\t\tvar instance = thisInstance.getInstanceView();\n\t\t\t\tif (instance && jQuery.isFunction(instance.registerPageNavigationEvents)) {\n\t\t\t\t\tinstance.registerPageNavigationEvents();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tgetListSearchParams: function(urlSearchParams) {\n\t\t\tlet listViewPageDiv = this.getContainer();\n\t\t\tlet listViewTable = listViewPageDiv.find('.listViewEntriesTable');\n\t\t\tlet searchParams = [];\n\t\t\tlistViewTable.find('.listSearchContributor').each(function(index, domElement) {\n\t\t\t\tlet searchInfo = [];\n\t\t\t\tlet searchContributorElement = $(domElement);\n\t\t\t\tlet fieldInfo = searchContributorElement.data('fieldinfo');\n\t\t\t\tlet fieldName = searchContributorElement.attr('name');\n\t\t\t\tlet searchValue = searchContributorElement.val();\n\t\t\t\tif (typeof searchValue == 'object') {\n\t\t\t\t\tif (searchValue == null) {\n\t\t\t\t\t\tsearchValue = '';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsearchValue = searchValue.join('##');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tsearchValue = searchValue.trim();\n\t\t\t\tif (searchValue.length <= 0) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\tlet searchOperator = 'a';\n\t\t\t\tif (fieldInfo.hasOwnProperty('searchOperator')) {\n\t\t\t\t\tsearchOperator = fieldInfo.searchOperator;\n\t\t\t\t} else if (\n\t\t\t\t\t$.inArray(fieldInfo.type, [\n\t\t\t\t\t\t'modules',\n\t\t\t\t\t\t'time',\n\t\t\t\t\t\t'userCreator',\n\t\t\t\t\t\t'owner',\n\t\t\t\t\t\t'picklist',\n\t\t\t\t\t\t'tree',\n\t\t\t\t\t\t'boolean',\n\t\t\t\t\t\t'fileLocationType',\n\t\t\t\t\t\t'userRole',\n\t\t\t\t\t\t'companySelect',\n\t\t\t\t\t\t'multiReferenceValue',\n\t\t\t\t\t\t'inventoryLimit'\n\t\t\t\t\t]) >= 0\n\t\t\t\t) {\n\t\t\t\t\tsearchOperator = 'e';\n\t\t\t\t} else if (fieldInfo.type == 'date' || fieldInfo.type == 'datetime') {\n\t\t\t\t\tsearchOperator = 'bw';\n\t\t\t\t} else if ($.inArray(fieldInfo.type, ['multipicklist', 'categoryMultipicklist', 'multiListFields', 'mailScannerFields', 'mailScannerActions']) != -1) {\n\t\t\t\t\tsearchOperator = 'c';\n\t\t\t\t}\n\t\t\t\tlet sourceFieldName = searchContributorElement.data('sourceFieldName');\n\t\t\t\tif (sourceFieldName) {\n\t\t\t\t\tsearchInfo.push(fieldName + ':' + searchContributorElement.data('moduleName') + ':' + sourceFieldName);\n\t\t\t\t} else {\n\t\t\t\t\tsearchInfo.push(fieldName);\n\t\t\t\t}\n\t\t\t\tsearchInfo.push(searchOperator);\n\t\t\t\tsearchInfo.push(searchValue);\n\t\t\t\tif (fieldInfo.type == 'tree' || fieldInfo.type == 'categoryMultipicklist') {\n\t\t\t\t\tlet searchInSubcategories = jQuery(\n\t\t\t\t\t\t'.listViewHeaders .searchInSubcategories[data-columnname=\"' + fieldName + '\"]'\n\t\t\t\t\t).prop('checked');\n\t\t\t\t\tsearchInfo.push(searchInSubcategories);\n\t\t\t\t}\n\t\t\t\tsearchParams.push(searchInfo);\n\t\t\t});\n\t\t\tif (urlSearchParams) {\n\t\t\t\tlet valueInSearch = null;\n\t\t\t\tlet url = app.getUrlVar('search_params');\n\t\t\t\tif (url != undefined && url.length) {\n\t\t\t\t\tlet lengthUrl = url.length;\n\t\t\t\t\tif (url.charAt(lengthUrl - 1) === '#') {\n\t\t\t\t\t\turl = url.substr(0, lengthUrl - 1);\n\t\t\t\t\t}\n\t\t\t\t\turl = JSON.parse(decodeURIComponent(url));\n\t\t\t\t\t$.each(url[0], function(index, value) {\n\t\t\t\t\t\tlet exist = false;\n\t\t\t\t\t\t$.each(searchParams, function(index, searchParam) {\n\t\t\t\t\t\t\tif (searchParam[0] == value[0]) {\n\t\t\t\t\t\t\t\texist = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (value[0].indexOf(':') === -1) {\n\t\t\t\t\t\t\tvalueInSearch = listViewTable.find('.listSearchContributor[name=\"' + value[0] + '\"]').val();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tlet fieldRelation = value[0].split(':');\n\t\t\t\t\t\t\tvalueInSearch = listViewTable\n\t\t\t\t\t\t\t\t.find(\n\t\t\t\t\t\t\t\t\t'.listSearchContributor[name=\"' +\n\t\t\t\t\t\t\t\t\t\tfieldRelation[0] +\n\t\t\t\t\t\t\t\t\t\t'\"][data-module-name=\"' +\n\t\t\t\t\t\t\t\t\t\tfieldRelation[1] +\n\t\t\t\t\t\t\t\t\t\t'\"][data-source-field-name=\"' +\n\t\t\t\t\t\t\t\t\t\tfieldRelation[2] +\n\t\t\t\t\t\t\t\t\t\t'\"]'\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t.val();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (exist == false && valueInSearch != '' && valueInSearch !== null) {\n\t\t\t\t\t\t\tsearchParams.push(value);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn [searchParams];\n\t\t},\n\t\tgetInstanceByView: function() {\n\t\t\tvar viewName = this.viewName ? this.viewName : app.getViewName();\n\t\t\tvar instance = false;\n\t\t\tif (viewName === 'RecordsList') {\n\t\t\t\tinstance = this.reletedInstance;\n\t\t\t\tinstance.reloadFunctionName = 'loadRecordList';\n\t\t\t\tinstance.execute = ['updatePagination'];\n\t\t\t} else if (this.reletedInstance) {\n\t\t\t\tinstance = this.reletedInstance;\n\t\t\t\tinstance.reloadFunctionName = 'loadRelatedList';\n\t\t\t} else if (viewName === 'Detail') {\n\t\t\t\tinstance = Vtiger_Detail_Js.getInstance();\n\t\t\t\tinstance.reloadFunctionName = 'loadRelatedList';\n\t\t\t} else if (viewName == 'List') {\n\t\t\t\tinstance = new Vtiger_List_Js();\n\t\t\t\tinstance.reloadFunctionName = 'getListViewRecords';\n\t\t\t\tinstance.execute = ['updatePagination'];\n\t\t\t} else if (viewName == 'ListPreview') {\n\t\t\t\tinstance = window.pageController;\n\t\t\t\tinstance.reloadFunctionName = 'getListViewRecords';\n\t\t\t\tinstance.execute = ['updatePagination'];\n\t\t\t}\n\t\t\treturn instance;\n\t\t},\n\t\treloadList: function(params) {\n\t\t\tvar thisInstance = this;\n\t\t\tif (params == undefined) {\n\t\t\t\tparams = { page: 1 };\n\t\t\t}\n\t\t\tvar instance = this.getInstanceByView();\n\t\t\tif (instance) {\n\t\t\t\tvar funcName = instance.reloadFunctionName;\n\t\t\t\tif (jQuery.isFunction(instance[funcName])) {\n\t\t\t\t\tinstance[funcName](params).done(function() {\n\t\t\t\t\t\tthisInstance.resetPagination();\n\t\t\t\t\t\tthisInstance.executeFunctions(instance);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\texecuteFunctions: function(instance) {\n\t\t\tif (instance.execute) {\n\t\t\t\tvar func = instance.execute;\n\t\t\t\tfor (var i in func) {\n\t\t\t\t\tvar funcName = func[i];\n\t\t\t\t\tif (jQuery.isFunction(instance[funcName])) {\n\t\t\t\t\t\tinstance[funcName]();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tregisterBasicEvents: function() {\n\t\t\tthis.registerListViewSelect();\n\t\t\tthis.registerDateListSearch();\n\t\t\tthis.registerDateTimeListSearch();\n\t\t\tthis.registerTimeListSearch();\n\t\t\tthis.registerAlphabetClick();\n\t\t\tthis.registerListSearch();\n\t\t\tthis.getContainer()\n\t\t\t\t.find('select.select2')\n\t\t\t\t.each(function(i, obj) {\n\t\t\t\t\tif (!$(obj).data('select2')) {\n\t\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView($(obj));\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function which will regiter all events for this page\n\t\t */\n\t\tregisterEvents: function() {\n\t\t\tthis.registerBasicEvents();\n\t\t}\n\t}\n);\n"],"names":["jQuery","Class","container","noEvents","reletedInstance","moduleName","app","getModuleName","moduleClassName","module","instance","window","callBack","on","e","element","$","currentTarget","orderby","data","sortorder","setContainer","getContainer","find","length","initialize","viewName","registerEvents","val","thisInstance","listViewContainer","reloadList","keyCode","triggerListSearch","search_params","search_key","search_value","operator","self","each","index","domElement","select","Fields","Picklist","showSelect2ElementView","placeholder","vtranslate","getMainParams","y","prevVal","value","event","off","inputEl","trigger","text","listInstance","Date","registerRange","DateTime","register","registerEventForClockPicker","showModalWindow","html","registerEventForAlphabetSearch","modalContainer","alphabet","cvId","getCurrentCvId","AlphabetSearchKey","getAlphabetSearchField","urlParams","resetPagination","hideModalWindow","params","getParentModuleName","request","done","getInstanceView","isFunction","registerPageNavigationEvents","urlSearchParams","listViewPageDiv","listViewTable","searchParams","searchInfo","searchContributorElement","fieldInfo","fieldName","attr","searchValue","join","trim","searchOperator","hasOwnProperty","inArray","type","sourceFieldName","push","searchInSubcategories","prop","valueInSearch","url","getUrlVar","undefined","lengthUrl","charAt","substr","JSON","parse","decodeURIComponent","exist","searchParam","indexOf","fieldRelation","split","getViewName","reloadFunctionName","execute","Vtiger_Detail_Js","getInstance","Vtiger_List_Js","pageController","page","getInstanceByView","funcName","executeFunctions","func","i","registerListViewSelect","registerDateListSearch","registerDateTimeListSearch","registerTimeListSearch","registerAlphabetClick","registerListSearch","obj","registerBasicEvents"],"mappings":"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"}