{"version":3,"file":"Header.min.js","sources":["Header.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n * Contributor(s): YetiForce.com\n *************************************************************************************/\n'use strict';\n\n//Show Alert if user is on a unsupported browser (IE7, IE8, ..etc)\nif (\n\t/MSIE 6.0/.test(navigator.userAgent) ||\n\t/MSIE 7.0/.test(navigator.userAgent) ||\n\t/MSIE 8.0/.test(navigator.userAgent) ||\n\t/MSIE 9.0/.test(navigator.userAgent)\n) {\n\tif (app.getCookie('oldbrowser') != 'true') {\n\t\tapp.setCookie('oldbrowser', true, 365);\n\t\twindow.location.href = 'layouts/basic/modules/Vtiger/browsercompatibility/Browser_compatibility.html';\n\t}\n}\n\n$.Class(\n\t'Vtiger_Header_Js',\n\t{\n\t\tself: false,\n\t\tgetInstance: function() {\n\t\t\tif (this.self != false) {\n\t\t\t\treturn this.self;\n\t\t\t}\n\t\t\tthis.self = new Vtiger_Header_Js();\n\t\t\treturn this.self;\n\t\t}\n\t},\n\t{\n\t\tmenuContainer: false,\n\t\tcontentContainer: false,\n\t\tinit: function() {\n\t\t\tthis.setContentsContainer('.js-base-container');\n\t\t},\n\t\tsetContentsContainer: function(element) {\n\t\t\tif (element instanceof $) {\n\t\t\t\tthis.contentContainer = element;\n\t\t\t} else {\n\t\t\t\tthis.contentContainer = $(element);\n\t\t\t}\n\t\t\treturn this;\n\t\t},\n\t\tgetContentsContainer: function() {\n\t\t\treturn this.contentContainer;\n\t\t},\n\t\tregisterQuickCreateSearch() {\n\t\t\t$('.js-quickcreate-search').on('keyup', function() {\n\t\t\t\tlet value = $(this)\n\t\t\t\t\t.val()\n\t\t\t\t\t.toLowerCase();\n\t\t\t\t$('.quickCreateModules .js-quickcreate-search-item a').filter(function() {\n\t\t\t\t\tlet item = $(this).closest('.js-quickcreate-search-item');\n\t\t\t\t\tif (\n\t\t\t\t\t\t$(this)\n\t\t\t\t\t\t\t.text()\n\t\t\t\t\t\t\t.toLowerCase()\n\t\t\t\t\t\t\t.indexOf(value) > -1\n\t\t\t\t\t) {\n\t\t\t\t\t\titem.removeClass('d-none');\n\t\t\t\t\t} else {\n\t\t\t\t\t\titem.addClass('d-none');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t$('.js-quickcreate-search-block').hide();\n\t\t\t\t$('.js-quickcreate-search-item')\n\t\t\t\t\t.not('.d-none')\n\t\t\t\t\t.each(function() {\n\t\t\t\t\t\t$(this)\n\t\t\t\t\t\t\t.closest('.js-quickcreate-search-block')\n\t\t\t\t\t\t\t.show();\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tshowAnnouncement: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar announcementContainer = $('#announcements');\n\t\t\tvar announcements = announcementContainer.find('.announcement');\n\t\t\tif (announcements.length > 0) {\n\t\t\t\tvar announcement = announcements.first();\n\t\t\t\tvar aid = announcement.data('id');\n\n\t\t\t\tapp.showModalWindow(\n\t\t\t\t\tannouncement.find('.modal'),\n\t\t\t\t\tfunction(modal) {\n\t\t\t\t\t\tannouncement.remove();\n\t\t\t\t\t\tmodal.find('button').on('click', function(e) {\n\t\t\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\t\t\tmodule: 'Announcements',\n\t\t\t\t\t\t\t\taction: 'BasicAjax',\n\t\t\t\t\t\t\t\tmode: 'mark',\n\t\t\t\t\t\t\t\trecord: aid,\n\t\t\t\t\t\t\t\ttype: $(this).data('type')\n\t\t\t\t\t\t\t}).done(function(res) {\n\t\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\t\tthisInstance.showAnnouncement();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\t'',\n\t\t\t\t\t{ backdrop: 'static', keyboard: false }\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t\tregisterAnnouncements: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar announcementContainer = $('#announcements');\n\t\t\tif (announcementContainer.length == 0) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthisInstance.showAnnouncement();\n\t\t},\n\t\tregisterCalendarButtonClickEvent: function() {\n\t\t\tvar element = $('#calendarBtn');\n\t\t\tvar dateFormat = element.data('dateFormat');\n\t\t\tvar currentDate = element.data('date');\n\t\t\tvar vtigerDateFormat = app.convertToDatePickerFormat(dateFormat);\n\t\t\telement.on('click', function(e) {\n\t\t\t\te.stopImmediatePropagation();\n\t\t\t\telement\n\t\t\t\t\t.closest('div.nav')\n\t\t\t\t\t.find('div.open')\n\t\t\t\t\t.removeClass('open');\n\t\t\t\tvar calendar = $('#' + element.data('datepickerId'));\n\t\t\t\tif ($(calendar).is(':visible')) {\n\t\t\t\t\telement.DatePickerHide();\n\t\t\t\t} else {\n\t\t\t\t\telement.DatePickerShow();\n\t\t\t\t}\n\t\t\t});\n\t\t\telement.DatePicker({\n\t\t\t\tformat: vtigerDateFormat,\n\t\t\t\tdate: currentDate,\n\t\t\t\tcalendars: 1,\n\t\t\t\tstarts: 1,\n\t\t\t\tclassName: 'globalCalendar'\n\t\t\t});\n\t\t},\n\t\tisFreeDay: function(dayOfWeek) {\n\t\t\tif (dayOfWeek == 0 || dayOfWeek == 6) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\tbasicSearch: function() {\n\t\t\tvar thisInstance = this;\n\t\t\t$('.js-global-search__value').on('keypress', function(e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tif (e.which == 13) {\n\t\t\t\t\tthisInstance.hideSearchMenu();\n\t\t\t\t\tthisInstance.labelSearch(currentTarget);\n\t\t\t\t}\n\t\t\t});\n\t\t\t$('.js-global-search-operator').on('click', function(e) {\n\t\t\t\tvar currentTarget = $(e.target);\n\t\t\t\tvar block = currentTarget.closest('.js-global-search__input');\n\t\t\t\tblock.find('.js-global-search__value').data('operator', currentTarget.data('operator'));\n\t\t\t\tblock.find('.js-global-search-operator .dropdown-item').removeClass('active');\n\t\t\t\tcurrentTarget.closest('.dropdown-item').addClass('active');\n\t\t\t});\n\t\t\tif ($('#gsAutocomplete').val() == 1) {\n\t\t\t\t$.widget('custom.gsAutocomplete', $.ui.autocomplete, {\n\t\t\t\t\t_create: function() {\n\t\t\t\t\t\tthis._super();\n\t\t\t\t\t\tthis.widget().menu('option', 'items', '> :not(.ui-autocomplete-category)');\n\t\t\t\t\t},\n\t\t\t\t\t_renderMenu: function(ul, items) {\n\t\t\t\t\t\tvar that = this,\n\t\t\t\t\t\t\tcurrentCategory = '';\n\t\t\t\t\t\t$.each(items, function(index, item) {\n\t\t\t\t\t\t\tif (item.category != currentCategory) {\n\t\t\t\t\t\t\t\tul.append(\"<li class='ui-autocomplete-category'>\" + item.category + '</li>');\n\t\t\t\t\t\t\t\tcurrentCategory = item.category;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthat._renderItemData(ul, item);\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\t_renderItemData: function(ul, item) {\n\t\t\t\t\t\treturn this._renderItem(ul, item).data('ui-autocomplete-item', item);\n\t\t\t\t\t},\n\t\t\t\t\t_renderItem: function(ul, item) {\n\t\t\t\t\t\tvar url = 'index.php?module=' + item.module + '&view=Detail&record=' + item.id;\n\t\t\t\t\t\treturn $('<li>')\n\t\t\t\t\t\t\t.data('item.autocomplete', item)\n\t\t\t\t\t\t\t.append($(\"<a href='\" + url + \"' title='\" + item.label + \"'></a>\").html(item.label))\n\t\t\t\t\t\t\t.appendTo(ul);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t$('.js-global-search__value').gsAutocomplete({\n\t\t\t\t\tminLength: app.getMainParams('gsMinLength'),\n\t\t\t\t\tsource: function(request, response) {\n\t\t\t\t\t\tvar basicSearch = new Vtiger_BasicSearch_Js();\n\t\t\t\t\t\tbasicSearch.reduceNumberResults = app.getMainParams('gsAmountResponse');\n\t\t\t\t\t\tbasicSearch.returnHtml = false;\n\t\t\t\t\t\tbasicSearch.setMainContainer(this.element.closest('.js-global-search__input'));\n\t\t\t\t\t\tbasicSearch.search(request.term).done(function(data) {\n\t\t\t\t\t\t\tdata = JSON.parse(data);\n\t\t\t\t\t\t\tvar serverDataFormat = data.result;\n\t\t\t\t\t\t\tvar reponseDataList = [];\n\t\t\t\t\t\t\tfor (var id in serverDataFormat) {\n\t\t\t\t\t\t\t\tvar responseData = serverDataFormat[id];\n\t\t\t\t\t\t\t\treponseDataList.push(responseData);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tresponse(reponseDataList);\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tclasses: {\n\t\t\t\t\t\t'ui-autocomplete':\n\t\t\t\t\t\t\t'u-overflow-y-auto u-overflow-x-hidden u-max-h-70vh u-max-w-sm-70 u-max-w-lg-40'\n\t\t\t\t\t},\n\t\t\t\t\tselect: function(event, ui) {\n\t\t\t\t\t\tvar selectedItemData = ui.item;\n\t\t\t\t\t\tif (selectedItemData.permitted) {\n\t\t\t\t\t\t\tvar url =\n\t\t\t\t\t\t\t\t'index.php?module=' +\n\t\t\t\t\t\t\t\tselectedItemData.module +\n\t\t\t\t\t\t\t\t'&view=Detail&record=' +\n\t\t\t\t\t\t\t\tselectedItemData.id;\n\t\t\t\t\t\t\twindow.location.href = url;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t},\n\t\t\t\t\tclose: function(event, ui) {\n\t\t\t\t\t\t//$('.js-global-search__value').val('');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tlabelSearch: function(currentTarget) {\n\t\t\tvar val = currentTarget.val();\n\t\t\tif (val == '') {\n\t\t\t\tapp.showAlert(app.vtranslate('JS_PLEASE_ENTER_SOME_VALUE'));\n\t\t\t\tcurrentTarget.focus();\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvar progress = $.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tvar basicSearch = new Vtiger_BasicSearch_Js();\n\t\t\tbasicSearch.setMainContainer(currentTarget.closest('.js-global-search__input'));\n\t\t\tbasicSearch.search(val).done(function(data) {\n\t\t\t\tbasicSearch.showSearchResults(data);\n\t\t\t\tprogress.progressIndicator({\n\t\t\t\t\tmode: 'hide'\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterHotKeys: function() {\n\t\t\t$('.hotKey').each(function(index) {\n\t\t\t\tvar thisObject = this;\n\t\t\t\tvar key = $(thisObject).data('hotkeys');\n\t\t\t\tif (key != '') {\n\t\t\t\t\tMousetrap.bind(key, function() {\n\t\t\t\t\t\tthisObject.click();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Invoke App.Components.QuickCreate.createRecord\n\t\t *\n\t\t * @param   {string}  moduleName\n\t\t * @param   {object}  params\n\t\t */\n\t\tquickCreateModule: function(moduleName, params = {}) {\n\t\t\tApp.Components.QuickCreate.createRecord(moduleName, params);\n\t\t},\n\t\t/**\n\t\t * Invoke App.Components.QuickCreate.getForm\n\t\t *\n\t\t * @param   {string}  url\n\t\t * @param   {string}  moduleName\n\t\t * @param   {object}  params\n\t\t *\n\t\t * @return  {function} which return aDeferred\n\t\t */\n\t\tgetQuickCreateForm: function(url, moduleName, params = {}) {\n\t\t\treturn App.Components.QuickCreate.getForm(url, moduleName, params);\n\t\t},\n\t\t/**\n\t\t * Invoke App.Components.QuickCreate.showModal\n\t\t *\n\t\t * @param   {string}  html\n\t\t * @param   {object}  params\n\t\t */\n\t\thandleQuickCreateData: function(html, params = {}) {\n\t\t\tApp.Components.QuickCreate.showModal(html, params);\n\t\t},\n\t\t/**\n\t\t * Invoke App.Components.QuickCreate.registerPostLoadEvents\n\t\t *\n\t\t * @param   {object}  form jQuery\n\t\t * @param   {object}  params\n\t\t *\n\t\t * @return  {function} which return boolean\n\t\t */\n\t\tregisterQuickCreatePostLoadEvents: function(form, params) {\n\t\t\tApp.Components.QuickCreate.registerPostLoadEvents(form, params);\n\t\t},\n\t\t/**\n\t\t * Invoke App.Components.QuickCreate.registerHelpInfo\n\t\t *\n\t\t * @param   {object}  container jQuery\n\t\t */\n\t\tregisterHelpInfo: function(container = $('form[name=\"QuickCreate\"]')) {\n\t\t\tApp.Components.QuickCreate.registerHelpInfo(container);\n\t\t},\n\t\t/**\n\t\t * Invoke App.Components.QuickCreate.goToFullForm\n\t\t *\n\t\t * @param   {object}  form  jQuery\n\t\t */\n\t\tquickCreateGoToFullForm: function(form, editViewUrl) {\n\t\t\tApp.Components.QuickCreate.goToFullForm(form, editViewUrl);\n\t\t},\n\t\t/**\n\t\t * Invoke App.Components.QuickCreate.registerTabEvents\n\t\t *\n\t\t * @param   {object}  form  jQuery\n\t\t */\n\t\tregisterTabEventsInQuickCreate: function(form) {\n\t\t\tApp.Components.QuickCreate.registerTabEvents(form);\n\t\t},\n\t\t/**\n\t\t * Invoke App.Components.QuickCreate.quickCreateSave\n\t\t *\n\t\t * @param   {object}  form  jQuery\n\t\t *\n\t\t * @return  {function}        which return aDeferred\n\t\t */\n\t\tquickCreateSave: function(form) {\n\t\t\treturn App.Components.QuickCreate.save(form);\n\t\t},\n\t\tregisterReminderNotice: function() {\n\t\t\tvar self = this;\n\t\t\t$('#page').before(\n\t\t\t\t`<div class=\"remindersNoticeContainer\" tabindex=\"-1\" role=\"dialog\" aria-label=\"${app.vtranslate(\n\t\t\t\t\t'JS_REMINDER'\n\t\t\t\t)}\" aria-hidden=\"true\"></div>`\n\t\t\t);\n\t\t\tvar block = $('.remindersNoticeContainer');\n\t\t\tvar remindersNotice = $('.remindersNotice');\n\t\t\tremindersNotice.on('click', function() {\n\t\t\t\tif (!remindersNotice.hasClass('autoRefreshing')) {\n\t\t\t\t\tVtiger_Index_Js.requestReminder();\n\t\t\t\t}\n\t\t\t\tself.hideActionMenu();\n\t\t\t\tself.hideBreadcrumbActionMenu();\n\t\t\t\tblock.toggleClass('toggled');\n\t\t\t\tself.hideReminderNotification();\n\t\t\t\tapp.closeSidebar();\n\t\t\t\tself.hideSearchMenu();\n\t\t\t});\n\t\t},\n\t\tregisterReminderNotification: function() {\n\t\t\tvar self = this;\n\t\t\t$('#page').before('<div class=\"remindersNotificationContainer\" tabindex=\"-1\" role=\"dialog\"></div>');\n\t\t\tvar block = $('.remindersNotificationContainer');\n\t\t\tvar remindersNotice = $('.notificationsNotice');\n\t\t\tremindersNotice.on('click', function() {\n\t\t\t\tif (!remindersNotice.hasClass('autoRefreshing')) {\n\t\t\t\t\tVtiger_Index_Js.getNotificationsForReminder();\n\t\t\t\t}\n\t\t\t\tself.hideActionMenu();\n\t\t\t\tself.hideBreadcrumbActionMenu();\n\t\t\t\tblock.toggleClass('toggled');\n\t\t\t\tself.hideReminderNotice();\n\t\t\t\tapp.closeSidebar();\n\t\t\t\tself.hideSearchMenu();\n\t\t\t});\n\t\t},\n\t\ttoggleBreadcrumbActions(container) {\n\t\t\tlet actionsContainer = container.find('.js-header-toggle__actions');\n\t\t\tif (!actionsContainer.length) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet actionBtn = container.find('.js-header-toggle__actions-btn');\n\t\t\tif (!actionsContainer.closest('.js-btn-toolbar').length) {\n\t\t\t\tconst actionBtnMargin = 5;\n\t\t\t\tconst cssActionsTop = { top: actionBtn.offset().top + actionBtn.outerHeight() + actionBtnMargin };\n\t\t\t\tactionsContainer.css(cssActionsTop);\n\t\t\t}\n\t\t\tactionBtn.on('click', () => {\n\t\t\t\tactionsContainer.toggleClass('is-active');\n\t\t\t});\n\t\t},\n\t\tregisterMobileEvents: function() {\n\t\t\tconst self = this,\n\t\t\t\tcontainer = this.getContentsContainer();\n\t\t\t$('.rightHeaderBtnMenu').on('click', function() {\n\t\t\t\tself.hideActionMenu();\n\t\t\t\tself.hideBreadcrumbActionMenu();\n\t\t\t\tself.hideSearchMenu();\n\t\t\t\tself.hideReminderNotice();\n\t\t\t\tself.hideReminderNotification();\n\t\t\t\t$('.mobileLeftPanel ').toggleClass('mobileMenuOn');\n\t\t\t});\n\t\t\t$('.js-quick-action-btn').on('click', function() {\n\t\t\t\tlet currentTarget = $(this);\n\t\t\t\tapp.closeSidebar();\n\t\t\t\tself.hideBreadcrumbActionMenu();\n\t\t\t\tself.hideSearchMenu();\n\t\t\t\tself.hideReminderNotice();\n\t\t\t\tself.hideReminderNotification();\n\t\t\t\t$('.actionMenu').toggleClass('actionMenuOn');\n\t\t\t\tif (currentTarget.hasClass('active')) {\n\t\t\t\t\tcurrentTarget.removeClass('active');\n\t\t\t\t\tcurrentTarget.attr('aria-expanded', 'false');\n\t\t\t\t\tcurrentTarget.popover();\n\t\t\t\t} else {\n\t\t\t\t\tcurrentTarget.addClass('active');\n\t\t\t\t\tcurrentTarget.attr('aria-expanded', 'true');\n\t\t\t\t\tcurrentTarget.popover('disable');\n\t\t\t\t}\n\t\t\t\t$('.quickCreateModules').on('click', function() {\n\t\t\t\t\tself.hideActionMenu();\n\t\t\t\t});\n\t\t\t});\n\t\t\t$('.searchMenuBtn').on('click', function() {\n\t\t\t\tlet currentTarget = $(this);\n\t\t\t\tapp.closeSidebar();\n\t\t\t\tself.hideActionMenu();\n\t\t\t\tself.hideBreadcrumbActionMenu();\n\t\t\t\tself.hideReminderNotice();\n\t\t\t\tself.hideReminderNotification();\n\t\t\t\t$('.searchMenu').toggleClass('toogleSearchMenu');\n\t\t\t\tif (currentTarget.hasClass('active')) {\n\t\t\t\t\tcurrentTarget.removeClass('active');\n\t\t\t\t\t$('.searchMenuBtn .c-header__btn').attr('aria-expanded', 'false');\n\t\t\t\t} else {\n\t\t\t\t\tcurrentTarget.addClass('active');\n\t\t\t\t\t$('.searchMenuBtn .c-header__btn').attr('aria-expanded', 'true');\n\t\t\t\t}\n\t\t\t});\n\t\t\t$('.js-header__btn--mail .dropdown').on('show.bs.dropdown', function() {\n\t\t\t\tapp.closeSidebar();\n\t\t\t\tself.hideActionMenu();\n\t\t\t\tself.hideBreadcrumbActionMenu();\n\t\t\t\tself.hideReminderNotice();\n\t\t\t\tself.hideReminderNotification();\n\t\t\t\tself.hideSearchMenu();\n\t\t\t});\n\t\t\tthis.toggleBreadcrumbActions(container);\n\t\t},\n\t\thideMobileMenu: function() {\n\t\t\t$('.mobileLeftPanel ').removeClass('mobileMenuOn');\n\t\t},\n\t\thideSearchMenu: function() {\n\t\t\t$('.searchMenu').removeClass('toogleSearchMenu');\n\t\t},\n\t\thideActionMenu: function() {\n\t\t\t$('.actionMenu').removeClass('actionMenuOn');\n\t\t},\n\t\thideBreadcrumbActionMenu: function() {\n\t\t\t$('.js-header-toggle__actions').removeClass('is-active');\n\t\t},\n\t\thideReminderNotice: function() {\n\t\t\t$('.remindersNoticeContainer').removeClass('toggled');\n\t\t},\n\t\thideReminderNotification: function() {\n\t\t\t$('.remindersNotificationContainer').removeClass('toggled');\n\t\t},\n\t\tregisterFooTable: function() {\n\t\t\tvar container = $('.tableRWD');\n\t\t\tcontainer.find('thead tr th:gt(1)').attr('data-hide', 'phone');\n\t\t\tcontainer.find('thead tr th:gt(3)').attr('data-hide', 'tablet,phone');\n\t\t\tcontainer.find('thead tr th:last').attr('data-hide', '');\n\t\t\tvar whichColumnEnable = container.find('thead').attr('col-visible-alltime');\n\t\t\tcontainer.find('thead tr th:eq(' + whichColumnEnable + ')').attr('data-hide', '');\n\t\t\t$('.tableRWD, .customTableRWD').footable({\n\t\t\t\tbreakpoints: {\n\t\t\t\t\tphone: 768,\n\t\t\t\t\ttablet: 1024\n\t\t\t\t},\n\t\t\t\taddRowToggle: true,\n\t\t\t\ttoggleSelector: ' > tbody > tr:not(.footable-row-detail)'\n\t\t\t});\n\t\t\t$('.footable-toggle').on('click', function(event) {\n\t\t\t\tevent.stopPropagation();\n\t\t\t\t$(this).trigger('footable_toggle_row');\n\t\t\t});\n\t\t\tvar records = $('.customTableRWD').find('[data-toggle-visible=false]');\n\t\t\trecords.find('.footable-toggle').css('display', 'none');\n\t\t},\n\t\tregisterSiteBarButton(container) {\n\t\t\tconst key = 'ShowHideRightPanel' + app.getModuleName();\n\t\t\tif (app.cacheGet(key) == 'show') {\n\t\t\t\tthis.toggleSiteBar(container.find('.toggleSiteBarRightButton'));\n\t\t\t} else if (app.cacheGet(key) == null) {\n\t\t\t\tif (container.find('.siteBarRight').data('showpanel') == 1) {\n\t\t\t\t\tthis.toggleSiteBar(container.find('.toggleSiteBarRightButton'));\n\t\t\t\t}\n\t\t\t}\n\t\t\tcontainer.find('.toggleSiteBarRightButton').on('click', e => {\n\t\t\t\tlet toogleButton = $(e.currentTarget);\n\t\t\t\tif (toogleButton.closest('.siteBarRight').hasClass('hideSiteBar')) {\n\t\t\t\t\tapp.cacheSet(key, 'show');\n\t\t\t\t} else {\n\t\t\t\t\tapp.cacheSet(key, 'hide');\n\t\t\t\t}\n\t\t\t\tthis.toggleSiteBar(toogleButton);\n\t\t\t});\n\t\t},\n\t\ttoggleSiteBar(toogleButton) {\n\t\t\t$('.rowContent').toggleClass('js-sitebar--active');\n\t\t\ttoogleButton.closest('.siteBarRight').toggleClass('hideSiteBar');\n\t\t\ttoogleButton.find('.fas').toggleClass('fa-chevron-right fa-chevron-left');\n\t\t\ttoogleButton.toggleClass('hideToggleSiteBarRightButton');\n\t\t},\n\t\tregisterToggleButton: function() {\n\t\t\t$('.buttonTextHolder .dropdown-menu a').on('click', function() {\n\t\t\t\t$(this)\n\t\t\t\t\t.parents('.d-inline-block')\n\t\t\t\t\t.find('.dropdown-toggle .textHolder')\n\t\t\t\t\t.html($(this).text());\n\t\t\t});\n\t\t},\n\t\tlistenTextAreaChange: function() {\n\t\t\tvar thisInstance = this;\n\t\t\t$('textarea').on('keyup', function() {\n\t\t\t\tvar elem = $(this);\n\t\t\t\tif (!elem.data('has-scroll')) {\n\t\t\t\t\telem.data('has-scroll', true);\n\t\t\t\t\telem.on('scroll keyup', function() {\n\t\t\t\t\t\tthisInstance.resizeTextArea($(this));\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tthisInstance.resizeTextArea($(this));\n\t\t\t});\n\t\t},\n\t\tresizeTextArea: function(elem) {\n\t\t\telem.height(1);\n\t\t\telem.scrollTop(0);\n\t\t\telem.height(elem[0].scrollHeight - elem[0].clientHeight + elem.height());\n\t\t},\n\t\tregisterKnowledgeBaseModal() {\n\t\t\t$('.js-knowledge-base-modal').on('click', () => {\n\t\t\t\tif (window.KnowledgeBaseModalVueComponent.mounted === undefined) {\n\t\t\t\t\twindow.KnowledgeBaseModalVueComponent.mount({\n\t\t\t\t\t\tel: '#KnowledgeBaseModal',\n\t\t\t\t\t\tstate: {\n\t\t\t\t\t\t\tmoduleName: 'KnowledgeBase',\n\t\t\t\t\t\t\tdialog: true\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tKnowledgeBaseModalVueComponent.mounted = true;\n\t\t\t\t} else {\n\t\t\t\t\tvuexStore.commit('KnowledgeBase/setDialog', true);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterChat() {\n\t\t\tif (window === window.parent && window.ChatModalVueComponent !== undefined) {\n\t\t\t\twindow.ChatModalVueComponent.mount({\n\t\t\t\t\tel: '#ChatModalVue'\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tregisterEvents: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tconst container = thisInstance.getContentsContainer(),\n\t\t\t\tmenuContainer = container.find('.js-menu--scroll'),\n\t\t\t\tquickCreateModal = container.find('.quickCreateModules');\n\t\t\tapp.showNewScrollbarLeft(menuContainer, { suppressScrollX: true });\n\t\t\tapp.showNewScrollbar(menuContainer.find('.subMenu').last(), { suppressScrollX: true });\n\t\t\tthisInstance.listenTextAreaChange();\n\t\t\tthisInstance.registerFooTable(); //Enable footable\n\t\t\t$('.js-clear-history').on('click', () => {\n\t\t\t\tapp.clearBrowsingHistory();\n\t\t\t});\n\t\t\t$('.globalSearch').on('click', function() {\n\t\t\t\tvar currentTarget = $(this);\n\t\t\t\tthisInstance.hideSearchMenu();\n\t\t\t\tvar advanceSearchInstance = new Vtiger_AdvanceSearch_Js();\n\t\t\t\tadvanceSearchInstance.setParentContainer(currentTarget.closest('.js-global-search__input'));\n\t\t\t\tadvanceSearchInstance.initiateSearch();\n\t\t\t});\n\t\t\t$('.searchIcon').on('click', function(e) {\n\t\t\t\tvar currentTarget = $(this)\n\t\t\t\t\t.closest('.js-global-search__input')\n\t\t\t\t\t.find('.js-global-search__value');\n\t\t\t\tvar pressEvent = $.Event('keypress');\n\t\t\t\tpressEvent.which = 13;\n\t\t\t\tcurrentTarget.trigger(pressEvent);\n\t\t\t});\n\t\t\tthisInstance.registerAnnouncements();\n\t\t\tthisInstance.registerHotKeys();\n\t\t\tthisInstance.registerToggleButton();\n\t\t\tthisInstance.registerSiteBarButton($('#centerPanel'));\n\t\t\t//this.registerCalendarButtonClickEvent();\n\t\t\t//After selecting the global search module, focus the input element to type\n\t\t\t$('.basicSearchModulesList').on('change', function() {\n\t\t\t\tvar value = $(this)\n\t\t\t\t\t.closest('.js-global-search__input')\n\t\t\t\t\t.find('.js-global-search__value');\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tvalue.focus();\n\t\t\t\t}, 100);\n\t\t\t});\n\t\t\tthisInstance.basicSearch();\n\t\t\tquickCreateModal.on('click', '.quickCreateModule', function(e, params) {\n\t\t\t\tvar moduleName = $(e.currentTarget).data('name');\n\t\t\t\tquickCreateModal.modal('hide');\n\t\t\t\tthisInstance.quickCreateModule(moduleName);\n\t\t\t});\n\t\t\tthisInstance.registerReminderNotification();\n\t\t\tthisInstance.registerMobileEvents();\n\t\t\tthisInstance.registerReminderNotice();\n\t\t\tthisInstance.registerQuickCreateSearch();\n\t\t\tthisInstance.registerKnowledgeBaseModal();\n\t\t\tthisInstance.registerChat();\n\t\t}\n\t}\n);\n$(document).ready(function() {\n\twindow.addEventListener('popstate', event => {\n\t\tif (event.state) {\n\t\t\twindow.location.href = event.state;\n\t\t}\n\t});\n\tVtiger_Header_Js.getInstance().registerEvents();\n});\n"],"names":["test","navigator","userAgent","app","getCookie","setCookie","location","href","$","Class","self","Vtiger_Header_Js","setContentsContainer","element","contentContainer","on","value","val","toLowerCase","filter","item","closest","text","indexOf","removeClass","addClass","hide","not","each","show","thisInstance","announcementContainer","announcements","find","length","announcement","first","aid","data","showModalWindow","modal","remove","e","request","done","res","hideModalWindow","showAnnouncement","backdrop","keyboard","dateFormat","currentDate","vtigerDateFormat","convertToDatePickerFormat","stopImmediatePropagation","calendar","is","DatePickerHide","DatePickerShow","DatePicker","dayOfWeek","currentTarget","which","hideSearchMenu","labelSearch","target","block","widget","ui","autocomplete","_super","menu","ul","items","that","currentCategory","index","category","append","_renderItemData","_renderItem","url","module","id","label","html","appendTo","gsAutocomplete","getMainParams","response","basicSearch","Vtiger_BasicSearch_Js","reduceNumberResults","returnHtml","setMainContainer","search","term","JSON","parse","serverDataFormat","result","reponseDataList","responseData","push","event","selectedItemData","permitted","showAlert","vtranslate","focus","progress","progressIndicator","showSearchResults","thisObject","key","bind","click","moduleName","params","Components","QuickCreate","createRecord","App","getForm","showModal","form","registerPostLoadEvents","container","registerHelpInfo","editViewUrl","goToFullForm","registerTabEvents","save","before","remindersNotice","hasClass","requestReminder","hideActionMenu","hideBreadcrumbActionMenu","toggleClass","hideReminderNotification","closeSidebar","getNotificationsForReminder","hideReminderNotice","actionsContainer","actionBtn","actionBtnMargin","cssActionsTop","top","offset","outerHeight","css","getContentsContainer","attr","popover","toggleBreadcrumbActions","whichColumnEnable","footable","stopPropagation","trigger","records","getModuleName","cacheGet","toggleSiteBar","toogleButton","cacheSet","parents","elem","resizeTextArea","height","scrollTop","scrollHeight","clientHeight","window","KnowledgeBaseModalVueComponent","mounted","undefined","mount","commit","parent","ChatModalVueComponent","menuContainer","quickCreateModal","showNewScrollbarLeft","suppressScrollX","showNewScrollbar","last","listenTextAreaChange","registerFooTable","clearBrowsingHistory","advanceSearchInstance","Vtiger_AdvanceSearch_Js","setParentContainer","initiateSearch","pressEvent","Event","registerAnnouncements","registerHotKeys","registerToggleButton","registerSiteBarButton","quickCreateModule","registerReminderNotification","registerMobileEvents","registerReminderNotice","registerQuickCreateSearch","registerKnowledgeBaseModal","registerChat","document","ready","addEventListener","state","getInstance","registerEvents"],"mappings":"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"}