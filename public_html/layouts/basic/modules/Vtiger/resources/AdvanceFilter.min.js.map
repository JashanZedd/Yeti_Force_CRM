{"version":3,"file":"AdvanceFilter.min.js","sources":["AdvanceFilter.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n * Contributor(s): YetiForce S.A.\n *************************************************************************************/\n'use strict';\n\njQuery.Class(\n\t'Vtiger_AdvanceFilter_Js',\n\t{\n\t\tgetInstance: function (container) {\n\t\t\tvar module = app.getModuleName();\n\t\t\tvar moduleClassName1 = module + '_AdvanceFilterEx_Js';\n\t\t\tvar moduleClassName2 = module + '_AdvanceFilter_Js';\n\t\t\tvar moduleClassName3 = 'Vtiger_AdvanceFilterEx_Js';\n\t\t\tvar moduleClassName4 = 'Vtiger_AdvanceFilter_Js';\n\t\t\tvar instance;\n\t\t\tif (typeof window[moduleClassName1] !== 'undefined') {\n\t\t\t\tinstance = new window[moduleClassName1](container);\n\t\t\t} else if (typeof window[moduleClassName2] !== 'undefined') {\n\t\t\t\tinstance = new window[moduleClassName2](container);\n\t\t\t} else if (typeof window[moduleClassName3] !== 'undefined') {\n\t\t\t\tinstance = new window[moduleClassName3](container);\n\t\t\t} else {\n\t\t\t\tinstance = new window[moduleClassName4](container);\n\t\t\t}\n\t\t\treturn instance;\n\t\t}\n\t},\n\t{\n\t\tfilterContainer: false,\n\t\t//Hold the conditions for a particular field type\n\t\tfieldTypeConditionMapping: false,\n\t\t//Hold the condition and their label translations\n\t\tconditonOperatorLabelMapping: false,\n\t\tdateConditionInfo: false,\n\t\tfieldModelInstance: false,\n\t\t//Holds fields type and conditions for which it needs validation\n\t\tvalidationSupportedFieldConditionMap: {\n\t\t\temail: ['e', 'n']\n\t\t},\n\t\t//Hols field type for which there is validations always needed\n\t\tallConditionValidationNeededFieldList: ['double', 'integer', 'currency'],\n\t\t//used to eliminate mutiple times validation registrations\n\t\tvalidationForControlsRegistered: false,\n\t\tinit: function (container) {\n\t\t\tif (typeof container === 'undefined') {\n\t\t\t\tcontainer = jQuery('.filterContainer');\n\t\t\t}\n\n\t\t\tif (container.is('.filterContainer')) {\n\t\t\t\tthis.setFilterContainer(container);\n\t\t\t} else {\n\t\t\t\tthis.setFilterContainer(jQuery('.filterContainer', container));\n\t\t\t}\n\t\t\tthis.initialize();\n\t\t},\n\t\tgetModuleName: function () {\n\t\t\treturn 'AdvanceFilter';\n\t\t},\n\t\t/**\n\t\t * Function  to initialize the advance filter\n\t\t */\n\t\tinitialize: function () {\n\t\t\tthis.registerEvents();\n\t\t\tthis.initializeOperationMappingDetails();\n\t\t\tthis.loadFieldSpecificUiForAll();\n\t\t},\n\t\t/**\n\t\t * Function which will save the field condition mapping condition label mapping\n\t\t */\n\t\tinitializeOperationMappingDetails: function () {\n\t\t\tvar filterContainer = this.getFilterContainer();\n\t\t\tthis.fieldTypeConditionMapping = jQuery('input[name=\"advanceFilterOpsByFieldType\"]', filterContainer).data(\n\t\t\t\t'value'\n\t\t\t);\n\t\t\tthis.conditonOperatorLabelMapping = jQuery('input[name=\"advanceFilterOptions\"]', filterContainer).data('value');\n\t\t\tthis.dateConditionInfo = jQuery('[name=\"date_filters\"]').data('value');\n\t\t\treturn this;\n\t\t},\n\t\t/**\n\t\t * Function to get the container which holds all the filter elements\n\t\t * @return jQuery object\n\t\t */\n\t\tgetFilterContainer: function () {\n\t\t\treturn this.filterContainer;\n\t\t},\n\t\t/**\n\t\t * Function to set the filter container\n\t\t * @params : element - which represents the filter container\n\t\t * @return : current instance\n\t\t */\n\t\tsetFilterContainer: function (element) {\n\t\t\tthis.filterContainer = element;\n\t\t\treturn this;\n\t\t},\n\t\tgetDateSpecificConditionInfo: function () {\n\t\t\treturn this.dateConditionInfo;\n\t\t},\n\t\t/**\n\t\t * Function which will return set of condition for the given field type\n\t\t * @return array of conditions\n\t\t */\n\t\tgetConditionListFromType: function (fieldType) {\n\t\t\tvar fieldTypeConditions = this.fieldTypeConditionMapping[fieldType];\n\t\t\tif (fieldType == 'D' || fieldType == 'DT') {\n\t\t\t\tfieldTypeConditions = fieldTypeConditions.concat(this.getDateConditions(fieldType));\n\t\t\t}\n\t\t\treturn fieldTypeConditions;\n\t\t},\n\t\tgetDateConditions: function (fieldType) {\n\t\t\tif (fieldType != 'D' && fieldType != 'DT') {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t\tvar dateFilters = this.getDateSpecificConditionInfo();\n\t\t\treturn Object.keys(dateFilters);\n\t\t},\n\t\t/**\n\t\t * Function to get the condition label\n\t\t * @param : key - condition key\n\t\t * @reurn : label for the condition or key if it doest not contain in the condition label mapping\n\t\t */\n\t\tgetConditionLabel: function (key) {\n\t\t\tif (key in this.conditonOperatorLabelMapping) {\n\t\t\t\treturn this.conditonOperatorLabelMapping[key];\n\t\t\t}\n\t\t\tif (key in this.getDateSpecificConditionInfo()) {\n\t\t\t\treturn this.getDateSpecificConditionInfo()[key]['label'];\n\t\t\t}\n\t\t\treturn key;\n\t\t},\n\t\t/**\n\t\t * Function to check if the field selected is empty field\n\t\t * @params : select element which represents the field\n\t\t * @return : boolean true/false\n\t\t */\n\t\tisEmptyFieldSelected: function (fieldSelect) {\n\t\t\tvar selectedOption = fieldSelect.find('option:selected');\n\t\t\t//assumption that empty field will be having value none\n\t\t\tif (selectedOption.val() == 'none') {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\t/**\n\t\t * Function to get the add condition elements\n\t\t * @returns : jQuery object which represents the add conditions elements\n\t\t */\n\t\tgetAddConditionElement: function () {\n\t\t\tvar filterContainer = this.getFilterContainer();\n\t\t\treturn jQuery('.addCondition button', filterContainer);\n\t\t},\n\t\t/**\n\t\t * Function to add new condition row\n\t\t * @params : condtionGroupElement - group where condtion need to be added\n\t\t * @return : current instance\n\t\t */\n\t\taddNewCondition: function (conditionGroupElement) {\n\t\t\tlet basicElement = $('.basic', conditionGroupElement);\n\t\t\tlet newRowElement = basicElement.find('.js-conditions-row').clone(true, true);\n\t\t\tlet selectElement = newRowElement.find('select').addClass('select2');\n\t\t\tlet conditionList = $('.conditionList', conditionGroupElement);\n\t\t\tconditionList.append(newRowElement);\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(selectElement, {\n\t\t\t\tdropdownParent: conditionGroupElement\n\t\t\t});\n\t\t\treturn this;\n\t\t},\n\t\t/**\n\t\t * Function/Handler  which will triggered when user clicks on add condition\n\t\t */\n\t\taddConditionHandler: function (e) {\n\t\t\tvar element = jQuery(e.currentTarget);\n\t\t\tvar conditionGroup = element.closest('div.conditionGroup');\n\t\t\tthis.addNewCondition(conditionGroup);\n\t\t},\n\t\tgetFieldSpecificType: function (fieldSelected) {\n\t\t\tvar fieldInfo = fieldSelected.data('fieldinfo');\n\t\t\tvar type = fieldInfo.type;\n\t\t\tif (type == 'reference') {\n\t\t\t\treturn 'V';\n\t\t\t}\n\t\t\treturn fieldSelected.data('fieldtype');\n\t\t},\n\t\t/**\n\t\t * Function to load condition list for the selected field\n\t\t * @params : fieldSelect - select element which will represents field list\n\t\t * @return : select element which will represent the condition element\n\t\t */\n\t\tloadConditions: function (fieldSelect) {\n\t\t\tvar row = fieldSelect.closest('div.js-conditions-row');\n\t\t\tvar conditionSelectElement = row.find('select[name=\"comparator\"]');\n\t\t\tvar group = row.find('[name=\"column_condition\"]');\n\t\t\tvar conditionSelected = conditionSelectElement.val();\n\t\t\tvar fieldSelected = fieldSelect.find('option:selected');\n\t\t\tvar fieldSpecificType = this.getFieldSpecificType(fieldSelected);\n\t\t\tvar conditionList = this.getConditionListFromType(fieldSpecificType);\n\t\t\tvar fieldInfo = fieldSelected.data('fieldinfo');\n\t\t\t//for none in field name\n\t\t\tif (typeof conditionList === 'undefined') {\n\t\t\t\tconditionList = {};\n\t\t\t\tconditionList['none'] = 'None';\n\t\t\t}\n\t\t\tvar options = '';\n\t\t\tfor (var key in conditionList) {\n\t\t\t\tif (\n\t\t\t\t\tjQuery.inArray(fieldInfo.type, ['rangeTime', 'image']) != -1 &&\n\t\t\t\t\tjQuery.inArray(conditionList[key], ['y', 'ny']) == -1\n\t\t\t\t) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\tjQuery.inArray(fieldInfo.type, [\n\t\t\t\t\t\t'userCreator',\n\t\t\t\t\t\t'owner',\n\t\t\t\t\t\t'picklist',\n\t\t\t\t\t\t'modules',\n\t\t\t\t\t\t'tree',\n\t\t\t\t\t\t'inventoryLimit',\n\t\t\t\t\t\t'languages',\n\t\t\t\t\t\t'currencyList',\n\t\t\t\t\t\t'fileLocationType'\n\t\t\t\t\t]) != -1 &&\n\t\t\t\t\tjQuery.inArray(conditionList[key], ['s', 'ew', 'c', 'k']) != -1\n\t\t\t\t) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\tconditionList[key] === 'om' &&\n\t\t\t\t\tjQuery.inArray(fieldInfo.type, ['owner', 'sharedOwner', 'userCreator']) == -1\n\t\t\t\t) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\tjQuery.inArray(conditionList[key], ['wr', 'nwr']) != -1 &&\n\t\t\t\t\tjQuery.inArray(fieldInfo.type, ['owner']) == -1\n\t\t\t\t) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\tjQuery.inArray(conditionList[key], ['s', 'ew']) != -1 &&\n\t\t\t\t\tjQuery.inArray(fieldInfo.type, ['taxes', 'multipicklist', 'categoryMultipicklist', 'sharedOwner']) != -1\n\t\t\t\t) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\tjQuery.inArray(conditionList[key], ['bw', 'm', 'h']) != -1 &&\n\t\t\t\t\tjQuery.inArray(fieldInfo.type, ['time']) != -1\n\t\t\t\t) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (conditionList[key] === 'd' && group.val() !== 'and') {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\t//IE Browser consider the prototype properties also, it should consider has own properties only.\n\t\t\t\tif (conditionList.hasOwnProperty(key)) {\n\t\t\t\t\tvar conditionValue = conditionList[key];\n\t\t\t\t\tvar conditionLabel = this.getConditionLabel(conditionValue);\n\t\t\t\t\toptions += '<option value=\"' + conditionValue + '\"';\n\t\t\t\t\tif (conditionValue == conditionSelected) {\n\t\t\t\t\t\toptions += ' selected=\"selected\" ';\n\t\t\t\t\t}\n\t\t\t\t\toptions += '>' + conditionLabel + '</option>';\n\t\t\t\t}\n\t\t\t}\n\t\t\tconditionSelectElement.empty().html(options).trigger('change');\n\t\t\treturn conditionSelectElement;\n\t\t},\n\t\t/**\n\t\t * Functiont to get the field specific ui for the selected field\n\t\t * @prarms : fieldSelectElement - select element which will represents field list\n\t\t * @return : jquery object which represents the ui for the field\n\t\t */\n\t\tgetFieldSpecificUi: function (fieldSelectElement) {\n\t\t\tlet fieldModel = this.fieldModelInstance,\n\t\t\t\thtml;\n\t\t\tif (fieldModel.get('comparatorElementVal') === 'd') {\n\t\t\t\thtml = '<div class=\"checkbox\"><label><input type=\"checkbox\" name=\"' + fieldModel.getName() + '\" value=\"0\" ';\n\t\t\t\tif (fieldModel.getValue() === 1 || fieldModel.getValue() === '1') {\n\t\t\t\t\thtml += 'checked';\n\t\t\t\t}\n\t\t\t\thtml += ' >' + app.vtranslate('JS_IGNORE_EMPTY_VALUES') + '</label></div>';\n\t\t\t\treturn $(html);\n\t\t\t} else if (\n\t\t\t\tfieldModel.getType().toLowerCase() === 'boolean' ||\n\t\t\t\tfieldSelectElement.find('option:selected').data('fieldtype') === 'C'\n\t\t\t) {\n\t\t\t\tlet selectedValue = fieldSelectElement.closest('.js-conditions-row').find('[data-value=\"value\"]').val();\n\t\t\t\thtml = '<select class=\"select2\" name=\"' + fieldModel.getName() + '\">';\n\t\t\t\thtml += '<option value=\"0\"';\n\t\t\t\tif (selectedValue === '0') {\n\t\t\t\t\thtml += ' selected=\"selected\" ';\n\t\t\t\t}\n\t\t\t\thtml += '>' + app.vtranslate('JS_IS_DISABLED') + '</option>';\n\n\t\t\t\thtml += '<option value=\"1\"';\n\t\t\t\tif (selectedValue === '1') {\n\t\t\t\t\thtml += ' selected=\"selected\" ';\n\t\t\t\t}\n\t\t\t\thtml += '>' + app.vtranslate('JS_IS_ENABLED') + '</option>';\n\t\t\t\thtml += '</select>';\n\t\t\t\treturn $(html);\n\t\t\t} else {\n\t\t\t\treturn $(fieldModel.getUiTypeSpecificHtml());\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Function which will load the field specific ui for a selected field\n\t\t * @prarms : fieldSelect - select element which will represents field list\n\t\t * @return : current instance\n\t\t */\n\t\tloadFieldSpecificUi: function (fieldSelect) {\n\t\t\tconst selectedOption = fieldSelect.find('option:selected');\n\t\t\tconst row = fieldSelect.closest('div.js-conditions-row');\n\t\t\tconst fieldUiHolder = row.find('.fieldUiHolder');\n\t\t\tconst conditionSelectElement = row.find('select[name=\"comparator\"]');\n\t\t\tlet fieldInfo = selectedOption.data('fieldinfo');\n\t\t\tconst valueType = fieldUiHolder.find(`[name=\"${fieldInfo.name}\"]`).data('valuetype');\n\t\t\tlet fieldType = 'string';\n\t\t\tif (typeof fieldInfo !== 'undefined') {\n\t\t\t\tfieldType = fieldInfo.type;\n\t\t\t} else {\n\t\t\t\tfieldInfo = {};\n\t\t\t}\n\n\t\t\tvar comparatorElementVal = (fieldInfo.comparatorElementVal = conditionSelectElement.val());\n\t\t\tif (fieldType == 'date' || fieldType == 'datetime') {\n\t\t\t\tfieldInfo.dateSpecificConditions = this.getDateSpecificConditionInfo();\n\t\t\t}\n\t\t\tvar moduleName = this.getModuleName();\n\t\t\tvar fieldModel = Vtiger_Field_Js.getInstance(fieldInfo, moduleName);\n\t\t\tthis.fieldModelInstance = fieldModel;\n\t\t\tvar fieldSpecificUi = this.getFieldSpecificUi(fieldSelect);\n\n\t\t\t//remove validation since we dont need validations for all eleements\n\t\t\t// Both filter and find is used since we dont know whether the element is enclosed in some conainer like currency\n\t\t\tvar fieldName = fieldModel.getName();\n\n\t\t\tif (\n\t\t\t\t$.inArray(fieldModel.getType(), [\n\t\t\t\t\t'multipicklist',\n\t\t\t\t\t'sharedOwner',\n\t\t\t\t\t'multiReferenceValue',\n\t\t\t\t\t'taxes',\n\t\t\t\t\t'categoryMultipicklist'\n\t\t\t\t]) > -1\n\t\t\t) {\n\t\t\t\tfieldName = fieldName + '[]';\n\t\t\t} else if (\n\t\t\t\t$.inArray(fieldModel.getType(), [\n\t\t\t\t\t'userCreator',\n\t\t\t\t\t'picklist',\n\t\t\t\t\t'owner',\n\t\t\t\t\t'languages',\n\t\t\t\t\t'modules',\n\t\t\t\t\t'inventoryLimit',\n\t\t\t\t\t'currencyList',\n\t\t\t\t\t'fileLocationType'\n\t\t\t\t]) > -1 &&\n\t\t\t\tfieldSpecificUi.is('select') &&\n\t\t\t\t(comparatorElementVal == 'e' || comparatorElementVal == 'n')\n\t\t\t) {\n\t\t\t\tfieldName = fieldName + '[]';\n\t\t\t}\n\t\t\tfieldSpecificUi.filter('[name=\"' + fieldName + '\"]').addClass('form-control');\n\t\t\tfieldSpecificUi\n\t\t\t\t.filter('[name=\"' + fieldName + '\"]')\n\t\t\t\t.attr('data-value', 'value')\n\t\t\t\t.removeAttr('data-validation-engine');\n\t\t\tfieldSpecificUi\n\t\t\t\t.find('[name=\"' + fieldName + '\"]')\n\t\t\t\t.attr('data-value', 'value')\n\t\t\t\t.removeAttr('data-validation-engine');\n\n\t\t\tif (fieldModel.getType() == 'currency') {\n\t\t\t\tfieldSpecificUi\n\t\t\t\t\t.filter('[name=\"' + fieldName + '\"]')\n\t\t\t\t\t.attr('data-decimal-separator', fieldInfo.decimal_separator)\n\t\t\t\t\t.attr('data-group-separator', fieldInfo.group_separator);\n\t\t\t\tfieldSpecificUi\n\t\t\t\t\t.find('[name=\"' + fieldName + '\"]')\n\t\t\t\t\t.attr('data-decimal-separator', fieldInfo.decimal_separator)\n\t\t\t\t\t.attr('data-group-separator', fieldInfo.group_separator);\n\t\t\t}\n\t\t\tif (valueType) {\n\t\t\t\tthis.fieldModelInstance.data.workflow_valuetype = valueType;\n\t\t\t}\n\t\t\tfieldUiHolder.html(fieldSpecificUi);\n\n\t\t\tif (fieldSpecificUi.is('select')) {\n\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(fieldSpecificUi, { dropdownParent: row });\n\t\t\t} else if (fieldSpecificUi.has('input.dateField').length > 0) {\n\t\t\t\tApp.Fields.Date.register(fieldSpecificUi);\n\t\t\t} else if (fieldSpecificUi.has('input.dateRangeField').length > 0) {\n\t\t\t\tApp.Fields.Date.registerRange(fieldSpecificUi, { ranges: false });\n\t\t\t} else if (fieldSpecificUi.has('input.clockPicker').length > 0) {\n\t\t\t\tapp.registerEventForClockPicker(fieldSpecificUi);\n\t\t\t}\n\t\t\tthis.addValidationToFieldIfNeeded(fieldSelect);\n\n\t\t\t// Is Empty, today, tomorrow, yesterday conditions does not need any field input value - hide the UI\n\t\t\t// re-enable if condition element is chosen.\n\t\t\tvar specialConditions = [\n\t\t\t\t'y',\n\t\t\t\t'today',\n\t\t\t\t'tomorrow',\n\t\t\t\t'yesterday',\n\t\t\t\t'smallerthannow',\n\t\t\t\t'greaterthannow',\n\t\t\t\t'ny',\n\t\t\t\t'om',\n\t\t\t\t'nom',\n\t\t\t\t'wr',\n\t\t\t\t'nwr'\n\t\t\t];\n\t\t\tif (specialConditions.indexOf(conditionSelectElement.val()) != -1) {\n\t\t\t\tfieldUiHolder.hide();\n\t\t\t} else {\n\t\t\t\tfieldUiHolder.show();\n\t\t\t}\n\n\t\t\treturn this;\n\t\t},\n\t\t/**\n\t\t * Function to load field specific ui for all the select elements - this is used on load\n\t\t * to show field specific ui for all the fields\n\t\t */\n\t\tloadFieldSpecificUiForAll: function () {\n\t\t\tvar conditionsContainer = jQuery('.conditionList');\n\t\t\tvar fieldSelectElement = jQuery('select[name=\"columnname\"]', conditionsContainer);\n\t\t\tjQuery.each(fieldSelectElement, function (i, elem) {\n\t\t\t\tvar currentElement = jQuery(elem);\n\t\t\t\tif (currentElement.val() != 'none') {\n\t\t\t\t\tcurrentElement.trigger('change', { _intialize: true });\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn this;\n\t\t},\n\t\t/**\n\t\t * Function to add the validation if required\n\t\t * @prarms : selectFieldElement - select element which will represents field list\n\t\t */\n\t\taddValidationToFieldIfNeeded: function (selectFieldElement) {\n\t\t\tvar selectedOption = selectFieldElement.find('option:selected');\n\t\t\tvar row = selectFieldElement.closest('div.js-conditions-row');\n\t\t\tvar fieldSpecificElement = row.find('[data-value=\"value\"]');\n\t\t\tvar validator = selectedOption.attr('data-validator');\n\n\t\t\tif (this.isFieldSupportsValidation(selectFieldElement)) {\n\t\t\t\t//data attribute will not be present while attaching validation engine events . so we are\n\t\t\t\t//depending on the fallback option which is class\n\t\t\t\tfieldSpecificElement\n\t\t\t\t\t.addClass('validate[funcCall[Vtiger_Base_Validator_Js.invokeValidation]]')\n\t\t\t\t\t.attr('data-validation-engine', 'validate[funcCall[Vtiger_Base_Validator_Js.invokeValidation]]')\n\t\t\t\t\t.attr('data-fieldinfo', JSON.stringify(selectedOption.data('fieldinfo')));\n\t\t\t\tif (typeof validator !== 'undefined') {\n\t\t\t\t\tfieldSpecificElement.attr('data-validator', validator);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfieldSpecificElement\n\t\t\t\t\t.removeClass('validate[funcCall[Vtiger_Base_Validator_Js.invokeValidation]]')\n\t\t\t\t\t.removeAttr('data-validation-engine');\n\t\t\t}\n\t\t\treturn this;\n\t\t},\n\t\t/**\n\t\t * Check if field supports validation\n\t\t * @prarms : selectFieldElement - select element which will represents field list\n\t\t * @return - boolen true/false\n\t\t */\n\t\tisFieldSupportsValidation: function (fieldSelect) {\n\t\t\tvar fieldModel = this.fieldModelInstance;\n\t\t\tvar type = fieldModel.getType();\n\n\t\t\tif (jQuery.inArray(type, this.allConditionValidationNeededFieldList) >= 0) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tvar row = fieldSelect.closest('div.js-conditions-row');\n\t\t\tvar conditionSelectElement = row.find('select[name=\"comparator\"]');\n\n\t\t\tvar conditionValue = conditionSelectElement.val();\n\n\t\t\tif (type in this.validationSupportedFieldConditionMap) {\n\t\t\t\tif (jQuery.inArray(conditionValue, this.validationSupportedFieldConditionMap[type]) >= 0) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\t/**\n\t\t * Function to retrieve the values of the filter\n\t\t * @return : object\n\t\t */\n\t\tgetValues: function () {\n\t\t\tconst thisInstance = this;\n\t\t\tlet fieldList = ['columnname', 'comparator', 'value', 'column_condition'],\n\t\t\t\tfilterContainer = this.getFilterContainer(),\n\t\t\t\tconditionGroups = $('.conditionGroup', filterContainer),\n\t\t\t\tvalues = {},\n\t\t\t\tcolumnIndex = 0;\n\t\t\t$('.conditionGroup', filterContainer).each(function (index, domElement) {\n\t\t\t\tlet groupElement = $(domElement);\n\t\t\t\tvalues[index + 1] = {};\n\t\t\t\tvalues[index + 1]['columns'] = {};\n\t\t\t\t$('.conditionList .js-conditions-row', groupElement).each(function (i, conditionDomElement) {\n\t\t\t\t\tlet rowElement = $(conditionDomElement),\n\t\t\t\t\t\tfieldSelectElement = $('[name=\"columnname\"]', rowElement),\n\t\t\t\t\t\tvalueSelectElement = $('[data-value=\"value\"]', rowElement);\n\t\t\t\t\t//To not send empty fields to server\n\t\t\t\t\tif (thisInstance.isEmptyFieldSelected(fieldSelectElement)) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\tlet fieldDataInfo = fieldSelectElement.find('option:selected').data('fieldinfo'),\n\t\t\t\t\t\tfieldType = fieldDataInfo.type,\n\t\t\t\t\t\trowValues = {},\n\t\t\t\t\t\tkey,\n\t\t\t\t\t\tfield;\n\t\t\t\t\tif (fieldType === 'owner' || fieldType === 'userCreator') {\n\t\t\t\t\t\tfor (key in fieldList) {\n\t\t\t\t\t\t\tfield = fieldList[key];\n\t\t\t\t\t\t\tif (field === 'value' && valueSelectElement.is('select')) {\n\t\t\t\t\t\t\t\tlet newValuesArr = valueSelectElement.val();\n\t\t\t\t\t\t\t\tif (!newValuesArr) {\n\t\t\t\t\t\t\t\t\trowValues[field] = '';\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\trowValues[field] = newValuesArr.join(',');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else if (field === 'value' && valueSelectElement.is('input')) {\n\t\t\t\t\t\t\t\trowValues[field] =\n\t\t\t\t\t\t\t\t\tvalueSelectElement.attr('type') === 'checkbox' && valueSelectElement.prop('checked')\n\t\t\t\t\t\t\t\t\t\t? 1\n\t\t\t\t\t\t\t\t\t\t: valueSelectElement.val();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\trowValues[field] = $('[name=\"' + field + '\"]', rowElement).val();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (\n\t\t\t\t\t\t$.inArray(fieldType, [\n\t\t\t\t\t\t\t'picklist',\n\t\t\t\t\t\t\t'multipicklist',\n\t\t\t\t\t\t\t'modules',\n\t\t\t\t\t\t\t'sharedOwner',\n\t\t\t\t\t\t\t'multiReferenceValue',\n\t\t\t\t\t\t\t'inventoryLimit',\n\t\t\t\t\t\t\t'languages',\n\t\t\t\t\t\t\t'currencyList',\n\t\t\t\t\t\t\t'taxes',\n\t\t\t\t\t\t\t'fileLocationType',\n\t\t\t\t\t\t\t'categoryMultipicklist'\n\t\t\t\t\t\t]) > -1\n\t\t\t\t\t) {\n\t\t\t\t\t\tfor (key in fieldList) {\n\t\t\t\t\t\t\tfield = fieldList[key];\n\t\t\t\t\t\t\tif (field === 'value' && valueSelectElement.attr('type') === 'checkbox') {\n\t\t\t\t\t\t\t\trowValues[field] = valueSelectElement.prop('checked') ? 1 : valueSelectElement.val();\n\t\t\t\t\t\t\t} else if (field === 'value' && valueSelectElement.is('input')) {\n\t\t\t\t\t\t\t\tlet pickListValues = valueSelectElement.data('picklistvalues'),\n\t\t\t\t\t\t\t\t\tvaluesArr = valueSelectElement.val().split(','),\n\t\t\t\t\t\t\t\t\tnewValuesArr = [];\n\t\t\t\t\t\t\t\tfor (i = 0; i < valuesArr.length; i++) {\n\t\t\t\t\t\t\t\t\tif (typeof pickListValues[valuesArr[i]] !== 'undefined') {\n\t\t\t\t\t\t\t\t\t\tnewValuesArr.push(pickListValues[valuesArr[i]]);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tnewValuesArr.push(valuesArr[i]);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\trowValues[field] = newValuesArr.join(',');\n\t\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\t\tfield === 'value' &&\n\t\t\t\t\t\t\t\tvalueSelectElement.is('select') &&\n\t\t\t\t\t\t\t\t$.inArray(fieldType, [\n\t\t\t\t\t\t\t\t\t'picklist',\n\t\t\t\t\t\t\t\t\t'multipicklist',\n\t\t\t\t\t\t\t\t\t'modules',\n\t\t\t\t\t\t\t\t\t'sharedOwner',\n\t\t\t\t\t\t\t\t\t'multiReferenceValue',\n\t\t\t\t\t\t\t\t\t'inventoryLimit',\n\t\t\t\t\t\t\t\t\t'languages',\n\t\t\t\t\t\t\t\t\t'currencyList',\n\t\t\t\t\t\t\t\t\t'taxes',\n\t\t\t\t\t\t\t\t\t'fileLocationType',\n\t\t\t\t\t\t\t\t\t'categoryMultipicklist'\n\t\t\t\t\t\t\t\t]) > -1\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tlet value = valueSelectElement.val();\n\t\t\t\t\t\t\t\tif (value == null) {\n\t\t\t\t\t\t\t\t\trowValues[field] = value;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\trowValues[field] = value.join(',');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\trowValues[field] = $('[name=\"' + field + '\"]', rowElement).val();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfor (key in fieldList) {\n\t\t\t\t\t\t\tfield = fieldList[key];\n\t\t\t\t\t\t\tif (field === 'value') {\n\t\t\t\t\t\t\t\trowValues[field] =\n\t\t\t\t\t\t\t\t\tvalueSelectElement.attr('type') === 'checkbox' && valueSelectElement.prop('checked')\n\t\t\t\t\t\t\t\t\t\t? 1\n\t\t\t\t\t\t\t\t\t\t: valueSelectElement.val();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\trowValues[field] = $('[name=\"' + field + '\"]', rowElement).val();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (rowElement.is(':last-child')) {\n\t\t\t\t\t\trowValues['column_condition'] = '';\n\t\t\t\t\t}\n\t\t\t\t\tvalues[index + 1]['columns'][columnIndex] = rowValues;\n\t\t\t\t\tcolumnIndex++;\n\t\t\t\t});\n\t\t\t\tif (groupElement.find('div.groupCondition').length > 0) {\n\t\t\t\t\tvalues[index + 1]['condition'] = conditionGroups.find('div.groupCondition [name=\"condition\"]').val();\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn values;\n\t\t},\n\t\t/**\n\t\t * Event handle which will be triggred on deletion of a condition row\n\t\t */\n\t\tdeleteConditionHandler: function (e) {\n\t\t\tvar element = jQuery(e.currentTarget);\n\t\t\tvar row = element.closest('.js-conditions-row');\n\t\t\trow.remove();\n\t\t},\n\t\t/**\n\t\t * Event handler which is invoked on add condition\n\t\t */\n\t\tregisterAddCondition: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tthis.getAddConditionElement().on('click', function (e) {\n\t\t\t\tthisInstance.addConditionHandler(e);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function which will register field change event\n\t\t */\n\t\tregisterFieldChange: function () {\n\t\t\tvar filterContainer = this.getFilterContainer();\n\t\t\tvar thisInstance = this;\n\t\t\tfilterContainer.on('change', 'select[name=\"columnname\"]', function (e, data) {\n\t\t\t\tvar currentElement = jQuery(e.currentTarget);\n\t\t\t\tif (typeof data === 'undefined' || data._intialize != true) {\n\t\t\t\t\tvar row = currentElement.closest('div.js-conditions-row');\n\t\t\t\t\tvar conditionSelectElement = row.find('select[name=\"comparator\"]');\n\t\t\t\t\tconditionSelectElement.empty();\n\t\t\t\t}\n\t\t\t\tthisInstance.loadConditions(currentElement);\n\t\t\t\tthisInstance.loadFieldSpecificUi(currentElement);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function which will register condition change\n\t\t */\n\t\tregisterConditionChange: function () {\n\t\t\tvar filterContainer = this.getFilterContainer();\n\t\t\tvar thisInstance = this;\n\t\t\tfilterContainer.on('change', 'select[name=\"comparator\"]', function (e) {\n\t\t\t\tvar comparatorSelectElement = jQuery(e.currentTarget);\n\t\t\t\tvar row = comparatorSelectElement.closest('div.js-conditions-row');\n\t\t\t\tvar fieldSelectElement = row.find('select[name=\"columnname\"]');\n\t\t\t\t//To handle the validation depending on condtion\n\t\t\t\tthisInstance.loadFieldSpecificUi(fieldSelectElement);\n\t\t\t\tthisInstance.addValidationToFieldIfNeeded(fieldSelectElement);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to regisgter delete condition event\n\t\t */\n\t\tregisterDeleteCondition: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar filterContainer = this.getFilterContainer();\n\t\t\tfilterContainer.on('click', '.js-condition-delete', function (e) {\n\t\t\t\tthisInstance.deleteConditionHandler(e);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function which will regiter all events for this page\n\t\t */\n\t\tregisterEvents: function () {\n\t\t\tthis.registerAddCondition();\n\t\t\tthis.registerFieldChange();\n\t\t\tthis.registerDeleteCondition();\n\t\t\tthis.registerConditionChange();\n\t\t}\n\t}\n);\n\nVtiger_Field_Js(\n\t'AdvanceFilter_Field_Js',\n\t{},\n\t{\n\t\tgetUiTypeSpecificHtml: function () {\n\t\t\tvar uiTypeModel = this.getUiTypeModel();\n\t\t\treturn uiTypeModel.getUi();\n\t\t},\n\t\tgetModuleName: function () {\n\t\t\tvar currentModule = app.getModuleName();\n\n\t\t\tvar type = this.getType();\n\t\t\tif (\n\t\t\t\t$.inArray(type, [\n\t\t\t\t\t'picklist',\n\t\t\t\t\t'userCreator',\n\t\t\t\t\t'multipicklist',\n\t\t\t\t\t'owner',\n\t\t\t\t\t'userCreator',\n\t\t\t\t\t'modules',\n\t\t\t\t\t'date',\n\t\t\t\t\t'datetime',\n\t\t\t\t\t'sharedOwner',\n\t\t\t\t\t'multiReferenceValue',\n\t\t\t\t\t'inventoryLimit',\n\t\t\t\t\t'languages',\n\t\t\t\t\t'currencyList',\n\t\t\t\t\t'taxes',\n\t\t\t\t\t'fileLocationType',\n\t\t\t\t\t'categoryMultipicklist'\n\t\t\t\t]) > -1\n\t\t\t) {\n\t\t\t\tcurrentModule = 'AdvanceFilter';\n\t\t\t}\n\t\t\treturn currentModule;\n\t\t}\n\t}\n);\n\nVtiger_Picklist_Field_Js(\n\t'AdvanceFilter_Picklist_Field_Js',\n\t{},\n\t{\n\t\tgetUi: function () {\n\t\t\tvar html = '<select class=\"select2\" multiple name=\"' + this.getName() + '[]\">';\n\t\t\tvar pickListValues = this.getPickListValues();\n\t\t\tvar selectedOption = app.htmlDecode(this.getValue());\n\t\t\tvar selectedOptionsArray = selectedOption.split(',');\n\t\t\tfor (var option in pickListValues) {\n\t\t\t\thtml += '<option value=\"' + option + '\" ';\n\t\t\t\tif (jQuery.inArray(option, selectedOptionsArray) != -1) {\n\t\t\t\t\thtml += ' selected ';\n\t\t\t\t}\n\t\t\t\thtml += '>' + pickListValues[option] + '</option>';\n\t\t\t}\n\t\t\thtml += '</select>';\n\t\t\tvar selectContainer = jQuery(html);\n\t\t\tthis.addValidationToElement(selectContainer);\n\t\t\treturn selectContainer;\n\t\t}\n\t}\n);\n\nAdvanceFilter_Picklist_Field_Js('AdvanceFilter_Modules_Field_Js', {}, {});\n\nAdvanceFilter_Picklist_Field_Js('AdvanceFilter_Inventorylimit_Field_Js', {}, {});\n\nAdvanceFilter_Picklist_Field_Js('AdvanceFilter_Filelocationtype_Field_Js', {}, {});\n\nVtiger_Multipicklist_Field_Js('AdvanceFilter_Multipicklist_Field_Js', {}, {});\n\nVtiger_Categorymultipicklist_Field_Js(\n\t'AdvanceFilter_Categorymultipicklist_Field_Js',\n\t{},\n\t{\n\t\tgetReadOnly: function () {\n\t\t\tlet result = '';\n\t\t\tif (this.getValue()) {\n\t\t\t\tresult = ' readonly=\"true\" ';\n\t\t\t}\n\t\t\treturn result;\n\t\t},\n\t\t/**\n\t\t * Function to get the user date format\n\t\t */\n\t\tgetTreeTemplate: function () {\n\t\t\treturn this.get('treetemplate');\n\t\t},\n\t\t/**\n\t\t * Function to get the user date format\n\t\t */\n\t\tgetModuleName: function () {\n\t\t\treturn this.get('modulename');\n\t\t},\n\t\tgetUi: function () {\n\t\t\tlet pickListValues = this.getPickListValues();\n\t\t\tlet value = this.getValue() || '';\n\t\t\tlet values = value.split(',').map((v) => pickListValues[v] || '');\n\t\t\tlet displayValue = values.join(', ', values);\n\n\t\t\tlet multiple = 1;\n\t\t\tif (this.getType() === 'tree') {\n\t\t\t\tmultiple = 0;\n\t\t\t}\n\n\t\t\tconst treeContainer = document.createElement('div');\n\t\t\ttreeContainer.setAttribute('class', 'js-tree-container fieldValue');\n\t\t\tconst sourceInput = document.createElement('input');\n\t\t\tsourceInput.setAttribute('name', this.getName());\n\t\t\tsourceInput.setAttribute('type', 'hidden');\n\t\t\tsourceInput.setAttribute('value', this.getValue());\n\t\t\tsourceInput.setAttribute('class', 'sourceField');\n\t\t\tsourceInput.setAttribute('fieldinfo', JSON.stringify(this.getData()));\n\t\t\tsourceInput.setAttribute('data-multiple', multiple);\n\t\t\tsourceInput.setAttribute('data-value', 'value');\n\t\t\tsourceInput.setAttribute('data-treetemplate', this.getTreeTemplate());\n\t\t\tsourceInput.setAttribute('data-module-name', this.getModuleName());\n\t\t\tconst inputGroup = document.createElement('div');\n\t\t\tinputGroup.setAttribute('class', 'input-group');\n\n\t\t\tconst clearBtn = document.createElement('span');\n\t\t\tclearBtn.setAttribute('class', 'input-group-prepend clearTreeSelection u-cursor-pointer');\n\t\t\tconst clearBtnText = document.createElement('span');\n\t\t\tclearBtnText.setAttribute('class', 'input-group-text');\n\t\t\tconst clearBtnTextIcon = document.createElement('span');\n\t\t\tclearBtnTextIcon.setAttribute('class', 'fas fa-times-circle');\n\t\t\tclearBtnText.appendChild(clearBtnTextIcon);\n\t\t\tclearBtn.appendChild(clearBtnText);\n\n\t\t\tconst sourceDisplay = document.createElement('input');\n\t\t\tsourceDisplay.setAttribute('name', this.getName() + '_display');\n\t\t\tsourceDisplay.setAttribute('id', this.getName() + '_display');\n\t\t\tsourceDisplay.setAttribute('type', 'text');\n\t\t\tsourceDisplay.setAttribute('class', 'ml-0 treeAutoComplete form-control');\n\t\t\tsourceDisplay.setAttribute('value', displayValue);\n\t\t\tsourceInput.setAttribute('fieldinfo', JSON.stringify(this.getData()));\n\t\t\tif (this.getReadOnly()) {\n\t\t\t\tsourceDisplay.setAttribute('readonly', 'readonly');\n\t\t\t}\n\n\t\t\tconst searchBtn = document.createElement('span');\n\t\t\tsearchBtn.setAttribute('class', 'input-group-append js-tree-modal u-cursor-pointer');\n\t\t\tconst searchBtnText = document.createElement('span');\n\t\t\tsearchBtnText.setAttribute('class', 'input-group-text');\n\t\t\tconst searchBtnTextIcon = document.createElement('span');\n\t\t\tsearchBtnTextIcon.setAttribute('class', 'fas fa-search');\n\t\t\tsearchBtnText.appendChild(searchBtnTextIcon);\n\t\t\tsearchBtn.appendChild(searchBtnText);\n\n\t\t\tinputGroup.appendChild(clearBtn);\n\t\t\tinputGroup.appendChild(sourceDisplay);\n\t\t\tinputGroup.appendChild(searchBtn);\n\n\t\t\ttreeContainer.appendChild(sourceInput);\n\t\t\ttreeContainer.appendChild(inputGroup);\n\n\t\t\tlet selectContainer = $(treeContainer);\n\t\t\tApp.Fields.Tree.register(selectContainer);\n\t\t\tthis.addValidationToElement(selectContainer);\n\t\t\treturn selectContainer;\n\t\t}\n\t}\n);\n\nAdvanceFilter_Categorymultipicklist_Field_Js('Vtiger_Tree_Field_Js', {}, {});\n\nAdvanceFilter_Picklist_Field_Js('AdvanceFilter_Languages_Field_Js', {}, {});\n\nAdvanceFilter_Picklist_Field_Js('AdvanceFilter_Currencylist_Field_Js', {}, {});\n\nAdvanceFilter_Multipicklist_Field_Js('AdvanceFilter_Taxes_Field_Js', {}, {});\n\nVtiger_Owner_Field_Js(\n\t'AdvanceFilter_Owner_Field_Js',\n\t{},\n\t{\n\t\tgetUi: function () {\n\t\t\tlet comparatorSelectedOptionVal = this.get('comparatorElementVal'),\n\t\t\t\thtml = '',\n\t\t\t\tselectContainer;\n\t\t\tif (\n\t\t\t\tcomparatorSelectedOptionVal === 'e' ||\n\t\t\t\tcomparatorSelectedOptionVal === 'n' ||\n\t\t\t\t(this.getName() === 'shownerid' && $.inArray(comparatorSelectedOptionVal, ['c', 'k']) != -1)\n\t\t\t) {\n\t\t\t\thtml = '<select class=\"select2\" multiple name=\"' + this.getName() + '[]\">';\n\t\t\t\tlet pickListValues = this.getPickListValues(),\n\t\t\t\t\tselectedOption = app.htmlDecode(this.getValue()),\n\t\t\t\t\toptGroup;\n\t\t\t\tfor (optGroup in pickListValues) {\n\t\t\t\t\thtml += '<optgroup label=\"' + optGroup + '\">';\n\t\t\t\t\tlet optionGroupValues = pickListValues[optGroup],\n\t\t\t\t\t\toption;\n\t\t\t\t\tfor (option in optionGroupValues) {\n\t\t\t\t\t\thtml += '<option value=\"' + option + '\" ';\n\t\t\t\t\t\tif ($.inArray(option, selectedOption.split(',')) != -1) {\n\t\t\t\t\t\t\thtml += ' selected ';\n\t\t\t\t\t\t}\n\t\t\t\t\t\thtml += '>' + optionGroupValues[option] + '</option>';\n\t\t\t\t\t}\n\t\t\t\t\thtml += '</optgroup>';\n\t\t\t\t}\n\t\t\t\thtml += '</select>';\n\t\t\t\tselectContainer = $(html);\n\t\t\t\tthis.addValidationToElement(selectContainer);\n\t\t\t\treturn selectContainer;\n\t\t\t} else {\n\t\t\t\tlet tagsArray = [];\n\t\t\t\t$.each(this.getPickListValues(), function (groups, blocks) {\n\t\t\t\t\t$.each(blocks, function (i, e) {\n\t\t\t\t\t\ttagsArray.push($.trim(e));\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\thtml = '<input data-tags=\"' + tagsArray + '\" type=\"hidden\" class=\"row select2\" name=\"' + this.getName() + '\">';\n\t\t\t\tselectContainer = $(html).val(this.getValue());\n\t\t\t\tselectContainer.data('tags', tagsArray);\n\t\t\t\tthis.addValidationToElement(selectContainer);\n\t\t\t\treturn selectContainer;\n\t\t\t}\n\t\t}\n\t}\n);\n\nVtiger_Multireferencevalue_Field_Js('AdvanceFilter_Multireferencevalue_Field_Js', {}, {});\n\nAdvanceFilter_Owner_Field_Js('AdvanceFilter_Sharedowner_Field_Js', {}, {});\n\nAdvanceFilter_Owner_Field_Js('AdvanceFilter_Usercreator_Field_Js', {}, {});\nVtiger_Date_Field_Js(\n\t'AdvanceFilter_Date_Field_Js',\n\t{},\n\t{\n\t\t/**\n\t\t * Function to get the ui\n\t\t * @return - input text field\n\t\t */\n\t\tgetUi: function () {\n\t\t\tlet comparatorSelectedOptionVal = this.get('comparatorElementVal'),\n\t\t\t\tdateSpecificConditions = this.get('dateSpecificConditions'),\n\t\t\t\thtml = '';\n\t\t\tif (comparatorSelectedOptionVal === 'bw' || comparatorSelectedOptionVal === 'custom') {\n\t\t\t\thtml =\n\t\t\t\t\t'<div class=\"date\"><input class=\"dateRangeField form-control\" data-calendar-type=\"range\" name=\"' +\n\t\t\t\t\tthis.getName() +\n\t\t\t\t\t'\" data-date-format=\"' +\n\t\t\t\t\tthis.getDateFormat() +\n\t\t\t\t\t'\" type=\"text\" ReadOnly=\"true\" value=\"' +\n\t\t\t\t\tthis.getValue() +\n\t\t\t\t\t'\"></div>';\n\t\t\t\tlet element = $(html),\n\t\t\t\t\tdateFieldUi = element.find('.dateRangeField');\n\t\t\t\tif (dateFieldUi.val().indexOf(',') !== -1) {\n\t\t\t\t\tlet valueArray = this.getValue().split(','),\n\t\t\t\t\t\tstartDateTime = valueArray[0],\n\t\t\t\t\t\tendDateTime = valueArray[1];\n\t\t\t\t\tif (startDateTime.indexOf(' ') !== -1) {\n\t\t\t\t\t\tlet dateTime = startDateTime.split(' ');\n\t\t\t\t\t\tstartDateTime = dateTime[0];\n\t\t\t\t\t}\n\t\t\t\t\tif (endDateTime.indexOf(' ') !== -1) {\n\t\t\t\t\t\tlet dateTimeValue = endDateTime.split(' ');\n\t\t\t\t\t\tendDateTime = dateTimeValue[0];\n\t\t\t\t\t}\n\t\t\t\t\tdateFieldUi.val(startDateTime + ',' + endDateTime);\n\t\t\t\t} else {\n\t\t\t\t\t// while changing to between/custom from equal/notequal/... we'll only have one value\n\t\t\t\t\tlet value = this.getValue().split(' '),\n\t\t\t\t\t\tstartDate = value[0],\n\t\t\t\t\t\tendDate = value[0];\n\t\t\t\t\tif (startDate !== '' && endDate !== '') {\n\t\t\t\t\t\tdateFieldUi.val(startDate + ',' + endDate);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn this.addValidationToElement(element);\n\t\t\t} else if (comparatorSelectedOptionVal in dateSpecificConditions) {\n\t\t\t\tlet startValue = dateSpecificConditions[comparatorSelectedOptionVal]['startdate'],\n\t\t\t\t\tendValue = dateSpecificConditions[comparatorSelectedOptionVal]['enddate'];\n\t\t\t\tif (\n\t\t\t\t\tcomparatorSelectedOptionVal === 'today' ||\n\t\t\t\t\tcomparatorSelectedOptionVal === 'tomorrow' ||\n\t\t\t\t\tcomparatorSelectedOptionVal === 'yesterday'\n\t\t\t\t) {\n\t\t\t\t\thtml = '<input name=\"' + this.getName() + '\" type=\"text\" ReadOnly=\"true\" value=\"' + startValue + '\">';\n\t\t\t\t} else {\n\t\t\t\t\thtml =\n\t\t\t\t\t\t'<input name=\"' +\n\t\t\t\t\t\tthis.getName() +\n\t\t\t\t\t\t'\" type=\"text\" ReadOnly=\"true\" value=\"' +\n\t\t\t\t\t\tstartValue +\n\t\t\t\t\t\t',' +\n\t\t\t\t\t\tendValue +\n\t\t\t\t\t\t'\">';\n\t\t\t\t}\n\t\t\t\treturn $(html);\n\t\t\t} else {\n\t\t\t\tlet fieldUi = this._super(),\n\t\t\t\t\tdateTimeFieldValue = fieldUi.find('.dateField').val(),\n\t\t\t\t\tdateValue = dateTimeFieldValue.split(' ');\n\t\t\t\tif (dateValue[1] === '00:00:00') {\n\t\t\t\t\tdateTimeFieldValue = dateValue[0];\n\t\t\t\t} else if (\n\t\t\t\t\tcomparatorSelectedOptionVal === 'e' ||\n\t\t\t\t\tcomparatorSelectedOptionVal === 'n' ||\n\t\t\t\t\tcomparatorSelectedOptionVal === 'b' ||\n\t\t\t\t\tcomparatorSelectedOptionVal === 'a'\n\t\t\t\t) {\n\t\t\t\t\tlet dateTimeArray = dateTimeFieldValue.split(' ');\n\t\t\t\t\tdateTimeFieldValue = dateTimeArray[0];\n\t\t\t\t}\n\t\t\t\tfieldUi.find('.dateField').val(dateTimeFieldValue);\n\t\t\t\treturn fieldUi;\n\t\t\t}\n\t\t}\n\t}\n);\n\nAdvanceFilter_Date_Field_Js('AdvanceFilter_Datetime_Field_Js', {}, {});\n"],"names":["jQuery","Class","getInstance","container","module","app","getModuleName","moduleClassName1","moduleClassName2","moduleClassName3","window","instance","filterContainer","fieldTypeConditionMapping","conditonOperatorLabelMapping","dateConditionInfo","fieldModelInstance","validationSupportedFieldConditionMap","email","allConditionValidationNeededFieldList","validationForControlsRegistered","init","is","setFilterContainer","initialize","registerEvents","initializeOperationMappingDetails","loadFieldSpecificUiForAll","getFilterContainer","data","element","getDateSpecificConditionInfo","getConditionListFromType","fieldType","fieldTypeConditions","concat","getDateConditions","Object","keys","dateFilters","getConditionLabel","key","isEmptyFieldSelected","fieldSelect","find","selectedOption","val","getAddConditionElement","addNewCondition","conditionGroupElement","$","newRowElement","basicElement","clone","selectElement","addClass","conditionList","append","App","Fields","Picklist","showSelect2ElementView","dropdownParent","addConditionHandler","e","currentTarget","conditionGroup","closest","getFieldSpecificType","fieldSelected","fieldInfo","type","loadConditions","conditionSelectElement","row","group","conditionSelected","fieldSpecificType","inArray","hasOwnProperty","conditionValue","conditionLabel","options","empty","html","trigger","getFieldSpecificUi","fieldSelectElement","fieldModel","get","getName","getValue","vtranslate","getType","toLowerCase","selectedValue","getUiTypeSpecificHtml","loadFieldSpecificUi","fieldUiHolder","valueType","name","comparatorElementVal","dateSpecificConditions","moduleName","Vtiger_Field_Js","fieldName","fieldSpecificUi","filter","attr","removeAttr","decimal_separator","group_separator","workflow_valuetype","has","length","Date","register","registerRange","ranges","registerEventForClockPicker","addValidationToFieldIfNeeded","indexOf","show","hide","conditionsContainer","each","i","elem","currentElement","_intialize","selectFieldElement","fieldSpecificElement","validator","isFieldSupportsValidation","JSON","stringify","removeClass","getValues","fieldList","conditionGroups","values","columnIndex","index","domElement","groupElement","conditionDomElement","rowElement","valueSelectElement","thisInstance","field","fieldDataInfo","rowValues","newValuesArr","join","prop","pickListValues","valuesArr","split","push","value","deleteConditionHandler","remove","registerAddCondition","on","registerFieldChange","registerConditionChange","comparatorSelectElement","registerDeleteCondition","getUiTypeModel","getUi","currentModule","Vtiger_Picklist_Field_Js","getPickListValues","htmlDecode","selectedOptionsArray","option","addValidationToElement","selectContainer","AdvanceFilter_Picklist_Field_Js","Vtiger_Multipicklist_Field_Js","Vtiger_Categorymultipicklist_Field_Js","getReadOnly","result","getTreeTemplate","map","v","displayValue","multiple","document","createElement","treeContainer","setAttribute","sourceInput","getData","inputGroup","clearBtn","clearBtnText","clearBtnTextIcon","appendChild","sourceDisplay","searchBtn","searchBtnText","searchBtnTextIcon","Tree","AdvanceFilter_Categorymultipicklist_Field_Js","AdvanceFilter_Multipicklist_Field_Js","Vtiger_Owner_Field_Js","comparatorSelectedOptionVal","optGroup","optionGroupValues","groups","blocks","tagsArray","trim","Vtiger_Multireferencevalue_Field_Js","AdvanceFilter_Owner_Field_Js","Vtiger_Date_Field_Js","getDateFormat","dateFieldUi","startDateTime","valueArray","endDateTime","dateTime","dateTimeValue","startDate","endDate","endValue","startValue","fieldUi","_super","dateTimeFieldValue","dateValue","dateTimeArray","AdvanceFilter_Date_Field_Js"],"mappings":"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"}