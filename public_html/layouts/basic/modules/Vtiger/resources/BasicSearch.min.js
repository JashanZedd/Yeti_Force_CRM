jQuery.Class("Vtiger_BasicSearch_Js",{},{searchModule:false,currentSearchModule:false,reduceNumberResults:false,returnHtml:true,mainConatiner:false,getSearchModule:function(){if(this.searchModule===false){var module=app.getModuleName();if(typeof this.getCurrentSearchModule()!=="undefined"){module=this.getCurrentSearchModule()}this.setSearchModule(module)}return this.searchModule},setSearchModule:function(moduleName){this.searchModule=moduleName;return this},setMainContainer:function(container){this.mainConatiner=container;return this},getCurrentSearchModule:function(){if(this.currentSearchModule===false&&this.mainConatiner){this.currentSearchModule=this.mainConatiner.find(".basicSearchModulesList").val()}return this.currentSearchModule},_search:function(params){var aDeferred=jQuery.Deferred();if(typeof params==="undefined"){params={}}if(params.searchModule){params.module=params.searchModule}else if(!params.module){params.module=app.getModuleName()}params.view="BasicAjax";params.mode="showSearchResults";params.limit=this.reduceNumberResults;params.html=this.returnHtml;if(app.getParentModuleName()){params.parent=app.getParentModuleName()}if(this.mainConatiner.find("input[data-operator]").length&&this.mainConatiner.find("input[data-operator]").data("operator")!=""){params.operator=this.mainConatiner.find("input[data-operator]").data("operator")}AppConnector.request(params).then(function(data){aDeferred.resolve(data)},function(error,err){aDeferred.reject(error)});return aDeferred.promise()},search:function(value){var searchModule=this.getCurrentSearchModule();var params={};params.value=value;if(typeof searchModule!=="undefined"){params.searchModule=searchModule}return this._search(params)},showSearchResults:function(data){var aDeferred=jQuery.Deferred();var postLoad=function(data){var body=jQuery(data).find(".contents");aDeferred.resolve(data)};var params={};params.data=data;params.cb=postLoad;app.showModalWindow(params);return aDeferred.promise()}});