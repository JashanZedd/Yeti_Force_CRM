{"version":3,"file":"RecordsList.min.js","sources":["RecordsList.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\n$.Class(\n\t'Base_RecordsList_JS',\n\t{},\n\t{\n\t\t/**\n\t\t * Event for select row\n\t\t */\n\t\tselectEvent: false,\n\t\t/**\n\t\t * List search instance\n\t\t */\n\t\tlistSearchInstance: false,\n\t\t/**\n\t\t * Module name\n\t\t */\n\t\tmoduleName: false,\n\t\t/**\n\t\t * Modal container\n\t\t */\n\t\tcontainer: false,\n\t\t/**\n\t\t * Set event for select row\n\t\t * @param {function} cb\n\t\t */\n\t\tsetSelectEvent: function(cb) {\n\t\t\tthis.selectEvent = cb;\n\t\t},\n\t\t/**\n\t\t * Get params for record list\n\t\t * @returns {{module: string, view: string, src_module: string, src_record: int, src_field: string, related_parent_module: string, related_parent_id: int|string, page: int, orderby: string, sortorder: string, multi_select: boolean, totalCount: int|string, noOfEntries: int, onlyBody: boolean}}\n\t\t */\n\t\tgetParams: function() {\n\t\t\tlet params = {\n\t\t\t\tmodule: this.moduleName,\n\t\t\t\tview: this.container.data('view'),\n\t\t\t\tsrc_module: this.container.find('.js-parent-module').val(),\n\t\t\t\tsrc_record: this.container.find('.js-source-record').val(),\n\t\t\t\tsrc_field: this.container.find('.js-source-field').val(),\n\t\t\t\trelated_parent_module: this.container.find('.js-related-parent-module').val(),\n\t\t\t\trelated_parent_id: this.container.find('.js-related-parent-id').val(),\n\t\t\t\tpage: this.container.find('.js-page-number').val(),\n\t\t\t\torderby: this.container.find('.js-order-by').val(),\n\t\t\t\tsortorder: this.container.find('.js-sort-order').val(),\n\t\t\t\tmulti_select: this.container.find('.js-multi-select').val(),\n\t\t\t\ttotalCount: this.container.find('.js-total-count').val(),\n\t\t\t\tnoOfEntries: this.container.find('.js-no-entries').val(),\n\t\t\t\tfilterFields: JSON.parse(this.container.find('.js-filter-fields').val()),\n\t\t\t\tonlyBody: true\n\t\t\t};\n\t\t\tlet searchValue = this.listSearchInstance.getAlphabetSearchValue();\n\t\t\tparams['search_params'] = JSON.stringify(this.listSearchInstance.getListSearchParams(true));\n\t\t\tif (typeof searchValue !== 'undefined' && searchValue.length > 0) {\n\t\t\t\tparams['search_key'] = this.listSearchInstance.getAlphabetSearchField();\n\t\t\t\tparams['search_value'] = searchValue;\n\t\t\t\tparams['operator'] = 's';\n\t\t\t}\n\t\t\treturn params;\n\t\t},\n\t\t/**\n\t\t * Load records list\n\t\t * @param {object} params\n\t\t * @returns {*}\n\t\t */\n\t\tloadRecordList: function(params) {\n\t\t\tconst body = this.container.find('.js-modal-body');\n\t\t\tconst aDeferred = $.Deferred();\n\t\t\tconst progressIndicatorElement = $.progressIndicator({\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true,\n\t\t\t\t\telementToBlock: body\n\t\t\t\t}\n\t\t\t});\n\t\t\tAppConnector.request($.extend(this.getParams(), params))\n\t\t\t\t.done(responseData => {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tbody.html($(responseData).html());\n\t\t\t\t\tthis.registerBasicEvents();\n\t\t\t\t\taDeferred.resolve(responseData);\n\t\t\t\t})\n\t\t\t\t.fail(function(textStatus, errorThrown) {\n\t\t\t\t\taDeferred.reject(textStatus, errorThrown);\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\ttext: app.vtranslate('JS_NOT_ALLOWED_VALUE'),\n\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/*\n\t\t * Register the click event for listView headers\n\t\t */\n\t\tregisterHeadersClickEvent: function() {\n\t\t\tYetiForce_ListSearch_Js.registerSearch(this.container, (data) => {\n\t\t\t\tthis.loadRecordList(data);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Update record pagination\n\t\t * @param {boolean} countNumberRecords\n\t\t */\n\t\tupdatePagination: function(countNumberRecords) {\n\t\t\tlet params = this.getParams();\n\t\t\tparams['mode'] = 'getPagination';\n\t\t\tif (countNumberRecords) {\n\t\t\t\tparams['showTotalCount'] = true;\n\t\t\t}\n\t\t\tAppConnector.request(params).done(responseData => {\n\t\t\t\tthis.container.find('.js-pagination-container').html(responseData);\n\t\t\t\tlet totalCount = this.container.find('.js-pagination-list').data('totalCount');\n\t\t\t\tif (totalCount) {\n\t\t\t\t\tthis.container.find('.js-total-count').val(totalCount);\n\t\t\t\t}\n\t\t\t\tthis.registerPaginationEvents();\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register pagination events\n\t\t */\n\t\tregisterPaginationEvents: function() {\n\t\t\tconst self = this;\n\t\t\tthis.container.find('.js-next-page').on('click', function() {\n\t\t\t\tif ($(this).hasClass('disabled')) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (self.container.find('.js-no-entries').val() == self.container.find('.js-page-limit').val()) {\n\t\t\t\t\tlet pageNumber = self.container.find('.js-page-number');\n\t\t\t\t\tlet nextPageNumber = parseInt(parseFloat(pageNumber.val())) + 1;\n\t\t\t\t\tpageNumber.val(nextPageNumber);\n\t\t\t\t\tself.loadRecordList().done(function() {\n\t\t\t\t\t\tself.updatePagination();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.container.find('.js-page--previous').on('click', function() {\n\t\t\t\tlet pageNumber = self.container.find('.js-page-number');\n\t\t\t\tif (pageNumber.val() > 1) {\n\t\t\t\t\tlet nextPageNumber = parseInt(parseFloat(pageNumber.val())) - 1;\n\t\t\t\t\tpageNumber.val(nextPageNumber);\n\t\t\t\t\tself.loadRecordList().done(function() {\n\t\t\t\t\t\tself.updatePagination();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.container.find('.js-page--set').on('click', function() {\n\t\t\t\tif ($(this).hasClass('disabled')) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tself.container.find('.js-page-number').val($(this).data('id'));\n\t\t\t\tself.loadRecordList().done(function() {\n\t\t\t\t\tself.updatePagination();\n\t\t\t\t});\n\t\t\t});\n\t\t\tthis.container.find('.js-count-number-records').on('click', function() {\n\t\t\t\tapp.hidePopover($(this));\n\t\t\t\tVtiger_Helper_Js.showMessage({\n\t\t\t\t\ttitle: app.vtranslate('JS_LBL_PERMISSION'),\n\t\t\t\t\ttext: app.vtranslate('JS_GET_PAGINATION_INFO'),\n\t\t\t\t\ttype: 'info'\n\t\t\t\t});\n\t\t\t\tself.updatePagination(true);\n\t\t\t});\n\t\t\tthis.container\n\t\t\t\t.find('.js-page--jump-drop-down')\n\t\t\t\t.on('click', 'li', function(e) {\n\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t})\n\t\t\t\t.on('keypress', '.js-page-jump', function(e) {\n\t\t\t\t\tif (e.which == 13) {\n\t\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\t\tconst element = $(this);\n\t\t\t\t\t\tconst response = Vtiger_WholeNumberGreaterThanZero_Validator_Js.invokeValidation(element);\n\t\t\t\t\t\tif (typeof response !== 'undefined') {\n\t\t\t\t\t\t\telement.validationEngine('showPrompt', response, '', 'topLeft', true);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\telement.validationEngine('hideAll');\n\t\t\t\t\t\t\tlet pageNumber = self.container.find('.js-page-number');\n\t\t\t\t\t\t\tlet currentPageNumber = pageNumber.val();\n\t\t\t\t\t\t\tlet newPageNumber = parseInt($(this).val());\n\t\t\t\t\t\t\tvar totalPages = parseInt(self.container.find('.js-page--total').text());\n\t\t\t\t\t\t\tif (newPageNumber > totalPages) {\n\t\t\t\t\t\t\t\tvar error = app.vtranslate('JS_PAGE_NOT_EXIST');\n\t\t\t\t\t\t\t\telement.validationEngine('showPrompt', error, '', 'topLeft', true);\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (newPageNumber == currentPageNumber) {\n\t\t\t\t\t\t\t\tVtiger_Helper_Js.showMessage({\n\t\t\t\t\t\t\t\t\ttext: app.vtranslate('JS_YOU_ARE_IN_PAGE_NUMBER') + ' ' + newPageNumber,\n\t\t\t\t\t\t\t\t\ttype: 'info'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tpageNumber.val(newPageNumber);\n\t\t\t\t\t\t\tself.loadRecordList().done(function() {\n\t\t\t\t\t\t\t\tself.updatePagination();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register list search\n\t\t */\n\t\tregisterListSearch: function() {\n\t\t\tthis.listSearchInstance = YetiForce_ListSearch_Js.getInstance(this.container, false, this, this.moduleName);\n\t\t\tthis.listSearchInstance.setViewName('RecordsList');\n\t\t},\n\t\t/**\n\t\t * Register list events\n\t\t */\n\t\tregisterListEvents: function() {\n\t\t\tconst self = this;\n\t\t\tlet additional = this.container.find('.js-additional-informations').val() == 1;\n\t\t\tself.container.on('click', '.js-select-row', function(e) {\n\t\t\t\tif ($(e.target).hasClass('js-select-checkbox') || $(e.target).hasClass('u-cursor-auto')) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\tlet data = $(this).data();\n\t\t\t\tif (self.container.find('.js-multi-select').val() === 'true') {\n\t\t\t\t\tlet selected = {};\n\t\t\t\t\tif (additional) {\n\t\t\t\t\t\tselected[data.id] = [];\n\t\t\t\t\t\t$(this)\n\t\t\t\t\t\t\t.closest('tr')\n\t\t\t\t\t\t\t.find('td[data-field]')\n\t\t\t\t\t\t\t.each(function(index, field) {\n\t\t\t\t\t\t\t\tfield = $(field);\n\t\t\t\t\t\t\t\tselected[data.id].push({\n\t\t\t\t\t\t\t\t\tvalue: field.text(),\n\t\t\t\t\t\t\t\t\tfield: field.data('field'),\n\t\t\t\t\t\t\t\t\ttype: field.data('type')\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tselected[data.id] = data.name;\n\t\t\t\t\t}\n\t\t\t\t\tself.selectEvent(selected, e);\n\t\t\t\t} else {\n\t\t\t\t\tself.selectEvent(data, e);\n\t\t\t\t}\n\n\t\t\t\tapp.hideModalWindow(false, self.container.parent().attr('id'));\n\t\t\t});\n\t\t\tself.container.on('click', '.js-selected-rows', function(e) {\n\t\t\t\tlet selected = {};\n\t\t\t\tself.container.find('table tr.js-select-row .js-select-checkbox').each(function(index, element) {\n\t\t\t\t\telement = $(element);\n\t\t\t\t\tif (!element.is(':checked')) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\tlet data = element.closest('tr').data();\n\t\t\t\t\tif (additional) {\n\t\t\t\t\t\tselected[data.id] = [];\n\t\t\t\t\t\telement\n\t\t\t\t\t\t\t.closest('tr')\n\t\t\t\t\t\t\t.find('td[data-field]')\n\t\t\t\t\t\t\t.each(function(index, field) {\n\t\t\t\t\t\t\t\tfield = $(field);\n\t\t\t\t\t\t\t\tselected[data.id].push({\n\t\t\t\t\t\t\t\t\tvalue: field.text(),\n\t\t\t\t\t\t\t\t\tfield: field.data('field'),\n\t\t\t\t\t\t\t\t\ttype: field.data('type')\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tselected[data.id] = data.name;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif (Object.keys(selected).length <= 0) {\n\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\ttext: app.vtranslate('JS_PLEASE_SELECT_ONE_RECORD')\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tself.selectEvent(selected, e);\n\t\t\t\t\tapp.hideModalWindow($(e.target).closest('.js-modal-container'));\n\t\t\t\t}\n\t\t\t});\n\t\t\tself.container.on('change', '.js-hierarchy-records', function() {\n\t\t\t\tself.container.find('.js-related-parent-id').val(this.value);\n\t\t\t\tself.container.find('.js-total-count').val('');\n\t\t\t\tself.container.find('.js-page-number').val(1);\n\t\t\t\tself.loadRecordList().done(function() {\n\t\t\t\t\tself.updatePagination();\n\t\t\t\t});\n\t\t\t});\n\t\t\tself.container.on('click', '.js-select-checkbox', function(e) {\n\t\t\t\tlet parentElem, element;\n\t\t\t\tparentElem = element = $(this);\n\t\t\t\tif (element.data('type') === 'all') {\n\t\t\t\t\tparentElem = element.closest('table').find('.js-select-checkbox[data-type=\"row\"]');\n\t\t\t\t}\n\t\t\t\tif (element.is(':checked')) {\n\t\t\t\t\tparentElem\n\t\t\t\t\t\t.prop('checked', true)\n\t\t\t\t\t\t.closest('tr')\n\t\t\t\t\t\t.addClass('highlightBackgroundColor');\n\t\t\t\t} else {\n\t\t\t\t\tparentElem\n\t\t\t\t\t\t.prop('checked', false)\n\t\t\t\t\t\t.closest('tr')\n\t\t\t\t\t\t.removeClass('highlightBackgroundColor');\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register modal basic events\n\t\t */\n\t\tregisterBasicEvents: function() {\n\t\t\tthis.registerListSearch();\n\t\t\tthis.registerPaginationEvents();\n\t\t},\n\t\t/**\n\t\t * Register modal events\n\t\t * @param {jQuery} modalContainer\n\t\t */\n\t\tregisterEvents: function(modalContainer) {\n\t\t\tthis.container = modalContainer;\n\t\t\tthis.moduleName = this.container.data('module');\n\t\t\tthis.registerBasicEvents();\n\t\t\tthis.registerListEvents();\n\t\t\tthis.registerHeadersClickEvent();\n\t\t}\n\t}\n);\n"],"names":["$","Class","cb","selectEvent","params","moduleName","container","data","find","val","JSON","parse","searchValue","listSearchInstance","getAlphabetSearchValue","stringify","getListSearchParams","length","getAlphabetSearchField","body","aDeferred","Deferred","progressIndicatorElement","progressIndicator","request","extend","getParams","done","mode","html","responseData","registerBasicEvents","resolve","fail","textStatus","errorThrown","reject","showPnotify","app","vtranslate","promise","registerSearch","loadRecordList","countNumberRecords","totalCount","registerPaginationEvents","self","on","hasClass","pageNumber","nextPageNumber","parseInt","parseFloat","updatePagination","hidePopover","showMessage","e","stopImmediatePropagation","which","element","response","Vtiger_WholeNumberGreaterThanZero_Validator_Js","invokeValidation","validationEngine","currentPageNumber","newPageNumber","totalPages","text","error","YetiForce_ListSearch_Js","getInstance","setViewName","additional","target","selected","id","closest","each","index","field","push","name","hideModalWindow","parent","attr","is","Object","keys","value","parentElem","prop","addClass","removeClass","registerListSearch","modalContainer","registerListEvents","registerHeadersClickEvent"],"mappings":"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"}