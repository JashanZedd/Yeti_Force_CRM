{"version":3,"file":"BasicSearch.min.js","sources":["BasicSearch.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n *************************************************************************************/\n'use strict';\n\njQuery.Class('Vtiger_BasicSearch_Js', {}, {\n\t//stores the module that need to be searched\n\tsearchModule: false,\n\t//stores the module that need to be searched which is selected by the user\n\tcurrentSearchModule: false,\n\t// reduce the number of results\n\treduceNumberResults: false,\n\t// Should the result be in html\n\treturnHtml: true,\n\t// Main conatiner with modules, value and buttons\n\tmainConatiner: false,\n\t/**\n\t * Function to get the search module\n\t */\n\tgetSearchModule: function () {\n\t\tif (this.searchModule === false) {\n\t\t\t//default gives current module\n\t\t\tvar module = app.getModuleName();\n\t\t\tif (typeof this.getCurrentSearchModule() !== \"undefined\") {\n\t\t\t\tmodule = this.getCurrentSearchModule();\n\t\t\t}\n\n\t\t\tthis.setSearchModule(module);\n\t\t}\n\t\treturn this.searchModule;\n\t},\n\t/**\n\t * Function to set the search module\n\t */\n\tsetSearchModule: function (moduleName) {\n\t\tthis.searchModule = moduleName;\n\t\treturn this;\n\t},\n\t/**\n\t * Function to set main conatainer\n\t */\n\tsetMainContainer: function (container) {\n\t\tthis.mainConatiner = container;\n\t\treturn this;\n\t},\n\t/**\n\t * Function to get the user selected search module\n\t */\n\tgetCurrentSearchModule: function () {\n\t\tif (this.currentSearchModule === false && this.mainConatiner) {\n\t\t\tthis.currentSearchModule = this.mainConatiner.find('.basicSearchModulesList').val();\n\t\t}\n\t\treturn this.currentSearchModule;\n\t},\n\t/**\n\t * Function which will perform the search\n\t */\n\t_search: function (params) {\n\t\tvar aDeferred = jQuery.Deferred();\n\t\tif (typeof params === \"undefined\") {\n\t\t\tparams = {};\n\t\t}\n\t\tif(params.searchModule && params.searchModule !== '-'){\n\t\t\tparams.module = params.searchModule;\n\t\t}else{\n\t\t\tparams.module = app.getModuleName();\n\t\t}\n\t\tparams.view = 'BasicAjax';\n\t\tparams.mode = 'showSearchResults';\n\t\tparams.limit = this.reduceNumberResults;\n\t\tparams.html = this.returnHtml;\n\t\tif (app.getParentModuleName()) {\n\t\t\tparams.parent = app.getParentModuleName()\n\t\t}\n\t\tif (this.mainConatiner.find('input[data-operator]').length && this.mainConatiner.find('input[data-operator]').data('operator') != '') {\n\t\t\tparams.operator = this.mainConatiner.find('input[data-operator]').data('operator');\n\t\t}\n\t\tAppConnector.request(params).done(function (data) {\n\t\t\taDeferred.resolve(data);\n\t\t}).fail(function (error, err) {\n\t\t\taDeferred.reject(error);\n\t\t});\n\t\treturn aDeferred.promise();\n\t},\n\t/**\n\t * Helper function whicn invokes search\n\t */\n\tsearch: function (value) {\n\t\tvar searchModule = this.getCurrentSearchModule();\n\t\tvar params = {};\n\t\tparams.value = value;\n\t\tif (typeof searchModule !== \"undefined\") {\n\t\t\tparams.searchModule = searchModule;\n\t\t}\n\t\treturn this._search(params);\n\t},\n\t/**\n\t * Function which shows the search results\n\t */\n\tshowSearchResults: function (data) {\n\t\tvar aDeferred = jQuery.Deferred();\n\t\tvar postLoad = function (data) {\n\t\t\taDeferred.resolve(data);\n\t\t};\n\t\tvar params = {};\n\t\tparams.data = data;\n\t\tparams.cb = postLoad;\n\t\tapp.showModalWindow(params);\n\t\treturn aDeferred.promise();\n\t}\n\n});\n\n"],"names":["jQuery","Class","searchModule","currentSearchModule","reduceNumberResults","returnHtml","mainConatiner","getSearchModule","app","getModuleName","getCurrentSearchModule","module","setSearchModule","moduleName","setMainContainer","container","find","val","_search","params","Deferred","view","mode","limit","html","getParentModuleName","parent","length","data","operator","AppConnector","request","done","aDeferred","resolve","fail","error","reject","promise","search","value","showSearchResults","cb","showModalWindow"],"mappings":";;AAUAA,OAAOC,KAAP,CAAa,uBAAb,CAAsC,EAAtC,CAA0C,CAEzCC,eAFyC,CAIzCC,sBAJyC,CAMzCC,sBANyC,CAQzCC,aARyC,CAUzCC,gBAVyC,CAczCC,gBAAiB,0BAAY,CAC5B,GAAI,UAAKL,YAAT,CAAiC,CAEhC,WAAaM,IAAIC,aAAJ,EAAb,CAC6C,WAAzC,cAAYC,sBAAL,EAHqB,GAI/BC,OAAS,KAAKD,sBAAL,EAJsB,EAOhC,KAAKE,eAAL,CAAqBD,MAArB,EACA,CACD,YAAYT,YACZ,CAzBwC,CA6BzCU,gBAAiB,yBAAUC,UAAV,CAAsB,CAEtC,YADKX,YAAL,CAAoBW,UACpB,CAAO,IACP,CAhCwC,CAoCzCC,iBAAkB,0BAAUC,SAAV,CAAqB,CAEtC,YADKT,aAAL,CAAqBS,SACrB,CAAO,IACP,CAvCwC,CA2CzCL,uBAAwB,iCAAY,CAInC,OAHI,UAAKP,mBAAL,EAAsC,KAAKG,aAG/C,GAFC,KAAKH,mBAAL,CAA2B,KAAKG,aAAL,CAAmBU,IAAnB,CAAwB,yBAAxB,EAAmDC,GAAnD,EAE5B,EAAO,KAAKd,mBACZ,CAhDwC,CAoDzCe,QAAS,iBAAUC,MAAV,CAAkB,CAC1B,cAAgBnB,OAAOoB,QAAP,EAAhB,CAwBA,OAvBsB,WAAlB,eAuBJ,GAtBCD,OAAS,EAsBV,EAnBCA,OAAOR,MAmBR,CApBGQ,OAAOjB,YAAP,EAA+C,GAAxB,UAAOA,YAoBjC,CAnBiBiB,OAAOjB,YAmBxB,CAjBiBM,IAAIC,aAAJ,EAiBjB,CAfAU,OAAOE,IAAP,CAAc,WAed,CAdAF,OAAOG,IAAP,CAAc,mBAcd,CAbAH,OAAOI,KAAP,CAAe,KAAKnB,mBAapB,CAZAe,OAAOK,IAAP,CAAc,KAAKnB,UAYnB,CAXIG,IAAIiB,mBAAJ,EAWJ,GAVCN,OAAOO,MAAP,CAAgBlB,IAAIiB,mBAAJ,EAUjB,EARI,KAAKnB,aAAL,CAAmBU,IAAnB,CAAwB,sBAAxB,EAAgDW,MAAhD,EAA8H,EAApE,OAAKrB,aAAL,CAAmBU,IAAnB,CAAwB,sBAAxB,EAAgDY,IAAhD,CAAqD,UAArD,CAQ9D,GAPCT,OAAOU,QAAP,CAAkB,KAAKvB,aAAL,CAAmBU,IAAnB,CAAwB,sBAAxB,EAAgDY,IAAhD,CAAqD,UAArD,CAOnB,EALAE,aAAaC,OAAb,CAAqBZ,MAArB,EAA6Ba,IAA7B,CAAkC,SAAUJ,IAAV,CAAgB,CACjDK,UAAUC,OAAV,CAAkBN,IAAlB,EACA,CAFD,EAEGO,IAFH,CAEQ,SAAUC,KAAV,CAAsB,CAC7BH,UAAUI,MAAV,CAAiBD,KAAjB,EACA,CAJD,CAKA,CAAOH,UAAUK,OAAV,EACP,CA9EwC,CAkFzCC,OAAQ,gBAAUC,KAAV,CAAiB,kBACL,KAAK9B,sBAAL,EADK,CAEpBS,OAAS,EAFW,CAOxB,cAJOqB,KAAP,CAAeA,KAIf,CAH4B,WAAxB,qBAGJ,GAFCrB,OAAOjB,YAAP,CAAsBA,YAEvB,EAAO,KAAKgB,OAAL,CAAaC,MAAb,CACP,CA1FwC,CA8FzCsB,kBAAmB,2BAAUb,IAAV,CAAgB,eAClB5B,OAAOoB,QAAP,EADkB,CAK9BD,OAAS,EALqB,CASlC,cAHOS,IAAP,CAAcA,IAGd,CAFAT,OAAOuB,EAAP,CALe,iBAAA,CAAUd,IAAV,CAAgB,CAC9BK,UAAUC,OAAV,CAAkBN,IAAlB,EACA,CAKD,CADApB,IAAImC,eAAJ,CAAoBxB,MAApB,CACA,CAAOc,UAAUK,OAAV,EACP,CAxGwC,CAA1C"}