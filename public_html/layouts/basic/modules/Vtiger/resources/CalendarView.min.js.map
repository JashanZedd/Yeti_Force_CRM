{"version":3,"file":"CalendarView.min.js","sources":["CalendarView.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\n/**\n * Class representing a standard calendar.\n * @extends Calendar_Js\n */\nwindow.Vtiger_Calendar_Js = class Vtiger_Calendar_Js extends Calendar_Js {\n\tconstructor(container, readonly) {\n\t\tsuper(container, readonly, false);\n\t\tthis.browserHistory = false;\n\t\tthis.calendarContainer = false;\n\t\tthis.addCommonMethodsToYearView();\n\t\tthis.calendar = this.getCalendarView();\n\t}\n\tgetCalendarSidebarData() {}\n\tregisterEditForm() {}\n\tregisterCacheSettings() {}\n\tregisterPinUser() {}\n\n\taddCommonMethodsToYearView() {\n\t\tconst self = this;\n\t\tFC.views.year = FC.views.year.extend({\n\t\t\tbaseInstance: self,\n\t\t\tselectDays: self.selectDays,\n\t\t\tgetCalendarCreateView: self.getCalendarCreateView,\n\t\t\tgetSidebarView: self.getSidebarView,\n\t\t\tgetCurrentCvId: self.getCurrentCvId,\n\t\t\tgetCalendarView: self.getCalendarView,\n\t\t\tshowRightPanelForm: self.showRightPanelForm,\n\t\t\tgetSelectedUsersCalendar: self.getSelectedUsersCalendar,\n\t\t\tregisterClearFilterButton: self.registerClearFilterButton,\n\t\t\tclearFilterButton: self.clearFilterButton,\n\t\t\tregisterFilterTabChange: self.registerFilterTabChange,\n\t\t\tsidebarView: self.sidebarView,\n\t\t\tregisterAfterSubmitForm: self.registerAfterSubmitForm,\n\t\t\tregisterViewRenderEvents: self.registerViewRenderEvents,\n\t\t\tappendSubDateRow: self.appendSubDateRow,\n\t\t\trefreshDatesRowView: self.refreshDatesRowView,\n\t\t\tgenerateYearList: self.generateYearList,\n\t\t\tupdateCountTaskCalendar: self.updateCountTaskCalendar,\n\t\t\tregisterDatesChange: self.registerDatesChange,\n\t\t\taddHeaderButtons: self.addHeaderButtons,\n\t\t\tbrowserHistoryConfig: self.browserHistoryConfig,\n\t\t\treadonly: self.readonly,\n\t\t\tcontainer: self.container,\n\t\t\tmodule: self.module,\n\t\t\tshowChangeDateButtons: self.showChangeDateButtons,\n\t\t\tshowTodayButtonCheckbox: self.showTodayButtonCheckbox,\n\t\t\tgetDefaultParams: self.getDefaultParams\n\t\t});\n\t}\n\n\t/**\n\t * Date bar with counts\n\t * @param object calendarView\n\t */\n\trefreshDatesRowView(calendarView) {\n\t\tconst self = this;\n\t\tswitch (calendarView.type) {\n\t\t\tcase 'year':\n\t\t\t\tself.generateYearList(calendarView.intervalStart, calendarView.intervalEnd);\n\t\t\t\tbreak;\n\t\t\tcase 'month':\n\t\t\t\tself.generateSubMonthList(calendarView.intervalStart, calendarView.intervalEnd);\n\t\t\t\tbreak;\n\t\t\tcase 'week':\n\t\t\tcase 'agendaWeek':\n\t\t\t\tself.generateSubWeekList(calendarView.start, calendarView.end);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tself.generateSubDaysList(calendarView.start, calendarView.end);\n\t\t}\n\t\tself.updateCountTaskCalendar();\n\t\tself.registerDatesChange();\n\t}\n\tgenerateSubDaysList(dateStart, dateEnd) {\n\t\tlet datesView = this.container.find('.js-dates-row'),\n\t\t\tprevDays = moment(dateStart).subtract(5, 'days'),\n\t\t\tactualDay = moment(dateStart).format('DDD'),\n\t\t\tnextDays = moment(dateStart).add(7, 'days'),\n\t\t\tdaysToShow = nextDays.diff(prevDays, 'days'),\n\t\t\thtml = '';\n\t\tfor (let day = 0; day < daysToShow; ++day) {\n\t\t\tlet active = '';\n\t\t\tif (app.getMainParams('switchingDays') === 'workDays' && app.moduleCacheGet('defaultSwitchingDays') !== 'all') {\n\t\t\t\tif ($.inArray(prevDays.day(), app.getMainParams('hiddenDays', true)) !== -1) {\n\t\t\t\t\tprevDays = moment(prevDays).add(1, 'days');\n\t\t\t\t\tdaysToShow++;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (prevDays.format('DDD') === actualDay) {\n\t\t\t\tactive = ' active';\n\t\t\t}\n\t\t\thtml +=\n\t\t\t\t'<div class=\"js-sub-record sub-record nav-item col-1 px-0\" data-type=\"days\" data-date=\"' +\n\t\t\t\tprevDays.format('YYYY-MM-DD') +\n\t\t\t\t'\" data-js=\"click | class: active\">' +\n\t\t\t\t'<div class=\"sub-record-content nav-link' +\n\t\t\t\tactive +\n\t\t\t\t'\">' +\n\t\t\t\t'<div class=\"sub-date-name\">' +\n\t\t\t\tapp.vtranslate('JS_DAY_SHORT') +\n\t\t\t\t' ' +\n\t\t\t\tprevDays.format('DD') +\n\t\t\t\t'<div class=\"js-count-events count badge c-badge--md ml-1\" data-js=\"html\">0</div>' +\n\t\t\t\t'</div>' +\n\t\t\t\t'</div>' +\n\t\t\t\t'</div>';\n\t\t\tprevDays = moment(prevDays).add(1, 'days');\n\t\t}\n\t\tdatesView.find('.js-sub-date-list').html(html);\n\t}\n\tgenerateSubWeekList(dateStart, dateEnd) {\n\t\tlet datesView = this.container.find('.js-dates-row'),\n\t\t\tprevWeeks = moment(dateStart).subtract(5, 'weeks'),\n\t\t\tactualWeek = moment(dateStart).format('WW'),\n\t\t\tnextWeeks = moment(dateStart).add(6, 'weeks'),\n\t\t\thtml = '';\n\t\twhile (prevWeeks <= nextWeeks) {\n\t\t\tlet active = '';\n\t\t\tif (prevWeeks.format('WW') === actualWeek) {\n\t\t\t\tactive = ' active';\n\t\t\t}\n\t\t\thtml +=\n\t\t\t\t'<div class=\"js-sub-record sub-record nav-item col-1 px-0\" data-type=\"weeks\" data-date=\"' +\n\t\t\t\tprevWeeks.format('YYYY-MM-DD') +\n\t\t\t\t'\" data-js=\"click | class: active\">' +\n\t\t\t\t'<div class=\"sub-record-content nav-link' +\n\t\t\t\tactive +\n\t\t\t\t'\">' +\n\t\t\t\t'<div class=\"sub-date-name\">' +\n\t\t\t\tapp.vtranslate('JS_WEEK_SHORT') +\n\t\t\t\t' ' +\n\t\t\t\tprevWeeks.format('WW') +\n\t\t\t\t'<div class=\"js-count-events count badge c-badge--md ml-1\" data-js=\"html\">0</div>' +\n\t\t\t\t'</div>' +\n\t\t\t\t'</div>' +\n\t\t\t\t'</div>';\n\t\t\tprevWeeks = moment(prevWeeks).add(1, 'weeks');\n\t\t}\n\t\tdatesView.find('.js-sub-date-list').html(html);\n\t}\n\tgenerateYearList(dateStart, dateEnd) {\n\t\tconst datesView = this.container.find('.js-dates-row');\n\t\tlet prevYear = moment(dateStart).subtract(1, 'year'),\n\t\t\tactualYear = moment(dateStart),\n\t\t\tnextYear = moment(dateStart).add(1, 'year'),\n\t\t\thtml = '',\n\t\t\tactive = '';\n\t\twhile (prevYear <= nextYear) {\n\t\t\tif (prevYear.format('YYYY') === actualYear.format('YYYY')) {\n\t\t\t\tactive = 'active';\n\t\t\t} else {\n\t\t\t\tactive = '';\n\t\t\t}\n\t\t\thtml += `<div class=\"js-sub-record sub-record col-4 nav-item\" data-date=\"${prevYear.format(\n\t\t\t\t'YYYY'\n\t\t\t)}\" data-type=\"years\" data-js=\"click | class: active\">\n\t\t\t\t\t<div class=\"sub-record-content nav-link ${active}\">\n\t\t\t\t\t\t<div class=\"sub-date-name\">\n\t\t\t\t\t\t\t${prevYear.format('YYYY')}\n\t\t\t\t\t\t\t<div class=\"js-count-events count badge c-badge--md ml-1\" data-js=\"html\">0</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>`;\n\t\t\tprevYear = moment(prevYear).add(1, 'year');\n\t\t}\n\t\tdatesView.find('.js-sub-date-list').html(html);\n\t}\n\tregisterDatesChange() {\n\t\tthis.container.find('.js-dates-row .js-sub-record').on('click', (e) => {\n\t\t\tlet currentTarget = $(e.currentTarget);\n\t\t\tcurrentTarget.addClass('active');\n\t\t\tthis.getCalendarView().fullCalendar('gotoDate', moment(currentTarget.data('date'), 'YYYY-MM-DD'));\n\t\t});\n\t}\n\tselectDays(startDate, endDate) {\n\t\tif (!this.container.find('.js-right-panel-event-link').length) {\n\t\t\treturn false;\n\t\t}\n\t\tthis.container.find('.js-right-panel-event-link').tab('show');\n\t\tlet start_hour = app.getMainParams('startHour'),\n\t\t\tend_hour = app.getMainParams('endHour'),\n\t\t\tview = this.getCalendarView().fullCalendar('getView');\n\t\tif (endDate.hasTime() == false) {\n\t\t\tendDate.add(-1, 'days');\n\t\t}\n\t\tstartDate = startDate.format();\n\t\tendDate = endDate.format();\n\t\tif (start_hour == '') {\n\t\t\tstart_hour = '00';\n\t\t}\n\t\tif (end_hour == '') {\n\t\t\tend_hour = '00';\n\t\t}\n\t\tthis.getCalendarCreateView().done(function (data) {\n\t\t\tif (data.length <= 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (view.name != 'agendaDay' && view.name != 'agendaWeek') {\n\t\t\t\tstartDate = startDate + 'T' + start_hour + ':00';\n\t\t\t\tendDate = endDate + 'T' + end_hour + ':00';\n\t\t\t\tif (startDate == endDate) {\n\t\t\t\t\tlet activityType = data.find('[name=\"activitytype\"]').val();\n\t\t\t\t\tlet activityDurations = JSON.parse(data.find('[name=\"defaultOtherEventDuration\"]').val());\n\t\t\t\t\tlet minutes = 0;\n\t\t\t\t\tfor (let i in activityDurations) {\n\t\t\t\t\t\tif (activityDurations[i].activitytype === activityType) {\n\t\t\t\t\t\t\tminutes = parseInt(activityDurations[i].duration);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tendDate = moment(endDate).add(minutes, 'minutes').toISOString();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet dateFormat = CONFIG.dateFormat.toUpperCase();\n\t\t\tlet timeFormat = CONFIG.hourFormat;\n\t\t\tlet dateField = data.find('[name=\"date_start\"]');\n\t\t\tif (dateField.length) {\n\t\t\t\tdateFormat = dateField.data('dateFormat').toUpperCase();\n\t\t\t}\n\t\t\tlet timeField = data.find('[name=\"time_start\"]');\n\t\t\tif (timeField.length) {\n\t\t\t\ttimeFormat = timeField.data('format');\n\t\t\t}\n\t\t\tlet defaultTimeFormat = '';\n\t\t\tif (timeFormat == 24) {\n\t\t\t\tdefaultTimeFormat = 'HH:mm';\n\t\t\t} else {\n\t\t\t\tdefaultTimeFormat = 'hh:mm A';\n\t\t\t}\n\t\t\tdata.find('[name=\"date_start\"]').val(moment(startDate).format(dateFormat));\n\t\t\tdata.find('[name=\"due_date\"]').val(moment(endDate).format(dateFormat));\n\t\t\tif (data.find('.js-autofill').prop('checked') === true) {\n\t\t\t\tCalendar_Edit_Js.getInstance().getFreeTime(data);\n\t\t\t} else {\n\t\t\t\tdata.find('[name=\"time_start\"]').val(moment(startDate).format(defaultTimeFormat));\n\t\t\t\tdata.find('[name=\"time_end\"]').val(moment(endDate).format(defaultTimeFormat));\n\t\t\t}\n\t\t});\n\t}\n\tupdateCountTaskCalendar() {\n\t\tlet options = this.getDefaultParams();\n\t\tdelete options.start;\n\t\tdelete options.end;\n\t\tlet datesView = this.container.find('.js-dates-row'),\n\t\t\tsubDatesElements = datesView.find('.js-sub-record'),\n\t\t\tdateArray = {},\n\t\t\tuserDateFormat = CONFIG.dateFormat.toUpperCase();\n\t\tsubDatesElements.each(function (key, element) {\n\t\t\tlet data = $(this).data('date'),\n\t\t\t\ttype = $(this).data('type');\n\t\t\tif (type === 'years') {\n\t\t\t\tdateArray[key] = [\n\t\t\t\t\tmoment(data + '-01').format(userDateFormat) + ' 00:00:00',\n\t\t\t\t\tmoment(data + '-01')\n\t\t\t\t\t\t.endOf('year')\n\t\t\t\t\t\t.format(userDateFormat) + ' 23:59:59'\n\t\t\t\t];\n\t\t\t} else if (type === 'months') {\n\t\t\t\tdateArray[key] = [\n\t\t\t\t\tmoment(data).format(userDateFormat) + ' 00:00:00',\n\t\t\t\t\tmoment(data).endOf('month').format(userDateFormat) + ' 23:59:59'\n\t\t\t\t];\n\t\t\t} else if (type === 'weeks') {\n\t\t\t\tdateArray[key] = [\n\t\t\t\t\tmoment(data).format(userDateFormat) + ' 00:00:00',\n\t\t\t\t\tmoment(data).add(6, 'day').format(userDateFormat) + ' 23:59:59'\n\t\t\t\t];\n\t\t\t} else if (type === 'days') {\n\t\t\t\tdateArray[key] = [\n\t\t\t\t\tmoment(data).format(userDateFormat) + ' 00:00:00',\n\t\t\t\t\tmoment(data).format(userDateFormat) + ' 23:59:59'\n\t\t\t\t];\n\t\t\t}\n\t\t});\n\t\toptions.mode = 'getCountEventsGroup';\n\t\toptions.dates = dateArray;\n\t\tAppConnector.request(options).done(function (events) {\n\t\t\tsubDatesElements.each(function (key, element) {\n\t\t\t\t$(this).find('.js-count-events').removeClass('hide').html(events.result[key]);\n\t\t\t});\n\t\t});\n\t}\n\tgenerateSubMonthList(dateStart, dateEnd) {\n\t\tlet datesView = this.container.find('.js-dates-row'),\n\t\t\tactiveMonth = parseInt(moment(dateStart).locale('en').format('M')) - 1,\n\t\t\thtml = '',\n\t\t\tactive = '';\n\t\tfor (let month = 0; 12 > month; ++month) {\n\t\t\tif (month === activeMonth) {\n\t\t\t\tactive = 'active';\n\t\t\t} else {\n\t\t\t\tactive = '';\n\t\t\t}\n\t\t\thtml += `<div class=\"js-sub-record sub-record nav-item col-1 px-0\" data-type=\"months\" data-date=\"${moment(\n\t\t\t\tdateStart\n\t\t\t)\n\t\t\t\t.month(month)\n\t\t\t\t.format('YYYY-MM')}\" data-js=\"click | class: active\">\n\t\t\t\t\t<div class=\"sub-record-content nav-link ${active}\">\n\t\t\t\t\t\t<div class=\"sub-date-name\">${App.Fields.Date.monthsTranslated[month]}\n\t\t\t\t\t\t\t<div class=\"js-count-events count badge c-badge--md ml-1\" data-js=\"html\">0</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>`;\n\t\t}\n\t\tdatesView.find('.js-sub-date-list').html(html);\n\t}\n\tgetSelectedUsersCalendar() {\n\t\tconst sidebar = this.getSidebarView();\n\t\tlet selectedUsers = sidebar.find('.js-input-user-owner-id:checked'),\n\t\t\tnotSelectedUsers = sidebar.find('.js-input-user-owner-id:not(:checked)'),\n\t\t\tselectedUsersAjax = sidebar.find('.js-input-user-owner-id-ajax'),\n\t\t\tselectedRolesAjax = sidebar.find('.js-input-role-owner-id-ajax'),\n\t\t\tcheckboxSelectAll = sidebar.find('.js-select-all'),\n\t\t\tselectedIds = [],\n\t\t\texcludedIds = [];\n\n\t\tlet ifSelectAllIsChecked = checkboxSelectAll.length > 0 && checkboxSelectAll.is(':checked');\n\t\tif (ifSelectAllIsChecked) {\n\t\t\tselectedIds.push('all');\n\t\t} else if (selectedUsers.length > 0) {\n\t\t\tselectedUsers.each(function () {\n\t\t\t\tselectedIds.push($(this).val());\n\t\t\t});\n\t\t}\n\t\tif (selectedUsersAjax.length > 0) {\n\t\t\tselectedIds = selectedUsersAjax.val().concat(selectedRolesAjax.val());\n\t\t}\n\t\tif (ifSelectAllIsChecked && notSelectedUsers) {\n\t\t\tnotSelectedUsers.each(function () {\n\t\t\t\texcludedIds.push($(this).val());\n\t\t\t});\n\t\t}\n\t\tif (0 === selectedIds.length && CONFIG.userId) {\n\t\t\tselectedIds.push(CONFIG.userId);\n\t\t}\n\t\treturn { selectedIds: selectedIds, excludedIds: excludedIds };\n\t}\n\n\tclearFilterButton(user, cvid) {\n\t\tlet currentUser = parseInt(app.getMainParams('userId')),\n\t\t\ttime = app.getMainParams('showType'),\n\t\t\tstatement =\n\t\t\t\t(user.length === 0 || (user.length === 1 && parseInt(user) === currentUser)) &&\n\t\t\t\tcvid === undefined &&\n\t\t\t\ttime === 'current';\n\t\t$('.js-calendar__clear-filters').toggleClass('d-none', statement);\n\t}\n\tloadCalendarData(view = this.getCalendarView().fullCalendar('getView')) {\n\t\tconst self = this;\n\t\tlet options = this.getDefaultParams(view);\n\t\tlet calendarInstance = this.getCalendarView();\n\t\tcalendarInstance.fullCalendar('removeEvents');\n\t\tlet progressInstance = $.progressIndicator({ blockInfo: { enabled: true } });\n\t\tself.clearFilterButton(options.user, self.getCurrentCvId());\n\t\tlet connectorMethod = window['AppConnector']['request'];\n\t\tconnectorMethod(options).done((events) => {\n\t\t\tcalendarInstance.fullCalendar('removeEvents');\n\t\t\tcalendarInstance.fullCalendar('addEventSource', events.result);\n\t\t\tprogressInstance.progressIndicator({ mode: 'hide' });\n\t\t});\n\t\tself.registerViewRenderEvents(view);\n\t\twindow.calendarLoaded = true;\n\t}\n\t/**\n\t * Default params\n\t * @returns {{module: *, action: string, mode: string, start: *, end: *, user: *, emptyFilters: boolean}}\n\t */\n\tgetDefaultParams(view = this.getCalendarView().fullCalendar('getView')) {\n\t\tlet options = super.getDefaultParams();\n\t\tlet formatDate = CONFIG.dateFormat.toUpperCase();\n\t\tlet user = this.getSelectedUsersCalendar();\n\t\tif (0 === user.length) {\n\t\t\tuser = app.getMainParams('usersId');\n\t\t}\n\t\tif (user === undefined) {\n\t\t\tuser = [app.getMainParams('userId')];\n\t\t}\n\t\tif (view.type === 'agendaDay') {\n\t\t\tview.end = view.end.add(1, 'day');\n\t\t}\n\t\toptions.user = user;\n\t\toptions.start = view.start.format(formatDate);\n\t\toptions.end = view.end.format(formatDate);\n\t\toptions.time = app.getMainParams('showType');\n\t\toptions.history = true;\n\t\treturn options;\n\t}\n\t/**\n\t * Function toggles next year/month and general arrows on view render\n\t * @param view\n\t * @param element\n\t */\n\tregisterViewRenderEvents(view) {\n\t\tthis.calendarContainer = this.getCalendarView();\n\t\tlet toolbar = this.calendarContainer.find('.fc-toolbar.fc-header-toolbar');\n\t\tthis.showChangeDateButtons(view, toolbar);\n\t\tthis.appendSubDateRow(toolbar);\n\t\tthis.refreshDatesRowView(view);\n\t\tthis.addHeaderButtons();\n\t\tthis.showTodayButtonCheckbox(toolbar);\n\t}\n\t/**\n\t * Function appends and shows today button's checkbox\n\t * @param {jQuery} toolbar\n\t */\n\tshowTodayButtonCheckbox(toolbar) {\n\t\tlet todayButton = toolbar.find('.fc-today-button'),\n\t\t\ttodyButtonIcon = todayButton.hasClass('fc-state-disabled') ? 'fa-calendar-check' : 'fa-calendar',\n\t\t\tpopoverContent = `${app.vtranslate('JS_CURRENT')} ${toolbar.find('.fc-state-active').text().toLowerCase()}`;\n\t\ttodayButton.removeClass('.fc-button');\n\t\ttodayButton.html(\n\t\t\t`<div class=\"js-popover-tooltip--day-btn\" data-toggle=\"popover\"><span class=\"far fa-lg ${todyButtonIcon}\"></span></div>`\n\t\t);\n\t\tapp.showPopoverElementView(todayButton.find('.js-popover-tooltip--day-btn'), {\n\t\t\tcontent: popoverContent,\n\t\t\tcontainer: '.fc-today-button .js-popover-tooltip--day-btn'\n\t\t});\n\t}\n\taddHeaderButtons() {\n\t\tif (this.calendarContainer.find('.js-calendar__view-btn').length) {\n\t\t\treturn;\n\t\t}\n\t\tlet buttonsContainer = this.calendarContainer.prev('.js-calendar__header-buttons'),\n\t\t\tviewBtn = buttonsContainer.find('.js-calendar__view-btn').clone(),\n\t\t\tfilters = buttonsContainer.find('.js-calendar__filter-container').clone();\n\t\tthis.calendarContainer.find('.fc-left').prepend(viewBtn);\n\t\tthis.calendarContainer.find('.fc-center').after(filters);\n\t\tthis.registerClearFilterButton();\n\t\tthis.registerFilterTabChange();\n\t}\n\tregisterFilterTabChange() {\n\t\tconst thisInstance = this;\n\t\tthis.getCalendarView()\n\t\t\t.find('.js-calendar__extended-filter-tab')\n\t\t\t.on('shown.bs.tab', function () {\n\t\t\t\tthisInstance.getCalendarView().fullCalendar('getCalendar').view.options.loadView();\n\t\t\t});\n\t}\n\tregisterClearFilterButton() {\n\t\tconst sidebar = this.getSidebarView(),\n\t\t\tcalendarView = this.getCalendarView();\n\t\tlet clearBtn = calendarView.find('.js-calendar__clear-filters');\n\t\tapp.showPopoverElementView(clearBtn);\n\t\tclearBtn.on('click', () => {\n\t\t\t$('.js-calendar__extended-filter-tab a').removeClass('active');\n\t\t\tapp.setMainParams('showType', 'current');\n\t\t\tapp.moduleCacheSet('defaultShowType', 'current');\n\t\t\tsidebar.find('input:checkbox').prop('checked', false);\n\t\t\tsidebar.find('option:selected').prop('selected', false).trigger('change.select2');\n\t\t\tsidebar.find('.js-sidebar-filter-container').each((_, e) => {\n\t\t\t\tlet element = $(e);\n\t\t\t\tlet cacheName = element.data('cache');\n\t\t\t\tif (element.data('name') && cacheName) {\n\t\t\t\t\tapp.moduleCacheSet(cacheName, '');\n\t\t\t\t}\n\t\t\t});\n\t\t\tlet calendarSwitch = sidebar.find('.js-switch--showType [class*=\"js-switch--label\"]'),\n\t\t\t\tactualUserCheckbox = sidebar.find('.js-input-user-owner-id[value=' + app.getMainParams('userId') + ']');\n\t\t\tcalendarSwitch.last().removeClass('active');\n\t\t\tcalendarSwitch.first().addClass('active');\n\t\t\tif (actualUserCheckbox.length) {\n\t\t\t\tactualUserCheckbox.prop('checked', true);\n\t\t\t} else {\n\t\t\t\tapp.setMainParams('usersId', undefined);\n\t\t\t}\n\t\t\tcalendarView.fullCalendar('getCalendar').view.options.loadView();\n\t\t});\n\t}\n\t/**\n\t * Function shows change date buttons in calendar's header for specific view\n\t * @param view\n\t * @param toolbar\n\t */\n\tshowChangeDateButtons(view, toolbar) {\n\t\tlet viewType = view.type.replace(/basic|agenda/g, '').toLowerCase(),\n\t\t\tnextPrevButtons = toolbar.find('.fc-prev-button, .fc-next-button'),\n\t\t\tyearButtons = toolbar.find('.fc-prevYear-button, .fc-nextYear-button');\n\t\tif (!window.calendarLoaded) {\n\t\t\tyearButtons.first().html(`<span class=\"fas fa-xs fa-minus mr-1\"></span>${view.options.buttonText['year']}`);\n\t\t\tyearButtons.last().html(`${view.options.buttonText['year']}<span class=\"fas fa-xs fa-plus ml-1\"></span>`);\n\t\t}\n\t\tif (view.type !== 'year') {\n\t\t\tnextPrevButtons.first().html(`<span class=\"fas fa-xs fa-minus mr-1\"></span>${view.options.buttonText[viewType]}`);\n\t\t\tnextPrevButtons.last().html(`${view.options.buttonText[viewType]}<span class=\"fas fa-xs fa-plus ml-1\"></span>`);\n\t\t}\n\t\tif (view.type === 'year') {\n\t\t\tnextPrevButtons.hide();\n\t\t\tyearButtons.show();\n\t\t} else if (view.type === 'month') {\n\t\t\tnextPrevButtons.show();\n\t\t\tyearButtons.show();\n\t\t} else {\n\t\t\tnextPrevButtons.show();\n\t\t\tyearButtons.hide();\n\t\t}\n\t}\n\t/**\n\t * Appends subdate row to calendar header and register its scroll\n\t * @param toolbar\n\t */\n\tappendSubDateRow(toolbar) {\n\t\tif (!this.calendarContainer.find('.js-dates-row').length) {\n\t\t\tthis.subDateRow = $(`\n\t\t\t\t\t\t\t\t<div class=\"js-scroll js-dates-row u-overflow-auto-lg-down order-4 flex-grow-1 position-relative my-1 w-100\" data-js=\"perfectScrollbar | container\">\n\t\t\t\t\t\t\t\t\t<div class=\"d-flex flex-nowrap w-100\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"js-sub-date-list w-100 sub-date-list row no-gutters flex-nowrap nav nav-tabs\" data-js=\"data-type\"></div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t`);\n\t\t\ttoolbar.append(this.subDateRow);\n\t\t\tif ($(window).width() > app.breakpoints.lg) {\n\t\t\t\tapp.showNewScrollbar(this.subDateRow);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Get calendar create view.\n\t * @returns {promise}\n\t */\n\tgetCalendarCreateView() {\n\t\tlet self = this;\n\t\tlet aDeferred = jQuery.Deferred();\n\n\t\tif (this.calendarCreateView !== false) {\n\t\t\taDeferred.resolve(this.calendarCreateView.clone(true, true));\n\t\t\treturn aDeferred.promise();\n\t\t}\n\t\tlet progressInstance = jQuery.progressIndicator();\n\t\tthis.loadCalendarCreateView()\n\t\t\t.done(function (data) {\n\t\t\t\tprogressInstance.hide();\n\t\t\t\tself.calendarCreateView = data;\n\t\t\t\taDeferred.resolve(data.clone(true, true));\n\t\t\t})\n\t\t\t.fail(function () {\n\t\t\t\tprogressInstance.hide();\n\t\t\t});\n\t\treturn aDeferred.promise();\n\t}\n\t/**\n\t * Set calendar module options.\n\t * @returns {{allDaySlot: boolean, dayClick: object, selectable: boolean}}\n\t */\n\tsetCalendarModuleOptions() {\n\t\tconst self = this;\n\t\treturn {\n\t\t\tallDaySlot: false,\n\t\t\tdayClick: this.eventCreate\n\t\t\t\t? function (date) {\n\t\t\t\t\t\tself.registerDayClickEvent(date.format());\n\t\t\t\t\t\tself.getCalendarView().fullCalendar('unselect');\n\t\t\t\t  }\n\t\t\t\t: false,\n\t\t\tselectable: false,\n\t\t\teventClick: function (calEvent, jsEvent) {\n\t\t\t\tjsEvent.preventDefault();\n\t\t\t\tconst link = $(this).attr('href');\n\t\t\t\tif (link && $.inArray('js-show-modal', calEvent.className) !== -1) {\n\t\t\t\t\tapp.showModalWindow(null, link);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n\t/**\n\t * Register day click event.\n\t * @param {string} date\n\t */\n\tregisterDayClickEvent(date) {\n\t\tif (!CONFIG.isQuickCreateSupported) {\n\t\t\tlet userFormat = moment(date).format(CONFIG.dateFormat.toUpperCase());\n\t\t\tapp.openUrl('index.php?module=Reservations&view=Edit&date_start=' + userFormat + '&due_date=' + userFormat);\n\t\t\treturn;\n\t\t}\n\t\tconst self = this;\n\t\tself.getCalendarCreateView().done(function (data) {\n\t\t\tif (data.length <= 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet dateFormat = data.find('[name=\"date_start\"]').data('dateFormat').toUpperCase(),\n\t\t\t\ttimeFormat = data.find('[name=\"time_start\"]').data('format'),\n\t\t\t\tdefaultTimeFormat = 'hh:mm A';\n\t\t\tif (timeFormat == 24) {\n\t\t\t\tdefaultTimeFormat = 'HH:mm';\n\t\t\t}\n\t\t\tlet startDateInstance = Date.parse(date);\n\t\t\tlet startDateString = moment(date).format(dateFormat);\n\t\t\tlet startTimeString = moment(date).format(defaultTimeFormat);\n\t\t\tlet endDateInstance = Date.parse(date);\n\t\t\tlet endDateString = moment(date).format(dateFormat);\n\n\t\t\tlet view = self.getCalendarView().fullCalendar('getView');\n\t\t\tlet endTimeString;\n\t\t\tif ('month' == view.name) {\n\t\t\t\tlet diffDays = parseInt((endDateInstance - startDateInstance) / (1000 * 60 * 60 * 24));\n\t\t\t\tif (diffDays > 1) {\n\t\t\t\t\tlet defaultFirstHour = app.getMainParams('startHour');\n\t\t\t\t\tlet explodedTime = defaultFirstHour.split(':');\n\t\t\t\t\tstartTimeString = explodedTime['0'];\n\t\t\t\t\tlet defaultLastHour = app.getMainParams('endHour');\n\t\t\t\t\texplodedTime = defaultLastHour.split(':');\n\t\t\t\t\tendTimeString = explodedTime['0'];\n\t\t\t\t} else {\n\t\t\t\t\tlet now = new Date();\n\t\t\t\t\tstartTimeString = moment(now).format(defaultTimeFormat);\n\t\t\t\t\tendTimeString = moment(now).add(15, 'minutes').format(defaultTimeFormat);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tendTimeString = moment(endDateInstance).add(30, 'minutes').format(defaultTimeFormat);\n\t\t\t}\n\t\t\tdata.find('[name=\"date_start\"]').val(startDateString);\n\t\t\tdata.find('[name=\"due_date\"]').val(endDateString);\n\t\t\tdata.find('[name=\"time_start\"]').val(startTimeString);\n\t\t\tdata.find('[name=\"time_end\"]').val(endTimeString);\n\n\t\t\tApp.Components.QuickCreate.showModal(data, {\n\t\t\t\tcallbackFunction(data) {\n\t\t\t\t\tself.addCalendarEvent(data.result, dateFormat);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\t/**\n\t * Add calendar event.\n\t */\n\taddCalendarEvent(eventObject) {\n\t\tthis.loadCalendarData();\n\t}\n\t/**\n\t * @deprecated\n\t * @param {*} eventObject\n\t */\n\tisNewEventToDisplay(eventObject) {\n\t\tlet users = this.getSelectedUsersCalendar();\n\t\tif (0 === users.length) {\n\t\t\tusers = [app.getMainParams('usersId')];\n\t\t}\n\t\tif ($.inArray(eventObject.assigned_user_id.value, users) < 0) {\n\t\t\tthis.refreshFilterValues(eventObject, ownerSelects);\n\t\t\treturn false;\n\t\t}\n\t\tlet calendarTypes = $('.js-calendar__filter__select[data-cache=\"calendar-types\"]');\n\t\tif (calendarTypes.length) {\n\t\t\tif (!this.eventTypeKeyName) {\n\t\t\t\tthis.setEventTypeKey(eventObject, calendarTypes.data('name'));\n\t\t\t}\n\t\t\tif (\n\t\t\t\tthis.eventTypeKeyName &&\n\t\t\t\tcalendarTypes.val().length &&\n\t\t\t\t$.inArray(eventObject[this.eventTypeKeyName]['value'], calendarTypes.val()) < 0\n\t\t\t) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\n\t/**\n\t * Render calendar\n\t */\n\trenderCalendar() {\n\t\tlet self = this,\n\t\t\tbasicOptions = this.setCalendarOptions(),\n\t\t\toptions = {\n\t\t\t\theader: {\n\t\t\t\t\tleft: 'year,month,' + app.getMainParams('weekView') + ',' + app.getMainParams('dayView'),\n\t\t\t\t\tcenter: 'prevYear,prev,title,next,nextYear',\n\t\t\t\t\tright: 'today'\n\t\t\t\t},\n\t\t\t\tviews: {\n\t\t\t\t\tbasic: {\n\t\t\t\t\t\teventLimit: false\n\t\t\t\t\t},\n\t\t\t\t\tyear: {\n\t\t\t\t\t\teventLimit: 10,\n\t\t\t\t\t\teventLimitText: app.vtranslate('JS_COUNT_RECORDS'),\n\t\t\t\t\t\ttitleFormat: 'YYYY',\n\t\t\t\t\t\tselect: function (start, end) {},\n\t\t\t\t\t\tloadView: function () {\n\t\t\t\t\t\t\tself.getCalendarView().fullCalendar('getCalendar').view.render();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tmonth: {\n\t\t\t\t\t\ttitleFormat: this.parseDateFormat('month'),\n\t\t\t\t\t\tloadView: function () {\n\t\t\t\t\t\t\tself.loadCalendarData();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tweek: {\n\t\t\t\t\t\ttitleFormat: this.parseDateFormat('week'),\n\t\t\t\t\t\tloadView: function () {\n\t\t\t\t\t\t\tself.loadCalendarData();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tday: {\n\t\t\t\t\t\ttitleFormat: this.parseDateFormat('day'),\n\t\t\t\t\t\tloadView: function () {\n\t\t\t\t\t\t\tself.loadCalendarData();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tbasicDay: {\n\t\t\t\t\t\ttype: 'agendaDay',\n\t\t\t\t\t\tloadView: function () {\n\t\t\t\t\t\t\tself.loadCalendarData();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tselect: function (start, end) {\n\t\t\t\t\tself.selectDays(start, end);\n\t\t\t\t\tself.getCalendarView().fullCalendar('unselect');\n\t\t\t\t},\n\t\t\t\teventRender: function (event, element) {\n\t\t\t\t\tself.eventRenderer(event, element);\n\t\t\t\t},\n\t\t\t\tviewRender: function (view, element) {\n\t\t\t\t\tif (view.type !== 'year') {\n\t\t\t\t\t\tself.loadCalendarData(view);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\taddCalendarEvent(calendarDetails) {\n\t\t\t\t\tself.getCalendarView().fullCalendar('renderEvent', self.getEventData(calendarDetails));\n\t\t\t\t}\n\t\t\t};\n\t\toptions = Object.assign(basicOptions, options);\n\t\tthis.calendar.fullCalendar(options);\n\t}\n\n\tregisterSwitchEvents() {\n\t\tconst calendarView = this.getCalendarView();\n\t\tlet isWorkDays,\n\t\t\tswitchShowTypeVal,\n\t\t\tswitchContainer = $('.js-calendar__tab--filters'),\n\t\t\tswitchShowType = switchContainer.find('.js-switch--showType'),\n\t\t\tshowTypeState = switchShowType.find('.js-switch--label-on.active').length ? 'current' : 'history',\n\t\t\tswitchSwitchingDays = switchContainer.find('.js-switch--switchingDays'),\n\t\t\tswitchingDaysState = switchSwitchingDays.find('.js-switch--label-on.active').length ? 'workDays' : 'all';\n\t\tlet historyParams = app.getMainParams('historyParams', true);\n\t\tif (historyParams === '') {\n\t\t\tisWorkDays =\n\t\t\t\tapp.getMainParams('switchingDays') === 'workDays' && app.moduleCacheGet('defaultSwitchingDays') !== 'all';\n\t\t\tswitchShowTypeVal =\n\t\t\t\tapp.getMainParams('showType') === 'current' && app.moduleCacheGet('defaultShowType') !== 'history';\n\t\t\tif (!switchShowTypeVal) {\n\t\t\t\tswitchShowType.find('.js-switch--label-off').button('toggle');\n\t\t\t}\n\t\t} else {\n\t\t\tif (historyParams.time !== undefined) {\n\t\t\t\tapp.setMainParams('showType', historyParams.time);\n\t\t\t}\n\t\t\tapp.setMainParams('switchingDays', historyParams.hiddenDays === '' ? 'all' : 'workDays');\n\t\t}\n\t\tswitchShowType.on('change', 'input', (e) => {\n\t\t\tconst currentTarget = $(e.currentTarget);\n\t\t\tif (typeof currentTarget.data('on-text') !== 'undefined') {\n\t\t\t\tapp.setMainParams('showType', 'current');\n\t\t\t\tapp.moduleCacheSet('defaultShowType', 'current');\n\t\t\t} else if (typeof currentTarget.data('off-text') !== 'undefined') {\n\t\t\t\tapp.setMainParams('showType', 'history');\n\t\t\t\tapp.moduleCacheSet('defaultShowType', 'history');\n\t\t\t}\n\t\t\tcalendarView.fullCalendar('getCalendar').view.options.loadView();\n\t\t});\n\t\tif (app.getMainParams('showType') !== showTypeState) {\n\t\t\t$('label.active', switchShowType).find('input').filter(':first').change();\n\t\t}\n\t\tif (switchSwitchingDays.length) {\n\t\t\tif (typeof isWorkDays !== 'undefined' && !isWorkDays) {\n\t\t\t\tswitchSwitchingDays.find('.js-switch--label-off').button('toggle');\n\t\t\t}\n\t\t\tswitchSwitchingDays.on('change', 'input', (e) => {\n\t\t\t\tconst currentTarget = $(e.currentTarget);\n\t\t\t\tlet hiddenDays = [];\n\t\t\t\tif (typeof currentTarget.data('on-text') !== 'undefined') {\n\t\t\t\t\tapp.setMainParams('switchingDays', 'workDays');\n\t\t\t\t\tapp.moduleCacheSet('defaultSwitchingDays', 'workDays');\n\t\t\t\t\thiddenDays = app.getMainParams('hiddenDays', true);\n\t\t\t\t} else if (typeof currentTarget.data('off-text') !== 'undefined') {\n\t\t\t\t\tapp.setMainParams('switchingDays', 'all');\n\t\t\t\t\tapp.moduleCacheSet('defaultSwitchingDays', 'all');\n\t\t\t\t}\n\t\t\t\tcalendarView.fullCalendar('option', 'hiddenDays', hiddenDays);\n\t\t\t\tcalendarView.fullCalendar('option', 'height', this.setCalendarHeight());\n\t\t\t\tif (calendarView.fullCalendar('getView').type === 'year') {\n\t\t\t\t\tthis.registerViewRenderEvents(calendarView.fullCalendar('getView'));\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (app.getMainParams('switchingDays') !== switchingDaysState) {\n\t\t\t\t$('label.active', switchSwitchingDays).find('input').filter(':first').change();\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Find element on list (user, group)\n\t * @param {jQuery.Event} e\n\t */\n\tfindElementOnList(e) {\n\t\tlet target = $(e.target),\n\t\t\tvalue = target.val().toLowerCase(),\n\t\t\tcontainer = target.closest('.js-filter__container');\n\t\tcontainer.find('.js-filter__item__value').filter(function () {\n\t\t\tlet item = $(this).closest('.js-filter__item__container');\n\t\t\tif ($(this).text().trim().toLowerCase().indexOf(value) > -1) {\n\t\t\t\titem.removeClass('d-none');\n\t\t\t} else {\n\t\t\t\titem.addClass('d-none');\n\t\t\t}\n\t\t});\n\t}\n\n\tregisterEvents() {\n\t\tsuper.registerEvents();\n\t\tthis.registerCacheSettings();\n\t\tthis.registerSwitchEvents();\n\t\tElementQueries.listen();\n\t}\n};\n"],"names":["window","Vtiger_Calendar_Js","container","readonly","browserHistory","calendarContainer","addCommonMethodsToYearView","calendar","getCalendarView","self","FC","views","year","extend","baseInstance","selectDays","getCalendarCreateView","getSidebarView","getCurrentCvId","showRightPanelForm","getSelectedUsersCalendar","registerClearFilterButton","clearFilterButton","registerFilterTabChange","sidebarView","registerAfterSubmitForm","registerViewRenderEvents","appendSubDateRow","refreshDatesRowView","generateYearList","updateCountTaskCalendar","registerDatesChange","addHeaderButtons","browserHistoryConfig","module","showChangeDateButtons","showTodayButtonCheckbox","getDefaultParams","calendarView","type","intervalStart","intervalEnd","generateSubMonthList","generateSubWeekList","start","end","generateSubDaysList","dateStart","active","datesView","find","prevDays","moment","subtract","actualDay","format","nextDays","add","daysToShow","diff","html","day","app","getMainParams","moduleCacheGet","$","inArray","vtranslate","prevWeeks","actualWeek","nextWeeks","prevYear","actualYear","nextYear","on","e","currentTarget","addClass","fullCalendar","data","startDate","endDate","length","tab","start_hour","end_hour","view","hasTime","done","name","activityType","val","activityDurations","JSON","parse","minutes","i","activitytype","parseInt","duration","toISOString","dateFormat","CONFIG","toUpperCase","timeFormat","hourFormat","dateField","timeField","defaultTimeFormat","prop","Calendar_Edit_Js","getInstance","getFreeTime","options","subDatesElements","dateArray","userDateFormat","each","key","endOf","mode","dates","AppConnector","request","events","removeClass","result","activeMonth","locale","month","App","Fields","Date","monthsTranslated","sidebar","selectedUsers","notSelectedUsers","selectedUsersAjax","selectedRolesAjax","checkboxSelectAll","selectedIds","excludedIds","ifSelectAllIsChecked","is","push","concat","userId","user","cvid","currentUser","time","statement","toggleClass","calendarInstance","progressInstance","progressIndicator","blockInfo","enabled","connectorMethod","calendarLoaded","formatDate","history","toolbar","todayButton","todyButtonIcon","hasClass","popoverContent","text","toLowerCase","showPopoverElementView","content","buttonsContainer","prev","viewBtn","clone","filters","prepend","after","thisInstance","loadView","clearBtn","setMainParams","moduleCacheSet","trigger","_","element","cacheName","calendarSwitch","actualUserCheckbox","last","first","viewType","replace","nextPrevButtons","yearButtons","buttonText","hide","show","subDateRow","append","width","breakpoints","lg","showNewScrollbar","aDeferred","jQuery","Deferred","calendarCreateView","resolve","promise","loadCalendarCreateView","fail","allDaySlot","dayClick","eventCreate","date","registerDayClickEvent","selectable","eventClick","calEvent","jsEvent","preventDefault","link","attr","className","showModalWindow","isQuickCreateSupported","userFormat","openUrl","endTimeString","startDateInstance","startDateString","startTimeString","endDateInstance","endDateString","diffDays","defaultFirstHour","explodedTime","split","defaultLastHour","now","Components","QuickCreate","showModal","callbackFunction","addCalendarEvent","loadCalendarData","eventObject","users","assigned_user_id","value","refreshFilterValues","ownerSelects","calendarTypes","eventTypeKeyName","setEventTypeKey","basicOptions","setCalendarOptions","header","left","center","right","basic","eventLimit","eventLimitText","titleFormat","select","render","parseDateFormat","week","basicDay","eventRender","event","eventRenderer","viewRender","calendarDetails","getEventData","Object","assign","isWorkDays","switchShowTypeVal","switchContainer","switchShowType","showTypeState","switchSwitchingDays","switchingDaysState","historyParams","button","hiddenDays","filter","change","setCalendarHeight","target","closest","item","trim","indexOf","registerCacheSettings","registerSwitchEvents","ElementQueries","listen","Calendar_Js"],"mappings":"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"}