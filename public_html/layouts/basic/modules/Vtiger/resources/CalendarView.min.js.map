{"version":3,"file":"CalendarView.min.js","sources":["CalendarView.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\n/**\n * Class representing a standard calendar.\n * @extends Calendar_Js\n */\nwindow.Vtiger_Calendar_Js = class Vtiger_Calendar_Js extends Calendar_Js {\n\t/**\n\t * Create calendar's options.\n\t * @param {jQuery} container\n\t * @param {bool} readonly\n\t * @param {boolean} browserHistory\n\t */\n\tconstructor(container, readonly, browserHistory = false) {\n\t\tsuper(container, readonly, browserHistory);\n\t}\n\t/**\n\t * Set calendar module options.\n\t * @returns {{allDaySlot: boolean, dayClick: object, selectable: boolean}}\n\t */\n\tsetCalendarModuleOptions() {\n\t\tconst self = this;\n\t\treturn {\n\t\t\tallDaySlot: false,\n\t\t\tdateClick: (args) => {\n\t\t\t\tif (this.eventCreate) {\n\t\t\t\t\tself.registerDayClickEvent(args);\n\t\t\t\t}\n\t\t\t},\n\t\t\tselectable: false,\n\t\t\teventClick: function (info) {\n\t\t\t\tinfo.jsEvent.preventDefault();\n\t\t\t\tconst element = $(info.el);\n\t\t\t\tlet link = element.attr('href');\n\t\t\t\tif (!link) {\n\t\t\t\t\tlink = element.find('a').attr('href');\n\t\t\t\t}\n\t\t\t\tif (link && $.inArray('js-show-modal', info.event.classNames) !== -1) {\n\t\t\t\t\tapp.showModalWindow(null, link.replace('view=', 'xview=') + '&view=QuickDetailModal');\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n\t/**\n\t * Set calendar module's options.\n\t * @returns {object}\n\t */\n\tsetCalendarAdvancedOptions() {\n\t\tconst self = this;\n\t\treturn Object.assign(super.setCalendarAdvancedOptions(), {\n\t\t\theaderToolbar: {\n\t\t\t\tleft: `dayGridMonth,${app.getMainParams('weekView')},${app.getMainParams('dayView')},listWeek,today`,\n\t\t\t\tcenter: 'prevYear,prev,title,next,nextYear',\n\t\t\t\tright: ''\n\t\t\t},\n\t\t\tselect: function (info) {\n\t\t\t\tself.selectDays(info);\n\t\t\t},\n\t\t\tdatesSet: function (dateInfo) {\n\t\t\t\tapp.event.trigger('Calendar.DatesSet', dateInfo, this);\n\t\t\t\tif (self.fullCalendar.view !== 'year') {\n\t\t\t\t\tself.loadCalendarData();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\t/**\n\t * Function invokes by fullCalendar, sets selected days in form\n\t * @param {object} info\n\t */\n\tselectDays(info) {\n\t\tif (!this.container.find('.js-right-panel-event-link').length) {\n\t\t\treturn false;\n\t\t}\n\t\tthis.container.find('.js-right-panel-event-link').tab('show');\n\t\tsuper.selectDays(info);\n\t}\n\t/**\n\t * Load calendar data\n\t */\n\tloadCalendarData() {\n\t\tconst self = this,\n\t\t\tdefaultParams = this.getDefaultParams(),\n\t\t\tprogressInstance = $.progressIndicator({ blockInfo: { enabled: true } });\n\t\tself.fullCalendar.removeAllEvents();\n\t\tself.clearFilterButton(defaultParams['user']);\n\t\tAppConnector.request(defaultParams).done((events) => {\n\t\t\tself.fullCalendar.removeAllEvents();\n\t\t\tself.fullCalendar.addEventSource(events.result);\n\t\t\tprogressInstance.progressIndicator({ mode: 'hide' });\n\t\t});\n\t}\n\t/**\n\t * Reload calendar data after changing search parameters\n\t */\n\treloadCalendarData() {\n\t\tsuper.reloadCalendarData();\n\t\tthis.updateCountTaskCalendar();\n\t}\n\t/**\n\t * Show/hide clear filter button\n\t */\n\tclearFilterButton(user) {\n\t\tlet currentUser = parseInt(app.getMainParams('userId')),\n\t\t\ttime = app.getMainParams('showType'),\n\t\t\tstatement =\n\t\t\t\tJSON.stringify(user['selectedIds']) === JSON.stringify([`${currentUser}`]) &&\n\t\t\t\tthis.getCurrentCvId() === undefined &&\n\t\t\t\ttime === 'current';\n\t\t$('.js-calendar__clear-filters').toggleClass('d-none', statement);\n\t}\n\t/**\n\t * Default params\n\t * @returns {{module: *, action: string, mode: string, start: *, end: *, user: *, emptyFilters: boolean}}\n\t */\n\tgetDefaultParams() {\n\t\tlet options = super.getDefaultParams(),\n\t\t\tuser = this.getSelectedUsersCalendar();\n\t\tif (0 === user.length) {\n\t\t\tuser = app.getMainParams('usersId');\n\t\t}\n\t\tif (user === undefined) {\n\t\t\tuser = [app.getMainParams('userId')];\n\t\t}\n\t\tif (this.fullCalendar.view === 'timeGridDay') {\n\t\t\tthis.fullCalendar.view.activeEnd = this.fullCalendar.view.activeEnd.add(1, 'day');\n\t\t}\n\t\tconst time = this.getSidebarView().find('.js-switch--showType input:checked').data('val');\n\t\toptions.time = options.time !== undefined ? time : app.getMainParams('showType');\n\t\toptions.history = true;\n\t\toptions.user = user;\n\t\treturn options;\n\t}\n\t/**\n\t * Get selected users\n\t * @returns {{ selectedIds: array, excludedIds: array }}\n\t */\n\tgetSelectedUsersCalendar() {\n\t\tconst sidebar = this.getSidebarView();\n\t\tlet selectedUsers = sidebar.find('.js-input-user-owner-id:checked'),\n\t\t\tnotSelectedUsers = sidebar.find('.js-input-user-owner-id:not(:checked)'),\n\t\t\tselectedUsersAjax = sidebar.find('.js-input-user-owner-id-ajax'),\n\t\t\tselectedRolesAjax = sidebar.find('.js-input-role-owner-id-ajax'),\n\t\t\tcheckboxSelectAll = sidebar.find('.js-select-all'),\n\t\t\tselectedIds = [],\n\t\t\texcludedIds = [];\n\n\t\tlet ifSelectAllIsChecked = checkboxSelectAll.length > 0 && checkboxSelectAll.is(':checked');\n\t\tif (ifSelectAllIsChecked) {\n\t\t\tselectedIds.push('all');\n\t\t} else if (selectedUsers.length > 0) {\n\t\t\tselectedUsers.each(function () {\n\t\t\t\tselectedIds.push($(this).val());\n\t\t\t});\n\t\t}\n\t\tif (selectedUsersAjax.length > 0) {\n\t\t\tselectedIds = selectedUsersAjax.val().concat(selectedRolesAjax.val());\n\t\t}\n\t\tif (ifSelectAllIsChecked && notSelectedUsers) {\n\t\t\tnotSelectedUsers.each(function () {\n\t\t\t\texcludedIds.push($(this).val());\n\t\t\t});\n\t\t}\n\t\tif (0 === selectedIds.length && CONFIG.userId) {\n\t\t\tselectedIds.push(CONFIG.userId);\n\t\t}\n\t\treturn { selectedIds: selectedIds, excludedIds: excludedIds };\n\t}\n\t/**\n\t * Register day click event.\n\t * @param {object} info\n\t */\n\tregisterDayClickEvent(info) {\n\t\tconst self = this,\n\t\t\tuserFormat = App.Fields.Date.dateToUserFormat(info.date);\n\t\tif (!CONFIG.isQuickCreateSupported) {\n\t\t\tapp.openUrl(\n\t\t\t\t'index.php?module=' +\n\t\t\t\t\t(this.module ? this.module : CONFIG.module) +\n\t\t\t\t\t'&view=Edit&date_start=' +\n\t\t\t\t\tuserFormat +\n\t\t\t\t\t'&due_date=' +\n\t\t\t\t\tuserFormat\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\t\tself.getCalendarCreateView().done((data) => {\n\t\t\tApp.Components.QuickCreate.showModal(data, {\n\t\t\t\tcallbackFunction: () => {\n\t\t\t\t\tself.reloadCalendarData();\n\t\t\t\t},\n\t\t\t\tcallbackPostShown: (modal) => {\n\t\t\t\t\tself.dayCallbackCreateModal(modal, info);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\t/**\n\t * Callback after shown create modal\n\t * @param {jQuery} modal\n\t * @param {object} info\n\t */\n\tdayCallbackCreateModal(modal, info) {\n\t\tlet dateFormat = modal.find('[name=\"date_start\"]').data('dateFormat'),\n\t\t\ttimeFormat = modal.find('[name=\"time_start\"]').data('format'),\n\t\t\tdefaultTimeFormat = 'hh:mm A',\n\t\t\tuserFormat = App.Fields.Date.dateToUserFormat(info.date, dateFormat),\n\t\t\tendTimeString;\n\n\t\tif (timeFormat == 24) {\n\t\t\tdefaultTimeFormat = 'HH:mm';\n\t\t}\n\t\tlet startTimeString = moment(info.date).format(defaultTimeFormat);\n\t\tif ('dayGridMonth' == this.fullCalendar.view.type) {\n\t\t\tlet now = new Date();\n\t\t\tstartTimeString = moment(now).format(defaultTimeFormat);\n\t\t\tendTimeString = moment(now).add(15, 'minutes').format(defaultTimeFormat);\n\t\t} else {\n\t\t\tendTimeString = moment(info.date).add(30, 'minutes').format(defaultTimeFormat);\n\t\t}\n\t\tmodal.find('[name=\"date_start\"]').val(userFormat);\n\t\tmodal.find('[name=\"due_date\"]').val(userFormat);\n\t\tmodal.find('[name=\"time_start\"]').val(startTimeString);\n\t\tmodal.find('[name=\"time_end\"]').val(endTimeString);\n\t}\n\t/**\n\t * Register switch events\n\t */\n\tregisterSwitchEvents() {\n\t\tlet isWorkDays,\n\t\t\tswitchShowTypeVal,\n\t\t\tswitchContainer = $('.js-calendar__tab--filters'),\n\t\t\tswitchShowType = switchContainer.find('.js-switch--showType'),\n\t\t\tshowTypeState = switchShowType.find('.js-switch--label-on.active').length ? 'current' : 'history',\n\t\t\tswitchSwitchingDays = switchContainer.find('.js-switch--switchingDays'),\n\t\t\tswitchingDaysState = switchSwitchingDays.find('.js-switch--label-on.active').length ? 'workDays' : 'all';\n\t\tlet historyParams = app.getMainParams('historyParams', true);\n\t\tif (historyParams === '') {\n\t\t\tisWorkDays =\n\t\t\t\tapp.getMainParams('switchingDays') === 'workDays' && app.moduleCacheGet('defaultSwitchingDays') !== 'all';\n\t\t\tswitchShowTypeVal =\n\t\t\t\tapp.getMainParams('showType') === 'current' && app.moduleCacheGet('defaultShowType') !== 'history';\n\t\t\tif (!switchShowTypeVal) {\n\t\t\t\tswitchShowType.find('.js-switch--label-off').button('toggle');\n\t\t\t}\n\t\t} else {\n\t\t\tif (historyParams.time !== undefined) {\n\t\t\t\tapp.setMainParams('showType', historyParams.time);\n\t\t\t}\n\t\t\tapp.setMainParams('switchingDays', historyParams.hiddenDays === '' ? 'all' : 'workDays');\n\t\t}\n\t\tswitchShowType.on('change', 'input', (e) => {\n\t\t\tconst currentTarget = $(e.currentTarget);\n\t\t\tif (typeof currentTarget.data('on-text') !== 'undefined') {\n\t\t\t\tapp.setMainParams('showType', 'current');\n\t\t\t\tapp.moduleCacheSet('defaultShowType', 'current');\n\t\t\t} else if (typeof currentTarget.data('off-text') !== 'undefined') {\n\t\t\t\tapp.setMainParams('showType', 'history');\n\t\t\t\tapp.moduleCacheSet('defaultShowType', 'history');\n\t\t\t}\n\t\t\tthis.reloadCalendarData();\n\t\t});\n\t\tif (app.getMainParams('showType') !== showTypeState) {\n\t\t\t$('label.active', switchShowType).find('input').filter(':first').trigger('change');\n\t\t}\n\t\tif (switchSwitchingDays.length) {\n\t\t\tif (typeof isWorkDays !== 'undefined' && !isWorkDays) {\n\t\t\t\tswitchSwitchingDays.find('.js-switch--label-off').button('toggle');\n\t\t\t}\n\t\t\tswitchSwitchingDays.on('change', 'input', (e) => {\n\t\t\t\tconst currentTarget = $(e.currentTarget);\n\t\t\t\tlet hiddenDays = [];\n\t\t\t\tif (typeof currentTarget.data('on-text') !== 'undefined') {\n\t\t\t\t\tapp.setMainParams('switchingDays', 'workDays');\n\t\t\t\t\tapp.moduleCacheSet('defaultSwitchingDays', 'workDays');\n\t\t\t\t\thiddenDays = app.getMainParams('hiddenDays', true);\n\t\t\t\t} else if (typeof currentTarget.data('off-text') !== 'undefined') {\n\t\t\t\t\tapp.setMainParams('switchingDays', 'all');\n\t\t\t\t\tapp.moduleCacheSet('defaultSwitchingDays', 'all');\n\t\t\t\t}\n\t\t\t\tthis.fullCalendar.setOption('hiddenDays', hiddenDays);\n\t\t\t\tthis.fullCalendar.setOption('height', this.setCalendarHeight());\n\t\t\t});\n\t\t\tif (app.getMainParams('switchingDays') !== switchingDaysState) {\n\t\t\t\t$('label.active', switchSwitchingDays).find('input').filter(':first').trigger('change');\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Function toggles next year/month and general arrows on view render\n\t */\n\tregisterViewRenderEvents() {\n\t\tlet toolbar = this.calendarView.find('.fc-toolbar.fc-header-toolbar');\n\t\tthis.showChangeDateButtons(toolbar);\n\t\tthis.appendSubDateRow(toolbar);\n\t\tthis.refreshDatesRowView();\n\t\tthis.addHeaderButtons();\n\t\tthis.showTodayButtonCheckbox(toolbar);\n\t\tapp.event.on('Calendar.DatesSet', () => {\n\t\t\tthis.showChangeDateButtons(toolbar);\n\t\t\tthis.refreshDatesRowView();\n\t\t\tthis.showTodayButtonCheckbox(toolbar);\n\t\t});\n\t}\n\t/**\n\t * Function shows change date buttons in calendar's header for specific view\n\t * @param {jQuery} toolbar\n\t */\n\tshowChangeDateButtons(toolbar) {\n\t\tconst view = this.fullCalendar.view;\n\t\tconst buttonText = this.calendarOptions.buttonText;\n\t\tlet nextPrevButtons = toolbar.find('.fc-prev-button, .fc-next-button'),\n\t\t\tyearButtons = toolbar.find('.fc-prevYear-button, .fc-nextYear-button');\n\t\tyearButtons.first().html(`<span class=\"fas fa-xs fa-minus mr-1\"></span>${buttonText['year']}`);\n\t\tyearButtons.last().html(`${buttonText['year']}<span class=\"fas fa-xs fa-plus ml-1\"></span>`);\n\t\tif (view.type !== 'year' && Calendar_Js.viewsNamesLabels[view.type]) {\n\t\t\tlet viewType = Calendar_Js.viewsNamesLabels[view.type];\n\t\t\tnextPrevButtons.first().html(`<span class=\"fas fa-xs fa-minus mr-1\"></span>${buttonText[viewType]}`);\n\t\t\tnextPrevButtons.last().html(`${buttonText[viewType]}<span class=\"fas fa-xs fa-plus ml-1\"></span>`);\n\t\t}\n\t\tif (view.type === 'year') {\n\t\t\tnextPrevButtons.hide();\n\t\t\tyearButtons.show();\n\t\t} else if (view.type === 'dayGridMonth') {\n\t\t\tnextPrevButtons.show();\n\t\t\tyearButtons.show();\n\t\t} else if (view.type === 'list') {\n\t\t\tnextPrevButtons.hide();\n\t\t\tyearButtons.hide();\n\t\t} else {\n\t\t\tnextPrevButtons.show();\n\t\t\tyearButtons.hide();\n\t\t}\n\t}\n\t/**\n\t * Appends sub date row to calendar header and register its scroll\n\t * @param {jQuery} toolbar\n\t */\n\tappendSubDateRow(toolbar) {\n\t\tif (!this.calendarView.find('.js-dates-row').length) {\n\t\t\tthis.subDateRow =\n\t\t\t\t$(`<div class=\"js-scroll js-dates-row u-overflow-auto-lg-down order-4 flex-grow-1 position-relative my-1 w-100\" data-js=\"perfectScrollbar | container\">\n\t\t\t\t\t\t<div class=\"d-flex flex-nowrap w-100\">\n\t\t\t\t\t\t\t<div class=\"js-sub-date-list w-100 sub-date-list row no-gutters flex-nowrap nav nav-tabs\" data-js=\"data-type\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>`);\n\t\t\ttoolbar.append(this.subDateRow);\n\t\t\tif ($(window).width() > app.breakpoints.lg) {\n\t\t\t\tapp.showNewScrollbar(toolbar);\n\t\t\t}\n\t\t}\n\t}\n\t/**\n\t * Refresh date bar with counts\n\t */\n\trefreshDatesRowView() {\n\t\tconst self = this;\n\t\tswitch (this.fullCalendar.view.type) {\n\t\t\tcase 'year':\n\t\t\t\tself.generateYearList();\n\t\t\t\tbreak;\n\t\t\tcase 'dayGridMonth':\n\t\t\t\tself.generateMonthList();\n\t\t\t\tbreak;\n\t\t\tcase 'dayGridWeek':\n\t\t\tcase 'timeGridWeek':\n\t\t\tcase 'listWeek':\n\t\t\t\tself.generateWeekList();\n\t\t\t\tbreak;\n\t\t\tcase 'dayGridWeek':\n\t\t\tcase 'timeGridDay':\n\t\t\t\tself.generateDaysList();\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthis.container.find('.js-dates-row .js-sub-date-list').html('');\n\t\t\t\tbreak;\n\t\t}\n\t\tself.updateCountTaskCalendar();\n\t\tself.registerDatesChange();\n\t}\n\t/**\n\t * Generate days bar list\n\t */\n\tgenerateDaysList() {\n\t\tconst datesView = this.container.find('.js-dates-row'),\n\t\t\tactiveDays = moment(this.fullCalendar.view.currentStart).format('DDD'),\n\t\t\tnextDays = moment(this.fullCalendar.view.currentStart).add(7, 'days');\n\t\tlet prevDays = moment(this.fullCalendar.view.currentStart).subtract(5, 'days'),\n\t\t\tdaysToShow = nextDays.diff(prevDays, 'days'),\n\t\t\thtml = '';\n\n\t\tfor (let day = 0; day < daysToShow; ++day) {\n\t\t\tif (app.getMainParams('switchingDays') === 'workDays' && app.moduleCacheGet('defaultSwitchingDays') !== 'all') {\n\t\t\t\tif ($.inArray(prevDays.day(), app.getMainParams('hiddenDays', true)) !== -1) {\n\t\t\t\t\tprevDays = moment(prevDays).add(1, 'days');\n\t\t\t\t\tdaysToShow++;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet date = prevDays.format('YYYY-MM-DD'),\n\t\t\t\tdateUser = App.Fields.Date.dateToUserFormat(date),\n\t\t\t\tactive = '';\n\t\t\tif (prevDays.format('DDD') === activeDays) {\n\t\t\t\tactive = 'active';\n\t\t\t}\n\t\t\thtml += `<div data-date=\"${date}\" data-dates=\"${date}|${date}\" data-type=\"days\"\n\t\t\t\tclass=\"js-sub-record sub-record nav-item col-1 px-0\" data-js=\"click\">\n\t\t\t\t<div class=\"sub-record-content nav-link js-popover-tooltip ${active}\"\n\t\t\t\t\ttitle=\"${App.Fields.Date.fullDaysTranslated[prevDays.format('d')]} ${dateUser}\" data-js=\"class: active\">\n\t\t\t\t<div class=\"sub-date-name\">${app.vtranslate('JS_DAY_SHORT')} ${prevDays.format('DD')}\n\t\t\t\t<div class=\"js-count-events count badge c-badge--md ml-1\" data-js=\"html\">0</div>\n\t\t\t\t</div></div></div>`;\n\t\t\tprevDays = moment(prevDays).add(1, 'days');\n\t\t}\n\t\tdatesView.find('.js-sub-date-list').html(html);\n\t}\n\t/**\n\t * Generate weeks bar list\n\t */\n\tgenerateWeekList() {\n\t\tconst datesView = this.container.find('.js-dates-row'),\n\t\t\tactiveWeek = moment(this.fullCalendar.view.currentStart).format('WW'),\n\t\t\tnextWeeks = moment(this.fullCalendar.view.currentStart).add(6, 'weeks');\n\t\tlet prevWeeks = moment(this.fullCalendar.view.currentStart).subtract(5, 'weeks'),\n\t\t\thtml = '';\n\t\twhile (prevWeeks.format('YYYY-MM-DD') <= nextWeeks.format('YYYY-MM-DD')) {\n\t\t\tlet date = prevWeeks.format('YYYY-MM-DD'),\n\t\t\t\tdateEnd = moment(prevWeeks).add(6, 'day').format('YYYY-MM-DD'),\n\t\t\t\tdateUser = App.Fields.Date.dateToUserFormat(date),\n\t\t\t\tdateEndUser = App.Fields.Date.dateToUserFormat(dateEnd),\n\t\t\t\tactive = '';\n\t\t\tif (prevWeeks.format('WW') === activeWeek) {\n\t\t\t\tactive = 'active';\n\t\t\t}\n\t\t\thtml += `<div data-date=\"${date}\" data-dates=\"${date}|${dateEnd}\"\n\t\t\t\tclass=\"js-sub-record sub-record nav-item col-1 px-0\" data-type=\"weeks\" data-js=\"click\">\n\t\t\t\t<div class=\"sub-record-content nav-link js-popover-tooltip ${active}\" title=\"${dateUser} > ${dateEndUser}\" data-js=\"class: active\">\n\t\t\t\t<div class=\"sub-date-name\">${app.vtranslate('JS_WEEK_SHORT')} ${prevWeeks.format('WW')}\n\t\t\t\t<div class=\"js-count-events count badge c-badge--md ml-1\" data-js=\"html\">0</div>\n\t\t\t\t</div></div></div>`;\n\t\t\tprevWeeks.add(1, 'weeks');\n\t\t}\n\t\tdatesView.find('.js-sub-date-list').html(html);\n\t}\n\t/**\n\t * Generate month bar list\n\t */\n\tgenerateMonthList() {\n\t\tconst datesView = this.container.find('.js-dates-row'),\n\t\t\tactiveMonth = this.fullCalendar.view.currentStart.getMonth(),\n\t\t\tactiveYear = this.fullCalendar.view.currentStart.getFullYear();\n\t\tlet html = '';\n\t\tfor (let month = 0; 12 > month; ++month) {\n\t\t\tlet m = month <= 8 ? '0' + (month + 1) : month + 1,\n\t\t\t\tlastDay = App.Fields.Date.getLastMonthDay(activeYear, m),\n\t\t\t\tdate = activeYear + '-' + m + '-01',\n\t\t\t\tdateEnd = activeYear + '-' + m + '-' + lastDay,\n\t\t\t\tdateUser = App.Fields.Date.dateToUserFormat(date),\n\t\t\t\tdateEndUser = App.Fields.Date.dateToUserFormat(dateEnd),\n\t\t\t\tactive = '';\n\t\t\tif (month === activeMonth) {\n\t\t\t\tactive = 'active';\n\t\t\t}\n\t\t\thtml += `<div data-date=\"${date}\" data-dates=\"${date}|${dateEnd}\"\n\t\t\t\tclass=\"js-sub-record sub-record nav-item col-1 px-0\" data-type=\"months\" data-js=\"click\">\n\t\t\t\t<div class=\"sub-record-content nav-link js-popover-tooltip ${active}\" title=\"${dateUser} > ${dateEndUser}\" data-js=\"class: active\">\n\t\t\t\t<div class=\"sub-date-name\">${App.Fields.Date.monthsTranslated[month]}\n\t\t\t\t<div class=\"js-count-events count badge c-badge--md ml-1\" data-js=\"html\">0</div>\n\t\t\t\t</div></div></div>`;\n\t\t}\n\t\tdatesView.find('.js-sub-date-list').html(html);\n\t}\n\t/**\n\t * Generate year bar list\n\t */\n\tgenerateYearList() {\n\t\tconst datesView = this.container.find('.js-dates-row'),\n\t\t\tactiveYear = this.fullCalendar.view.currentStart.getFullYear(),\n\t\t\tnextYear = activeYear + 1;\n\t\tlet prevYear = activeYear - 1,\n\t\t\thtml = '';\n\t\twhile (prevYear <= nextYear) {\n\t\t\tlet date = prevYear + '-01-01',\n\t\t\t\tdateEnd = prevYear + '-12-31',\n\t\t\t\tactive = '';\n\t\t\tif (prevYear === activeYear) {\n\t\t\t\tactive = 'active';\n\t\t\t}\n\t\t\thtml += `<div data-date=\"${date}\" data-dates=\"${date}|${dateEnd}\"\n\t\t\t\tclass=\"js-sub-record sub-record col-4 nav-item\" data-type=\"years\" data-js=\"click\">\n\t\t\t\t<div class=\"sub-record-content nav-link ${active}\" data-js=\"class: active\">\n\t\t\t\t<div class=\"sub-date-name\">${prevYear}<div class=\"js-count-events count badge c-badge--md ml-1\" data-js=\"html\">0</div></div>\n\t\t\t\t</div></div>`;\n\t\t\tprevYear = prevYear + 1;\n\t\t}\n\t\tdatesView.find('.js-sub-date-list').html(html);\n\t}\n\t/**\n\t * Counting the number of events in the bar for the current view\n\t */\n\tupdateCountTaskCalendar() {\n\t\tconst datesView = this.container.find('.js-dates-row'),\n\t\t\tsubDatesElements = datesView.find('.js-sub-record');\n\t\tlet options = this.getDefaultParams(),\n\t\t\tdateArray = {};\n\t\tdelete options.start;\n\t\tdelete options.end;\n\t\tsubDatesElements.each(function (key) {\n\t\t\tdateArray[key] = $(this).data('dates').split('|');\n\t\t});\n\t\toptions.mode = 'getCountEventsGroup';\n\t\toptions.dates = dateArray;\n\t\tAppConnector.request(options).done(function (events) {\n\t\t\tsubDatesElements.each(function (key) {\n\t\t\t\t$(this).find('.js-count-events').removeClass('hide').html(events.result[key]);\n\t\t\t});\n\t\t});\n\t}\n\t/**\n\t * Registration of the date change in the counting the number of events bar\n\t */\n\tregisterDatesChange() {\n\t\tthis.container.find('.js-dates-row .js-sub-record').on('click', (e) => {\n\t\t\tlet currentTarget = $(e.currentTarget);\n\t\t\tcurrentTarget.addClass('active');\n\t\t\tthis.fullCalendar.gotoDate(currentTarget.data('date'));\n\t\t});\n\t}\n\t/**\n\t * Add header buttons\n\t */\n\taddHeaderButtons() {\n\t\tif (this.calendarView.find('.js-calendar__view-btn').length) {\n\t\t\treturn;\n\t\t}\n\t\tlet buttonsContainer = this.calendarView.prev('.js-calendar__header-buttons'),\n\t\t\tviewBtn = buttonsContainer.find('.js-calendar__view-btn').clone(),\n\t\t\tfilters = buttonsContainer.find('.js-calendar__filter-container').clone(),\n\t\t\ttoolbar = this.calendarView.find('.fc-toolbar-chunk');\n\t\ttoolbar.first().addClass('fc-left');\n\t\ttoolbar.eq(1).addClass('fc-center');\n\t\tthis.calendarView.find('.fc-left .fc-button-group').prepend(viewBtn);\n\t\tthis.calendarView.find('.fc-center').after(filters);\n\t\tthis.registerClearFilterButton();\n\t\tthis.registerFilterTabChange();\n\t}\n\t/**\n\t * Register clear filter button\n\t */\n\tregisterClearFilterButton() {\n\t\tconst sidebar = this.getSidebarView(),\n\t\t\tclearBtn = this.calendarView.find('.js-calendar__clear-filters');\n\t\tapp.showPopoverElementView(clearBtn);\n\t\tclearBtn.on('click', () => {\n\t\t\t$('.js-calendar__extended-filter-tab a').removeClass('active');\n\t\t\tapp.moduleCacheSet('CurrentCvId', null);\n\t\t\tapp.setMainParams('showType', 'current');\n\t\t\tapp.moduleCacheSet('defaultShowType', 'current');\n\t\t\tsidebar.find('input:checkbox').prop('checked', false);\n\t\t\tsidebar.find('option:selected').prop('selected', false).trigger('change.select2');\n\t\t\tsidebar.find('.js-sidebar-filter-container').each((_, e) => {\n\t\t\t\tlet element = $(e);\n\t\t\t\tlet cacheName = element.data('cache');\n\t\t\t\tif (element.data('name') && cacheName) {\n\t\t\t\t\tapp.moduleCacheSet(cacheName, '');\n\t\t\t\t}\n\t\t\t});\n\t\t\tlet calendarSwitch = sidebar.find('.js-switch--showType [class*=\"js-switch--label\"]'),\n\t\t\t\tactualUserCheckbox = sidebar.find('.js-input-user-owner-id[value=' + app.getMainParams('userId') + ']');\n\t\t\tcalendarSwitch.last().removeClass('active');\n\t\t\tcalendarSwitch.first().addClass('active');\n\t\t\t$('input[data-val=\"current\"]', calendarSwitch).prop('checked', true);\n\t\t\tif (actualUserCheckbox.length) {\n\t\t\t\tactualUserCheckbox.prop('checked', true);\n\t\t\t} else {\n\t\t\t\tapp.setMainParams('usersId', undefined);\n\t\t\t}\n\t\t\tthis.reloadCalendarData();\n\t\t});\n\t}\n\t/**\n\t * Register filter tab change\n\t */\n\tregisterFilterTabChange() {\n\t\tthis.calendarView.find('.js-calendar__extended-filter-tab').on('shown.bs.tab', () => {\n\t\t\tthis.reloadCalendarData();\n\t\t\tapp.moduleCacheSet('CurrentCvId', this.getCurrentCvId());\n\t\t});\n\t}\n\t/**\n\t * Function appends and shows today button's checkbox\n\t * @param {jQuery} toolbar\n\t */\n\tshowTodayButtonCheckbox(toolbar) {\n\t\tlet todayButton = toolbar.find('.fc-today-button'),\n\t\t\ttodyButtonIcon = todayButton.attr('disabled') ? 'fa-calendar-check' : 'fa-calendar',\n\t\t\tpopoverContent = todayButton.attr('title');\n\t\ttodayButton.html(`<div class=\"js-popover-tooltip\"><span class=\"far fa-lg ${todyButtonIcon}\"></span></div>`);\n\t\tapp.showPopoverElementView(todayButton.find('.js-popover-tooltip'), {\n\t\t\ttitle: popoverContent\n\t\t});\n\t}\n\t/**\n\t * Registration of the event being added to favorite users\n\t */\n\tregisterPinUser() {\n\t\tconst self = this;\n\t\tthis.getSidebarView()\n\t\t\t.find('.js-pin-user')\n\t\t\t.on('click', function () {\n\t\t\t\tconst element = $(this);\n\t\t\t\tAppConnector.request({\n\t\t\t\t\tmodule: self.module,\n\t\t\t\t\taction: 'Calendar',\n\t\t\t\t\tmode: 'pinOrUnpinUser',\n\t\t\t\t\telement_id: element.data('elementid')\n\t\t\t\t}).done((data) => {\n\t\t\t\t\tif (data.result === 'unpin') {\n\t\t\t\t\t\telement.find('.js-pin-icon').removeClass('fas').addClass('far');\n\t\t\t\t\t} else if (data.result === 'pin') {\n\t\t\t\t\t\telement.find('.js-pin-icon').removeClass('far').addClass('fas');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\ttext: app.vtranslate('JS_ERROR'),\n\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t}\n\t/**\n\t * Register cache settings\n\t */\n\tregisterCacheSettings() {}\n\t/**\n\t * Register events\n\t */\n\tregisterEvents() {\n\t\tsuper.registerEvents();\n\t\tthis.registerCacheSettings();\n\t\tthis.registerSwitchEvents();\n\t\tthis.registerPinUser();\n\t\tElementQueries.listen();\n\t}\n};\n"],"names":["window","Vtiger_Calendar_Js","container","readonly","browserHistory","self","allDaySlot","dateClick","args","eventCreate","registerDayClickEvent","selectable","eventClick","info","jsEvent","preventDefault","element","$","el","link","attr","find","inArray","event","classNames","app","showModalWindow","replace","Object","assign","headerToolbar","left","getMainParams","center","right","select","selectDays","datesSet","dateInfo","trigger","fullCalendar","view","loadCalendarData","length","tab","defaultParams","getDefaultParams","progressInstance","progressIndicator","blockInfo","enabled","removeAllEvents","clearFilterButton","AppConnector","request","done","events","addEventSource","result","mode","updateCountTaskCalendar","user","currentUser","parseInt","time","statement","JSON","stringify","getCurrentCvId","toggleClass","options","getSelectedUsersCalendar","activeEnd","add","getSidebarView","data","history","sidebar","selectedUsers","notSelectedUsers","selectedUsersAjax","selectedRolesAjax","checkboxSelectAll","selectedIds","excludedIds","ifSelectAllIsChecked","is","push","each","val","concat","CONFIG","userId","userFormat","App","Fields","Date","dateToUserFormat","date","isQuickCreateSupported","getCalendarCreateView","Components","QuickCreate","showModal","callbackFunction","reloadCalendarData","callbackPostShown","modal","dayCallbackCreateModal","openUrl","module","endTimeString","dateFormat","timeFormat","defaultTimeFormat","startTimeString","moment","format","type","now","isWorkDays","switchShowTypeVal","switchContainer","switchShowType","showTypeState","switchSwitchingDays","switchingDaysState","historyParams","moduleCacheGet","button","setMainParams","hiddenDays","on","e","currentTarget","moduleCacheSet","filter","setOption","setCalendarHeight","toolbar","calendarView","showChangeDateButtons","appendSubDateRow","refreshDatesRowView","addHeaderButtons","showTodayButtonCheckbox","buttonText","calendarOptions","nextPrevButtons","yearButtons","first","html","last","Calendar_Js","viewsNamesLabels","viewType","hide","show","subDateRow","append","width","breakpoints","lg","showNewScrollbar","generateYearList","generateMonthList","generateWeekList","generateDaysList","registerDatesChange","datesView","activeDays","currentStart","nextDays","prevDays","subtract","daysToShow","diff","day","dateUser","active","fullDaysTranslated","vtranslate","activeWeek","nextWeeks","prevWeeks","dateEnd","dateEndUser","activeMonth","getMonth","activeYear","getFullYear","month","m","lastDay","getLastMonthDay","monthsTranslated","prevYear","subDatesElements","dateArray","start","end","key","split","dates","removeClass","addClass","gotoDate","buttonsContainer","prev","viewBtn","clone","filters","eq","prepend","after","registerClearFilterButton","registerFilterTabChange","clearBtn","showPopoverElementView","prop","_","cacheName","calendarSwitch","actualUserCheckbox","todayButton","todyButtonIcon","popoverContent","title","action","element_id","showNotify","text","registerCacheSettings","registerSwitchEvents","registerPinUser","ElementQueries","listen"],"mappings":"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"}