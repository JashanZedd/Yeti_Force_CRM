{"version":3,"file":"ConditionBuilder.min.js","sources":["ConditionBuilder.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nclass Vtiger_ConditionBuilder_Js {\n\t/**\n\t * Constructor\n\t * @param {jQuery} container\n\t * @param {(string|Object)} params\n\t * @param {function} onChange\n\t */\n\tconstructor(container, params, onChange) {\n\t\tthis.container = container;\n\t\tthis.params = typeof params === 'string' ? { sourceModuleName: params } : params;\n\t\tif (onChange) {\n\t\t\tthis.onChange = onChange;\n\t\t} else {\n\t\t\tthis.onChange = () => {};\n\t\t}\n\t}\n\n\t/**\n\t * Register change value event\n\t *\n\t * @param   {jQuery}  container\n\t */\n\tregisterChangeValueEvent(container) {\n\t\tcontainer.find('.js-condition-builder-value').on('change', (e) => {\n\t\t\tthis.onChange(this);\n\t\t});\n\t}\n\t/**\n\t * Get default params\n\t * @returns {Object}\n\t */\n\tgetDefaultParams() {\n\t\treturn {\n\t\t\tmodule: app.getModuleName(),\n\t\t\tparent: app.getParentModuleName(),\n\t\t\tview: 'ConditionBuilder',\n\t\t\t...this.params\n\t\t};\n\t}\n\n\t/**\n\t * Register events when change conditions\n\t * @param {jQuery} container\n\t */\n\tregisterChangeConditions(container) {\n\t\tlet self = this;\n\t\tcontainer.on('change', '.js-conditions-fields, .js-conditions-operator', (e) => {\n\t\t\tlet progress = $.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tlet currentTarget = $(e.currentTarget);\n\t\t\tlet requestParams = {};\n\t\t\tif (currentTarget.hasClass('js-conditions-fields')) {\n\t\t\t\trequestParams = {\n\t\t\t\t\tfieldname: currentTarget.val()\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\trequestParams = {\n\t\t\t\t\tfieldname: container.find('.js-conditions-fields').val(),\n\t\t\t\t\toperator: currentTarget.val()\n\t\t\t\t};\n\t\t\t}\n\t\t\tAppConnector.request({ ...requestParams, ...this.getDefaultParams() }).done(function (data) {\n\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\tcontainer.html($(data).html());\n\t\t\t\tself.registerField(container);\n\t\t\t\tself.registerChangeValueEvent(container);\n\t\t\t\tself.onChange(self);\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * register field types related events\n\t * @param {jQuery} container\n\t */\n\tregisterField(container) {\n\t\tApp.Fields.Picklist.showSelect2ElementView(container.find('select.select2'));\n\t\tApp.Fields.Date.register(container, true, {}, 'js-date-field');\n\t\tApp.Fields.Date.registerRange(container.find('.js-date-range-field'), { ranges: false });\n\t\tApp.Fields.DateTime.register(container.find('.js-datetime-range-field'));\n\t\tapp.registerEventForClockPicker($(container.find('.clockPicker')));\n\t\tApp.Fields.Tree.register(container);\n\t}\n\n\t/**\n\t * Register events to add condition\n\t */\n\tregisterAddCondition() {\n\t\tlet self = this;\n\t\tthis.container.on('click', '.js-condition-add', (e) => {\n\t\t\tlet progress = $.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tlet container = $(e.currentTarget)\n\t\t\t\t.closest('.js-condition-builder-group-container')\n\t\t\t\t.find('> .js-condition-builder-conditions-container');\n\t\t\tAppConnector.request(this.getDefaultParams()).done(function (data) {\n\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\tdata = $(data);\n\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(data.find('select.select2'));\n\t\t\t\tself.registerChangeConditions(data);\n\t\t\t\tself.registerChangeValueEvent(data);\n\t\t\t\tcontainer.append(data);\n\t\t\t\tself.onChange(self);\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Register events to add group\n\t */\n\tregisterAddGroup() {\n\t\tthis.container.on('click', '.js-group-add', (e) => {\n\t\t\tlet template = this.container.find('.js-condition-builder-group-template').clone();\n\t\t\ttemplate.removeClass('hide');\n\t\t\t$(e.target)\n\t\t\t\t.closest('.js-condition-builder-group-container')\n\t\t\t\t.find('> .js-condition-builder-conditions-container')\n\t\t\t\t.append(template.html());\n\t\t\tthis.onChange(this);\n\t\t});\n\t}\n\n\t/**\n\t * Register events to remove group\n\t */\n\tregisterDeleteGroup() {\n\t\tthis.container.on('click', '.js-group-delete', (e) => {\n\t\t\t$(e.target).closest('.js-condition-builder-group-container').remove();\n\t\t\tthis.onChange(this);\n\t\t});\n\t}\n\n\t/**\n\t * Register events to remove condition\n\t */\n\tregisterDeleteCondition() {\n\t\tthis.container.on('click', '.js-condition-delete', (e) => {\n\t\t\t$(e.target).closest('.js-condition-builder-conditions-row').remove();\n\t\t\tthis.onChange(this);\n\t\t});\n\t}\n\n\t/**\n\t * Block submit on press enter key\n\t */\n\tregisterDisableSubmitOnEnter() {\n\t\tthis.container.find('.js-condition-builder-value').on('keydown', (e) => {\n\t\t\tif (e.key === 'Enter') {\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Read conditions in group\n\t * @param {jQuery} container\n\t * @param {boolean} skipEmpty\n\t * @returns {object}\n\t */\n\treadCondition(container, skipEmpty) {\n\t\tlet self = this;\n\t\tlet condition = container.find('> .js-condition-switch .js-condition-switch-value').hasClass('active')\n\t\t\t? 'AND'\n\t\t\t: 'OR';\n\t\tlet arr = {};\n\t\tlet rules = [];\n\t\tcontainer.find('> .js-condition-builder-conditions-container >').each(function () {\n\t\t\tlet element = $(this);\n\t\t\tif (element.hasClass('js-condition-builder-conditions-row')) {\n\t\t\t\trules.push({\n\t\t\t\t\tfieldname: element.find('.js-conditions-fields').val(),\n\t\t\t\t\toperator: element.find('.js-conditions-operator').val(),\n\t\t\t\t\tvalue: element.find('.js-condition-builder-value').val()\n\t\t\t\t});\n\t\t\t} else if (element.hasClass('js-condition-builder-group-container')) {\n\t\t\t\tlet childRules = self.readCondition(element, skipEmpty);\n\t\t\t\tif (!skipEmpty || Object.keys(childRules).length) {\n\t\t\t\t\trules.push(childRules);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tif (!skipEmpty || rules.length) {\n\t\t\tarr['condition'] = condition;\n\t\t\tarr['rules'] = rules;\n\t\t}\n\t\treturn arr;\n\t}\n\n\t/**\n\t * Returns conditions\n\t * @param {boolean} skipEmpty\n\t * @returns {object}\n\t */\n\tgetConditions(skipEmpty = true) {\n\t\treturn this.readCondition(this.container.find('> .js-condition-builder-group-container'), skipEmpty);\n\t}\n\n\t/**\n\t * Main function to regsiter events\n\t */\n\tregisterEvents() {\n\t\tlet self = this;\n\t\tthis.registerAddCondition();\n\t\tthis.registerAddGroup();\n\t\tthis.registerDeleteGroup();\n\t\tthis.registerDeleteCondition();\n\t\tthis.registerDisableSubmitOnEnter();\n\t\tthis.container.find('.js-condition-builder-conditions-row').each(function () {\n\t\t\tlet row = $(this);\n\t\t\tself.registerChangeConditions(row);\n\t\t\tself.registerChangeValueEvent(row);\n\t\t\tself.registerField(row);\n\t\t});\n\t}\n}\n"],"names":["Vtiger_ConditionBuilder_Js","container","params","onChange","sourceModuleName","find","on","module","app","getModuleName","parent","getParentModuleName","view","self","e","$","progressIndicator","position","blockInfo","enabled","currentTarget","requestParams","hasClass","fieldname","val","operator","AppConnector","request","getDefaultParams","done","data","progress","mode","html","registerField","registerChangeValueEvent","App","Fields","Picklist","showSelect2ElementView","Date","register","registerRange","ranges","DateTime","registerEventForClockPicker","Tree","closest","registerChangeConditions","append","template","clone","removeClass","target","remove","key","preventDefault","skipEmpty","condition","arr","rules","each","element","push","value","childRules","readCondition","Object","keys","length","registerAddCondition","registerAddGroup","registerDeleteGroup","registerDeleteCondition","registerDisableSubmitOnEnter","row"],"mappings":"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"}