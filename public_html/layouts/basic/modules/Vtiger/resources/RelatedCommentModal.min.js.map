{"version":3,"file":"RelatedCommentModal.min.js","sources":["RelatedCommentModal.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class('Vtiger_RelatedCommentModal_Js', {\n\twindowParent: app.getWindowParent(),\n\t/*\n\t * Function to register the click event for generate button\n\t */\n\tregisterSubmitEvent: function (container) {\n\t\tconst self = this;\n\t\tcontainer.find('[name=\"saveButton\"]').on('click', function (e) {\n\t\t\tvar progressLoader = $.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tvar comment = container.find('.comment').val();\n\t\t\tvar params = {\n\t\t\t\tmodule: self.windowParent.app.getModuleName(),\n\t\t\t\trecord: self.windowParent.app.getRecordId(),\n\t\t\t\taction: 'RelatedCommentModal',\n\t\t\t\tmode: 'update',\n\t\t\t\tcomment: comment,\n\t\t\t\trelid: container.find('.relatedRecord').val(),\n\t\t\t\trelmodule: container.find('.relatedModuleName').val()\n\t\t\t};\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\tVtiger_Helper_Js.showMessage({ text: data.result });\n\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\tprogressLoader.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tself.windowParent.Vtiger_Detail_Js.getInstance().reloadTabContent();\n\t\t\t\t})\n\t\t\t\t.fail(function (error) {\n\t\t\t\t\tprogressLoader.progressIndicator({ mode: 'hide' });\n\t\t\t\t});\n\t\t});\n\t},\n\tregisterEvents: function () {\n\t\tvar container = $('#modalRelatedCommentModal');\n\t\tnew App.Fields.Text.Completions(container.find('.js-completions'));\n\t\tthis.registerSubmitEvent(container);\n\t}\n});\n$(function () {\n\tvar instance = new Vtiger_RelatedCommentModal_Js();\n\tinstance.registerEvents();\n});\n"],"names":["jQuery","Class","windowParent","app","getWindowParent","registerSubmitEvent","container","find","on","progressLoader","$","progressIndicator","position","blockInfo","enabled","comment","val","params","module","self","getModuleName","record","getRecordId","action","mode","relid","relmodule","AppConnector","request","done","data","Vtiger_Helper_Js","showMessage","text","result","hideModalWindow","Vtiger_Detail_Js","getInstance","reloadTabContent","fail","registerEvents","App","Fields","Text","Completions","Vtiger_RelatedCommentModal_Js","instance"],"mappings":";;AAAA,kKACA,YAAY,CAEZA,MAAM,CAACC,KAAK,CAAC,+BAA+B,CAAE,CAC7CC,YAAY,CAAEC,GAAG,CAACC,eAAe,EAAE;AAEpC;AACA,IACCC,mBAAmB,CAAE,SAAA,mBAAA,CAAUC,SAAS,CAAE,CACzC,IAAU,IAAA,CAAG,IAAI,CACjBA,SAAS,CAACC,IAAI,CAAC,uBAAqB,CAAC,CAACC,EAAE,CAAC,OAAO,CAAE,UAAa,CAC1DC,IAAAA,cAAc,CAAGC,CAAC,CAACC,iBAAiB,CAAC,CACxCC,QAAQ,CAAE,MAAM,CAChBC,SAAS,CAAE,CACVC,OAAO,CACR,CAAA,CAAA,CACD,CAAC,CAAC,CACEC,OAAO,CAAGT,SAAS,CAACC,IAAI,CAAC,UAAU,CAAC,CAACS,GAAG,EAAE,CAC1CC,MAAM,CAAG,CACZC,MAAM,CAAEC,IAAI,CAACjB,YAAY,CAACC,GAAG,CAACiB,aAAa,EAAE,CAC7CC,MAAM,CAAEF,IAAI,CAACjB,YAAY,CAACC,GAAG,CAACmB,WAAW,EAAE,CAC3CC,MAAM,CAAE,qBAAqB,CAC7BC,IAAI,CAAE,QAAQ,CACdT,OAAO,CAAEA,OAAO,CAChBU,KAAK,CAAEnB,SAAS,CAACC,IAAI,CAAC,gBAAgB,CAAC,CAACS,GAAG,EAAE,CAC7CU,SAAS,CAAEpB,SAAS,CAACC,IAAI,CAAC,oBAAoB,CAAC,CAACS,GAAG,EACpD,CAAC,CACDW,YAAY,CAACC,OAAO,CAACX,MAAM,CAAC,CAC1BY,IAAI,CAAC,SAAUC,IAAI,CAAE,CACrBC,gBAAgB,CAACC,WAAW,CAAC,CAAEC,IAAI,CAAEH,IAAI,CAACI,MAAO,CAAC,CAAC,CACnD/B,GAAG,CAACgC,eAAe,EAAE,CACrB1B,cAAc,CAACE,iBAAiB,CAAC,CAAEa,IAAI,CAAE,MAAO,CAAC,CAAC,CAClDL,IAAI,CAACjB,YAAY,CAACkC,gBAAgB,CAACC,WAAW,EAAE,CAACC,gBAAgB,GAClE,CAAC,CAAC,CACDC,IAAI,CAAC,UAAiB,CACtB9B,cAAc,CAACE,iBAAiB,CAAC,CAAEa,IAAI,CAAE,MAAO,CAAC,EAClD,CAAC,EACH,CAAC,EACF,CAAC,CACDgB,cAAc,CAAE,SAAY,cAAA,EAAA,CAC3B,IAAIlC,SAAS,CAAGI,CAAC,CAAC,2BAA2B,CAAC,CAC9C,IAAI+B,GAAG,CAACC,MAAM,CAACC,IAAI,CAACC,WAAW,CAACtC,SAAS,CAACC,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAClE,IAAI,CAACF,mBAAmB,CAACC,SAAS,EACnC,CACD,CAAC,CAAC,CACFI,CAAC,CAAC,UAAY,CACb,IAAY,QAAA,CAAG,IAAImC,6BAA+B,CAClDC,QAAQ,CAACN,cAAc,GACxB,CAAC,CAAC;;"}