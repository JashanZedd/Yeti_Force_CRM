'use strict';

/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */

$.Class('Base_RecordUnlock_JS', {}, {
	/**
  * Register modal events
  * @param {jQuery} modalContainer
  */
	registerEvents: function registerEvents(modalContainer) {
		modalContainer.find('form').on('submit', function (e) {
			e.preventDefault();
			var progressIndicator = $.progressIndicator({ position: 'html', blockInfo: { enabled: true } });
			AppConnector.request($(this).serializeFormData()).done(function (response) {
				var result = response.result;
				if (result.success && result.url) {
					if (CONFIG.view === 'ListPreview') {
						app.hideModalWindow();
						$('.listPreviewframe')[0].src = result.url.replace('view=Detail', 'view=DetailPreview');
						progressIndicator.progressIndicator({ mode: 'hide' });
					} else {
						window.location.href = result.url;
					}
				} else {
					Vtiger_Helper_Js.showPnotify({ text: app.vtranslate('JS_ERROR') });
					progressIndicator.progressIndicator({ mode: 'hide' });
				}
			});
		});
	}
});
//# sourceMappingURL=RecordUnlock.min.js.map
