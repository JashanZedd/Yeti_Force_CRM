{"version":3,"file":"Detail.min.js","sources":["Detail.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nVtiger_Detail_Js(\"IStorages_Detail_Js\", {}, {\n\t//It stores the IStorages Hierarchy response data\n\thierarchyResponseCache: {},\n\t/*\n\t * function to get the IStoragesHierarchy response data\n\t */\n\tgetHierarchyResponseData: function (params) {\n\t\tvar thisInstance = this;\n\t\tvar aDeferred = jQuery.Deferred();\n\n\t\t//Check in the cache\n\t\tif (!(jQuery.isEmptyObject(thisInstance.hierarchyResponseCache))) {\n\t\t\taDeferred.resolve(thisInstance.hierarchyResponseCache);\n\t\t} else {\n\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t//store it in the cache, so that we dont do multiple request\n\t\t\t\tthisInstance.hierarchyResponseCache = data;\n\t\t\t\taDeferred.resolve(thisInstance.hierarchyResponseCache);\n\t\t\t});\n\t\t}\n\t\treturn aDeferred.promise();\n\t},\n\t/*\n\t * function to display the IStorages Hierarchy response data\n\t */\n\tdisplayHierarchyResponseData: function (data) {\n\t\tvar callbackFunction = function (data) {\n\t\t\tapp.showScrollBar(jQuery('#hierarchyScroll'), {\n\t\t\t\theight: '300px',\n\t\t\t\trailVisible: true,\n\t\t\t\tsize: '6px'\n\t\t\t});\n\t\t};\n\t\tapp.showModalWindow(data, function (data) {\n\t\t\tif (typeof callbackFunction == 'function' && jQuery('#hierarchyScroll').height() > 300) {\n\t\t\t\tcallbackFunction(data);\n\t\t\t}\n\t\t});\n\t},\n\tregisterHierarchyRecordCount: function () {\n\t\tvar hierarchyButton = $('.detailViewTitle .hierarchy');\n\t\tif (hierarchyButton.length) {\n\t\t\tvar params = {\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\taction: 'RelationAjax',\n\t\t\t\trecord: app.getRecordId(),\n\t\t\t\tmode: 'getHierarchyCount',\n\t\t\t};\n\t\t\tAppConnector.request(params).done(function (response) {\n\t\t\t\tif (response.success) {\n\t\t\t\t\t$('.detailViewTitle .hierarchy .badge').html(response.result);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\tregisterShowHierarchy: function () {\n\t\tvar thisInstance = this;\n\t\tvar hierarchyButton = $('.detailViewTitle');\n\t\tvar url = \"index.php?module=IStorages&view=Hierarchy&record=\" + app.getRecordId();\n\t\thierarchyButton.on('click', '.js-detail__icon', function (e) {\n\t\t\tthisInstance.getHierarchyResponseData(url).done(function (data) {\n\t\t\t\tthisInstance.displayHierarchyResponseData(data);\n\t\t\t});\n\t\t});\n\t},\n\tregisterEvents: function () {\n\t\tthis._super();\n\t\tthis.registerHierarchyRecordCount();\n\t\tthis.registerShowHierarchy();\n\t}\n});\n"],"names":["Vtiger_Detail_Js","params","thisInstance","aDeferred","jQuery","Deferred","isEmptyObject","hierarchyResponseCache","resolve","request","done","data","promise","callbackFunction","showScrollBar","showModalWindow","height","hierarchyButton","$","length","app","getModuleName","getRecordId","response","success","html","result","url","on","e","getHierarchyResponseData","displayHierarchyResponseData","_super","registerHierarchyRecordCount","registerShowHierarchy"],"mappings":";;AAAA;AACA;AAEAA,iBAAiB,qBAAjB,EAAwC,EAAxC,EAA4C;;yBAEnB,EAFmB;;;;2BAMjB,kCAAUC,MAAV,EAAkB;MACvCC,eAAe,IAAnB;MACIC,YAAYC,OAAOC,QAAP,EAAhB;;;MAGI,CAAED,OAAOE,aAAP,CAAqBJ,aAAaK,sBAAlC,CAAN,EAAkE;aACvDC,OAAV,CAAkBN,aAAaK,sBAA/B;GADD,MAEO;gBACOE,OAAb,CAAqBR,MAArB,EAA6BS,IAA7B,CAAkC,UAAUC,IAAV,EAAgB;;iBAEpCJ,sBAAb,GAAsCI,IAAtC;cACUH,OAAV,CAAkBN,aAAaK,sBAA/B;IAHD;;SAMMJ,UAAUS,OAAV,EAAP;EApB0C;;;;+BAyBb,sCAAUD,IAAV,EAAgB;MACzCE,mBAAmB,SAAnBA,gBAAmB,CAAUF,IAAV,EAAgB;OAClCG,aAAJ,CAAkBV,OAAO,kBAAP,CAAlB,EAA8C;YACrC,OADqC;iBAEhC,IAFgC;UAGvC;IAHP;GADD;MAOIW,eAAJ,CAAoBJ,IAApB,EAA0B,UAAUA,IAAV,EAAgB;OACrC,OAAOE,gBAAP,IAA2B,UAA3B,IAAyCT,OAAO,kBAAP,EAA2BY,MAA3B,KAAsC,GAAnF,EAAwF;qBACtEL,IAAjB;;GAFF;EAjC0C;+BAuCb,wCAAY;MACrCM,kBAAkBC,EAAE,6BAAF,CAAtB;MACID,gBAAgBE,MAApB,EAA4B;OACvBlB,SAAS;YACJmB,IAAIC,aAAJ,EADI;YAEJ,cAFI;YAGJD,IAAIE,WAAJ,EAHI;UAIN;IAJP;gBAMab,OAAb,CAAqBR,MAArB,EAA6BS,IAA7B,CAAkC,UAAUa,QAAV,EAAoB;QACjDA,SAASC,OAAb,EAAsB;OACnB,oCAAF,EAAwCC,IAAxC,CAA6CF,SAASG,MAAtD;;IAFF;;EAhDyC;wBAuDpB,iCAAY;MAC9BxB,eAAe,IAAnB;MACIe,kBAAkBC,EAAE,kBAAF,CAAtB;MACIS,MAAM,sDAAsDP,IAAIE,WAAJ,EAAhE;kBACgBM,EAAhB,CAAmB,OAAnB,EAA4B,kBAA5B,EAAgD,UAAUC,CAAV,EAAa;gBAC/CC,wBAAb,CAAsCH,GAAtC,EAA2CjB,IAA3C,CAAgD,UAAUC,IAAV,EAAgB;iBAClDoB,4BAAb,CAA0CpB,IAA1C;IADD;GADD;EA3D0C;iBAiE3B,0BAAY;OACtBqB,MAAL;OACKC,4BAAL;OACKC,qBAAL;;CApEF"}