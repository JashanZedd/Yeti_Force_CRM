{"version":3,"file":"RelatedList.min.js","sources":["RelatedList.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nVtiger_RelatedList_Js(\n\t'IStorages_RelatedList_Js',\n\t{\n\t\tregisterEditQty: function () {\n\t\t\tlet thisInstance = this;\n\t\t\tlet element = this.content.find('.js-edit-qtyproductinstock');\n\t\t\telement.validationEngine(app.validationEngineOptions);\n\t\t\telement.on('change', e => {\n\t\t\t\te.stopPropagation();\n\t\t\t\tlet element = $(e.currentTarget);\n\t\t\t\telement.formatNumber();\n\t\t\t\tif (!element.validationEngine('validate')) {\n\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\tmodule: thisInstance.parentModuleName,\n\t\t\t\t\t\trecord: element.closest('.js-list__row').data('id'),\n\t\t\t\t\t\taction: 'RelationAjax',\n\t\t\t\t\t\tmode: 'setQtyProducts',\n\t\t\t\t\t\tsrc_record: thisInstance.parentRecordId,\n\t\t\t\t\t\trelated_module: thisInstance.moduleName,\n\t\t\t\t\t\tqty: element.val()\n\t\t\t\t\t}).done(function (responseData) {\n\t\t\t\t\t\tif (responseData.result) {\n\t\t\t\t\t\t\tVtiger_Helper_Js.showPnotify({text: app.vtranslate('JS_SAVE_NOTIFY_OK'), type: 'success'});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterPostLoadEvents: function () {\n\t\t\tthis._super();\n\t\t\tthis.registerEditQty();\n\t\t}\n\t}\n);\n"],"names":["Vtiger_RelatedList_Js","thisInstance","element","content","find","validationEngine","app","validationEngineOptions","on","stopPropagation","$","e","currentTarget","formatNumber","request","parentModuleName","closest","data","parentRecordId","moduleName","val","done","responseData","result","showPnotify","text","vtranslate","type","_super","registerEditQty"],"mappings":";;AAAA;AACA;AAEAA,sBACC,0BADD,EAEC;kBACkB,2BAAY;MACxBC,eAAe,IAAnB;MACIC,UAAU,KAAKC,OAAL,CAAaC,IAAb,CAAkB,4BAAlB,CAAd;UACQC,gBAAR,CAAyBC,IAAIC,uBAA7B;UACQC,EAAR,CAAW,QAAX,EAAqB,aAAK;KACvBC,eAAF;OACIP,UAAUQ,EAAEC,EAAEC,aAAJ,CAAd;WACQC,YAAR;OACI,CAACX,QAAQG,gBAAR,CAAyB,UAAzB,CAAL,EAA2C;iBAC7BS,OAAb,CAAqB;aACZb,aAAac,gBADD;aAEZb,QAAQc,OAAR,CAAgB,eAAhB,EAAiCC,IAAjC,CAAsC,IAAtC,CAFY;aAGZ,cAHY;WAId,gBAJc;iBAKRhB,aAAaiB,cALL;qBAMJjB,aAAakB,UANT;UAOfjB,QAAQkB,GAAR;KAPN,EAQGC,IARH,CAQQ,UAAUC,YAAV,EAAwB;SAC3BA,aAAaC,MAAjB,EAAyB;uBACPC,WAAjB,CAA6B,EAACC,MAAMnB,IAAIoB,UAAJ,CAAe,mBAAf,CAAP,EAA4CC,MAAM,SAAlD,EAA7B;;KAVF;;GALF;EALF;yBA0ByB,kCAAY;OAC9BC,MAAL;OACKC,eAAL;;CA9BH"}