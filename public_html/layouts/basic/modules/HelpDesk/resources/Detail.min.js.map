{"version":3,"file":"Detail.min.js","sources":["Detail.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nVtiger_Detail_Js(\n\t'HelpDesk_Detail_Js',\n\t{\n\t\tsetAccountsReference: function () {\n\t\t\tapp.showRecordsList(\n\t\t\t\t{\n\t\t\t\t\tmodule: 'Accounts',\n\t\t\t\t\tsrc_module: 'HelpDesk',\n\t\t\t\t\tsrc_record: app.getRecordId()\n\t\t\t\t},\n\t\t\t\t(modal, instance) => {\n\t\t\t\t\tinstance.setSelectEvent((responseData) => {\n\t\t\t\t\t\tVtiger_Detail_Js.getInstance()\n\t\t\t\t\t\t\t.saveFieldValues({\n\t\t\t\t\t\t\t\tfield: 'parent_id',\n\t\t\t\t\t\t\t\tvalue: responseData.id\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.done(function (response) {\n\t\t\t\t\t\t\t\tlocation.reload();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t},\n\t{\n\t\tregisterSetServiceContracts: function () {\n\t\t\tvar thisInstance = this;\n\t\t\t$('.selectServiceContracts').on('click', 'ul li', function (e) {\n\t\t\t\tvar element = jQuery(e.currentTarget);\n\t\t\t\tthisInstance\n\t\t\t\t\t.saveFieldValues({\n\t\t\t\t\t\tsetRelatedFields: true,\n\t\t\t\t\t\tfield: 'servicecontractsid',\n\t\t\t\t\t\tvalue: element.data('id')\n\t\t\t\t\t})\n\t\t\t\t\t.done(function (response) {\n\t\t\t\t\t\tlocation.reload();\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to get response from hierarchy\n\t\t * @param {array} params\n\t\t * @returns {jQuery}\n\t\t */\n\t\tgetHierarchyResponseData: function (params) {\n\t\t\tlet thisInstance = this,\n\t\t\t\taDeferred = $.Deferred();\n\t\t\tif (!$.isEmptyObject(thisInstance.hierarchyResponseCache)) {\n\t\t\t\taDeferred.resolve(thisInstance.hierarchyResponseCache);\n\t\t\t} else {\n\t\t\t\tAppConnector.request(params).then(function (data) {\n\t\t\t\t\tthisInstance.hierarchyResponseCache = data;\n\t\t\t\t\taDeferred.resolve(thisInstance.hierarchyResponseCache);\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/**\n\t\t * Function to display the hierarchy response data\n\t\t * @param {array} data\n\t\t */\n\t\tdisplayHierarchyResponseData: function (data) {\n\t\t\tconst thisInstance = this;\n\t\t\tlet callbackFunction = function () {\n\t\t\t\tapp.showScrollBar($('#hierarchyScroll'), {\n\t\t\t\t\theight: '300px',\n\t\t\t\t\trailVisible: true,\n\t\t\t\t\tsize: '6px'\n\t\t\t\t});\n\t\t\t};\n\t\t\tapp.showModalWindow(data, function (modal) {\n\t\t\t\tApp.Components.Scrollbar.xy($('#hierarchyScroll'));\n\t\t\t\tthisInstance.registerChangeStatusInHierarchy(modal);\n\t\t\t\tif (typeof callbackFunction == 'function' && $('#hierarchyScroll').height() > 300) {\n\t\t\t\t\tcallbackFunction();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Registers read count of hierarchy if it is possible\n\t\t */\n\t\tregisterHierarchyRecordCount: function () {\n\t\t\tlet hierarchyButton = $('.js-detail-hierarchy'),\n\t\t\t\tparams = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\taction: 'RelationAjax',\n\t\t\t\t\trecord: app.getRecordId(),\n\t\t\t\t\tmode: 'getHierarchyCount'\n\t\t\t\t};\n\t\t\tif (hierarchyButton.length) {\n\t\t\t\tAppConnector.request(params).then(function (response) {\n\t\t\t\t\tif (response.success) {\n\t\t\t\t\t\t$('.hierarchy .badge').html(response.result);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Shows hierarchy\n\t\t */\n\t\tregisterShowHierarchy: function () {\n\t\t\tlet thisInstance = this,\n\t\t\t\thierarchyButton = $('.detailViewTitle'),\n\t\t\t\tparams = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tview: 'Hierarchy',\n\t\t\t\t\trecord: app.getRecordId()\n\t\t\t\t};\n\t\t\thierarchyButton.on('click', '.js-detail-hierarchy', function () {\n\t\t\t\tlet progressIndicatorElement = $.progressIndicator({\n\t\t\t\t\tposition: 'html',\n\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\tenabled: true\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthisInstance.getHierarchyResponseData(params).then(function (data) {\n\t\t\t\t\tthisInstance.displayHierarchyResponseData(data);\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Function to register events on update hierarchy button\n\t\t *\n\t\t * @param {jQuery} container\n\t\t */\n\t\tregisterChangeStatusInHierarchy: function (container) {\n\t\t\tcontainer.find('.js-update-hierarchy').on('click', function () {\n\t\t\t\tlet params = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\taction: 'ChangeStatus',\n\t\t\t\t\trecordsType: container.find('.js-selected-records').val(),\n\t\t\t\t\tstatus: container.find('.js-status').val(),\n\t\t\t\t\trecord: app.getRecordId()\n\t\t\t\t};\n\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\tif (data.success) {\n\t\t\t\t\t\tapp.showNotify({ text: data.result.data, type: 'success' });\n\t\t\t\t\t}\n\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Show confirmation on event click\n\t\t * @param {jQuery} element\n\t\t * @param {string} picklistName\n\t\t */\n\t\tshowProgressConfirmation: function (element, picklistName) {\n\t\t\tlet picklistValue = $(element).data('picklistValue');\n\t\t\tapp.showConfirmModal({\n\t\t\t\ttitle: $(element).data('picklistLabel'),\n\t\t\t\ttext: app.vtranslate('JS_CHANGE_VALUE_CONFIRMATION'),\n\t\t\t\tconfirmedCallback: () => {\n\t\t\t\t\tconst progressIndicatorElement = $.progressIndicator();\n\t\t\t\t\tthis.saveFieldValues({\n\t\t\t\t\t\tvalue: picklistValue,\n\t\t\t\t\t\tfield: picklistName\n\t\t\t\t\t})\n\t\t\t\t\t\t.done((data) => {\n\t\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\tif (data.success) {\n\t\t\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.fail(function (error, err) {\n\t\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\tapp.errorLog(error, err);\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function save field values\n\t\t * @param {array} fieldDetailList\n\t\t */\n\t\tsaveFieldValues: function (fieldDetailList) {\n\t\t\tconst self = this;\n\t\t\tvar aDeferred = jQuery.Deferred();\n\t\t\tconst recordId = app.getRecordId();\n\t\t\tvar data = {};\n\t\t\tif (typeof fieldDetailList !== 'undefined') {\n\t\t\t\tdata = fieldDetailList;\n\t\t\t}\n\t\t\tconst saveData = (reload = true) => {\n\t\t\t\tdata['record'] = recordId;\n\t\t\t\tdata['module'] = app.getModuleName();\n\t\t\t\tdata['action'] = 'SaveAjax';\n\t\t\t\tvar params = {};\n\t\t\t\tparams.data = data;\n\t\t\t\tparams.async = false;\n\t\t\t\tparams.dataType = 'json';\n\t\t\t\tAppConnector.request(params).done(function (reponseData) {\n\t\t\t\t\taDeferred.resolve(reponseData);\n\t\t\t\t\tif (reload) {\n\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t};\n\t\t\tif (\n\t\t\t\tfieldDetailList.field === 'ticketstatus' &&\n\t\t\t\t(CONFIG.checkIfRecordHasTimeControl || CONFIG.checkIfRelatedTicketsAreClosed)\n\t\t\t) {\n\t\t\t\tAppConnector.request({\n\t\t\t\t\taction: 'CheckValidateToClose',\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\trecord: recordId,\n\t\t\t\t\tstatus: fieldDetailList.value\n\t\t\t\t}).done((response) => {\n\t\t\t\t\tif (response.result.hasTimeControl.result && response.result.relatedTicketsClosed.result) {\n\t\t\t\t\t\tsaveData(false);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlet addTimeControlCb = saveData;\n\t\t\t\t\t\tif (!response.result.relatedTicketsClosed.result) {\n\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\ttext: response.result.relatedTicketsClosed.message,\n\t\t\t\t\t\t\t\ttype: 'info'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\taddTimeControlCb = () => {\n\t\t\t\t\t\t\t\tthis.saveFieldValues(fieldDetailList);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!response.result.hasTimeControl.result) {\n\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\ttext: response.result.hasTimeControl.message,\n\t\t\t\t\t\t\t\ttype: 'info'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tself.addTimeControl(\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\trecordId: recordId,\n\t\t\t\t\t\t\t\t\turl: `index.php?module=OSSTimeControl&view=Edit&sourceModule=HelpDesk&sourceRecord=${recordId}&relationOperation=true&subprocess=${recordId}&subprocess=${recordId}`\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\taddTimeControlCb\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\taDeferred.resolve({ success: false });\n\t\t\t\t});\n\t\t\t\treturn aDeferred.promise();\n\t\t\t} else {\n\t\t\t\tsaveData(false);\n\t\t\t\treturn aDeferred.promise();\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Add time control when closed ticket\n\t\t * @param {array} params\n\t\t */\n\t\taddTimeControl(params, callback = () => {}) {\n\t\t\tlet aDeferred = jQuery.Deferred();\n\t\t\tlet referenceModuleName = 'OSSTimeControl';\n\t\t\tlet parentId = params.recordId;\n\t\t\tlet parentModule = 'HelpDesk';\n\t\t\tlet quickCreateParams = {};\n\t\t\tlet relatedParams = {};\n\t\t\tlet relatedField = 'subprocess';\n\t\t\tlet fullFormUrl = params.url;\n\t\t\trelatedParams[relatedField] = parentId;\n\t\t\tlet eliminatedKeys = new Array('view', 'module', 'mode', 'action');\n\n\t\t\tlet preQuickCreateSave = function (data) {\n\t\t\t\tlet index, queryParam, queryParamComponents;\n\t\t\t\tlet queryParameters = [];\n\n\t\t\t\tif (typeof fullFormUrl !== 'undefined' && fullFormUrl.indexOf('?') !== -1) {\n\t\t\t\t\tlet urlSplit = fullFormUrl.split('?');\n\t\t\t\t\tlet queryString = urlSplit[1];\n\t\t\t\t\tqueryParameters = queryString.split('&');\n\t\t\t\t\tfor (index = 0; index < queryParameters.length; index++) {\n\t\t\t\t\t\tqueryParam = queryParameters[index];\n\t\t\t\t\t\tqueryParamComponents = queryParam.split('=');\n\t\t\t\t\t\tif (queryParamComponents[0] == 'mode' && queryParamComponents[1] == 'Calendar') {\n\t\t\t\t\t\t\tdata.find('a[data-tab-name=\"Task\"]').trigger('click');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tjQuery('<input type=\"hidden\" name=\"sourceModule\" value=\"' + parentModule + '\" />').appendTo(data);\n\t\t\t\tjQuery('<input type=\"hidden\" name=\"sourceRecord\" value=\"' + parentId + '\" />').appendTo(data);\n\t\t\t\tjQuery('<input type=\"hidden\" name=\"relationOperation\" value=\"true\" />').appendTo(data);\n\n\t\t\t\tif (typeof relatedField !== 'undefined') {\n\t\t\t\t\tlet field = data.find('[name=\"' + relatedField + '\"]');\n\t\t\t\t\tif (field.length == 0) {\n\t\t\t\t\t\tjQuery('<input type=\"hidden\" name=\"' + relatedField + '\" value=\"' + parentId + '\" />').appendTo(data);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (index = 0; index < queryParameters.length; index++) {\n\t\t\t\t\tqueryParam = queryParameters[index];\n\t\t\t\t\tqueryParamComponents = queryParam.split('=');\n\t\t\t\t\tif (\n\t\t\t\t\t\tjQuery.inArray(queryParamComponents[0], eliminatedKeys) == '-1' &&\n\t\t\t\t\t\tdata.find('[name=\"' + queryParamComponents[0] + '\"]').length == 0\n\t\t\t\t\t) {\n\t\t\t\t\t\tjQuery(\n\t\t\t\t\t\t\t'<input type=\"hidden\" name=\"' + queryParamComponents[0] + '\" value=\"' + queryParamComponents[1] + '\" />'\n\t\t\t\t\t\t).appendTo(data);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\tif (typeof fullFormUrl !== 'undefined' && fullFormUrl.indexOf('?') !== -1) {\n\t\t\t\tlet urlSplit = fullFormUrl.split('?');\n\t\t\t\tlet queryString = urlSplit[1];\n\t\t\t\tlet queryParameters = queryString.split('&');\n\t\t\t\tfor (let index = 0; index < queryParameters.length; index++) {\n\t\t\t\t\tlet queryParam = queryParameters[index];\n\t\t\t\t\tlet queryParamComponents = queryParam.split('=');\n\t\t\t\t\tif (jQuery.inArray(queryParamComponents[0], eliminatedKeys) == '-1') {\n\t\t\t\t\t\trelatedParams[queryParamComponents[0]] = queryParamComponents[1];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tquickCreateParams['data'] = relatedParams;\n\t\t\tquickCreateParams['callbackFunction'] = callback;\n\t\t\tquickCreateParams['callbackPostShown'] = preQuickCreateSave;\n\t\t\tquickCreateParams['noCache'] = true;\n\t\t\tApp.Components.QuickCreate.createRecord(referenceModuleName, quickCreateParams);\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\tthis._super();\n\t\t\tthis.registerSetServiceContracts();\n\t\t\tthis.registerHierarchyRecordCount();\n\t\t\tthis.registerShowHierarchy();\n\t\t}\n\t}\n);\n"],"names":["Vtiger_Detail_Js","setAccountsReference","app","showRecordsList","module","src_module","src_record","getRecordId","modal","instance","setSelectEvent","responseData","getInstance","saveFieldValues","field","value","id","done","location","reload","registerSetServiceContracts","thisInstance","$","on","e","element","jQuery","currentTarget","setRelatedFields","data","getHierarchyResponseData","params","aDeferred","Deferred","isEmptyObject","hierarchyResponseCache","AppConnector","request","then","resolve","promise","displayHierarchyResponseData","callbackFunction","showScrollBar","height","railVisible","size","showModalWindow","App","Components","Scrollbar","xy","registerChangeStatusInHierarchy","registerHierarchyRecordCount","hierarchyButton","getModuleName","action","record","mode","length","response","success","html","result","registerShowHierarchy","view","progressIndicatorElement","progressIndicator","position","blockInfo","enabled","container","find","recordsType","val","status","showNotify","text","type","hideModalWindow","showProgressConfirmation","picklistName","picklistValue","showConfirmModal","title","vtranslate","confirmedCallback","window","fail","error","err","errorLog","fieldDetailList","self","recordId","saveData","async","dataType","reponseData","CONFIG","checkIfRecordHasTimeControl","checkIfRelatedTicketsAreClosed","hasTimeControl","relatedTicketsClosed","addTimeControlCb","message","addTimeControl","url","callback","parentId","quickCreateParams","relatedParams","relatedField","fullFormUrl","eliminatedKeys","Array","preQuickCreateSave","index","queryParam","queryParamComponents","queryParameters","indexOf","urlSplit","split","queryString","trigger","appendTo","inArray","QuickCreate","createRecord","registerEvents","_super"],"mappings":";;AAAA,kKACA,YAEAA,CAAAA,gBAAgB,CACf,oBADe,CAEf,CACCC,oBAAoB,CAAE,SAAA,oBAAA,EAAY,CACjCC,GAAG,CAACC,eAAJ,CACC,CACCC,MAAM,CAAE,UADT,CAECC,UAAU,CAAE,UAFb,CAGCC,UAAU,CAAEJ,GAAG,CAACK,WAAJ,EAHb,CADD,CAMC,SAACC,KAAD,CAAQC,QAAR,CAAqB,CACpBA,QAAQ,CAACC,cAAT,CAAwB,SAACC,YAAD,CAAkB,CACzCX,gBAAgB,CAACY,WAAjB,GACEC,eADF,CACkB,CAChBC,KAAK,CAAE,WADS,CAEhBC,KAAK,CAAEJ,YAAY,CAACK,EAFJ,CADlB,CAAA,CAKEC,IALF,CAKO,UAAoB,CACzBC,QAAQ,CAACC,MAAT,GACA,CAPF,EAQA,CATD,EAUA,CAjBF,EAmBA,CArBF,CAFe,CAyBf,CACCC,2BAA2B,CAAE,SAAY,2BAAA,EAAA,CACxC,IAAIC,YAAY,CAAG,IAAnB,CACAC,CAAC,CAAC,yBAAD,CAAD,CAA6BC,EAA7B,CAAgC,OAAhC,CAAyC,OAAzC,CAAkD,SAAUC,CAAV,CAAa,CAC9D,IAAIC,OAAO,CAAGC,MAAM,CAACF,CAAC,CAACG,aAAH,CAApB,CACAN,YAAY,CACVR,eADF,CACkB,CAChBe,gBAAgB,CAAA,CAAA,CADA,CAEhBd,KAAK,CAAE,oBAFS,CAGhBC,KAAK,CAAEU,OAAO,CAACI,IAAR,CAAa,IAAb,CAHS,CADlB,CAAA,CAMEZ,IANF,CAMO,UAAoB,CACzBC,QAAQ,CAACC,MAAT,GACA,CARF,EASA,CAXD,EAYA,CAfF;AAiBD;AACA;AACA;AACA,KACEW,wBAAwB,CAAE,SAAUC,wBAAAA,CAAAA,MAAV,CAAkB,CAC3C,IAAIV,YAAY,CAAG,IAAnB,CACCW,SAAS,CAAGV,CAAC,CAACW,QAAF,EADb,CAUA,OARKX,CAAC,CAACY,aAAF,CAAgBb,YAAY,CAACc,sBAA7B,CAQL,CALCC,YAAY,CAACC,OAAb,CAAqBN,MAArB,CAAA,CAA6BO,IAA7B,CAAkC,SAAUT,IAAV,CAAgB,CACjDR,YAAY,CAACc,sBAAb,CAAsCN,IADW,CAEjDG,SAAS,CAACO,OAAV,CAAkBlB,YAAY,CAACc,sBAA/B,EACA,CAHD,CAKD,CAPCH,SAAS,CAACO,OAAV,CAAkBlB,YAAY,CAACc,sBAA/B,CAOD,CAAOH,SAAS,CAACQ,OAAV,EACP,CAjCF;AAmCD;AACA;AACA,KACEC,4BAA4B,CAAE,SAAA,4BAAA,CAAUZ,IAAV,CAAgB,CAAA,IACvCR,YAAY,CAAG,IADwB,CAEzCqB,gBAAgB,CAAG,UAAY,CAClCxC,GAAG,CAACyC,aAAJ,CAAkBrB,CAAC,CAAC,kBAAD,CAAnB,CAAyC,CACxCsB,MAAM,CAAE,OADgC,CAExCC,WAAW,GAF6B,CAGxCC,IAAI,CAAE,KAHkC,CAAzC,EAKA,CAR4C,CAS7C5C,GAAG,CAAC6C,eAAJ,CAAoBlB,IAApB,CAA0B,SAAUrB,KAAV,CAAiB,CAC1CwC,GAAG,CAACC,UAAJ,CAAeC,SAAf,CAAyBC,EAAzB,CAA4B7B,CAAC,CAAC,kBAAD,CAA7B,CAD0C,CAE1CD,YAAY,CAAC+B,+BAAb,CAA6C5C,KAA7C,CAF0C,CAGX,UAA3B,SAAOkC,gBAAP,EAA0E,GAAjC,CAAApB,CAAC,CAAC,kBAAD,CAAD,CAAsBsB,MAAtB,EAHH,EAIzCF,gBAAgB,GAEjB,CAND,EAOA,CAtDF;AAwDD;AACA,KACEW,4BAA4B,CAAE,SAAY,4BAAA,EAAA,CACzC,IAAIC,eAAe,CAAGhC,CAAC,CAAC,sBAAD,CAAvB,CACCS,MAAM,CAAG,CACR3B,MAAM,CAAEF,GAAG,CAACqD,aAAJ,EADA,CAERC,MAAM,CAAE,cAFA,CAGRC,MAAM,CAAEvD,GAAG,CAACK,WAAJ,EAHA,CAIRmD,IAAI,CAAE,mBAJE,CADV,CAOIJ,eAAe,CAACK,MARqB,EASxCvB,YAAY,CAACC,OAAb,CAAqBN,MAArB,CAA6BO,CAAAA,IAA7B,CAAkC,SAAUsB,QAAV,CAAoB,CACjDA,QAAQ,CAACC,OADwC,EAEpDvC,CAAC,CAAC,mBAAD,CAAD,CAAuBwC,IAAvB,CAA4BF,QAAQ,CAACG,MAArC,EAED,CAJD,EAMD,CAzEF;AA2ED;AACA,KACEC,qBAAqB,CAAE,SAAY,qBAAA,EAAA,CAClC,IAAI3C,YAAY,CAAG,IAAnB,CACCiC,eAAe,CAAGhC,CAAC,CAAC,kBAAD,CADpB,CAECS,MAAM,CAAG,CACR3B,MAAM,CAAEF,GAAG,CAACqD,aAAJ,EADA,CAERU,IAAI,CAAE,WAFE,CAGRR,MAAM,CAAEvD,GAAG,CAACK,WAAJ,EAHA,CAFV,CAOA+C,eAAe,CAAC/B,EAAhB,CAAmB,OAAnB,CAA4B,sBAA5B,CAAoD,UAAY,CAC/D,IAAI2C,wBAAwB,CAAG5C,CAAC,CAAC6C,iBAAF,CAAoB,CAClDC,QAAQ,CAAE,MADwC,CAElDC,SAAS,CAAE,CACVC,OAAO,CADG,CAAA,CAAA,CAFuC,CAApB,CAA/B,CAMAjD,YAAY,CAACS,wBAAb,CAAsCC,MAAtC,CAAA,CAA8CO,IAA9C,CAAmD,SAAUT,IAAV,CAAgB,CAClER,YAAY,CAACoB,4BAAb,CAA0CZ,IAA1C,CADkE,CAElEqC,wBAAwB,CAACC,iBAAzB,CAA2C,CAAET,IAAI,CAAE,MAAR,CAA3C,EACA,CAHD,EAIA,CAXD,EAYA,CAjGF;AAoGD;AACA;AACA;AACA,KACEN,+BAA+B,CAAE,SAAA,+BAAA,CAAUmB,SAAV,CAAqB,CACrDA,SAAS,CAACC,IAAV,CAAe,sBAAf,CAAA,CAAuCjD,EAAvC,CAA0C,OAA1C,CAAmD,UAAY,CAC9D,IAAIQ,MAAM,CAAG,CACZ3B,MAAM,CAAEF,GAAG,CAACqD,aAAJ,EADI,CAEZC,MAAM,CAAE,cAFI,CAGZiB,WAAW,CAAEF,SAAS,CAACC,IAAV,CAAe,sBAAf,CAAuCE,CAAAA,GAAvC,EAHD,CAIZC,MAAM,CAAEJ,SAAS,CAACC,IAAV,CAAe,YAAf,CAA6BE,CAAAA,GAA7B,EAJI,CAKZjB,MAAM,CAAEvD,GAAG,CAACK,WAAJ,EALI,CAAb,CAOA6B,YAAY,CAACC,OAAb,CAAqBN,MAArB,CAA6Bd,CAAAA,IAA7B,CAAkC,SAAUY,IAAV,CAAgB,CAC7CA,IAAI,CAACgC,OADwC,EAEhD3D,GAAG,CAAC0E,UAAJ,CAAe,CAAEC,IAAI,CAAEhD,IAAI,CAACkC,MAAL,CAAYlC,IAApB,CAA0BiD,IAAI,CAAE,SAAhC,CAAf,CAFgD,CAIjD5E,GAAG,CAAC6E,eAAJ,GACA,CALD,EAMA,CAdD,EAeA,CAxHF;AA0HD;AACA;AACA;AACA,KACEC,wBAAwB,CAAE,SAAUvD,wBAAAA,CAAAA,OAAV,CAAmBwD,YAAnB,CAAiC,CAAA,IAAA,KAAA,CAAA,IAAA,CACtDC,aAAa,CAAG5D,CAAC,CAACG,OAAD,CAAD,CAAWI,IAAX,CAAgB,eAAhB,CADsC,CAE1D3B,GAAG,CAACiF,gBAAJ,CAAqB,CACpBC,KAAK,CAAE9D,CAAC,CAACG,OAAD,CAAD,CAAWI,IAAX,CAAgB,eAAhB,CADa,CAEpBgD,IAAI,CAAE3E,GAAG,CAACmF,UAAJ,CAAe,8BAAf,CAFc,CAGpBC,iBAAiB,CAAE,SAAA,iBAAA,EAAM,CACxB,IAAMpB,wBAAwB,CAAG5C,CAAC,CAAC6C,iBAAF,EAAjC,CACA,KAAI,CAACtD,eAAL,CAAqB,CACpBE,KAAK,CAAEmE,aADa,CAEpBpE,KAAK,CAAEmE,YAFa,CAArB,CAAA,CAIEhE,IAJF,CAIO,SAACY,IAAD,CAAU,CACfqC,wBAAwB,CAACC,iBAAzB,CAA2C,CAAET,IAAI,CAAE,MAAR,CAA3C,CADe,CAEX7B,IAAI,CAACgC,OAFM,EAGd0B,MAAM,CAACrE,QAAP,CAAgBC,MAAhB,GAED,CATF,CAAA,CAUEqE,IAVF,CAUO,SAAUC,KAAV,CAAiBC,GAAjB,CAAsB,CAC3BxB,wBAAwB,CAACC,iBAAzB,CAA2C,CAAET,IAAI,CAAE,MAAR,CAA3C,CAD2B,CAE3BxD,GAAG,CAACyF,QAAJ,CAAaF,KAAb,CAAoBC,GAApB,EACA,CAbF,EAcA,CAnBmB,CAArB,EAqBA,CArJF;AAuJD;AACA;AACA,KACE7E,eAAe,CAAE,SAAU+E,eAAAA,CAAAA,eAAV,CAA2B,CACrCC,IAAAA,MAAAA,CAAAA,IAAAA,CAAAA,IAAI,CAAG,IAD8B,CAEvC7D,SAAS,CAAGN,MAAM,CAACO,QAAP,EAF2B,CAGrC6D,QAAQ,CAAG5F,GAAG,CAACK,WAAJ,EAH0B,CAIvCsB,IAAI,CAAG,EAJgC,CAKZ,WAA3B,SAAO+D,eALgC,GAM1C/D,IAAI,CAAG+D,eANmC,CAAA,CAQ3C,IAAMG,QAAQ,CAAG,UAAmB,CAAlB5E,IAAAA,MAAkB,CACnCU,EAAAA,CAAAA,CAAAA,SAAAA,CAAAA,MAAAA,EAAAA,SAAAA,CAAAA,CAAAA,CAAAA,GAAAA,KAAAA,CAAAA,CAAAA,EAAAA,SAAAA,CAAAA,CAAAA,CAAAA,CAAAA,IAAI,CAAJ,MAAA,CAAiBiE,QADkB,CAEnCjE,IAAI,CAAJ,MAAA,CAAiB3B,GAAG,CAACqD,aAAJ,EAFkB,CAGnC1B,IAAI,CAAJ,MAAA,CAAiB,UAHkB,CAInC,IAAIE,MAAM,CAAG,EAAb,CACAA,MAAM,CAACF,IAAP,CAAcA,IALqB,CAMnCE,MAAM,CAACiE,KAAP,CANmC,CAAA,CAAA,CAOnCjE,MAAM,CAACkE,QAAP,CAAkB,MAPiB,CAQnC7D,YAAY,CAACC,OAAb,CAAqBN,MAArB,CAAA,CAA6Bd,IAA7B,CAAkC,SAAUiF,WAAV,CAAuB,CACxDlE,SAAS,CAACO,OAAV,CAAkB2D,WAAlB,CADwD,CAEpD/E,MAFoD,EAGvDoE,MAAM,CAACrE,QAAP,CAAgBC,MAAhB,GAED,CALD,EAMA,CAdD,CAR2C,OAwBhB,cAA1B,GAAAyE,eAAe,CAAC9E,KAAhB,GACCqF,MAAM,CAACC,2BAAP,EAAsCD,MAAM,CAACE,8BAD9C,CAxB0C,EA2B1CjE,YAAY,CAACC,OAAb,CAAqB,CACpBmB,MAAM,CAAE,sBADY,CAEpBpD,MAAM,CAAEF,GAAG,CAACqD,aAAJ,EAFY,CAGpBE,MAAM,CAAEqC,QAHY,CAIpBnB,MAAM,CAAEiB,eAAe,CAAC7E,KAJJ,CAArB,CAKGE,CAAAA,IALH,CAKQ,SAAC2C,QAAD,CAAc,CACrB,GAAIA,QAAQ,CAACG,MAAT,CAAgBuC,cAAhB,CAA+BvC,MAA/B,EAAyCH,QAAQ,CAACG,MAAT,CAAgBwC,oBAAhB,CAAqCxC,MAAlF,CACCgC,QAAQ,CADT,CAAA,CAAA,CAAA,CAAA,KAEO,CACN,IAAIS,gBAAgB,CAAGT,QAAvB,CACKnC,QAAQ,CAACG,MAAT,CAAgBwC,oBAAhB,CAAqCxC,MAFpC,GAGL7D,GAAG,CAAC0E,UAAJ,CAAe,CACdC,IAAI,CAAEjB,QAAQ,CAACG,MAAT,CAAgBwC,oBAAhB,CAAqCE,OAD7B,CAEd3B,IAAI,CAAE,MAFQ,CAAf,CAHK,CAOL0B,gBAAgB,CAAG,UAAM,CACxB,MAAI,CAAC3F,eAAL,CAAqB+E,eAArB,EACA,CATI,CAAA,CAWDhC,QAAQ,CAACG,MAAT,CAAgBuC,cAAhB,CAA+BvC,MAX9B,GAYL7D,GAAG,CAAC0E,UAAJ,CAAe,CACdC,IAAI,CAAEjB,QAAQ,CAACG,MAAT,CAAgBuC,cAAhB,CAA+BG,OADvB,CAEd3B,IAAI,CAAE,MAFQ,CAAf,CAZK,CAgBLe,IAAI,CAACa,cAAL,CACC,CACCZ,QAAQ,CAAEA,QADX,CAECa,GAAG,CAAA,+EAAA,CAAA,MAAA,CAAkFb,QAAlF,CAAA,qCAAA,CAAA,CAAA,MAAA,CAAgIA,QAAhI,CAAuJA,cAAAA,CAAAA,CAAAA,MAAAA,CAAAA,QAAvJ,CAFJ,CADD,CAKCU,gBALD,CAhBK,EAwBN,CACDxE,SAAS,CAACO,OAAV,CAAkB,CAAEsB,OAAO,CAAT,CAAA,CAAA,CAAlB,EACA,CAlCD,CA3B0C,CA8DnC7B,SAAS,CAACQ,OAAV,EA9DmC,GAgE1CuD,QAAQ,CAhEkC,CAAA,CAAA,CAAA,CAiEnC/D,SAAS,CAACQ,OAAV,EAjEmC,CAmE3C,CA7NF;AA+ND;AACA;AACA,KACEkE,cAlOD,CAkOgB3E,SAAAA,cAAAA,CAAAA,MAlOhB,CAkO6C,CAAA,IAArB6E,QAAqB,CAAV,CAAA,CAAA,SAAA,CAAA,MAAA,EAAA,KAAA,CAAA,GAAA,SAAA,CAAA,CAAA,CAAA,CAAA,SAAA,CAAA,CAAA,CAAA,CAAA,UAAM,EAAI,CACvC5E,SAAS,CAAGN,MAAM,CAACO,QAAP,EAD2B,CAGvC4E,QAAQ,CAAG9E,MAAM,CAAC+D,QAHqB,CAKvCgB,iBAAiB,CAAG,EALmB,CAMvCC,aAAa,CAAG,EANuB,CAOvCC,YAAY,CAAG,YAPwB,CAQvCC,WAAW,CAAGlF,MAAM,CAAC4E,GARkB,CAS3CI,aAAa,CAACC,YAAD,CAAb,CAA8BH,QATa,CAUvCK,IAAAA,cAAc,CAAG,IAAIC,KAAJ,CAAU,MAAV,CAAkB,QAAlB,CAA4B,MAA5B,CAAoC,QAApC,CAVsB,CAYvCC,kBAAkB,CAAG,SAAUvF,IAAV,CAAgB,CACpCwF,IAAAA,KADoC,CAC7BC,UAD6B,CACjBC,oBADiB,CAEpCC,eAAe,CAAG,EAFkB,CAIxC,GAA2B,WAAvB,EAAOP,OAAAA,WAAP,EAAmE,CAAC,CAA9B,GAAAA,WAAW,CAACQ,OAAZ,CAAoB,GAApB,CAA1C,CAA2E,CACtEC,IAAAA,QAAQ,CAAGT,WAAW,CAACU,KAAZ,CAAkB,GAAlB,CAD2D,CAEtEC,WAAW,CAAGF,QAAQ,CAAC,CAAD,CAFgD,CAI1E,IADAF,eAAe,CAAGI,WAAW,CAACD,KAAZ,CAAkB,GAAlB,CAClB,CAAKN,KAAK,CAAG,CAAb,CAAgBA,KAAK,CAAGG,eAAe,CAAC7D,MAAxC,CAAgD0D,KAAK,EAArD,CACCC,UAAU,CAAGE,eAAe,CAACH,KAAD,CAD7B,CAECE,oBAAoB,CAAGD,UAAU,CAACK,KAAX,CAAiB,GAAjB,CAFxB,CAGgC,MAA3B,EAAAJ,oBAAoB,CAAC,CAAD,CAApB,EAAgE,UAA3B,EAAAA,oBAAoB,CAAC,CAAD,CAH9D,EAIE1F,IAAI,CAAC2C,IAAL,CAAU,2BAAV,CAAqCqD,CAAAA,OAArC,CAA6C,OAA7C,EAGF,CAKD,GAJAnG,MAAM,CAAC,uDAAA,CAxBW,UAwBX,CAAoE,OAArE,CAAN,CAAmFoG,QAAnF,CAA4FjG,IAA5F,CAIA,CAHAH,MAAM,CAAC,uDAAqDmF,CAAAA,QAArD,CAAgE,OAAjE,CAAN,CAA+EiB,QAA/E,CAAwFjG,IAAxF,CAGA,CAFAH,MAAM,CAAC,qEAAD,CAAN,CAAwEoG,QAAxE,CAAiFjG,IAAjF,CAEA,CAA4B,WAAxB,EAAOmF,OAAAA,YAAX,CAAyC,CACxC,IAAIlG,KAAK,CAAGe,IAAI,CAAC2C,IAAL,CAAU,UAAA,CAAYwC,YAAZ,CAA2B,KAArC,CAAZ,CACoB,CAAhB,EAAAlG,KAAK,CAAC6C,MAF8B,EAGvCjC,MAAM,CAAC,gCAAA,CAAgCsF,YAAhC,CAA+C,aAA/C,CAA6DH,QAA7D,CAAwE,OAAzE,CAAN,CAAuFiB,QAAvF,CAAgGjG,IAAhG,EAED,CACD,IAAKwF,KAAK,CAAG,CAAb,CAAgBA,KAAK,CAAGG,eAAe,CAAC7D,MAAxC,CAAgD0D,KAAK,EAArD,CACCC,UAAU,CAAGE,eAAe,CAACH,KAAD,CAD7B,CAECE,oBAAoB,CAAGD,UAAU,CAACK,KAAX,CAAiB,GAAjB,CAFxB,CAI6D,IAA3D,EAAAjG,MAAM,CAACqG,OAAP,CAAeR,oBAAoB,CAAC,CAAD,CAAnC,CAAwCL,cAAxC,CACgE,EAAA,CAAhE,EAAArF,IAAI,CAAC2C,IAAL,CAAU,UAAA,CAAY+C,oBAAoB,CAAC,CAAD,CAAhC,CAAsC,KAAhD,CAAsD5D,CAAAA,MALxD,EAOEjC,MAAM,CACL,gCAAA,CAAgC6F,oBAAoB,CAAC,CAAD,CAApD,CAA0D,aAA1D,CAAwEA,oBAAoB,CAAC,CAAD,CAA5F,CAAkG,OAD7F,CAAN,CAEEO,QAFF,CAEWjG,IAFX,EAKF,CAlD0C,CAmD3C,GAA2B,WAAvB,EAAA,OAAOoF,WAAP,EAAmE,CAAC,CAA9B,GAAAA,WAAW,CAACQ,OAAZ,CAAoB,GAApB,CAA1C,CAIC,IAAA,IAHIC,QAAQ,CAAGT,WAAW,CAACU,KAAZ,CAAkB,GAAlB,CAGf,CAFIC,WAAW,CAAGF,QAAQ,CAAC,CAAD,CAE1B,CADIF,eAAe,CAAGI,WAAW,CAACD,KAAZ,CAAkB,GAAlB,CACtB,CAASN,KAAK,CAAG,CAAjB,CAAoBA,KAAK,CAAGG,eAAe,CAAC7D,MAA5C,CAAoD0D,KAAK,EAAzD,CAA6D,CAAA,IACxDC,UAAU,CAAGE,eAAe,CAACH,KAAD,CAD4B,CAExDE,oBAAoB,CAAGD,UAAU,CAACK,KAAX,CAAiB,GAAjB,CAFiC,CAGG,IAA3D,EAAAjG,MAAM,CAACqG,OAAP,CAAeR,oBAAoB,CAAC,CAAD,CAAnC,CAAwCL,cAAxC,CAHwD,GAI3DH,aAAa,CAACQ,oBAAoB,CAAC,CAAD,CAArB,CAAb,CAAyCA,oBAAoB,CAAC,CAAD,CAJF,EAM5D,CAQF,OALAT,iBAAiB,CAAjB,IAAA,CAA4BC,aAK5B,CAJAD,iBAAiB,CAAA,gBAAjB,CAAwCF,QAIxC,CAHAE,iBAAiB,CAAjB,iBAAA,CAAyCM,kBAGzC,CAFAN,iBAAiB,CAAA,OAAjB,CAEA,CAAA,CAAA,CADA9D,GAAG,CAACC,UAAJ,CAAe+E,WAAf,CAA2BC,YAA3B,CAlE0B,gBAkE1B,CAA6DnB,iBAA7D,CACA,CAAO9E,SAAS,CAACQ,OAAV,EACP,CAxSF,CAySC0F,cAAc,CAAE,SAAA,cAAA,EAAY,CAC3B,IAAA,CAAKC,MAAL,EAD2B,CAE3B,IAAA,CAAK/G,2BAAL,EAF2B,CAG3B,IAAA,CAAKiC,4BAAL,EAH2B,CAI3B,IAAA,CAAKW,qBAAL,GACA,CA9SF,CAzBe;;"}