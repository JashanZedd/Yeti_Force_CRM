{"version":3,"file":"Detail.min.js","sources":["Detail.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nVtiger_Detail_Js(\n\t'HelpDesk_Detail_Js',\n\t{\n\t\tsetAccountsReference: function () {\n\t\t\tapp.showRecordsList(\n\t\t\t\t{\n\t\t\t\t\tmodule: 'Accounts',\n\t\t\t\t\tsrc_module: 'HelpDesk',\n\t\t\t\t\tsrc_record: app.getRecordId()\n\t\t\t\t},\n\t\t\t\t(_modal, instance) => {\n\t\t\t\t\tinstance.setSelectEvent((responseData) => {\n\t\t\t\t\t\tVtiger_Detail_Js.getInstance()\n\t\t\t\t\t\t\t.saveFieldValues({\n\t\t\t\t\t\t\t\tfield: 'parent_id',\n\t\t\t\t\t\t\t\tvalue: responseData.id\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.done(function () {\n\t\t\t\t\t\t\t\tlocation.reload();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t},\n\t{\n\t\tregisterSetServiceContracts: function () {\n\t\t\tvar thisInstance = this;\n\t\t\t$('.selectServiceContracts').on('click', 'ul li', function (e) {\n\t\t\t\tvar element = jQuery(e.currentTarget);\n\t\t\t\tthisInstance\n\t\t\t\t\t.saveFieldValues({\n\t\t\t\t\t\tsetRelatedFields: true,\n\t\t\t\t\t\tfield: 'servicecontractsid',\n\t\t\t\t\t\tvalue: element.data('id')\n\t\t\t\t\t})\n\t\t\t\t\t.done(function (response) {\n\t\t\t\t\t\tlocation.reload();\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to get response from hierarchy\n\t\t * @param {array} params\n\t\t * @returns {Promise}\n\t\t */\n\t\tgetHierarchyResponseData: function (params) {\n\t\t\tlet thisInstance = this,\n\t\t\t\taDeferred = $.Deferred();\n\t\t\tif (!$.isEmptyObject(thisInstance.hierarchyResponseCache)) {\n\t\t\t\taDeferred.resolve(thisInstance.hierarchyResponseCache);\n\t\t\t} else {\n\t\t\t\tAppConnector.request(params).then(function (data) {\n\t\t\t\t\tthisInstance.hierarchyResponseCache = data;\n\t\t\t\t\taDeferred.resolve(thisInstance.hierarchyResponseCache);\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/**\n\t\t * Function to display the hierarchy response data\n\t\t * @param {array} data\n\t\t */\n\t\tdisplayHierarchyResponseData: function (data) {\n\t\t\tconst thisInstance = this;\n\t\t\tlet callbackFunction = function () {\n\t\t\t\tapp.showScrollBar($('#hierarchyScroll'), {\n\t\t\t\t\theight: '300px',\n\t\t\t\t\trailVisible: true,\n\t\t\t\t\tsize: '6px'\n\t\t\t\t});\n\t\t\t};\n\t\t\tapp.showModalWindow(data, function (modal) {\n\t\t\t\tApp.Components.Scrollbar.xy($('#hierarchyScroll'));\n\t\t\t\tthisInstance.registerChangeStatusInHierarchy(modal);\n\t\t\t\tif (typeof callbackFunction == 'function' && $('#hierarchyScroll').height() > 300) {\n\t\t\t\t\tcallbackFunction();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Registers read count of hierarchy if it is possible\n\t\t */\n\t\tregisterHierarchyRecordCount: function () {\n\t\t\tlet hierarchyButton = $('.js-detail-hierarchy'),\n\t\t\t\tparams = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\taction: 'RelationAjax',\n\t\t\t\t\trecord: app.getRecordId(),\n\t\t\t\t\tmode: 'getHierarchyCount'\n\t\t\t\t};\n\t\t\tif (hierarchyButton.length) {\n\t\t\t\tAppConnector.request(params).then(function (response) {\n\t\t\t\t\tif (response.success) {\n\t\t\t\t\t\t$('.hierarchy .badge').html(response.result);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Shows hierarchy\n\t\t */\n\t\tregisterShowHierarchy: function () {\n\t\t\tlet thisInstance = this,\n\t\t\t\thierarchyButton = $('.detailViewTitle'),\n\t\t\t\tparams = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tview: 'Hierarchy',\n\t\t\t\t\trecord: app.getRecordId()\n\t\t\t\t};\n\t\t\thierarchyButton.on('click', '.js-detail-hierarchy', function () {\n\t\t\t\tlet progressIndicatorElement = $.progressIndicator({\n\t\t\t\t\tposition: 'html',\n\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\tenabled: true\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthisInstance.getHierarchyResponseData(params).then(function (data) {\n\t\t\t\t\tthisInstance.displayHierarchyResponseData(data);\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Function to register events on update hierarchy button\n\t\t *\n\t\t * @param {jQuery} container\n\t\t */\n\t\tregisterChangeStatusInHierarchy: function (container) {\n\t\t\tcontainer.find('.js-update-hierarchy').on('click', function () {\n\t\t\t\tlet params = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\taction: 'ChangeStatus',\n\t\t\t\t\trecordsType: container.find('.js-selected-records').val(),\n\t\t\t\t\tstatus: container.find('.js-status').val(),\n\t\t\t\t\trecord: app.getRecordId()\n\t\t\t\t};\n\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\tif (data.success) {\n\t\t\t\t\t\tapp.showNotify({ text: data.result.data, type: 'success' });\n\t\t\t\t\t}\n\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Show confirmation on event click\n\t\t * @param {jQuery} element\n\t\t * @param {string} picklistName\n\t\t */\n\t\tshowProgressConfirmation: function (element, picklistName) {\n\t\t\tlet picklistValue = $(element).data('picklistValue');\n\t\t\tapp.showConfirmModal({\n\t\t\t\ttitle: $(element).data('picklistLabel'),\n\t\t\t\ttext: app.vtranslate('JS_CHANGE_VALUE_CONFIRMATION'),\n\t\t\t\tconfirmedCallback: () => {\n\t\t\t\t\tconst progressIndicatorElement = $.progressIndicator();\n\t\t\t\t\tthis.saveFieldValues({\n\t\t\t\t\t\tvalue: picklistValue,\n\t\t\t\t\t\tfield: picklistName\n\t\t\t\t\t})\n\t\t\t\t\t\t.done((data) => {\n\t\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\tif (data.success) {\n\t\t\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.fail(function (error, err) {\n\t\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\tapp.errorLog(error, err);\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function save field values\n\t\t * @param {array} fieldDetailList\n\t\t * @returns {Promise}\n\t\t */\n\t\tsaveFieldValues: function (fieldDetailList) {\n\t\t\tconst self = this;\n\t\t\tvar aDeferred = jQuery.Deferred();\n\t\t\tconst recordId = app.getRecordId();\n\t\t\tvar data = {};\n\t\t\tif (typeof fieldDetailList !== 'undefined') {\n\t\t\t\tdata = fieldDetailList;\n\t\t\t}\n\t\t\tconst saveData = (reload = true) => {\n\t\t\t\tdata['record'] = recordId;\n\t\t\t\tdata['module'] = app.getModuleName();\n\t\t\t\tdata['action'] = 'SaveAjax';\n\t\t\t\tvar params = {};\n\t\t\t\tparams.data = data;\n\t\t\t\tparams.async = false;\n\t\t\t\tparams.dataType = 'json';\n\t\t\t\tAppConnector.request(params).done(function (reponseData) {\n\t\t\t\t\taDeferred.resolve(reponseData);\n\t\t\t\t\tif (reload) {\n\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t};\n\t\t\tif (\n\t\t\t\tfieldDetailList.field === 'ticketstatus' &&\n\t\t\t\t(CONFIG.checkIfRecordHasTimeControl || CONFIG.checkIfRelatedTicketsAreClosed)\n\t\t\t) {\n\t\t\t\tAppConnector.request({\n\t\t\t\t\taction: 'CheckValidateToClose',\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\trecord: recordId,\n\t\t\t\t\tstatus: fieldDetailList.value\n\t\t\t\t}).done((response) => {\n\t\t\t\t\tif (response.result.hasTimeControl.result && response.result.relatedTicketsClosed.result) {\n\t\t\t\t\t\tsaveData(false);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlet addTimeControlCb = saveData;\n\t\t\t\t\t\tif (!response.result.relatedTicketsClosed.result) {\n\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\ttext: response.result.relatedTicketsClosed.message,\n\t\t\t\t\t\t\t\ttype: 'info'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\taddTimeControlCb = () => {\n\t\t\t\t\t\t\t\tthis.saveFieldValues(fieldDetailList);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!response.result.hasTimeControl.result) {\n\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\ttext: response.result.hasTimeControl.message,\n\t\t\t\t\t\t\t\ttype: 'info'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tself.addTimeControl(\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\trecordId: recordId,\n\t\t\t\t\t\t\t\t\turl: `index.php?module=OSSTimeControl&view=Edit&sourceModule=HelpDesk&sourceRecord=${recordId}&relationOperation=true&subprocess=${recordId}&subprocess=${recordId}`\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\taddTimeControlCb\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\taDeferred.resolve({ success: false });\n\t\t\t\t});\n\t\t\t\treturn aDeferred.promise();\n\t\t\t} else {\n\t\t\t\tsaveData(false);\n\t\t\t\treturn aDeferred.promise();\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Add time control when closed ticket\n\t\t * @param {array} params\n\t\t * @returns {Promise}\n\t\t */\n\t\taddTimeControl(params, callback = () => {}) {\n\t\t\tlet aDeferred = jQuery.Deferred();\n\t\t\tlet referenceModuleName = 'OSSTimeControl';\n\t\t\tlet parentId = params.recordId;\n\t\t\tlet parentModule = 'HelpDesk';\n\t\t\tlet quickCreateParams = {};\n\t\t\tlet relatedParams = {};\n\t\t\tlet relatedField = 'subprocess';\n\t\t\tlet fullFormUrl = params.url;\n\t\t\trelatedParams[relatedField] = parentId;\n\t\t\tlet eliminatedKeys = new Array('view', 'module', 'mode', 'action');\n\n\t\t\tlet preQuickCreateSave = function (data) {\n\t\t\t\tlet index, queryParam, queryParamComponents;\n\t\t\t\tlet queryParameters = [];\n\n\t\t\t\tif (typeof fullFormUrl !== 'undefined' && fullFormUrl.indexOf('?') !== -1) {\n\t\t\t\t\tlet urlSplit = fullFormUrl.split('?');\n\t\t\t\t\tlet queryString = urlSplit[1];\n\t\t\t\t\tqueryParameters = queryString.split('&');\n\t\t\t\t\tfor (index = 0; index < queryParameters.length; index++) {\n\t\t\t\t\t\tqueryParam = queryParameters[index];\n\t\t\t\t\t\tqueryParamComponents = queryParam.split('=');\n\t\t\t\t\t\tif (queryParamComponents[0] == 'mode' && queryParamComponents[1] == 'Calendar') {\n\t\t\t\t\t\t\tdata.find('a[data-tab-name=\"Task\"]').trigger('click');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tjQuery('<input type=\"hidden\" name=\"sourceModule\" value=\"' + parentModule + '\" />').appendTo(data);\n\t\t\t\tjQuery('<input type=\"hidden\" name=\"sourceRecord\" value=\"' + parentId + '\" />').appendTo(data);\n\t\t\t\tjQuery('<input type=\"hidden\" name=\"relationOperation\" value=\"true\" />').appendTo(data);\n\n\t\t\t\tif (typeof relatedField !== 'undefined') {\n\t\t\t\t\tlet field = data.find('[name=\"' + relatedField + '\"]');\n\t\t\t\t\tif (field.length == 0) {\n\t\t\t\t\t\tjQuery('<input type=\"hidden\" name=\"' + relatedField + '\" value=\"' + parentId + '\" />').appendTo(data);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (index = 0; index < queryParameters.length; index++) {\n\t\t\t\t\tqueryParam = queryParameters[index];\n\t\t\t\t\tqueryParamComponents = queryParam.split('=');\n\t\t\t\t\tif (\n\t\t\t\t\t\tjQuery.inArray(queryParamComponents[0], eliminatedKeys) == '-1' &&\n\t\t\t\t\t\tdata.find('[name=\"' + queryParamComponents[0] + '\"]').length == 0\n\t\t\t\t\t) {\n\t\t\t\t\t\tjQuery(\n\t\t\t\t\t\t\t'<input type=\"hidden\" name=\"' + queryParamComponents[0] + '\" value=\"' + queryParamComponents[1] + '\" />'\n\t\t\t\t\t\t).appendTo(data);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\tif (typeof fullFormUrl !== 'undefined' && fullFormUrl.indexOf('?') !== -1) {\n\t\t\t\tlet urlSplit = fullFormUrl.split('?');\n\t\t\t\tlet queryString = urlSplit[1];\n\t\t\t\tlet queryParameters = queryString.split('&');\n\t\t\t\tfor (let index = 0; index < queryParameters.length; index++) {\n\t\t\t\t\tlet queryParam = queryParameters[index];\n\t\t\t\t\tlet queryParamComponents = queryParam.split('=');\n\t\t\t\t\tif (jQuery.inArray(queryParamComponents[0], eliminatedKeys) == '-1') {\n\t\t\t\t\t\trelatedParams[queryParamComponents[0]] = queryParamComponents[1];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tquickCreateParams['data'] = relatedParams;\n\t\t\tquickCreateParams['callbackFunction'] = callback;\n\t\t\tquickCreateParams['callbackPostShown'] = preQuickCreateSave;\n\t\t\tquickCreateParams['noCache'] = true;\n\t\t\tApp.Components.QuickCreate.createRecord(referenceModuleName, quickCreateParams);\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\tthis._super();\n\t\t\tthis.registerSetServiceContracts();\n\t\t\tthis.registerHierarchyRecordCount();\n\t\t\tthis.registerShowHierarchy();\n\t\t}\n\t}\n);\n"],"names":["Vtiger_Detail_Js","setAccountsReference","app","showRecordsList","module","src_module","src_record","getRecordId","_modal","instance","setSelectEvent","responseData","getInstance","saveFieldValues","field","value","id","done","location","reload","registerSetServiceContracts","$","on","e","jQuery","currentTarget","thisInstance","setRelatedFields","element","data","getHierarchyResponseData","params","aDeferred","Deferred","isEmptyObject","hierarchyResponseCache","AppConnector","request","then","resolve","promise","displayHierarchyResponseData","callbackFunction","showScrollBar","height","railVisible","size","showModalWindow","modal","App","Components","Scrollbar","xy","registerChangeStatusInHierarchy","registerHierarchyRecordCount","getModuleName","action","record","mode","hierarchyButton","length","response","success","html","result","registerShowHierarchy","view","progressIndicatorElement","progressIndicator","position","blockInfo","enabled","container","find","recordsType","val","status","showNotify","text","type","hideModalWindow","showProgressConfirmation","picklistName","picklistValue","showConfirmModal","title","vtranslate","confirmedCallback","window","fail","error","err","errorLog","fieldDetailList","self","recordId","async","dataType","reponseData","CONFIG","checkIfRecordHasTimeControl","checkIfRelatedTicketsAreClosed","hasTimeControl","relatedTicketsClosed","saveData","message","addTimeControlCb","addTimeControl","url","callback","parentId","quickCreateParams","relatedParams","relatedField","fullFormUrl","eliminatedKeys","preQuickCreateSave","index","queryParam","queryParamComponents","queryParameters","indexOf","split","queryString","urlSplit","trigger","appendTo","inArray","QuickCreate","createRecord","registerEvents","_super"],"mappings":"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"}