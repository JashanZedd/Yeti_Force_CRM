{"version":3,"file":"Detail.min.js","sources":["Detail.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nVtiger_Detail_Js(\n\t'HelpDesk_Detail_Js',\n\t{\n\t\tsetAccountsReference: function() {\n\t\t\tapp.showRecordsList(\n\t\t\t\t{\n\t\t\t\t\tmodule: 'Accounts',\n\t\t\t\t\tsrc_module: 'HelpDesk',\n\t\t\t\t\tsrc_record: app.getRecordId()\n\t\t\t\t},\n\t\t\t\t(modal, instance) => {\n\t\t\t\t\tinstance.setSelectEvent(responseData => {\n\t\t\t\t\t\tVtiger_Detail_Js.getInstance()\n\t\t\t\t\t\t\t.saveFieldValues({\n\t\t\t\t\t\t\t\tfield: 'parent_id',\n\t\t\t\t\t\t\t\tvalue: responseData.id\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.done(function(response) {\n\t\t\t\t\t\t\t\tlocation.reload();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t},\n\t{\n\t\tregisterSetServiceContracts: function() {\n\t\t\tvar thisInstance = this;\n\t\t\t$('.selectServiceContracts').on('click', 'ul li', function(e) {\n\t\t\t\tvar element = jQuery(e.currentTarget);\n\t\t\t\tthisInstance\n\t\t\t\t\t.saveFieldValues({\n\t\t\t\t\t\tsetRelatedFields: true,\n\t\t\t\t\t\tfield: 'servicecontractsid',\n\t\t\t\t\t\tvalue: element.data('id')\n\t\t\t\t\t})\n\t\t\t\t\t.done(function(response) {\n\t\t\t\t\t\tlocation.reload();\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to get response from hierarchy\n\t\t * @param {array} params\n\t\t * @returns {jQuery}\n\t\t */\n\t\tgetHierarchyResponseData: function(params) {\n\t\t\tlet thisInstance = this,\n\t\t\t\taDeferred = $.Deferred();\n\t\t\tif (!$.isEmptyObject(thisInstance.hierarchyResponseCache)) {\n\t\t\t\taDeferred.resolve(thisInstance.hierarchyResponseCache);\n\t\t\t} else {\n\t\t\t\tAppConnector.request(params).then(function(data) {\n\t\t\t\t\tthisInstance.hierarchyResponseCache = data;\n\t\t\t\t\taDeferred.resolve(thisInstance.hierarchyResponseCache);\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/**\n\t\t * Function to display the hierarchy response data\n\t\t * @param {array} data\n\t\t */\n\t\tdisplayHierarchyResponseData: function(data) {\n\t\t\tconst thisInstance = this;\n\t\t\tlet callbackFunction = function() {\n\t\t\t\tapp.showScrollBar($('#hierarchyScroll'), {\n\t\t\t\t\theight: '300px',\n\t\t\t\t\trailVisible: true,\n\t\t\t\t\tsize: '6px'\n\t\t\t\t});\n\t\t\t};\n\t\t\tapp.showModalWindow(data, function(modal) {\n\t\t\t\tthisInstance.registerChangeStatusInHierarchy(modal);\n\t\t\t\tif (typeof callbackFunction == 'function' && $('#hierarchyScroll').height() > 300) {\n\t\t\t\t\tcallbackFunction();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Registers read count of hierarchy if it is possible\n\t\t */\n\t\tregisterHierarchyRecordCount: function() {\n\t\t\tlet hierarchyButton = $('.js-detail-hierarchy'),\n\t\t\t\tparams = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\taction: 'RelationAjax',\n\t\t\t\t\trecord: app.getRecordId(),\n\t\t\t\t\tmode: 'getHierarchyCount'\n\t\t\t\t};\n\t\t\tif (hierarchyButton.length) {\n\t\t\t\tAppConnector.request(params).then(function(response) {\n\t\t\t\t\tif (response.success) {\n\t\t\t\t\t\t$('.hierarchy .badge').html(response.result);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Shows hierarchy\n\t\t */\n\t\tregisterShowHierarchy: function() {\n\t\t\tlet thisInstance = this,\n\t\t\t\thierarchyButton = $('.detailViewTitle'),\n\t\t\t\tparams = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tview: 'Hierarchy',\n\t\t\t\t\trecord: app.getRecordId()\n\t\t\t\t};\n\t\t\thierarchyButton.on('click', '.js-detail-hierarchy', function() {\n\t\t\t\tlet progressIndicatorElement = $.progressIndicator({\n\t\t\t\t\tposition: 'html',\n\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\tenabled: true\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthisInstance.getHierarchyResponseData(params).then(function(data) {\n\t\t\t\t\tthisInstance.displayHierarchyResponseData(data);\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Function to register events on update hierarchy button\n\t\t *\n\t\t * @param {jQuery} container\n\t\t */\n\t\tregisterChangeStatusInHierarchy: function(container) {\n\t\t\tcontainer.find('.js-update-hierarchy').on('click', function() {\n\t\t\t\tlet params = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\taction: 'ChangeStatus',\n\t\t\t\t\trecordsType: container.find('.js-selected-records').val(),\n\t\t\t\t\tstatus: container.find('.js-status').val(),\n\t\t\t\t\trecord: app.getRecordId()\n\t\t\t\t};\n\t\t\t\tAppConnector.request(params).done(function(data) {\n\t\t\t\t\tif (data.success) {\n\t\t\t\t\t\tVtiger_Helper_Js.showPnotify({ text: data.result.data, type: 'success' });\n\t\t\t\t\t}\n\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Show confirmation on event click\n\t\t * @param {jQuery} element\n\t\t * @param {string} picklistName\n\t\t */\n\t\tshowProgressConfirmation: function(element, picklistName) {\n\t\t\tlet picklistValue = $(element).data('picklistValue');\n\t\t\tVtiger_Helper_Js.showConfirmationBox({\n\t\t\t\ttitle: $(element).data('picklistLabel'),\n\t\t\t\tmessage: app.vtranslate('JS_CHANGE_VALUE_CONFIRMATION')\n\t\t\t}).done(() => {\n\t\t\t\tconst progressIndicatorElement = $.progressIndicator();\n\t\t\t\tthis.saveFieldValues({\n\t\t\t\t\tvalue: picklistValue,\n\t\t\t\t\tfield: picklistName\n\t\t\t\t})\n\t\t\t\t\t.done(data => {\n\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tif (data.success) {\n\t\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function(error, err) {\n\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tapp.errorLog(error, err);\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function save field values\n\t\t * @param {array} fieldDetailList\n\t\t */\n\t\tsaveFieldValues: function(fieldDetailList) {\n\t\t\tconst self = this;\n\t\t\tvar aDeferred = jQuery.Deferred();\n\t\t\tconst recordId = app.getRecordId();\n\t\t\tvar data = {};\n\t\t\tif (typeof fieldDetailList !== 'undefined') {\n\t\t\t\tdata = fieldDetailList;\n\t\t\t}\n\t\t\tconst saveData = (reload = true) => {\n\t\t\t\tdata['record'] = recordId;\n\t\t\t\tdata['module'] = app.getModuleName();\n\t\t\t\tdata['action'] = 'SaveAjax';\n\t\t\t\tvar params = {};\n\t\t\t\tparams.data = data;\n\t\t\t\tparams.async = false;\n\t\t\t\tparams.dataType = 'json';\n\t\t\t\tAppConnector.request(params).done(function(reponseData) {\n\t\t\t\t\taDeferred.resolve(reponseData);\n\t\t\t\t\tif (reload) {\n\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t};\n\t\t\tif (\n\t\t\t\tfieldDetailList.field === 'ticketstatus' &&\n\t\t\t\t(CONFIG.checkIfRecordHasTimeControl || CONFIG.checkIfRelatedTicketsAreClosed)\n\t\t\t) {\n\t\t\t\tAppConnector.request({\n\t\t\t\t\taction: 'CheckValidateToClose',\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\trecord: recordId,\n\t\t\t\t\tstatus: fieldDetailList.value\n\t\t\t\t}).done(response => {\n\t\t\t\t\tif (response.result.hasTimeControl.result && response.result.relatedTicketsClosed.result) {\n\t\t\t\t\t\tsaveData(false);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlet addTimeControlCb = saveData;\n\t\t\t\t\t\tif (!response.result.relatedTicketsClosed.result) {\n\t\t\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\t\t\ttext: response.result.relatedTicketsClosed.message,\n\t\t\t\t\t\t\t\ttype: 'info'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\taddTimeControlCb = () => {\n\t\t\t\t\t\t\t\tthis.saveFieldValues(fieldDetailList);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!response.result.hasTimeControl.result) {\n\t\t\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\t\t\ttext: response.result.hasTimeControl.message,\n\t\t\t\t\t\t\t\ttype: 'info'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tself.addTimeControl(\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\trecordId: recordId,\n\t\t\t\t\t\t\t\t\turl: `index.php?module=OSSTimeControl&view=Edit&sourceModule=HelpDesk&sourceRecord=${recordId}&relationOperation=true&subprocess=${recordId}&subprocess=${recordId}`\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\taddTimeControlCb\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\taDeferred.resolve({ success: false });\n\t\t\t\t});\n\t\t\t\treturn aDeferred.promise();\n\t\t\t} else {\n\t\t\t\tsaveData(false);\n\t\t\t\treturn aDeferred.promise();\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Add time control when closed ticket\n\t\t * @param {array} params\n\t\t */\n\t\taddTimeControl(params, callback = () => {}) {\n\t\t\tlet aDeferred = jQuery.Deferred();\n\t\t\tlet referenceModuleName = 'OSSTimeControl';\n\t\t\tlet parentId = params.recordId;\n\t\t\tlet parentModule = 'HelpDesk';\n\t\t\tlet quickCreateParams = {};\n\t\t\tlet relatedParams = {};\n\t\t\tlet relatedField = 'subprocess';\n\t\t\tlet fullFormUrl = params.url;\n\t\t\trelatedParams[relatedField] = parentId;\n\t\t\tlet eliminatedKeys = new Array('view', 'module', 'mode', 'action');\n\n\t\t\tlet preQuickCreateSave = function(data) {\n\t\t\t\tlet index, queryParam, queryParamComponents;\n\t\t\t\tlet queryParameters = [];\n\n\t\t\t\tif (typeof fullFormUrl !== 'undefined' && fullFormUrl.indexOf('?') !== -1) {\n\t\t\t\t\tlet urlSplit = fullFormUrl.split('?');\n\t\t\t\t\tlet queryString = urlSplit[1];\n\t\t\t\t\tqueryParameters = queryString.split('&');\n\t\t\t\t\tfor (index = 0; index < queryParameters.length; index++) {\n\t\t\t\t\t\tqueryParam = queryParameters[index];\n\t\t\t\t\t\tqueryParamComponents = queryParam.split('=');\n\t\t\t\t\t\tif (queryParamComponents[0] == 'mode' && queryParamComponents[1] == 'Calendar') {\n\t\t\t\t\t\t\tdata.find('a[data-tab-name=\"Task\"]').trigger('click');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tjQuery('<input type=\"hidden\" name=\"sourceModule\" value=\"' + parentModule + '\" />').appendTo(data);\n\t\t\t\tjQuery('<input type=\"hidden\" name=\"sourceRecord\" value=\"' + parentId + '\" />').appendTo(data);\n\t\t\t\tjQuery('<input type=\"hidden\" name=\"relationOperation\" value=\"true\" />').appendTo(data);\n\n\t\t\t\tif (typeof relatedField !== 'undefined') {\n\t\t\t\t\tlet field = data.find('[name=\"' + relatedField + '\"]');\n\t\t\t\t\tif (field.length == 0) {\n\t\t\t\t\t\tjQuery('<input type=\"hidden\" name=\"' + relatedField + '\" value=\"' + parentId + '\" />').appendTo(data);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (index = 0; index < queryParameters.length; index++) {\n\t\t\t\t\tqueryParam = queryParameters[index];\n\t\t\t\t\tqueryParamComponents = queryParam.split('=');\n\t\t\t\t\tif (\n\t\t\t\t\t\tjQuery.inArray(queryParamComponents[0], eliminatedKeys) == '-1' &&\n\t\t\t\t\t\tdata.find('[name=\"' + queryParamComponents[0] + '\"]').length == 0\n\t\t\t\t\t) {\n\t\t\t\t\t\tjQuery(\n\t\t\t\t\t\t\t'<input type=\"hidden\" name=\"' + queryParamComponents[0] + '\" value=\"' + queryParamComponents[1] + '\" />'\n\t\t\t\t\t\t).appendTo(data);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\tif (typeof fullFormUrl !== 'undefined' && fullFormUrl.indexOf('?') !== -1) {\n\t\t\t\tlet urlSplit = fullFormUrl.split('?');\n\t\t\t\tlet queryString = urlSplit[1];\n\t\t\t\tlet queryParameters = queryString.split('&');\n\t\t\t\tfor (let index = 0; index < queryParameters.length; index++) {\n\t\t\t\t\tlet queryParam = queryParameters[index];\n\t\t\t\t\tlet queryParamComponents = queryParam.split('=');\n\t\t\t\t\tif (jQuery.inArray(queryParamComponents[0], eliminatedKeys) == '-1') {\n\t\t\t\t\t\trelatedParams[queryParamComponents[0]] = queryParamComponents[1];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tquickCreateParams['data'] = relatedParams;\n\t\t\tquickCreateParams['callbackFunction'] = callback;\n\t\t\tquickCreateParams['callbackPostShown'] = preQuickCreateSave;\n\t\t\tquickCreateParams['noCache'] = true;\n\t\t\tVtiger_Header_Js.getInstance().quickCreateModule(referenceModuleName, quickCreateParams);\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\tregisterEvents: function() {\n\t\t\tthis._super();\n\t\t\tthis.registerSetServiceContracts();\n\t\t\tthis.registerHierarchyRecordCount();\n\t\t\tthis.registerShowHierarchy();\n\t\t}\n\t}\n);\n"],"names":["Vtiger_Detail_Js","showRecordsList","app","getRecordId","modal","instance","setSelectEvent","getInstance","saveFieldValues","responseData","id","done","response","reload","thisInstance","on","e","element","jQuery","currentTarget","data","params","aDeferred","$","Deferred","isEmptyObject","hierarchyResponseCache","resolve","request","then","promise","callbackFunction","showScrollBar","showModalWindow","registerChangeStatusInHierarchy","height","hierarchyButton","getModuleName","length","success","html","result","progressIndicatorElement","progressIndicator","getHierarchyResponseData","displayHierarchyResponseData","mode","container","find","val","showPnotify","text","type","hideModalWindow","picklistName","picklistValue","showConfirmationBox","vtranslate","location","fail","error","err","errorLog","fieldDetailList","self","recordId","saveData","async","dataType","reponseData","field","CONFIG","checkIfRecordHasTimeControl","checkIfRelatedTicketsAreClosed","value","hasTimeControl","relatedTicketsClosed","addTimeControlCb","message","addTimeControl","callback","referenceModuleName","parentId","parentModule","quickCreateParams","relatedParams","relatedField","fullFormUrl","url","eliminatedKeys","Array","preQuickCreateSave","index","queryParam","queryParamComponents","queryParameters","indexOf","urlSplit","split","queryString","trigger","appendTo","inArray","quickCreateModule","_super","registerSetServiceContracts","registerHierarchyRecordCount","registerShowHierarchy"],"mappings":"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"}