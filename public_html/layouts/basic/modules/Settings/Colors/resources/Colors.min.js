var Colors_Js={initEvants:function(){$(".UserColors .updateUserColor").click(Colors_Js.updateUserColor);$(".UserColors .generateUserColor").click(Colors_Js.generateUserColor);$(".UserColors .removeUserColor").click(Colors_Js.removeUserColor);$(".UserColors .updateGroupColor").click(Colors_Js.updateGroupColor);$(".UserColors .generateGroupColor").click(Colors_Js.generateGroupColor);$(".UserColors .removeGroupColor").click(Colors_Js.removeGroupColor);$(".UserColors .updateModuleColor").click(Colors_Js.updateModuleColor);$(".UserColors .generateModuleColor").click(Colors_Js.generateModuleColor);$(".UserColors .removeModuleColor").click(Colors_Js.removeModuleColor);$(".UserColors .activeModuleColor").click(Colors_Js.activeModuleColor);$(".UserColors .addPicklistColorColumn").click(Colors_Js.addPicklistColorColumn);$(".UserColors .updatePicklistValueColor").click(Colors_Js.updatePicklistValueColor);$(".UserColors .generatePicklistValueColor").click(Colors_Js.generatePicklistValueColor);$(".UserColors .removePicklistValueColor").click(Colors_Js.removePicklistValueColor)},updateUserColor:function(g){var f=$(g.currentTarget);var a=jQuery(".UserColors .editColorContainer");var b=a.clone(true,true);var d=$("#calendarColorPreviewUser"+f.data("id"));var c=function(e){e.find(".editColorContainer").removeClass("hide").show();var i=e.find(".selectedColor");i.val(d.data("color"));var h={flat:true,color:d.data("color"),onChange:function(j,l,k){i.val("#"+l);d.data("color","#"+l)}};if(typeof customParams!="undefined"){h=jQuery.extend(h,customParams)}e.find(".calendarColorPicker").ColorPicker(h);e.find('[name="saveButton"]').click(function(k){var j=$.progressIndicator({message:app.vtranslate("JS_LOADING_PLEASE_WAIT"),blockInfo:{enabled:true}});AppConnector.request({module:"Colors",parent:"Settings",action:"SaveAjax",mode:"updateUserColor",color:i.val(),id:f.data("id")}).then(function(m){var l=m.result;var n={text:l.message,animation:"show",type:"success"};Vtiger_Helper_Js.showPnotify(n);return l},function(m,l){});d.css("background",i.val());f.data("color",i.val());j.progressIndicator({mode:"hide"});app.hideModalWindow()})};app.showModalWindow(b,function(e){if(typeof c=="function"){c(e)}},{width:"1000px"})},generateUserColor:function(c){var b=$(c.currentTarget);var a=$("#calendarColorPreviewUser"+b.data("id"));AppConnector.request({module:"Colors",parent:"Settings",action:"SaveAjax",mode:"updateUserColor",id:b.data("id")}).then(function(e){var d=e.result;var f={text:d.message,animation:"show",type:"success"};a.css("background",d.color);a.data("color",d.color);Vtiger_Helper_Js.showPnotify(f)},function(e,d){})},removeUserColor:function(c){var b=$(c.currentTarget);var a=$("#calendarColorPreviewUser"+b.data("id"));AppConnector.request({module:"Colors",parent:"Settings",action:"SaveAjax",mode:"removeUserColor",id:b.data("id")}).then(function(e){var d=e.result;var f={text:d.message,animation:"show",type:"success"};a.css("background","");a.data("color","");Vtiger_Helper_Js.showPnotify(f)},function(e,d){})},updateGroupColor:function(g){var f=$(g.currentTarget);var a=jQuery(".UserColors .editColorContainer");var b=a.clone(true,true);var d=$("#calendarColorPreviewGroup"+f.data("id"));var c=function(e){e.find(".editColorContainer").removeClass("hide").show();var i=e.find(".selectedColor");i.val(d.data("color"));var h={flat:true,color:d.data("color"),onChange:function(j,l,k){i.val("#"+l);d.data("color","#"+l)}};if(typeof customParams!="undefined"){h=jQuery.extend(h,customParams)}e.find(".calendarColorPicker").ColorPicker(h);e.find('[name="saveButton"]').click(function(k){var j=$.progressIndicator({message:app.vtranslate("JS_LOADING_PLEASE_WAIT"),blockInfo:{enabled:true}});AppConnector.request({module:"Colors",parent:"Settings",action:"SaveAjax",mode:"updateGroupColor",color:i.val(),id:f.data("id")}).then(function(m){var l=m.result;var n={text:l.message,animation:"show",type:"success"};Vtiger_Helper_Js.showPnotify(n);return l},function(m,l){});d.css("background",i.val());f.data("color",i.val());j.progressIndicator({mode:"hide"});app.hideModalWindow()})};app.showModalWindow(b,function(e){if(typeof c=="function"){c(e)}},{width:"1000px"})},generateGroupColor:function(c){var b=$(c.currentTarget);var a=$("#calendarColorPreviewGroup"+b.data("id"));AppConnector.request({module:"Colors",parent:"Settings",action:"SaveAjax",mode:"updateGroupColor",id:b.data("id")}).then(function(e){var d=e.result;var f={text:d.message,animation:"show",type:"success"};a.css("background",d.color);a.data("color",d.color);Vtiger_Helper_Js.showPnotify(f)},function(e,d){})},removeGroupColor:function(c){var b=$(c.currentTarget);var a=$("#calendarColorPreviewGroup"+b.data("id"));AppConnector.request({module:"Colors",parent:"Settings",action:"SaveAjax",mode:"removeGroupColor",id:b.data("id")}).then(function(e){var d=e.result;var f={text:d.message,animation:"show",type:"success"};a.css("background","");a.data("color","");Vtiger_Helper_Js.showPnotify(f)},function(e,d){})},updateModuleColor:function(g){var f=$(g.currentTarget);var a=jQuery(".UserColors .editColorContainer");var b=a.clone(true,true);var d=$("#calendarColorPreviewModule"+f.data("id"));var c=function(e){e.find(".editColorContainer").removeClass("hide").show();var i=e.find(".selectedColor");i.val(d.data("color"));var h={flat:true,color:d.data("color"),onChange:function(j,l,k){i.val("#"+l);d.data("color","#"+l)}};if(typeof customParams!="undefined"){h=jQuery.extend(h,customParams)}e.find(".calendarColorPicker").ColorPicker(h);e.find('[name="saveButton"]').click(function(k){var j=$.progressIndicator({message:app.vtranslate("JS_LOADING_PLEASE_WAIT"),blockInfo:{enabled:true}});AppConnector.request({module:"Colors",parent:"Settings",action:"SaveAjax",mode:"updateModuleColor",color:i.val(),id:f.data("id")}).then(function(m){var l=m.result;var n={text:l.message,animation:"show",type:"success"};Vtiger_Helper_Js.showPnotify(n);return l},function(m,l){});d.css("background",i.val());f.data("color",i.val());j.progressIndicator({mode:"hide"});app.hideModalWindow()})};app.showModalWindow(b,function(e){if(typeof c=="function"){c(e)}},{width:"1000px"})},generateModuleColor:function(c){var b=$(c.currentTarget);var a=$("#calendarColorPreviewModule"+b.data("id"));AppConnector.request({module:"Colors",parent:"Settings",action:"SaveAjax",mode:"updateModuleColor",id:b.data("id")}).then(function(e){var d=e.result;var f={text:d.message,animation:"show",type:"success"};a.css("background",d.color);a.data("color",d.color);Vtiger_Helper_Js.showPnotify(f)},function(e,d){})},removeModuleColor:function(c){var b=$(c.currentTarget);var a=$("#calendarColorPreviewModule"+b.data("id"));AppConnector.request({module:"Colors",parent:"Settings",action:"SaveAjax",mode:"removeModuleColor",id:b.data("id")}).then(function(e){var d=e.result;var f={text:d.message,animation:"show",type:"success"};a.css("background","");a.data("color","");Vtiger_Helper_Js.showPnotify(f)},function(e,d){})},activeModuleColor:function(c){var b=$(c.currentTarget);var a=$("#calendarColorPreviewModule"+b.data("id"));var d={};d.data={module:"Colors",parent:"Settings",action:"SaveAjax",mode:"activeModuleColor",status:b.is(":checked"),color:a.data("color"),id:b.data("id")};d.async=false;d.dataType="json";AppConnector.request(d).done(function(f){var e=f.result;var g={text:e.message,animation:"show",type:"success"};Vtiger_Helper_Js.showPnotify(g);a.css("background",e.color);a.data("color",e.color)})},registerModuleTabEvent:function(){jQuery("#picklistsColorsTab").on("click",function(b){var a=jQuery.progressIndicator({position:"html",blockInfo:{enabled:true}});AppConnector.request({module:"Colors",parent:app.getParentModuleName(),view:"IndexAjax",mode:"getPickListView"}).then(function(d){var c=jQuery(".picklistViewContentDiv");c.html(d);a.progressIndicator({mode:"hide"});app.changeSelectElementView(jQuery(".pickListModulesSelectContainer"));Colors_Js.registerModuleChangeEvent();c.find(".modulePickList").trigger("change")})})},registerModuleChangeEvent:function(){var a=jQuery(".picklistViewContentDiv");a.find(".pickListModules").on("change",function(d){var b=jQuery(d.currentTarget).val();if(b.length<=0){Settings_Vtiger_Index_Js.showMessage({type:"error",text:app.vtranslate("JS_PLEASE_SELECT_MODULE")})}var c=jQuery.progressIndicator({position:"html",blockInfo:{enabled:true}});AppConnector.request({module:"Colors",parent:app.getParentModuleName(),source_module:b,view:"IndexAjax",mode:"getPickListView"}).then(function(e){a.html(e);c.progressIndicator({mode:"hide"});app.changeSelectElementView(jQuery(".pickListModulesSelectContainer"));app.changeSelectElementView(jQuery(".pickListModulesPicklistSelectContainer"));Colors_Js.registerModuleChangeEvent();Colors_Js.registerModulePickListChangeEvent();jQuery("#modulePickList").trigger("change")})})},registerModulePickListChangeEvent:function(){var a=jQuery(".picklistViewContentDiv");a.find(".modulePickList").on("change",function(c){var b=jQuery.progressIndicator({position:"html",blockInfo:{enabled:true}});AppConnector.request({module:"Colors",parent:app.getParentModuleName(),source_module:jQuery("#pickListModules").val(),view:"IndexAjax",mode:"getPickListView",fieldId:jQuery(c.currentTarget).val()}).then(function(d){a.html(d);app.changeSelectElementView(jQuery(".pickListModulesSelectContainer"));app.changeSelectElementView(jQuery(".pickListModulesPicklistSelectContainer"));Colors_Js.registerModuleChangeEvent();Colors_Js.registerModulePickListChangeEvent();$(".UserColors .addPicklistColorColumn").click(Colors_Js.addPicklistColorColumn);$(".UserColors .updatePicklistValueColor").click(Colors_Js.updatePicklistValueColor);$(".UserColors .generatePicklistValueColor").click(Colors_Js.generatePicklistValueColor);$(".UserColors .removePicklistValueColor").click(Colors_Js.removePicklistValueColor);b.progressIndicator({mode:"hide"})})})},registerEvents:function(){Colors_Js.registerModuleTabEvent();Colors_Js.registerModuleChangeEvent();Colors_Js.registerModulePickListChangeEvent();Colors_Js.initEvants()},addPicklistColorColumn:function(c){var a=jQuery(".picklistViewContentDiv");var b=$(c.currentTarget);AppConnector.request({module:"Colors",parent:"Settings",action:"SaveAjax",mode:"addPicklistColorColumn",picklistModule:b.data("fieldmodule"),fieldId:b.data("fieldid")}).then(function(e){var d=e.result;var f={text:d.message,animation:"show",type:"success"};Vtiger_Helper_Js.showPnotify(f);a.find(".modulePickList").trigger("change")})},updatePicklistValueColor:function(h){var b=jQuery(".picklistViewContentDiv");var g=$(h.currentTarget);var a=jQuery(".UserColors .editColorContainer");var c=a.clone(true,true);var f=b.find("#calendarColorPreviewPicklistValue"+g.data("fieldvalueid"));var d=function(e){e.find(".editColorContainer").removeClass("hide").show();var j=e.find(".selectedColor");j.val(f.data("color"));var i={flat:true,color:f.data("color"),onChange:function(k,m,l){j.val("#"+m);f.data("color","#"+m)}};if(typeof customParams!="undefined"){i=jQuery.extend(i,customParams)}e.find(".calendarColorPicker").ColorPicker(i);e.find('[name="saveButton"]').click(function(l){var k=$.progressIndicator({message:app.vtranslate("JS_LOADING_PLEASE_WAIT"),blockInfo:{enabled:true}});AppConnector.request({module:"Colors",parent:"Settings",action:"SaveAjax",mode:"updatePicklistValueColor",color:j.val(),fieldId:g.data("fieldid"),fieldValueId:g.data("fieldvalueid")}).then(function(n){var m=n.result;var o={text:m.message,animation:"show",type:"success"};Vtiger_Helper_Js.showPnotify(o);return m},function(n,m){});f.css("background",j.val());g.data("color",j.val());k.progressIndicator({mode:"hide"});app.hideModalWindow()})};app.showModalWindow(c,function(e){if(typeof d=="function"){d(e)}},{width:"1000px"})},generatePicklistValueColor:function(f){var a=jQuery(".picklistViewContentDiv");var d=$(f.currentTarget);var c=a.find("#calendarColorPreviewPicklistValue"+d.data("fieldvalueid"));var b=$.progressIndicator({message:app.vtranslate("JS_LOADING_PLEASE_WAIT"),blockInfo:{enabled:true}});AppConnector.request({module:"Colors",parent:"Settings",action:"SaveAjax",mode:"updatePicklistValueColor",fieldId:d.data("fieldid"),fieldValueId:d.data("fieldvalueid")}).then(function(g){var e=g.result;var h={text:e.message,animation:"show",type:"success"};c.css("background",e.color);c.data("color",e.color);Vtiger_Helper_Js.showPnotify(h)},function(g,e){});b.progressIndicator({mode:"hide"});app.hideModalWindow()},removePicklistValueColor:function(f){var a=jQuery(".picklistViewContentDiv");var d=$(f.currentTarget);var c=a.find("#calendarColorPreviewPicklistValue"+d.data("fieldvalueid"));var b=$.progressIndicator({message:app.vtranslate("JS_LOADING_PLEASE_WAIT"),blockInfo:{enabled:true}});AppConnector.request({module:"Colors",parent:"Settings",action:"SaveAjax",mode:"removePicklistValueColor",fieldId:d.data("fieldid"),fieldValueId:d.data("fieldvalueid")}).then(function(g){var e=g.result;var h={text:e.message,animation:"show",type:"success"};c.css("background","");c.data("color","");Vtiger_Helper_Js.showPnotify(h)},function(g,e){});b.progressIndicator({mode:"hide"});app.hideModalWindow()}};$(document).ready(function(){Colors_Js.registerEvents()});