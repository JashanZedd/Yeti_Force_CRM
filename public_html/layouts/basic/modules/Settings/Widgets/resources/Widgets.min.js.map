{"version":3,"file":"Widgets.min.js","sources":["Widgets.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class(\n\t'Settings_Widgets_Index_Js',\n\t{},\n\t{\n\t\tgetTabId: function() {\n\t\t\treturn $(\".WidgetsManage [name='tabid']\").val();\n\t\t},\n\t\tgetType: function() {\n\t\t\treturn $(\".form-modalAddWidget [name='type']\").val();\n\t\t},\n\t\tcreateStep2: function(type) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar tabId = thisInstance.getTabId();\n\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({ position: 'html' });\n\t\t\tapp.showModalWindow(\n\t\t\t\tnull,\n\t\t\t\t'index.php?parent=Settings&module=Widgets&view=Widget&mode=createStep2&type=' +\n\t\t\t\t\ttype +\n\t\t\t\t\t'&tabId=' +\n\t\t\t\t\ttabId,\n\t\t\t\tfunction(wizardContainer) {\n\t\t\t\t\tapp.showPopoverElementView(wizardContainer.find('.js-help-info'));\n\t\t\t\t\tif (type === 'RelatedModule') {\n\t\t\t\t\t\tthisInstance.loadFilters(wizardContainer);\n\t\t\t\t\t\tthisInstance.relatedModuleFields(wizardContainer);\n\t\t\t\t\t\twizardContainer.find(\"select[name='relation_id']\").on('change', function() {\n\t\t\t\t\t\t\tthisInstance.changeRelatedModule();\n\t\t\t\t\t\t\tthisInstance.relatedModuleFields(wizardContainer);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tvar form = jQuery('form', wizardContainer);\n\t\t\t\t\tform.validationEngine(app.validationEngineOptions);\n\t\t\t\t\tform.on('submit', function(e) {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tif (form.validationEngine('validate')) {\n\t\t\t\t\t\t\tvar save = true;\n\t\t\t\t\t\t\tif (form && form.hasClass('validateForm') && form.data('jqv').InvalidFields.length > 0) {\n\t\t\t\t\t\t\t\tapp.formAlignmentAfterValidation(form);\n\t\t\t\t\t\t\t\tsave = false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (save) {\n\t\t\t\t\t\t\t\tvar formData = form.serializeFormData();\n\t\t\t\t\t\t\t\tthisInstance\n\t\t\t\t\t\t\t\t\t.registerSaveEvent('saveWidget', {\n\t\t\t\t\t\t\t\t\t\tdata: formData,\n\t\t\t\t\t\t\t\t\t\ttabid: tabId\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t.done(_ => {\n\t\t\t\t\t\t\t\t\t\tthisInstance.reloadWidgets();\n\t\t\t\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t);\n\t\t},\n\t\tloadWidgets: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar blocks = jQuery('.blocksSortable');\n\t\t\tblocks.sortable({\n\t\t\t\trevert: true,\n\t\t\t\tconnectWith: '.blocksSortable',\n\t\t\t\ttolerance: 'pointer',\n\t\t\t\tcursor: 'move',\n\t\t\t\tplaceholder: 'state-highlight',\n\t\t\t\tstop: function(event, ui) {\n\t\t\t\t\tthisInstance.updateSequence();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tupdateSequence: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar params = {};\n\t\t\t$('.blockSortable').each(function(index) {\n\t\t\t\tparams[$(this).data('id')] = {\n\t\t\t\t\tindex: index,\n\t\t\t\t\tcolumn: $(this)\n\t\t\t\t\t\t.closest('.blocksSortable')\n\t\t\t\t\t\t.data('column')\n\t\t\t\t};\n\t\t\t});\n\t\t\tvar progress = $.progressIndicator({\n\t\t\t\tmessage: app.vtranslate('Saving changes'),\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tthisInstance.registerSaveEvent('updateSequence', {\n\t\t\t\tdata: params,\n\t\t\t\ttabid: $(\"input[name='tabid']\").val()\n\t\t\t});\n\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t},\n\t\treloadWidgets: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar Indicator = jQuery.progressIndicator({\n\t\t\t\tmessage: app.vtranslate('Loading data'),\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tvar params = {};\n\t\t\tparams['module'] = 'Widgets';\n\t\t\tparams['view'] = 'Index';\n\t\t\tparams['parent'] = 'Settings';\n\t\t\tparams['source'] = $(\"input[name='tabid']\").val();\n\t\t\tAppConnector.request(params).done(function(data) {\n\t\t\t\tvar container = jQuery('div.contentsDiv').html(data);\n\t\t\t\tthisInstance.registerEvents(container);\n\t\t\t\tIndicator.progressIndicator({ mode: 'hide' });\n\t\t\t});\n\t\t},\n\t\tregisterSaveEvent(mode, data) {\n\t\t\tlet aDeferred = $.Deferred();\n\t\t\tAppConnector.request({\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\taction: 'SaveAjax',\n\t\t\t\tmode: mode,\n\t\t\t\tparams: data,\n\t\t\t\tasync: mode !== 'saveWidget',\n\t\t\t\tdataType: 'json'\n\t\t\t})\n\t\t\t\t.done(data => {\n\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\ttext: data['result']['message'],\n\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t\t.fail((textStatus, errorThrown) => {\n\t\t\t\t\taDeferred.reject(textStatus, errorThrown);\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\tloadFilters: function(contener) {\n\t\t\tlet types = ['filter', 'checkbox', 'switchHeader'];\n\t\t\tlet selected = contener.find(\"select[name='relation_id'] option:selected\");\n\t\t\tlet relatedModuleInput = contener.find(\"input[name='relatedmodule']\");\n\t\t\tlet relatedModule = relatedModuleInput.val();\n\t\t\tif (relatedModule == 0) {\n\t\t\t\trelatedModule = selected.data('relatedmodule');\n\t\t\t\trelatedModuleInput.val(selected.data('relatedmodule'));\n\t\t\t}\n\t\t\tfor (let i in types) {\n\t\t\t\tlet filters = app.getMainParams(types[i] + 'All', true);\n\t\t\t\tlet filterField = contener.find(\"select[name='\" + types[i] + \"']\");\n\t\t\t\tlet filterSelected = contener.find('input#' + types[i] + '_selected').val();\n\t\t\t\tfilterField.empty();\n\t\t\t\tfilterField.append($('<option/>', { value: '-', text: app.vtranslate('None') }));\n\t\t\t\tif (filters[relatedModule] !== undefined) {\n\t\t\t\t\tfilterField.closest('.form-group').removeClass('d-none');\n\t\t\t\t\t$.each(filters[relatedModule], function(index, value) {\n\t\t\t\t\t\tif (typeof value === 'object') {\n\t\t\t\t\t\t\tvalue = value.label;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlet option = { value: index, text: value };\n\t\t\t\t\t\tif (filterSelected == index) {\n\t\t\t\t\t\t\toption.selected = 'selected';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfilterField.append($('<option/>', option));\n\t\t\t\t\t});\n\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(filterField);\n\t\t\t\t} else {\n\t\t\t\t\tfilterField.closest('.form-group').addClass('d-none');\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\trelatedModuleFields: function(container) {\n\t\t\tconst relatedModule = parseInt(container.find(\"input[name='relatedmodule']\").val());\n\t\t\tconst relatedfields = container.find(\"select[name='relatedfields']\");\n\t\t\trelatedfields.find('optgroup').each(function(index, optgroup) {\n\t\t\t\toptgroup = $(optgroup);\n\t\t\t\tif (relatedModule !== optgroup.data('module')) {\n\t\t\t\t\toptgroup.addClass('d-none');\n\t\t\t\t\toptgroup.prop('disabled', 'disabled');\n\t\t\t\t} else {\n\t\t\t\t\toptgroup.removeClass('d-none');\n\t\t\t\t\toptgroup.prop('disabled', false);\n\t\t\t\t}\n\t\t\t\toptgroup.find('option').each(function(index, option) {\n\t\t\t\t\toption = $(option);\n\t\t\t\t\tif (relatedModule !== option.data('module')) {\n\t\t\t\t\t\toption.addClass('d-none');\n\t\t\t\t\t\toption.prop('disabled', 'disabled');\n\t\t\t\t\t} else {\n\t\t\t\t\t\toption.removeClass('d-none');\n\t\t\t\t\t\toption.prop('disabled', false);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t\trelatedfields.trigger('change:select2');\n\t\t},\n\n\t\tchangeRelatedModule: function(e) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar form = jQuery('.form-modalAddWidget');\n\t\t\tthisInstance.loadFilters(form);\n\t\t},\n\n\t\tmodalFormEdit(wizardContainer) {\n\t\t\tconst thisInstance = this;\n\t\t\t$('#massEditHeader.modal-title').text(app.vtranslate('JS_EDIT_WIDGET'));\n\t\t\tapp.showPopoverElementView(wizardContainer.find('.js-help-info'));\n\t\t\tif (thisInstance.getType() == 'RelatedModule') {\n\t\t\t\tthisInstance.loadFilters(wizardContainer);\n\t\t\t\tthisInstance.relatedModuleFields(wizardContainer);\n\t\t\t\twizardContainer.find(\"select[name='relatedmodule']\").on('change', function() {\n\t\t\t\t\tthisInstance.changeRelatedModule();\n\t\t\t\t\tthisInstance.relatedModuleFields(wizardContainer);\n\t\t\t\t});\n\t\t\t}\n\t\t\tconst form = $('form', wizardContainer);\n\t\t\tform.validationEngine(app.validationEngineOptions);\n\t\t\tform.on('submit', e => {\n\t\t\t\te.preventDefault();\n\t\t\t\tif (form.validationEngine('validate')) {\n\t\t\t\t\tconst progress = $.progressIndicator({\n\t\t\t\t\t\tmessage: app.vtranslate('Loading data'),\n\t\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\t\tenabled: true\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tthisInstance\n\t\t\t\t\t\t.registerSaveEvent('saveWidget', {\n\t\t\t\t\t\t\tdata: form.serializeFormData(),\n\t\t\t\t\t\t\ttabid: $(\"input[name='tabid']\").val()\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.done(() => {\n\t\t\t\t\t\t\tthisInstance.reloadWidgets();\n\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tregisterEvents: function(container) {\n\t\t\tvar thisInstance = this;\n\t\t\tthis.loadWidgets();\n\t\t\tif (typeof container === 'undefined') {\n\t\t\t\tcontainer = jQuery('.WidgetsManage');\n\t\t\t}\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(container.find('.select2'));\n\t\t\tcontainer.find('select.js-module__list').on('change', function(e) {\n\t\t\t\tvar target = $(e.currentTarget);\n\t\t\t\t$(\"input[name='tabid']\").val(target.val());\n\t\t\t\tthisInstance.reloadWidgets();\n\t\t\t});\n\t\t\tcontainer.find('.js-widget__add').on('click', function(e) {\n\t\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({ position: 'html' });\n\t\t\t\tvar module = $('.WidgetsManage select.js-module__list').val();\n\t\t\t\tapp.showModalWindow(\n\t\t\t\t\tnull,\n\t\t\t\t\t'index.php?parent=Settings&module=Widgets&view=Widget&mod=' + module,\n\t\t\t\t\tfunction(wizardContainer) {\n\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tvar form = jQuery('form', wizardContainer);\n\t\t\t\t\t\tform.on('submit', function(e) {\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\tvar type = form.find('[name=\"type\"]').val();\n\t\t\t\t\t\t\tthisInstance.createStep2(type);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t});\n\t\t\tcontainer.find('.js-widget__edit').on('click', e => {\n\t\t\t\tapp.showModalWindow({\n\t\t\t\t\turl:\n\t\t\t\t\t\t'index.php?parent=Settings&module=Widgets&view=Widget&mode=edit&id=' +\n\t\t\t\t\t\t$(e.currentTarget)\n\t\t\t\t\t\t\t.closest('.blockSortable')\n\t\t\t\t\t\t\t.data('id'),\n\t\t\t\t\tcb: wizardContainer => {\n\t\t\t\t\t\tthis.modalFormEdit(wizardContainer);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t\tcontainer.find('.js-widget__remove').on('click', function(e) {\n\t\t\t\tvar target = $(e.currentTarget);\n\t\t\t\tvar blockSortable = target.closest('.blockSortable');\n\t\t\t\tthisInstance.registerSaveEvent('removeWidget', {\n\t\t\t\t\twid: blockSortable.data('id')\n\t\t\t\t});\n\t\t\t\tthisInstance.reloadWidgets();\n\t\t\t});\n\t\t}\n\t}\n);\n"],"names":["jQuery","Class","$","val","type","thisInstance","tabId","getTabId","progressIndicatorElement","progressIndicator","position","showModalWindow","wizardContainer","showPopoverElementView","find","loadFilters","relatedModuleFields","on","changeRelatedModule","mode","form","validationEngine","app","validationEngineOptions","e","preventDefault","save","hasClass","data","InvalidFields","length","formAlignmentAfterValidation","formData","serializeFormData","registerSaveEvent","done","reloadWidgets","hideModalWindow","blocks","sortable","event","ui","updateSequence","params","each","index","closest","progress","vtranslate","Indicator","request","container","html","registerEvents","aDeferred","Deferred","getModuleName","getParentModuleName","resolve","showPnotify","fail","textStatus","errorThrown","reject","promise","contener","types","selected","relatedModuleInput","relatedModule","i","filters","getMainParams","filterField","filterSelected","empty","append","value","text","undefined","removeClass","label","option","Fields","Picklist","showSelect2ElementView","addClass","parseInt","relatedfields","optgroup","prop","trigger","getType","loadWidgets","target","currentTarget","module","createStep2","modalFormEdit","blockSortable"],"mappings":"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"}