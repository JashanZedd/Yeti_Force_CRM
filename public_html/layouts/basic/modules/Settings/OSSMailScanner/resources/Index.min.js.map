{"version":3,"file":"Index.min.js","sources":["Index.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class(\n\t'Settings_OSSMailScanner_Index_Js',\n\t{},\n\t{\n\t\tregisterColorField: function(field) {\n\t\t\tlet params = {};\n\t\t\tparams.tags = true;\n\t\t\tparams.templateSelection = function(object) {\n\t\t\t\tlet selectedId = object.id,\n\t\t\t\t\ttabValue = selectedId.split('@'),\n\t\t\t\t\tstate = object.text;\n\t\t\t\tif (!tabValue[0]) {\n\t\t\t\t\tstate = $('<span class=\"domain\">' + object.text + '</span>');\n\t\t\t\t}\n\t\t\t\treturn state;\n\t\t\t};\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(field, params);\n\t\t},\n\t\tregisterEditFolders: function(container) {\n\t\t\tconst self = this;\n\t\t\tcontainer.find('.editFolders').on('click', function() {\n\t\t\t\tconst url =\n\t\t\t\t\t\t'index.php?module=OSSMailScanner&parent=Settings&view=Folders' +\n\t\t\t\t\t\t'&record=' +\n\t\t\t\t\t\t$(this).data('user'),\n\t\t\t\t\tprogressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\t\t\tmessage: app.vtranslate('LBL_LOADING_LIST_OF_FOLDERS'),\n\t\t\t\t\t\tposition: 'html',\n\t\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\t\tenabled: true\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\tapp.showModalWindow('', url, function(data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tlet recurrenceTree = new App.Components.Tree.Basic();\n\t\t\t\t\tdata.find('[name=\"saveButton\"]').on('click', function(e) {\n\t\t\t\t\t\tconst selectedFolders = self.getSelectedFolders(recurrenceTree.treeInstance);\n\t\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\t\tmodule: 'OSSMailScanner',\n\t\t\t\t\t\t\tparent: 'Settings',\n\t\t\t\t\t\t\taction: 'SaveAjax',\n\t\t\t\t\t\t\tmode: 'updateFolders',\n\t\t\t\t\t\t\tuser: data.find('.modal-body').data('user'),\n\t\t\t\t\t\t\tfolders: selectedFolders\n\t\t\t\t\t\t}).done(function(data) {\n\t\t\t\t\t\t\tlet response = data['result'],\n\t\t\t\t\t\t\t\temptyFoldersAlert = $('.js-empty-folders-alert'),\n\t\t\t\t\t\t\t\tmessageType = 'info';\n\t\t\t\t\t\t\tif (!response['success']) {\n\t\t\t\t\t\t\t\tmessageType = 'error';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\t\t\ttext: response['message'],\n\t\t\t\t\t\t\t\ttype: messageType\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif (Object.keys(selectedFolders).length) {\n\t\t\t\t\t\t\t\temptyFoldersAlert.addClass('d-none');\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\temptyFoldersAlert.removeClass('d-none');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tgetSelectedFolders(treeInstance) {\n\t\t\tconsole.log(treeInstance.jstree('get_selected', true));\n\t\t\tlet folders = {};\n\t\t\tfor (let value of treeInstance.jstree('get_selected', true)) {\n\t\t\t\tif (!Array.isArray(folders[value.original.db_type])) {\n\t\t\t\t\tfolders[value.original.db_type] = [];\n\t\t\t\t}\n\t\t\t\tif (value.original.db_id !== undefined) {\n\t\t\t\t\tfolders[value.original.db_type].push(value.original.db_id);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn folders;\n\t\t},\n\t\tregisterEvents: function() {\n\t\t\tconst thisIstance = this,\n\t\t\t\tcontainer = jQuery('.contentsDiv');\n\t\t\tthisIstance.registerColorField($('#exceptions select'));\n\t\t\tthisIstance.registerEditFolders(container);\n\t\t\t$('#exceptions select')\n\t\t\t\t.on('select2:select', function(e) {\n\t\t\t\t\tlet value = e.params.data.id;\n\t\t\t\t\tif (!!thisIstance.domainValidateToExceptions(value) || !!thisIstance.email_validate(value)) {\n\t\t\t\t\t\tthisIstance.saveWidgetConfig(\n\t\t\t\t\t\t\tjQuery(this).attr('name'),\n\t\t\t\t\t\t\tjQuery(this)\n\t\t\t\t\t\t\t\t.val()\n\t\t\t\t\t\t\t\t.join(),\n\t\t\t\t\t\t\t'exceptions'\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthisIstance.registerColorField(jQuery(this));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tjQuery(this)\n\t\t\t\t\t\t\t.find(\"option[value='\" + value + \"']\")\n\t\t\t\t\t\t\t.remove();\n\t\t\t\t\t\tjQuery(this).trigger('change');\n\t\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\t\ttext: app.vtranslate('JS_mail_error'),\n\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.on('select2:unselect', function() {\n\t\t\t\t\tthisIstance.saveWidgetConfig(jQuery(this).attr('name'), jQuery(this).val(), 'exceptions');\n\t\t\t\t});\n\n\t\t\t$('#status').on('change', function() {\n\t\t\t\t$('#confirm').attr('disabled', !this.checked);\n\t\t\t});\n\n\t\t\tjQuery('.conftabChangeTicketStatus').on('click', function() {\n\t\t\t\tif ($(this).data('active') == '1') {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\t$('.conftabChangeTicketStatus').data('active', 0);\n\t\t\t\t$(this).data('active', 1);\n\t\t\t\tAppConnector.request({\n\t\t\t\t\tasync: true,\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tmodule: 'OSSMailScanner',\n\t\t\t\t\t\taction: 'SaveRcConfig',\n\t\t\t\t\t\tct: 'emailsearch',\n\t\t\t\t\t\ttype: 'changeTicketStatus',\n\t\t\t\t\t\tvale: $(this).val()\n\t\t\t\t\t}\n\t\t\t\t}).done(\n\t\t\t\t\tfunction(data) {\n\t\t\t\t\t\tif (data.success) {\n\t\t\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\t\t\ttext: data.result.data,\n\t\t\t\t\t\t\t\ttype: 'info'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tfunction(data, err) {}\n\t\t\t\t);\n\t\t\t});\n\n\t\t\tjQuery('.delate_accont').on('click', function() {\n\t\t\t\tif (window.confirm(app.vtranslate('whether_remove_an_identity'))) {\n\t\t\t\t\tconst userId = jQuery(this).data('user-id');\n\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\tdata: { module: 'OSSMailScanner', action: 'AccontRemove', id: userId },\n\t\t\t\t\t\tasync: true\n\t\t\t\t\t}).done(function(data) {\n\t\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\t\ttext: data.result.data,\n\t\t\t\t\t\t\ttype: 'info'\n\t\t\t\t\t\t});\n\t\t\t\t\t\tjQuery('#row_account_' + userId).hide();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t\tjQuery('.identities_del').on('click', function() {\n\t\t\t\tconst button = this;\n\t\t\t\tif (window.confirm(app.vtranslate('whether_remove_an_identity'))) {\n\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\tdata: { module: 'OSSMailScanner', action: 'IdentitiesDel', id: jQuery(this).data('id') },\n\t\t\t\t\t\tasync: true\n\t\t\t\t\t}).done(\n\t\t\t\t\t\tfunction() {\n\t\t\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\t\t\ttext: app.vtranslate('removed_identity'),\n\t\t\t\t\t\t\t\ttype: 'info'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tjQuery(button)\n\t\t\t\t\t\t\t\t.parent()\n\t\t\t\t\t\t\t\t.parent()\n\t\t\t\t\t\t\t\t.remove();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfunction(data, err) {}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tjQuery('.expand-hide').on('click', function() {\n\t\t\t\tlet userId = jQuery(this).data('user-id'),\n\t\t\t\t\ttr = jQuery('tr[data-user-id=\"' + userId + '\"]');\n\n\t\t\t\tif ('none' == tr.css('display')) {\n\t\t\t\t\ttr.show();\n\t\t\t\t} else {\n\t\t\t\t\ttr.hide();\n\t\t\t\t}\n\t\t\t});\n\t\t\t$('.alert').alert();\n\t\t\tjQuery(\"select[id^='function_list_']\").on('change', function() {\n\t\t\t\tthisIstance.saveActions(jQuery(this).data('user-id'), jQuery(this).val());\n\t\t\t});\n\t\t\tjQuery(\"select[id^='user_list_']\").on('change', function() {\n\t\t\t\tthisIstance.saveCRMuser(jQuery(this).data('user'), jQuery(this).val());\n\t\t\t});\n\t\t\tjQuery('#email_search').on('change', function() {\n\t\t\t\tthisIstance.saveEmailSearchList(jQuery('#email_search').val());\n\t\t\t});\n\t\t\tjQuery('#tab_email_view_widget_limit').on('blur', function() {\n\t\t\t\tthisIstance.saveWidgetConfig('widget_limit', jQuery(this).val(), 'email_list');\n\t\t\t});\n\t\t\tjQuery('#tab_email_view_open_window').on('change', function() {\n\t\t\t\tthisIstance.saveWidgetConfig('target', jQuery(this).val(), 'email_list');\n\t\t\t});\n\t\t\tjQuery('[name=\"email_to_notify\"]').on('blur', function() {\n\t\t\t\tlet value = jQuery(this).val();\n\t\t\t\tif (!!thisIstance.email_validate(value)) {\n\t\t\t\t\tthisIstance.saveWidgetConfig('email', value, 'cron');\n\t\t\t\t} else {\n\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\ttext: app.vtranslate('JS_mail_error'),\n\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t\tjQuery('[name=\"time_to_notify\"]').on('blur', function() {\n\t\t\t\tlet value = jQuery(this).val();\n\t\t\t\tif (!!thisIstance.number_validate(value)) {\n\t\t\t\t\tthisIstance.saveWidgetConfig('time', jQuery(this).val(), 'cron');\n\t\t\t\t} else {\n\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\ttext: app.vtranslate('JS_time_error'),\n\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t\tcontainer.find('.js-page-num').on('change', function() {\n\t\t\t\tthisIstance.reloadLogTable($(this).val() - 1);\n\t\t\t});\n\t\t\tcontainer.find('.js-run-cron').on('click', function() {\n\t\t\t\tlet buttonInstance = $(this);\n\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\ttext: app.vtranslate('start_cron'),\n\t\t\t\t\ttype: 'info',\n\t\t\t\t\tanimation: 'show'\n\t\t\t\t});\n\t\t\t\tbuttonInstance.attr('disabled', true);\n\t\t\t\tlet ajaxParams = {};\n\t\t\t\tajaxParams.data = { module: 'OSSMailScanner', action: 'Cron' };\n\t\t\t\tajaxParams.async = true;\n\t\t\t\tAppConnector.request(ajaxParams).done(function(data) {\n\t\t\t\t\tlet params = {};\n\t\t\t\t\tif (data.success && 'ok' === data.result) {\n\t\t\t\t\t\tparams = {\n\t\t\t\t\t\t\ttext: app.vtranslate('end_cron_ok'),\n\t\t\t\t\t\t\ttype: 'info',\n\t\t\t\t\t\t\tanimation: 'show'\n\t\t\t\t\t\t};\n\t\t\t\t\t} else {\n\t\t\t\t\t\tparams = {\n\t\t\t\t\t\t\ttitle: app.vtranslate('end_cron_error'),\n\t\t\t\t\t\t\ttext: data.result,\n\t\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\t\tanimation: 'show'\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\tVtiger_Helper_Js.showPnotify(params);\n\t\t\t\t\tbuttonInstance.attr('disabled', false);\n\t\t\t\t\tthisIstance.reloadLogTable(container.find('.js-page-num').val() - 1);\n\t\t\t\t});\n\t\t\t});\n\t\t\tcontainer.on('click', '.js-stop-cron', function(e) {\n\t\t\t\tlet ajaxParams = {},\n\t\t\t\t\tscanId = $(e.currentTarget).data('scan-id');\n\t\t\t\tajaxParams.data = { module: 'OSSMailScanner', action: 'RestartCron', scanId: scanId };\n\t\t\t\tajaxParams.async = true;\n\t\t\t\tAppConnector.request(ajaxParams).done(function(data) {\n\t\t\t\t\tif (data.success) {\n\t\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\t\ttext: data.result.data,\n\t\t\t\t\t\t\ttype: 'info',\n\t\t\t\t\t\t\tanimation: 'show'\n\t\t\t\t\t\t});\n\t\t\t\t\t\tcontainer.find('.js-run-cron').attr('disabled', false);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthisIstance.reloadLogTable(container.find('.js-page-num').val() - 1);\n\t\t\t});\n\t\t},\n\t\tsaveActions: function(userid, vale) {\n\t\t\tAppConnector.request({\n\t\t\t\tmodule: 'OSSMailScanner',\n\t\t\t\taction: 'SaveActions',\n\t\t\t\tuserid: userid,\n\t\t\t\tvale: vale\n\t\t\t}).done(function(data) {\n\t\t\t\tlet response = data['result'];\n\t\t\t\tif (response['success']) {\n\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\ttext: response['data'],\n\t\t\t\t\t\ttype: 'info'\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\ttext: response['data']\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tsaveCRMuser: function(userid, value) {\n\t\t\tAppConnector.request({\n\t\t\t\tmodule: 'OSSMailScanner',\n\t\t\t\taction: 'SaveCRMuser',\n\t\t\t\tuserid: userid,\n\t\t\t\tvalue: value\n\t\t\t}).done(function(data) {\n\t\t\t\tlet response = data['result'];\n\t\t\t\tif (response['success']) {\n\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\ttext: response['data'],\n\t\t\t\t\t\ttype: 'info'\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\ttext: response['data']\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tisEmpty: function(val) {\n\t\t\tif (!!val || val === 0) {\n\t\t\t\treturn val;\n\t\t\t}\n\t\t\treturn '';\n\t\t},\n\t\tsaveEmailSearchList: function(vale) {\n\t\t\tAppConnector.request({\n\t\t\t\tmodule: 'OSSMailScanner',\n\t\t\t\taction: 'SaveEmailSearchList',\n\t\t\t\tvale: vale\n\t\t\t}).done(function(data) {\n\t\t\t\tlet response = data['result'];\n\t\t\t\tif (response['success']) {\n\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\ttext: response['data'],\n\t\t\t\t\t\ttype: 'info'\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\ttext: response['data']\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tdomainValidateToExceptions: function(src) {\n\t\t\tlet regex = /^@([a-zA-Z0-9.-]+\\.)+[a-zA-Z0-9.-]{2,63}$/;\n\t\t\treturn regex.test(src);\n\t\t},\n\t\temail_validate: function(src) {\n\t\t\tlet regex = /^[a-zA-Z0-9._-]+@([a-zA-Z0-9.-]+\\.)+[a-zA-Z0-9.-]{2,63}$/;\n\t\t\treturn regex.test(src);\n\t\t},\n\t\tnumber_validate: function(value) {\n\t\t\tlet valid = !/^\\s*$/.test(value) && !isNaN(value);\n\t\t\treturn valid;\n\t\t},\n\t\tsaveWidgetConfig: function(name, value, type) {\n\t\t\tAppConnector.request({\n\t\t\t\tmodule: 'OSSMailScanner',\n\t\t\t\taction: 'SaveWidgetConfig',\n\t\t\t\tconf_type: type,\n\t\t\t\tname: name,\n\t\t\t\tvalue: value\n\t\t\t}).done(function(data) {\n\t\t\t\tlet response = data['result'];\n\t\t\t\tif (response['success']) {\n\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\ttext: response['data'],\n\t\t\t\t\t\ttype: 'info'\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\ttext: response['data']\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to reload table with given data from request\n\t\t * @param {int} page\n\t\t */\n\t\treloadLogTable: function(page) {\n\t\t\tconst self = this;\n\t\t\tlet container = $('.contentsDiv'),\n\t\t\t\tlimit = 30;\n\t\t\tAppConnector.request({\n\t\t\t\tmodule: 'OSSMailScanner',\n\t\t\t\taction: 'GetLog',\n\t\t\t\tstart_number: page * limit\n\t\t\t}).done(function(data) {\n\t\t\t\tif (data.success) {\n\t\t\t\t\tlet tab = container.find('table.js-log-list');\n\t\t\t\t\ttab.find('tbody tr').remove();\n\t\t\t\t\tfor (let i = 0; i < data.result.length; i++) {\n\t\t\t\t\t\tlet html =\n\t\t\t\t\t\t\t'<tr>' +\n\t\t\t\t\t\t\t'<td class=\"p-1\">' +\n\t\t\t\t\t\t\tself.isEmpty(data.result[i]['id']) +\n\t\t\t\t\t\t\t'</td>' +\n\t\t\t\t\t\t\t'<td class=\"p-1\">' +\n\t\t\t\t\t\t\tself.isEmpty(data.result[i]['start_time']) +\n\t\t\t\t\t\t\t'</td>' +\n\t\t\t\t\t\t\t'<td class=\"p-1\">' +\n\t\t\t\t\t\t\tself.isEmpty(data.result[i]['end_time']) +\n\t\t\t\t\t\t\t'</td>' +\n\t\t\t\t\t\t\t'<td class=\"p-1\">' +\n\t\t\t\t\t\t\tself.isEmpty(app.vtranslate(data.result[i]['status'])) +\n\t\t\t\t\t\t\t'</td>' +\n\t\t\t\t\t\t\t'<td class=\"p-1\">' +\n\t\t\t\t\t\t\tself.isEmpty(data.result[i]['user']) +\n\t\t\t\t\t\t\t'</td>' +\n\t\t\t\t\t\t\t'<td class=\"p-1\">' +\n\t\t\t\t\t\t\tself.isEmpty(data.result[i]['count']) +\n\t\t\t\t\t\t\t'</td>' +\n\t\t\t\t\t\t\t'<td class=\"p-1\">' +\n\t\t\t\t\t\t\tself.isEmpty(data.result[i]['stop_user']) +\n\t\t\t\t\t\t\t'</td>' +\n\t\t\t\t\t\t\t'<td class=\"p-1\">' +\n\t\t\t\t\t\t\tself.isEmpty(data.result[i]['action']) +\n\t\t\t\t\t\t\t'</td>' +\n\t\t\t\t\t\t\t'<td class=\"p-1\">' +\n\t\t\t\t\t\t\tself.isEmpty(data.result[i]['info']) +\n\t\t\t\t\t\t\t'</td><td>';\n\t\t\t\t\t\tif (data.result[i]['status'] === 'In progress') {\n\t\t\t\t\t\t\thtml +=\n\t\t\t\t\t\t\t\t'<button type=\"button\" class=\"btn btn-danger js-stop-cron\" data-scan-id=\"' +\n\t\t\t\t\t\t\t\tdata.result[i]['id'] +\n\t\t\t\t\t\t\t\t'\"';\n\t\t\t\t\t\t\tif (container.find('.js-run-cron').data('button-status')) {\n\t\t\t\t\t\t\t\thtml += ' disabled';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\thtml += '>' + app.vtranslate('JS_StopCron') + '</button>';\n\t\t\t\t\t\t}\n\t\t\t\t\t\thtml += '</td></tr>';\n\t\t\t\t\t\ttab.append(html);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n);\n"],"names":["jQuery","Class","field","params","tags","templateSelection","object","selectedId","id","tabValue","split","state","text","$","Fields","Picklist","showSelect2ElementView","container","self","find","on","url","data","progressIndicatorElement","progressIndicator","app","vtranslate","showModalWindow","mode","recurrenceTree","App","Components","Tree","Basic","e","selectedFolders","getSelectedFolders","treeInstance","request","done","response","emptyFoldersAlert","messageType","showPnotify","Object","keys","length","addClass","removeClass","hideModalWindow","log","jstree","folders","value","Array","isArray","original","db_type","db_id","undefined","push","thisIstance","registerColorField","registerEditFolders","domainValidateToExceptions","email_validate","saveWidgetConfig","attr","val","join","remove","trigger","checked","success","result","err","window","confirm","userId","module","action","hide","button","parent","tr","css","show","alert","saveActions","saveCRMuser","saveEmailSearchList","number_validate","reloadLogTable","buttonInstance","ajaxParams","async","scanId","currentTarget","userid","vale","src","regex","test","valid","isNaN","name","type","page","limit","tab","i","html","isEmpty","append"],"mappings":"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"}