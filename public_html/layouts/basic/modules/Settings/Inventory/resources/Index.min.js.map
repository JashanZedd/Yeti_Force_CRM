{"version":3,"file":"Index.min.js","sources":["Index.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class(\"Settings_Inventory_Index_Js\", {}, {\n\t//Stored history of Name and duplicate check result\n\tduplicateCheckCache: {},\n\t/**\n\t * This function will show the model for Add/Edit\n\t */\n\tedit: function (url, currentTrElement) {\n\t\tvar aDeferred = jQuery.Deferred();\n\t\tvar thisInstance = this;\n\n\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t'position': 'html',\n\t\t\t'blockInfo': {\n\t\t\t\t'enabled': true\n\t\t\t}\n\t\t});\n\t\tAppConnector.request(url).done(function (data) {\n\t\t\tvar callBackFunction = function (data) {\n\t\t\t\t//cache should be empty when modal opened\n\t\t\t\tthisInstance.duplicateCheckCache = {};\n\t\t\t\tvar form = jQuery('#formInventory');\n\t\t\t\tvar params = app.validationEngineOptions;\n\t\t\t\tparams.onValidationComplete = function (form, valid) {\n\t\t\t\t\tif (valid) {\n\t\t\t\t\t\tthisInstance.saveDetails(form, currentTrElement);\n\t\t\t\t\t\treturn valid;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tform.validationEngine(params);\n\t\t\t\tform.on('submit', function (e) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t})\n\t\t\t}\n\t\t\tprogressIndicatorElement.progressIndicator({'mode': 'hide'});\n\t\t\tapp.showModalWindow(data, function (data) {\n\t\t\t\tif (typeof callBackFunction == 'function') {\n\t\t\t\t\tcallBackFunction(data);\n\t\t\t\t}\n\t\t\t}, {});\n\t\t}).fail(function (error) {\n\t\t\taDeferred.reject(error);\n\t\t});\n\t\treturn aDeferred.promise();\n\t},\n\t/*\n\t * Function to Save the Details\n\t */\n\tsaveDetails: function (form, currentTrElement) {\n\t\tconst thisInstance = this;\n\t\tlet params = form.serializeFormData();\n\t\tconst saveButton = form.find('[type=\"submit\"]');\n\t\tsaveButton.prop('disabled', true);\n\t\tif (typeof params === \"undefined\") {\n\t\t\tparams = {};\n\t\t}\n\t\tthisInstance.validateName(params).done((data) => {\n\t\t\tif (typeof data === \"undefined\") {\n\t\t\t\tsaveButton.prop('disabled', false);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tconst progressIndicatorElement = $.progressIndicator({\n\t\t\t\t'position': 'html',\n\t\t\t\t'blockInfo': {\n\t\t\t\t\t'enabled': true\n\t\t\t\t}\n\t\t\t});\n\t\t\tparams.module = app.getModuleName();\n\t\t\tparams.parent = app.getParentModuleName();\n\t\t\tparams.action = 'SaveAjax';\n\t\t\tparams.view = app.getViewName();\n\t\t\tAppConnector.request(params).done((data) => {\n\t\t\t\tprogressIndicatorElement.progressIndicator({'mode': 'hide'});\n\t\t\t\tapp.hideModalWindow();\n\t\t\t\tif (typeof data == 'string') {\n\t\t\t\t\tdata = JSON.parse(data);\n\t\t\t\t}\n\t\t\t\tdata['result']['value'] = App.Fields.Double.formatToDisplay(data['result']['value']);\n\t\t\t\t//Adding or update details in the list\n\t\t\t\tif (form.find('.addView').val() == 'true') {\n\t\t\t\t\tthisInstance.addDetails(data['result']);\n\t\t\t\t} else {\n\t\t\t\t\tthisInstance.updateDetails(data['result'], currentTrElement);\n\t\t\t\t}\n\t\t\t\t//show notification after details saved\n\t\t\t\tSettings_Vtiger_Index_Js.showMessage({\n\t\t\t\t\ttext: app.vtranslate('JS_SAVE_CHANGES')\n\t\t\t\t});\n\t\t\t});\n\t\t}).fail((data, err) => {\n\t\t\tsaveButton.prop('disabled', false);\n\t\t\treturn false;\n\t\t});\n\t},\n\t/*\n\t * Function to add the Details in the list after saving\n\t */\n\taddDetails: function (details) {\n\t\tlet container = jQuery('#inventory'),\n\t\t\tcurrency = jQuery('#currency'),\n\t\t\tsymbol = '%',\n\t\t\ttable = $('.inventoryTable', container);\n\t\tif (currency.length > 0) {\n\t\t\tcurrency = JSON.parse(currency.val());\n\t\t\tsymbol = currency.currency_symbol;\n\t\t}\n\t\tif (details.default === 1) {\n\t\t\ttable.find('.default').prop('checked', false);\n\t\t}\n\t\tlet trElement = $(`<tr class=\"opacity\" data-id=\"${details.id}\">\n\t\t\t\t\t<td class=\"textAlignCenter ${details.row_type}\"><label class=\"name\">${details.name}</label></td>\n\t\t\t\t\t<td class=\"textAlignCenter ${details.row_type}\"><span class=\"value\">${details.value} ${symbol}</span></td>\n\t\t\t\t\t<td class=\"textAlignCenter ${details.row_type}\">\n\t\t\t\t\t<div class=\"float-right  w-50 d-flex justify-content-between mr-2\">\n\t\t\t\t\t\t<input class=\"status js-update-field mt-2\" checked type=\"checkbox\">\n\t\t\t\t\t\t<div class=\"actions\">\n\t\t\t\t\t\t\t<button class=\"btn btn-info btn-sm text-white editInventory u-cursor-pointer\" data-url=\"${details._editurl}\">\n\t\t\t\t\t\t\t<span title=\"Edycja\" class=\"fas fa-edit alignBottom\"></span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<button class=\"removeInventory u-cursor-pointer btn btn-danger btn-sm text-white\" data-url=\"${details._editurl}\">\n\t\t\t\t\t\t\t<span title=\"UsuÅ„\" class=\"fas fa-trash-alt alignBottom\"></span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t</td>\n\t\t\t\t\t</tr>`);\n\t\ttable.append(trElement);\n\t},\n\t/*\n\t * Function to update the details in the list after edit\n\t */\n\tupdateDetails: function (data, currentTrElement) {\n\t\tvar currency = jQuery('#currency');\n\t\tvar symbol = '%';\n\t\tif (currency.length > 0) {\n\t\t\tcurrency = JSON.parse(currency.val());\n\t\t\tsymbol = currency.currency_symbol;\n\t\t}\n\t\tcurrentTrElement.find('.name').text(data['name']);\n\t\tcurrentTrElement.find('.value').text(data['value'] + ' ' + symbol);\n\t\tif (data['status'] === 0) {\n\t\t\tcurrentTrElement.find('.status').prop('checked', true);\n\t\t} else {\n\t\t\tcurrentTrElement.find('.status').prop('checked', false);\n\t\t}\n\t\tif (data['default'] === 1) {\n\t\t\tlet table = $('.inventoryTable');\n\t\t\ttable.find('.default').prop('checked', false);\n\t\t\tcurrentTrElement.find('.default').prop('checked', true);\n\t\t} else {\n\t\t\tcurrentTrElement.find('.default').prop('checked', false);\n\t\t}\n\t},\n\t/*\n\t * Function to validate the Name to avoid duplicates\n\t */\n\tvalidateName: function (data) {\n\t\tvar thisInstance = this;\n\t\tvar aDeferred = jQuery.Deferred();\n\n\t\tvar name = data.name;\n\t\tvar form = jQuery('#formInventory');\n\t\tvar nameElement = form.find('[name=\"name\"]');\n\t\tif (!(name in thisInstance.duplicateCheckCache)) {\n\t\t\tthisInstance.checkDuplicateName(data).done(function (data) {\n\t\t\t\tthisInstance.duplicateCheckCache[name] = data['success'];\n\t\t\t\tif (data['success']) {\n\t\t\t\t\tthisInstance.duplicateCheckCache['message'] = data['message'];\n\t\t\t\t\tnameElement.validationEngine('showPrompt', data['message'], 'error', 'bottomLeft', true);\n\t\t\t\t\taDeferred.reject(data);\n\t\t\t\t}\n\t\t\t\taDeferred.resolve(data);\n\t\t\t}).fail(function (data, err) {\n\t\t\t\taDeferred.reject(data);\n\t\t\t});\n\t\t} else {\n\t\t\tif (thisInstance.duplicateCheckCache[name] == true) {\n\t\t\t\tvar result = thisInstance.duplicateCheckCache['message'];\n\t\t\t\tnameElement.validationEngine('showPrompt', result, 'error', 'bottomLeft', true);\n\t\t\t\taDeferred.reject();\n\t\t\t} else {\n\t\t\t\taDeferred.resolve();\n\t\t\t}\n\t\t}\n\t\treturn aDeferred.promise();\n\t},\n\t/*\n\t * Function to check Duplication of inventory Name\n\t */\n\tcheckDuplicateName: function (details) {\n\t\tvar aDeferred = jQuery.Deferred();\n\t\tvar name = details.name;\n\t\tvar id = details.id;\n\t\tvar moduleName = app.getModuleName();\n\t\tvar params = {\n\t\t\t'module': moduleName,\n\t\t\t'parent': app.getParentModuleName(),\n\t\t\t'action': 'SaveAjax',\n\t\t\t'mode': 'checkDuplicateName',\n\t\t\t'name': name,\n\t\t\t'id': id,\n\t\t\t'view': app.getViewName()\n\t\t}\n\n\t\tAppConnector.request(params).done(function (data) {\n\t\t\tif (typeof data == 'string') {\n\t\t\t\tdata = JSON.parse(data);\n\t\t\t}\n\t\t\tvar response = data['result'];\n\t\t\taDeferred.resolve(response);\n\t\t}).fail(function (error, err) {\n\t\t\taDeferred.reject(error, err);\n\t\t});\n\t\treturn aDeferred.promise();\n\t},\n\t/*\n\t * Function to update status as enabled or disabled\n\t */\n\tupdateCheckbox: function (currentTarget) {\n\t\tvar aDeferred = jQuery.Deferred();\n\n\t\tvar currentTrElement = currentTarget.closest('tr');\n\t\tvar id = currentTrElement.data('id');\n\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t'position': 'html',\n\t\t\t'blockInfo': {\n\t\t\t\t'enabled': true\n\t\t\t}\n\t\t});\n\t\tvar updatedCheckbox = currentTarget.data('field-name');\n\n\t\tvar params = {\n\t\t\t'module': app.getModuleName(),\n\t\t\t'parent': app.getParentModuleName(),\n\t\t\t'action': 'SaveAjax',\n\t\t\t'id': id,\n\t\t\t'view': app.getViewName(),\n\t\t}\n\n\t\tif (updatedCheckbox === 'status') {\n\t\t\tparams.status = currentTarget.is(':checked') ? 0 : 1;\n\t\t} else if (updatedCheckbox === 'default') {\n\t\t\tparams.default = currentTarget.is(':checked') ? 1 : 0;\n\t\t\tlet table = $('.inventoryTable');\n\t\t\tif (params.default === 1) {\n\t\t\t\ttable.find('.default').not(currentTarget).prop('checked', false);\n\t\t\t}\n\t\t}\n\n\t\tAppConnector.request(params).done(function (data) {\n\t\t\tprogressIndicatorElement.progressIndicator({'mode': 'hide'});\n\t\t\taDeferred.resolve(data);\n\t\t}).fail(function (error, err) {\n\t\t\tprogressIndicatorElement.progressIndicator({'mode': 'hide'});\n\t\t\taDeferred.reject(error);\n\t\t});\n\t\treturn aDeferred.promise();\n\t},\n\tremoveInventory: function (inventoryElement) {\n\t\tvar message = app.vtranslate('JS_DELETE_INVENTORY_CONFIRMATION');\n\t\tVtiger_Helper_Js.showConfirmationBox({'message': message}).done(function (e) {\n\t\t\tvar params = {};\n\t\t\tparams['view'] = app.getViewName();\n\t\t\tparams['id'] = inventoryElement.data('id');\n\t\t\tapp.saveAjax('deleteInventory', params).done(function (data) {\n\t\t\t\tSettings_Vtiger_Index_Js.showMessage({type: 'success', text: data.result.message});\n\t\t\t\tinventoryElement.remove();\n\t\t\t});\n\t\t});\n\t},\n\t/*\n\t * Function to register all actions in the List\n\t */\n\tregisterActions: function () {\n\t\tvar thisInstance = this;\n\t\tvar container = jQuery('#inventory');\n\t\t//register click event for Add New Inventory button\n\t\tcontainer.find('.addInventory').on('click', function (e) {\n\t\t\tvar addInventoryButton = jQuery(e.currentTarget);\n\t\t\tvar createUrl = addInventoryButton.data('url');\n\t\t\tthisInstance.edit(createUrl);\n\t\t});\n\n\t\t//register event for edit icon\n\t\tcontainer.on('click', '.editInventory', function (e) {\n\t\t\tvar editButton = jQuery(e.currentTarget);\n\t\t\tvar currentTrElement = editButton.closest('tr');\n\t\t\tthisInstance.edit(editButton.data('url'), currentTrElement);\n\t\t});\n\n\t\t//register event for edit icon\n\t\tcontainer.on('click', '.removeInventory', function (e) {\n\t\t\tvar removeInventoryButton = jQuery(e.currentTarget);\n\t\t\tvar currentTrElement = removeInventoryButton.closest('tr');\n\t\t\tthisInstance.removeInventory(currentTrElement);\n\t\t});\n\n\t\t//register event for checkbox to change the Status\n\t\tcontainer.on('click', '[type=\"checkbox\"]', function (e) {\n\t\t\tvar currentTarget = jQuery(e.currentTarget);\n\n\t\t\tthisInstance.updateCheckbox(currentTarget).done(function (data) {\n\t\t\t\tvar params = {};\n\t\t\t\tparams.text = app.vtranslate('JS_SAVE_CHANGES');\n\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t});\n\t\t});\n\n\t},\n\tregisterEvents: function () {\n\t\tthis.registerActions();\n\t}\n});\n"],"names":["jQuery","Class","url","currentTrElement","aDeferred","Deferred","thisInstance","progressIndicatorElement","progressIndicator","request","done","data","callBackFunction","duplicateCheckCache","form","params","app","validationEngineOptions","onValidationComplete","valid","saveDetails","validationEngine","on","e","preventDefault","showModalWindow","fail","error","reject","promise","serializeFormData","saveButton","find","prop","validateName","$","module","getModuleName","parent","getParentModuleName","action","view","getViewName","hideModalWindow","JSON","parse","App","Fields","Double","formatToDisplay","val","addDetails","updateDetails","showMessage","vtranslate","err","details","container","currency","symbol","table","length","currency_symbol","default","trElement","id","row_type","name","value","_editurl","append","text","nameElement","checkDuplicateName","resolve","result","moduleName","response","currentTarget","closest","updatedCheckbox","status","is","not","inventoryElement","message","showConfirmationBox","saveAjax","type","remove","addInventoryButton","createUrl","edit","editButton","removeInventoryButton","removeInventory","updateCheckbox","registerActions"],"mappings":"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"}