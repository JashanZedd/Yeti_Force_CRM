{"version":3,"file":"Edit.min.js","sources":["Edit.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nSettings_Vtiger_Edit_Js('Settings_MailSmtp_Edit_Js', {}, {\n\tregisterSubmitForm: function () {\n\t\tvar form = this.getForm();\n\t\tform.on('submit', function (e) {\n\t\t\tif (form.validationEngine('validate') === true) {\n\t\t\t\tvar paramsForm = form.serializeFormData();\n\t\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\t\tblockInfo: {'enabled': true}\n\t\t\t\t});\n\t\t\t\tAppConnector.request(paramsForm).done(function (data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({'mode': 'hide'});\n\t\t\t\t\tif (true == data.result.success) {\n\t\t\t\t\t\twindow.location.href = data.result.url;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tform.find('.alert').removeClass('d-none');\n\t\t\t\t\t\tform.find('.alert p').text(data.result.message);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t} else {\n\t\t\t\tapp.formAlignmentAfterValidation(form);\n\t\t\t}\n\t\t})\n\t},\n\t/**\n\t * Register events to preview password\n\t */\n\tregisterPreviewPassword: function () {\n\t\tconst container = this.getForm();\n\t\tconst button = container.find('.previewPassword');\n\t\tbutton.on('mousedown', function (e) {\n\t\t\tcontainer.find('[name=\"' + $(e.currentTarget).data('targetName') + '\"]').attr('type', 'text');\n\t\t});\n\t\tbutton.on('mouseup', function (e) {\n\t\t\tcontainer.find('[name=\"' + $(e.currentTarget).data('targetName') + '\"]').attr('type', 'password');\n\t\t});\n\t\tbutton.on('mouseout', function (e) {\n\t\t\tcontainer.find('[name=\"' + $(e.currentTarget).data('targetName') + '\"]').attr('type', 'password');\n\t\t});\n\t},\n\tregisterSaveSendMail() {\n\t\tconst form = this.getForm();\n\t\tform.find(\".js-save-send-mail\").on('click', () => {\n\t\t\tif (form.find(\".saveMailContent\").hasClass(\"d-none\")) {\n\t\t\t\tform.find(\".js-smtp-host\").attr('data-validation-engine', 'validate[required]');\n\t\t\t\tform.find(\".js-smtp-port\").attr('data-validation-engine', 'validate[required,custom[integer]]');\n\t\t\t\tform.find(\".js-smtp-password\").attr('data-validation-engine', 'validate[required]');\n\t\t\t\tform.find(\".js-smtp-username\").attr('data-validation-engine', 'validate[required]');\n\t\t\t\tform.find(\".js-smtp-folder\").attr('data-validation-engine', 'validate[required]');\n\t\t\t\tform.find(\".saveMailContent\").removeClass(\"d-none\");\n\t\t\t} else {\n\t\t\t\tform.find(\".js-smtp-host\").removeAttr('data-validation-engine');\n\t\t\t\tform.find(\".js-smtp-port\").removeAttr('data-validation-engine');\n\t\t\t\tform.find(\".js-smtp-password\").removeAttr('data-validation-engine');\n\t\t\t\tform.find(\".js-smtp-username\").removeAttr('data-validation-engine');\n\t\t\t\tform.find(\".js-smtp-folder\").removeAttr('data-validation-engine');\n\t\t\t\tform.find(\".saveMailContent\").addClass(\"d-none\");\n\t\t\t}\n\t\t});\n\t},\n\tregisterEvents: function () {\n\t\tconst form = this.getForm();\n\t\tif (form.length) {\n\t\t\tform.validationEngine(app.validationEngineOptions);\n\t\t\tform.find(\"[data-inputmask]\").inputmask();\n\t\t}\n\t\tthis.registerSubmitForm();\n\t\tthis.registerPreviewPassword();\n\t\tthis.registerSaveSendMail();\n\t}\n})\n"],"names":["Settings_Vtiger_Edit_Js","form","getForm","on","e","validationEngine","paramsForm","serializeFormData","progressIndicatorElement","jQuery","progressIndicator","request","done","data","result","success","location","href","url","find","removeClass","text","message","formAlignmentAfterValidation","container","button","$","currentTarget","attr","hasClass","removeAttr","addClass","length","app","validationEngineOptions","inputmask","registerSubmitForm","registerPreviewPassword","registerSaveSendMail"],"mappings":"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"}