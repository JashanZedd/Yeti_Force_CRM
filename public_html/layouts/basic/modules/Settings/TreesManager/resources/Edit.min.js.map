{"version":3,"file":"Edit.min.js","sources":["Edit.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class(\n\t'Settings_TreesManager_Edit_Js',\n\t{},\n\t{\n\t\tjstreeInstance: false,\n\t\tjstreeLastID: 0,\n\t\tregisterEvents: function () {\n\t\t\tconst self = this,\n\t\t\t\teditContainer = $('#EditView'),\n\t\t\t\tjstreeInstance = self.createTree();\n\t\t\teditContainer.validationEngine();\n\t\t\t$('.addNewElementBtn').on('click', () => {\n\t\t\t\tconst newElement = $('input.addNewElement'),\n\t\t\t\t\tref = jstreeInstance.jstree(true);\n\t\t\t\tif (newElement.val() === '') {\n\t\t\t\t\tconst message = app.vtranslate('JS_FIELD_CAN_NOT_BE_EMPTY');\n\t\t\t\t\tnewElement.validationEngine('showPrompt', message, 'error', 'bottomLeft', true);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tself.jstreeLastID += 1;\n\t\t\t\tref.create_node(\n\t\t\t\t\t'#',\n\t\t\t\t\t{\n\t\t\t\t\t\tid: self.jstreeLastID,\n\t\t\t\t\t\ttext: newElement.val(),\n\t\t\t\t\t\ticon: false\n\t\t\t\t\t},\n\t\t\t\t\t'last'\n\t\t\t\t);\n\t\t\t\tnewElement.val('');\n\t\t\t});\n\t\t\t$('.saveTree').on('click', () => {\n\t\t\t\tjstreeInstance.jstree('deselect_all', true);\n\t\t\t\tconst json = jstreeInstance.jstree('get_json');\n\t\t\t\tlet forSave = [];\n\t\t\t\t$.each(json, function (index, value) {\n\t\t\t\t\tif (value.text == value.li_attr.text) {\n\t\t\t\t\t\tvalue.text = value.li_attr.key;\n\t\t\t\t\t}\n\t\t\t\t\tforSave[index] = value;\n\t\t\t\t});\n\t\t\t\t$('#treeValues').val(JSON.stringify(forSave));\n\t\t\t\teditContainer.submit();\n\t\t\t});\n\t\t\t$('.addNewElement').on('keydown', (event) => {\n\t\t\t\tif (event.keyCode == 13) {\n\t\t\t\t\t$('.addNewElementBtn').trigger('click');\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tcreateTree: function () {\n\t\t\tconst self = this;\n\t\t\tif (!this.jstreeInstance) {\n\t\t\t\tself.jstreeLastID = parseInt($('#treeLastID').val());\n\t\t\t\tlet treeValues = $('#treeValues').val(),\n\t\t\t\t\tdataTree = JSON.parse(treeValues);\n\t\t\t\tself.jstreeInstance = $('#treeContents');\n\t\t\t\tself.jstreeInstance.jstree({\n\t\t\t\t\tcore: {\n\t\t\t\t\t\tdata: dataTree,\n\t\t\t\t\t\tthemes: {\n\t\t\t\t\t\t\tname: 'proton',\n\t\t\t\t\t\t\tresponsive: true\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcheck_callback: true\n\t\t\t\t\t},\n\t\t\t\t\tcontextmenu: {\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\tcreate: {\n\t\t\t\t\t\t\t\tlabel: app.vtranslate('JS_JSTREE_CREATE'),\n\t\t\t\t\t\t\t\taction: function (data) {\n\t\t\t\t\t\t\t\t\tlet treeInstance = $.jstree.reference(data.reference),\n\t\t\t\t\t\t\t\t\t\tselectedNode = treeInstance.get_node(data.reference);\n\t\t\t\t\t\t\t\t\tself.jstreeLastID = self.jstreeLastID + 1;\n\t\t\t\t\t\t\t\t\ttreeInstance.create_node(\n\t\t\t\t\t\t\t\t\t\tselectedNode,\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tid: self.jstreeLastID,\n\t\t\t\t\t\t\t\t\t\t\ttext: app.vtranslate('JS_NEW_ITEM')\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t'last',\n\t\t\t\t\t\t\t\t\t\tfunction (new_node) {\n\t\t\t\t\t\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\t\t\t\t\t\ttreeInstance.edit(new_node);\n\t\t\t\t\t\t\t\t\t\t\t}, 0);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\trename: {\n\t\t\t\t\t\t\t\tlabel: app.vtranslate('JS_JSTREE_RENAME'),\n\t\t\t\t\t\t\t\taction: function (data) {\n\t\t\t\t\t\t\t\t\tlet treeInstance = $.jstree.reference(data.reference),\n\t\t\t\t\t\t\t\t\t\tselectedNode = treeInstance.get_node(data.reference);\n\t\t\t\t\t\t\t\t\ttreeInstance.edit(selectedNode);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tchangeIcon: {\n\t\t\t\t\t\t\t\tlabel: app.vtranslate('JS_JSTREE_CHANGE_ICON'),\n\t\t\t\t\t\t\t\taction: function (data) {\n\t\t\t\t\t\t\t\t\tlet treeInstance = $.jstree.reference(data.reference),\n\t\t\t\t\t\t\t\t\t\tselectedNode = treeInstance.get_node(data.reference);\n\t\t\t\t\t\t\t\t\tApp.Components.Icons.modalView().done((media) => {\n\t\t\t\t\t\t\t\t\t\tif (media.type === 'icon') {\n\t\t\t\t\t\t\t\t\t\t\tself.jstreeInstance.jstree(true).set_icon(selectedNode.id, media.name);\n\t\t\t\t\t\t\t\t\t\t} else if (media.type === 'image') {\n\t\t\t\t\t\t\t\t\t\t\tself.jstreeInstance.jstree(true).set_icon(selectedNode.id, media.src);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tremove: {\n\t\t\t\t\t\t\t\tlabel: app.vtranslate('JS_JSTREE_REMOVE'),\n\t\t\t\t\t\t\t\taction: function (data) {\n\t\t\t\t\t\t\t\t\tlet treeInstance = $.jstree.reference(data.reference),\n\t\t\t\t\t\t\t\t\t\tid = treeInstance.get_selected(),\n\t\t\t\t\t\t\t\t\t\tstatus = true;\n\t\t\t\t\t\t\t\t\t$.each(id, function (_index, value) {\n\t\t\t\t\t\t\t\t\t\tlet menu = treeInstance.get_node(value);\n\t\t\t\t\t\t\t\t\t\tif (menu.children.length > 0) {\n\t\t\t\t\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({\n\t\t\t\t\t\t\t\t\t\t\t\ttext: app.vtranslate('JS_YOU_CANNOT_DELETE_PERENT_ITEM'),\n\t\t\t\t\t\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\tstatus = false;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tif (status) {\n\t\t\t\t\t\t\t\t\t\tself.deleteItemEvent(id, treeInstance).done(function (e) {\n\t\t\t\t\t\t\t\t\t\t\tif (e.length > 0) {\n\t\t\t\t\t\t\t\t\t\t\t\t$.each(id, function (_index, value) {\n\t\t\t\t\t\t\t\t\t\t\t\t\ttreeInstance.delete_node(value);\n\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tccp: {\n\t\t\t\t\t\t\t\tlabel: app.vtranslate('JS_JSTREE_CCP'),\n\t\t\t\t\t\t\t\tsubmenu: {\n\t\t\t\t\t\t\t\t\tcut: {\n\t\t\t\t\t\t\t\t\t\tlabel: app.vtranslate('JS_JSTREE_CUT'),\n\t\t\t\t\t\t\t\t\t\taction: function (data) {\n\t\t\t\t\t\t\t\t\t\t\tlet treeInstance = $.jstree.reference(data.reference),\n\t\t\t\t\t\t\t\t\t\t\t\tselectedNode = treeInstance.get_node(data.reference);\n\t\t\t\t\t\t\t\t\t\t\tif (treeInstance.is_selected(selectedNode)) {\n\t\t\t\t\t\t\t\t\t\t\t\ttreeInstance.cut(treeInstance.get_top_selected());\n\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\ttreeInstance.cut(selectedNode);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tpaste: {\n\t\t\t\t\t\t\t\t\t\tlabel: app.vtranslate('JS_JSTREE_PASTE'),\n\t\t\t\t\t\t\t\t\t\taction: function (data) {\n\t\t\t\t\t\t\t\t\t\t\tlet treeInstance = $.jstree.reference(data.reference),\n\t\t\t\t\t\t\t\t\t\t\t\tselectedNode = treeInstance.get_node(data.reference);\n\t\t\t\t\t\t\t\t\t\t\ttreeInstance.paste(selectedNode);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tplugins: ['contextmenu', 'dnd']\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn this.jstreeInstance;\n\t\t},\n\t\tdeleteItemEvent: function (id, inst) {\n\t\t\tlet self = this,\n\t\t\t\taDeferred = jQuery.Deferred(),\n\t\t\t\tdata = inst.get_json();\n\t\t\t$.each(id, function (_index, e) {\n\t\t\t\tdata = self.checkChildren(e, data);\n\t\t\t});\n\t\t\tif (data.length == 0) {\n\t\t\t\tSettings_Vtiger_Index_Js.showMessage({\n\t\t\t\t\ttext: app.vtranslate('JS_YOU_CANNOT_DELETE_ALL_THE_ITEMS'),\n\t\t\t\t\ttype: 'error'\n\t\t\t\t});\n\t\t\t\taDeferred.resolve();\n\t\t\t\treturn aDeferred.promise();\n\t\t\t}\n\t\t\tapp.showModalWindow(\n\t\t\t\tnull,\n\t\t\t\t'index.php?module=TreesManager&parent=Settings&view=ReplaceTreeItem',\n\t\t\t\tfunction (wizardContainer) {\n\t\t\t\t\tlet jstreeInstanceReplace = wizardContainer.find('#treePopupContents');\n\t\t\t\t\tjstreeInstanceReplace\n\t\t\t\t\t\t.jstree({\n\t\t\t\t\t\t\tcore: {\n\t\t\t\t\t\t\t\tdata: data,\n\t\t\t\t\t\t\t\tthemes: {\n\t\t\t\t\t\t\t\t\tname: 'proton',\n\t\t\t\t\t\t\t\t\tresponsive: true\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.on('loaded.jstree', function () {\n\t\t\t\t\t\t\t$(this).jstree('open_all');\n\t\t\t\t\t\t});\n\t\t\t\t\twizardContainer.find('.js-modal__save').on('click', () => {\n\t\t\t\t\t\tlet selected = jstreeInstanceReplace.jstree('get_selected'),\n\t\t\t\t\t\t\treplaceIdsElement = $('#replaceIds'),\n\t\t\t\t\t\t\treplaceIds = replaceIdsElement.val(),\n\t\t\t\t\t\t\tdataTree = [];\n\t\t\t\t\t\tif (replaceIds !== '') {\n\t\t\t\t\t\t\tdataTree = JSON.parse(replaceIds);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!selected.length || selected.length > 1) {\n\t\t\t\t\t\t\tlet message = 'JS_ONLY_ONE_ITEM_SELECTED';\n\t\t\t\t\t\t\tif (!selected.length) {\n\t\t\t\t\t\t\t\tmessage = 'JS_NO_ITEM_SELECTED';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({\n\t\t\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\t\t\ttext: app.vtranslate(message)\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdataTree = $.merge(dataTree, [{ old: id, new: selected }]);\n\t\t\t\t\t\treplaceIdsElement.val(JSON.stringify(dataTree));\n\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\taDeferred.resolve(selected);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t);\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\tcheckChildren: function (id, data) {\n\t\t\tlet self = this,\n\t\t\t\tdataNew = [];\n\t\t\tfor (let key in data) {\n\t\t\t\tif (data[key].id != id) {\n\t\t\t\t\tif (data[key].children.length) {\n\t\t\t\t\t\tdata[key].children = self.checkChildren(id, data[key].children);\n\t\t\t\t\t}\n\t\t\t\t\tdataNew.push(data[key]);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn dataNew;\n\t\t}\n\t}\n);\n"],"names":["jQuery","Class","jstreeInstance","jstreeLastID","registerEvents","self","editContainer","$","createTree","validationEngine","on","newElement","ref","jstree","val","app","vtranslate","message","create_node","id","text","icon","forSave","each","json","index","value","li_attr","key","JSON","stringify","submit","event","keyCode","trigger","preventDefault","parseInt","treeValues","dataTree","parse","core","data","themes","name","responsive","check_callback","contextmenu","items","create","label","action","reference","selectedNode","treeInstance","get_node","new_node","setTimeout","edit","rename","changeIcon","App","Components","Icons","modalView","done","media","type","set_icon","src","remove","get_selected","status","_index","menu","children","length","Settings_Vtiger_Index_Js","showMessage","deleteItemEvent","e","delete_node","ccp","submenu","cut","is_selected","get_top_selected","paste","plugins","inst","aDeferred","Deferred","get_json","checkChildren","resolve","promise","showModalWindow","wizardContainer","find","jstreeInstanceReplace","replaceIdsElement","replaceIds","selected","merge","old","new","hideModalWindow","dataNew","push"],"mappings":"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"}