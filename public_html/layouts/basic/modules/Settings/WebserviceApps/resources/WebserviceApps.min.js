"use strict";$.Class("Settings_WebserviceApps_Index_Js",{},{getContainer:function(){return this.container},registerTableEvents:function(){var thisInstance=this,container=this.container=$(".configContainer");container.find(".edit").on("click",(function(e){var trRow=$(e.currentTarget).closest("tr");thisInstance.showFormToEditKey(trRow.data("id"))})),container.find(".remove").on("click",(function(e){var currentTrElement=jQuery(e.currentTarget).closest("tr"),message=app.vtranslate("JS_DELETE_CONFIRMATION");Vtiger_Helper_Js.showConfirmationBox({message:message}).done((function(e){var params={module:app.getModuleName(),parent:app.getParentModuleName(),action:"Delete",id:currentTrElement.data("id")},progress=jQuery.progressIndicator();AppConnector.request(params).done((function(data){progress.progressIndicator({mode:"hide"}),thisInstance.loadTable()}))}))}))},loadTable:function(){var thisInstance=this,params={module:app.getModuleName(),parent:app.getParentModuleName(),view:"Index"},progress=jQuery.progressIndicator();AppConnector.request(params).done((function(data){progress.progressIndicator({mode:"hide"}),$(".configContainer").html(data),thisInstance.registerTableEvents()}))},showFormToEditKey:function(id){var thisInstance=this,params={module:app.getModuleName(),parent:app.getParentModuleName(),view:"CreateApp"};""!=id&&(params.record=id);var progress=jQuery.progressIndicator();AppConnector.request(params).done((function(data){progress.progressIndicator({mode:"hide"}),app.showModalWindow(data,(function(container){var prevButton=container.find(".previewPassword"),password=container.find('[name="pass"]');prevButton.on("mousedown",(function(e){password.attr("type","text")})),prevButton.on("mouseup",(function(e){password.attr("type","password")})),prevButton.on("mouseout",(function(e){password.attr("type","password")}));var clipboard=App.Fields.Text.registerCopyClipboard(container,".copyPassword");container.one("hidden.bs.modal",(function(){clipboard.destroy()}));var form=container.find("form");form.validationEngine(app.validationEngineOptions),container.find('[name="saveButton"]').on("click",(function(){if(form.validationEngine("validate")){var params={module:app.getModuleName(),parent:app.getParentModuleName(),action:"SaveAjax",name:container.find('[name="name"]').val(),url:container.find('[name="addressUrl"]').val(),status:container.find('[name="status"]').is(":checked"),type:container.find(".typeServer").val(),pass:password.val()};""!=id&&(params.id=id),AppConnector.request(params).done((function(data){!0===data.result?(thisInstance.loadTable(),app.hideModalWindow()):void 0!==data.result.error&&Vtiger_Helper_Js.showPnotify(data.result.error)}))}}))}))}))},registerAddButton:function(){var thisInstance=this;$(".createKey").on("click",(function(){thisInstance.showFormToEditKey()}))},registerEvents:function(){this.registerAddButton(),this.registerTableEvents(),App.Fields.Text.registerCopyClipboard(this.getContainer())}});
//# sourceMappingURL=WebserviceApps.min.js.map
