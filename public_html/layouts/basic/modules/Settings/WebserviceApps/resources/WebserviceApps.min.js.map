{"version":3,"file":"WebserviceApps.min.js","sources":["WebserviceApps.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\n$.Class('Settings_WebserviceApps_Index_Js', {}, {\n\t/**\n\t * Get container\n\t *\n\t * @returns {HTMLElement|jQuery}\n\t */\n\tgetContainer() {\n\t\treturn this.container;\n\t},\n\t/**\n\t * Register actions for record\n\t */\n\tregisterTableEvents: function () {\n\t\tvar thisInstance = this;\n\t\tconst container = this.container = $('.configContainer');\n\t\tcontainer.find('.edit').on('click', function (e) {\n\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\tvar trRow = currentTarget.closest('tr');\n\t\t\tthisInstance.showFormToEditKey(trRow.data('id'));\n\t\t});\n\t\tcontainer.find('.remove').on('click', function (e) {\n\t\t\tvar removeButton = jQuery(e.currentTarget);\n\t\t\tvar currentTrElement = removeButton.closest('tr');\n\t\t\tvar message = app.vtranslate('JS_DELETE_CONFIRMATION');\n\t\t\tVtiger_Helper_Js.showConfirmationBox({ 'message': message }).done(function (e) {\n\t\t\t\tvar params = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\taction: 'Delete',\n\t\t\t\t\tid: currentTrElement.data('id')\n\t\t\t\t};\n\t\t\t\tvar progress = jQuery.progressIndicator();\n\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\tprogress.progressIndicator({ 'mode': 'hide' });\n\t\t\t\t\tthisInstance.loadTable();\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t},\n\t/**\n\t * Refresh tables with records\n\t */\n\tloadTable: function () {\n\t\tvar thisInstance = this;\n\t\tvar params = {\n\t\t\tmodule: app.getModuleName(),\n\t\t\tparent: app.getParentModuleName(),\n\t\t\tview: 'Index',\n\t\t};\n\t\tvar progress = jQuery.progressIndicator();\n\t\tAppConnector.request(params).done(function (data) {\n\t\t\tprogress.progressIndicator({ 'mode': 'hide' });\n\t\t\t$('.configContainer').html(data);\n\t\t\tthisInstance.registerTableEvents();\n\t\t});\n\t},\n\t/**\n\t * Show forms to edit or create record\n\t * @param {int} id\n\t */\n\tshowFormToEditKey: function (id) {\n\t\tvar thisInstance = this;\n\t\tvar params = {\n\t\t\tmodule: app.getModuleName(),\n\t\t\tparent: app.getParentModuleName(),\n\t\t\tview: 'CreateApp',\n\t\t};\n\t\tif (id != '') {\n\t\t\tparams['record'] = id;\n\t\t}\n\t\tvar progress = jQuery.progressIndicator();\n\t\tAppConnector.request(params).done(function (data) {\n\t\t\tprogress.progressIndicator({ 'mode': 'hide' });\n\t\t\tapp.showModalWindow(data, function (container) {\n\t\t\t\tconst prevButton = container.find('.previewPassword');\n\t\t\t\tconst password = container.find('[name=\"pass\"]');\n\t\t\t\tprevButton.on('mousedown', function (e) {\n\t\t\t\t\tpassword.attr('type', 'text');\n\t\t\t\t});\n\t\t\t\tprevButton.on('mouseup', function (e) {\n\t\t\t\t\tpassword.attr('type', 'password');\n\t\t\t\t});\n\t\t\t\tprevButton.on('mouseout', function (e) {\n\t\t\t\t\tpassword.attr('type', 'password');\n\t\t\t\t});\n\t\t\t\tconst clipboard = App.Fields.Text.registerCopyClipboard(container, '.copyPassword');\n\t\t\t\tcontainer.one('hidden.bs.modal', function () {\n\t\t\t\t\tclipboard.destroy();\n\t\t\t\t});\n\t\t\t\tvar form = container.find('form');\n\t\t\t\tform.validationEngine(app.validationEngineOptions);\n\t\t\t\tcontainer.find('[name=\"saveButton\"]').on('click', function () {\n\t\t\t\t\tif (form.validationEngine('validate')) {\n\t\t\t\t\t\tvar params = {\n\t\t\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\t\t\taction: 'SaveAjax',\n\t\t\t\t\t\t\tname: container.find('[name=\"name\"]').val(),\n\t\t\t\t\t\t\turl: container.find('[name=\"addressUrl\"]').val(),\n\t\t\t\t\t\t\tstatus: container.find('[name=\"status\"]').is(':checked'),\n\t\t\t\t\t\t\ttype: container.find('.typeServer').val(),\n\t\t\t\t\t\t\tpass: password.val(),\n\t\t\t\t\t\t};\n\t\t\t\t\t\tif (id != '') {\n\t\t\t\t\t\t\tparams['id'] = id;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\t\t\tif (data.result === true) {\n\t\t\t\t\t\t\t\tthisInstance.loadTable();\n\t\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\t} else if (typeof data.result.error !== 'undefined') {\n\t\t\t\t\t\t\t\tVtiger_Helper_Js.showPnotify(data.result.error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t},\n\t/**\n\t * Register button to create record\n\t */\n\tregisterAddButton: function () {\n\t\tvar thisInstance = this\n\t\t$('.createKey').on('click', function () {\n\t\t\tthisInstance.showFormToEditKey();\n\t\t});\n\t},\n\t/**\n\t * Main function\n\t */\n\tregisterEvents: function () {\n\t\tthis.registerAddButton();\n\t\tthis.registerTableEvents();\n\t\tApp.Fields.Text.registerCopyClipboard(this.getContainer());\n\t}\n})\n"],"names":["$","Class","this","container","thisInstance","find","on","e","trRow","currentTarget","closest","showFormToEditKey","data","currentTrElement","jQuery","message","app","vtranslate","showConfirmationBox","done","params","getModuleName","getParentModuleName","progress","progressIndicator","request","mode","loadTable","html","registerTableEvents","id","showModalWindow","prevButton","password","attr","clipboard","App","Fields","Text","registerCopyClipboard","one","destroy","form","validationEngine","validationEngineOptions","val","is","result","hideModalWindow","error","showPnotify","registerAddButton","getContainer"],"mappings":"aAGAA,EAAEC,MAAM,mCAAoC,GAAI,gCAOvCC,KAAKC,+BAKQ,eAChBC,aAAeF,KACbC,UAAYD,KAAKC,UAAYH,EAAE,8BAC3BK,KAAK,SAASC,GAAG,SAAS,SAAUC,OAEzCC,MADgBR,EAAEO,EAAEE,eACEC,QAAQ,mBACrBC,kBAAkBH,MAAMI,KAAK,oBAEjCP,KAAK,WAAWC,GAAG,SAAS,SAAUC,OAE3CM,iBADeC,OAAOP,EAAEE,eACQC,QAAQ,MACxCK,QAAUC,IAAIC,WAAW,2CACZC,oBAAoB,CAAEH,QAAWA,UAAWI,MAAK,SAAUZ,OACvEa,OAAS,QACJJ,IAAIK,uBACJL,IAAIM,6BACJ,YACJT,iBAAiBD,KAAK,OAEvBW,SAAWT,OAAOU,iCACTC,QAAQL,QAAQD,MAAK,SAAUP,eAClCY,kBAAkB,CAAEE,KAAQ,sBACxBC,gCAQN,eACNvB,aAAeF,KACfkB,OAAS,QACJJ,IAAIK,uBACJL,IAAIM,2BACN,SAEHC,SAAWT,OAAOU,iCACTC,QAAQL,QAAQD,MAAK,SAAUP,eAClCY,kBAAkB,CAAEE,KAAQ,WACnC,oBAAoBE,KAAKhB,mBACdiB,4CAOI,SAAUC,QACxB1B,aAAeF,KACfkB,OAAS,QACJJ,IAAIK,uBACJL,IAAIM,2BACN,aAEG,IAANQ,YACH,OAAmBA,QAEhBP,SAAWT,OAAOU,iCACTC,QAAQL,QAAQD,MAAK,SAAUP,eAClCY,kBAAkB,CAAEE,KAAQ,aACjCK,gBAAgBnB,MAAM,SAAUT,eAC7B6B,WAAa7B,UAAUE,KAAK,oBAC5B4B,SAAW9B,UAAUE,KAAK,4BACrBC,GAAG,aAAa,SAAUC,YAC3B2B,KAAK,OAAQ,sBAEZ5B,GAAG,WAAW,SAAUC,YACzB2B,KAAK,OAAQ,0BAEZ5B,GAAG,YAAY,SAAUC,YAC1B2B,KAAK,OAAQ,mBAEjBC,UAAYC,IAAIC,OAAOC,KAAKC,sBAAsBpC,UAAW,2BACzDqC,IAAI,mBAAmB,qBACtBC,iBAEPC,KAAOvC,UAAUE,KAAK,aACrBsC,iBAAiB3B,IAAI4B,mCAChBvC,KAAK,uBAAuBC,GAAG,SAAS,cAC7CoC,KAAKC,iBAAiB,YAAa,KAClCvB,OAAS,QACJJ,IAAIK,uBACJL,IAAIM,6BACJ,gBACFnB,UAAUE,KAAK,iBAAiBwC,UACjC1C,UAAUE,KAAK,uBAAuBwC,aACnC1C,UAAUE,KAAK,mBAAmByC,GAAG,iBACvC3C,UAAUE,KAAK,eAAewC,WAC9BZ,SAASY,OAEN,IAANf,YACH,GAAeA,iBAEHL,QAAQL,QAAQD,MAAK,SAAUP,OACvB,IAAhBA,KAAKmC,qBACKpB,gBACTqB,wBACmC,IAAtBpC,KAAKmC,OAAOE,wBACZC,YAAYtC,KAAKmC,OAAOE,uCAW7B,eACd7C,aAAeF,OACjB,cAAcI,GAAG,SAAS,wBACdK,uCAMC,gBACVwC,yBACAtB,0BACDQ,OAAOC,KAAKC,sBAAsBrC,KAAKkD"}