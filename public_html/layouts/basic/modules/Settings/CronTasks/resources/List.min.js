Settings_Vtiger_List_Js("Settings_CronTasks_List_Js",{triggerEditEvent:function(a){AppConnector.request(a).then(function(c){app.showModalWindow(c);jQuery("#cronJobSaveAjax").validationEngine(app.validationEngineOptions);var b=Settings_CronTasks_List_Js.getInstance();b.registerSaveEvent()})}},{getListViewRecords:function(){var a=this;var c={module:app.getModuleName(),parent:app.getParentModuleName(),view:"List"};var b=jQuery.progressIndicator({position:"html",blockInfo:{enabled:true}});AppConnector.request(c).then(function(d){jQuery("#listViewContents").html(d);a.registerSortableEvent();b.progressIndicator({mode:"hide"})})},registerSaveEvent:function(){var a=this;jQuery("#cronJobSaveAjax").on("submit",function(j){var b=jQuery(j.currentTarget);var c=b.validationEngine("validate");if(c==true){var g=jQuery("#time_format").val();var k=jQuery("#frequencyValue");if(g=="hours"){var h=k.val()*60*60}else{h=k.val()*60}var l=app.vtranslate("JS_VALUE_SHOULD_NOT_BE_LESS_THAN");var i=jQuery("#minimumFrequency").val();var f=app.vtranslate("JS_MINUTES");if(h<i){k.validationEngine("showPrompt",l+" "+(i/60)+" "+f,"error");j.preventDefault();return}else{jQuery("#frequency").val(h)}var d=b.serializeFormData();AppConnector.request(d).then(function(e){if(typeof e.result!="undefined"&&e.result[0]==true){app.hideModalWindow();a.getListViewRecords()}})}j.preventDefault()})},registerSortableEvent:function(){var c=this;var a={};var b=jQuery("tbody",jQuery(".listViewEntriesTable"));b.sortable({helper:function(f,d){d.children().each(function(e,g){g=jQuery(g);g.width(g.width())});return d},containment:b,revert:true,update:function(f,d){jQuery("tbody tr").each(function(e){a[++e]=jQuery(this).data("id")});var g={sequencesList:JSON.stringify(a),module:app.getModuleName(),parent:app.getParentModuleName(),action:"UpdateSequence"};AppConnector.request(g).then(function(e){c.getListViewRecords()})}})},registerEvents:function(){this.registerSortableEvent()}});