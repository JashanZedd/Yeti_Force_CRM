{"version":3,"file":"Configuration.min.js","sources":["Configuration.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class('Settings_Notifications_Configuration_Js', {}, {\n\tcontainer: false,\n\t/**\n\t * Function to register the change event for layout editor modules list\n\t */\n\tregisterModulesChangeEvent: function (container) {\n\t\tvar thisInstance = this;\n\t\tcontainer.find('#supportedModule').on('change', function (e) {\n\t\t\tvar progress = thisInstance.progress();\n\t\t\tvar params = {};\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['view'] = app.getViewName();\n\t\t\tparams['srcModule'] = jQuery(e.currentTarget).val();\n\t\t\tAppConnector.requestPjax(params).done(function (data) {\n\t\t\t\tprogress.progressIndicator({'mode': 'hide'});\n\t\t\t\tcontainer.html(data);\n\t\t\t\tApp.Fields.Picklist.changeSelectElementView(container);\n\t\t\t\tthisInstance.registerEvents();\n\t\t\t}).fail(function (textStatus, errorThrown) {\n\t\t\t\tprogress.progressIndicator({'mode': 'hide'});\n\t\t\t\tapp.errorLog(textStatus, errorThrown);\n\t\t\t});\n\t\t});\n\t},\n\tprogress: function () {\n\t\treturn jQuery.progressIndicator({\n\t\t\t'position': 'html',\n\t\t\t'blockInfo': {\n\t\t\t\t'enabled': true\n\t\t\t}\n\t\t});\n\t},\n\tregisterButtonEvents: function (container) {\n\t\tvar thisInstance = this;\n\t\tcontainer.find('.wrapperTrash, .wrapperLock').on('click', '.fas', function (e) {\n\t\t\tvar progress = thisInstance.progress();\n\t\t\tvar element = jQuery(e.currentTarget);\n\t\t\tvar mode = element.data('mode');\n\t\t\tvar dataElement = element.closest('tr');\n\t\t\tvar params = {\n\t\t\t\tmembers: dataElement.data('value'),\n\t\t\t\tsrcModule: container.find('#supportedModule').val()\n\t\t\t};\n\t\t\tif (mode === 'lock') {\n\t\t\t\tparams.lock = dataElement.data('lock') === 0 ? 1 : 0;\n\t\t\t}\n\t\t\tapp.saveAjax(mode, null, params).done(function (data) {\n\t\t\t\tprogress.progressIndicator({'mode': 'hide'});\n\t\t\t\tthisInstance.refreshView();\n\t\t\t});\n\t\t});\n\t\tcontainer.find('.addUser, .wrapperExceptions').on('click', function (e) {\n\t\t\t\te.stopPropagation();\n\t\t\t\te.preventDefault();\n\t\t\t\tvar reload = true;\n\t\t\t\tvar element = jQuery(e.currentTarget);\n\t\t\t\tvar url =\n\t\t\t\t\t'index.php?module=' + app.getModuleName() +\n\t\t\t\t\t'&parent=' + app.getParentModuleName() +\n\t\t\t\t\t'&srcModule=' + container.find('#supportedModule').val() +\n\t\t\t\t\t'&view=Members';\n\t\t\t\tif (element.hasClass('wrapperExceptions')) {\n\t\t\t\t\turl += '&mode=' + element.data('mode') + '&member=' + element.closest('tr').data('value');\n\t\t\t\t\treload = false;\n\t\t\t\t}\n\t\t\t\tapp.showModalWindow(null, url, function (data) {\n\t\t\t\t\tvar form = data.find('form');\n\t\t\t\t\tform.on('submit', function (e) {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tvar progress = thisInstance.progress();\n\t\t\t\t\t\tvar params = form.serializeFormData();\n\t\t\t\t\t\tapp.saveAjax(params.mode, null, params).done(function (data) {\n\t\t\t\t\t\t\tprogress.progressIndicator({'mode': 'hide'});\n\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\tif (reload) {\n\t\t\t\t\t\t\t\tthisInstance.refreshView();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t);\n\t},\n\trefreshView: function () {\n\t\tthis.getContainer().find('#supportedModule').trigger('change');\n\t},\n\tgetContainer: function () {\n\t\tif (this.container === false) {\n\t\t\tthis.container = jQuery('div.contentsDiv');\n\t\t}\n\t\treturn this.container;\n\t},\n\tregisterEvents: function () {\n\t\tvar container = this.getContainer();\n\t\tthis.registerModulesChangeEvent(container);\n\t\tapp.registerDataTables(container.find('.dataTable'));\n\t\tthis.registerButtonEvents(container);\n\n\t}\n});\n"],"names":["jQuery","Class","container","thisInstance","find","on","e","progress","params","app","getModuleName","getParentModuleName","getViewName","currentTarget","val","requestPjax","done","data","progressIndicator","html","Fields","Picklist","changeSelectElementView","registerEvents","fail","textStatus","errorThrown","errorLog","element","mode","dataElement","closest","lock","saveAjax","refreshView","stopPropagation","preventDefault","reload","url","hasClass","showModalWindow","form","serializeFormData","hideModalWindow","getContainer","trigger","registerModulesChangeEvent","registerDataTables","registerButtonEvents"],"mappings":"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"}