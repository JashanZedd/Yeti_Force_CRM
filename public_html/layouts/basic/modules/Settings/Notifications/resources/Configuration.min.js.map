{"version":3,"file":"Configuration.min.js","sources":["Configuration.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class('Settings_Notifications_Configuration_Js', {}, {\n\tcontainer: false,\n\t/**\n\t * Function to register the change event for layout editor modules list\n\t */\n\tregisterModulesChangeEvent: function (container) {\n\t\tvar thisInstance = this;\n\t\tcontainer.find('#supportedModule').on('change', function (e) {\n\t\t\tvar progress = thisInstance.progress();\n\t\t\tvar params = {};\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['view'] = app.getViewName();\n\t\t\tparams['srcModule'] = jQuery(e.currentTarget).val();\n\t\t\tAppConnector.requestPjax(params).done(function (data) {\n\t\t\t\tprogress.progressIndicator({'mode': 'hide'});\n\t\t\t\tcontainer.html(data);\n\t\t\t\tApp.Fields.Picklist.changeSelectElementView(container);\n\t\t\t\tthisInstance.registerEvents();\n\t\t\t}).fail(function (textStatus, errorThrown) {\n\t\t\t\tprogress.progressIndicator({'mode': 'hide'});\n\t\t\t\tapp.errorLog(textStatus, errorThrown);\n\t\t\t});\n\t\t});\n\t},\n\tprogress: function () {\n\t\treturn jQuery.progressIndicator({\n\t\t\t'position': 'html',\n\t\t\t'blockInfo': {\n\t\t\t\t'enabled': true\n\t\t\t}\n\t\t});\n\t},\n\tregisterButtonEvents: function (container) {\n\t\tvar thisInstance = this;\n\t\tcontainer.find('.wrapperTrash, .wrapperLock').on('click', '.fas', function (e) {\n\t\t\tvar progress = thisInstance.progress();\n\t\t\tvar element = jQuery(e.currentTarget);\n\t\t\tvar mode = element.data('mode');\n\t\t\tvar dataElement = element.closest('tr');\n\t\t\tvar params = {\n\t\t\t\tmembers: dataElement.data('value'),\n\t\t\t\tsrcModule: container.find('#supportedModule').val()\n\t\t\t};\n\t\t\tif (mode === 'lock') {\n\t\t\t\tparams.lock = dataElement.data('lock') === 0 ? 1 : 0;\n\t\t\t}\n\t\t\tapp.saveAjax(mode, null, params).done(function (data) {\n\t\t\t\tprogress.progressIndicator({'mode': 'hide'});\n\t\t\t\tthisInstance.refreshView();\n\t\t\t});\n\t\t});\n\t\tcontainer.find('.addUser, .wrapperExceptions').on('click', function (e) {\n\t\t\t\te.stopPropagation();\n\t\t\t\te.preventDefault();\n\t\t\t\tvar reload = true;\n\t\t\t\tvar element = jQuery(e.currentTarget);\n\t\t\t\tvar url =\n\t\t\t\t\t'index.php?module=' + app.getModuleName() +\n\t\t\t\t\t'&parent=' + app.getParentModuleName() +\n\t\t\t\t\t'&srcModule=' + container.find('#supportedModule').val() +\n\t\t\t\t\t'&view=Members';\n\t\t\t\tif (element.hasClass('wrapperExceptions')) {\n\t\t\t\t\turl += '&mode=' + element.data('mode') + '&member=' + element.closest('tr').data('value');\n\t\t\t\t\treload = false;\n\t\t\t\t}\n\t\t\t\tapp.showModalWindow(null, url, function (data) {\n\t\t\t\t\tvar form = data.find('form');\n\t\t\t\t\tform.on('submit', function (e) {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tvar progress = thisInstance.progress();\n\t\t\t\t\t\tvar params = form.serializeFormData();\n\t\t\t\t\t\tapp.saveAjax(params.mode, null, params).done(function (data) {\n\t\t\t\t\t\t\tprogress.progressIndicator({'mode': 'hide'});\n\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\tif (reload) {\n\t\t\t\t\t\t\t\tthisInstance.refreshView();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t);\n\t},\n\trefreshView: function () {\n\t\tthis.getContainer().find('#supportedModule').trigger('change');\n\t},\n\tgetContainer: function () {\n\t\tif (this.container === false) {\n\t\t\tthis.container = jQuery('div.contentsDiv');\n\t\t}\n\t\treturn this.container;\n\t},\n\tregisterEvents: function () {\n\t\tvar container = this.getContainer();\n\t\tthis.registerModulesChangeEvent(container);\n\t\tapp.registerDataTables(container.find('.dataTable'));\n\t\tthis.registerButtonEvents(container);\n\n\t}\n});\n"],"names":["jQuery","Class","container","thisInstance","this","find","on","e","progress","params","app","getModuleName","getParentModuleName","getViewName","currentTarget","val","requestPjax","done","data","progressIndicator","mode","html","Fields","Picklist","changeSelectElementView","registerEvents","fail","textStatus","errorThrown","errorLog","element","dataElement","closest","lock","saveAjax","refreshView","stopPropagation","preventDefault","reload","url","hasClass","showModalWindow","form","serializeFormData","hideModalWindow","getContainer","trigger","registerModulesChangeEvent","registerDataTables","registerButtonEvents"],"mappings":"aAGAA,OAAOC,MAAM,0CAA2C,GAAI,YAChD,6BAIiB,SAAUC,eACjCC,aAAeC,eACTC,KAAK,oBAAoBC,GAAG,UAAU,SAAUC,OACrDC,SAAWL,aAAaK,WACxBC,OAAS,UACb,OAAmBC,IAAIC,uBACvB,OAAmBD,IAAIE,6BACvB,KAAiBF,IAAIG,qBACrB,UAAsBb,OAAOO,EAAEO,eAAeC,mBACjCC,YAAYP,QAAQQ,MAAK,SAAUC,eACtCC,kBAAkB,CAACC,KAAQ,mBAC1BC,KAAKH,UACXI,OAAOC,SAASC,wBAAwBtB,wBAC/BuB,oBACXC,MAAK,SAAUC,WAAYC,sBACpBT,kBAAkB,CAACC,KAAQ,aAChCS,SAASF,WAAYC,6BAIlB,kBACF5B,OAAOmB,kBAAkB,UACnB,iBACC,UACD,2BAIQ,SAAUjB,eAC3BC,aAAeC,eACTC,KAAK,+BAA+BC,GAAG,QAAS,QAAQ,SAAUC,OACvEC,SAAWL,aAAaK,WACxBsB,QAAU9B,OAAOO,EAAEO,eACnBM,KAAOU,QAAQZ,KAAK,QACpBa,YAAcD,QAAQE,QAAQ,MAC9BvB,OAAS,SACHsB,YAAYb,KAAK,mBACfhB,UAAUG,KAAK,oBAAoBU,OAElC,SAATK,cACIa,KAAoC,IAA7BF,YAAYb,KAAK,QAAgB,EAAI,OAEhDgB,SAASd,KAAM,KAAMX,QAAQQ,MAAK,SAAUC,eACtCC,kBAAkB,CAACC,KAAQ,sBACvBe,8BAGL9B,KAAK,gCAAgCC,GAAG,SAAS,SAAUC,KACjE6B,oBACAC,qBACEC,QAAS,EACTR,QAAU9B,OAAOO,EAAEO,eACnByB,IACH,oBAAsB7B,IAAIC,gBAC1B,WAAaD,IAAIE,sBACjB,cAAgBV,UAAUG,KAAK,oBAAoBU,MACnD,gBACGe,QAAQU,SAAS,4BACb,SAAWV,QAAQZ,KAAK,QAAU,WAAaY,QAAQE,QAAQ,MAAMd,KAAK,iBACxE,OAENuB,gBAAgB,KAAMF,KAAK,SAAUrB,UACpCwB,KAAOxB,KAAKb,KAAK,aAChBC,GAAG,UAAU,SAAUC,KACzB8B,qBACE7B,SAAWL,aAAaK,WACxBC,OAASiC,KAAKC,wBACdT,SAASzB,OAAOW,KAAM,KAAMX,QAAQQ,MAAK,SAAUC,eAC7CC,kBAAkB,CAACC,KAAQ,aAChCwB,kBACAN,qBACUH,uCAQP,gBACPU,eAAexC,KAAK,oBAAoByC,QAAQ,wBAExC,kBACU,IAAnB1C,KAAKF,iBACHA,UAAYF,OAAO,oBAElBI,KAAKF,0BAEG,eACXA,UAAYE,KAAKyC,oBAChBE,2BAA2B7C,eAC5B8C,mBAAmB9C,UAAUG,KAAK,oBACjC4C,qBAAqB/C"}