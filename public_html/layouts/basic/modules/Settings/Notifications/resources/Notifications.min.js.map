{"version":3,"file":"Notifications.min.js","sources":["Notifications.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class('Settings_Notifications_List_Js', {}, {\n\tregisterSave: function (container, id) {\n\t\tvar thisInstance = this;\n\t\tvar containerValidate = container.find('.validationEngineContainer');\n\t\tvar roleId = $('[name=\"roleMenu\"]').val();\n\t\tcontainerValidate.validationEngine(app.validationEngineOptions);\n\t\tcontainer.find('[name=\"saveButton\"]').on('click', function () {\n\t\t\tif (containerValidate.validationEngine('validate')) {\n\t\t\t\tvar params = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\taction: 'SaveAjax',\n\t\t\t\t\tmode: 'saveType',\n\t\t\t\t\tname: container.find('[name=\"name\"]').val(),\n\t\t\t\t\twidth: container.find('[name=\"width\"]').val(),\n\t\t\t\t\theight: container.find('[name=\"height\"]').val(),\n\t\t\t\t\troleId: roleId,\n\t\t\t\t\tid: id\n\t\t\t\t};\n\t\t\t\tvar progress = jQuery.progressIndicator();\n\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\tprogress.progressIndicator({'mode': 'hide'});\n\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\tthisInstance.showTable();\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t},\n\tregisterButtons: function () {\n\t\tvar thisInstance = this;\n\t\t$('.createNotification').on('click', function () {\n\t\t\tvar progress = jQuery.progressIndicator();\n\t\t\tapp.showModalWindow(null, \"index.php?module=Notifications&parent=Settings&view=CreateNotification\", function (container) {\n\t\t\t\tprogress.progressIndicator({'mode': 'hide'});\n\t\t\t\tthisInstance.registerSave(container, 0);\n\t\t\t});\n\t\t});\n\t\t$('[name=\"roleMenu\"]').on('change', function () {\n\t\t\tthisInstance.showTable();\n\t\t});\n\t},\n\tshowTable: function () {\n\t\tvar thisInstance = this;\n\t\tvar container = $('.listWithNotifications');\n\t\tvar params = {\n\t\t\tmodule: app.getModuleName(),\n\t\t\tparent: app.getParentModuleName(),\n\t\t\tview: 'ListContent',\n\t\t\troleId: $('[name=\"roleMenu\"]').val(),\n\t\t};\n\t\tvar progress = jQuery.progressIndicator();\n\t\tAppConnector.request(params).done(function (data) {\n\t\t\tprogress.progressIndicator({'mode': 'hide'});\n\t\t\tcontainer.html(data);\n\t\t\tthisInstance.registerTableEvents(container);\n\t\t});\n\t},\n\tregisterTableEvents: function (container) {\n\t\tvar thisInstance = this;\n\t\tcontainer.find('.edit').on('click', function (e) {\n\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\tvar progress = jQuery.progressIndicator();\n\t\t\tapp.showModalWindow(null, currentTarget.data('url'), function (container) {\n\t\t\t\tprogress.progressIndicator({'mode': 'hide'});\n\t\t\t\tvar trRow = currentTarget.closest('tr');\n\t\t\t\tthisInstance.registerSave(container, trRow.data('id'));\n\t\t\t});\n\n\t\t});\n\t\tcontainer.find('.remove').on('click', function (e) {\n\t\t\tvar removeButton = jQuery(e.currentTarget);\n\t\t\tvar currentTrElement = removeButton.closest('tr');\n\t\t\tvar message = app.vtranslate('JS_DELETE_CONFIRMATION');\n\t\t\tVtiger_Helper_Js.showConfirmationBox({'message': message}).done(function (e) {\n\t\t\t\tvar params = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\taction: 'Delete',\n\t\t\t\t\tid: currentTrElement.data('id')\n\t\t\t\t};\n\t\t\t\tvar progress = jQuery.progressIndicator();\n\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\tprogress.progressIndicator({'mode': 'hide'});\n\t\t\t\t\tthisInstance.showTable();\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t},\n\tregisterEvents: function () {\n\t\tthis.registerButtons();\n\t\tthis.showTable();\n\t}\n})\n"],"names":["jQuery","Class","container","id","thisInstance","this","containerValidate","find","roleId","$","val","validationEngine","app","validationEngineOptions","on","params","getModuleName","getParentModuleName","progress","progressIndicator","request","done","data","mode","hideModalWindow","showTable","showModalWindow","registerSave","html","registerTableEvents","e","currentTarget","trRow","closest","currentTrElement","message","vtranslate","showConfirmationBox","registerButtons"],"mappings":"aAGAA,OAAOC,MAAM,iCAAkC,GAAI,cACpC,SAAUC,UAAWC,QAC9BC,aAAeC,KACfC,kBAAoBJ,UAAUK,KAAK,8BACnCC,OAASC,EAAE,qBAAqBC,wBAClBC,iBAAiBC,IAAIC,mCAC7BN,KAAK,uBAAuBO,GAAG,SAAS,cAC7CR,kBAAkBK,iBAAiB,YAAa,KAC/CI,OAAS,QACJH,IAAII,uBACJJ,IAAIK,6BACJ,gBACF,gBACAf,UAAUK,KAAK,iBAAiBG,YAC/BR,UAAUK,KAAK,kBAAkBG,aAChCR,UAAUK,KAAK,mBAAmBG,aAClCF,UACJL,IAEDe,SAAWlB,OAAOmB,iCACTC,QAAQL,QAAQM,MAAK,SAAUC,eAClCH,kBAAkB,CAACI,KAAQ,aAChCC,+BACSC,oCAKA,eACZrB,aAAeC,OACjB,uBAAuBS,GAAG,SAAS,eAChCI,SAAWlB,OAAOmB,wBAClBO,gBAAgB,KAAM,0EAA0E,SAAUxB,oBACpGiB,kBAAkB,CAACI,KAAQ,sBACvBI,aAAazB,UAAW,WAGrC,qBAAqBY,GAAG,UAAU,wBACtBW,0BAGJ,eACNrB,aAAeC,KACfH,UAAYO,EAAE,0BACdM,OAAS,QACJH,IAAII,uBACJJ,IAAIK,2BACN,qBACER,EAAE,qBAAqBC,OAE5BQ,SAAWlB,OAAOmB,iCACTC,QAAQL,QAAQM,MAAK,SAAUC,eAClCH,kBAAkB,CAACI,KAAQ,mBAC1BK,KAAKN,mBACFO,oBAAoB3B,mCAGd,SAAUA,eAC1BE,aAAeC,eACTE,KAAK,SAASO,GAAG,SAAS,SAAUgB,OACzCC,cAAgBtB,EAAEqB,EAAEC,eACpBb,SAAWlB,OAAOmB,wBAClBO,gBAAgB,KAAMK,cAAcT,KAAK,QAAQ,SAAUpB,oBACrDiB,kBAAkB,CAACI,KAAQ,aAChCS,MAAQD,cAAcE,QAAQ,mBACrBN,aAAazB,UAAW8B,MAAMV,KAAK,uBAIxCf,KAAK,WAAWO,GAAG,SAAS,SAAUgB,OAE3CI,iBADelC,OAAO8B,EAAEC,eACQE,QAAQ,MACxCE,QAAUvB,IAAIwB,WAAW,2CACZC,oBAAoB,CAACF,QAAWA,UAAUd,MAAK,SAAUS,OACrEf,OAAS,QACJH,IAAII,uBACJJ,IAAIK,6BACJ,YACJiB,iBAAiBZ,KAAK,OAEvBJ,SAAWlB,OAAOmB,iCACTC,QAAQL,QAAQM,MAAK,SAAUC,eAClCH,kBAAkB,CAACI,KAAQ,sBACvBE,qCAKD,gBACVa,uBACAb"}