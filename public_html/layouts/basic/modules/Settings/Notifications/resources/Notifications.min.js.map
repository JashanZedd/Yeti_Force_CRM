{"version":3,"file":"Notifications.min.js","sources":["Notifications.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class('Settings_Notifications_List_Js', {}, {\n\tregisterSave: function (container, id) {\n\t\tvar thisInstance = this;\n\t\tvar containerValidate = container.find('.validationEngineContainer');\n\t\tvar roleId = $('[name=\"roleMenu\"]').val();\n\t\tcontainerValidate.validationEngine(app.validationEngineOptions);\n\t\tcontainer.find('[name=\"saveButton\"]').on('click', function () {\n\t\t\tif (containerValidate.validationEngine('validate')) {\n\t\t\t\tvar params = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\taction: 'SaveAjax',\n\t\t\t\t\tmode: 'saveType',\n\t\t\t\t\tname: container.find('[name=\"name\"]').val(),\n\t\t\t\t\twidth: container.find('[name=\"width\"]').val(),\n\t\t\t\t\theight: container.find('[name=\"height\"]').val(),\n\t\t\t\t\troleId: roleId,\n\t\t\t\t\tid: id\n\t\t\t\t};\n\t\t\t\tvar progress = jQuery.progressIndicator();\n\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\tprogress.progressIndicator({'mode': 'hide'});\n\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\tthisInstance.showTable();\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t},\n\tregisterButtons: function () {\n\t\tvar thisInstance = this;\n\t\t$('.createNotification').on('click', function () {\n\t\t\tvar progress = jQuery.progressIndicator();\n\t\t\tapp.showModalWindow(null, \"index.php?module=Notifications&parent=Settings&view=CreateNotification\", function (container) {\n\t\t\t\tprogress.progressIndicator({'mode': 'hide'});\n\t\t\t\tthisInstance.registerSave(container, 0);\n\t\t\t});\n\t\t});\n\t\t$('[name=\"roleMenu\"]').on('change', function () {\n\t\t\tthisInstance.showTable();\n\t\t});\n\t},\n\tshowTable: function () {\n\t\tvar thisInstance = this;\n\t\tvar container = $('.listWithNotifications');\n\t\tvar params = {\n\t\t\tmodule: app.getModuleName(),\n\t\t\tparent: app.getParentModuleName(),\n\t\t\tview: 'ListContent',\n\t\t\troleId: $('[name=\"roleMenu\"]').val(),\n\t\t};\n\t\tvar progress = jQuery.progressIndicator();\n\t\tAppConnector.request(params).done(function (data) {\n\t\t\tprogress.progressIndicator({'mode': 'hide'});\n\t\t\tcontainer.html(data);\n\t\t\tthisInstance.registerTableEvents(container);\n\t\t});\n\t},\n\tregisterTableEvents: function (container) {\n\t\tvar thisInstance = this;\n\t\tcontainer.find('.edit').on('click', function (e) {\n\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\tvar progress = jQuery.progressIndicator();\n\t\t\tapp.showModalWindow(null, currentTarget.data('url'), function (container) {\n\t\t\t\tprogress.progressIndicator({'mode': 'hide'});\n\t\t\t\tvar trRow = currentTarget.closest('tr');\n\t\t\t\tthisInstance.registerSave(container, trRow.data('id'));\n\t\t\t});\n\n\t\t});\n\t\tcontainer.find('.remove').on('click', function (e) {\n\t\t\tvar removeButton = jQuery(e.currentTarget);\n\t\t\tvar currentTrElement = removeButton.closest('tr');\n\t\t\tvar message = app.vtranslate('JS_DELETE_CONFIRMATION');\n\t\t\tVtiger_Helper_Js.showConfirmationBox({'message': message}).done(function (e) {\n\t\t\t\tvar params = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\taction: 'Delete',\n\t\t\t\t\tid: currentTrElement.data('id')\n\t\t\t\t};\n\t\t\t\tvar progress = jQuery.progressIndicator();\n\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\tprogress.progressIndicator({'mode': 'hide'});\n\t\t\t\t\tthisInstance.showTable();\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t},\n\tregisterEvents: function () {\n\t\tthis.registerButtons();\n\t\tthis.showTable();\n\t}\n})\n"],"names":["jQuery","Class","container","id","thisInstance","containerValidate","find","roleId","$","val","validationEngine","app","validationEngineOptions","on","params","getModuleName","getParentModuleName","progress","progressIndicator","request","done","data","hideModalWindow","showTable","showModalWindow","registerSave","html","registerTableEvents","e","currentTarget","trRow","closest","removeButton","currentTrElement","message","vtranslate","showConfirmationBox","registerButtons"],"mappings":"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"}