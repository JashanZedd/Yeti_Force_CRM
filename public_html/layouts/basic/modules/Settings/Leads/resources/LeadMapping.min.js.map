{"version":3,"file":"LeadMapping.min.js","sources":["LeadMapping.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n * Contributor(s): YetiForce.com\n *************************************************************************************/\n'use strict';\n\njQuery.Class(\"Settings_LeadMapping_Js\", {\n\n\t/**\n\t * Function to register event to edit leads mapping\n\t */\n\ttriggerEdit: function (editUrl) {\n\t\tvar aDeferred = jQuery.Deferred();\n\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t'position': 'html',\n\t\t\t'blockInfo': {\n\t\t\t\t'enabled': true\n\t\t\t}\n\t\t});\n\n\t\tAppConnector.request(editUrl).done(function (data) {\n\t\t\tvar detailContentsHolder = jQuery('.contentsDiv');\n\t\t\tdetailContentsHolder.html(data);\n\t\t\tprogressIndicatorElement.progressIndicator({'mode': 'hide'});\n\t\t\tvar leadMappingInstance = new Settings_LeadMapping_Js();\n\t\t\tleadMappingInstance.registerEventsForEditView();\n\t\t}).fail(function (error) {\n\t\t\tprogressIndicatorElement.progressIndicator({'mode': 'hide'});\n\t\t});\n\t\treturn aDeferred.promise();\n\t},\n\n\t/**\n\t * Function to register event for delete lead mapping\n\t */\n\ttriggerDelete: function (event, url) {\n\t\tvar element = jQuery(event.currentTarget);\n\t\tvar mappingContainer = element.closest('.listViewEntries');\n\t\tvar mappingId = mappingContainer.data('cfmid');\n\t\tvar deleteUrl = url + '&mappingId=' + mappingId;\n\t\tAppConnector.request(deleteUrl).done(function (data) {\n\t\t\tvar message = data.result[0];\n\t\t\tvar params = {\n\t\t\t\ttext: message\n\t\t\t};\n\t\t\tif (data.success) {\n\t\t\t\tmappingContainer.remove();\n\t\t\t} else {\n\t\t\t\tparams['type'] = 'error';\n\t\t\t}\n\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t});\n\t}\n}, {\n\t/**\n\t * Function to register events for edit view of leads mapping\n\t */\n\tregisterEventsForEditView: function () {\n\t\tvar form = jQuery('#leadsMapping');\n\t\tvar select2Elements = form.find('.select2');\n\t\tApp.Fields.Picklist.showSelect2ElementView(select2Elements);\n\t\tthis.registerEventForAddingNewMapping();\n\t\tthis.registerOnChangeEventForSourceModule();\n\t\tthis.registerEventToDeleteMapping();\n\t\tthis.registerEventForFormSubmit();\n\t\tthis.registerOnChangeEventOfTargetModule();\n\t\tjQuery('select.accountsFields.select2,select.contactFields.select2').trigger('change', false);\n\t},\n\n\t/**\n\t * Function to register event for adding new convert to lead mapping\n\t */\n\tregisterEventForAddingNewMapping: function () {\n\t\tjQuery('#addMapping').on('click', function (e) {\n\t\t\tvar convertLeadMappingTable = jQuery('#convertLeadMapping');\n\t\t\tvar lastSequenceNumber = convertLeadMappingTable.find('tr:not(.newMapping):last[sequence-number]').attr('sequence-number');\n\t\t\tvar newSequenceNumber = parseInt(lastSequenceNumber) + 1;\n\t\t\tvar newMapping = jQuery('.newMapping').clone(true, true);\n\t\t\tnewMapping.attr('sequence-number', newSequenceNumber);\n\t\t\tnewMapping.find('select.leadsFields.newSelect').attr(\"name\", 'mapping[' + newSequenceNumber + '][lead]');\n\t\t\tnewMapping.find('select.accountsFields.newSelect').attr(\"name\", 'mapping[' + newSequenceNumber + '][account]');\n\t\t\tnewMapping.find('select.contactFields.newSelect').attr(\"name\", 'mapping[' + newSequenceNumber + '][contact]');\n\t\t\tnewMapping.removeClass('d-none newMapping');\n\t\t\tnewMapping.appendTo(convertLeadMappingTable);\n\t\t\tnewMapping.find('.newSelect').removeClass('newSelect').addClass('select2');\n\t\t\tvar select2Elements = newMapping.find('.select2');\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(select2Elements);\n\t\t\tjQuery('select.accountsFields.select2,select.contactFields.select2', newMapping).trigger('change', false);\n\t\t})\n\t},\n\n\t/**\n\t * Function to register on change event for select2 element\n\t */\n\tregisterOnChangeEventForSourceModule: function () {\n\t\tvar form = jQuery('#leadsMapping');\n\t\tform.on('change', '.leadsFields', function (e) {\n\t\t\tvar element = jQuery(e.currentTarget);\n\t\t\tvar container = jQuery(element.closest('tr'));\n\t\t\tvar selectedValue = element.val();\n\t\t\tvar selectedOption = element.find('option[value=\"' + selectedValue + '\"]');\n\t\t\tvar selectedDataType = selectedOption.data('type');\n\t\t\tvar accountFieldsSelectElement = container.find('select.accountsFields.select2');\n\t\t\tvar contactFieldsSelectElement = container.find('select.contactFields.select2');\n\n\t\t\tvar accountFieldsBasedOnType = form.find('.newMapping').find('.accountsFields').children().filter('[data-type=\"' + selectedDataType + '\"]').clone(true, true);\n\t\t\tvar contactFieldsBasedOnType = form.find('.newMapping').find('.contactFields').children().filter('option[data-type=\"' + selectedDataType + '\"]').clone(true, true);\n\t\t\tselectedDataType = app.vtranslate(\"JS_\" + selectedDataType);\n\t\t\tcontainer.find('.selectedFieldDataType').html(selectedDataType);\n\n\t\t\tvar noneValue = app.vtranslate('JS_NONE');\n\t\t\taccountFieldsSelectElement.html(accountFieldsBasedOnType);\n\t\t\tcontactFieldsSelectElement.html(contactFieldsBasedOnType);\n\n\t\t\tif (selectedDataType != \"None\") {\n\t\t\t\taccountFieldsSelectElement.prepend('<option data-type=\"' + noneValue + '\" label=\"' + noneValue + '\" value=\"0\" selected>' + noneValue + '</option>');\n\t\t\t\tcontactFieldsSelectElement.prepend('<option data-type=\"' + noneValue + '\" label=\"' + noneValue + '\" value=\"0\" selected>' + noneValue + '</option>');\n\t\t\t}\n\n\t\t\taccountFieldsSelectElement.trigger('change');\n\t\t\tcontactFieldsSelectElement.trigger('change');\n\n\t\t})\n\t},\n\n\t/**\n\t * Function to register event to delete mapping\n\t */\n\tregisterEventToDeleteMapping: function () {\n\t\tvar form = jQuery('#leadsMapping');\n\t\tform.on('click', '.deleteMapping', function (e) {\n\t\t\tvar element = jQuery(e.currentTarget);\n\t\t\tvar mappingContainer = element.closest('tr');\n\t\t\tvar mappingContainerSequenceNumber = mappingContainer.attr('sequence-number');\n\t\t\tvar deletableName = 'mapping[' + mappingContainerSequenceNumber + '][deletable]';\n\t\t\tmappingContainer.prepend('<input type=\"hidden\" name=\"' + deletableName + '\" />')\n\t\t\tmappingContainer.data('deletable', true).hide('slow');\n\t\t\tvar params = {\n\t\t\t\ttext: app.vtranslate('JS_MAPPING_DELETED_SUCCESSFULLY')\n\t\t\t}\n\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t});\n\t},\n\n\t/**\n\t * Function to handle edit view convert lead form submit\n\t */\n\tregisterEventForFormSubmit: function () {\n\t\tjQuery('#leadsMapping').on('submit', function (e) {\n\t\t\te.preventDefault();\n\t\t\tvar mappingDetails = jQuery(this).serializeFormData();\n\t\t\tvar params = {\n\t\t\t\t'module': app.getModuleName(),\n\t\t\t\t'parent': app.getParentModuleName(),\n\t\t\t\t'action': 'MappingSave',\n\t\t\t\t'mapping': mappingDetails\n\t\t\t}\n\n\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\t'position': 'html',\n\t\t\t\t'blockInfo': {\n\t\t\t\t\t'enabled': true\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\tif (data.success) {\n\t\t\t\t\tvar detailViewParams = {\n\t\t\t\t\t\t'module': app.getModuleName(),\n\t\t\t\t\t\t'parent': app.getParentModuleName(),\n\t\t\t\t\t\t'view': 'MappingDetail'\n\t\t\t\t\t};\n\t\t\t\t\tAppConnector.request(detailViewParams).done(function (data) {\n\t\t\t\t\t\tvar detailContentsHolder = jQuery('.contentsDiv');\n\t\t\t\t\t\tdetailContentsHolder.html(data);\n\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({'mode': 'hide'});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tlet notifyParams;\n\t\t\t\tif (!data.result.status) {\n\t\t\t\t\tnotifyParams = {\n\t\t\t\t\t\ttitle: app.vtranslate('JS_INVALID_MAPPING'),\n\t\t\t\t\t\ttext: data.result,\n\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tnotifyParams = {\n\t\t\t\t\t\ttitle: app.vtranslate('JS_MAPPING_SAVED_SUCCESSFULLY'),\n\t\t\t\t\t\ttype: 'info'\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tVtiger_Helper_Js.showPnotify(notifyParams);\n\t\t\t}).fail(function (error) {\n\t\t\t\tprogressIndicatorElement.progressIndicator({'mode': 'hide'});\n\t\t\t});\n\t\t})\n\t},\n\n\t/**\n\t * Function to register on chnage event of target module\n\t */\n\tregisterOnChangeEventOfTargetModule: function () {\n\t\tvar form = jQuery('#leadsMapping');\n\t\tform.on('change', 'select.accountsFields.select2,select.contactFields.select2', function (e, executeChange) {\n\t\t\tif (typeof executeChange === \"undefined\") {\n\t\t\t\texecuteChange = true;\n\t\t\t}\n\t\t\tvar selectElement = jQuery(e.currentTarget);\n\t\t\tvar selectedValue = selectElement.children().filter('option:selected').text();\n\t\t\tvar selectedOptionId = selectElement.children().filter('option:selected').val();\n\t\t\tvar mappingContainer = selectElement.closest('tr');\n\n\t\t\tvar duplicateOption = false;\n\t\t\tvar existingIdElement;\n\t\t\tif (selectedOptionId == \"0\") {\n\t\t\t\tselectedOptionId = \"false\";\n\t\t\t}\n\n\t\t\tif ((!executeChange) || (selectedOptionId == \"false\")) {\n\t\t\t\tselectElement.attr('selectedId', selectedOptionId);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t//check for source module field\n\t\t\tvar sourceModuleSelect = mappingContainer.find('select.leadsFields.select2');\n\t\t\tvar sourceModuleSelectedField = sourceModuleSelect.val();\n\t\t\tvar sourceModuleSelectedFieldLabel = sourceModuleSelect.find('option[value=\"' + sourceModuleSelectedField + '\"]').text();\n\t\t\tif (sourceModuleSelectedField == \"0\") {\n\t\t\t\tduplicateOption = true;\n\t\t\t\tvar errorParams = {\n\t\t\t\t\ttext: app.vtranslate('JS_CANT_MAP') + \" \" + selectedValue + \" \" + app.vtranslate('JS_WITH') + \" \" + sourceModuleSelectedFieldLabel,\n\t\t\t\t\t'type': 'error'\n\t\t\t\t}\n\t\t\t\tSettings_Vtiger_Index_Js.showMessage(errorParams);\n\t\t\t}\n\n\t\t\tif (selectElement.hasClass('accountsFields')) {\n\t\t\t\texistingIdElement = jQuery('select.accountsFields.select2[selectedid=\"' + selectedOptionId + '\"]')\n\t\t\t} else {\n\t\t\t\texistingIdElement = jQuery('select.contactFields.select2[selectedid=\"' + selectedOptionId + '\"]')\n\t\t\t}\n\n\t\t\tif (existingIdElement.length > 0) {\n\t\t\t\tduplicateOption = true;\n\t\t\t}\n\n\t\t\tif (duplicateOption) {\n\t\t\t\tvar selectedFieldId = selectElement.attr('selectedid');\n\t\t\t\tif (selectedFieldId == \"false\") {\n\t\t\t\t\tselectElement.attr('selectedId', \"false\");\n\t\t\t\t} else if (selectedFieldId != \"false\") {\n\t\t\t\t\tselectElement.attr('selectedId', selectedFieldId);\n\t\t\t\t}\n\t\t\t\tvar warningMessage = selectedValue + \" \" + app.vtranslate('JS_IS_ALREADY_BEEN_MAPPED');\n\t\t\t\tvar notificationParams = {\n\t\t\t\t\ttext: warningMessage,\n\t\t\t\t\t'type': 'error'\n\t\t\t\t};\n\t\t\t\tSettings_Vtiger_Index_Js.showMessage(notificationParams);\n\t\t\t\tselectElement.val(0).trigger('change');\n\t\t\t} else {\n\t\t\t\tselectElement.attr('selectedId', selectedOptionId);\n\t\t\t}\n\t\t});\n\t}\n});\n"],"names":["jQuery","Class","editUrl","aDeferred","Deferred","progressIndicatorElement","progressIndicator","request","done","data","detailContentsHolder","html","leadMappingInstance","Settings_LeadMapping_Js","registerEventsForEditView","fail","error","promise","event","url","element","currentTarget","mappingContainer","closest","mappingId","deleteUrl","message","result","params","success","remove","showMessage","form","select2Elements","find","Fields","Picklist","showSelect2ElementView","registerEventForAddingNewMapping","registerOnChangeEventForSourceModule","registerEventToDeleteMapping","registerEventForFormSubmit","registerOnChangeEventOfTargetModule","trigger","on","e","convertLeadMappingTable","lastSequenceNumber","attr","newSequenceNumber","parseInt","newMapping","clone","removeClass","appendTo","addClass","container","selectedValue","val","selectedOption","selectedDataType","accountFieldsSelectElement","contactFieldsSelectElement","accountFieldsBasedOnType","children","filter","contactFieldsBasedOnType","app","vtranslate","noneValue","prepend","mappingContainerSequenceNumber","deletableName","hide","preventDefault","mappingDetails","serializeFormData","getModuleName","getParentModuleName","detailViewParams","notifyParams","status","showPnotify","executeChange","selectElement","text","selectedOptionId","duplicateOption","existingIdElement","sourceModuleSelect","sourceModuleSelectedField","sourceModuleSelectedFieldLabel","errorParams","hasClass","length","selectedFieldId","warningMessage","notificationParams"],"mappings":"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"}