'use strict';

jQuery.Class('Settings_CurrencyUpdate_Index_Js',{},{registerInfoButton:function b(a){a.find('#supportedCurrencies').on('click',function(){jQuery('#infoBlock').toggleClass('d-none');});},registerAlertButton:function b(a){a.find('#unsupportedCurrencies').on('click',function(){a.find('#alertBlock').toggleClass('d-none');});},registerBankChange:function b(a){a.find('#bank').on('change',function(){var b=a.find('#bank option:selected').data('name');a.find('#alertSpan').html(''),a.find('#infoSpan').html('');var c=jQuery.progressIndicator({position:'html',blockInfo:{enabled:!0}}),d={};d.data={parent:app.getParentModuleName(),module:app.getModuleName(),action:'GetBankCurrencies',mode:'supported',name:b},d.dataType='json',AppConnector.request(d).done(function(b){var c,d=b.result,e='';for(c in d)e+='<p><strong>'+c+'</strong> - '+d[c]+'</p>';a.find('#infoSpan').html(e);}),d.data={parent:app.getParentModuleName(),module:app.getModuleName(),action:'GetBankCurrencies',mode:'unsupported',name:b},d.dataType='json',AppConnector.request(d).done(function(b){var c=b.result;jQuery.isEmptyObject(c)?(!a.find('#unsupportedCurrencies').hasClass('d-none')&&a.find('#unsupportedCurrencies').addClass('d-none'),!a.find('#alertBlock').hasClass('d-none')&&a.find('#alertBlock').addClass('d-none')):a.find('#unsupportedCurrencies').removeClass('d-none');var d,e='';for(d in c)e+='<p><strong>'+d+'</strong> - '+c[d]+'</p>';a.find('#alertSpan').html(e);});var e=jQuery('#bank option:selected').val();d.data={parent:app.getParentModuleName(),module:app.getModuleName(),action:'SaveActiveBank',id:e},d.dataType='json',AppConnector.request(d).done(function(a){var b=a.result;b.success?Vtiger_Helper_Js.showPnotify({text:b.message,type:'success'}):Vtiger_Helper_Js.showPnotify({text:b.message,hide:!1,type:'error'}),c.progressIndicator({mode:'hide'});});});},registerEvents:function b(){var a=jQuery('#currencyUpdateContainer');App.Fields.Date.register('#datepicker',!1,{}),this.registerInfoButton(a),this.registerAlertButton(a),this.registerBankChange(a);}});
//# sourceMappingURL=Index.min.js.map
