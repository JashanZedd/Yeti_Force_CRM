{"version":3,"file":"Edit.min.js","sources":["Edit.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nVtiger_Edit_Js(\n\t'Settings_WebserviceUsers_Edit_Js',\n\t{},\n\t{\n\t\tgetForm: function () {\n\t\t\tif (this.formElement == false) {\n\t\t\t\tthis.setForm(jQuery('#modalEdit'));\n\t\t\t}\n\t\t\treturn this.formElement;\n\t\t},\n\t\t/**\n\t\t * Show hide fields\n\t\t * @param {Object} typeElement\n\t\t * @param {Object} params\n\t\t */\n\t\tshowHideFields: function (typeElement, params) {\n\t\t\tlet elementContainer = this.getForm()\n\t\t\t\t.find('[name=\"' + params.fieldHide + '\"]')\n\t\t\t\t.closest('.form-group');\n\t\t\tif (typeElement.val() === params.value) {\n\t\t\t\tlet clearReference = elementContainer.find('.clearReferenceSelection');\n\t\t\t\tif (clearReference.length > 0) {\n\t\t\t\t\tclearReference.trigger('click');\n\t\t\t\t}\n\t\t\t\telementContainer.addClass('d-none');\n\t\t\t} else {\n\t\t\t\telementContainer.removeClass('d-none');\n\t\t\t}\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\tconst self = this,\n\t\t\t\tcontainer = this.getForm();\n\t\t\tthis.registerBasicEvents(container);\n\t\t\tlet form = container.find('form');\n\t\t\tform.on('submit', function (e) {\n\t\t\t\te.preventDefault();\n\t\t\t\tif (form.validationEngine('validate')) {\n\t\t\t\t\tlet formData = form.serializeFormData();\n\t\t\t\t\tAppConnector.request(formData).done(function (data) {\n\t\t\t\t\t\tif (data.result.success) {\n\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({ text: app.vtranslate('JS_SAVE_SUCCESS') });\n\t\t\t\t\t\t\tlet listInstance = Settings_WebserviceUsers_List_Js.getInstance();\n\t\t\t\t\t\t\tlistInstance.reloadTab();\n\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (data.result.message) {\n\t\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\t\ttext: data.result.message,\n\t\t\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\t\ttext: app.vtranslate('JS_ERROR'),\n\t\t\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t\tlet typeElement = form.find('[name=\"type\"]');\n\t\t\tlet typeParams = { fieldHide: 'crmid', value: '1' };\n\t\t\tself.showHideFields(typeElement, typeParams);\n\t\t\ttypeElement.on('change', function (e) {\n\t\t\t\tself.showHideFields(jQuery(e.currentTarget), typeParams);\n\t\t\t});\n\n\t\t\tlet loginMethod = form.find('[name=\"login_method\"]');\n\t\t\tlet loginMethodParams = { fieldHide: 'authy_methods', value: 'PLL_PASSWORD' };\n\t\t\tself.showHideFields(loginMethod, loginMethodParams);\n\t\t\tloginMethod.on('change', function (e) {\n\t\t\t\tself.showHideFields(jQuery(e.currentTarget), loginMethodParams);\n\t\t\t});\n\t\t}\n\t}\n);\njQuery(document).ready(function (e) {\n\tvar instance = new Settings_WebserviceUsers_Edit_Js();\n\tinstance.registerEvents();\n});\n"],"names":["Vtiger_Edit_Js","getForm","formElement","setForm","jQuery","showHideFields","typeElement","params","elementContainer","find","fieldHide","closest","val","value","clearReference","length","trigger","addClass","removeClass","registerEvents","container","registerBasicEvents","form","on","e","preventDefault","validationEngine","formData","serializeFormData","AppConnector","request","done","data","result","success","Settings_Vtiger_Index_Js","showMessage","text","app","vtranslate","Settings_WebserviceUsers_List_Js","getInstance","listInstance","reloadTab","hideModalWindow","message","showNotify","type","typeParams","self","currentTarget","loginMethod","loginMethodParams","document","ready","instance"],"mappings":"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"}