"use strict";Settings_Vtiger_Edit_Js("Settings_MappedFields_Edit_Js",{instance:{}},{currentInstance:!1,editContainer:!1,init:function(){this.initiate()},getContainer:function(){return this.editContainer},setContainer:function(element){return this.editContainer=element,this},getInstance:function(step){if(step in Settings_MappedFields_Edit_Js.instance)return Settings_MappedFields_Edit_Js.instance[step];var moduleClassName="Settings_MappedFields_Edit"+step+"_Js";return Settings_MappedFields_Edit_Js.instance[step]=new window[moduleClassName],Settings_MappedFields_Edit_Js.instance[step]},getStepValue:function(){var container=this.currentInstance.getContainer();return jQuery(".step",container).val()},initiate:function(container){void 0===container&&(container=jQuery(".mfTemplateContents")),container.is(".mfTemplateContents")?this.setContainer(container):this.setContainer(jQuery(".mfTemplateContents",container)),this.initiateStep("1"),this.currentInstance.registerEvents()},initiateStep:function(stepVal){var step="step"+stepVal;this.activateHeader(step),this.currentInstance=this.getInstance(stepVal)},activateHeader:function(step){var headersContainer=jQuery(".crumbs ");headersContainer.find(".active").removeClass("active"),jQuery("#"+step,headersContainer).addClass("active")},registerFormSubmitEvent:function(form){var thisInstance=this;jQuery.isFunction(thisInstance.currentInstance.submit)&&form.on("submit",(function(e){var form=jQuery(e.currentTarget),specialValidation=!0;jQuery.isFunction(thisInstance.currentInstance.isFormValidate)&&(specialValidation=thisInstance.currentInstance.isFormValidate()),form.validationEngine("validate")&&specialValidation&&thisInstance.currentInstance.submit().done((function(data){if(data){thisInstance.getContainer().append(data);var stepVal=thisInstance.getStepValue(),nextStepVal=parseInt(stepVal)+1;thisInstance.initiateStep(nextStepVal),thisInstance.currentInstance.initialize();var container=thisInstance.currentInstance.getContainer();thisInstance.registerFormSubmitEvent(container),thisInstance.currentInstance.registerEvents()}})),e.preventDefault()}))},back:function(){var step=this.getStepValue(),prevStep=parseInt(step)-1;this.currentInstance.initialize();var container=this.currentInstance.getContainer(),mfId=jQuery('[name="record"]',container).val();container.remove(),this.initiateStep(prevStep);var currentContainer=this.currentInstance.getContainer();currentContainer.show(),jQuery('[name="record"]',currentContainer).val(mfId)},registerCancelStepClickEvent:function(form){jQuery("button.cancelLink",form).on("click",(function(){window.history.back()}))},registerBackStepClickEvent:function(){var thisInstance=this;this.getContainer().on("click",".backStep",(function(e){thisInstance.back()}))},registerEvents:function(){var form=this.currentInstance.getContainer();this.registerFormSubmitEvent(form),this.registerBackStepClickEvent(),this.registerCancelStepClickEvent(form)}});
//# sourceMappingURL=Edit.min.js.map
