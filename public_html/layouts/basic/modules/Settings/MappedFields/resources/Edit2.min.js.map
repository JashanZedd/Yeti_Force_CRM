{"version":3,"file":"Edit2.min.js","sources":["Edit2.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nSettings_MappedFields_Edit_Js(\n\t'Settings_MappedFields_Edit2_Js',\n\t{},\n\t{\n\t\tstep2Container: false,\n\t\tadvanceFilterInstance: false,\n\t\trestictName: ['_csrf', 'mode', 'module', 'parent', 'record', 'view'],\n\t\tinit: function() {\n\t\t\tthis.initialize();\n\t\t},\n\t\t/**\n\t\t * Function to get the container which holds all the reports step1 elements\n\t\t * @return jQuery object\n\t\t */\n\t\tgetContainer: function() {\n\t\t\treturn this.step2Container;\n\t\t},\n\t\t/**\n\t\t * Function to set the reports step1 container\n\t\t * @params : element - which represents the reports step1 container\n\t\t * @return : current instance\n\t\t */\n\t\tsetContainer: function(element) {\n\t\t\tthis.step2Container = element;\n\t\t\treturn this;\n\t\t},\n\t\t/**\n\t\t * Function  to intialize the reports step1\n\t\t */\n\t\tinitialize: function(container) {\n\t\t\tif (typeof container === 'undefined') {\n\t\t\t\tcontainer = jQuery('#mf_step2');\n\t\t\t}\n\t\t\tif (container.is('#mf_step2')) {\n\t\t\t\tthis.setContainer(container);\n\t\t\t} else {\n\t\t\t\tthis.setContainer(jQuery('#mf_step2'));\n\t\t\t}\n\t\t},\n\t\tsubmit: function() {\n\t\t\tvar aDeferred = jQuery.Deferred();\n\t\t\tvar form = this.getContainer();\n\t\t\tvar formData = form.serializeFormData();\n\t\t\tvar saveData = this.getData(formData);\n\t\t\tsaveData.record = formData.record;\n\t\t\tthis.validationMappingFields().done(function(data) {\n\t\t\t\tif (data) {\n\t\t\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\t\t\tposition: 'html',\n\t\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\t\tenabled: true\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tapp.saveAjax('step2', saveData).done(function(data) {\n\t\t\t\t\t\tif (data.success == true) {\n\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({ text: app.vtranslate('JS_MF_SAVED_SUCCESSFULLY') });\n\t\t\t\t\t\t\tvar mfRecordElement = jQuery('[name=\"record\"]', form);\n\t\t\t\t\t\t\tif (mfRecordElement.val() === '') {\n\t\t\t\t\t\t\t\tmfRecordElement.val(data.result.id);\n\t\t\t\t\t\t\t\tformData['record'] = data.result.id;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tformData['record'] = data.result.id;\n\t\t\t\t\t\t\tAppConnector.request(formData)\n\t\t\t\t\t\t\t\t.done(function(data) {\n\t\t\t\t\t\t\t\t\tform.hide();\n\t\t\t\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({\n\t\t\t\t\t\t\t\t\t\tmode: 'hide'\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.fail(function(error, err) {\n\t\t\t\t\t\t\t\t\tapp.errorLog(error, err);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\taDeferred.resolve(false);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\tgetData: function(data) {\n\t\t\tvar mappingData = [];\n\t\t\tvar mappingConditions = [];\n\t\t\tfor (var i in data) {\n\t\t\t\tvar name = i.split('][');\n\t\t\t\tif (name.length == 2) {\n\t\t\t\t\tif (name[1] != 'default]' && data[i] != 0) mappingData[i] = data[i];\n\t\t\t\t\telse if (name[1] == 'default]') mappingData[i] = jQuery.isArray(data[i]) ? data[i].join(',') : data[i].trim();\n\t\t\t\t} else if (name.length != 2 && jQuery.inArray(i, this.restictName) == -1) {\n\t\t\t\t\tmappingConditions[i] = data[i];\n\t\t\t\t}\n\t\t\t}\n\t\t\tmappingData = jQuery.extend({}, mappingData);\n\t\t\tmappingConditions = jQuery.extend({}, mappingConditions);\n\t\t\treturn { mapping: mappingData, otherConditions: JSON.stringify(mappingConditions) };\n\t\t},\n\t\tregisterCancelStepClickEvent: function(form) {\n\t\t\tjQuery('button.cancelLink', form).on('click', function() {\n\t\t\t\twindow.history.back();\n\t\t\t});\n\t\t},\n\t\tregisterEvents: function() {\n\t\t\tvar container = this.getContainer();\n\n\t\t\tvar opts = app.validationEngineOptions;\n\t\t\t// to prevent the page reload after the validation has completed\n\t\t\topts['onValidationComplete'] = function(form, valid) {\n\t\t\t\t//returns the valid status\n\t\t\t\treturn valid;\n\t\t\t};\n\t\t\topts['promptPosition'] = 'bottomRight';\n\t\t\tcontainer.validationEngine(opts);\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(container.find('.select2'));\n\t\t\tthis.registerCancelStepClickEvent(container);\n\t\t\tthis.registerEventsForEditView();\n\t\t},\n\t\t/**\n\t\t * Function to register event for adding new convert to field mapping\n\t\t */\n\t\tregisterEventForAddingNewMapping: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tjQuery('#addMapping').on('click', function(e) {\n\t\t\t\tvar mappingToGenerateTable = jQuery('#mappingToGenerate');\n\t\t\t\tvar lastSequenceNumber = mappingToGenerateTable.find('tr:not(.d-none)[sequence-number]').last();\n\t\t\t\tvar newSequenceNumber = thisInstance.getSequenceNumber(lastSequenceNumber) + 1;\n\t\t\t\tvar newMapping = jQuery('.newMapping').clone(true, true);\n\t\t\t\tnewMapping.attr('sequence-number', newSequenceNumber);\n\t\t\t\tnewMapping.find('select.sourceFields.newSelect').attr('name', 'mapping[' + newSequenceNumber + '][source]');\n\t\t\t\tnewMapping.find('select.targetFields.newSelect').attr('name', 'mapping[' + newSequenceNumber + '][target]');\n\t\t\t\tnewMapping.find('input.mappingType').attr('name', 'mapping[' + newSequenceNumber + '][type]');\n\t\t\t\tnewMapping.removeClass('d-none newMapping');\n\t\t\t\tnewMapping.appendTo(mappingToGenerateTable);\n\t\t\t\tnewMapping\n\t\t\t\t\t.find('.newSelect')\n\t\t\t\t\t.removeClass('newSelect')\n\t\t\t\t\t.addClass('select2');\n\t\t\t\tvar select2Elements = newMapping.find('.select2');\n\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(select2Elements);\n\t\t\t\tjQuery('select.targetFields', newMapping).trigger('change', false);\n\t\t\t\tthisInstance.loadDefaultValueWidgetForMappedFields(newMapping.find('.select2'));\n\t\t\t});\n\t\t},\n\t\tgetSequenceNumber: function(element) {\n\t\t\tlet sequenceNumber;\n\t\t\tif (element.length) {\n\t\t\t\tsequenceNumber = element.attr('sequence-number');\n\t\t\t} else {\n\t\t\t\tsequenceNumber = 0;\n\t\t\t}\n\t\t\treturn parseInt(sequenceNumber);\n\t\t},\n\t\t/**\n\t\t * Function to register on change event for select2 element\n\t\t */\n\t\tregisterOnChangeEventForSourceModule: function() {\n\t\t\tvar form = this.getContainer();\n\t\t\tform.on('change', '.sourceFields', function(e) {\n\t\t\t\tvar element = jQuery(e.currentTarget);\n\t\t\t\tvar container = jQuery(element.closest('tr'));\n\t\t\t\tvar selectedValue = element.val();\n\t\t\t\tvar selectedOption = element.find('option[value=\"' + selectedValue + '\"]');\n\t\t\t\tvar selectedDataType = selectedOption.data('type');\n\t\t\t\tvar mappingType = selectedOption.data('mappingtype');\n\t\t\t\tvar fieldsSelectElement = container.find('select.targetFields.select2');\n\t\t\t\tvar fieldsBasedOnType = form\n\t\t\t\t\t.find('.newMapping')\n\t\t\t\t\t.find('.targetFields')\n\t\t\t\t\t.children()\n\t\t\t\t\t.clone(true, true);\n\t\t\t\tvar options = jQuery('<div></div>');\n\t\t\t\tcontainer.find('.mappingType').val(mappingType);\n\t\t\t\tfieldsBasedOnType.each(function(i, e) {\n\t\t\t\t\tvar element = jQuery(e);\n\t\t\t\t\tif (element.is('option') && (element.data('type') == selectedDataType || element.data('type') == 'none')) {\n\t\t\t\t\t\toptions.append(element);\n\t\t\t\t\t} else if (element.is('optgroup') && element.find('[data-type=\"' + selectedDataType + '\"]').length > 0) {\n\t\t\t\t\t\telement.children().each(function(q, k) {\n\t\t\t\t\t\t\tvar option = jQuery(k);\n\t\t\t\t\t\t\tif (option.data('type') !== selectedDataType) {\n\t\t\t\t\t\t\t\toption.remove();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\toptions.append(element);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tcontainer\n\t\t\t\t\t.find('.selectedFieldDataType')\n\t\t\t\t\t.html(selectedOption.data('type-name') ? selectedOption.data('type-name') : '');\n\t\t\t\tfieldsSelectElement.html(options.children());\n\n\t\t\t\tfieldsSelectElement.trigger('change', false);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to register event to delete mapping\n\t\t */\n\t\tregisterEventToDeleteMapping: function() {\n\t\t\tvar form = this.getContainer();\n\t\t\tform.on('click', '.deleteMapping', function(e) {\n\t\t\t\tvar element = jQuery(e.currentTarget);\n\t\t\t\tvar trContainer = element.closest('tr');\n\t\t\t\ttrContainer.remove();\n\t\t\t});\n\t\t},\n\t\tloadDefaultValueWidget: function(element) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar id = element.val() + '_defaultvalue';\n\t\t\tvar affectedRow = jQuery('#defaultValuesElementsContainer').find('#' + id);\n\t\t\tvar dafeultTd = element.closest('td').next();\n\t\t\tvar defaultValueElement = dafeultTd.find('input.default');\n\t\t\tvar defaultValue = '';\n\t\t\tif (defaultValueElement.length) {\n\t\t\t\tdefaultValue = defaultValueElement.val();\n\t\t\t}\n\t\t\tdafeultTd.children().remove();\n\t\t\tvar exist = jQuery('#mappingToGenerate').find('#' + id);\n\t\t\tif (affectedRow.length === 0 || !element.val() || exist.length > 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar seqNumber = thisInstance.getSequenceNumber(element.closest('tr'));\n\t\t\tvar copyOfDefaultValue = affectedRow.clone(true, true);\n\t\t\tcopyOfDefaultValue.prop('disabled', false).attr('name', 'mapping[' + seqNumber + '][default]');\n\t\t\tif (copyOfDefaultValue.is(':checkbox') && defaultValue) {\n\t\t\t\tcopyOfDefaultValue.prop('checked', true);\n\t\t\t} else if (defaultValue) {\n\t\t\t\tdefaultValue =\n\t\t\t\t\ttypeof copyOfDefaultValue.attr('multiple') !== 'undefined' ? defaultValue.split(',') : defaultValue;\n\t\t\t\tcopyOfDefaultValue.val(defaultValue);\n\t\t\t}\n\t\t\tcopyOfDefaultValue.appendTo(dafeultTd);\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(dafeultTd.find('select'));\n\t\t},\n\t\tloadDefaultValueWidgetForMappedFields: function(fieldsList) {\n\t\t\tvar thisInstance = this;\n\t\t\tfieldsList.each(function(i, element) {\n\t\t\t\tthisInstance.loadDefaultValueWidget(jQuery(this));\n\t\t\t});\n\t\t\tfieldsList.on('change', function(e) {\n\t\t\t\tvar element = jQuery(e.currentTarget);\n\t\t\t\tthisInstance.loadDefaultValueWidget(element);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to register events for edit view of fields mapping\n\t\t */\n\t\tregisterEventsForEditView: function() {\n\t\t\tthis.registerEventForAddingNewMapping();\n\t\t\tthis.registerOnChangeEventForSourceModule();\n\t\t\tthis.registerEventToDeleteMapping();\n\t\t\tthis.loadDefaultValueWidgetForMappedFields(jQuery('select.targetFields:not(.newSelect)'));\n\t\t},\n\t\t/*\n\t\t * Function to register on chnage event of target module\n\t\t */\n\t\tvalidationMappingFields: function() {\n\t\t\tlet aDeferred = jQuery.Deferred(),\n\t\t\t\tmappingTable = jQuery('#mappingToGenerate tr:not(.d-none)');\n\n\t\t\tmappingTable.each(function(i, e) {\n\t\t\t\tlet breakSave = false,\n\t\t\t\t\tsourceField = jQuery(this).find('.sourceFields :selected'),\n\t\t\t\t\ttargetField = jQuery(this).find('.targetFields :selected'),\n\t\t\t\t\tmoduleName;\n\t\t\t\tif (mappingTable.find('.sourceFields option[value=\"' + sourceField.val() + '\"]:selected').length > 1) {\n\t\t\t\t\tmoduleName = jQuery('.sourceModuleName').text();\n\t\t\t\t\tbreakSave = moduleName + ': ' + sourceField.text();\n\t\t\t\t}\n\t\t\t\tif (mappingTable.find('.targetFields option[value=\"' + targetField.val() + '\"]:selected').length > 1) {\n\t\t\t\t\tmoduleName = jQuery('.targetModuleName').text();\n\t\t\t\t\tbreakSave = moduleName + ': ' + targetField.text();\n\t\t\t\t}\n\t\t\t\tif (breakSave) {\n\t\t\t\t\tlet warningMessage = breakSave + ' <br />' + app.vtranslate('JS_IS_ALREADY_BEEN_MAPPED'),\n\t\t\t\t\t\tnotificationParams = {\n\t\t\t\t\t\t\ttext: warningMessage,\n\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t};\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(notificationParams);\n\t\t\t\t\taDeferred.resolve(false);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\t\t\taDeferred.resolve(true);\n\t\t\treturn aDeferred.promise();\n\t\t}\n\t}\n);\n"],"names":["Settings_MappedFields_Edit_Js","initialize","step2Container","element","container","jQuery","is","setContainer","aDeferred","Deferred","form","getContainer","formData","serializeFormData","saveData","getData","record","validationMappingFields","done","data","progressIndicatorElement","progressIndicator","saveAjax","success","showMessage","text","app","vtranslate","mfRecordElement","val","result","id","request","hide","resolve","fail","error","err","errorLog","promise","mappingData","mappingConditions","i","name","split","length","isArray","join","trim","inArray","restictName","extend","mapping","otherConditions","JSON","stringify","on","history","back","opts","validationEngineOptions","valid","validationEngine","Fields","Picklist","showSelect2ElementView","find","registerCancelStepClickEvent","registerEventsForEditView","thisInstance","e","mappingToGenerateTable","lastSequenceNumber","last","newSequenceNumber","getSequenceNumber","newMapping","clone","attr","removeClass","appendTo","addClass","select2Elements","trigger","loadDefaultValueWidgetForMappedFields","sequenceNumber","parseInt","currentTarget","closest","selectedValue","selectedOption","selectedDataType","mappingType","fieldsSelectElement","fieldsBasedOnType","children","options","each","append","q","k","option","remove","html","trContainer","affectedRow","dafeultTd","next","defaultValueElement","defaultValue","exist","seqNumber","copyOfDefaultValue","prop","fieldsList","loadDefaultValueWidget","registerEventForAddingNewMapping","registerOnChangeEventForSourceModule","registerEventToDeleteMapping","mappingTable","breakSave","sourceField","targetField","moduleName","warningMessage","notificationParams"],"mappings":"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"}