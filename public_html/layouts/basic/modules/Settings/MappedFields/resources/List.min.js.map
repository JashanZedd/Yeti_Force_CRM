{"version":3,"file":"List.min.js","sources":["List.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nSettings_Vtiger_List_Js(\"Settings_MappedFields_List_Js\", {}, {\n\tgetListContainer: function () {\n\t\treturn jQuery('#listViewContainer');\n\t},\n\tregisterFilterChangeEvent: function () {\n\t\tvar thisInstance = this;\n\t\tjQuery('#moduleFilter').on('change', function (e) {\n\t\t\tjQuery('#pageNumber').val(\"1\");\n\t\t\tjQuery('#pageToJump').val('1');\n\t\t\tjQuery('#orderBy').val('');\n\t\t\tjQuery(\"#sortOrder\").val('');\n\t\t\tvar params = {\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\tsourceModule: jQuery(e.currentTarget).val()\n\t\t\t}\n\t\t\t//Make the select all count as empty\n\t\t\tjQuery('#recordsCount').val('');\n\t\t\t//Make total number of pages as empty\n\t\t\tjQuery('#totalPageCount').text(\"\");\n\t\t\tthisInstance.getListViewRecords(params).done(function (data) {\n\t\t\t\tthisInstance.updatePagination();\n\t\t\t\tthisInstance.registerBasic();\n\t\t\t});\n\t\t});\n\t},\n\t/*\n\t * Function to register the list view row click event\n\t */\n\tregisterRowClickEvent: function () {\n\t\tvar listViewContentDiv = this.getListViewContentContainer();\n\t\tlistViewContentDiv.on('click', '.listViewEntries td:not(.tdActions)', function (e) {\n\t\t\tvar editUrl = jQuery(e.currentTarget).parent().find('..fas').closest('a').attr('href');\n\t\t\twindow.location.href = editUrl;\n\t\t});\n\t},\n\tgetDefaultParams: function () {\n\t\tvar pageNumber = jQuery('#pageNumber').val();\n\t\tvar module = app.getModuleName();\n\t\tvar parent = app.getParentModuleName();\n\t\tvar params = {\n\t\t\t'module': module,\n\t\t\t'parent': parent,\n\t\t\t'page': pageNumber,\n\t\t\t'view': \"List\",\n\t\t\tsourceModule: jQuery('#moduleFilter').val()\n\t\t}\n\n\t\treturn params;\n\t},\n\tregisterAddNewTemplate: function (container) {\n\t\tjQuery('#addButton', container).on('click', function () {\n\t\t\tvar selectedModule = jQuery('#moduleFilter option:selected').val();\n\t\t\twindow.location.href = jQuery(this).data('url') + ((selectedModule) ? '&source_module=' + selectedModule : '');\n\t\t});\n\t},\n\tregisterImportTemplate: function (container) {\n\t\tvar thisInstance = this;\n\t\tjQuery('#importButton', container).on('click', function (e) {\n\t\t\tvar currentElement = jQuery(e.currentTarget);\n\t\t\tvar url = currentElement.data('url');\n\t\t\tif (typeof url !== \"undefined\") {\n\t\t\t\tapp.showModalWindow(null, url,\n\t\t\t\t\tfunction (data) {\n\t\t\t\t\t\tvar form = data.find('form');\n\t\t\t\t\t\tform.validationEngine(app.validationEngineOptions);\n\t\t\t\t\t\tform.on('submit', function (e) {\n\t\t\t\t\t\t\tvar form = jQuery(e.currentTarget);\n\t\t\t\t\t\t\tvar invalidFields = form.data('jqv').InvalidFields;\n\t\t\t\t\t\t\tif (invalidFields.length > 0) {\n\t\t\t\t\t\t\t\t//If validation fails, form should submit again\n\t\t\t\t\t\t\t\tform.removeData('submit');\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\t\t\t\t\t'position': 'html',\n\t\t\t\t\t\t\t\t'blockInfo': {\n\t\t\t\t\t\t\t\t\t'enabled': true\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tthisInstance.importSave(form).done(function (data) {\n\t\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({'mode': 'hide'})\n\t\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({text: data.result.message, type: 'info'});\n\t\t\t\t\t\t\t\tjQuery('#moduleFilter').trigger('change');\n\t\t\t\t\t\t\t}).fail(function (error, err) {\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t}\n\t\t\te.stopPropagation();\n\t\t});\n\t},\n\timportSave: function (form) {\n\t\tvar aDeferred = jQuery.Deferred();\n\t\tvar formData = new FormData(form[0]);\n\t\tvar params = {\n\t\t\turl: \"index.php\",\n\t\t\ttype: \"POST\",\n\t\t\tdata: formData,\n\t\t\tprocessData: false,\n\t\t\tcontentType: false\n\t\t};\n\t\tAppConnector.request(params).done(function (data) {\n\t\t\taDeferred.resolve(data);\n\t\t}).fail(function (textStatus, errorThrown) {\n\t\t\taDeferred.reject(textStatus, errorThrown);\n\t\t});\n\t\treturn aDeferred.promise();\n\t},\n\tregisterDeleteMap: function () {\n\t\tthis.getListContainer().on('click', '.deleteMap', function (e) {\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t\tvar templateId = $(e.currentTarget).closest('tr').data('id');\n\t\t\tSettings_MappedFields_List_Js.deleteById(templateId);\n\t\t});\n\t},\n\tregisterBasic: function () {\n\t\tthis.registerDeleteMap();\n\t},\n\tregisterEvents: function () {\n\t\tthis._super();\n\t\tvar container = this.getListContainer();\n\t\tthis.registerFilterChangeEvent();\n\t\tthis.registerAddNewTemplate(container);\n\t\tthis.registerImportTemplate(container);\n\t\tthis.registerBasic();\n\t}\n});\n"],"names":["Settings_Vtiger_List_Js","jQuery","thisInstance","on","e","val","params","app","getModuleName","getParentModuleName","currentTarget","text","getListViewRecords","done","data","updatePagination","registerBasic","listViewContentDiv","getListViewContentContainer","editUrl","parent","find","closest","attr","location","href","pageNumber","module","container","selectedModule","currentElement","url","showModalWindow","form","validationEngine","validationEngineOptions","invalidFields","InvalidFields","length","removeData","progressIndicatorElement","progressIndicator","importSave","hideModalWindow","showMessage","result","message","type","trigger","fail","error","err","preventDefault","stopPropagation","aDeferred","Deferred","formData","FormData","request","resolve","textStatus","errorThrown","reject","promise","getListContainer","templateId","$","deleteById","registerDeleteMap","_super","registerFilterChangeEvent","registerAddNewTemplate","registerImportTemplate"],"mappings":"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"}