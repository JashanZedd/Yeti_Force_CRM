{"version":3,"file":"List.min.js","sources":["List.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nSettings_Vtiger_List_Js(\n\t'Settings_MappedFields_List_Js',\n\t{},\n\t{\n\t\tgetListContainer: function () {\n\t\t\treturn jQuery('#listViewContainer');\n\t\t},\n\t\tregisterFilterChangeEvent: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tjQuery('#moduleFilter').on('change', function (e) {\n\t\t\t\tjQuery('#pageNumber').val('1');\n\t\t\t\tjQuery('#pageToJump').val('1');\n\t\t\t\tjQuery('#orderBy').val('');\n\t\t\t\tjQuery('#sortOrder').val('');\n\t\t\t\tvar params = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\tsourceModule: jQuery(e.currentTarget).val()\n\t\t\t\t};\n\t\t\t\t//Make the select all count as empty\n\t\t\t\tjQuery('#recordsCount').val('');\n\t\t\t\t//Make total number of pages as empty\n\t\t\t\tjQuery('#totalPageCount').text('');\n\t\t\t\tthisInstance.getListViewRecords(params).done(function (data) {\n\t\t\t\t\tthisInstance.updatePagination();\n\t\t\t\t\tthisInstance.registerBasic();\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tgetDefaultParams: function () {\n\t\t\tvar pageNumber = jQuery('#pageNumber').val();\n\t\t\tvar module = app.getModuleName();\n\t\t\tvar parent = app.getParentModuleName();\n\t\t\tvar params = {\n\t\t\t\tmodule: module,\n\t\t\t\tparent: parent,\n\t\t\t\tpage: pageNumber,\n\t\t\t\tview: 'List',\n\t\t\t\tsourceModule: jQuery('#moduleFilter').val()\n\t\t\t};\n\n\t\t\treturn params;\n\t\t},\n\t\tregisterAddNewTemplate: function (container) {\n\t\t\tjQuery('#addButton', container).on('click', function () {\n\t\t\t\tvar selectedModule = jQuery('#moduleFilter option:selected').val();\n\t\t\t\twindow.location.href = jQuery(this).data('url') + (selectedModule ? '&source_module=' + selectedModule : '');\n\t\t\t});\n\t\t},\n\t\tregisterImportTemplate: function (container) {\n\t\t\tvar thisInstance = this;\n\t\t\tjQuery('#importButton', container).on('click', function (e) {\n\t\t\t\tvar currentElement = jQuery(e.currentTarget);\n\t\t\t\tvar url = currentElement.data('url');\n\t\t\t\tif (typeof url !== 'undefined') {\n\t\t\t\t\tapp.showModalWindow(null, url, function (data) {\n\t\t\t\t\t\tvar form = data.find('form');\n\t\t\t\t\t\tform.validationEngine(app.validationEngineOptions);\n\t\t\t\t\t\tform.on('submit', function (e) {\n\t\t\t\t\t\t\tvar form = jQuery(e.currentTarget);\n\t\t\t\t\t\t\tvar invalidFields = form.data('jqv').InvalidFields;\n\t\t\t\t\t\t\tif (invalidFields.length > 0) {\n\t\t\t\t\t\t\t\t//If validation fails, form should submit again\n\t\t\t\t\t\t\t\tform.removeData('submit');\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\t\t\t\t\tposition: 'html',\n\t\t\t\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\t\t\t\tenabled: true\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tthisInstance\n\t\t\t\t\t\t\t\t.importSave(form)\n\t\t\t\t\t\t\t\t.done(function (data) {\n\t\t\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({ text: data.result.message, type: 'info' });\n\t\t\t\t\t\t\t\t\tjQuery('#moduleFilter').trigger('change');\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.fail(function (error, err) {});\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\te.stopPropagation();\n\t\t\t});\n\t\t},\n\t\timportSave: function (form) {\n\t\t\tvar aDeferred = jQuery.Deferred();\n\t\t\tvar formData = new FormData(form[0]);\n\t\t\tvar params = {\n\t\t\t\turl: 'index.php',\n\t\t\t\ttype: 'POST',\n\t\t\t\tdata: formData,\n\t\t\t\tprocessData: false,\n\t\t\t\tcontentType: false\n\t\t\t};\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t})\n\t\t\t\t.fail(function (textStatus, errorThrown) {\n\t\t\t\t\taDeferred.reject(textStatus, errorThrown);\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\tregisterDeleteMap: function () {\n\t\t\tthis.getListContainer().on('click', '.deleteMap', function (e) {\n\t\t\t\te.stopPropagation();\n\t\t\t\te.preventDefault();\n\t\t\t\tvar templateId = $(e.currentTarget).closest('tr').data('id');\n\t\t\t\tSettings_MappedFields_List_Js.deleteById(templateId);\n\t\t\t});\n\t\t},\n\t\tregisterBasic: function () {\n\t\t\tthis.registerDeleteMap();\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\tthis._super();\n\t\t\tvar container = this.getListContainer();\n\t\t\tthis.registerFilterChangeEvent();\n\t\t\tthis.registerAddNewTemplate(container);\n\t\t\tthis.registerImportTemplate(container);\n\t\t\tthis.registerBasic();\n\t\t}\n\t}\n);\n"],"names":["Settings_Vtiger_List_Js","getListContainer","registerFilterChangeEvent","thisInstance","jQuery","on","e","val","params","module","app","getModuleName","parent","getParentModuleName","sourceModule","currentTarget","text","getListViewRecords","done","updatePagination","registerBasic","getDefaultParams","page","pageNumber","view","registerAddNewTemplate","container","window","location","href","data","selectedModule","registerImportTemplate","url","currentElement","showModalWindow","find","form","validationEngine","validationEngineOptions","invalidFields","InvalidFields","length","removeData","progressIndicator","position","blockInfo","enabled","importSave","hideModalWindow","progressIndicatorElement","mode","Settings_Vtiger_Index_Js","showMessage","result","message","type","trigger","fail","preventDefault","stopPropagation","aDeferred","Deferred","formData","FormData","AppConnector","request","processData","contentType","resolve","textStatus","errorThrown","reject","promise","registerDeleteMap","$","closest","Settings_MappedFields_List_Js","deleteById","templateId","registerEvents","_super"],"mappings":"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"}