"use strict";Settings_Vtiger_List_Js("Settings_MappedFields_List_Js",{},{getListContainer:function(){return jQuery("#listViewContainer")},registerFilterChangeEvent:function(){var thisInstance=this;jQuery("#moduleFilter").on("change",(function(e){jQuery("#pageNumber").val("1"),jQuery("#pageToJump").val("1"),jQuery("#orderBy").val(""),jQuery("#sortOrder").val("");var params={module:app.getModuleName(),parent:app.getParentModuleName(),sourceModule:jQuery(e.currentTarget).val()};jQuery("#recordsCount").val(""),jQuery("#totalPageCount").text(""),thisInstance.getListViewRecords(params).done((function(data){thisInstance.updatePagination(),thisInstance.registerBasic()}))}))},registerRowClickEvent:function(){this.getListViewContentContainer().on("click",".listViewEntries td:not(.tdActions)",(function(e){var editUrl=jQuery(e.currentTarget).parent().find("..fas").closest("a").attr("href");window.location.href=editUrl}))},getDefaultParams:function(){var pageNumber=jQuery("#pageNumber").val();return{module:app.getModuleName(),parent:app.getParentModuleName(),page:pageNumber,view:"List",sourceModule:jQuery("#moduleFilter").val()}},registerAddNewTemplate:function(container){jQuery("#addButton",container).on("click",(function(){var selectedModule=jQuery("#moduleFilter option:selected").val();window.location.href=jQuery(this).data("url")+(selectedModule?"&source_module="+selectedModule:"")}))},registerImportTemplate:function(container){var thisInstance=this;jQuery("#importButton",container).on("click",(function(e){var url=jQuery(e.currentTarget).data("url");void 0!==url&&app.showModalWindow(null,url,(function(data){var form=data.find("form");form.validationEngine(app.validationEngineOptions),form.on("submit",(function(e){var form=jQuery(e.currentTarget);if(form.data("jqv").InvalidFields.length>0)form.removeData("submit");else{var progressIndicatorElement=jQuery.progressIndicator({position:"html",blockInfo:{enabled:!0}});thisInstance.importSave(form).done((function(data){app.hideModalWindow(),progressIndicatorElement.progressIndicator({mode:"hide"}),Settings_Vtiger_Index_Js.showMessage({text:data.result.message,type:"info"}),jQuery("#moduleFilter").trigger("change")})).fail((function(error,err){})),e.preventDefault()}}))})),e.stopPropagation()}))},importSave:function(form){var aDeferred=jQuery.Deferred(),params={url:"index.php",type:"POST",data:new FormData(form[0]),processData:!1,contentType:!1};return AppConnector.request(params).done((function(data){aDeferred.resolve(data)})).fail((function(textStatus,errorThrown){aDeferred.reject(textStatus,errorThrown)})),aDeferred.promise()},registerDeleteMap:function(){this.getListContainer().on("click",".deleteMap",(function(e){e.stopPropagation(),e.preventDefault();var templateId=$(e.currentTarget).closest("tr").data("id");Settings_MappedFields_List_Js.deleteById(templateId)}))},registerBasic:function(){this.registerDeleteMap()},registerEvents:function(){this._super();var container=this.getListContainer();this.registerFilterChangeEvent(),this.registerAddNewTemplate(container),this.registerImportTemplate(container),this.registerBasic()}});
//# sourceMappingURL=List.min.js.map
