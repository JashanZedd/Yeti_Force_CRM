{"version":3,"file":"Edit.min.js","sources":["Edit.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nSettings_Vtiger_Edit_Js(\"Settings_MappedFields_Edit_Js\", {\n\tinstance: {}\n\n}, {\n\tcurrentInstance: false,\n\teditContainer: false,\n\tinit: function () {\n\t\tthis.initiate();\n\t},\n\t/**\n\t * Function to get the container which holds all the workflow elements\n\t * @return jQuery object\n\t */\n\tgetContainer: function () {\n\t\treturn this.editContainer;\n\t},\n\t/**\n\t * Function to set the reports container\n\t * @params : element - which represents the workflow container\n\t * @return : current instance\n\t */\n\tsetContainer: function (element) {\n\t\tthis.editContainer = element;\n\t\treturn this;\n\t},\n\t/*\n\t * Function to return the instance based on the step of the Workflow\n\t */\n\tgetInstance: function (step) {\n\t\tif (step in Settings_MappedFields_Edit_Js.instance) {\n\t\t\treturn Settings_MappedFields_Edit_Js.instance[step];\n\t\t} else {\n\t\t\tvar moduleClassName = 'Settings_MappedFields_Edit' + step + '_Js';\n\t\t\tSettings_MappedFields_Edit_Js.instance[step] = new window[moduleClassName]();\n\t\t\treturn Settings_MappedFields_Edit_Js.instance[step]\n\t\t}\n\t},\n\t/*\n\t * Function to get the value of the step \n\t * returns 1 or 2 or 3\n\t */\n\tgetStepValue: function () {\n\t\tvar container = this.currentInstance.getContainer();\n\t\treturn jQuery('.step', container).val();\n\t},\n\t/*\n\t * Function to initiate the step 1 instance\n\t */\n\tinitiate: function (container) {\n\t\tif (typeof container === \"undefined\") {\n\t\t\tcontainer = jQuery('.mfTemplateContents');\n\t\t}\n\t\tif (container.is('.mfTemplateContents')) {\n\t\t\tthis.setContainer(container);\n\t\t} else {\n\t\t\tthis.setContainer(jQuery('.mfTemplateContents', container));\n\t\t}\n\t\tthis.initiateStep('1');\n\t\tthis.currentInstance.registerEvents();\n\t},\n\t/*\n\t * Function to initiate all the operations for a step\n\t * @params step value\n\t */\n\tinitiateStep: function (stepVal) {\n\t\tvar step = 'step' + stepVal;\n\t\tthis.activateHeader(step);\n\t\tthis.currentInstance = this.getInstance(stepVal);\n\t},\n\t/*\n\t * Function to activate the header based on the class\n\t * @params class name\n\t */\n\tactivateHeader: function (step) {\n\t\tvar headersContainer = jQuery('.crumbs ');\n\t\theadersContainer.find('.active').removeClass('active');\n\t\tjQuery('#' + step, headersContainer).addClass('active');\n\t},\n\t/*\n\t * Function to register the click event for next button\n\t */\n\tregisterFormSubmitEvent: function (form) {\n\t\tvar thisInstance = this;\n\t\tif (jQuery.isFunction(thisInstance.currentInstance.submit)) {\n\t\t\tform.on('submit', function (e) {\n\t\t\t\tvar form = jQuery(e.currentTarget);\n\t\t\t\tvar specialValidation = true;\n\t\t\t\tif (jQuery.isFunction(thisInstance.currentInstance.isFormValidate)) {\n\t\t\t\t\tspecialValidation = thisInstance.currentInstance.isFormValidate();\n\t\t\t\t}\n\t\t\t\tif (form.validationEngine('validate') && specialValidation) {\n\t\t\t\t\tthisInstance.currentInstance.submit().done(function (data) {\n\t\t\t\t\t\tif (data) {\n\t\t\t\t\t\t\tthisInstance.getContainer().append(data);\n\t\t\t\t\t\t\tvar stepVal = thisInstance.getStepValue();\n\t\t\t\t\t\t\tvar nextStepVal = parseInt(stepVal) + 1;\n\t\t\t\t\t\t\tthisInstance.initiateStep(nextStepVal);\n\t\t\t\t\t\t\tthisInstance.currentInstance.initialize();\n\t\t\t\t\t\t\tvar container = thisInstance.currentInstance.getContainer();\n\t\t\t\t\t\t\tthisInstance.registerFormSubmitEvent(container);\n\t\t\t\t\t\t\tthisInstance.currentInstance.registerEvents();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t}\n\t\t\t\te.preventDefault();\n\t\t\t})\n\t\t}\n\t},\n\tback: function () {\n\t\tvar step = this.getStepValue();\n\t\tvar prevStep = parseInt(step) - 1;\n\t\tthis.currentInstance.initialize();\n\t\tvar container = this.currentInstance.getContainer();\n\t\tvar mfRecordElement = jQuery('[name=\"record\"]', container);\n\t\tvar mfId = mfRecordElement.val();\n\t\tcontainer.remove();\n\t\tthis.initiateStep(prevStep);\n\t\tvar currentContainer = this.currentInstance.getContainer();\n\t\tcurrentContainer.show();\n\t\tjQuery('[name=\"record\"]', currentContainer).val(mfId);\n\t},\n\tregisterCancelStepClickEvent: function (form) {\n\t\tjQuery('button.cancelLink', form).on('click', function () {\n\t\t\twindow.history.back();\n\t\t});\n\t},\n\t/*\n\t * Function to register the click event for back step \n\t */\n\tregisterBackStepClickEvent: function () {\n\t\tvar thisInstance = this;\n\t\tvar container = this.getContainer();\n\t\tcontainer.on('click', '.backStep', function (e) {\n\t\t\tthisInstance.back();\n\t\t});\n\t},\n\tregisterEvents: function () {\n\t\tvar form = this.currentInstance.getContainer();\n\t\tthis.registerFormSubmitEvent(form);\n\t\tthis.registerBackStepClickEvent();\n\t\tthis.registerCancelStepClickEvent(form);\n\t}\n});\n"],"names":["Settings_Vtiger_Edit_Js","initiate","this","editContainer","element","step","Settings_MappedFields_Edit_Js","instance","moduleClassName","window","container","currentInstance","getContainer","jQuery","val","is","setContainer","initiateStep","registerEvents","stepVal","activateHeader","getInstance","headersContainer","find","removeClass","addClass","form","thisInstance","isFunction","submit","on","e","currentTarget","specialValidation","isFormValidate","validationEngine","done","data","append","getStepValue","nextStepVal","parseInt","initialize","registerFormSubmitEvent","preventDefault","prevStep","mfId","remove","currentContainer","show","history","back","registerBackStepClickEvent","registerCancelStepClickEvent"],"mappings":"aAGAA,wBAAwB,gCAAiC,UAC9C,IAER,kBACe,iBACF,OACT,gBACAC,yBAMQ,kBACNC,KAAKC,4BAOC,SAAUC,qBAClBD,cAAgBC,QACdF,kBAKK,SAAUG,SAClBA,QAAQC,8BAA8BC,gBAClCD,8BAA8BC,SAASF,UAE1CG,gBAAkB,6BAA+BH,KAAO,2CAC9BE,SAASF,MAAQ,IAAII,OAAOD,iBACnDF,8BAA8BC,SAASF,oBAOlC,eACTK,UAAYR,KAAKS,gBAAgBC,sBAC9BC,OAAO,QAASH,WAAWI,gBAKzB,SAAUJ,gBACM,IAAdA,sBACEG,OAAO,wBAEhBH,UAAUK,GAAG,4BACXC,aAAaN,gBAEbM,aAAaH,OAAO,sBAAuBH,iBAE5CO,aAAa,UACbN,gBAAgBO,+BAMR,SAAUC,aACnBd,KAAO,OAASc,aACfC,eAAef,WACfM,gBAAkBT,KAAKmB,YAAYF,yBAMzB,SAAUd,UACrBiB,iBAAmBT,OAAO,6BACbU,KAAK,WAAWC,YAAY,iBACtC,IAAMnB,KAAMiB,kBAAkBG,SAAS,mCAKtB,SAAUC,UAC9BC,aAAezB,KACfW,OAAOe,WAAWD,aAAahB,gBAAgBkB,cAC7CC,GAAG,UAAU,SAAUC,OACvBL,KAAOb,OAAOkB,EAAEC,eAChBC,mBAAoB,EACpBpB,OAAOe,WAAWD,aAAahB,gBAAgBuB,oCAC9BP,aAAahB,gBAAgBuB,kBAE9CR,KAAKS,iBAAiB,aAAeF,gCAC3BtB,gBAAgBkB,SAASO,MAAK,SAAUC,SAChDA,KAAM,cACIzB,eAAe0B,OAAOD,UAC/BlB,QAAUQ,aAAaY,eACvBC,YAAcC,SAAStB,SAAW,eACzBF,aAAauB,0BACb7B,gBAAgB+B,iBACzBhC,UAAYiB,aAAahB,gBAAgBC,4BAChC+B,wBAAwBjC,wBACxBC,gBAAgBO,uBAK9B0B,0BAIC,eACDvC,KAAOH,KAAKqC,eACZM,SAAWJ,SAASpC,MAAQ,OAC3BM,gBAAgB+B,iBACjBhC,UAAYR,KAAKS,gBAAgBC,eAEjCkC,KADkBjC,OAAO,kBAAmBH,WACrBI,gBACjBiC,cACL9B,aAAa4B,cACdG,iBAAmB9C,KAAKS,gBAAgBC,gCAC3BqC,cACV,kBAAmBD,kBAAkBlC,IAAIgC,oCAEnB,SAAUpB,aAChC,oBAAqBA,MAAMI,GAAG,SAAS,kBACtCoB,QAAQC,sCAMW,eACvBxB,aAAezB,KACHA,KAAKU,eACXkB,GAAG,QAAS,aAAa,SAAUC,gBAC/BoB,0BAGC,eACXzB,KAAOxB,KAAKS,gBAAgBC,oBAC3B+B,wBAAwBjB,WACxB0B,kCACAC,6BAA6B3B"}