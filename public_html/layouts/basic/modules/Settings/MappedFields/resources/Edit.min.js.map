{"version":3,"file":"Edit.min.js","sources":["Edit.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nSettings_Vtiger_Edit_Js(\"Settings_MappedFields_Edit_Js\", {\n\tinstance: {}\n\n}, {\n\tcurrentInstance: false,\n\teditContainer: false,\n\tinit: function () {\n\t\tthis.initiate();\n\t},\n\t/**\n\t * Function to get the container which holds all the workflow elements\n\t * @return jQuery object\n\t */\n\tgetContainer: function () {\n\t\treturn this.editContainer;\n\t},\n\t/**\n\t * Function to set the reports container\n\t * @params : element - which represents the workflow container\n\t * @return : current instance\n\t */\n\tsetContainer: function (element) {\n\t\tthis.editContainer = element;\n\t\treturn this;\n\t},\n\t/*\n\t * Function to return the instance based on the step of the Workflow\n\t */\n\tgetInstance: function (step) {\n\t\tif (step in Settings_MappedFields_Edit_Js.instance) {\n\t\t\treturn Settings_MappedFields_Edit_Js.instance[step];\n\t\t} else {\n\t\t\tvar moduleClassName = 'Settings_MappedFields_Edit' + step + '_Js';\n\t\t\tSettings_MappedFields_Edit_Js.instance[step] = new window[moduleClassName]();\n\t\t\treturn Settings_MappedFields_Edit_Js.instance[step]\n\t\t}\n\t},\n\t/*\n\t * Function to get the value of the step \n\t * returns 1 or 2 or 3\n\t */\n\tgetStepValue: function () {\n\t\tvar container = this.currentInstance.getContainer();\n\t\treturn jQuery('.step', container).val();\n\t},\n\t/*\n\t * Function to initiate the step 1 instance\n\t */\n\tinitiate: function (container) {\n\t\tif (typeof container === \"undefined\") {\n\t\t\tcontainer = jQuery('.mfTemplateContents');\n\t\t}\n\t\tif (container.is('.mfTemplateContents')) {\n\t\t\tthis.setContainer(container);\n\t\t} else {\n\t\t\tthis.setContainer(jQuery('.mfTemplateContents', container));\n\t\t}\n\t\tthis.initiateStep('1');\n\t\tthis.currentInstance.registerEvents();\n\t},\n\t/*\n\t * Function to initiate all the operations for a step\n\t * @params step value\n\t */\n\tinitiateStep: function (stepVal) {\n\t\tvar step = 'step' + stepVal;\n\t\tthis.activateHeader(step);\n\t\tthis.currentInstance = this.getInstance(stepVal);\n\t},\n\t/*\n\t * Function to activate the header based on the class\n\t * @params class name\n\t */\n\tactivateHeader: function (step) {\n\t\tvar headersContainer = jQuery('.crumbs ');\n\t\theadersContainer.find('.active').removeClass('active');\n\t\tjQuery('#' + step, headersContainer).addClass('active');\n\t},\n\t/*\n\t * Function to register the click event for next button\n\t */\n\tregisterFormSubmitEvent: function (form) {\n\t\tvar thisInstance = this;\n\t\tif (jQuery.isFunction(thisInstance.currentInstance.submit)) {\n\t\t\tform.on('submit', function (e) {\n\t\t\t\tvar form = jQuery(e.currentTarget);\n\t\t\t\tvar specialValidation = true;\n\t\t\t\tif (jQuery.isFunction(thisInstance.currentInstance.isFormValidate)) {\n\t\t\t\t\tspecialValidation = thisInstance.currentInstance.isFormValidate();\n\t\t\t\t}\n\t\t\t\tif (form.validationEngine('validate') && specialValidation) {\n\t\t\t\t\tthisInstance.currentInstance.submit().done(function (data) {\n\t\t\t\t\t\tif (data) {\n\t\t\t\t\t\t\tthisInstance.getContainer().append(data);\n\t\t\t\t\t\t\tvar stepVal = thisInstance.getStepValue();\n\t\t\t\t\t\t\tvar nextStepVal = parseInt(stepVal) + 1;\n\t\t\t\t\t\t\tthisInstance.initiateStep(nextStepVal);\n\t\t\t\t\t\t\tthisInstance.currentInstance.initialize();\n\t\t\t\t\t\t\tvar container = thisInstance.currentInstance.getContainer();\n\t\t\t\t\t\t\tthisInstance.registerFormSubmitEvent(container);\n\t\t\t\t\t\t\tthisInstance.currentInstance.registerEvents();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t}\n\t\t\t\te.preventDefault();\n\t\t\t})\n\t\t}\n\t},\n\tback: function () {\n\t\tvar step = this.getStepValue();\n\t\tvar prevStep = parseInt(step) - 1;\n\t\tthis.currentInstance.initialize();\n\t\tvar container = this.currentInstance.getContainer();\n\t\tvar mfRecordElement = jQuery('[name=\"record\"]', container);\n\t\tvar mfId = mfRecordElement.val();\n\t\tcontainer.remove();\n\t\tthis.initiateStep(prevStep);\n\t\tvar currentContainer = this.currentInstance.getContainer();\n\t\tcurrentContainer.show();\n\t\tjQuery('[name=\"record\"]', currentContainer).val(mfId);\n\t},\n\tregisterCancelStepClickEvent: function (form) {\n\t\tjQuery('button.cancelLink', form).on('click', function () {\n\t\t\twindow.history.back();\n\t\t});\n\t},\n\t/*\n\t * Function to register the click event for back step \n\t */\n\tregisterBackStepClickEvent: function () {\n\t\tvar thisInstance = this;\n\t\tvar container = this.getContainer();\n\t\tcontainer.on('click', '.backStep', function (e) {\n\t\t\tthisInstance.back();\n\t\t});\n\t},\n\tregisterEvents: function () {\n\t\tvar form = this.currentInstance.getContainer();\n\t\tthis.registerFormSubmitEvent(form);\n\t\tthis.registerBackStepClickEvent();\n\t\tthis.registerCancelStepClickEvent(form);\n\t}\n});\n"],"names":["Settings_Vtiger_Edit_Js","initiate","editContainer","element","step","Settings_MappedFields_Edit_Js","instance","moduleClassName","window","container","currentInstance","getContainer","jQuery","val","is","setContainer","initiateStep","registerEvents","stepVal","activateHeader","getInstance","headersContainer","find","removeClass","addClass","form","thisInstance","isFunction","submit","on","e","currentTarget","specialValidation","isFormValidate","validationEngine","done","data","append","getStepValue","nextStepVal","parseInt","initialize","registerFormSubmitEvent","preventDefault","prevStep","mfRecordElement","mfId","remove","currentContainer","show","history","back","registerBackStepClickEvent","registerCancelStepClickEvent"],"mappings":"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"}