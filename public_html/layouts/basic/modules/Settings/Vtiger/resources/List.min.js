"use strict";Vtiger_List_Js("Settings_Vtiger_List_Js",{triggerDelete:function(event,url){event.stopPropagation(),Vtiger_List_Js.getInstance().DeleteRecord(url)},makeDeleteRequest:function(params,aDeferred,instance){AppConnector.request(params).done((function(data){var response=data.result;response&&response.success?($("#recordsCount").val(""),$("#totalPageCount").text(""),instance.getListViewRecords().done((function(){instance.updatePagination()}))):Vtiger_Helper_Js.showPnotify({text:response.message}),aDeferred.resolve(data)}))},deleteById:function(id){var _this=this,showConfirmation=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],aDeferred=jQuery.Deferred(),instance=Vtiger_List_Js.getInstance(),params=$.extend(instance.getDeleteParams(),{record:id});return showConfirmation?Vtiger_Helper_Js.showConfirmationBox({message:app.vtranslate("JS_DELETE_RECORD_CONFIRMATION")}).done((function(e){_this.makeDeleteRequest(params,aDeferred,instance)})):this.makeDeleteRequest(params,aDeferred,instance),aDeferred.promise()}},{getDeleteParams:function(){return{module:app.getModuleName(),parent:app.getParentModuleName(),action:"DeleteAjax"}},getListViewContainer:function(){return 0==this.listViewContainer&&(this.listViewContainer=$("div.listViewPageDiv")),this.listViewContainer},DeleteRecord:function(url){var thisInstance=this;AppConnector.request(url).done((function(data){data&&app.showModalWindow(data,(function(container){thisInstance.postDeleteAction(container)}))}))},postDeleteAction:function(container){var thisInstance=this,deleteConfirmForm=jQuery(container).find("#DeleteModal");deleteConfirmForm.on("submit",(function(e){e.preventDefault();var deleteActionUrl=deleteConfirmForm.serializeFormData();AppConnector.request(deleteActionUrl).done((function(){app.hideModalWindow();var params={text:app.vtranslate("JS_RECORD_DELETED_SUCCESSFULLY")};Settings_Vtiger_Index_Js.showMessage(params),jQuery("#recordsCount").val(""),jQuery("#totalPageCount").text(""),thisInstance.getListViewRecords().done((function(){thisInstance.updatePagination()}))})).fail((function(error,err){app.hideModalWindow()}))}))},getPageJumpParams:function(){var pageCountParams={module:app.getModuleName(),parent:"Settings",action:"ListAjax",mode:"getPageCount",viewname:this.getCurrentCvId()},sourceModule=jQuery("#moduleFilter").val();return void 0!==sourceModule&&(pageCountParams.sourceModule=sourceModule),pageCountParams},registerEvents:function(){this.registerRowClickEvent(),this.registerCheckBoxClickEvent(),this.registerHeadersClickEvent(),this.registerPageNavigationEvents(),this.registerEventForTotalRecordsCount()}});
//# sourceMappingURL=List.min.js.map
