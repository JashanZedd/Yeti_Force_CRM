{"version":3,"file":"CustomRecordNumbering.min.js","sources":["CustomRecordNumbering.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n *************************************************************************************/\n'use strict';\n\n$.Class('Settings_CustomRecordNumbering_Js', {}, {\n\n\tform: false,\n\tgetForm: function () {\n\t\tif (this.form == false) {\n\t\t\tthis.form = jQuery('#EditView');\n\t\t}\n\t\treturn this.form;\n\t},\n\n\t/**\n\t * Function to register change event for source module field\n\t */\n\tregisterOnChangeEventOfSourceModule() {\n\t\tconst editViewForm = this.getForm();\n\t\tconst sequenceBtn = editViewForm.find('.js-adavanced-sequence');\n\t\teditViewForm.find('[name=\"sourceModule\"]').on('change', function (e) {\n\t\t\t$('.saveButton').removeAttr('disabled');\n\t\t\tsequenceBtn.addClass('d-none');\n\t\t\tAppConnector.request({\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\taction: 'CustomRecordNumberingAjax',\n\t\t\t\tmode: 'getModuleCustomNumberingData',\n\t\t\t\tsourceModule: $(e.currentTarget).val()\n\t\t\t}).done(function (data) {\n\t\t\t\tif (data) {\n\t\t\t\t\teditViewForm.find('[name=\"prefix\"]').val(data.result.prefix);\n\t\t\t\t\teditViewForm.find('[name=\"leading_zeros\"]').val(data.result.leading_zeros).trigger('change');\n\t\t\t\t\teditViewForm.find('[name=\"reset_sequence\"]').val(data.result.reset_sequence).trigger('change');\n\t\t\t\t\teditViewForm.find('[name=\"postfix\"]').val(data.result.postfix);\n\t\t\t\t\teditViewForm.find('[name=\"sequenceNumber\"]').val(data.result.cur_id);\n\t\t\t\t\teditViewForm.find('[name=\"sequenceNumber\"]').data('oldSequenceNumber', data.result.cur_id);\n\t\t\t\t\tlet options = '';\n\t\t\t\t\tfor (var index in data.result.picklists) {\n\t\t\t\t\t\toptions += '<option value=\"picklist:' + index + '\">' + data.result.picklists[index] + '</option>';\n\t\t\t\t\t}\n\t\t\t\t\teditViewForm.find('#picklistVariables').html(options)\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\n\t/**\n\t * Function to register event for saving module custom numbering\n\t */\n\tsaveModuleCustomNumbering() {\n\t\tif ($('.saveButton').attr(\"disabled\")) {\n\t\t\treturn;\n\t\t}\n\t\tconst editViewForm = this.getForm();\n\t\tconst sourceModule = editViewForm.find('[name=\"sourceModule\"]').val();\n\t\tconst prefix = editViewForm.find('[name=\"prefix\"]');\n\t\tconst leadingZeros = editViewForm.find('[name=\"leading_zeros\"]').val();\n\t\tconst currentPrefix = $.trim(prefix.val());\n\t\tconst postfix = editViewForm.find('[name=\"postfix\"]');\n\t\tconst currentPostfix = jQuery.trim(postfix.val());\n\t\tconst sequenceNumberElement = editViewForm.find('[name=\"sequenceNumber\"]');\n\t\tconst sequenceNumber = sequenceNumberElement.val();\n\t\tconst oldSequenceNumber = sequenceNumberElement.data('oldSequenceNumber');\n\t\tif ((sequenceNumber < oldSequenceNumber) && (currentPrefix === prefix.data('oldPrefix')) && (currentPostfix === postfix.data('oldPostfix'))) {\n\t\t\tsequenceNumberElement.validationEngine('showPrompt', app.vtranslate('JS_SEQUENCE_NUMBER_MESSAGE') + \" \" + oldSequenceNumber, 'error', 'topLeft', true);\n\t\t\treturn;\n\t\t}\n\t\teditViewForm.find('.saveButton').attr(\"disabled\", \"disabled\");\n\t\tAppConnector.request({\n\t\t\tmodule: app.getModuleName(),\n\t\t\tparent: app.getParentModuleName(),\n\t\t\taction: 'CustomRecordNumberingAjax',\n\t\t\tmode: 'saveModuleCustomNumberingData',\n\t\t\tsourceModule: sourceModule,\n\t\t\tprefix: currentPrefix,\n\t\t\tleading_zeros: leadingZeros,\n\t\t\tpostfix: currentPostfix,\n\t\t\tsequenceNumber: sequenceNumber,\n\t\t\treset_sequence: editViewForm.find('[name=\"reset_sequence\"]').val(),\n\t\t}).done(function (data) {\n\t\t\tif (data.success === true) {\n\t\t\t\tSettings_Vtiger_Index_Js.showMessage({\n\t\t\t\t\ttext: app.vtranslate('JS_RECORD_NUMBERING_SAVED_SUCCESSFULLY_FOR') + \" \" + editViewForm.find('option[value=\"' + sourceModule + '\"]').text()\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tSettings_Vtiger_Index_Js.showMessage({\n\t\t\t\t\ttext: currentPrefix + \" \" + app.vtranslate(data.error.message),\n\t\t\t\t\ttype: 'error'\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t * Function to handle update record with the given sequence number\n\t */\n\tregisterEventToUpdateRecordsWithSequenceNumber() {\n\t\tconst editViewForm = this.getForm();\n\t\teditViewForm.find('[name=\"updateRecordWithSequenceNumber\"]').on('click', function () {\n\t\t\tconst sourceModule = editViewForm.find('[name=\"sourceModule\"]').val();\n\t\t\tAppConnector.request({\n\t\t\t\t'module': app.getModuleName(),\n\t\t\t\t'parent': app.getParentModuleName(),\n\t\t\t\t'action': \"CustomRecordNumberingAjax\",\n\t\t\t\t'mode': \"updateRecordsWithSequenceNumber\",\n\t\t\t\t'sourceModule': sourceModule\n\t\t\t}).done(function (data) {\n\t\t\t\tif (data.success === true) {\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({text: app.vtranslate('JS_RECORD_NUMBERING_UPDATED_SUCCESSFULLY_FOR') + \" \" + editViewForm.find('option[value=\"' + sourceModule + '\"]').text()});\n\t\t\t\t} else {\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(data.error.message);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\n\t/**\n\t * Function to register change event for prefix,postfix,reset_sequence and sequence number\n\t */\n\tregisterChangeEvent() {\n\t\tthis.getForm().find('[name=\"prefix\"],[name=\"leading_zeros\"],[name=\"sequenceNumber\"],[name=\"postfix\"],[name=\"reset_sequence\"]').on('change', this.checkPrefix.bind(this))\n\t},\n\n\tregisterCopyClipboard: function (editViewForm) {\n\t\tnew ClipboardJS('#customVariableCopy', {\n\t\t\ttext: function (trigger) {\n\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\ttext: app.vtranslate('JS_NOTIFY_COPY_TEXT'),\n\t\t\t\t\ttype: 'success'\n\t\t\t\t});\n\t\t\t\treturn '{{' + editViewForm.find('#customVariables').val() + '}}';\n\t\t\t}\n\t\t});\n\t\tnew ClipboardJS('#picklistVariableCopy', {\n\t\t\ttext: function (trigger) {\n\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\ttext: app.vtranslate('JS_NOTIFY_COPY_TEXT'),\n\t\t\t\t\ttype: 'success'\n\t\t\t\t});\n\t\t\t\treturn '{{' + editViewForm.find('#picklistVariables').val() + '}}';\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t * Check if reset sequence appears in prefix or postfix to prevent duplicate number generation\n\t * @returns {boolean}\n\t */\n\tcheckPrefix() {\n\t\tlet sequenceExists = false;\n\t\tconst editViewForm = this.getForm();\n\t\tconst value = editViewForm.find('[name=\"reset_sequence\"]').val();\n\t\tconst prefix = editViewForm.find('[name=\"prefix\"]').val();\n\t\tconst postfix = editViewForm.find('[name=\"postfix\"]').val();\n\t\tconst saveBtn = editViewForm.find('.saveButton');\n\t\tswitch (value) {\n\t\t\tcase 'Y':\n\t\t\t\tif (prefix.indexOf('{{YY}}') === -1 && prefix.indexOf('{{YYYY}}') === -1 && postfix.indexOf('{{YY}}') === -1 && postfix.indexOf('{{YYYY}}') === -1) {\n\t\t\t\t\tsaveBtn.attr('disabled', 'disabled');\n\t\t\t\t\tVtiger_Helper_Js.showMessage({\n\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\ttext: app.vtranslate('JS_RS_ADD_YEAR_VARIABLE')\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tsaveBtn.removeAttr('disabled');\n\t\t\t\t\tsequenceExists = true;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'M':\n\t\t\t\tif (prefix.indexOf('{{MM}}') === -1 && prefix.indexOf('{{M}}') === -1 && postfix.indexOf('{{MM}}') === -1 && postfix.indexOf('{{M}}') === -1) {\n\t\t\t\t\tsaveBtn.attr('disabled', 'disabled');\n\t\t\t\t\tVtiger_Helper_Js.showMessage({\n\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\ttext: app.vtranslate('JS_RS_ADD_MONTH_VARIABLE')\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tsaveBtn.removeAttr('disabled');\n\t\t\t\t\tsequenceExists = true;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'D':\n\t\t\t\tif (prefix.indexOf('{{DD}}') === -1 && prefix.indexOf('{{D}}') === -1 && postfix.indexOf('{{DD}}') === -1 && postfix.indexOf('{{D}}') === -1) {\n\t\t\t\t\tsaveBtn.attr('disabled', 'disabled');\n\t\t\t\t\tVtiger_Helper_Js.showMessage({\n\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\ttext: app.vtranslate('JS_RS_ADD_DAY_VARIABLE')\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tsaveBtn.removeAttr('disabled');\n\t\t\t\t\tsequenceExists = true;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'X':\n\t\t\tdefault:\n\t\t\t\tsaveBtn.removeAttr('disabled');\n\t\t\t\tsequenceExists = true;\n\t\t\t\tbreak;\n\t\t}\n\t\tif (sequenceExists) {\n\t\t\tlet regex = new RegExp(\"{{picklist:([a-z0-9_]+)}}\", 'g');\n\t\t\tlet regexResult = (postfix + prefix).match(regex);\n\t\t\tif (regexResult && regexResult.length > 1) {\n\t\t\t\tVtiger_Helper_Js.showMessage({\n\t\t\t\t\ttype: 'error',\n\t\t\t\t\ttext: app.vtranslate('JS_PICKLIST_TOO_MANY')\n\t\t\t\t});\n\t\t\t\tsequenceExists = false;\n\t\t\t\tsaveBtn.attr('disabled', 'disabled');\n\t\t\t} else {\n\t\t\t\tsaveBtn.removeAttr('disabled');\n\t\t\t\tsequenceExists = true;\n\t\t\t}\n\t\t}\n\t\tthis.checkAdavancedSequenceBtn();\n\t\treturn sequenceExists;\n\t},\n\n\t/**\n\t * Function to enable button if prefix or postfix has picklist value\n\t */\n\tcheckAdavancedSequenceBtn: function(){\n\t\tconst editViewForm = this.getForm();\n\t\tconst sequenceBtn = editViewForm.find('.js-adavanced-sequence');\n\t\tconst prefix = editViewForm.find('[name=\"prefix\"]').val();\n\t\tconst postfix = editViewForm.find('[name=\"postfix\"]').val();\n\t\tlet regex = new RegExp(\"{{picklist:([a-z0-9_]+)}}\", 'g');\n\t\tlet regexResult = (postfix + prefix).match(regex);\n\t\tif ((regexResult && regexResult.length > 1) || !regexResult) {\n\t\t\tsequenceBtn.addClass('d-none');\n\t\t} else {\n\t\t\tsequenceBtn.removeClass('d-none');\n\t\t}\n\t},\n\n\t/**\n\t * Function to register event on button\n\t */\n\tregisterAdavancedSequenceEvent: function(){\n\t\tconst editViewForm = this.getForm();\n\t\tconst sequenceBtn = editViewForm.find('.js-adavanced-sequence');\n\t\tsequenceBtn.on('click', function(){\n\t\t\tlet sourceModule = editViewForm.find('[name=\"sourceModule\"]').val();\n\t\t\tlet picklistName = '';\n\t\t\tlet prefix = editViewForm.find('[name=\"prefix\"]').val();\n\t\t\tlet postfix = editViewForm.find('[name=\"postfix\"]').val();\n\t\t\tlet regex = new RegExp(\"{{picklist:([a-z0-9_]+)}}\", 'g');\n\t\t\tif ((prefix).match(regex)){\n\t\t\t\tpicklistName = prefix;\n\t\t\t} else if((postfix).match(regex)){\n\t\t\t\tpicklistName = postfix;\n\t\t\t}\n\t\t\tAppConnector.request({\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\tview: 'CustomRecordNumberingAdvanced',\n\t\t\t\tsourceModule: sourceModule,\n\t\t\t\tpicklist: picklistName,\n\t\t\t}).done(function (data) {\n\t\t\t\tif(data){\n\t\t\t\t\tapp.showModalWindow(data, function (container) {\n\t\t\t\t\t\tlet modalForm = container.find('form');\n\t\t\t\t\t\tmodalForm.validationEngine(app.validationEngineOptionsForRecord);\n\t\t\t\t\t\tcontainer.on('click', '.js-modal__save', function(e) {\n\t\t\t\t\t\t\tif (modalForm.validationEngine('validate')){\n\t\t\t\t\t\t\t\tlet progressIndicatorElement = $.progressIndicator({\n\t\t\t\t\t\t\t\t\tposition: 'html',\n\t\t\t\t\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\t\t\t\t\tenabled: true\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\t\t\t\t\taction: 'CustomRecordNumberingAjax',\n\t\t\t\t\t\t\t\t\tmode: 'saveModuleCustomNumberingAdvanceData',\n\t\t\t\t\t\t\t\t\tsourceModule: sourceModule,\n\t\t\t\t\t\t\t\t\tsequenceNumber: modalForm.find('.js-picklist-sequence').serializeFormData()\n\t\t\t\t\t\t\t\t}).done(function (data) {\n\t\t\t\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({mode: 'hide'});\n\t\t\t\t\t\t\t\t\tif (data.success === true) {\n\t\t\t\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({\n\t\t\t\t\t\t\t\t\t\t\ttext: app.vtranslate('JS_RECORD_NUMBERING_SAVED_SUCCESSFULLY_FOR') + ' ' + editViewForm.find('option[value=\"' + sourceModule + '\"]').text()\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\n\t/**\n\t * Function to register events\n\t */\n\tregisterEvents: function () {\n\t\tconst thisInstance = this;\n\t\tconst editViewForm = this.getForm();\n\t\tthis.registerOnChangeEventOfSourceModule();\n\t\tthis.registerEventToUpdateRecordsWithSequenceNumber();\n\t\tthis.registerChangeEvent();\n\t\tthis.checkAdavancedSequenceBtn();\n\t\tthis.registerAdavancedSequenceEvent();\n\t\tlet params = app.validationEngineOptions;\n\t\tparams.onValidationComplete = function (editViewForm, valid) {\n\t\t\tif (valid) {\n\t\t\t\tthisInstance.saveModuleCustomNumbering();\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\t\teditViewForm.validationEngine('detach');\n\t\teditViewForm.validationEngine('attach', params);\n\t\tthis.registerCopyClipboard(editViewForm);\n\t}\n});\n$(document).ready(function () {\n\tlet customRecordNumberingInstance = new Settings_CustomRecordNumbering_Js();\n\tcustomRecordNumberingInstance.registerEvents();\n});\n"],"names":["$","Class","form","jQuery","editViewForm","getForm","sequenceBtn","find","on","e","removeAttr","addClass","request","app","getModuleName","getParentModuleName","currentTarget","val","done","data","result","prefix","leading_zeros","trigger","reset_sequence","postfix","cur_id","options","index","picklists","html","attr","sourceModule","leadingZeros","currentPrefix","trim","currentPostfix","sequenceNumberElement","sequenceNumber","oldSequenceNumber","validationEngine","vtranslate","success","showMessage","text","error","message","checkPrefix","bind","ClipboardJS","showPnotify","sequenceExists","value","saveBtn","indexOf","regex","RegExp","regexResult","match","length","checkAdavancedSequenceBtn","removeClass","picklistName","showModalWindow","container","modalForm","validationEngineOptionsForRecord","progressIndicatorElement","progressIndicator","serializeFormData","mode","hideModalWindow","thisInstance","registerOnChangeEventOfSourceModule","registerEventToUpdateRecordsWithSequenceNumber","registerChangeEvent","registerAdavancedSequenceEvent","params","validationEngineOptions","onValidationComplete","valid","saveModuleCustomNumbering","registerCopyClipboard","document","ready","customRecordNumberingInstance","Settings_CustomRecordNumbering_Js","registerEvents"],"mappings":"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"}