{"version":3,"file":"CustomRecordNumbering.min.js","sources":["CustomRecordNumbering.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n *************************************************************************************/\n'use strict';\n\n$.Class('Settings_CustomRecordNumbering_Js', {}, {\n\n\tform: false,\n\tgetForm: function () {\n\t\tif (this.form == false) {\n\t\t\tthis.form = jQuery('#EditView');\n\t\t}\n\t\treturn this.form;\n\t},\n\n\t/**\n\t * Function to register change event for source module field\n\t */\n\tregisterOnChangeEventOfSourceModule() {\n\t\tconst editViewForm = this.getForm();\n\t\tconst sequenceBtn = editViewForm.find('.js-adavanced-sequence');\n\t\teditViewForm.find('[name=\"sourceModule\"]').on('change', function (e) {\n\t\t\t$('.saveButton').removeAttr('disabled');\n\t\t\tsequenceBtn.addClass('d-none');\n\t\t\tAppConnector.request({\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\taction: 'CustomRecordNumberingAjax',\n\t\t\t\tmode: 'getModuleCustomNumberingData',\n\t\t\t\tsourceModule: $(e.currentTarget).val()\n\t\t\t}).done(function (data) {\n\t\t\t\tif (data) {\n\t\t\t\t\teditViewForm.find('[name=\"prefix\"]').val(data.result.prefix);\n\t\t\t\t\teditViewForm.find('[name=\"leading_zeros\"]').val(data.result.leading_zeros).trigger('change');\n\t\t\t\t\teditViewForm.find('[name=\"reset_sequence\"]').val(data.result.reset_sequence).trigger('change');\n\t\t\t\t\teditViewForm.find('[name=\"postfix\"]').val(data.result.postfix);\n\t\t\t\t\teditViewForm.find('[name=\"sequenceNumber\"]').val(data.result.cur_id);\n\t\t\t\t\teditViewForm.find('[name=\"sequenceNumber\"]').data('oldSequenceNumber', data.result.cur_id);\n\t\t\t\t\tlet options = '';\n\t\t\t\t\tfor (var index in data.result.picklists) {\n\t\t\t\t\t\toptions += '<option value=\"picklist:' + index + '\">' + data.result.picklists[index] + '</option>';\n\t\t\t\t\t}\n\t\t\t\t\teditViewForm.find('#picklistVariables').html(options)\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\n\t/**\n\t * Function to register event for saving module custom numbering\n\t */\n\tsaveModuleCustomNumbering() {\n\t\tif ($('.saveButton').attr(\"disabled\")) {\n\t\t\treturn;\n\t\t}\n\t\tconst editViewForm = this.getForm();\n\t\tconst sourceModule = editViewForm.find('[name=\"sourceModule\"]').val();\n\t\tconst prefix = editViewForm.find('[name=\"prefix\"]');\n\t\tconst leadingZeros = editViewForm.find('[name=\"leading_zeros\"]').val();\n\t\tconst currentPrefix = $.trim(prefix.val());\n\t\tconst postfix = editViewForm.find('[name=\"postfix\"]');\n\t\tconst currentPostfix = jQuery.trim(postfix.val());\n\t\tconst sequenceNumberElement = editViewForm.find('[name=\"sequenceNumber\"]');\n\t\tconst sequenceNumber = sequenceNumberElement.val();\n\t\tconst oldSequenceNumber = sequenceNumberElement.data('oldSequenceNumber');\n\t\tif ((sequenceNumber < oldSequenceNumber) && (currentPrefix === prefix.data('oldPrefix')) && (currentPostfix === postfix.data('oldPostfix'))) {\n\t\t\tsequenceNumberElement.validationEngine('showPrompt', app.vtranslate('JS_SEQUENCE_NUMBER_MESSAGE') + \" \" + oldSequenceNumber, 'error', 'topLeft', true);\n\t\t\treturn;\n\t\t}\n\t\teditViewForm.find('.saveButton').attr(\"disabled\", \"disabled\");\n\t\tAppConnector.request({\n\t\t\tmodule: app.getModuleName(),\n\t\t\tparent: app.getParentModuleName(),\n\t\t\taction: 'CustomRecordNumberingAjax',\n\t\t\tmode: 'saveModuleCustomNumberingData',\n\t\t\tsourceModule: sourceModule,\n\t\t\tprefix: currentPrefix,\n\t\t\tleading_zeros: leadingZeros,\n\t\t\tpostfix: currentPostfix,\n\t\t\tsequenceNumber: sequenceNumber,\n\t\t\treset_sequence: editViewForm.find('[name=\"reset_sequence\"]').val(),\n\t\t}).done(function (data) {\n\t\t\tif (data.success === true) {\n\t\t\t\tSettings_Vtiger_Index_Js.showMessage({\n\t\t\t\t\ttext: app.vtranslate('JS_RECORD_NUMBERING_SAVED_SUCCESSFULLY_FOR') + \" \" + editViewForm.find('option[value=\"' + sourceModule + '\"]').text()\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tSettings_Vtiger_Index_Js.showMessage({\n\t\t\t\t\ttext: currentPrefix + \" \" + app.vtranslate(data.error.message),\n\t\t\t\t\ttype: 'error'\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t * Function to handle update record with the given sequence number\n\t */\n\tregisterEventToUpdateRecordsWithSequenceNumber() {\n\t\tconst editViewForm = this.getForm();\n\t\teditViewForm.find('[name=\"updateRecordWithSequenceNumber\"]').on('click', function () {\n\t\t\tconst sourceModule = editViewForm.find('[name=\"sourceModule\"]').val();\n\t\t\tAppConnector.request({\n\t\t\t\t'module': app.getModuleName(),\n\t\t\t\t'parent': app.getParentModuleName(),\n\t\t\t\t'action': \"CustomRecordNumberingAjax\",\n\t\t\t\t'mode': \"updateRecordsWithSequenceNumber\",\n\t\t\t\t'sourceModule': sourceModule\n\t\t\t}).done(function (data) {\n\t\t\t\tif (data.success === true) {\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({text: app.vtranslate('JS_RECORD_NUMBERING_UPDATED_SUCCESSFULLY_FOR') + \" \" + editViewForm.find('option[value=\"' + sourceModule + '\"]').text()});\n\t\t\t\t} else {\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(data.error.message);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\n\t/**\n\t * Function to register change event for prefix,postfix,reset_sequence and sequence number\n\t */\n\tregisterChangeEvent() {\n\t\tthis.getForm().find('[name=\"prefix\"],[name=\"leading_zeros\"],[name=\"sequenceNumber\"],[name=\"postfix\"],[name=\"reset_sequence\"]').on('change', this.checkPrefix.bind(this))\n\t},\n\n\tregisterCopyClipboard: function (editViewForm) {\n\t\tnew ClipboardJS('#customVariableCopy', {\n\t\t\ttext: function (trigger) {\n\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\ttext: app.vtranslate('JS_NOTIFY_COPY_TEXT'),\n\t\t\t\t\ttype: 'success'\n\t\t\t\t});\n\t\t\t\treturn '{{' + editViewForm.find('#customVariables').val() + '}}';\n\t\t\t}\n\t\t});\n\t\tnew ClipboardJS('#picklistVariableCopy', {\n\t\t\ttext: function (trigger) {\n\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\ttext: app.vtranslate('JS_NOTIFY_COPY_TEXT'),\n\t\t\t\t\ttype: 'success'\n\t\t\t\t});\n\t\t\t\treturn '{{' + editViewForm.find('#picklistVariables').val() + '}}';\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t * Check if reset sequence appears in prefix or postfix to prevent duplicate number generation\n\t * @returns {boolean}\n\t */\n\tcheckPrefix() {\n\t\tlet sequenceExists = false;\n\t\tconst editViewForm = this.getForm();\n\t\tconst value = editViewForm.find('[name=\"reset_sequence\"]').val();\n\t\tconst prefix = editViewForm.find('[name=\"prefix\"]').val();\n\t\tconst postfix = editViewForm.find('[name=\"postfix\"]').val();\n\t\tconst saveBtn = editViewForm.find('.saveButton');\n\t\tswitch (value) {\n\t\t\tcase 'Y':\n\t\t\t\tif (prefix.indexOf('{{YY}}') === -1 && prefix.indexOf('{{YYYY}}') === -1 && postfix.indexOf('{{YY}}') === -1 && postfix.indexOf('{{YYYY}}') === -1) {\n\t\t\t\t\tsaveBtn.attr('disabled', 'disabled');\n\t\t\t\t\tVtiger_Helper_Js.showMessage({\n\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\ttext: app.vtranslate('JS_RS_ADD_YEAR_VARIABLE')\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tsaveBtn.removeAttr('disabled');\n\t\t\t\t\tsequenceExists = true;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'M':\n\t\t\t\tif (prefix.indexOf('{{MM}}') === -1 && prefix.indexOf('{{M}}') === -1 && postfix.indexOf('{{MM}}') === -1 && postfix.indexOf('{{M}}') === -1) {\n\t\t\t\t\tsaveBtn.attr('disabled', 'disabled');\n\t\t\t\t\tVtiger_Helper_Js.showMessage({\n\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\ttext: app.vtranslate('JS_RS_ADD_MONTH_VARIABLE')\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tsaveBtn.removeAttr('disabled');\n\t\t\t\t\tsequenceExists = true;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'D':\n\t\t\t\tif (prefix.indexOf('{{DD}}') === -1 && prefix.indexOf('{{D}}') === -1 && postfix.indexOf('{{DD}}') === -1 && postfix.indexOf('{{D}}') === -1) {\n\t\t\t\t\tsaveBtn.attr('disabled', 'disabled');\n\t\t\t\t\tVtiger_Helper_Js.showMessage({\n\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\ttext: app.vtranslate('JS_RS_ADD_DAY_VARIABLE')\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tsaveBtn.removeAttr('disabled');\n\t\t\t\t\tsequenceExists = true;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'X':\n\t\t\tdefault:\n\t\t\t\tsaveBtn.removeAttr('disabled');\n\t\t\t\tsequenceExists = true;\n\t\t\t\tbreak;\n\t\t}\n\t\tif (sequenceExists) {\n\t\t\tlet regex = new RegExp(\"{{picklist:([a-z0-9_]+)}}\", 'g');\n\t\t\tlet regexResult = (postfix + prefix).match(regex);\n\t\t\tif (regexResult && regexResult.length > 1) {\n\t\t\t\tVtiger_Helper_Js.showMessage({\n\t\t\t\t\ttype: 'error',\n\t\t\t\t\ttext: app.vtranslate('JS_PICKLIST_TOO_MANY')\n\t\t\t\t});\n\t\t\t\tsequenceExists = false;\n\t\t\t\tsaveBtn.attr('disabled', 'disabled');\n\t\t\t} else {\n\t\t\t\tsaveBtn.removeAttr('disabled');\n\t\t\t\tsequenceExists = true;\n\t\t\t}\n\t\t}\n\t\tthis.checkAdavancedSequenceBtn();\n\t\treturn sequenceExists;\n\t},\n\n\t/**\n\t * Function to enable button if prefix or postfix has picklist value\n\t */\n\tcheckAdavancedSequenceBtn: function(){\n\t\tconst editViewForm = this.getForm();\n\t\tconst sequenceBtn = editViewForm.find('.js-adavanced-sequence');\n\t\tconst prefix = editViewForm.find('[name=\"prefix\"]').val();\n\t\tconst postfix = editViewForm.find('[name=\"postfix\"]').val();\n\t\tlet regex = new RegExp(\"{{picklist:([a-z0-9_]+)}}\", 'g');\n\t\tlet regexResult = (postfix + prefix).match(regex);\n\t\tif ((regexResult && regexResult.length > 1) || !regexResult) {\n\t\t\tsequenceBtn.addClass('d-none');\n\t\t} else {\n\t\t\tsequenceBtn.removeClass('d-none');\n\t\t}\n\t},\n\n\t/**\n\t * Function to register event on button\n\t */\n\tregisterAdavancedSequenceEvent: function(){\n\t\tconst editViewForm = this.getForm();\n\t\tconst sequenceBtn = editViewForm.find('.js-adavanced-sequence');\n\t\tsequenceBtn.on('click', function(){\n\t\t\tlet sourceModule = editViewForm.find('[name=\"sourceModule\"]').val();\n\t\t\tlet picklistName = '';\n\t\t\tlet prefix = editViewForm.find('[name=\"prefix\"]').val();\n\t\t\tlet postfix = editViewForm.find('[name=\"postfix\"]').val();\n\t\t\tlet regex = new RegExp(\"{{picklist:([a-z0-9_]+)}}\", 'g');\n\t\t\tif ((prefix).match(regex)){\n\t\t\t\tpicklistName = prefix;\n\t\t\t} else if((postfix).match(regex)){\n\t\t\t\tpicklistName = postfix;\n\t\t\t}\n\t\t\tAppConnector.request({\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\tview: 'CustomRecordNumberingAdvanced',\n\t\t\t\tsourceModule: sourceModule,\n\t\t\t\tpicklist: picklistName,\n\t\t\t}).done(function (data) {\n\t\t\t\tif(data){\n\t\t\t\t\tapp.showModalWindow(data, function (container) {\n\t\t\t\t\t\tlet modalForm = container.find('form');\n\t\t\t\t\t\tmodalForm.validationEngine(app.validationEngineOptionsForRecord);\n\t\t\t\t\t\tcontainer.on('click', '.js-modal__save', function(e) {\n\t\t\t\t\t\t\tif (modalForm.validationEngine('validate')){\n\t\t\t\t\t\t\t\tlet progressIndicatorElement = $.progressIndicator({\n\t\t\t\t\t\t\t\t\tposition: 'html',\n\t\t\t\t\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\t\t\t\t\tenabled: true\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\t\t\t\t\taction: 'CustomRecordNumberingAjax',\n\t\t\t\t\t\t\t\t\tmode: 'saveModuleCustomNumberingAdvanceData',\n\t\t\t\t\t\t\t\t\tsourceModule: sourceModule,\n\t\t\t\t\t\t\t\t\tsequenceNumber: modalForm.find('.js-picklist-sequence').serializeFormData()\n\t\t\t\t\t\t\t\t}).done(function (data) {\n\t\t\t\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({mode: 'hide'});\n\t\t\t\t\t\t\t\t\tif (data.success === true) {\n\t\t\t\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({\n\t\t\t\t\t\t\t\t\t\t\ttext: app.vtranslate('JS_RECORD_NUMBERING_SAVED_SUCCESSFULLY_FOR') + ' ' + editViewForm.find('option[value=\"' + sourceModule + '\"]').text()\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\n\t/**\n\t * Function to register events\n\t */\n\tregisterEvents: function () {\n\t\tconst thisInstance = this;\n\t\tconst editViewForm = this.getForm();\n\t\tthis.registerOnChangeEventOfSourceModule();\n\t\tthis.registerEventToUpdateRecordsWithSequenceNumber();\n\t\tthis.registerChangeEvent();\n\t\tthis.checkAdavancedSequenceBtn();\n\t\tthis.registerAdavancedSequenceEvent();\n\t\tlet params = app.validationEngineOptions;\n\t\tparams.onValidationComplete = function (editViewForm, valid) {\n\t\t\tif (valid) {\n\t\t\t\tthisInstance.saveModuleCustomNumbering();\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\t\teditViewForm.validationEngine('detach');\n\t\teditViewForm.validationEngine('attach', params);\n\t\tthis.registerCopyClipboard(editViewForm);\n\t}\n});\n$(document).ready(function () {\n\tlet customRecordNumberingInstance = new Settings_CustomRecordNumbering_Js();\n\tcustomRecordNumberingInstance.registerEvents();\n});\n"],"names":["$","Class","this","form","jQuery","editViewForm","getForm","sequenceBtn","find","on","e","removeAttr","addClass","request","app","getModuleName","getParentModuleName","currentTarget","val","done","data","result","prefix","leading_zeros","trigger","reset_sequence","postfix","cur_id","options","index","picklists","html","attr","sourceModule","leadingZeros","currentPrefix","trim","currentPostfix","sequenceNumberElement","sequenceNumber","oldSequenceNumber","validationEngine","vtranslate","success","showMessage","text","error","message","checkPrefix","bind","ClipboardJS","showPnotify","sequenceExists","value","saveBtn","indexOf","regex","RegExp","regexResult","match","length","checkAdavancedSequenceBtn","removeClass","picklistName","showModalWindow","container","modalForm","validationEngineOptionsForRecord","progressIndicatorElement","progressIndicator","serializeFormData","mode","hideModalWindow","thisInstance","registerOnChangeEventOfSourceModule","registerEventToUpdateRecordsWithSequenceNumber","registerChangeEvent","registerAdavancedSequenceEvent","params","validationEngineOptions","onValidationComplete","valid","saveModuleCustomNumbering","registerCopyClipboard","document","ready","Settings_CustomRecordNumbering_Js","registerEvents"],"mappings":"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"}