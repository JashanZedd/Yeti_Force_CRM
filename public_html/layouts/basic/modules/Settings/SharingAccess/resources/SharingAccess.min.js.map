{"version":3,"file":"SharingAccess.min.js","sources":["SharingAccess.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class(\n\t'Settings_Sharing_Access_Js',\n\t{},\n\t{\n\t\tcontentTable: false,\n\t\tcontentsContainer: false,\n\n\t\tinit: function() {\n\t\t\tthis.setContentTable('.sharingAccessDetails').setContentContainer('#sharingAccessContainer');\n\t\t},\n\n\t\tsetContentTable: function(element) {\n\t\t\tif (element instanceof jQuery) {\n\t\t\t\tthis.contentTable = element;\n\t\t\t\treturn this;\n\t\t\t}\n\t\t\tthis.contentTable = jQuery(element);\n\t\t\treturn this;\n\t\t},\n\n\t\tsetContentContainer: function(element) {\n\t\t\tif (element instanceof jQuery) {\n\t\t\t\tthis.contentsContainer = element;\n\t\t\t\treturn this;\n\t\t\t}\n\t\t\tthis.contentsContainer = jQuery(element);\n\t\t\treturn this;\n\t\t},\n\n\t\tgetContentTable: function() {\n\t\t\treturn this.contentTable;\n\t\t},\n\n\t\tgetContentContainer: function() {\n\t\t\treturn this.contentsContainer;\n\t\t},\n\n\t\tgetCustomRuleContainerClassName: function(parentModuleName) {\n\t\t\treturn 'js-' + parentModuleName + '-custom-rule-list';\n\t\t},\n\n\t\tshowCustomRulesNextToElement: function(parentElement, rulesListElement) {\n\t\t\tvar moduleName = parentElement.data('moduleName');\n\t\t\tvar trElementForRuleList = jQuery(\n\t\t\t\t'<tr class=\"' +\n\t\t\t\t\tthis.getCustomRuleContainerClassName(moduleName) +\n\t\t\t\t\t'\"><td class=\"js-custom-rule-container\" data-js=\"container\" colspan=\"6\"></td></tr>'\n\t\t\t);\n\t\t\tjQuery('td', trElementForRuleList).append(rulesListElement);\n\t\t\tjQuery('.ruleListContainer', trElementForRuleList).css('display', 'none');\n\t\t\tparentElement.after(trElementForRuleList).addClass('collapseRow');\n\t\t\tjQuery('.ruleListContainer', trElementForRuleList).slideDown('slow');\n\t\t},\n\n\t\t/*\n\t\t * function to get custom rules data based on the module\n\t\t * @params: forModule.\n\t\t */\n\t\tgetCustomRules: function(forModule) {\n\t\t\tvar aDeferred = jQuery.Deferred();\n\t\t\tvar params = {};\n\t\t\tparams['for_module'] = forModule;\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['view'] = 'IndexAjax';\n\t\t\tparams['mode'] = 'showRules';\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function(data) {\n\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t})\n\t\t\t\t.fail(function(error) {\n\t\t\t\t\taDeferred.reject(error);\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\n\t\tsave: function(data) {\n\t\t\tvar aDeferred = jQuery.Deferred();\n\n\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (typeof data === 'undefined') {\n\t\t\t\tdata = {};\n\t\t\t}\n\t\t\tAppConnector.request(data)\n\t\t\t\t.done(function(data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t})\n\t\t\t\t.fail(function(error, errorThrown) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\taDeferred.reject(error);\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\n\t\t/*\n\t\t * function to Save the Custom Rule\n\t\t */\n\t\tsaveCustomRule: function(form, e) {\n\t\t\tconst thisInstance = this;\n\t\t\tlet data = form.serializeFormData();\n\t\t\tif (typeof data === 'undefined') {\n\t\t\t\tdata = {};\n\t\t\t}\n\t\t\tlet progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tdata.module = app.getModuleName();\n\t\t\tdata.parent = app.getParentModuleName();\n\t\t\tdata.action = 'IndexAjax';\n\t\t\tdata.mode = 'saveRule';\n\t\t\tAppConnector.request(data).done(function(data) {\n\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\tlet response = data.result;\n\t\t\t\tif (response && response.success) {\n\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\tlet moduleName = $('[name=\"for_module\"]', form).val();\n\t\t\t\t\tthisInstance.loadCustomRulesList(moduleName);\n\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\ttype: 'success',\n\t\t\t\t\t\ttext: response.message\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\ttext: 'JS_ERROR'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t/*\n\t\t * function to load the CustomRules List for the module after save the custom rule\n\t\t */\n\t\tloadCustomRulesList: function(moduleName) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar contentTable = this.getContentTable();\n\n\t\t\tthisInstance.getCustomRules(moduleName).done(function(data) {\n\t\t\t\tvar customRuleListContainer = jQuery(\n\t\t\t\t\t'.' + thisInstance.getCustomRuleContainerClassName(moduleName),\n\t\t\t\t\tcontentTable\n\t\t\t\t);\n\t\t\t\tcustomRuleListContainer.find('td.js-custom-rule-container').html(data);\n\t\t\t});\n\t\t},\n\n\t\teditCustomRule: function(url) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tapp.showModalWindow(null, url, function(modalContainer) {\n\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\tvar form = modalContainer.find('.js-edit-rule-form');\n\t\t\t\tform.on('submit', function(e) {\n\t\t\t\t\t//To stop the submit of form\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tvar formElement = $(e.currentTarget);\n\t\t\t\t\tthisInstance.saveCustomRule(formElement, e);\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\t/*\n\t\t * function to delete Custom Rule from the list\n\t\t * @params: deleteElement.\n\t\t */\n\t\tdeleteCustomRule: function(deleteElement) {\n\t\t\tvar deleteUrl = deleteElement.data('url');\n\t\t\tvar currentRow = deleteElement.closest('.js-custom-rule-entries');\n\t\t\tvar message = app.vtranslate('LBL_DELETE_CONFIRMATION');\n\t\t\tVtiger_Helper_Js.showConfirmationBox({ message: message }).done(function(data) {\n\t\t\t\tAppConnector.request(deleteUrl).done(function(data) {\n\t\t\t\t\tlet response = data.result;\n\t\t\t\t\tif (response && response.success) {\n\t\t\t\t\t\tcurrentRow.fadeOut('slow');\n\t\t\t\t\t\tvar customRuleTable = currentRow.closest('.js-custom-rule-table');\n\t\t\t\t\t\t//after delete the custom rule, update the sequence number of existing rules\n\t\t\t\t\t\tvar nextRows = currentRow.nextAll('js-custom-rule-entries');\n\t\t\t\t\t\tif (nextRows.length > 0) {\n\t\t\t\t\t\t\tjQuery.each(nextRows, function(i, element) {\n\t\t\t\t\t\t\t\tvar currentSequenceElement = jQuery(element).find('.js-sequence-number');\n\t\t\t\t\t\t\t\tvar updatedNumber = parseInt(currentSequenceElement.text()) - 1;\n\t\t\t\t\t\t\t\tcurrentSequenceElement.text(updatedNumber);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcurrentRow.remove();\n\t\t\t\t\t\tvar customRuleEntries = customRuleTable.find('.js-custom-rule-entries');\n\t\t\t\t\t\t//if there are no custom rule entries, we have to hide headers also and show the empty message div\n\t\t\t\t\t\tif (customRuleEntries.length < 1) {\n\t\t\t\t\t\t\tcustomRuleTable\n\t\t\t\t\t\t\t\t.find('.js-custom-rule-headers')\n\t\t\t\t\t\t\t\t.fadeOut('slow')\n\t\t\t\t\t\t\t\t.remove();\n\t\t\t\t\t\t\tcustomRuleTable\n\t\t\t\t\t\t\t\t.parent()\n\t\t\t\t\t\t\t\t.find('.js-record-details')\n\t\t\t\t\t\t\t\t.removeClass('d-none');\n\t\t\t\t\t\t\tcustomRuleTable.addClass('d-none');\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\t\ttext: 'JS_ERROR'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\t/*\n\t\t * function to register click event for radio buttons\n\t\t */\n\t\tregisterSharingAccessEdit: function() {\n\t\t\tvar contentContainer = this.getContentContainer();\n\t\t\tcontentContainer.one('click', 'input:radio', function(e) {\n\t\t\t\tcontentContainer.find('button:submit').removeClass('d-none');\n\t\t\t});\n\t\t},\n\n\t\t/*\n\t\t * Function to register change event for dependent modules privileges\n\t\t */\n\t\tregisterDependentModulesPrivilegesChange: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar container = thisInstance.getContentContainer();\n\t\t\tvar contentTable = this.getContentTable();\n\t\t\tvar modulesList = JSON.parse(container.find('.dependentModules').val());\n\n\t\t\tjQuery.each(modulesList, function(moduleName, dependentList) {\n\t\t\t\tvar dependentPrivilege = contentTable\n\t\t\t\t\t.find('[data-module-name=\"' + moduleName + '\"]')\n\t\t\t\t\t.find('[data-action-state=\"Private\"]');\n\t\t\t\tdependentPrivilege.on('change', function(e) {\n\t\t\t\t\tvar currentTarget = jQuery(e.currentTarget);\n\t\t\t\t\tif (currentTarget.is(':checked')) {\n\t\t\t\t\t\tvar message = app.vtranslate('JS_DEPENDENT_PRIVILEGES_SHOULD_CHANGE');\n\t\t\t\t\t\tbootbox.alert(message);\n\t\t\t\t\t\tjQuery.each(dependentList, function(index, module) {\n\t\t\t\t\t\t\tcontentTable\n\t\t\t\t\t\t\t\t.find('[data-module-name=\"' + module + '\"]')\n\t\t\t\t\t\t\t\t.find('[data-action-state=\"Private\"]')\n\t\t\t\t\t\t\t\t.attr('checked', 'checked');\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\tregisterEvents: function() {\n\t\t\tconst thisInstance = this;\n\t\t\tlet contentTable = thisInstance.getContentTable(),\n\t\t\t\tcontentContainer = thisInstance.getContentContainer();\n\t\t\tthisInstance.registerSharingAccessEdit();\n\t\t\tthisInstance.registerDependentModulesPrivilegesChange();\n\t\t\tcontentTable.on('click', 'td.triggerCustomSharingAccess', function(e) {\n\t\t\t\tlet element = $(e.currentTarget),\n\t\t\t\t\ttrElement = element.closest('tr'),\n\t\t\t\t\tmoduleName = trElement.data('moduleName'),\n\t\t\t\t\tcustomRuleListContainer = $(\n\t\t\t\t\t\t'.' + thisInstance.getCustomRuleContainerClassName(moduleName),\n\t\t\t\t\t\tcontentTable\n\t\t\t\t\t);\n\t\t\t\tif (customRuleListContainer.length > 0) {\n\t\t\t\t\tif (app.isHidden(customRuleListContainer)) {\n\t\t\t\t\t\tcustomRuleListContainer.show();\n\t\t\t\t\t\t$('.ruleListContainer', customRuleListContainer).slideDown('slow');\n\t\t\t\t\t\ttrElement.addClass('collapseRow');\n\t\t\t\t\t\telement.find('button.arrowDown').addClass('d-none');\n\t\t\t\t\t\telement\n\t\t\t\t\t\t\t.find('button.arrowUp')\n\t\t\t\t\t\t\t.removeClass('d-none')\n\t\t\t\t\t\t\t.show();\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$('.ruleListContainer', customRuleListContainer).slideUp('slow', function(e) {\n\t\t\t\t\t\t\tcustomRuleListContainer.css('display', 'none');\n\t\t\t\t\t\t});\n\t\t\t\t\t\telement.find('button.arrowUp').addClass('d-none');\n\t\t\t\t\t\telement\n\t\t\t\t\t\t\t.find('button.arrowDown')\n\t\t\t\t\t\t\t.removeClass('d-none')\n\t\t\t\t\t\t\t.show();\n\t\t\t\t\t\ttrElement.removeClass('collapseRow');\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tlet progressIndicatorElement = $.progressIndicator({\n\t\t\t\t\tposition: 'html',\n\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\tenabled: true\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthisInstance.getCustomRules(moduleName).done(function(data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tthisInstance.showCustomRulesNextToElement(trElement, data);\n\t\t\t\t\telement.find('button.arrowDown').addClass('d-none');\n\t\t\t\t\telement\n\t\t\t\t\t\t.find('button.arrowUp')\n\t\t\t\t\t\t.removeClass('d-none')\n\t\t\t\t\t\t.show();\n\t\t\t\t});\n\t\t\t});\n\t\t\tcontentTable.on('click', '.js-add-custom-rule', function(e) {\n\t\t\t\tlet button = $(e.currentTarget);\n\t\t\t\tthisInstance.editCustomRule(button.data('url'));\n\t\t\t});\n\t\t\tcontentTable.on('click', '.js-edit', function(e) {\n\t\t\t\tlet editElement = $(e.currentTarget),\n\t\t\t\t\teditUrl = editElement.data('url');\n\t\t\t\tthisInstance.editCustomRule(editUrl);\n\t\t\t});\n\t\t\tcontentTable.on('click', '.js-delete', function(e) {\n\t\t\t\tlet deleteElement = $(e.currentTarget);\n\t\t\t\tthisInstance.deleteCustomRule(deleteElement);\n\t\t\t});\n\t\t\tcontentContainer.on('submit', '#js-edit-sharing-access', function(e) {\n\t\t\t\te.preventDefault();\n\t\t\t\tlet form = $(e.currentTarget),\n\t\t\t\t\tdata = form.serializeFormData();\n\t\t\t\tthisInstance.save(data).done(function(data) {\n\t\t\t\t\tcontentContainer.find('button:submit').addClass('d-none');\n\t\t\t\t\tthisInstance.registerSharingAccessEdit();\n\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\ttext: app.vtranslate('JS_NEW_SHARING_RULES_APPLIED_SUCCESSFULLY'),\n\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n);\n\n$(document).ready(function() {\n\tlet settingSharingAcessInstance = new Settings_Sharing_Access_Js();\n\tsettingSharingAcessInstance.registerEvents();\n});\n"],"names":["jQuery","Class","setContentTable","setContentContainer","element","contentTable","contentsContainer","parentModuleName","parentElement","rulesListElement","moduleName","data","trElementForRuleList","getCustomRuleContainerClassName","append","css","after","addClass","slideDown","forModule","aDeferred","Deferred","params","app","getModuleName","getParentModuleName","request","done","resolve","fail","error","reject","promise","progressIndicatorElement","progressIndicator","mode","errorThrown","form","e","thisInstance","serializeFormData","module","parent","action","response","result","success","hideModalWindow","$","val","loadCustomRulesList","showPnotify","message","getContentTable","getCustomRules","customRuleListContainer","find","html","url","showModalWindow","modalContainer","on","preventDefault","formElement","currentTarget","saveCustomRule","deleteElement","deleteUrl","currentRow","closest","vtranslate","showConfirmationBox","fadeOut","customRuleTable","nextRows","nextAll","length","each","i","currentSequenceElement","updatedNumber","parseInt","text","remove","customRuleEntries","removeClass","contentContainer","getContentContainer","one","container","modulesList","JSON","parse","dependentList","dependentPrivilege","is","alert","index","attr","registerSharingAccessEdit","registerDependentModulesPrivilegesChange","trElement","isHidden","show","slideUp","showCustomRulesNextToElement","button","editCustomRule","editElement","editUrl","deleteCustomRule","save","document","ready","settingSharingAcessInstance","Settings_Sharing_Access_Js","registerEvents"],"mappings":"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"}