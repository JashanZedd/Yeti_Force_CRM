{"version":3,"file":"SharingAccess.min.js","sources":["SharingAccess.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class(\n\t'Settings_Sharing_Access_Js',\n\t{},\n\t{\n\t\tcontentTable: false,\n\t\tcontentsContainer: false,\n\n\t\tinit: function () {\n\t\t\tthis.setContentTable('.sharingAccessDetails').setContentContainer('#sharingAccessContainer');\n\t\t},\n\n\t\tsetContentTable: function (element) {\n\t\t\tif (element instanceof jQuery) {\n\t\t\t\tthis.contentTable = element;\n\t\t\t\treturn this;\n\t\t\t}\n\t\t\tthis.contentTable = jQuery(element);\n\t\t\treturn this;\n\t\t},\n\n\t\tsetContentContainer: function (element) {\n\t\t\tif (element instanceof jQuery) {\n\t\t\t\tthis.contentsContainer = element;\n\t\t\t\treturn this;\n\t\t\t}\n\t\t\tthis.contentsContainer = jQuery(element);\n\t\t\treturn this;\n\t\t},\n\n\t\tgetContentTable: function () {\n\t\t\treturn this.contentTable;\n\t\t},\n\n\t\tgetContentContainer: function () {\n\t\t\treturn this.contentsContainer;\n\t\t},\n\n\t\tgetCustomRuleContainerClassName: function (parentModuleName) {\n\t\t\treturn 'js-' + parentModuleName + '-custom-rule-list';\n\t\t},\n\n\t\tshowCustomRulesNextToElement: function (parentElement, rulesListElement) {\n\t\t\tvar moduleName = parentElement.data('moduleName');\n\t\t\tvar trElementForRuleList = jQuery(\n\t\t\t\t'<tr class=\"' +\n\t\t\t\t\tthis.getCustomRuleContainerClassName(moduleName) +\n\t\t\t\t\t'\"><td class=\"js-custom-rule-container\" data-js=\"container\" colspan=\"6\"></td></tr>'\n\t\t\t);\n\t\t\tjQuery('td', trElementForRuleList).append(rulesListElement);\n\t\t\tjQuery('.ruleListContainer', trElementForRuleList).css('display', 'none');\n\t\t\tparentElement.after(trElementForRuleList).addClass('collapseRow');\n\t\t\tjQuery('.ruleListContainer', trElementForRuleList).slideDown('slow');\n\t\t},\n\n\t\t/*\n\t\t * function to get custom rules data based on the module\n\t\t * @params: forModule.\n\t\t */\n\t\tgetCustomRules: function (forModule) {\n\t\t\tvar aDeferred = jQuery.Deferred();\n\t\t\tvar params = {};\n\t\t\tparams['for_module'] = forModule;\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['view'] = 'IndexAjax';\n\t\t\tparams['mode'] = 'showRules';\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t})\n\t\t\t\t.fail(function (error) {\n\t\t\t\t\taDeferred.reject(error);\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\n\t\tsave: function (data) {\n\t\t\tvar aDeferred = jQuery.Deferred();\n\n\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (typeof data === 'undefined') {\n\t\t\t\tdata = {};\n\t\t\t}\n\t\t\tAppConnector.request(data)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t})\n\t\t\t\t.fail(function (error, errorThrown) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\taDeferred.reject(error);\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\n\t\t/*\n\t\t * function to Save the Custom Rule\n\t\t */\n\t\tsaveCustomRule: function (form, e) {\n\t\t\tconst thisInstance = this;\n\t\t\tlet data = form.serializeFormData();\n\t\t\tif (typeof data === 'undefined') {\n\t\t\t\tdata = {};\n\t\t\t}\n\t\t\tlet progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tdata.module = app.getModuleName();\n\t\t\tdata.parent = app.getParentModuleName();\n\t\t\tdata.action = 'IndexAjax';\n\t\t\tdata.mode = 'saveRule';\n\t\t\tAppConnector.request(data).done(function (data) {\n\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\tlet response = data.result;\n\t\t\t\tif (response && response.success) {\n\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\tlet moduleName = $('[name=\"for_module\"]', form).val();\n\t\t\t\t\tthisInstance.loadCustomRulesList(moduleName);\n\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\ttype: 'success',\n\t\t\t\t\t\ttext: response.message\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\ttext: 'JS_ERROR'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t/*\n\t\t * function to load the CustomRules List for the module after save the custom rule\n\t\t */\n\t\tloadCustomRulesList: function (moduleName) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar contentTable = this.getContentTable();\n\n\t\t\tthisInstance.getCustomRules(moduleName).done(function (data) {\n\t\t\t\tvar customRuleListContainer = jQuery(\n\t\t\t\t\t'.' + thisInstance.getCustomRuleContainerClassName(moduleName),\n\t\t\t\t\tcontentTable\n\t\t\t\t);\n\t\t\t\tcustomRuleListContainer.find('td.js-custom-rule-container').html(data);\n\t\t\t});\n\t\t},\n\n\t\teditCustomRule: function (url) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tapp.showModalWindow(null, url, function (modalContainer) {\n\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\tvar form = modalContainer.find('.js-edit-rule-form');\n\t\t\t\tform.on('submit', function (e) {\n\t\t\t\t\t//To stop the submit of form\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tvar formElement = $(e.currentTarget);\n\t\t\t\t\tthisInstance.saveCustomRule(formElement, e);\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\t/*\n\t\t * function to delete Custom Rule from the list\n\t\t * @params: deleteElement.\n\t\t */\n\t\tdeleteCustomRule: function (deleteElement) {\n\t\t\tlet deleteUrl = deleteElement.data('url');\n\t\t\tlet currentRow = deleteElement.closest('.js-custom-rule-entries');\n\t\t\tapp.showConfirmModal({\n\t\t\t\ttitle: app.vtranslate('LBL_DELETE_CONFIRMATION'),\n\t\t\t\tconfirmedCallback: () => {\n\t\t\t\t\tAppConnector.request(deleteUrl).done(function (data) {\n\t\t\t\t\t\tlet response = data.result;\n\t\t\t\t\t\tif (response && response.success) {\n\t\t\t\t\t\t\tcurrentRow.fadeOut('slow');\n\t\t\t\t\t\t\tvar customRuleTable = currentRow.closest('.js-custom-rule-table');\n\t\t\t\t\t\t\t//after delete the custom rule, update the sequence number of existing rules\n\t\t\t\t\t\t\tvar nextRows = currentRow.nextAll('js-custom-rule-entries');\n\t\t\t\t\t\t\tif (nextRows.length > 0) {\n\t\t\t\t\t\t\t\tjQuery.each(nextRows, function (i, element) {\n\t\t\t\t\t\t\t\t\tvar currentSequenceElement = jQuery(element).find('.js-sequence-number');\n\t\t\t\t\t\t\t\t\tvar updatedNumber = parseInt(currentSequenceElement.text()) - 1;\n\t\t\t\t\t\t\t\t\tcurrentSequenceElement.text(updatedNumber);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcurrentRow.remove();\n\t\t\t\t\t\t\tvar customRuleEntries = customRuleTable.find('.js-custom-rule-entries');\n\t\t\t\t\t\t\t//if there are no custom rule entries, we have to hide headers also and show the empty message div\n\t\t\t\t\t\t\tif (customRuleEntries.length < 1) {\n\t\t\t\t\t\t\t\tcustomRuleTable.find('.js-custom-rule-headers').fadeOut('slow').remove();\n\t\t\t\t\t\t\t\tcustomRuleTable.parent().find('.js-record-details').removeClass('d-none');\n\t\t\t\t\t\t\t\tcustomRuleTable.addClass('d-none');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\t\t\ttext: 'JS_ERROR'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t/*\n\t\t * function to register click event for radio buttons\n\t\t */\n\t\tregisterSharingAccessEdit: function () {\n\t\t\tvar contentContainer = this.getContentContainer();\n\t\t\tcontentContainer.one('click', 'input:radio', function (e) {\n\t\t\t\tcontentContainer.find('button:submit').removeClass('d-none');\n\t\t\t});\n\t\t},\n\n\t\t/*\n\t\t * Function to register change event for dependent modules privileges\n\t\t */\n\t\tregisterDependentModulesPrivilegesChange: function () {\n\t\t\tlet container = this.getContentContainer();\n\t\t\tlet contentTable = this.getContentTable();\n\t\t\tlet modulesList = JSON.parse(container.find('.dependentModules').val());\n\n\t\t\t$.each(modulesList, function (moduleName, dependentList) {\n\t\t\t\tvar dependentPrivilege = contentTable\n\t\t\t\t\t.find('[data-module-name=\"' + moduleName + '\"]')\n\t\t\t\t\t.find('[data-action-state=\"Private\"]');\n\t\t\t\tdependentPrivilege.on('change', function (e) {\n\t\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\t\tif (currentTarget.is(':checked')) {\n\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\ttext: app.vtranslate('JS_DEPENDENT_PRIVILEGES_SHOULD_CHANGE'),\n\t\t\t\t\t\t\thide: false\n\t\t\t\t\t\t});\n\t\t\t\t\t\t$.each(dependentList, function (index, module) {\n\t\t\t\t\t\t\tcontentTable\n\t\t\t\t\t\t\t\t.find('[data-module-name=\"' + module + '\"]')\n\t\t\t\t\t\t\t\t.find('[data-action-state=\"Private\"]')\n\t\t\t\t\t\t\t\t.attr('checked', 'checked');\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\tregisterEvents: function () {\n\t\t\tconst thisInstance = this;\n\t\t\tlet contentTable = thisInstance.getContentTable(),\n\t\t\t\tcontentContainer = thisInstance.getContentContainer();\n\t\t\tthisInstance.registerSharingAccessEdit();\n\t\t\tthisInstance.registerDependentModulesPrivilegesChange();\n\t\t\tcontentTable.on('click', 'td.triggerCustomSharingAccess', function (e) {\n\t\t\t\tlet element = $(e.currentTarget),\n\t\t\t\t\ttrElement = element.closest('tr'),\n\t\t\t\t\tmoduleName = trElement.data('moduleName'),\n\t\t\t\t\tcustomRuleListContainer = $('.' + thisInstance.getCustomRuleContainerClassName(moduleName), contentTable);\n\t\t\t\tif (customRuleListContainer.length > 0) {\n\t\t\t\t\tif (app.isHidden(customRuleListContainer)) {\n\t\t\t\t\t\tcustomRuleListContainer.show();\n\t\t\t\t\t\t$('.ruleListContainer', customRuleListContainer).slideDown('slow');\n\t\t\t\t\t\ttrElement.addClass('collapseRow');\n\t\t\t\t\t\telement.find('button.arrowDown').addClass('d-none');\n\t\t\t\t\t\telement.find('button.arrowUp').removeClass('d-none').show();\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$('.ruleListContainer', customRuleListContainer).slideUp('slow', function (e) {\n\t\t\t\t\t\t\tcustomRuleListContainer.css('display', 'none');\n\t\t\t\t\t\t});\n\t\t\t\t\t\telement.find('button.arrowUp').addClass('d-none');\n\t\t\t\t\t\telement.find('button.arrowDown').removeClass('d-none').show();\n\t\t\t\t\t\ttrElement.removeClass('collapseRow');\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tlet progressIndicatorElement = $.progressIndicator({\n\t\t\t\t\tposition: 'html',\n\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\tenabled: true\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthisInstance.getCustomRules(moduleName).done(function (data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tthisInstance.showCustomRulesNextToElement(trElement, data);\n\t\t\t\t\telement.find('button.arrowDown').addClass('d-none');\n\t\t\t\t\telement.find('button.arrowUp').removeClass('d-none').show();\n\t\t\t\t});\n\t\t\t});\n\t\t\tcontentTable.on('click', '.js-add-custom-rule', function (e) {\n\t\t\t\tlet button = $(e.currentTarget);\n\t\t\t\tthisInstance.editCustomRule(button.data('url'));\n\t\t\t});\n\t\t\tcontentTable.on('click', '.js-edit', function (e) {\n\t\t\t\tlet editElement = $(e.currentTarget),\n\t\t\t\t\teditUrl = editElement.data('url');\n\t\t\t\tthisInstance.editCustomRule(editUrl);\n\t\t\t});\n\t\t\tcontentTable.on('click', '.js-delete', function (e) {\n\t\t\t\tlet deleteElement = $(e.currentTarget);\n\t\t\t\tthisInstance.deleteCustomRule(deleteElement);\n\t\t\t});\n\t\t\tcontentContainer.on('submit', '#js-edit-sharing-access', function (e) {\n\t\t\t\te.preventDefault();\n\t\t\t\tlet form = $(e.currentTarget),\n\t\t\t\t\tdata = form.serializeFormData();\n\t\t\t\tthisInstance.save(data).done(function (data) {\n\t\t\t\t\tcontentContainer.find('button:submit').addClass('d-none');\n\t\t\t\t\tthisInstance.registerSharingAccessEdit();\n\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\ttext: app.vtranslate('JS_NEW_SHARING_RULES_APPLIED_SUCCESSFULLY'),\n\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n);\n\njQuery(function () {\n\tlet settingSharingAcessInstance = new Settings_Sharing_Access_Js();\n\tsettingSharingAcessInstance.registerEvents();\n});\n"],"names":["jQuery","Class","contentTable","contentsContainer","init","setContentTable","setContentContainer","element","getContentTable","getContentContainer","getCustomRuleContainerClassName","parentModuleName","showCustomRulesNextToElement","parentElement","rulesListElement","moduleName","data","trElementForRuleList","append","css","after","addClass","slideDown","getCustomRules","forModule","aDeferred","Deferred","params","app","getModuleName","getParentModuleName","AppConnector","request","done","resolve","fail","error","reject","promise","save","progressIndicatorElement","progressIndicator","position","blockInfo","enabled","mode","saveCustomRule","form","thisInstance","serializeFormData","module","parent","action","response","result","success","hideModalWindow","$","val","loadCustomRulesList","showNotify","type","text","message","customRuleListContainer","find","html","editCustomRule","url","showModalWindow","modalContainer","on","e","preventDefault","formElement","currentTarget","deleteCustomRule","deleteElement","deleteUrl","currentRow","closest","showConfirmModal","title","vtranslate","confirmedCallback","fadeOut","customRuleTable","nextRows","nextAll","length","each","i","currentSequenceElement","updatedNumber","parseInt","remove","customRuleEntries","removeClass","registerSharingAccessEdit","contentContainer","one","registerDependentModulesPrivilegesChange","container","modulesList","JSON","parse","dependentList","dependentPrivilege","is","hide","index","attr","registerEvents","trElement","isHidden","show","slideUp","button","editElement","editUrl","settingSharingAcessInstance","Settings_Sharing_Access_Js"],"mappings":"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"}