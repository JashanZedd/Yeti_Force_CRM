{"version":3,"file":"Sorting.min.js","sources":["Sorting.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class(\"Settings_CustomView_Sorting_Js\", {}, {\n\tformElement: false,\n\t/**\n\t * Register events for buttons in form\n\t */\n\tregisterButtonsEvent: function () {\n\t\tvar thisInstance = this;\n\t\tvar form = this.getForm();\n\t\tform.find('.js-clear').on('click', function (e) {\n\t\t\tvar currentTarget = jQuery(e.currentTarget);\n\t\t\tcurrentTarget.closest('.js-sort-container').find('[name=\"defaultOrderBy\"]').val('').trigger('change');\n\t\t});\n\t\tform.find('.js-sort-order-button').on('click', function (e) {\n\t\t\tvar currentTarget = jQuery(e.currentTarget);\n\t\t\tcurrentTarget.find('.fas').each(function (n, e) {\n\t\t\t\tif (jQuery(this).hasClass('d-none')) {\n\t\t\t\t\tjQuery(this).removeClass('d-none');\n\t\t\t\t\tform.find('[name=\"sortOrder\"]').val(jQuery(this).data('val'));\n\t\t\t\t} else {\n\t\t\t\t\tjQuery(this).addClass('d-none');\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\tform.on('submit', function (e) {\n\t\t\te.preventDefault();\n\t\t\tvar form = jQuery(e.currentTarget);\n\t\t\tthisInstance.saveSorting(form);\n\t\t});\n\t},\n\t/**\n\t * Saves sort the filter\n\t * @param {jQuery} form\n\t */\n\tsaveSorting: function (form) {\n\t\tvar progress = $.progressIndicator({\n\t\t\tmessage: app.vtranslate('JS_SAVE_LOADER_INFO'),\n\t\t\tblockInfo: {\n\t\t\t\tenabled: true\n\t\t\t}\n\t\t});\n\t\tvar data = form.serializeFormData();\n\t\tvar params = {\n\t\t\tcvid: data.cvid,\n\t\t\tname: 'sort',\n\t\t\tvalue: data.defaultOrderBy ? JSON.stringify({[data.defaultOrderBy]:data.sortOrder}) : ''\n\t\t};\n\t\tapp.saveAjax('updateField', {}, params).done(function (data) {\n\t\t\tapp.hideModalWindow();\n\t\t\tif (data.success) {\n\t\t\t\tVtiger_Helper_Js.showPnotify({text: data.result.message, type: 'success'});\n\t\t\t}\n\t\t\tprogress.progressIndicator({mode: 'hide'});\n\t\t});\n\t},\n\t/**\n\t * Returns form as jQuery object\n\t * @returns {jQuery}\n\t */\n\tgetForm: function () {\n\t\tif (this.formElement === false) {\n\t\t\tthis.setForm(jQuery('#js-sorting-filter'));\n\t\t}\n\t\treturn this.formElement;\n\t},\n\tsetForm: function (element) {\n\t\tthis.formElement = element;\n\t\treturn this;\n\t},\n\tregisterEvents: function () {\n\t\tthis.registerButtonsEvent();\n\t}\n});\n\njQuery(document).ready(function (e) {\n\tvar instance = new Settings_CustomView_Sorting_Js();\n\tinstance.registerEvents();\n});\n"],"names":["jQuery","Class","thisInstance","form","getForm","find","on","e","currentTarget","closest","val","trigger","each","n","hasClass","removeClass","data","addClass","preventDefault","saveSorting","progress","$","progressIndicator","app","vtranslate","serializeFormData","params","cvid","defaultOrderBy","JSON","stringify","sortOrder","saveAjax","done","hideModalWindow","success","showPnotify","text","result","message","type","mode","formElement","setForm","element","registerButtonsEvent","document","ready","instance","Settings_CustomView_Sorting_Js","registerEvents"],"mappings":";;;;;;;;;;;;;;;;;AAAA;AACA;AAEAA,OAAOC,KAAP,CAAa,gCAAb,EAA+C,EAA/C,EAAmD;cACrC,KADqC;;;;uBAK5B,gCAAY;MAC7BC,eAAe,IAAnB;MACIC,OAAO,KAAKC,OAAL,EAAX;OACKC,IAAL,CAAU,WAAV,EAAuBC,EAAvB,CAA0B,OAA1B,EAAmC,UAAUC,CAAV,EAAa;OAC3CC,gBAAgBR,OAAOO,EAAEC,aAAT,CAApB;iBACcC,OAAd,CAAsB,oBAAtB,EAA4CJ,IAA5C,CAAiD,yBAAjD,EAA4EK,GAA5E,CAAgF,EAAhF,EAAoFC,OAApF,CAA4F,QAA5F;GAFD;OAIKN,IAAL,CAAU,uBAAV,EAAmCC,EAAnC,CAAsC,OAAtC,EAA+C,UAAUC,CAAV,EAAa;OACvDC,gBAAgBR,OAAOO,EAAEC,aAAT,CAApB;iBACcH,IAAd,CAAmB,MAAnB,EAA2BO,IAA3B,CAAgC,UAAUC,CAAV,EAAaN,CAAb,EAAgB;QAC3CP,OAAO,IAAP,EAAac,QAAb,CAAsB,QAAtB,CAAJ,EAAqC;YAC7B,IAAP,EAAaC,WAAb,CAAyB,QAAzB;UACKV,IAAL,CAAU,oBAAV,EAAgCK,GAAhC,CAAoCV,OAAO,IAAP,EAAagB,IAAb,CAAkB,KAAlB,CAApC;KAFD,MAGO;YACC,IAAP,EAAaC,QAAb,CAAsB,QAAtB;;IALF;GAFD;OAWKX,EAAL,CAAQ,QAAR,EAAkB,UAAUC,CAAV,EAAa;KAC5BW,cAAF;OACIf,OAAOH,OAAOO,EAAEC,aAAT,CAAX;gBACaW,WAAb,CAAyBhB,IAAzB;GAHD;EAvBiD;;;;;cAiCrC,qBAAUA,IAAV,EAAgB;MACxBiB,WAAWC,EAAEC,iBAAF,CAAoB;YACzBC,IAAIC,UAAJ,CAAe,qBAAf,CADyB;cAEvB;aACD;;GAHI,CAAf;MAMIR,OAAOb,KAAKsB,iBAAL,EAAX;MACIC,SAAS;SACNV,KAAKW,IADC;SAEN,MAFM;UAGLX,KAAKY,cAAL,GAAsBC,KAAKC,SAAL,oBAAiBd,KAAKY,cAAtB,EAAsCZ,KAAKe,SAA3C,EAAtB,GAA+E;GAHvF;MAKIC,QAAJ,CAAa,aAAb,EAA4B,EAA5B,EAAgCN,MAAhC,EAAwCO,IAAxC,CAA6C,UAAUjB,IAAV,EAAgB;OACxDkB,eAAJ;OACIlB,KAAKmB,OAAT,EAAkB;qBACAC,WAAjB,CAA6B,EAACC,MAAMrB,KAAKsB,MAAL,CAAYC,OAAnB,EAA4BC,MAAM,SAAlC,EAA7B;;YAEQlB,iBAAT,CAA2B,EAACmB,MAAM,MAAP,EAA3B;GALD;EA9CiD;;;;;UA0DzC,mBAAY;MAChB,KAAKC,WAAL,KAAqB,KAAzB,EAAgC;QAC1BC,OAAL,CAAa3C,OAAO,oBAAP,CAAb;;SAEM,KAAK0C,WAAZ;EA9DiD;UAgEzC,iBAAUE,OAAV,EAAmB;OACtBF,WAAL,GAAmBE,OAAnB;SACO,IAAP;EAlEiD;iBAoElC,0BAAY;OACtBC,oBAAL;;CArEF;;AAyEA7C,OAAO8C,QAAP,EAAiBC,KAAjB,CAAuB,UAAUxC,CAAV,EAAa;KAC/ByC,WAAW,IAAIC,8BAAJ,EAAf;UACSC,cAAT;CAFD"}