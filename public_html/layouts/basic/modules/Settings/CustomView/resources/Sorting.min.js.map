{"version":3,"file":"Sorting.min.js","sources":["Sorting.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class(\"Settings_CustomView_Sorting_Js\", {}, {\n\tformElement: false,\n\t/**\n\t * Register events for buttons in form\n\t */\n\tregisterButtonsEvent: function () {\n\t\tvar thisInstance = this;\n\t\tvar form = this.getForm();\n\t\tform.find('.js-clear').on('click', function (e) {\n\t\t\tvar currentTarget = jQuery(e.currentTarget);\n\t\t\tcurrentTarget.closest('.js-sort-container').find('[name=\"defaultOrderBy\"]').val('').trigger('change');\n\t\t});\n\t\tform.find('.js-sort-order-button').on('click', function (e) {\n\t\t\tvar currentTarget = jQuery(e.currentTarget);\n\t\t\tcurrentTarget.find('.fas').each(function (n, e) {\n\t\t\t\tif (jQuery(this).hasClass('d-none')) {\n\t\t\t\t\tjQuery(this).removeClass('d-none');\n\t\t\t\t\tform.find('[name=\"sortOrder\"]').val(jQuery(this).data('val'));\n\t\t\t\t} else {\n\t\t\t\t\tjQuery(this).addClass('d-none');\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\tform.on('submit', function (e) {\n\t\t\te.preventDefault();\n\t\t\tvar form = jQuery(e.currentTarget);\n\t\t\tthisInstance.saveSorting(form);\n\t\t});\n\t},\n\t/**\n\t * Saves sort the filter\n\t * @param {jQuery} form\n\t */\n\tsaveSorting: function (form) {\n\t\tvar progress = $.progressIndicator({\n\t\t\tmessage: app.vtranslate('JS_SAVE_LOADER_INFO'),\n\t\t\tblockInfo: {\n\t\t\t\tenabled: true\n\t\t\t}\n\t\t});\n\t\tvar data = form.serializeFormData();\n\t\tvar params = {\n\t\t\tcvid: data.cvid,\n\t\t\tname: 'sort',\n\t\t\tvalue: data.defaultOrderBy ? JSON.stringify({[data.defaultOrderBy]:data.sortOrder}) : ''\n\t\t};\n\t\tapp.saveAjax('updateField', {}, params).done(function (data) {\n\t\t\tapp.hideModalWindow();\n\t\t\tif (data.success) {\n\t\t\t\tVtiger_Helper_Js.showPnotify({text: data.result.message, type: 'success'});\n\t\t\t}\n\t\t\tprogress.progressIndicator({mode: 'hide'});\n\t\t});\n\t},\n\t/**\n\t * Returns form as jQuery object\n\t * @returns {jQuery}\n\t */\n\tgetForm: function () {\n\t\tif (this.formElement === false) {\n\t\t\tthis.setForm(jQuery('#js-sorting-filter'));\n\t\t}\n\t\treturn this.formElement;\n\t},\n\tsetForm: function (element) {\n\t\tthis.formElement = element;\n\t\treturn this;\n\t},\n\tregisterEvents: function () {\n\t\tthis.registerButtonsEvent();\n\t}\n});\n\njQuery(document).ready(function (e) {\n\tvar instance = new Settings_CustomView_Sorting_Js();\n\tinstance.registerEvents();\n});\n"],"names":["jQuery","Class","thisInstance","this","form","getForm","find","on","e","currentTarget","closest","val","trigger","each","n","hasClass","removeClass","data","addClass","preventDefault","saveSorting","progress","$","progressIndicator","app","vtranslate","serializeFormData","params","cvid","defaultOrderBy","JSON","stringify","sortOrder","saveAjax","done","hideModalWindow","success","showPnotify","text","result","message","type","mode","formElement","setForm","element","registerButtonsEvent","document","ready","Settings_CustomView_Sorting_Js","registerEvents"],"mappings":"qLAGAA,OAAOC,MAAM,iCAAkC,GAAI,cACrC,uBAIS,eACjBC,aAAeC,KACfC,KAAOD,KAAKE,eACXC,KAAK,aAAaC,GAAG,SAAS,SAAUC,GACxBR,OAAOQ,EAAEC,eACfC,QAAQ,sBAAsBJ,KAAK,2BAA2BK,IAAI,IAAIC,QAAQ,kBAExFN,KAAK,yBAAyBC,GAAG,SAAS,SAAUC,GACpCR,OAAOQ,EAAEC,eACfH,KAAK,QAAQO,MAAK,SAAUC,EAAGN,GACxCR,OAAOG,MAAMY,SAAS,kBAClBZ,MAAMa,YAAY,eACpBV,KAAK,sBAAsBK,IAAIX,OAAOG,MAAMc,KAAK,gBAE/Cd,MAAMe,SAAS,qBAIpBX,GAAG,UAAU,SAAUC,KACzBW,qBACEf,KAAOJ,OAAOQ,EAAEC,4BACPW,YAAYhB,sBAOd,SAAUA,UAClBiB,SAAWC,EAAEC,kBAAkB,SACzBC,IAAIC,WAAW,iCACb,UACD,KAGPR,KAAOb,KAAKsB,oBACZC,OAAS,MACNV,KAAKW,UACL,aACCX,KAAKY,eAAiBC,KAAKC,4BAAYd,KAAKY,eAAgBZ,KAAKe,YAAc,QAEnFC,SAAS,cAAe,GAAIN,QAAQO,MAAK,SAAUjB,UAClDkB,kBACAlB,KAAKmB,0BACSC,YAAY,CAACC,KAAMrB,KAAKsB,OAAOC,QAASC,KAAM,qBAEvDlB,kBAAkB,CAACmB,KAAM,qBAO3B,kBACiB,IAArBvC,KAAKwC,kBACHC,QAAQ5C,OAAO,uBAEdG,KAAKwC,qBAEJ,SAAUE,qBACbF,YAAcE,QACZ1C,qBAEQ,gBACV2C,0BAIP9C,OAAO+C,UAAUC,OAAM,SAAUxC,IACjB,IAAIyC,gCACVC"}