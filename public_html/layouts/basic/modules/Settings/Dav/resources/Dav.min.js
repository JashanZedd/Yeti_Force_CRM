"use strict";jQuery.Class("Settings_Dav_Keys_Js",{},{mobileContainer:!1,getContainer:function(){return 0==this.mobileContainer&&(this.mobileContainer=jQuery("#DavKeysContainer")),this.mobileContainer},addKey:function(e){var clonedContainer=jQuery("#DavKeysContainer").find(".addKeyContainer").clone(!0,!0),callBackFunction=function(data){data.find(".addKeyContainer").removeClass("d-none").show(),App.Fields.Picklist.showSelect2ElementView(data.find(".select")),data.find('[name="saveButton"]').on("click",(function(e){var formData=data.find("form").serializeFormData(),progress=$.progressIndicator({message:app.vtranslate("Adding a Key"),blockInfo:{enabled:!0}});(new Settings_Dav_Keys_Js).registerSaveEvent("addKey",formData,!0),progress.progressIndicator({mode:"hide"})}))};app.showModalWindow(clonedContainer,(function(data){callBackFunction(data)}),{width:"1000px"})},deleteKey:function(e){var closestTrElement=$(e.currentTarget).closest(".js-tr-row");(new Settings_Dav_Keys_Js).registerSaveEvent("deleteKey",{user:closestTrElement.data("user")}),closestTrElement.remove()},registerSaveEvent:function(mode,data,reload){var params={};if(params.data={module:app.getModuleName(),parent:app.getParentModuleName(),action:"SaveAjax",mode:mode},void 0!==data)for(var i in data)params.data[i]=data[i];params.async=!1,params.dataType="json",AppConnector.request(params).done((function(data){var response=data.result,params={text:response.message};1==response.success?params.type="success":params.type="error",Vtiger_Helper_Js.showPnotify(params),1==reload&&1==response.success&&window.location.reload()})).fail((function(data,err){}))},registerEvents:function(e){var container=this.getContainer();container.find(".js-add-key").on("click",this.addKey),container.find(".js-delete-key").on("click",this.deleteKey),App.Fields.Text.registerCopyClipboard(container)}});
//# sourceMappingURL=Dav.min.js.map
