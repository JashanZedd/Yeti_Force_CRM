{"version":3,"file":"Config.min.js","sources":["Config.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\n$.Class('Settings_Mail_Config_Js', {}, {\n\tregisterChangeConfig() {\n\t\tconst container = $('.configContainer');\n\t\tcontainer.on('change', '.configCheckbox', function () {\n\t\t\tconst progressIndicator = $.progressIndicator();\n\t\t\tconst params = {};\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['action'] = 'SaveAjax';\n\t\t\tparams['mode'] = 'updateConfig';\n\t\t\tparams['type'] = $(this).data('type');\n\t\t\tparams['name'] = $(this).attr('name');\n\t\t\tparams['val'] = this.checked;\n\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\tprogressIndicator.progressIndicator({'mode': 'hide'});\n\t\t\t\tlet messageParams = {};\n\t\t\t\tmessageParams['text'] = data.result.message;\n\t\t\t\tSettings_Vtiger_Index_Js.showMessage(messageParams);\n\t\t\t}).fail(function (error) {\n\t\t\t\tprogressIndicator.progressIndicator({'mode': 'hide'});\n\t\t\t});\n\t\t});\n\t},\n\tregisterSignature() {\n\t\tconst container = $('#signature');\n\t\tnew App.Fields.Text.Editor(container.find('.js-editor'), {\n\t\t\theight: '20em',\n\t\t});\n\t\tApp.Tools.VariablesPanel.registerRefreshCompanyVariables(container);\n\t\tcontainer.find('.js-save-signature').on('click', function () {\n\t\t\tconst progressIndicator = $.progressIndicator();\n\t\t\tconst editor = CKEDITOR.instances.signatureEditor;\n\t\t\tconst params = {};\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['action'] = 'SaveAjax';\n\t\t\tparams['mode'] = 'updateSignature';\n\t\t\tparams['val'] = editor.getData();\n\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\tprogressIndicator.progressIndicator({'mode': 'hide'});\n\t\t\t\tSettings_Vtiger_Index_Js.showMessage({\n\t\t\t\t\ttext: data.result.message\n\t\t\t\t});\n\t\t\t}).fail(function (error) {\n\t\t\t\tprogressIndicator.progressIndicator({'mode': 'hide'});\n\t\t\t});\n\t\t});\n\t},\n\tregisterEvents() {\n\t\tconst thisInstance = this;\n\t\tthisInstance.registerChangeConfig();\n\t\tthisInstance.registerSignature();\n\t\tApp.Fields.Text.registerCopyClipboard($('.js-container-variable'));\n\t},\n});"],"names":["$","Class","container","on","progressIndicator","params","app","getModuleName","getParentModuleName","data","attr","checked","request","done","messageParams","result","message","showMessage","fail","error","App","Fields","Text","Editor","find","Tools","VariablesPanel","registerRefreshCompanyVariables","editor","CKEDITOR","instances","signatureEditor","getData","thisInstance","registerChangeConfig","registerSignature","registerCopyClipboard"],"mappings":";;AAAA;AACA;AAEAA,EAAEC,KAAF,CAAQ,yBAAR,EAAmC,EAAnC,EAAuC;qBAAA,kCACf;MAChBC,YAAYF,EAAE,kBAAF,CAAlB;YACUG,EAAV,CAAa,QAAb,EAAuB,iBAAvB,EAA0C,YAAY;OAC/CC,oBAAoBJ,EAAEI,iBAAF,EAA1B;OACMC,SAAS,EAAf;UACO,QAAP,IAAmBC,IAAIC,aAAJ,EAAnB;UACO,QAAP,IAAmBD,IAAIE,mBAAJ,EAAnB;UACO,QAAP,IAAmB,UAAnB;UACO,MAAP,IAAiB,cAAjB;UACO,MAAP,IAAiBR,EAAE,IAAF,EAAQS,IAAR,CAAa,MAAb,CAAjB;UACO,MAAP,IAAiBT,EAAE,IAAF,EAAQU,IAAR,CAAa,MAAb,CAAjB;UACO,KAAP,IAAgB,KAAKC,OAArB;gBACaC,OAAb,CAAqBP,MAArB,EAA6BQ,IAA7B,CAAkC,UAAUJ,IAAV,EAAgB;sBAC/BL,iBAAlB,CAAoC,EAAC,QAAQ,MAAT,EAApC;QACIU,gBAAgB,EAApB;kBACc,MAAd,IAAwBL,KAAKM,MAAL,CAAYC,OAApC;6BACyBC,WAAzB,CAAqCH,aAArC;IAJD,EAKGI,IALH,CAKQ,UAAUC,KAAV,EAAiB;sBACNf,iBAAlB,CAAoC,EAAC,QAAQ,MAAT,EAApC;IAND;GAVD;EAHqC;kBAAA,+BAuBlB;MACbF,YAAYF,EAAE,YAAF,CAAlB;MACIoB,IAAIC,MAAJ,CAAWC,IAAX,CAAgBC,MAApB,CAA2BrB,UAAUsB,IAAV,CAAe,YAAf,CAA3B,EAAyD;WAChD;GADT;MAGIC,KAAJ,CAAUC,cAAV,CAAyBC,+BAAzB,CAAyDzB,SAAzD;YACUsB,IAAV,CAAe,oBAAf,EAAqCrB,EAArC,CAAwC,OAAxC,EAAiD,YAAY;OACtDC,oBAAoBJ,EAAEI,iBAAF,EAA1B;OACMwB,SAASC,SAASC,SAAT,CAAmBC,eAAlC;OACM1B,SAAS,EAAf;UACO,QAAP,IAAmBC,IAAIC,aAAJ,EAAnB;UACO,QAAP,IAAmBD,IAAIE,mBAAJ,EAAnB;UACO,QAAP,IAAmB,UAAnB;UACO,MAAP,IAAiB,iBAAjB;UACO,KAAP,IAAgBoB,OAAOI,OAAP,EAAhB;gBACapB,OAAb,CAAqBP,MAArB,EAA6BQ,IAA7B,CAAkC,UAAUJ,IAAV,EAAgB;sBAC/BL,iBAAlB,CAAoC,EAAC,QAAQ,MAAT,EAApC;6BACyBa,WAAzB,CAAqC;WAC9BR,KAAKM,MAAL,CAAYC;KADnB;IAFD,EAKGE,IALH,CAKQ,UAAUC,KAAV,EAAiB;sBACNf,iBAAlB,CAAoC,EAAC,QAAQ,MAAT,EAApC;IAND;GATD;EA7BqC;eAAA,4BAgDrB;MACV6B,eAAe,IAArB;eACaC,oBAAb;eACaC,iBAAb;MACId,MAAJ,CAAWC,IAAX,CAAgBc,qBAAhB,CAAsCpC,EAAE,wBAAF,CAAtC;;CApDF"}