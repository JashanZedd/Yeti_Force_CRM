{"version":3,"file":"Config.min.js","sources":["Config.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\n$.Class('Settings_Mail_Config_Js', {}, {\n\tregisterChangeConfig() {\n\t\tconst container = $('.configContainer');\n\t\tcontainer.on('change', '.configCheckbox', function () {\n\t\t\tconst progressIndicator = $.progressIndicator();\n\t\t\tconst params = {};\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['action'] = 'SaveAjax';\n\t\t\tparams['mode'] = 'updateConfig';\n\t\t\tparams['type'] = $(this).data('type');\n\t\t\tparams['name'] = $(this).attr('name');\n\t\t\tparams['val'] = this.checked;\n\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\tprogressIndicator.progressIndicator({'mode': 'hide'});\n\t\t\t\tlet messageParams = {};\n\t\t\t\tmessageParams['text'] = data.result.message;\n\t\t\t\tSettings_Vtiger_Index_Js.showMessage(messageParams);\n\t\t\t}).fail(function (error) {\n\t\t\t\tprogressIndicator.progressIndicator({'mode': 'hide'});\n\t\t\t});\n\t\t});\n\t},\n\tregisterSignature() {\n\t\tconst container = $('#signature');\n\t\tnew App.Fields.Text.Editor(container.find('.js-editor'), {\n\t\t\theight: '20em',\n\t\t});\n\t\tApp.Tools.VariablesPanel.registerRefreshCompanyVariables(container);\n\t\tcontainer.find('.js-save-signature').on('click', function () {\n\t\t\tconst progressIndicator = $.progressIndicator();\n\t\t\tconst editor = CKEDITOR.instances.signatureEditor;\n\t\t\tconst params = {};\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['action'] = 'SaveAjax';\n\t\t\tparams['mode'] = 'updateSignature';\n\t\t\tparams['val'] = editor.getData();\n\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\tprogressIndicator.progressIndicator({'mode': 'hide'});\n\t\t\t\tSettings_Vtiger_Index_Js.showMessage({\n\t\t\t\t\ttext: data.result.message\n\t\t\t\t});\n\t\t\t}).fail(function (error) {\n\t\t\t\tprogressIndicator.progressIndicator({'mode': 'hide'});\n\t\t\t});\n\t\t});\n\t},\n\tregisterEvents() {\n\t\tconst thisInstance = this;\n\t\tthisInstance.registerChangeConfig();\n\t\tthisInstance.registerSignature();\n\t\tApp.Fields.Text.registerCopyClipboard($('.js-container-variable'));\n\t},\n});"],"names":["$","Class","on","progressIndicator","params","app","getModuleName","getParentModuleName","this","data","attr","checked","request","done","mode","messageParams","result","message","showMessage","fail","error","container","App","Fields","Text","Editor","find","Tools","VariablesPanel","registerRefreshCompanyVariables","editor","CKEDITOR","instances","signatureEditor","getData","registerChangeConfig","registerSignature","registerCopyClipboard"],"mappings":"aAGAA,EAAEC,MAAM,0BAA2B,GAAI,iCAEnBD,EAAE,oBACVE,GAAG,SAAU,mBAAmB,eACnCC,kBAAoBH,EAAEG,oBACtBC,OAAS,UACf,OAAmBC,IAAIC,uBACvB,OAAmBD,IAAIE,6BACvB,OAAmB,kBACnB,KAAiB,sBACjB,KAAiBP,EAAEQ,MAAMC,KAAK,eAC9B,KAAiBT,EAAEQ,MAAME,KAAK,eAC9B,IAAgBF,KAAKG,qBACRC,QAAQR,QAAQS,MAAK,SAAUJ,wBACzBN,kBAAkB,CAACW,KAAQ,aACzCC,cAAgB,iBACpB,KAAwBN,KAAKO,OAAOC,iCACXC,YAAYH,kBACnCI,MAAK,SAAUC,yBACCjB,kBAAkB,CAACW,KAAQ,iDAKzCO,UAAYrB,EAAE,kBAChBsB,IAAIC,OAAOC,KAAKC,OAAOJ,UAAUK,KAAK,cAAe,QAChD,aAELC,MAAMC,eAAeC,gCAAgCR,qBAC/CK,KAAK,sBAAsBxB,GAAG,SAAS,eAC1CC,kBAAoBH,EAAEG,oBACtB2B,OAASC,SAASC,UAAUC,gBAC5B7B,OAAS,UACf,OAAmBC,IAAIC,uBACvB,OAAmBD,IAAIE,6BACvB,OAAmB,kBACnB,KAAiB,yBACjB,IAAgBuB,OAAOI,uBACVtB,QAAQR,QAAQS,MAAK,SAAUJ,wBACzBN,kBAAkB,CAACW,KAAQ,kCACpBI,YAAY,MAC9BT,KAAKO,OAAOC,aAEjBE,MAAK,SAAUC,yBACCjB,kBAAkB,CAACW,KAAQ,0CAK1BN,KACR2B,uBADQ3B,KAER4B,wBACTb,OAAOC,KAAKa,sBAAsBrC,EAAE"}