{"version":3,"file":"List.min.js","sources":["List.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nSettings_Vtiger_List_Js(\n\t'Settings_Mail_List_Js',\n\t{},\n\t{\n\t\tregisterAcceptanceEvent: function () {\n\t\t\tvar list = jQuery('.listViewEntriesDiv');\n\t\t\tlist.on('click', '.acceptanceRecord', function (e) {\n\t\t\t\tvar elem = this;\n\t\t\t\tvar id = $(this).closest('tr').data('id');\n\t\t\t\tvar progressIndicator = jQuery.progressIndicator();\n\t\t\t\tAppConnector.request({\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\taction: 'SaveAjax',\n\t\t\t\t\tmode: 'acceptanceRecord',\n\t\t\t\t\tid: id\n\t\t\t\t})\n\t\t\t\t\t.done(function (data) {\n\t\t\t\t\t\tprogressIndicator.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({ text: data.result.message });\n\t\t\t\t\t\t$(elem).remove();\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function (error) {\n\t\t\t\t\t\tprogressIndicator.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tmassDeleteAction: function () {\n\t\t\t$('.massDelete').on('click', function () {\n\t\t\t\tlet listInstance = Settings_Vtiger_List_Js.getInstance();\n\t\t\t\tlet validationResult = listInstance.checkListRecordSelected();\n\t\t\t\tif (validationResult != true) {\n\t\t\t\t\tapp.showConfirmModal({\n\t\t\t\t\t\ttitle: app.vtranslate('LBL_MASS_DELETE_CONFIRMATION'),\n\t\t\t\t\t\tconfirmedCallback: () => {\n\t\t\t\t\t\t\tlet params = {};\n\t\t\t\t\t\t\tparams['module'] = app.getModuleName();\n\t\t\t\t\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\t\t\t\t\tparams['action'] = 'MassDelete';\n\t\t\t\t\t\t\tparams['selected_ids'] = listInstance.readSelectedIds(true);\n\t\t\t\t\t\t\tlet deleteMessage = app.vtranslate('JS_RECORDS_ARE_GETTING_DELETED');\n\t\t\t\t\t\t\tlet progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\t\t\t\t\tmessage: deleteMessage,\n\t\t\t\t\t\t\t\tposition: 'html',\n\t\t\t\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\t\t\t\tenabled: true\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({\n\t\t\t\t\t\t\t\t\tmode: 'hide'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tif (data && data.result && data.result.notify) {\n\t\t\t\t\t\t\t\t\tVtiger_Helper_Js.showMessage(data.result.notify);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tlistInstance.postMassDeleteRecords();\n\t\t\t\t\t\t\t\tif (data.error) {\n\t\t\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\t\t\ttext: app.vtranslate(data.error.message),\n\t\t\t\t\t\t\t\t\t\ttitle: app.vtranslate('JS_LBL_PERMISSION'),\n\t\t\t\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},\n\t\t\t\t\t\trejectedCallback: () => {\n\t\t\t\t\t\t\tVtiger_List_Js.clearList();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tlistInstance.noRecordSelectedAlert();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterFilterChangeEvent: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tjQuery('#mailQueueFilter').on('change', function (e) {\n\t\t\t\tjQuery('#pageNumber').val('1');\n\t\t\t\tjQuery('#pageToJump').val('1');\n\t\t\t\tjQuery('#orderBy').val('');\n\t\t\t\tjQuery('#sortOrder').val('');\n\t\t\t\tvar params = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\torderby: jQuery(e.currentTarget).val(),\n\t\t\t\t\tpage: 1\n\t\t\t\t};\n\t\t\t\t//Make total number of pages as empty\n\t\t\t\tjQuery('#totalPageCount').text('');\n\t\t\t\tthisInstance.getListViewRecords(params).done(function (data) {\n\t\t\t\t\tthisInstance.updatePagination();\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tgetParams: function () {\n\t\t\tvar listViewContainer = this.getListViewContainer();\n\t\t\tvar searchParams = {};\n\t\t\tlistViewContainer.find('input.listSearchContributor, select.listSearchContributor').each(function (i, obj) {\n\t\t\t\tif ($(obj).val() != null) {\n\t\t\t\t\tvar column = $(obj).attr('name');\n\t\t\t\t\tsearchParams[column] = {};\n\t\t\t\t\tsearchParams[column]['value'] = $(obj).val();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tvar params = {\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\tpage: 1,\n\t\t\t\tview: 'List',\n\t\t\t\tsearchParams: searchParams\n\t\t\t};\n\t\t\treturn params;\n\t\t},\n\t\tregisterListSearch: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar listViewContainer = this.getListViewContainer();\n\t\t\tlistViewContainer.find('input.listSearchContributor').on('keypress', function (e) {\n\t\t\t\tif (e.keyCode == 13) {\n\t\t\t\t\tvar params = thisInstance.getParams();\n\t\t\t\t\tjQuery('#totalPageCount').text('');\n\t\t\t\t\tthisInstance.getListViewRecords(params).done(function (data) {\n\t\t\t\t\t\tthisInstance.updatePagination();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t\tlistViewContainer.find('[data-trigger=\"listSearch\"]').on('click', function (e) {\n\t\t\t\tvar params = thisInstance.getParams();\n\t\t\t\tthisInstance.getListViewRecords(params).done(function (data) {\n\t\t\t\t\tthisInstance.updatePagination();\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterListViewSelect: function () {\n\t\t\tif (app.getMainParams('autoRefreshListOnChange') == '1') {\n\t\t\t\tvar thisInstance = this;\n\t\t\t\tvar listViewContainer = this.getListViewContainer();\n\t\t\t\tlistViewContainer.on('change', '.listViewEntriesTable select', function (e) {\n\t\t\t\t\tvar params = thisInstance.getParams();\n\t\t\t\t\tthisInstance.getListViewRecords(params).done(function (data) {\n\t\t\t\t\t\tthisInstance.updatePagination();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\tthis._super();\n\t\t\tthis.registerFilterChangeEvent();\n\t\t\tthis.massDeleteAction();\n\t\t\tthis.registerAcceptanceEvent();\n\t\t\tthis.registerListSearch();\n\t\t\tthis.registerListViewSelect();\n\t\t}\n\t}\n);\n"],"names":["Settings_Vtiger_List_Js","registerAcceptanceEvent","list","jQuery","on","elem","id","$","closest","data","progressIndicator","AppConnector","request","module","app","getModuleName","parent","getParentModuleName","action","mode","done","Settings_Vtiger_Index_Js","showMessage","text","result","message","remove","fail","massDeleteAction","listInstance","getInstance","validationResult","checkListRecordSelected","noRecordSelectedAlert","showConfirmModal","title","vtranslate","confirmedCallback","params","readSelectedIds","deleteMessage","progressIndicatorElement","position","blockInfo","enabled","notify","Vtiger_Helper_Js","postMassDeleteRecords","error","showNotify","type","rejectedCallback","Vtiger_List_Js","clearList","registerFilterChangeEvent","thisInstance","e","val","orderby","currentTarget","page","getListViewRecords","updatePagination","getParams","listViewContainer","getListViewContainer","searchParams","find","each","i","obj","column","attr","view","registerListSearch","keyCode","registerListViewSelect","getMainParams","registerEvents","_super"],"mappings":"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"}