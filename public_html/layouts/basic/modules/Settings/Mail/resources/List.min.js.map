{"version":3,"file":"List.min.js","sources":["List.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nSettings_Vtiger_List_Js(\"Settings_Mail_List_Js\", {}, {\n\tregisterAcceptanceEvent: function () {\n\t\tvar list = jQuery('.listViewEntriesDiv');\n\t\tlist.on('click', '.acceptanceRecord', function (e) {\n\t\t\tvar elem = this;\n\t\t\tvar id = $(this).closest('tr').data('id');\n\t\t\tvar progressIndicator = jQuery.progressIndicator();\n\t\t\tAppConnector.request({\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\taction: 'SaveAjax',\n\t\t\t\tmode: 'acceptanceRecord',\n\t\t\t\tid: id\n\t\t\t}).done(function (data) {\n\t\t\t\tprogressIndicator.progressIndicator({'mode': 'hide'});\n\t\t\t\tSettings_Vtiger_Index_Js.showMessage({text: data.result.message});\n\t\t\t\t$(elem).remove()\n\t\t\t}).fail(function (error) {\n\t\t\t\tprogressIndicator.progressIndicator({'mode': 'hide'});\n\t\t\t});\n\t\t});\n\t},\n\tmassDeleteAction: function () {\n\t\t$('.massDelete').on(\"click\", function () {\n\t\t\tvar listInstance = Settings_Vtiger_List_Js.getInstance();\n\t\t\tvar validationResult = listInstance.checkListRecordSelected();\n\t\t\tif (validationResult != true) {\n\t\t\t\tvar selectedIds = listInstance.readSelectedIds(true);\n\t\t\t\tvar message = app.vtranslate('LBL_MASS_DELETE_CONFIRMATION');\n\t\t\t\tVtiger_Helper_Js.showConfirmationBox({'message': message}).done(function (e) {\n\t\t\t\t\tvar params = {};\n\t\t\t\t\tparams['module'] = app.getModuleName();\n\t\t\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\t\t\tparams['action'] = 'MassDelete';\n\t\t\t\t\tparams['selected_ids'] = selectedIds;\n\t\t\t\t\tvar deleteMessage = app.vtranslate('JS_RECORDS_ARE_GETTING_DELETED');\n\t\t\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\t\t\t'message': deleteMessage,\n\t\t\t\t\t\t'position': 'html',\n\t\t\t\t\t\t'blockInfo': {\n\t\t\t\t\t\t\t'enabled': true\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({\n\t\t\t\t\t\t\t'mode': 'hide'\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (data && data.result && data.result.notify) {\n\t\t\t\t\t\t\tVtiger_Helper_Js.showMessage(data.result.notify);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlistInstance.postMassDeleteRecords();\n\t\t\t\t\t\tif (data.error) {\n\t\t\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\t\t\ttext: app.vtranslate(data.error.message),\n\t\t\t\t\t\t\t\ttitle: app.vtranslate('JS_LBL_PERMISSION')\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}).fail(function (error, err) {\n\t\t\t\t\tVtiger_List_Js.clearList();\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tlistInstance.noRecordSelectedAlert();\n\t\t\t}\n\t\t});\n\n\t},\n\tregisterFilterChangeEvent: function () {\n\t\tvar thisInstance = this;\n\t\tjQuery('#mailQueueFilter').on('change', function (e) {\n\t\t\tjQuery('#pageNumber').val(\"1\");\n\t\t\tjQuery('#pageToJump').val('1');\n\t\t\tjQuery('#orderBy').val('');\n\t\t\tjQuery(\"#sortOrder\").val('');\n\t\t\tvar params = {\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t'orderby': jQuery(e.currentTarget).val(),\n\t\t\t\t'page': 1,\n\t\t\t}\n\t\t\t//Make total number of pages as empty\n\t\t\tjQuery('#totalPageCount').text(\"\");\n\t\t\tthisInstance.getListViewRecords(params).done(function (data) {\n\t\t\t\tthisInstance.updatePagination();\n\t\t\t});\n\t\t});\n\t},\n\tgetParams: function () {\n\t\tvar listViewContainer = this.getListViewContainer();\n\t\tvar searchParams = {};\n\t\tlistViewContainer.find('input.listSearchContributor, select.listSearchContributor').each(function (i, obj) {\n\t\t\tif ($(obj).val() != null) {\n\t\t\t\tvar column = $(obj).attr(\"name\")\n\t\t\t\tsearchParams[column] = {};\n\t\t\t\tsearchParams[column]['value'] = $(obj).val();\n\t\t\t}\n\t\t});\n\n\t\tvar params = {\n\t\t\tmodule: app.getModuleName(),\n\t\t\tparent: app.getParentModuleName(),\n\t\t\tpage: 1,\n\t\t\tview: \"List\",\n\t\t\tsearchParams: searchParams\n\t\t}\n\t\treturn params;\n\t},\n\tregisterListSearch: function () {\n\t\tvar thisInstance = this;\n\t\tvar listViewContainer = this.getListViewContainer();\n\t\tlistViewContainer.find('input.listSearchContributor').on('keypress', function (e) {\n\t\t\tif (e.keyCode == 13) {\n\t\t\t\tvar params = thisInstance.getParams();\n\t\t\t\tjQuery('#totalPageCount').text(\"\");\n\t\t\t\tthisInstance.getListViewRecords(params).done(function (data) {\n\t\t\t\t\tthisInstance.updatePagination();\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\tlistViewContainer.find('[data-trigger=\"listSearch\"]').on('click', function (e) {\n\t\t\tvar params = thisInstance.getParams();\n\t\t\tthisInstance.getListViewRecords(params).done(function (data) {\n\t\t\t\tthisInstance.updatePagination();\n\t\t\t});\n\t\t});\n\t},\n\tregisterListViewSelect: function () {\n\t\tif (app.getMainParams('autoRefreshListOnChange') == '1') {\n\t\t\tvar thisInstance = this;\n\t\t\tvar listViewContainer = this.getListViewContainer();\n\t\t\tlistViewContainer.on('change', '.listViewEntriesTable select', function (e) {\n\t\t\t\tvar params = thisInstance.getParams();\n\t\t\t\tthisInstance.getListViewRecords(params).done(function (data) {\n\t\t\t\t\tthisInstance.updatePagination();\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t},\n\tregisterEvents: function () {\n\t\tthis._super();\n\t\tthis.registerFilterChangeEvent();\n\t\tthis.massDeleteAction();\n\t\tthis.registerAcceptanceEvent();\n\t\tthis.registerListSearch();\n\t\tthis.registerListViewSelect();\n\t}\n});\n"],"names":["Settings_Vtiger_List_Js","list","jQuery","on","e","elem","id","$","closest","data","progressIndicator","request","app","getModuleName","getParentModuleName","done","showMessage","text","result","message","remove","fail","error","listInstance","getInstance","validationResult","checkListRecordSelected","selectedIds","readSelectedIds","vtranslate","showConfirmationBox","params","deleteMessage","progressIndicatorElement","notify","postMassDeleteRecords","showPnotify","err","clearList","noRecordSelectedAlert","thisInstance","val","currentTarget","getListViewRecords","updatePagination","listViewContainer","getListViewContainer","searchParams","find","each","i","obj","column","attr","keyCode","getParams","getMainParams","_super","registerFilterChangeEvent","massDeleteAction","registerAcceptanceEvent","registerListSearch","registerListViewSelect"],"mappings":"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"}