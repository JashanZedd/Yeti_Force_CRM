{"version":3,"file":"List.min.js","sources":["List.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nSettings_Vtiger_List_Js(\"Settings_Mail_List_Js\", {}, {\n\tregisterAcceptanceEvent: function () {\n\t\tvar list = jQuery('.listViewEntriesDiv');\n\t\tlist.on('click', '.acceptanceRecord', function (e) {\n\t\t\tvar elem = this;\n\t\t\tvar id = $(this).closest('tr').data('id');\n\t\t\tvar progressIndicator = jQuery.progressIndicator();\n\t\t\tAppConnector.request({\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\taction: 'SaveAjax',\n\t\t\t\tmode: 'acceptanceRecord',\n\t\t\t\tid: id\n\t\t\t}).done(function (data) {\n\t\t\t\tprogressIndicator.progressIndicator({'mode': 'hide'});\n\t\t\t\tSettings_Vtiger_Index_Js.showMessage({text: data.result.message});\n\t\t\t\t$(elem).remove()\n\t\t\t}).fail(function (error) {\n\t\t\t\tprogressIndicator.progressIndicator({'mode': 'hide'});\n\t\t\t});\n\t\t});\n\t},\n\tmassDeleteAction: function () {\n\t\t$('.massDelete').on(\"click\", function () {\n\t\t\tvar listInstance = Settings_Vtiger_List_Js.getInstance();\n\t\t\tvar validationResult = listInstance.checkListRecordSelected();\n\t\t\tif (validationResult != true) {\n\t\t\t\tvar selectedIds = listInstance.readSelectedIds(true);\n\t\t\t\tvar message = app.vtranslate('LBL_MASS_DELETE_CONFIRMATION');\n\t\t\t\tVtiger_Helper_Js.showConfirmationBox({'message': message}).done(function (e) {\n\t\t\t\t\tvar params = {};\n\t\t\t\t\tparams['module'] = app.getModuleName();\n\t\t\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\t\t\tparams['action'] = 'MassDelete';\n\t\t\t\t\tparams['selected_ids'] = selectedIds;\n\t\t\t\t\tvar deleteMessage = app.vtranslate('JS_RECORDS_ARE_GETTING_DELETED');\n\t\t\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\t\t\t'message': deleteMessage,\n\t\t\t\t\t\t'position': 'html',\n\t\t\t\t\t\t'blockInfo': {\n\t\t\t\t\t\t\t'enabled': true\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({\n\t\t\t\t\t\t\t'mode': 'hide'\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (data && data.result && data.result.notify) {\n\t\t\t\t\t\t\tVtiger_Helper_Js.showMessage(data.result.notify);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlistInstance.postMassDeleteRecords();\n\t\t\t\t\t\tif (data.error) {\n\t\t\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\t\t\ttext: app.vtranslate(data.error.message),\n\t\t\t\t\t\t\t\ttitle: app.vtranslate('JS_LBL_PERMISSION')\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}).fail(function (error, err) {\n\t\t\t\t\tVtiger_List_Js.clearList();\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tlistInstance.noRecordSelectedAlert();\n\t\t\t}\n\t\t});\n\n\t},\n\tregisterFilterChangeEvent: function () {\n\t\tvar thisInstance = this;\n\t\tjQuery('#mailQueueFilter').on('change', function (e) {\n\t\t\tjQuery('#pageNumber').val(\"1\");\n\t\t\tjQuery('#pageToJump').val('1');\n\t\t\tjQuery('#orderBy').val('');\n\t\t\tjQuery(\"#sortOrder\").val('');\n\t\t\tvar params = {\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t'orderby': jQuery(e.currentTarget).val(),\n\t\t\t\t'page': 1,\n\t\t\t}\n\t\t\t//Make total number of pages as empty\n\t\t\tjQuery('#totalPageCount').text(\"\");\n\t\t\tthisInstance.getListViewRecords(params).done(function (data) {\n\t\t\t\tthisInstance.updatePagination();\n\t\t\t});\n\t\t});\n\t},\n\tgetParams: function () {\n\t\tvar listViewContainer = this.getListViewContainer();\n\t\tvar searchParams = {};\n\t\tlistViewContainer.find('input.listSearchContributor, select.listSearchContributor').each(function (i, obj) {\n\t\t\tif ($(obj).val() != null) {\n\t\t\t\tvar column = $(obj).attr(\"name\")\n\t\t\t\tsearchParams[column] = {};\n\t\t\t\tsearchParams[column]['value'] = $(obj).val();\n\t\t\t}\n\t\t});\n\n\t\tvar params = {\n\t\t\tmodule: app.getModuleName(),\n\t\t\tparent: app.getParentModuleName(),\n\t\t\tpage: 1,\n\t\t\tview: \"List\",\n\t\t\tsearchParams: searchParams\n\t\t}\n\t\treturn params;\n\t},\n\tregisterListSearch: function () {\n\t\tvar thisInstance = this;\n\t\tvar listViewContainer = this.getListViewContainer();\n\t\tlistViewContainer.find('input.listSearchContributor').on('keypress', function (e) {\n\t\t\tif (e.keyCode == 13) {\n\t\t\t\tvar params = thisInstance.getParams();\n\t\t\t\tjQuery('#totalPageCount').text(\"\");\n\t\t\t\tthisInstance.getListViewRecords(params).done(function (data) {\n\t\t\t\t\tthisInstance.updatePagination();\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\tlistViewContainer.find('[data-trigger=\"listSearch\"]').on('click', function (e) {\n\t\t\tvar params = thisInstance.getParams();\n\t\t\tthisInstance.getListViewRecords(params).done(function (data) {\n\t\t\t\tthisInstance.updatePagination();\n\t\t\t});\n\t\t});\n\t},\n\tregisterListViewSelect: function () {\n\t\tif (app.getMainParams('autoRefreshListOnChange') == '1') {\n\t\t\tvar thisInstance = this;\n\t\t\tvar listViewContainer = this.getListViewContainer();\n\t\t\tlistViewContainer.on('change', '.listViewEntriesTable select', function (e) {\n\t\t\t\tvar params = thisInstance.getParams();\n\t\t\t\tthisInstance.getListViewRecords(params).done(function (data) {\n\t\t\t\t\tthisInstance.updatePagination();\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t},\n\tregisterEvents: function () {\n\t\tthis._super();\n\t\tthis.registerFilterChangeEvent();\n\t\tthis.massDeleteAction();\n\t\tthis.registerAcceptanceEvent();\n\t\tthis.registerListSearch();\n\t\tthis.registerListViewSelect();\n\t}\n});\n"],"names":["Settings_Vtiger_List_Js","jQuery","on","e","elem","this","id","$","closest","data","progressIndicator","request","app","getModuleName","getParentModuleName","done","mode","showMessage","text","result","message","remove","fail","error","listInstance","getInstance","checkListRecordSelected","selectedIds","readSelectedIds","vtranslate","showConfirmationBox","params","deleteMessage","progressIndicatorElement","notify","postMassDeleteRecords","showPnotify","err","clearList","noRecordSelectedAlert","thisInstance","val","currentTarget","getListViewRecords","updatePagination","listViewContainer","getListViewContainer","searchParams","find","each","i","obj","column","attr","keyCode","getParams","getMainParams","_super","registerFilterChangeEvent","massDeleteAction","registerAcceptanceEvent","registerListSearch","registerListViewSelect"],"mappings":"aAGAA,wBAAwB,wBAAyB,GAAI,yBAC3B,WACbC,OAAO,uBACbC,GAAG,QAAS,qBAAqB,SAAUC,OAC3CC,KAAOC,KACPC,GAAKC,EAAEF,MAAMG,QAAQ,MAAMC,KAAK,MAChCC,kBAAoBT,OAAOS,iCAClBC,QAAQ,QACZC,IAAIC,uBACJD,IAAIE,6BACJ,gBACF,sBACFR,KACFS,MAAK,SAAUN,wBACCC,kBAAkB,CAACM,KAAQ,kCACpBC,YAAY,CAACC,KAAMT,KAAKU,OAAOC,YACtDhB,MAAMiB,YACNC,MAAK,SAAUC,yBACCb,kBAAkB,CAACM,KAAQ,iCAI9B,aACf,eAAed,GAAG,SAAS,eACxBsB,aAAexB,wBAAwByB,iBAEnB,GADDD,aAAaE,0BACN,KACzBC,YAAcH,aAAaI,iBAAgB,GAC3CR,QAAUR,IAAIiB,WAAW,iDACZC,oBAAoB,CAACV,QAAWA,UAAUL,MAAK,SAAUZ,OACrE4B,OAAS,UACb,OAAmBnB,IAAIC,uBACvB,OAAmBD,IAAIE,6BACvB,OAAmB,oBACnB,aAAyBa,gBACrBK,cAAgBpB,IAAIiB,WAAW,kCAC/BI,yBAA2BhC,OAAOS,kBAAkB,SAC5CsB,uBACC,iBACC,UACD,kBAGArB,QAAQoB,QAAQhB,MAAK,SAAUN,+BAClBC,kBAAkB,MAClC,SAELD,MAAQA,KAAKU,QAAUV,KAAKU,OAAOe,yBACrBjB,YAAYR,KAAKU,OAAOe,qBAE7BC,wBACT1B,KAAKc,wBACSa,YAAY,MACtBxB,IAAIiB,WAAWpB,KAAKc,MAAMH,eACzBR,IAAIiB,WAAW,6BAIvBP,MAAK,SAAUC,MAAOc,oBACTC,iCAGHC,sDAKW,eACtBC,aAAenC,YACZ,oBAAoBH,GAAG,UAAU,SAAUC,UAC1C,eAAesC,IAAI,YACnB,eAAeA,IAAI,YACnB,YAAYA,IAAI,WAChB,cAAcA,IAAI,QACrBV,OAAS,QACJnB,IAAIC,uBACJD,IAAIE,8BACDb,OAAOE,EAAEuC,eAAeD,WAC3B,GAGTxC,OAAO,mBAAmBiB,KAAK,iBAClByB,mBAAmBZ,QAAQhB,MAAK,SAAUN,mBACzCmC,oCAIL,eACNC,kBAAoBxC,KAAKyC,uBACzBC,aAAe,4BACDC,KAAK,6DAA6DC,MAAK,SAAUC,EAAGC,QACjF,MAAhB5C,EAAE4C,KAAKV,MAAe,KACrBW,OAAS7C,EAAE4C,KAAKE,KAAK,qBACZD,QAAU,gBACVA,QAAb,MAAgC7C,EAAE4C,KAAKV,UAI5B,QACJ7B,IAAIC,uBACJD,IAAIE,2BACN,OACA,oBACQiC,kCAII,eACfP,aAAenC,KACfwC,kBAAoBxC,KAAKyC,yCACXE,KAAK,+BAA+B9C,GAAG,YAAY,SAAUC,MAC7D,IAAbA,EAAEmD,QAAe,KAChBvB,OAASS,aAAae,mBACnB,mBAAmBrC,KAAK,iBAClByB,mBAAmBZ,QAAQhB,MAAK,SAAUN,mBACzCmC,4CAIEI,KAAK,+BAA+B9C,GAAG,SAAS,SAAUC,OACvE4B,OAASS,aAAae,yBACbZ,mBAAmBZ,QAAQhB,MAAK,SAAUN,mBACzCmC,iDAIQ,cAC6B,KAAhDhC,IAAI4C,cAAc,2BAAmC,KACpDhB,aAAenC,KACKA,KAAKyC,uBACX5C,GAAG,SAAU,gCAAgC,SAAUC,OACpE4B,OAASS,aAAae,yBACbZ,mBAAmBZ,QAAQhB,MAAK,SAAUN,mBACzCmC,0CAKD,gBACVa,cACAC,iCACAC,wBACAC,+BACAC,0BACAC"}