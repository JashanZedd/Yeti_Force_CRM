{"version":3,"file":"Menu.min.js","sources":["Menu.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class('Settings_Menu_Index_Js', {}, {\n\ttreeInstance: false,\n\tloadMenuTree: function () {\n\t\tvar thisInstance = this;\n\t\tif (thisInstance.treeInstance == false) {\n\t\t\tvar data = JSON.parse($('#treeValues').val());\n\t\t\tif (data.length == 0) {\n\t\t\t\tSettings_Vtiger_Index_Js.showMessage({text: app.vtranslate('JS_NO_DATA')});\n\t\t\t}\n\t\t\tthisInstance.treeInstance = $(\"#treeContent\");\n\t\t\tthisInstance.treeInstance.jstree({\n\t\t\t\tcore: {\n\t\t\t\t\tdata: data,\n\t\t\t\t\tcheck_callback: true,\n\t\t\t\t},\n\t\t\t\tcontextmenu: {\n\t\t\t\t\titems: {\n\t\t\t\t\t\trename: {\n\t\t\t\t\t\t\tlabel: app.vtranslate('JS_EDIT'),\n\t\t\t\t\t\t\taction: function (data) {\n\t\t\t\t\t\t\t\tvar inst = $.jstree.reference(data.reference);\n\t\t\t\t\t\t\t\tvar id = inst.get_selected();\n\t\t\t\t\t\t\t\tvar progress = jQuery.progressIndicator();\n\t\t\t\t\t\t\t\tapp.showModalWindow(null, \"index.php?module=Menu&parent=Settings&view=EditMenu&id=\" + id, function (container) {\n\t\t\t\t\t\t\t\t\tthisInstance.registerEditMenu(container);\n\t\t\t\t\t\t\t\t\tprogress.progressIndicator({'mode': 'hide'});\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tremove: {\n\t\t\t\t\t\t\tlabel: app.vtranslate('JS_REMOVE'),\n\t\t\t\t\t\t\taction: function (data) {\n\t\t\t\t\t\t\t\tvar inst = $.jstree.reference(data.reference);\n\t\t\t\t\t\t\t\tvar ids = inst.get_selected();\n\t\t\t\t\t\t\t\tvar showInfo = false;\n\t\t\t\t\t\t\t\tfor (var i in ids) {\n\t\t\t\t\t\t\t\t\tvar menu = inst.get_node(ids[i]);\n\t\t\t\t\t\t\t\t\tif (menu.children.length > 0) {\n\t\t\t\t\t\t\t\t\t\tshowInfo = true;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (showInfo) {\n\t\t\t\t\t\t\t\t\tvar modal = $('.modal.deleteAlert').clone(true, true);\n\t\t\t\t\t\t\t\t\tvar callBackFunction = function (data) {\n\t\t\t\t\t\t\t\t\t\tdata.find('.deleteAlert').removeClass('d-none');\n\t\t\t\t\t\t\t\t\t\tdata.find('.btn-danger').on('click', function (e) {\n\t\t\t\t\t\t\t\t\t\t\tthisInstance.removeMenu(ids, inst);\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\tapp.showModalWindow(modal, function (data) {\n\t\t\t\t\t\t\t\t\t\tif (typeof callBackFunction == 'function') {\n\t\t\t\t\t\t\t\t\t\t\tcallBackFunction(data);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tthisInstance.removeMenu(ids, inst);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tplugins: [\"contextmenu\", \"dnd\", \"search\", \"state\", \"types\"]\n\t\t\t});\n\t\t}\n\t\tthisInstance.registerMenuChanges();\n\t\treturn this.treeInstance;\n\t},\n\tregisterMenuChanges: function () {\n\t\tvar thisInstance = this;\n\t\tthisInstance.treeInstance.on('move_node.jstree', function (obj) {\n\t\t\tvar progress = jQuery.progressIndicator();\n\t\t\tvar json = thisInstance.treeInstance.jstree(\"get_json\");\n\t\t\tvar menus = thisInstance.getChildrenMenu(json, 0);\n\t\t\tthisInstance.save('updateSequence', JSON.stringify(menus)).done(function (data) {\n\t\t\t\tSettings_Vtiger_Index_Js.showMessage({type: 'success', text: data.result.message});\n\t\t\t\tthisInstance.loadContent();\n\t\t\t\tprogress.progressIndicator({'mode': 'hide'});\n\t\t\t});\n\t\t})\n\t},\n\tgetChildrenMenu: function (childrens, parent) {\n\t\tvar menus = [];\n\t\tvar thisInstance = this;\n\t\tvar roleMenu = $('[name=\"roleMenu\"]').val()\n\t\t$.each(childrens, function (key, value) {\n\t\t\tvar menu = {i: value.id, s: key, p: parent, r: roleMenu};\n\t\t\tif (value.children.length > 0) {\n\t\t\t\tmenu.c = thisInstance.getChildrenMenu(value.children, value.id);\n\t\t\t}\n\t\t\tmenus.push(menu);\n\t\t});\n\t\treturn menus;\n\t},\n\tregisterChangeRoleMenu: function () {\n\t\tvar thisInstance = this;\n\t\t$('.menuConfigContainer').on('change', '[name=\"roleMenu\"]', function (e) {\n\t\t\tthisInstance.loadContent();\n\t\t});\n\t},\n\tgetMenuData: function (selectedRole) {\n\t\tvar aDeferred = jQuery.Deferred();\n\t\tvar params = {};\n\t\tparams['module'] = app.getModuleName();\n\t\tparams['parent'] = app.getParentModuleName();\n\t\tparams['view'] = app.getViewName();\n\t\tparams['roleid'] = selectedRole;\n\t\tAppConnector.requestPjax(params).done(function (data) {\n\t\t\taDeferred.resolve(data);\n\t\t}).fail(function (error) {\n\t\t\taDeferred.reject();\n\t\t});\n\t\treturn aDeferred.promise();\n\t},\n\tregisterAddMenu: function () {\n\t\tvar thisInstance = this;\n\t\t$('.addMenu').on('click', function (e) {\n\t\t\tvar progress = jQuery.progressIndicator();\n\t\t\tapp.showModalWindow(null, \"index.php?module=Menu&parent=Settings&view=CreateMenu&mode=step1\", function (container) {\n\t\t\t\tthisInstance.registerStep1(container);\n\t\t\t\tprogress.progressIndicator({'mode': 'hide'});\n\t\t\t});\n\t\t});\n\t},\n\tloadContent: function () {\n\t\tvar progress = jQuery.progressIndicator({\n\t\t\t'position': '#treeContent',\n\t\t\t'blockInfo': {\n\t\t\t\t'enabled': true\n\t\t\t}\n\t\t});\n\t\tvar thisInstance = this;\n\t\tvar contentsDiv = $('.contentsDiv');\n\t\tthisInstance.getMenuData($('[name=\"roleMenu\"]').val()).done(function (data) {\n\t\t\tcontentsDiv.html(data);\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(contentsDiv.find(\"[name='roleMenu']\"));\n\t\t\tthisInstance.registerEvents();\n\t\t\tprogress.progressIndicator({'mode': 'hide'});\n\t\t});\n\t},\n\tregisterEditMenu: function (container) {\n\t\tvar thisInstance = this;\n\t\tcontainer.find('form').validationEngine(app.validationEngineOptions);\n\t\tthisInstance.registerHotkeys(container);\n\t\tthisInstance.registerHiddenInput(container);\n\t\tthisInstance.registerFilters(container);\n\t\tthisInstance.registerSelectIcons(container);\n\t\tcontainer.find('.saveButton').on('click', function (e) {\n\t\t\tvar form = container.find('form').serializeFormData();\n\t\t\tvar errorExists = container.find('form').validationEngine('validate');\n\t\t\tif (errorExists != false) {\n\t\t\t\tvar progress = jQuery.progressIndicator();\n\t\t\t\tthisInstance.save('updateMenu', form).done(function (data) {\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({type: 'success', text: data.result.message});\n\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\tthisInstance.loadContent();\n\t\t\t\t\tprogress.progressIndicator({'mode': 'hide'});\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\tcontainer.find('form').on('submit', function (event) {\n\t\t\tevent.preventDefault();\n\t\t});\n\t},\n\tregisterStep1: function (container) {\n\t\tvar thisInstance = this;\n\t\tcontainer.find('.nextButton').on('click', function (e) {\n\t\t\tvar progress = jQuery.progressIndicator();\n\t\t\tapp.showModalWindow(null, \"index.php?module=Menu&parent=Settings&view=CreateMenu&mode=step2&mtype=\" + container.find('select.type').val(), function (container) {\n\t\t\t\tthisInstance.registerStep2(container);\n\t\t\t\tprogress.progressIndicator({'mode': 'hide'});\n\t\t\t});\n\t\t});\n\t},\n\n\tregisterSelectIcons: function (container) {\n\t\tvar iconSelect = container.find('#selectIconButton');\n\t\tvar icon = container.find('[name=\"icon\"]');\n\t\ticonSelect.on('click', function () {\n\t\t\t$.when(Settings_Vtiger_Index_Js.selectIcon()).done(function (data) {\n\t\t\t\ticon.val(data['name']);\n\t\t\t});\n\t\t});\n\t},\n\tregisterStep2: function (container) {\n\t\tvar thisInstance = this;\n\t\tcontainer.find('form').validationEngine(app.validationEngineOptions);\n\t\tthisInstance.registerHotkeys(container);\n\t\tthisInstance.registerHiddenInput(container);\n\t\tthisInstance.registerFilters(container);\n\t\tthisInstance.registerSelectIcons(container);\n\t\tcontainer.find('.saveButton').on('click', function (e) {\n\t\t\tvar form = container.find('form').serializeFormData();\n\t\t\tform.role = $('[name=\"roleMenu\"]').val();\n\t\t\tvar errorExists = container.find('form').validationEngine('validate');\n\t\t\tif (errorExists != false) {\n\t\t\t\tvar progress = jQuery.progressIndicator();\n\t\t\t\tthisInstance.save('createMenu', form).done(function (data) {\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({type: 'success', text: data.result.message});\n\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\tthisInstance.loadContent();\n\t\t\t\t\tprogress.progressIndicator({'mode': 'hide'});\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\tcontainer.find('form').on('submit', function (event) {\n\t\t\tevent.preventDefault();\n\t\t});\n\t},\n\tsave: function (mode, data) {\n\t\tvar aDeferred = jQuery.Deferred();\n\t\tvar params = {};\n\t\tparams['module'] = app.getModuleName();\n\t\tparams['parent'] = app.getParentModuleName();\n\t\tparams['action'] = 'SaveAjax';\n\t\tparams['source'] = $('.js-source').val();\n\t\tparams['mode'] = mode;\n\t\tparams['mdata'] = data;\n\t\tAppConnector.request(params).done(function (data) {\n\t\t\taDeferred.resolve(data);\n\t\t}).fail(function (textStatus, errorThrown) {\n\t\t\taDeferred.reject(textStatus, errorThrown);\n\t\t});\n\t\treturn aDeferred.promise();\n\t},\n\tremoveMenu: function (id, inst) {\n\t\tvar thisInstance = this;\n\t\tthisInstance.save('removeMenu', id).done(function (data) {\n\t\t\tSettings_Vtiger_Index_Js.showMessage({type: 'success', text: data.result.message});\n\t\t\tinst.delete_node(id);\n\t\t\tthisInstance.loadContent();\n\t\t});\n\t},\n\tregisterHotkeys: function (container) {\n\t\tcontainer.find('.testBtn').on('click', function (e) {\n\t\t\tvar testBtn = $(this);\n\t\t\tvar key = container.find('[name=\"hotkey\"]').val();\n\t\t\ttestBtn.addClass('active').removeClass('btn-default').addClass('btn-warning');\n\t\t\tMousetrap.bind(key, function () {\n\t\t\t\tSettings_Vtiger_Index_Js.showMessage({type: 'success', text: app.vtranslate('JS_TEST_HOTKEY_OK')});\n\t\t\t\ttestBtn.removeClass('btn-warning').addClass('btn-success').removeClass('active');\n\t\t\t\tMousetrap.unbind(key);\n\t\t\t});\n\t\t});\n\t},\n\tregisterHiddenInput: function (container) {\n\t\tif (container.find('#menuType').val() == 'CustomFilter') {\n\t\t\tvar tabid = container.find('select[name=\"dataurl\"] option:selected').data('tabid');\n\t\t\tcontainer.find('[name=\"module\"]').val(tabid);\n\t\t\tcontainer.on('change', 'select[name=\"dataurl\"]', function (e) {\n\t\t\t\tvar tabid = container.find('select[name=\"dataurl\"] option:selected').data('tabid');\n\t\t\t\tcontainer.find('[name=\"module\"]').val(tabid);\n\t\t\t});\n\n\t\t}\n\t},\n\tcacheFilters: false,\n\tregisterFilters: function (container) {\n\t\tvar thisInstance = this;\n\t\tif (container.find('#menuType').val() == 'Module') {\n\t\t\tthisInstance.cacheFilters = container.find('[name=\"filters\"]').clone(true, true);\n\t\t\tcontainer.find('[name=\"module\"]').on('change', function (e) {\n\t\t\t\tthisInstance.loadFilters(container, $(this));\n\t\t\t});\n\t\t\tthisInstance.loadFilters(container, container.find('[name=\"module\"]'));\n\t\t}\n\t},\n\tloadFilters: function (container, module) {\n\t\tvar thisInstance = this;\n\t\tcontainer.find('[name=\"filters\"]').html(thisInstance.cacheFilters.html());\n\t\tcontainer.find('[name=\"filters\"] option').each(function (index) {\n\t\t\tif ($(this).data('tabid') != module.val()) {\n\t\t\t\t$(this).remove();\n\t\t\t}\n\t\t});\n\t\tApp.Fields.Picklist.showSelect2ElementView(container.find('[name=\"filters\"]'), {width: '100%'});\n\t},\n\tregisterModalButton: function () {\n\t\tvar thisInstance = this;\n\t\tvar container = jQuery('.menuConfigContainer');\n\n\t\tcontainer.find('.copyMenu').on('click', function () {\n\n\t\t\tvar myModal = container.find('.copyMenuModal').clone(true, true);\n\t\t\tvar callBackFunction = function (data) {\n\n\t\t\t\tvar selectElement = data.find(\"[name='roles']\");\n\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(selectElement);\n\t\t\t\tvar form = data.find('form');\n\t\t\t\tform.on('submit', function (e) {\n\t\t\t\t\tvar currentTarget = jQuery(e.currentTarget);\n\t\t\t\t\tvar role = currentTarget.find('#roleList');\n\t\t\t\t\tif (role.length && role.val()) {\n\t\t\t\t\t\tthisInstance.copyMenu(role.val());\n\t\t\t\t\t}\n\t\t\t\t\te.preventDefault();\n\t\t\t\t})\n\t\t\t}\n\t\t\tapp.showModalWindow(myModal, function (data) {\n\t\t\t\tif (typeof callBackFunction == 'function') {\n\t\t\t\t\tcallBackFunction(data);\n\t\t\t\t}\n\t\t\t});\n\t\t})\n\t},\n\tcopyMenu: function (fromRole) {\n\t\tvar thisInstance = this;\n\t\tvar aDeferred = jQuery.Deferred();\n\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t'position': 'html',\n\t\t\t'blockInfo': {\n\t\t\t\t'enabled': true\n\t\t\t}\n\t\t});\n\t\tvar toRole = $('[name=\"roleMenu\"]').val()\n\t\tvar params = {};\n\t\tparams['module'] = app.getModuleName();\n\t\tparams['parent'] = app.getParentModuleName();\n\t\tparams['action'] = 'SaveAjax';\n\t\tparams['mode'] = 'copyMenu';\n\t\tparams['fromRole'] = fromRole;\n\t\tparams['toRole'] = toRole;\n\t\tAppConnector.request(params).done(function (data) {\n\t\t\tapp.hideModalWindow();\n\t\t\tprogressIndicatorElement.progressIndicator({'mode': 'hide'});\n\t\t\tthisInstance.loadContent();\n\t\t\taDeferred.resolve(data);\n\t\t}).fail(function (error) {\n\t\t\tprogressIndicatorElement.progressIndicator({'mode': 'hide'});\n\t\t\taDeferred.reject(error);\n\t\t});\n\t\treturn aDeferred.promise();\n\t},\n\n\tregisterEvents: function () {\n\t\tvar thisInstance = this;\n\t\tthisInstance.treeInstance = false;\n\t\tthisInstance.loadMenuTree();\n\t\tthisInstance.registerChangeRoleMenu();\n\t\tthisInstance.registerAddMenu();\n\t\tthisInstance.registerModalButton();\n\t}\n});\n"],"names":["jQuery","Class","thisInstance","treeInstance","data","JSON","parse","$","val","length","showMessage","text","app","vtranslate","jstree","inst","reference","id","get_selected","progress","progressIndicator","showModalWindow","container","registerEditMenu","ids","showInfo","i","menu","get_node","children","modal","clone","callBackFunction","find","removeClass","on","e","removeMenu","registerMenuChanges","obj","json","menus","getChildrenMenu","save","stringify","done","type","result","message","loadContent","childrens","parent","roleMenu","each","key","value","s","p","r","c","push","selectedRole","aDeferred","Deferred","params","getModuleName","getParentModuleName","getViewName","requestPjax","resolve","fail","error","reject","promise","registerStep1","contentsDiv","getMenuData","html","Fields","Picklist","showSelect2ElementView","registerEvents","validationEngine","validationEngineOptions","registerHotkeys","registerHiddenInput","registerFilters","registerSelectIcons","form","serializeFormData","errorExists","hideModalWindow","event","preventDefault","registerStep2","iconSelect","icon","when","Settings_Vtiger_Index_Js","selectIcon","role","mode","request","textStatus","errorThrown","delete_node","testBtn","addClass","bind","unbind","tabid","cacheFilters","loadFilters","module","index","remove","width","myModal","selectElement","currentTarget","copyMenu","fromRole","progressIndicatorElement","toRole","loadMenuTree","registerChangeRoleMenu","registerAddMenu","registerModalButton"],"mappings":"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"}