'use strict';

Vtiger_AdvanceFilter_Js('Workflows_AdvanceFilter_Js',{},{validationSupportedFieldConditionMap:{email:['e','n'],date:['is'],datetime:['is']},allConditionValidationNeededFieldList:['double','integer'],comparatorsWithNoValueBoxMap:['has changed','is empty','is not empty','is added','is Watching Record','is Not Watching Record'],getFieldSpecificType:function d(a){var b=a.data('fieldinfo'),c=b.type;return c},getModuleName:function a(){return app.getModuleName()},addNewCondition:function e(a){var b=jQuery('.basic',a),c=b.find('.js-conditions-row').clone(!0,!0);jQuery('select',c).addClass('select2');var d=jQuery('.conditionList',a);return d.append(c),App.Fields.Picklist.changeSelectElementView(c),c.find('[name="columnname"]').find('optgroup:first option:first').attr('selected','selected').trigger('change'),this},loadConditions:function n(a){var b=a.closest('div.js-conditions-row'),c=b.find('select[name="comparator"]'),d=c.val(),e=a.find('option:selected'),f=e.val(),g=f.match(/\((\w+)\) (\w+)/),h=this.getFieldSpecificType(e),i=this.getConditionListFromType(h);'undefined'==typeof i&&(i={},i.none='None');var j='';for(var k in i)if(i.hasOwnProperty(k)){var l=i[k],m=this.getConditionLabel(l);null==g?(j+='<option value="'+l+'"',l==d&&(j+=' selected="selected" '),j+='>'+m+'</option>'):'has changed'!=l&&(j+='<option value="'+l+'"',l==d&&(j+=' selected="selected" '),j+='>'+m+'</option>');}return c.empty().html(j).trigger('change'),c},getValues:function g(){var a=this,b=new Array('columnname','comparator','value','valuetype','column_condition'),c={},d=0,e=jQuery('.conditionGroup',this.getFilterContainer()),f={};return e.each(function(g,h){var i=jQuery(h),j=jQuery('.conditionList .js-conditions-row',i);return !!(0>=j.length)||void(j.each(function(c,e){var h=$(e),j=$('[name="columnname"]',h),k=$('[data-value="value"]',h);if(a.isEmptyFieldSelected(j))return !0;var l,m,n=j.find('option:selected').data('fieldinfo').type,o={};if(-1<$.inArray(n,['picklist','multipicklist','multiReferenceValue'])){for(l in b)if(m=b[l],'value'===m&&k.is('input')){var p=k.data('picklistvalues'),q=k.val().split(','),r=[];for(c=0;c<q.length;c++)'undefined'==typeof p[q[c]]?r.push(q[c]):r.push(p[q[c]]);o[m]=r.join(',');}else if('value'===m&&k.is('select')&&'picklist'===n)o[m]=k.val();else if('value'===m&&k.is('select')&&-1<$.inArray(n,['multipicklist','multiReferenceValue'])){var s=k.val();o[m]=null==s?s:s.join(',');}else o[m]=$('[name="'+m+'"]',h).val();}else for(l in b)m=b[l],o[m]='value'===m?k.val():$('[name="'+m+'"]',h).val();('false'===$('[name="valuetype"]',h).val()||0===$('[name="valuetype"]',h).length)&&(o.valuetype='rawtext'),o.groupid='0'===g?'0':'1',h.is(':last-child')&&(o.column_condition=''),f[d]=o,d++;}),!$.isEmptyObject(f)&&(c[g+1]={},c[g+1].columns=f),0<i.find('div.groupCondition').length&&!$.isEmptyObject(c[g+1])&&(c[g+1].condition=e.find('div.groupCondition [name="condition"]').val()))}),c},getFieldSpecificUi:function d(a){var b=a.find('option:selected'),c=b.data('fieldinfo');return -1==jQuery.inArray(c.comparatorElementVal,this.comparatorsWithNoValueBoxMap)?this._super(a):jQuery('')}}),Vtiger_Field_Js('Workflows_Field_Js',{},{getUiTypeSpecificHtml:function b(){var a=this.getUiTypeModel();return a.getUi()},getModuleName:function b(){var a=app.getModuleName();return a},getUi:function b(){var a='<input type="text" class="getPopupUi form-control" name="'+this.getName()+'"  /><input type="hidden" name="valuetype" value="'+this.get('workflow_valuetype')+'" />';return a=jQuery(a),a.filter('.getPopupUi').val(app.htmlDecode(this.getValue())),this.addValidationToElement(a)}}),Vtiger_Date_Field_Js('Workflows_Date_Field_Js',{},{getDateFormat:function a(){return this.get('date-format')},getUi:function e(){var a,b,c=this.get('comparatorElementVal'),d=this.get('dateSpecificConditions');if(0<c.length){if('between'===c||'custom'===c)return a='<div class="date"><input class="dateRangeField" data-calendar-type="range" name="'+this.getName()+'" data-date-format="'+this.getDateFormat()+'" type="text" ReadOnly="true" value="'+this.getValue()+'"></div>',b=jQuery(a),this.addValidationToElement(b);if(this._specialDateComparator(c))return a='<input name="'+this.getName()+'" type="text" value="'+this.getValue()+'" data-validation-engine="validate[funcCall[Vtiger_Base_Validator_Js.invokeValidation]]" data-validator="[{"name":"PositiveNumber"}]">\n\t\t\t\t\t\t\t<input type="hidden" name="valuetype" value="'+this.get('workflow_valuetype')+'" />',jQuery(a);if(c in d){var f=d[c].startdate,g=d[c].enddate;return a='<input name="'+this.getName()+'"  type="text" ReadOnly="true" value="'+f+','+g+'">',jQuery(a)}if('is today'===c);else return this._super()}else return a='<input type="text" class="getPopupUi date form-control" name="'+this.getName()+'"  data-date-format="'+this.getDateFormat()+'"  value="'+this.getValue()+'" /><input type="hidden" name="valuetype" value="'+this.get('workflow_valuetype')+'" />',b=jQuery(a),this.addValidationToElement(b)},_specialDateComparator:function d(a){var b=['less than days ago','more than days ago','in less than','in more than','days ago','days later'];for(var c in b)if(a==b[c])return !0;return !1}}),Vtiger_Date_Field_Js('Workflows_Datetime_Field_Js',{},{getDateFormat:function a(){return this.get('date-format')},getUi:function c(){var a,b;return this._specialDateTimeComparator(this.get('comparatorElementVal'))?(a='<input name="'+this.getName()+'" type="text" value="'+this.getValue()+'" data-validator="[{name:PositiveNumber}]"><input type="hidden" name="valuetype" value="'+this.get('workflow_valuetype')+'" />',b=$(a)):(a='<input type="text" class="getPopupUi date form-control" name="'+this.getName()+'"  data-date-format="'+this.getDateFormat()+'"  value="'+this.getValue()+'" /><input type="hidden" name="valuetype" value="'+this.get('workflow_valuetype')+'" />',b=$(a)),b},_specialDateTimeComparator:function d(a){var b=['less than hours before','less than hours later','more than hours later','more than hours before'];for(var c in b)if(a==b[c])return !0;return !1}}),Vtiger_Currency_Field_Js('Workflows_Currency_Field_Js',{},{getUi:function c(){var a='<input type="text" class="getPopupUi marginLeftZero form-control" name="'+this.getName()+'" value="'+this.getValue()+'"  /><input type="hidden" name="valuetype" value="'+this.get('workflow_valuetype')+'" />',b=jQuery(a);return this.addValidationToElement(b)}}),Vtiger_Time_Field_Js('Workflows_Time_Field_Js',{},{getUi:function c(){var a='<input type="text" class="getPopupUi time form-control" name="'+this.getName()+'"  value="'+this.getValue()+'" /><input type="hidden" name="valuetype" value="'+this.get('workflow_valuetype')+'" />',b=jQuery(a);return this.addValidationToElement(b)}}),Vtiger_Field_Js('Vtiger_Percentage_Field_Js',{},{getUi:function c(){var a='<input type="text" class="getPopupUi form-control" name="'+this.getName()+'" value="'+this.getValue()+'" /><input type="hidden" name="valuetype" value="'+this.get('workflow_valuetype')+'" />',b=jQuery(a);return this.addValidationToElement(b)}}),Vtiger_Field_Js('Vtiger_Text_Field_Js',{},{getUi:function c(){var a='<input type="text" class="getPopupUi form-control" name="'+this.getName()+'" value="'+this.getValue()+'" /><input type="hidden" name="valuetype" value="'+this.get('workflow_valuetype')+'" />',b=jQuery(a);return this.addValidationToElement(b)}}),Vtiger_Field_Js('Vtiger_Boolean_Field_Js',{},{getUi:function c(){var a='<input type="text" class="getPopupUi form-control boolean" name="'+this.getName()+'" value="'+this.getValue()+'" /><input type="hidden" name="valuetype" value="'+this.get('workflow_valuetype')+'" />',b=jQuery(a);return this.addValidationToElement(b)}}),Vtiger_Owner_Field_Js('Workflows_Owner_Field_Js',{},{getUi:function h(){var a='<select class="select2" data-value="value" name="'+this.getName()+'">',b=this.getPickListValues(),c=this.getValue();for(var d in b){a+='<optgroup label="'+d+'">';var e=b[d];for(var f in e)a+='<option value="'+f+'" ',f==c&&(a+=' selected '),a+='>'+e[f]+'</option>';a+='</optgroup>';}a+='</select>';var g=jQuery(a);return this.addValidationToElement(g),g}}),Workflows_Owner_Field_Js('Workflows_Sharedowner_Field_Js',{},{}),Vtiger_Picklist_Field_Js('Workflows_Picklist_Field_Js',{},{});
//# sourceMappingURL=AdvanceFilter.min.js.map
