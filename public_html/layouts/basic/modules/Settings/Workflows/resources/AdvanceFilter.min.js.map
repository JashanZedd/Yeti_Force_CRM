{"version":3,"file":"AdvanceFilter.min.js","sources":["AdvanceFilter.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n *************************************************************************************/\n'use strict';\n\nVtiger_AdvanceFilter_Js(\n\t'Workflows_AdvanceFilter_Js',\n\t{},\n\t{\n\t\tvalidationSupportedFieldConditionMap: {\n\t\t\temail: ['e', 'n'],\n\t\t\tdate: ['is'],\n\t\t\tdatetime: ['is']\n\t\t},\n\t\t//Hols field type for which there is validations always needed\n\t\tallConditionValidationNeededFieldList: ['double', 'integer'],\n\n\t\t// comparators which do not have any field Specific UI.\n\t\tcomparatorsWithNoValueBoxMap: [\n\t\t\t'is record open',\n\t\t\t'is record closed',\n\t\t\t'has changed',\n\t\t\t'is empty',\n\t\t\t'is not empty',\n\t\t\t'is added',\n\t\t\t'is Watching Record',\n\t\t\t'is Not Watching Record'\n\t\t],\n\n\t\tgetFieldSpecificType: function(fieldSelected) {\n\t\t\tvar fieldInfo = fieldSelected.data('fieldinfo');\n\t\t\tvar type = fieldInfo.type;\n\t\t\treturn type;\n\t\t},\n\n\t\tgetModuleName: function() {\n\t\t\treturn app.getModuleName();\n\t\t},\n\n\t\t/**\n\t\t * Function to add new condition row\n\t\t * @params : condtionGroupElement - group where condtion need to be added\n\t\t * @return : current instance\n\t\t */\n\t\taddNewCondition: function(conditionGroupElement) {\n\t\t\tvar basicElement = jQuery('.basic', conditionGroupElement);\n\t\t\tvar newRowElement = basicElement.find('.js-conditions-row').clone(true, true);\n\t\t\tjQuery('select', newRowElement).addClass('select2');\n\t\t\tvar conditionList = jQuery('.conditionList', conditionGroupElement);\n\t\t\tconditionList.append(newRowElement);\n\t\t\t//change in to select elements\n\t\t\tApp.Fields.Picklist.changeSelectElementView(newRowElement);\n\t\t\tnewRowElement\n\t\t\t\t.find('[name=\"columnname\"]')\n\t\t\t\t.find('optgroup:first option:first')\n\t\t\t\t.attr('selected', 'selected')\n\t\t\t\t.trigger('change');\n\t\t\treturn this;\n\t\t},\n\n\t\t/**\n\t\t * Function to load condition list for the selected field\n\t\t * (overrrided to remove \"has changed\" condition for related record fields in workflows)\n\t\t * @params : fieldSelect - select element which will represents field list\n\t\t * @return : select element which will represent the condition element\n\t\t */\n\t\tloadConditions: function(fieldSelect) {\n\t\t\tlet row = fieldSelect.closest('div.js-conditions-row');\n\t\t\tlet conditionSelectElement = row.find('select[name=\"comparator\"]');\n\t\t\tlet conditionSelected = conditionSelectElement.val();\n\t\t\tlet fieldSelected = fieldSelect.find('option:selected');\n\t\t\tlet fieldLabel = fieldSelected.val();\n\t\t\tlet match = fieldLabel.match(/\\((\\w+)\\) (\\w+)/);\n\t\t\tlet fieldSpecificType = this.getFieldSpecificType(fieldSelected);\n\t\t\tlet conditionList = this.getConditionListFromType(fieldSpecificType);\n\t\t\tlet fieldInfo = fieldSelected.data('fieldinfo');\n\t\t\t//for none in field name\n\t\t\tif (typeof conditionList === 'undefined') {\n\t\t\t\tconditionList = {};\n\t\t\t\tconditionList['none'] = 'None';\n\t\t\t}\n\n\t\t\tlet options = '';\n\t\t\tfor (let key in conditionList) {\n\t\t\t\t//IE Browser consider the prototype properties also, it should consider has own properties only.\n\t\t\t\tif (conditionList.hasOwnProperty(key)) {\n\t\t\t\t\tlet conditionValue = conditionList[key];\n\t\t\t\t\tlet conditionLabel = this.getConditionLabel(conditionValue);\n\t\t\t\t\tif (\n\t\t\t\t\t\tfieldInfo.type === 'picklist' &&\n\t\t\t\t\t\tjQuery.inArray(conditionValue, ['is record open', 'is record closed']) !== -1 &&\n\t\t\t\t\t\t'undefined' !== typeof fieldInfo.field_params &&\n\t\t\t\t\t\t'undefined' !== typeof fieldInfo.field_params.isProcessStatusField &&\n\t\t\t\t\t\t!fieldInfo.field_params.isProcessStatusField\n\t\t\t\t\t) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tif (match != null) {\n\t\t\t\t\t\tif (conditionValue != 'has changed') {\n\t\t\t\t\t\t\toptions += '<option value=\"' + conditionValue + '\"';\n\t\t\t\t\t\t\tif (conditionValue == conditionSelected) {\n\t\t\t\t\t\t\t\toptions += ' selected=\"selected\" ';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\toptions += '>' + conditionLabel + '</option>';\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\toptions += '<option value=\"' + conditionValue + '\"';\n\t\t\t\t\t\tif (conditionValue == conditionSelected) {\n\t\t\t\t\t\t\toptions += ' selected=\"selected\" ';\n\t\t\t\t\t\t}\n\t\t\t\t\t\toptions += '>' + conditionLabel + '</option>';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tconditionSelectElement\n\t\t\t\t.empty()\n\t\t\t\t.html(options)\n\t\t\t\t.trigger('change');\n\t\t\treturn conditionSelectElement;\n\t\t},\n\n\t\t/**\n\t\t * Function to retrieve the values of the filter\n\t\t * @return : object\n\t\t */\n\t\tgetValues: function() {\n\t\t\tconst thisInstance = this;\n\t\t\tlet fieldList = new Array('columnname', 'comparator', 'value', 'valuetype', 'column_condition'),\n\t\t\t\tvalues = {},\n\t\t\t\tcolumnIndex = 0,\n\t\t\t\tconditionGroups = jQuery('.conditionGroup', this.getFilterContainer());\n\t\t\tconditionGroups.each(function(index, domElement) {\n\t\t\t\tlet groupElement = jQuery(domElement),\n\t\t\t\t\tconditions = jQuery('.conditionList .js-conditions-row', groupElement),\n\t\t\t\t\titerationValues = {};\n\t\t\t\tif (conditions.length <= 0) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\tconditions.each(function(i, conditionDomElement) {\n\t\t\t\t\tlet rowElement = $(conditionDomElement),\n\t\t\t\t\t\tfieldSelectElement = $('[name=\"columnname\"]', rowElement),\n\t\t\t\t\t\tvalueSelectElement = $('[data-value=\"value\"]', rowElement);\n\t\t\t\t\t//To not send empty fields to server\n\t\t\t\t\tif (thisInstance.isEmptyFieldSelected(fieldSelectElement)) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\tlet fieldType = fieldSelectElement.find('option:selected').data('fieldinfo').type,\n\t\t\t\t\t\trowValues = {},\n\t\t\t\t\t\tkey,\n\t\t\t\t\t\tfield;\n\t\t\t\t\tif (\n\t\t\t\t\t\t$.inArray(fieldType, ['picklist', 'multipicklist', 'multiReferenceValue', 'categoryMultipicklist']) > -1\n\t\t\t\t\t) {\n\t\t\t\t\t\tfor (key in fieldList) {\n\t\t\t\t\t\t\tfield = fieldList[key];\n\t\t\t\t\t\t\tif (field === 'value' && valueSelectElement.is('input')) {\n\t\t\t\t\t\t\t\tlet pickListValues = valueSelectElement.data('picklistvalues'),\n\t\t\t\t\t\t\t\t\tvaluesArr = valueSelectElement.val().split(','),\n\t\t\t\t\t\t\t\t\tnewValuesArr = [];\n\t\t\t\t\t\t\t\tfor (i = 0; i < valuesArr.length; i++) {\n\t\t\t\t\t\t\t\t\tif (typeof pickListValues[valuesArr[i]] !== 'undefined') {\n\t\t\t\t\t\t\t\t\t\tnewValuesArr.push(pickListValues[valuesArr[i]]);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tnewValuesArr.push(valuesArr[i]);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\trowValues[field] = newValuesArr.join(',');\n\t\t\t\t\t\t\t} else if (field === 'value' && valueSelectElement.is('select') && fieldType === 'picklist') {\n\t\t\t\t\t\t\t\trowValues[field] = valueSelectElement.val();\n\t\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\t\tfield === 'value' &&\n\t\t\t\t\t\t\t\tvalueSelectElement.is('select') &&\n\t\t\t\t\t\t\t\t$.inArray(fieldType, ['multipicklist', 'multiReferenceValue', 'categoryMultipicklist']) > -1\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tlet value = valueSelectElement.val();\n\t\t\t\t\t\t\t\tif (value == null) {\n\t\t\t\t\t\t\t\t\trowValues[field] = value;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\trowValues[field] = value.join(',');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\trowValues[field] = $('[name=\"' + field + '\"]', rowElement).val();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfor (key in fieldList) {\n\t\t\t\t\t\t\tfield = fieldList[key];\n\t\t\t\t\t\t\tif (field === 'value') {\n\t\t\t\t\t\t\t\trowValues[field] = valueSelectElement.val();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\trowValues[field] = $('[name=\"' + field + '\"]', rowElement).val();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (\n\t\t\t\t\t\t$('[name=\"valuetype\"]', rowElement).val() === 'false' ||\n\t\t\t\t\t\t$('[name=\"valuetype\"]', rowElement).length === 0\n\t\t\t\t\t) {\n\t\t\t\t\t\trowValues['valuetype'] = 'rawtext';\n\t\t\t\t\t}\n\n\t\t\t\t\tif (index === 0) {\n\t\t\t\t\t\trowValues['groupid'] = 0;\n\t\t\t\t\t} else {\n\t\t\t\t\t\trowValues['groupid'] = 1;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (rowElement.is(':last-child')) {\n\t\t\t\t\t\trowValues['column_condition'] = '';\n\t\t\t\t\t}\n\t\t\t\t\titerationValues[columnIndex] = rowValues;\n\t\t\t\t\tcolumnIndex++;\n\t\t\t\t});\n\n\t\t\t\tif (!$.isEmptyObject(iterationValues)) {\n\t\t\t\t\tvalues[index + 1] = {};\n\t\t\t\t\tvalues[index + 1]['columns'] = iterationValues;\n\t\t\t\t}\n\t\t\t\tif (groupElement.find('div.groupCondition').length > 0) {\n\t\t\t\t\tvalues[index + 1]['condition'] = groupElement.find('div.groupCondition [name=\"condition\"]').val();\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn values;\n\t\t},\n\n\t\t/**\n\t\t * Functiont to get the field specific ui for the selected field\n\t\t * @prarms : fieldSelectElement - select element which will represents field list\n\t\t * @return : jquery object which represents the ui for the field\n\t\t */\n\t\tgetFieldSpecificUi: function(fieldSelectElement) {\n\t\t\tvar fieldSelected = fieldSelectElement.find('option:selected');\n\t\t\tvar fieldInfo = fieldSelected.data('fieldinfo');\n\t\t\tif (jQuery.inArray(fieldInfo.comparatorElementVal, this.comparatorsWithNoValueBoxMap) != -1) {\n\t\t\t\treturn jQuery('');\n\t\t\t} else {\n\t\t\t\treturn this._super(fieldSelectElement);\n\t\t\t}\n\t\t}\n\t}\n);\n\nVtiger_Field_Js(\n\t'Workflows_Field_Js',\n\t{},\n\t{\n\t\tgetUiTypeSpecificHtml: function() {\n\t\t\tvar uiTypeModel = this.getUiTypeModel();\n\t\t\treturn uiTypeModel.getUi();\n\t\t},\n\n\t\tgetModuleName: function() {\n\t\t\tvar currentModule = app.getModuleName();\n\t\t\treturn currentModule;\n\t\t},\n\n\t\t/**\n\t\t * Funtion to get the ui for the field  - generally this will be extend by the child classes to\n\t\t * give ui type specific ui\n\t\t * return <String or Jquery> it can return either plain html or jquery object\n\t\t */\n\t\tgetUi: function() {\n\t\t\tvar html =\n\t\t\t\t'<input type=\"text\" class=\"getPopupUi form-control\" name=\"' +\n\t\t\t\tthis.getName() +\n\t\t\t\t'\"  /><input type=\"hidden\" name=\"valuetype\" value=\"' +\n\t\t\t\tthis.get('workflow_valuetype') +\n\t\t\t\t'\" />';\n\t\t\thtml = jQuery(html);\n\t\t\thtml.filter('.getPopupUi').val(app.htmlDecode(this.getValue()));\n\t\t\treturn this.addValidationToElement(html);\n\t\t}\n\t}\n);\n\nVtiger_Date_Field_Js(\n\t'Workflows_Date_Field_Js',\n\t{},\n\t{\n\t\t/**\n\t\t * Function to get the user date format\n\t\t */\n\t\tgetDateFormat: function() {\n\t\t\treturn this.get('date-format');\n\t\t},\n\n\t\t/**\n\t\t * Function to get the ui\n\t\t * @return - input text field\n\t\t */\n\t\tgetUi: function() {\n\t\t\tlet comparatorSelectedOptionVal = this.get('comparatorElementVal'),\n\t\t\t\tdateSpecificConditions = this.get('dateSpecificConditions'),\n\t\t\t\thtml,\n\t\t\t\telement;\n\t\t\tif (comparatorSelectedOptionVal.length > 0) {\n\t\t\t\tif (comparatorSelectedOptionVal === 'between' || comparatorSelectedOptionVal === 'custom') {\n\t\t\t\t\thtml =\n\t\t\t\t\t\t'<div class=\"date\"><input class=\"form-control dateRangeField\" data-calendar-type=\"range\" name=\"' +\n\t\t\t\t\t\tthis.getName() +\n\t\t\t\t\t\t'\" data-date-format=\"' +\n\t\t\t\t\t\tthis.getDateFormat() +\n\t\t\t\t\t\t'\" type=\"text\" value=\"' +\n\t\t\t\t\t\tthis.getValue() +\n\t\t\t\t\t\t'\"></div>';\n\t\t\t\t\telement = jQuery(html);\n\t\t\t\t\treturn this.addValidationToElement(element);\n\t\t\t\t} else if (this._specialDateComparator(comparatorSelectedOptionVal)) {\n\t\t\t\t\thtml =\n\t\t\t\t\t\t'<input name=\"' +\n\t\t\t\t\t\tthis.getName() +\n\t\t\t\t\t\t'\" type=\"text\" value=\"' +\n\t\t\t\t\t\tthis.getValue() +\n\t\t\t\t\t\t'\" data-validation-engine=\"' +\n\t\t\t\t\t\t'validate[funcCall[Vtiger_Base_Validator_Js.invokeValidation]]\"' +\n\t\t\t\t\t\t' data-validator=\"[{\"name\":\"PositiveNumber\"}]\">' +\n\t\t\t\t\t\t'<input type=\"hidden\" name=\"valuetype\" value=\"' +\n\t\t\t\t\t\tthis.get('workflow_valuetype') +\n\t\t\t\t\t\t'\" />';\n\t\t\t\t\treturn jQuery(html);\n\t\t\t\t} else if (comparatorSelectedOptionVal in dateSpecificConditions) {\n\t\t\t\t\tlet startValue = dateSpecificConditions[comparatorSelectedOptionVal]['startdate'],\n\t\t\t\t\t\tendValue = dateSpecificConditions[comparatorSelectedOptionVal]['enddate'];\n\t\t\t\t\thtml =\n\t\t\t\t\t\t'<input name=\"' +\n\t\t\t\t\t\tthis.getName() +\n\t\t\t\t\t\t'\"  type=\"text\" ReadOnly=\"true\" value=\"' +\n\t\t\t\t\t\tstartValue +\n\t\t\t\t\t\t',' +\n\t\t\t\t\t\tendValue +\n\t\t\t\t\t\t'\">';\n\t\t\t\t\treturn jQuery(html);\n\t\t\t\t} else if (comparatorSelectedOptionVal === 'is today') {\n\t\t\t\t\t//show nothing\n\t\t\t\t} else {\n\t\t\t\t\treturn this._super();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\thtml =\n\t\t\t\t\t'<input type=\"text\" class=\"getPopupUi date form-control\" name=\"' +\n\t\t\t\t\tthis.getName() +\n\t\t\t\t\t'\"  data-date-format=\"' +\n\t\t\t\t\tthis.getDateFormat() +\n\t\t\t\t\t'\"  value=\"' +\n\t\t\t\t\tthis.getValue() +\n\t\t\t\t\t'\" />' +\n\t\t\t\t\t'<input type=\"hidden\" name=\"valuetype\" value=\"' +\n\t\t\t\t\tthis.get('workflow_valuetype') +\n\t\t\t\t\t'\" />';\n\t\t\t\telement = jQuery(html);\n\t\t\t\treturn this.addValidationToElement(element);\n\t\t\t}\n\t\t},\n\n\t\t_specialDateComparator: function(comp) {\n\t\t\tvar specialComparators = [\n\t\t\t\t'less than days ago',\n\t\t\t\t'more than days ago',\n\t\t\t\t'in less than',\n\t\t\t\t'in more than',\n\t\t\t\t'days ago',\n\t\t\t\t'days later'\n\t\t\t];\n\t\t\tfor (var index in specialComparators) {\n\t\t\t\tif (comp == specialComparators[index]) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t}\n);\n\nVtiger_Date_Field_Js(\n\t'Workflows_Datetime_Field_Js',\n\t{},\n\t{\n\t\t/**\n\t\t * Function to get the user date format\n\t\t */\n\t\tgetDateFormat: function() {\n\t\t\treturn this.get('date-format');\n\t\t},\n\n\t\t/**\n\t\t * Function to get the ui\n\t\t * @return - input text field\n\t\t */\n\t\tgetUi: function() {\n\t\t\tlet html, element;\n\t\t\tif (this._specialDateTimeComparator(this.get('comparatorElementVal'))) {\n\t\t\t\thtml =\n\t\t\t\t\t'<input name=\"' +\n\t\t\t\t\tthis.getName() +\n\t\t\t\t\t'\" type=\"text\" value=\"' +\n\t\t\t\t\tthis.getValue() +\n\t\t\t\t\t'\" data-validator=\"[{name:PositiveNumber}]\"><input type=\"hidden\" name=\"valuetype\" value=\"' +\n\t\t\t\t\tthis.get('workflow_valuetype') +\n\t\t\t\t\t'\" />';\n\t\t\t\telement = $(html);\n\t\t\t} else {\n\t\t\t\thtml =\n\t\t\t\t\t'<input type=\"text\" class=\"getPopupUi date form-control\" name=\"' +\n\t\t\t\t\tthis.getName() +\n\t\t\t\t\t'\"  data-date-format=\"' +\n\t\t\t\t\tthis.getDateFormat() +\n\t\t\t\t\t'\"  value=\"' +\n\t\t\t\t\tthis.getValue() +\n\t\t\t\t\t'\" />' +\n\t\t\t\t\t'<input type=\"hidden\" name=\"valuetype\" value=\"' +\n\t\t\t\t\tthis.get('workflow_valuetype') +\n\t\t\t\t\t'\" />';\n\t\t\t\telement = $(html);\n\t\t\t}\n\t\t\treturn element;\n\t\t},\n\n\t\t_specialDateTimeComparator: function(comp) {\n\t\t\tvar specialComparators = [\n\t\t\t\t'less than hours before',\n\t\t\t\t'less than hours later',\n\t\t\t\t'more than hours later',\n\t\t\t\t'more than hours before'\n\t\t\t];\n\t\t\tfor (var index in specialComparators) {\n\t\t\t\tif (comp == specialComparators[index]) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t}\n);\n\nVtiger_Currency_Field_Js(\n\t'Workflows_Currency_Field_Js',\n\t{},\n\t{\n\t\tgetUi: function() {\n\t\t\tvar html =\n\t\t\t\t'<input type=\"text\" class=\"getPopupUi marginLeftZero form-control\" name=\"' +\n\t\t\t\tthis.getName() +\n\t\t\t\t'\" value=\"' +\n\t\t\t\tthis.getValue() +\n\t\t\t\t'\"  />' +\n\t\t\t\t'<input type=\"hidden\" name=\"valuetype\" value=\"' +\n\t\t\t\tthis.get('workflow_valuetype') +\n\t\t\t\t'\" />';\n\t\t\tvar element = jQuery(html);\n\t\t\treturn this.addValidationToElement(element);\n\t\t}\n\t}\n);\n\nVtiger_Time_Field_Js(\n\t'Workflows_Time_Field_Js',\n\t{},\n\t{\n\t\t/**\n\t\t * Function to get the ui\n\t\t * @return - input text field\n\t\t */\n\t\tgetUi: function() {\n\t\t\tvar html =\n\t\t\t\t'<input type=\"text\" class=\"getPopupUi time form-control\" name=\"' +\n\t\t\t\tthis.getName() +\n\t\t\t\t'\"  value=\"' +\n\t\t\t\tthis.getValue() +\n\t\t\t\t'\" />' +\n\t\t\t\t'<input type=\"hidden\" name=\"valuetype\" value=\"' +\n\t\t\t\tthis.get('workflow_valuetype') +\n\t\t\t\t'\" />';\n\t\t\tvar element = jQuery(html);\n\t\t\treturn this.addValidationToElement(element);\n\t\t}\n\t}\n);\n\nVtiger_Field_Js(\n\t'Vtiger_Percentage_Field_Js',\n\t{},\n\t{\n\t\t/**\n\t\t * Function to get the ui\n\t\t * @return - input percentage field\n\t\t */\n\t\tgetUi: function() {\n\t\t\tvar html =\n\t\t\t\t'<input type=\"text\" class=\"getPopupUi form-control\" name=\"' +\n\t\t\t\tthis.getName() +\n\t\t\t\t'\" value=\"' +\n\t\t\t\tthis.getValue() +\n\t\t\t\t'\" />' +\n\t\t\t\t'<input type=\"hidden\" name=\"valuetype\" value=\"' +\n\t\t\t\tthis.get('workflow_valuetype') +\n\t\t\t\t'\" />';\n\t\t\tvar element = jQuery(html);\n\t\t\treturn this.addValidationToElement(element);\n\t\t}\n\t}\n);\n\nVtiger_Field_Js(\n\t'Vtiger_Text_Field_Js',\n\t{},\n\t{\n\t\t/**\n\t\t * Function to get the ui\n\t\t * @return - input text field\n\t\t */\n\t\tgetUi: function() {\n\t\t\tvar html =\n\t\t\t\t'<input type=\"text\" class=\"getPopupUi form-control\" name=\"' +\n\t\t\t\tthis.getName() +\n\t\t\t\t'\" value=\"' +\n\t\t\t\tthis.getValue() +\n\t\t\t\t'\" />' +\n\t\t\t\t'<input type=\"hidden\" name=\"valuetype\" value=\"' +\n\t\t\t\tthis.get('workflow_valuetype') +\n\t\t\t\t'\" />';\n\t\t\tvar element = jQuery(html);\n\t\t\treturn this.addValidationToElement(element);\n\t\t}\n\t}\n);\n\nVtiger_Field_Js(\n\t'Vtiger_Boolean_Field_Js',\n\t{},\n\t{\n\t\t/**\n\t\t * Function to get the ui\n\t\t * @return - input text field\n\t\t */\n\t\tgetUi: function() {\n\t\t\tvar html =\n\t\t\t\t'<input type=\"text\" class=\"getPopupUi form-control boolean\" name=\"' +\n\t\t\t\tthis.getName() +\n\t\t\t\t'\" value=\"' +\n\t\t\t\tthis.getValue() +\n\t\t\t\t'\" />' +\n\t\t\t\t'<input type=\"hidden\" name=\"valuetype\" value=\"' +\n\t\t\t\tthis.get('workflow_valuetype') +\n\t\t\t\t'\" />';\n\t\t\tvar element = jQuery(html);\n\t\t\treturn this.addValidationToElement(element);\n\t\t}\n\t}\n);\n\nVtiger_Owner_Field_Js(\n\t'Workflows_Owner_Field_Js',\n\t{},\n\t{\n\t\tgetUi: function() {\n\t\t\tvar html = '<select class=\"select2\" data-value=\"value\" name=\"' + this.getName() + '\">';\n\t\t\tvar pickListValues = this.getPickListValues();\n\t\t\tvar selectedOption = this.getValue();\n\t\t\tfor (var optGroup in pickListValues) {\n\t\t\t\thtml += '<optgroup label=\"' + optGroup + '\">';\n\t\t\t\tvar optionGroupValues = pickListValues[optGroup];\n\t\t\t\tfor (var option in optionGroupValues) {\n\t\t\t\t\thtml += '<option value=\"' + option + '\" ';\n\t\t\t\t\tif (option == selectedOption) {\n\t\t\t\t\t\thtml += ' selected ';\n\t\t\t\t\t}\n\t\t\t\t\thtml += '>' + optionGroupValues[option] + '</option>';\n\t\t\t\t}\n\t\t\t\thtml += '</optgroup>';\n\t\t\t}\n\n\t\t\thtml += '</select>';\n\t\t\tvar selectContainer = jQuery(html);\n\t\t\tthis.addValidationToElement(selectContainer);\n\t\t\treturn selectContainer;\n\t\t}\n\t}\n);\nWorkflows_Owner_Field_Js('Workflows_Sharedowner_Field_Js', {}, {});\nVtiger_Picklist_Field_Js('Workflows_Picklist_Field_Js', {}, {});\nAdvanceFilter_Categorymultipicklist_Field_Js('Workflows_Categorymultipicklist_Field_Js', {}, {});\n"],"names":["Vtiger_AdvanceFilter_Js","fieldSelected","data","type","app","getModuleName","conditionGroupElement","newRowElement","jQuery","find","clone","addClass","append","Fields","Picklist","changeSelectElementView","attr","trigger","this","fieldSelect","conditionSelectElement","closest","conditionSelected","val","match","fieldSpecificType","getFieldSpecificType","conditionList","getConditionListFromType","fieldInfo","options","key","hasOwnProperty","conditionValue","conditionLabel","getConditionLabel","inArray","field_params","isProcessStatusField","empty","html","thisInstance","fieldList","Array","values","columnIndex","getFilterContainer","each","index","domElement","groupElement","conditions","iterationValues","length","i","conditionDomElement","rowElement","$","fieldSelectElement","valueSelectElement","isEmptyFieldSelected","fieldType","rowValues","field","is","pickListValues","valuesArr","split","newValuesArr","push","join","value","isEmptyObject","comparatorElementVal","comparatorsWithNoValueBoxMap","_super","Vtiger_Field_Js","getUiTypeModel","getUi","getName","get","filter","htmlDecode","getValue","addValidationToElement","Vtiger_Date_Field_Js","comparatorSelectedOptionVal","dateSpecificConditions","element","getDateFormat","_specialDateComparator","startValue","endValue","comp","specialComparators","_specialDateTimeComparator","Vtiger_Currency_Field_Js","Vtiger_Time_Field_Js","Vtiger_Owner_Field_Js","getPickListValues","selectedOption","optGroup","optionGroupValues","option","selectContainer","Workflows_Owner_Field_Js","Vtiger_Picklist_Field_Js","AdvanceFilter_Categorymultipicklist_Field_Js"],"mappings":"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"}