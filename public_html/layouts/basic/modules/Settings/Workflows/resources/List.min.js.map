{"version":3,"file":"List.min.js","sources":["List.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n *************************************************************************************/\n'use strict';\n\nSettings_Vtiger_List_Js(\"Settings_Workflows_List_Js\", {\n\n\ttriggerCreate: function (url) {\n\t\tvar selectedModule = jQuery('#moduleFilter').val();\n\t\tif (selectedModule.length > 0) {\n\t\t\turl += '&source_module=' + selectedModule\n\t\t}\n\t\twindow.location.href = url;\n\t},\n\n\tsetChangeStatusTasks: function (e, recordId, status) {\n\t\tvar changeButtonType = jQuery(e);\n\t\tvar container = jQuery(e).closest('tr');\n\t\tvar message = app.vtranslate('LBL_STATUS_CONFIRMATION');\n\t\tVtiger_Helper_Js.showConfirmationBox({'message': message}).done(function (e) {\n\t\t\tvar module = app.getModuleName();\n\t\t\tvar postData = {\n\t\t\t\t\"module\": module,\n\t\t\t\t\"action\": \"TaskAjax\",\n\t\t\t\t\"mode\": \"changeStatusAllTasks\",\n\t\t\t\t\"record\": recordId,\n\t\t\t\t\"status\": status,\n\t\t\t\t\"parent\": app.getParentModuleName()\n\t\t\t}\n\t\t\tvar deleteMessage = app.vtranslate('JS_TASKS_STATUS_GETTING_CHANGED');\n\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\t'message': deleteMessage,\n\t\t\t\t'position': 'html',\n\t\t\t\t'blockInfo': {\n\t\t\t\t\t'enabled': true\n\t\t\t\t}\n\t\t\t});\n\t\t\tAppConnector.request(postData).done(function (data) {\n\t\t\t\tprogressIndicatorElement.progressIndicator({\n\t\t\t\t\t'mode': 'hide'\n\t\t\t\t})\n\t\t\t\tif (data.success) {\n\t\t\t\t\tvar count = data.result.count;\n\t\t\t\t\tvar element = container.find('[data-name=\"active_tasks\"]');\n\t\t\t\t\tchangeButtonType.hide();\n\t\t\t\t\tif (status) {\n\t\t\t\t\t\telement.html('&nbsp;' + count);\n\t\t\t\t\t\tchangeButtonType.closest('td').find('.deactiveTasks').show();\n\t\t\t\t\t} else {\n\t\t\t\t\t\telement.html('&nbsp;0');\n\t\t\t\t\t\tchangeButtonType.closest('td').find('.activeTasks').show();\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\t\t\t\t\tvar params = {\n\t\t\t\t\t\ttext: app.vtranslate(data.error.message),\n\t\t\t\t\t\ttitle: app.vtranslate('JS_LBL_PERMISSION')\n\t\t\t\t\t}\n\t\t\t\t\tVtiger_Helper_Js.showPnotify(params);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\n}, {\n\n\tregisterFilterChangeEvent: function () {\n\t\tvar thisInstance = this;\n\t\tjQuery('#moduleFilter').on('change', function (e) {\n\t\t\tjQuery('#pageNumber').val(\"1\");\n\t\t\tjQuery('#pageToJump').val('1');\n\t\t\tjQuery('#orderBy').val('');\n\t\t\tjQuery(\"#sortOrder\").val('');\n\t\t\tvar params = {\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\tsourceModule: jQuery(e.currentTarget).val()\n\t\t\t}\n\t\t\t//Make the select all count as empty\n\t\t\tjQuery('#recordsCount').val('');\n\t\t\t//Make total number of pages as empty\n\t\t\tjQuery('#totalPageCount').text(\"\");\n\t\t\tthisInstance.getListViewRecords(params).done(function (data) {\n\t\t\t\tthisInstance.updatePagination();\n\t\t\t});\n\t\t});\n\t},\n\n\t/*\n\t * Function to register the list view row click event\n\t */\n\tregisterRowClickEvent: function () {\n\t\tvar listViewContentDiv = this.getListViewContentContainer();\n\t\tlistViewContentDiv.on('click', '.listViewEntries', function (e) {\n\t\t\tvar editUrl = jQuery(e.currentTarget).find('.fa-edit').closest('a').attr('href');\n\t\t\twindow.location.href = editUrl;\n\t\t});\n\t},\n\n\tgetDefaultParams: function () {\n\t\tvar pageNumber = jQuery('#pageNumber').val();\n\t\tvar module = app.getModuleName();\n\t\tvar parent = app.getParentModuleName();\n\t\tvar params = {\n\t\t\t'module': module,\n\t\t\t'parent': parent,\n\t\t\t'page': pageNumber,\n\t\t\t'view': \"List\",\n\t\t\tsourceModule: jQuery('#moduleFilter').val()\n\t\t};\n\t\treturn params;\n\t},\n\tregisterImportTemplate: function () {\n\t\tjQuery('#importButton').on('click', function () {\n\t\t\twindow.location.href = jQuery(this).data('url');\n\t\t});\n\t},\n\tregisterEvents: function () {\n\t\tthis._super();\n\t\tthis.registerFilterChangeEvent();\n\t\tthis.registerImportTemplate();\n\t}\n});\n"],"names":["Settings_Vtiger_List_Js","url","selectedModule","jQuery","val","length","location","href","e","recordId","status","changeButtonType","container","closest","message","app","vtranslate","showConfirmationBox","done","module","getModuleName","postData","getParentModuleName","deleteMessage","progressIndicatorElement","progressIndicator","request","data","success","count","result","element","find","hide","html","show","params","error","showPnotify","thisInstance","on","currentTarget","text","getListViewRecords","updatePagination","listViewContentDiv","getListViewContentContainer","editUrl","attr","pageNumber","parent","_super","registerFilterChangeEvent","registerImportTemplate"],"mappings":"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"}