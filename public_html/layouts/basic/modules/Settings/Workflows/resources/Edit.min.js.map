{"version":3,"file":"Edit.min.js","sources":["Edit.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n * Contributor(s): YetiForce.com\n *************************************************************************************/\n'use strict';\n\nSettings_Vtiger_Edit_Js(\"Settings_Workflows_Edit_Js\", {\n\tinstance: {}\n\n}, {\n\tcurrentInstance: false,\n\tworkFlowsContainer: false,\n\tinit: function () {\n\t\tthis.initiate();\n\t},\n\t/**\n\t * Function to get the container which holds all the workflow elements\n\t * @return jQuery object\n\t */\n\tgetContainer: function () {\n\t\treturn this.workFlowsContainer;\n\t},\n\t/**\n\t * Function to set the reports container\n\t * @params : element - which represents the workflow container\n\t * @return : current instance\n\t */\n\tsetContainer: function (element) {\n\t\tthis.workFlowsContainer = element;\n\t\treturn this;\n\t},\n\t/*\n\t * Function to return the instance based on the step of the Workflow\n\t */\n\tgetInstance: function (step) {\n\t\tif (step in Settings_Workflows_Edit_Js.instance) {\n\t\t\treturn Settings_Workflows_Edit_Js.instance[step];\n\t\t} else {\n\t\t\tvar moduleClassName = 'Settings_Workflows_Edit' + step + '_Js';\n\t\t\tSettings_Workflows_Edit_Js.instance[step] = new window[moduleClassName]();\n\t\t\treturn Settings_Workflows_Edit_Js.instance[step]\n\t\t}\n\t},\n\t/*\n\t * Function to get the value of the step\n\t * returns 1 or 2 or 3\n\t */\n\tgetStepValue: function () {\n\t\tvar container = this.currentInstance.getContainer();\n\t\treturn jQuery('.step', container).val();\n\t},\n\t/*\n\t * Function to initiate the step 1 instance\n\t */\n\tinitiate: function (container) {\n\t\tif (typeof container === \"undefined\") {\n\t\t\tcontainer = jQuery('.workFlowContents');\n\t\t}\n\t\tif (container.is('.workFlowContents')) {\n\t\t\tthis.setContainer(container);\n\t\t} else {\n\t\t\tthis.setContainer(jQuery('.workFlowContents', container));\n\t\t}\n\t\tthis.initiateStep('1');\n\t\tthis.currentInstance.registerEvents();\n\t},\n\t/*\n\t * Function to initiate all the operations for a step\n\t * @params step value\n\t */\n\tinitiateStep: function (stepVal) {\n\t\tvar step = 'step' + stepVal;\n\t\tthis.activateHeader(step);\n\t\tvar currentInstance = this.getInstance(stepVal);\n\t\tthis.currentInstance = currentInstance;\n\t},\n\t/*\n\t * Function to activate the header based on the class\n\t * @params class name\n\t */\n\tactivateHeader: function (step) {\n\t\tvar headersContainer = jQuery('.crumbs ');\n\t\theadersContainer.find('.active').removeClass('active');\n\t\tjQuery('#' + step, headersContainer).addClass('active');\n\t},\n\t/*\n\t * Function to register the click event for next button\n\t */\n\tregisterFormSubmitEvent: function (form) {\n\t\tconst thisInstance = this;\n\t\tif (jQuery.isFunction(thisInstance.currentInstance.submit)) {\n\t\t\tform.on('submit', function (e) {\n\t\t\t\tlet specialValidation = true;\n\t\t\t\tif (jQuery.isFunction(thisInstance.currentInstance.isFormValidate)) {\n\t\t\t\t\tspecialValidation = thisInstance.currentInstance.isFormValidate();\n\t\t\t\t}\n\t\t\t\tif (jQuery(e.currentTarget).validationEngine('validate') && specialValidation) {\n\t\t\t\t\tthisInstance.currentInstance.submit().done(function (data) {\n\t\t\t\t\t\tthisInstance.getContainer().append(data);\n\t\t\t\t\t\tthisInstance.initiateStep((parseInt(thisInstance.getStepValue()) + 1));\n\t\t\t\t\t\tthisInstance.currentInstance.initialize();\n\t\t\t\t\t\tthisInstance.registerFormSubmitEvent(thisInstance.currentInstance.getContainer());\n\t\t\t\t\t\tthisInstance.currentInstance.registerEvents();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\te.preventDefault();\n\t\t\t})\n\t\t}\n\t},\n\tback: function () {\n\t\tvar step = this.getStepValue();\n\t\tvar prevStep = parseInt(step) - 1;\n\t\tthis.currentInstance.initialize();\n\t\tvar container = this.currentInstance.getContainer();\n\t\tvar workflowRecordElement = jQuery('[name=\"record\"]', container);\n\t\tvar workFlowId = workflowRecordElement.val();\n\t\tcontainer.remove();\n\t\tthis.initiateStep(prevStep);\n\t\tvar currentContainer = this.currentInstance.getContainer();\n\t\tcurrentContainer.show();\n\t\tjQuery('[name=\"record\"]', currentContainer).val(workFlowId);\n\t\tvar modulesList = jQuery('#moduleName', currentContainer);\n\t\tif (modulesList.length > 0 && workFlowId != '') {\n\t\t\tmodulesList.attr('disabled', 'disabled').trigger('change');\n\t\t}\n\t},\n\t/**\n\t * Get popup with value\n\t * @param container\n\t */\n\tgetPopUp(container) {\n\t\tif (typeof container === \"undefined\") {\n\t\t\tcontainer = this.getContainer();\n\t\t}\n\t\tcontainer.on('click', '.getPopupUi', (e) => {\n\t\t\tif (container.find('[name=\"execution_condition\"]').val() == 6) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tconst fieldValueElement = jQuery(e.currentTarget);\n\t\t\tconst fieldValue = fieldValueElement.val();\n\t\t\tconst fieldUiHolder = fieldValueElement.closest('.fieldUiHolder');\n\t\t\tlet valueType = fieldUiHolder.find('[name=\"valuetype\"]').val();\n\t\t\tif (valueType === '') {\n\t\t\t\tvalueType = 'rawtext';\n\t\t\t}\n\t\t\tconst conditionsContainer = fieldValueElement.closest('.js-conditions-container');\n\t\t\tconst conditionRow = fieldValueElement.closest('.js-conditions-row');\n\t\t\tvar clonedPopupUi = conditionsContainer.find('.popupUi').clone(true, true).removeClass('popupUi').addClass('clonedPopupUi');\n\t\t\tclonedPopupUi.find('select').addClass('select2');\n\t\t\tclonedPopupUi.find('.fieldValue').val(fieldValue);\n\t\t\tlet value;\n\t\t\tif (fieldValueElement.hasClass('date')) {\n\t\t\t\tclonedPopupUi.find('.textType').find('option[value=\"rawtext\"]').attr('data-ui', 'input');\n\t\t\t\tconst dataFormat = fieldValueElement.data('date-format');\n\t\t\t\tif (valueType === 'rawtext') {\n\t\t\t\t\tvalue = fieldValueElement.val();\n\t\t\t\t} else {\n\t\t\t\t\tvalue = '';\n\t\t\t\t}\n\t\t\t\tconst clonedDateElement = '<input type=\"text\" class=\"dateField fieldValue col-md-4 form-control\" value=\"' + value + '\" data-date-format=\"' + dataFormat + '\" data-input=\"true\" >'\n\t\t\t\tclonedPopupUi.find('.fieldValueContainer').prepend(clonedDateElement);\n\t\t\t} else if (fieldValueElement.hasClass('time')) {\n\t\t\t\tclonedPopupUi.find('.textType').find('option[value=\"rawtext\"]').attr('data-ui', 'input');\n\t\t\t\tif (valueType === 'rawtext') {\n\t\t\t\t\tvalue = fieldValueElement.val();\n\t\t\t\t} else {\n\t\t\t\t\tvalue = '';\n\t\t\t\t}\n\t\t\t\tconst clonedTimeElement = '<input type=\"text\" class=\"timepicker-default fieldValue col-md-4 form-control\" value=\"' + value + '\" data-input=\"true\" >'\n\t\t\t\tclonedPopupUi.find('.fieldValueContainer').prepend(clonedTimeElement);\n\t\t\t} else if (fieldValueElement.hasClass('boolean')) {\n\t\t\t\tclonedPopupUi.find('.textType').find('option[value=\"rawtext\"]').attr('data-ui', 'input');\n\t\t\t\tif (valueType === 'rawtext') {\n\t\t\t\t\tvalue = fieldValueElement.val();\n\t\t\t\t} else {\n\t\t\t\t\tvalue = '';\n\t\t\t\t}\n\t\t\t\tconst clonedBooleanElement = '<input type=\"checkbox\" class=\"fieldValue col-md-4 form-control\" value=\"' + value + '\" data-input=\"true\" >';\n\t\t\t\tclonedPopupUi.find('.fieldValueContainer').prepend(clonedBooleanElement);\n\t\t\t\tif (value === 'true:boolean' || value === '') {\n\t\t\t\t\tclonedPopupUi.find('.fieldValueContainer input').attr('checked', 'checked');\n\t\t\t\t} else {\n\t\t\t\t\tclonedPopupUi.find('.fieldValueContainer input').removeAttr('checked');\n\t\t\t\t}\n\t\t\t}\n\t\t\tconditionsContainer.find('.clonedPopUp').html(clonedPopupUi);\n\t\t\tconst clonedPopupElement = $('.clonedPopUp', conditionsContainer).find('.clonedPopupUi');\n\t\t\t$('.clonedPopupUi', conditionsContainer).on('shown.bs.modal', () => {\n\t\t\t\tconst data = $('.clonedPopupUi', conditionsContainer);\n\t\t\t\tdata.find('.clonedPopupUi').removeClass('d-none');\n\t\t\t\tconst moduleNameElement = conditionRow.find('[name=\"modulename\"]');\n\t\t\t\tif (moduleNameElement.length > 0) {\n\t\t\t\t\tconst moduleName = moduleNameElement.val();\n\t\t\t\t\tdata.find('.useFieldElement').addClass('d-none');\n\t\t\t\t\tdata.find('[name=\"' + moduleName + '\"]').removeClass('d-none');\n\t\t\t\t}\n\t\t\t\tApp.Fields.Picklist.changeSelectElementView(data);\n\t\t\t\tApp.Fields.Date.register(data);\n\t\t\t\tapp.registerEventForClockPicker(data);\n\t\t\t\tthis.postShowModalAction(data, valueType);\n\t\t\t\tthis.registerChangeFieldEvent(data);\n\t\t\t\tthis.registerSelectOptionEvent(data);\n\t\t\t\tthis.registerPopUpSaveEvent(data, fieldUiHolder);\n\t\t\t\tdata.find('.fieldValue').filter(':visible').trigger('focus');\n\t\t\t\tclonedPopupElement.find('[data-close-modal=\"modal\"], [data-dismiss=\"modal\"]').off('click').on('click', function (e) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t$(this).closest('.modal').removeClass('in').css('display', 'none');\n\t\t\t\t});\n\t\t\t});\n\t\t\tclonedPopupElement.modal();\n\t\t});\n\t},\n\tregisterRemoveModalEvent: function (data) {\n\t\tdata.on('click', '.closeModal', function (e) {\n\t\t\tdata.modal('hide');\n\t\t});\n\t},\n\tregisterPopUpSaveEvent: function (data, fieldUiHolder) {\n\t\tjQuery('[name=\"saveButton\"]', data).on('click', function (e) {\n\t\t\tvar valueType = jQuery('.textType', data).val();\n\n\t\t\tfieldUiHolder.find('[name=\"valuetype\"]').val(valueType);\n\t\t\tvar fieldValueElement = fieldUiHolder.find('.getPopupUi');\n\t\t\tif (valueType != 'rawtext') {\n\t\t\t\tfieldValueElement.removeAttr('data-validation-engine');\n\t\t\t\tfieldValueElement.removeClass('validate[funcCall[Vtiger_Base_Validator_Js.invokeValidation]]');\n\t\t\t} else {\n\t\t\t\tfieldValueElement.addClass('validate[funcCall[Vtiger_Base_Validator_Js.invokeValidation]]');\n\t\t\t\tfieldValueElement.attr('data-validation-engine', 'validate[funcCall[Vtiger_Base_Validator_Js.invokeValidation]]');\n\t\t\t}\n\t\t\tvar fieldType = data.find('.fieldValue').filter(':visible').attr('type');\n\t\t\tvar fieldValue = data.find('.fieldValue').filter(':visible').val();\n\t\t\t//For checkbox field type, handling fieldValue\n\t\t\tif (fieldType == 'checkbox') {\n\t\t\t\tif (data.find('.fieldValue').filter(':visible').is(':checked')) {\n\t\t\t\t\tfieldValue = 'true:boolean';\n\t\t\t\t} else {\n\t\t\t\t\tfieldValue = 'false:boolean';\n\t\t\t\t}\n\t\t\t}\n\t\t\tfieldValueElement.val(fieldValue);\n\t\t\tfieldValueElement.validationEngine('hide');\n\t\t\tdata.remove();\n\t\t});\n\t},\n\tregisterSelectOptionEvent: (data) => {\n\t\t$('.useField,.useFunction', data).on('change', (e) => {\n\t\t\tlet currentElement = $(e.currentTarget);\n\t\t\tlet newValue = currentElement.val();\n\t\t\tlet oldValue = data.find('.fieldValue').filter(':visible').val(), concatenatedValue;\n\t\t\tif (currentElement.hasClass('useField')) {\n\t\t\t\tif (oldValue != '') {\n\t\t\t\t\tconcatenatedValue = oldValue + ' ' + newValue;\n\t\t\t\t} else {\n\t\t\t\t\tconcatenatedValue = newValue;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconcatenatedValue = oldValue + newValue;\n\t\t\t}\n\t\t\tdata.find('.fieldValue').val(concatenatedValue);\n\t\t\tcurrentElement.val('').trigger('change.select2');\n\t\t});\n\t},\n\tregisterChangeFieldEvent: function (data) {\n\t\tjQuery('.textType', data).on('change', function (e) {\n\t\t\tvar valueType = jQuery(e.currentTarget).val();\n\t\t\tvar useFieldContainer = jQuery('.useFieldContainer', data);\n\t\t\tvar useFunctionContainer = jQuery('.useFunctionContainer', data);\n\t\t\tvar uiType = jQuery(e.currentTarget).find('option:selected').data('ui');\n\t\t\tjQuery('.fieldValue', data).hide();\n\t\t\tjQuery('[data-' + uiType + ']', data).show();\n\t\t\tif (valueType == 'fieldname') {\n\t\t\t\tuseFieldContainer.removeClass('d-none');\n\t\t\t\tuseFunctionContainer.addClass('d-none');\n\t\t\t} else if (valueType == 'expression') {\n\t\t\t\tuseFieldContainer.removeClass('d-none');\n\t\t\t\tuseFunctionContainer.removeClass('d-none');\n\t\t\t} else {\n\t\t\t\tuseFieldContainer.addClass('d-none');\n\t\t\t\tuseFunctionContainer.addClass('d-none');\n\t\t\t}\n\t\t\tjQuery('.helpmessagebox', data).addClass('d-none');\n\t\t\tjQuery('#' + valueType + '_help', data).removeClass('d-none');\n\t\t\tdata.find('.fieldValue').val('');\n\t\t});\n\t},\n\tpostShowModalAction: function (data, valueType) {\n\t\tif (valueType == 'fieldname') {\n\t\t\tjQuery('.useFieldContainer', data).removeClass('d-none');\n\t\t\tjQuery('.textType', data).val(valueType).trigger('change');\n\t\t} else if (valueType == 'expression') {\n\t\t\tjQuery('.useFieldContainer', data).removeClass('d-none');\n\t\t\tjQuery('.useFunctionContainer', data).removeClass('d-none');\n\t\t\tjQuery('.textType', data).val(valueType).trigger('change');\n\t\t}\n\t\tjQuery('#' + valueType + '_help', data).removeClass('d-none');\n\t\tvar uiType = jQuery('.textType', data).find('option:selected').data('ui');\n\t\tjQuery('.fieldValue', data).hide();\n\t\tjQuery('[data-' + uiType + ']', data).show();\n\t},\n\t/*\n\t * Function to register the click event for back step\n\t */\n\tregisterBackStepClickEvent: function () {\n\t\tvar thisInstance = this;\n\t\tvar container = this.getContainer();\n\t\tcontainer.on('click', '.backStep', function (e) {\n\t\t\tthisInstance.back();\n\t\t});\n\t},\n\tregisterEvents: function () {\n\t\tvar form = this.currentInstance.getContainer();\n\t\tthis.registerFormSubmitEvent(form);\n\t\tthis.registerBackStepClickEvent();\n\t}\n});\n\n"],"names":["Settings_Vtiger_Edit_Js","initiate","workFlowsContainer","element","step","Settings_Workflows_Edit_Js","instance","moduleClassName","window","container","currentInstance","getContainer","jQuery","val","is","setContainer","initiateStep","registerEvents","stepVal","activateHeader","getInstance","headersContainer","find","removeClass","addClass","form","thisInstance","isFunction","submit","on","e","specialValidation","isFormValidate","currentTarget","validationEngine","done","data","append","parseInt","getStepValue","initialize","registerFormSubmitEvent","preventDefault","prevStep","workflowRecordElement","workFlowId","remove","currentContainer","show","modulesList","length","attr","trigger","fieldValueElement","fieldValue","fieldUiHolder","closest","valueType","conditionsContainer","conditionRow","clonedPopupUi","clone","value","hasClass","dataFormat","clonedDateElement","prepend","clonedTimeElement","clonedBooleanElement","removeAttr","html","clonedPopupElement","$","moduleNameElement","moduleName","Fields","Picklist","changeSelectElementView","Date","register","registerEventForClockPicker","postShowModalAction","registerChangeFieldEvent","registerSelectOptionEvent","registerPopUpSaveEvent","filter","off","stopPropagation","css","modal","fieldType","currentElement","newValue","oldValue","concatenatedValue","useFieldContainer","useFunctionContainer","uiType","hide","back","registerBackStepClickEvent"],"mappings":"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"}