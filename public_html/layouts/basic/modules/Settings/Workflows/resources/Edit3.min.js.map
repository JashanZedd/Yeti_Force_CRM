{"version":3,"file":"Edit3.min.js","sources":["Edit3.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n * Contributor(s): YetiForce.com\n *************************************************************************************/\n'use strict';\n\nSettings_Workflows_Edit_Js(\"Settings_Workflows_Edit3_Js\", {}, {\n\tstep3Container: false,\n\tadvanceFilterInstance: false,\n\tconditionBuilderInstance: false,\n\tckEditorInstance: false,\n\tfieldValueMap: false,\n\tinit: function () {\n\t\tthis.initialize();\n\t},\n\t/**\n\t * Function to get the container which holds all the reports step1 elements\n\t * @return jQuery object\n\t */\n\tgetContainer: function () {\n\t\treturn this.step3Container;\n\t},\n\t/**\n\t * Function to set the reports step1 container\n\t * @params : element - which represents the reports step1 container\n\t * @return : current instance\n\t */\n\tsetContainer: function (element) {\n\t\tthis.step3Container = element;\n\t\treturn this;\n\t},\n\t/**\n\t * Function  to intialize the reports step1\n\t */\n\tinitialize: function (container) {\n\t\tif (typeof container === \"undefined\") {\n\t\t\tcontainer = $('#workflow_step3');\n\t\t}\n\t\tif (container.is('#workflow_step3')) {\n\t\t\tthis.setContainer(container);\n\t\t} else {\n\t\t\tthis.setContainer($('#workflow_step3'));\n\t\t}\n\t},\n\tregisterEditTaskEvent: function () {\n\t\tlet thisInstance = this,\n\t\t\tcontainer = this.getContainer();\n\t\tcontainer.on('click', '[data-url]', function (e) {\n\t\t\tlet currentElement = $(e.currentTarget),\n\t\t\t\tparams = currentElement.data('url'),\n\t\t\t\tprogressIndicatorElement = $.progressIndicator({\n\t\t\t\t\tposition: 'html',\n\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\tenabled: true\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\tapp.showModalWindow(null, params, function (data) {\n\t\t\t\tprogressIndicatorElement.progressIndicator({ 'mode': 'hide' });\n\t\t\t\tif (data) {\n\t\t\t\t\tlet clipboard = App.Fields.Text.registerCopyClipboard(data);\n\t\t\t\t\tcontainer.one('hidden.bs.modal', () => {\n\t\t\t\t\t\tclipboard.destroy();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tthisInstance.registerVTCreateTodoTaskEvents();\n\t\t\t\tvar taskType = $('#taskType').val();\n\t\t\t\tvar functionName = 'register' + taskType + 'Events';\n\t\t\t\tif (typeof thisInstance[functionName] !== \"undefined\") {\n\t\t\t\t\tthisInstance[functionName].apply(thisInstance);\n\t\t\t\t}\n\t\t\t\tthisInstance.registerSaveTaskSubmitEvent(taskType);\n\t\t\t\t$('#saveTask').validationEngine(app.validationEngineOptions);\n\t\t\t\tthisInstance.registerFillTaskFieldsEvent();\n\t\t\t\tthisInstance.registerCheckSelectDateEvent();\n\t\t\t\tApp.Tools.VariablesPanel.registerRefreshCompanyVariables(data);\n\t\t\t\tthisInstance.conditionBuilderInstance = new Vtiger_ConditionBuilder_Js(data.find('.js-condition-builder'), data.find('.js-source-module').val());\n\t\t\t\tthisInstance.conditionBuilderInstance.registerEvents();\n\t\t\t});\n\n\t\t});\n\t},\n\tregisterCheckSelectDateEvent: function () {\n\t\t$('[name=\"check_select_date\"]').on('change', function (e) {\n\t\t\tif ($(e.currentTarget).is(':checked')) {\n\t\t\t\t$('#checkSelectDateContainer').removeClass('d-none').addClass('show');\n\t\t\t} else {\n\t\t\t\t$('#checkSelectDateContainer').removeClass('show').addClass('d-none');\n\t\t\t}\n\t\t});\n\t},\n\t/**\n\t * Register save task submit event\n\t * @param {string} taskType\n\t */\n\tregisterSaveTaskSubmitEvent(taskType) {\n\t\t$('#saveTask').on('submit', (e) => {\n\t\t\tlet form = $(e.currentTarget);\n\t\t\tif (form.validationEngine('validate') === true) {\n\t\t\t\tlet customValidationFunctionName = taskType + 'CustomValidation';\n\t\t\t\tif (typeof this[customValidationFunctionName] !== \"undefined\") {\n\t\t\t\t\tlet result = this[customValidationFunctionName].apply(this);\n\t\t\t\t\tif (result !== true) {\n\t\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\t\ttitle: app.vtranslate('JS_MESSAGE'),\n\t\t\t\t\t\t\ttext: result,\n\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t});\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tlet preSaveActionFunctionName = 'preSave' + taskType;\n\t\t\t\tif (typeof this[preSaveActionFunctionName] !== \"undefined\") {\n\t\t\t\t\tthis[preSaveActionFunctionName].apply(this, [taskType]);\n\t\t\t\t}\n\t\t\t\tlet formData = form.serializeFormData();\n\t\t\t\tformData.entity_type = form.find('.createEntityModule:visible option:selected').val();\n\t\t\t\tAppConnector.request(formData).done((data) => {\n\t\t\t\t\tif (data.result) {\n\t\t\t\t\t\tthis.getTaskList();\n\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\te.preventDefault();\n\t\t});\n\t},\n\tVTUpdateFieldsTaskCustomValidation: function () {\n\t\treturn this.checkDuplicateFieldsSelected();\n\t},\n\tVTCreateEntityTaskCustomValidation: function () {\n\t\treturn this.checkDuplicateFieldsSelected();\n\t},\n\tcheckDuplicateFieldsSelected: function () {\n\t\tvar selectedFieldNames = $('#save_fieldvaluemapping').find('.js-conditions-row').find('[name=\"fieldname\"]');\n\t\tvar result = true;\n\t\tvar failureMessage = app.vtranslate('JS_SAME_FIELDS_SELECTED_MORE_THAN_ONCE');\n\t\t$.each(selectedFieldNames, function (i, ele) {\n\t\t\tvar fieldName = $(ele).attr(\"value\");\n\t\t\tvar fields = $(\"[name=\" + fieldName + \"]\").not(':hidden');\n\t\t\tif (fields.length > 1) {\n\t\t\t\tresult = failureMessage;\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\t\treturn result;\n\t},\n\tpreSaveVTUpdateFieldsTask: function (tasktype) {\n\t\tvar values = this.getValues(tasktype);\n\t\t$('[name=\"field_value_mapping\"]').val(JSON.stringify(values));\n\t},\n\tpreSaveVTCreateEntityTask: function (tasktype) {\n\t\tvar values = this.getValues(tasktype);\n\t\t$('[name=\"field_value_mapping\"]').val(JSON.stringify(values));\n\t},\n\tpreSaveVTEmailTask: function (tasktype) {\n\t\tvar textAreaElement = $('#content');\n\t\t//To keep the plain text value to the textarea which need to be\n\t\t//sent to server\n\t\ttextAreaElement.val(CKEDITOR.instances['content'].getData());\n\t},\n\tpreSaveVTUpdateRelatedFieldTask: function (tasktype) {\n\t\tvar values = this.getValues(tasktype);\n\t\t$('[name=\"field_value_mapping\"]').val(JSON.stringify(values));\n\t},\n\tpreSaveSumFieldFromDependent: function (tasktype) {\n\t\t$('[name=\"conditions\"]').val(JSON.stringify(this.conditionBuilderInstance.getConditions()));\n\t},\n\t/**\n\t * Function to check if the field selected is empty field\n\t * @params : select element which represents the field\n\t * @return : boolean true/false\n\t */\n\tisEmptyFieldSelected: function (fieldSelect) {\n\t\tvar selectedOption = fieldSelect.find('option:selected');\n\t\t//assumption that empty field will be having value none\n\t\tif (selectedOption.val() === 'none' || !selectedOption.val()) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n\tgetVTCreateEntityTaskFieldList: function () {\n\t\treturn new Array('fieldname', 'value', 'valuetype', 'modulename');\n\t},\n\tgetVTUpdateFieldsTaskFieldList: function () {\n\t\treturn new Array('fieldname', 'value', 'valuetype');\n\t},\n\tgetVTUpdateRelatedFieldTaskFieldList: function () {\n\t\treturn new Array('fieldname', 'value', 'valuetype');\n\t},\n\t/**\n\t * Get values\n\t * @param {string} tasktype\n\t * @returns {Array}\n\t */\n\tgetValues(tasktype) {\n\t\tlet fieldListFunctionName = 'get' + tasktype + 'FieldList',\n\t\t\tfieldList = [];\n\t\tif (typeof this[fieldListFunctionName] !== \"undefined\") {\n\t\t\tfieldList = this[fieldListFunctionName].apply()\n\t\t}\n\n\t\tlet values = [];\n\t\t$('.js-conditions-row', $('#save_fieldvaluemapping')).each((i, conditionDomElement) => {\n\t\t\tlet rowElement = $(conditionDomElement),\n\t\t\t\tfieldSelectElement = $('[name=\"fieldname\"]', rowElement),\n\t\t\t\tvalueSelectElement = $('[data-value=\"value\"]', rowElement);\n\t\t\t//To not send empty fields to server\n\t\t\tif (this.isEmptyFieldSelected(fieldSelectElement)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tlet fieldDataInfo = fieldSelectElement.find('option:selected').data('fieldinfo'),\n\t\t\t\tfieldType = fieldDataInfo.type,\n\t\t\t\trowValues = {},\n\t\t\t\tkey,\n\t\t\t\tfield;\n\t\t\tif (fieldType === 'owner') {\n\t\t\t\tfor (key in fieldList) {\n\t\t\t\t\tfield = fieldList[key];\n\t\t\t\t\tif (field == 'value' && valueSelectElement.is('select')) {\n\t\t\t\t\t\trowValues[field] = valueSelectElement.find('option:selected').val();\n\t\t\t\t\t} else {\n\t\t\t\t\t\trowValues[field] = $('[name=\"' + field + '\"]', rowElement).val();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (fieldType === 'picklist' || fieldType == 'multipicklist') {\n\t\t\t\tfor (key in fieldList) {\n\t\t\t\t\tfield = fieldList[key];\n\t\t\t\t\tif (field === 'value' && valueSelectElement.is('input')) {\n\t\t\t\t\t\tlet pickListValues = valueSelectElement.data('picklistvalues'),\n\t\t\t\t\t\t\tvaluesArr = valueSelectElement.val().split(','),\n\t\t\t\t\t\t\tnewValuesArr = [];\n\t\t\t\t\t\tfor (let j = 0; j < valuesArr.length; j++) {\n\t\t\t\t\t\t\tif (typeof pickListValues[valuesArr[j]] !== \"undefined\") {\n\t\t\t\t\t\t\t\tnewValuesArr.push(pickListValues[valuesArr[j]]);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tnewValuesArr.push(valuesArr[j]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\trowValues[field] = newValuesArr.join(',');\n\t\t\t\t\t} else if (field === 'value' && valueSelectElement.is('select') && fieldType == 'picklist') {\n\t\t\t\t\t\trowValues[field] = valueSelectElement.val();\n\t\t\t\t\t} else if (field === 'value' && valueSelectElement.is('select') && fieldType == 'multipicklist') {\n\t\t\t\t\t\tvar value = valueSelectElement.val();\n\t\t\t\t\t\tif (value === null) {\n\t\t\t\t\t\t\trowValues[field] = value;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\trowValues[field] = value.join(',');\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\trowValues[field] = $('[name=\"' + field + '\"]', rowElement).val();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\tfor (key in fieldList) {\n\t\t\t\t\tfield = fieldList[key];\n\t\t\t\t\tif (field == 'value') {\n\t\t\t\t\t\trowValues[field] = valueSelectElement.val();\n\t\t\t\t\t} else {\n\t\t\t\t\t\trowValues[field] = $('[name=\"' + field + '\"]', rowElement).val();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif ($('[name=\"valuetype\"]', rowElement).val() == 'false' || ($('[name=\"valuetype\"]', rowElement).length == 0)) {\n\t\t\t\trowValues['valuetype'] = 'rawtext';\n\t\t\t}\n\n\t\t\tvalues.push(rowValues);\n\t\t});\n\t\treturn values;\n\t},\n\tgetTaskList: function () {\n\t\tvar container = this.getContainer();\n\t\tvar params = {\n\t\t\tmodule: app.getModuleName(),\n\t\t\tparent: app.getParentModuleName(),\n\t\t\tview: 'TasksList',\n\t\t\trecord: $('[name=\"record\"]', container).val()\n\t\t}\n\t\tvar progressIndicatorElement = $.progressIndicator({\n\t\t\t'position': 'html',\n\t\t\t'blockInfo': {\n\t\t\t\t'enabled': true\n\t\t\t}\n\t\t});\n\t\tAppConnector.request(params).done(function (data) {\n\t\t\t$('#taskListContainer').html(data);\n\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t});\n\t},\n\t/**\n\t * Function to get ckEditorInstance\n\t */\n\tgetckEditorInstance: function () {\n\t\tif (this.ckEditorInstance === false) {\n\t\t\tthis.ckEditorInstance = new App.Fields.Text.Editor();\n\t\t}\n\t\treturn this.ckEditorInstance;\n\t},\n\tregisterTaskStatusChangeEvent: function () {\n\t\tvar container = this.getContainer();\n\t\tcontainer.on('change', '.taskStatus', function (e) {\n\t\t\tvar currentStatusElement = $(e.currentTarget);\n\t\t\tvar url = currentStatusElement.data('statusurl');\n\t\t\tif (currentStatusElement.is(':checked')) {\n\t\t\t\turl = url + '&status=true';\n\t\t\t} else {\n\t\t\t\turl = url + '&status=false';\n\t\t\t}\n\t\t\tvar progressIndicatorElement = $.progressIndicator({\n\t\t\t\t'position': 'html',\n\t\t\t\t'blockInfo': {\n\t\t\t\t\t'enabled': true\n\t\t\t\t}\n\t\t\t});\n\t\t\tAppConnector.request(url).done(function (data) {\n\t\t\t\tif (data.result == \"ok\") {\n\t\t\t\t\tvar params = {\n\t\t\t\t\t\ttitle: app.vtranslate('JS_MESSAGE'),\n\t\t\t\t\t\ttext: app.vtranslate('JS_STATUS_CHANGED_SUCCESSFULLY'),\n\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t};\n\t\t\t\t\tVtiger_Helper_Js.showPnotify(params);\n\t\t\t\t}\n\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t});\n\t\t\te.stopImmediatePropagation();\n\t\t});\n\t},\n\tregisterTaskDeleteEvent: function () {\n\t\tvar thisInstance = this;\n\t\tvar container = this.getContainer();\n\t\tcontainer.on('click', '.deleteTask', function (e) {\n\t\t\tvar message = app.vtranslate('LBL_DELETE_CONFIRMATION');\n\t\t\tVtiger_Helper_Js.showConfirmationBox({\n\t\t\t\t'message': message\n\t\t\t}).done(function () {\n\t\t\t\tvar currentElement = $(e.currentTarget);\n\t\t\t\tvar deleteUrl = currentElement.data('deleteurl');\n\t\t\t\tAppConnector.request(deleteUrl).done(function (data) {\n\t\t\t\t\tif (data.result == 'ok') {\n\t\t\t\t\t\tthisInstance.getTaskList();\n\t\t\t\t\t\tvar params = {\n\t\t\t\t\t\t\ttitle: app.vtranslate('JS_MESSAGE'),\n\t\t\t\t\t\t\ttext: app.vtranslate('JS_TASK_DELETED_SUCCESSFULLY'),\n\t\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t\t};\n\t\t\t\t\t\tVtiger_Helper_Js.showPnotify(params);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t},\n\tregisterFillTaskFromEmailFieldEvent: function () {\n\t\t$('#saveTask').on('change', '#fromEmailOption', function (e) {\n\t\t\tvar currentElement = $(e.currentTarget);\n\t\t\tvar inputElement = currentElement.closest('.row').find('.fields');\n\t\t\tinputElement.val(currentElement.val());\n\t\t})\n\t},\n\tregisterFillTaskFieldsEvent: function () {\n\t\t$('#saveTask').on('change', '.task-fields', function (e) {\n\t\t\tvar currentElement = $(e.currentTarget);\n\t\t\tvar inputElement = currentElement.closest('.row').find('.fields');\n\t\t\tvar oldValue = inputElement.val();\n\t\t\tvar newValue = oldValue + currentElement.val();\n\t\t\tinputElement.val(newValue);\n\t\t})\n\t},\n\tregisterFillMailContentEvent: function () {\n\t\t$('#task-fieldnames,#task_timefields,#task-templates').on('change', function (e) {\n\t\t\tvar textarea = CKEDITOR.instances.content;\n\t\t\tvar value = $(e.currentTarget).val();\n\t\t\tif (textarea != undefined) {\n\t\t\t\ttextarea.insertHtml(value);\n\t\t\t} else if ($('textarea[name=\"content\"]')) {\n\t\t\t\tvar textArea = $('textarea[name=\"content\"]');\n\t\t\t\ttextArea.insertAtCaret(value);\n\t\t\t}\n\t\t});\n\t},\n\tregisterVTEmailTaskEvents: function () {\n\t\tvar textAreaElement = $('#content');\n\t\tvar ckEditorInstance = this.getckEditorInstance();\n\t\tckEditorInstance.loadEditor(textAreaElement);\n\t\tthis.registerFillMailContentEvent();\n\t\tthis.registerFillTaskFromEmailFieldEvent();\n\t\tthis.registerCcAndBccEvents();\n\t},\n\tregisterVTCreateTodoTaskEvents: function () {\n\t\tapp.registerEventForClockPicker();\n\t},\n\tregisterVTUpdateFieldsTaskEvents: function () {\n\t\tvar thisInstance = this;\n\t\tthis.registerAddFieldEvent();\n\t\tthis.registerDeleteConditionEvent();\n\t\tthis.registerFieldChange();\n\t\tthis.fieldValueMap = false;\n\t\tif ($('#fieldValueMapping').val() != '') {\n\t\t\tthis.fieldValueReMapping();\n\t\t}\n\t\tvar fields = $('#save_fieldvaluemapping').find('select[name=\"fieldname\"]');\n\t\t$.each(fields, function (i, field) {\n\t\t\tthisInstance.loadFieldSpecificUi($(field));\n\t\t});\n\t\tthis.getPopUp($('#saveTask'));\n\t},\n\tregisterVTUpdateRelatedFieldTaskEvents: function () {\n\t\tvar thisInstance = this;\n\t\tthis.registerAddFieldEvent();\n\t\tthis.registerDeleteConditionEvent();\n\t\tthis.registerFieldChange();\n\t\tthis.fieldValueMap = false;\n\t\tif ($('#fieldValueMapping').val() != '') {\n\t\t\tthis.fieldValueReMapping();\n\t\t}\n\t\tvar fields = $('#save_fieldvaluemapping').find('select[name=\"fieldname\"]');\n\t\t$.each(fields, function (i, field) {\n\t\t\tthisInstance.loadFieldSpecificUi($(field));\n\t\t});\n\t\tthis.getPopUp($('#saveTask'));\n\t},\n\t/**\n\t * Add field\n\t * @param {jQuery|null} replaceElement - if we want to replace existing field container with new one\n\t */\n\taddField(replaceElement = null) {\n\t\tconst newAddFieldContainer = $('.js-add-basic-field-container').clone(true, true).removeClass('js-add-basic-field-container d-none').addClass('js-conditions-row');\n\t\t$('select', newAddFieldContainer).addClass('select2');\n\t\tif (replaceElement === null) {\n\t\t\t$('#save_fieldvaluemapping').append(newAddFieldContainer);\n\t\t} else {\n\t\t\treplaceElement.replaceWith(newAddFieldContainer);\n\t\t}\n\t\t//change in to select elements\n\t\tApp.Fields.Picklist.changeSelectElementView(newAddFieldContainer);\n\t},\n\t/**\n\t * Register add field event\n\t */\n\tregisterAddFieldEvent() {\n\t\t$('#addFieldBtn').on('click', (e) => {\n\t\t\tthis.addField();\n\t\t});\n\t},\n\tregisterDeleteConditionEvent() {\n\t\t$('#saveTask').on('click', '.js-condition-delete', (e) => {\n\t\t\t$(e.currentTarget).closest('.js-conditions-row').remove();\n\t\t});\n\t},\n\t/**\n\t * Function which will register field change event\n\t */\n\tregisterFieldChange() {\n\t\t$('#saveTask').on('change', 'select[name=\"fieldname\"]', (e) => {\n\t\t\tconst selectedElement = $(e.currentTarget);\n\t\t\tconst conditionRow = selectedElement.closest('.js-conditions-row');\n\t\t\tif (selectedElement.val() !== 'none' && selectedElement.val()) {\n\t\t\t\tvar moduleNameElement = conditionRow.find('[name=\"modulename\"]');\n\t\t\t\tif (moduleNameElement.length > 0) {\n\t\t\t\t\tvar selectedOptionFieldInfo = selectedElement.find('option:selected').data('fieldinfo');\n\t\t\t\t\tvar type = selectedOptionFieldInfo.type;\n\t\t\t\t\tif (type == 'picklist' || type == 'multipicklist') {\n\t\t\t\t\t\tvar selectElement = $('select.createEntityModule:not(:disabled)');\n\t\t\t\t\t\tvar moduleName = selectElement.val();\n\t\t\t\t\t\tmoduleNameElement.val(moduleName).change().prop('disabled', true);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.loadFieldSpecificUi(selectedElement);\n\t\t\t} else {\n\t\t\t\tthis.addField(conditionRow);\n\t\t\t}\n\t\t});\n\t},\n\tgetModuleName: function () {\n\t\treturn app.getModuleName();\n\t},\n\tgetFieldValueMapping: function () {\n\t\tvar fieldValueMap = this.fieldValueMap;\n\t\tif (fieldValueMap != false) {\n\t\t\treturn fieldValueMap;\n\t\t} else {\n\t\t\treturn '';\n\t\t}\n\t},\n\tfieldValueReMapping: function () {\n\t\tvar object = JSON.parse($('#fieldValueMapping').val());\n\t\tvar fieldValueReMap = {};\n\n\t\t$.each(object, function (i, array) {\n\t\t\tfieldValueReMap[array.fieldname] = {};\n\t\t\tvar values = {}\n\t\t\t$.each(array, function (key, value) {\n\t\t\t\tvalues[key] = value;\n\t\t\t});\n\t\t\tfieldValueReMap[array.fieldname] = values\n\t\t});\n\t\tthis.fieldValueMap = fieldValueReMap;\n\t},\n\t/**\n\t * Load field specific UI\n\t * @param {jQuery} fieldSelect\n\t * @returns this\n\t */\n\tloadFieldSpecificUi(fieldSelect) {\n\t\tconst selectedOption = fieldSelect.find('option:selected');\n\t\tconst row = fieldSelect.closest('div.js-conditions-row');\n\t\tconst fieldUiHolder = row.find('.fieldUiHolder');\n\t\tconst fieldInfo = selectedOption.data('fieldinfo');\n\t\tconst fieldValueMapping = this.getFieldValueMapping();\n\t\tlet selectField = '';\n\t\tif (fieldValueMapping && typeof fieldValueMapping[fieldInfo.name] !== \"undefined\") {\n\t\t\tselectField = fieldValueMapping[fieldInfo.name];\n\t\t} else if (fieldValueMapping && typeof fieldValueMapping[fieldSelect.val()] !== \"undefined\") {\n\t\t\tselectField = fieldValueMapping[fieldSelect.val()];\n\t\t}\n\t\tif (selectField) {\n\t\t\tfieldInfo.value = selectField['value'];\n\t\t\tfieldInfo.workflow_valuetype = selectField['valuetype'];\n\t\t} else {\n\t\t\tfieldInfo.workflow_valuetype = 'rawtext';\n\t\t}\n\t\tconst moduleName = this.getModuleName();\n\t\tconst fieldModel = Vtiger_Field_Js.getInstance(fieldInfo, moduleName);\n\t\tthis.fieldModelInstance = fieldModel;\n\t\tconst fieldSpecificUi = this.getFieldSpecificUi(fieldSelect);\n\t\t//remove validation since we dont need validations for all eleements\n\t\t// Both filter and find is used since we dont know whether the element is enclosed in some conainer like currency\n\t\tlet fieldName = fieldModel.getName();\n\t\tif (fieldModel.getType() == 'multipicklist') {\n\t\t\tfieldName = fieldName + \"[]\";\n\t\t}\n\t\tfieldSpecificUi.filter('[name=\"' + fieldName + '\"]').attr('data-value', 'value');\n\t\tfieldSpecificUi.find('[name=\"' + fieldName + '\"]').attr('data-value', 'value');\n\t\tfieldSpecificUi.filter('[name=\"valuetype\"]').removeAttr('data-validation-engine');\n\t\tfieldSpecificUi.find('[name=\"valuetype\"]').removeAttr('data-validation-engine');\n\t\t//If the workflowValueType is rawtext then only validation should happen\n\t\tconst workflowValueType = fieldSpecificUi.filter('[name=\"valuetype\"]').val();\n\t\tif (workflowValueType != 'rawtext' && typeof workflowValueType !== \"undefined\") {\n\t\t\tfieldSpecificUi.filter('[name=\"' + fieldName + '\"]').removeAttr('data-validation-engine');\n\t\t\tfieldSpecificUi.find('[name=\"' + fieldName + '\"]').removeAttr('data-validation-engine');\n\t\t}\n\t\tfieldUiHolder.html(fieldSpecificUi);\n\t\tif (fieldSpecificUi.is('input.select2') || fieldSpecificUi.is('select')) {\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(fieldSpecificUi);\n\t\t} else if (fieldSpecificUi.is('input.dateField')) {\n\t\t\tApp.Fields.Date.register(fieldSpecificUi);\n\t\t} else if (fieldSpecificUi.is('input.dateRangeField')) {\n\t\t\tApp.Fields.Date.registerRange(fieldSpecificUi, { ranges: false });\n\t\t}\n\t\treturn this;\n\t},\n\t/**\n\t * Functiont to get the field specific ui for the selected field\n\t * @prarms : fieldSelectElement - select element which will represents field list\n\t * @return : jquery object which represents the ui for the field\n\t */\n\tgetFieldSpecificUi: function (fieldSelectElement) {\n\t\tvar fieldModel = this.fieldModelInstance;\n\t\treturn $(fieldModel.getUiTypeSpecificHtml())\n\t},\n\tregisterVTCreateEventTaskEvents: function () {\n\t\tapp.registerEventForClockPicker();\n\t},\n\tregisterVTCreateEntityTaskEvents: function () {\n\t\tthis.registerChangeCreateEntityEvent();\n\t\tthis.registerVTUpdateFieldsTaskEvents();\n\t},\n\tregisterChangeCreateEntityEvent: function () {\n\t\tvar thisInstance = this;\n\t\t$('[name=\"mappingPanel\"]').on('change', function (e) {\n\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\tapp.setMainParams('mappingPanel', currentTarget.val())\n\t\t\t$('#addCreateEntityContainer').html('');\n\t\t\tvar hideElementByClass = $('.' + currentTarget.data('hide'));\n\t\t\tvar showElementByClass = $('.' + currentTarget.data('show'));\n\t\t\tvar taskFields = app.getMainParams('taskFields', true);\n\t\t\thideElementByClass.addClass('d-none').find('input,select').each(function (e, n) {\n\t\t\t\tvar element = $(this);\n\t\t\t\tvar name = element.attr('name');\n\t\t\t\tif ($.inArray(name, taskFields) >= 0) {\n\t\t\t\t\tif (element.is('select')) {\n\t\t\t\t\t\telement.val('').trigger('change');\n\t\t\t\t\t}\n\t\t\t\t\telement.prop('disabled', true);\n\t\t\t\t}\n\t\t\t});\n\t\t\tshowElementByClass.removeClass('d-none').find('input,select').each(function (e, n) {\n\t\t\t\tvar element = $(this);\n\t\t\t\tvar name = element.attr('name');\n\t\t\t\tif ($.inArray(name, taskFields) >= 0) {\n\t\t\t\t\telement.prop('disabled', false);\n\t\t\t\t\tif (element.is('select')) {\n\t\t\t\t\t\telement.val('').trigger('change');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\t$('.createEntityModule').on('change', function (e) {\n\t\t\tvar params = {\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\tview: 'CreateEntity',\n\t\t\t\tfor_workflow: $('[name=\"for_workflow\"]').val(),\n\t\t\t\tmappingPanel: app.getMainParams('mappingPanel')\n\t\t\t}\n\t\t\tvar relatedModule = $(e.currentTarget).val();\n\t\t\tif (relatedModule) {\n\t\t\t\tparams['relatedModule'] = relatedModule;\n\t\t\t}\n\t\t\tvar progressIndicatorElement = $.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\tprogressIndicatorElement.progressIndicator({ 'mode': 'hide' })\n\t\t\t\tvar createEntityContainer = $('#addCreateEntityContainer');\n\t\t\t\tcreateEntityContainer.html(data);\n\t\t\t\tApp.Fields.Picklist.changeSelectElementView(createEntityContainer);\n\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(createEntityContainer.find('.select2'));\n\t\t\t\tthisInstance.registerAddFieldEvent();\n\t\t\t\tthisInstance.fieldValueMap = false;\n\t\t\t\tif ($('#fieldValueMapping').val() != '') {\n\t\t\t\t\tthis.fieldValueReMapping();\n\t\t\t\t}\n\t\t\t\tvar fields = $('#save_fieldvaluemapping').find('select[name=\"fieldname\"]');\n\t\t\t\t$.each(fields, function (i, field) {\n\t\t\t\t\tthisInstance.loadFieldSpecificUi($(field));\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t},\n\t/**\n\t * Function which will change the UI styles based on recurring type\n\t * @params - recurringType - which recurringtype is selected\n\t */\n\tchangeRecurringTypesUIStyles: function (recurringType) {\n\t\tif (recurringType == 'Daily' || recurringType == 'Yearly') {\n\t\t\t$('#repeatWeekUI').removeClass('show').addClass('d-none');\n\t\t\t$('#repeatMonthUI').removeClass('show').addClass('d-none');\n\t\t} else if (recurringType == 'Weekly') {\n\t\t\t$('#repeatWeekUI').removeClass('d-none').addClass('show');\n\t\t\t$('#repeatMonthUI').removeClass('show').addClass('d-none');\n\t\t} else if (recurringType == 'Monthly') {\n\t\t\t$('#repeatWeekUI').removeClass('show').addClass('d-none');\n\t\t\t$('#repeatMonthUI').removeClass('d-none').addClass('show');\n\t\t}\n\t},\n\tcheckHiddenStatusofCcandBcc: function () {\n\t\tvar ccLink = $('#ccLink');\n\t\tvar bccLink = $('#bccLink');\n\t\tif (ccLink.hasClass('d-none') && bccLink.hasClass('d-none')) {\n\t\t\tccLink.closest('div.row').addClass('d-none');\n\t\t}\n\t},\n\t/*\n\t * Function to register the events for bcc and cc links\n\t */\n\tregisterCcAndBccEvents: function () {\n\t\tvar thisInstance = this;\n\t\t$('#ccLink').on('click', function (e) {\n\t\t\tvar ccContainer = $('#ccContainer');\n\t\t\tccContainer.removeClass('d-none');\n\t\t\tvar taskFieldElement = ccContainer.find('select.task-fields');\n\t\t\ttaskFieldElement.addClass('select2');\n\t\t\tApp.Fields.Picklist.changeSelectElementView(taskFieldElement);\n\t\t\t$(e.currentTarget).addClass('d-none');\n\t\t\tthisInstance.checkHiddenStatusofCcandBcc();\n\t\t});\n\t\t$('#bccLink').on('click', function (e) {\n\t\t\tvar bccContainer = $('#bccContainer');\n\t\t\tbccContainer.removeClass('d-none');\n\t\t\tvar taskFieldElement = bccContainer.find('select.task-fields');\n\t\t\ttaskFieldElement.addClass('select2');\n\t\t\tApp.Fields.Picklist.changeSelectElementView(taskFieldElement);\n\t\t\t$(e.currentTarget).addClass('d-none');\n\t\t\tthisInstance.checkHiddenStatusofCcandBcc();\n\t\t});\n\t},\n\tregisterEvents: function () {\n\t\tvar container = this.getContainer();\n\t\tApp.Fields.Picklist.changeSelectElementView(container);\n\t\tthis.registerEditTaskEvent();\n\t\tthis.registerTaskStatusChangeEvent();\n\t\tthis.registerTaskDeleteEvent();\n\t}\n});\n\n//http://stackoverflow.com/questions/946534/insert-text-into-textarea-with-jquery\n$.fn.extend({\n\tinsertAtCaret: function (myValue) {\n\t\treturn this.each(function (i) {\n\t\t\tif (document.selection) {\n\t\t\t\t//For browsers like Internet Explorer\n\t\t\t\tthis.focus();\n\t\t\t\tvar sel = document.selection.createRange();\n\t\t\t\tsel.text = myValue;\n\t\t\t\tthis.focus();\n\t\t\t} else if (this.selectionStart || this.selectionStart == '0') {\n\t\t\t\t//For browsers like Firefox and Webkit based\n\t\t\t\tvar startPos = this.selectionStart;\n\t\t\t\tvar endPos = this.selectionEnd;\n\t\t\t\tvar scrollTop = this.scrollTop;\n\t\t\t\tthis.value = this.value.substring(0, startPos) + myValue + this.value.substring(endPos, this.value.length);\n\t\t\t\tthis.focus();\n\t\t\t\tthis.selectionStart = startPos + myValue.length;\n\t\t\t\tthis.selectionEnd = startPos + myValue.length;\n\t\t\t\tthis.scrollTop = scrollTop;\n\t\t\t} else {\n\t\t\t\tthis.value += myValue;\n\t\t\t\tthis.focus();\n\t\t\t}\n\t\t});\n\t}\n});\n"],"names":["Settings_Workflows_Edit_Js","initialize","step3Container","element","container","$","is","setContainer","thisInstance","getContainer","on","e","currentElement","currentTarget","params","data","progressIndicatorElement","progressIndicator","showModalWindow","clipboard","App","Fields","Text","registerCopyClipboard","one","destroy","registerVTCreateTodoTaskEvents","taskType","val","functionName","apply","registerSaveTaskSubmitEvent","validationEngine","app","validationEngineOptions","registerFillTaskFieldsEvent","registerCheckSelectDateEvent","Tools","VariablesPanel","registerRefreshCompanyVariables","conditionBuilderInstance","Vtiger_ConditionBuilder_Js","find","registerEvents","removeClass","addClass","form","customValidationFunctionName","result","showPnotify","vtranslate","preventDefault","preSaveActionFunctionName","formData","serializeFormData","entity_type","request","done","getTaskList","hideModalWindow","checkDuplicateFieldsSelected","selectedFieldNames","failureMessage","each","i","ele","fieldName","attr","fields","not","length","tasktype","values","getValues","JSON","stringify","textAreaElement","CKEDITOR","instances","getData","getConditions","fieldSelect","selectedOption","Array","fieldListFunctionName","fieldList","conditionDomElement","rowElement","fieldSelectElement","valueSelectElement","isEmptyFieldSelected","fieldDataInfo","fieldType","type","rowValues","key","field","pickListValues","valuesArr","split","newValuesArr","j","push","join","value","getModuleName","getParentModuleName","html","mode","ckEditorInstance","Editor","currentStatusElement","url","stopImmediatePropagation","message","showConfirmationBox","deleteUrl","inputElement","closest","oldValue","newValue","textarea","content","undefined","insertHtml","textArea","insertAtCaret","getckEditorInstance","loadEditor","registerFillMailContentEvent","registerFillTaskFromEmailFieldEvent","registerCcAndBccEvents","registerEventForClockPicker","registerAddFieldEvent","registerDeleteConditionEvent","registerFieldChange","fieldValueMap","fieldValueReMapping","loadFieldSpecificUi","getPopUp","replaceElement","newAddFieldContainer","clone","append","replaceWith","Picklist","changeSelectElementView","addField","remove","selectedElement","conditionRow","moduleNameElement","selectedOptionFieldInfo","selectElement","moduleName","change","prop","object","parse","fieldValueReMap","array","fieldname","row","fieldUiHolder","fieldInfo","fieldValueMapping","getFieldValueMapping","selectField","name","workflow_valuetype","fieldModel","Vtiger_Field_Js","getInstance","fieldModelInstance","fieldSpecificUi","getFieldSpecificUi","getName","getType","filter","removeAttr","workflowValueType","showSelect2ElementView","Date","register","registerRange","ranges","getUiTypeSpecificHtml","registerChangeCreateEntityEvent","registerVTUpdateFieldsTaskEvents","setMainParams","hideElementByClass","showElementByClass","taskFields","getMainParams","n","inArray","trigger","relatedModule","createEntityContainer","recurringType","ccLink","bccLink","hasClass","ccContainer","taskFieldElement","checkHiddenStatusofCcandBcc","bccContainer","registerEditTaskEvent","registerTaskStatusChangeEvent","registerTaskDeleteEvent","fn","extend","myValue","document","selection","focus","sel","createRange","text","selectionStart","startPos","endPos","selectionEnd","scrollTop","substring"],"mappings":"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"}