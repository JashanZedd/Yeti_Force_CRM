{"version":3,"file":"Roles.min.js","sources":["Roles.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n *************************************************************************************/\n'use strict';\n\nvar Settings_Roles_Js = {\n\n\tnewPriviliges: false,\n\n\tinitDeleteView: function () {\n\t\tjQuery('#roleDeleteForm').validationEngine(app.validationEngineOptions);\n\n\t\tjQuery('[data-action=\"popup\"]').on('click', function (e) {\n\t\t\te.preventDefault();\n\t\t\tvar target = $(e.currentTarget);\n\t\t\tvar field = target.data('field');\n\n\t\t\tvar popupInstance = Vtiger_Popup_Js.getInstance();\n\t\t\tpopupInstance.show(target.data('url'));\n\t\t\tpopupInstance.retrieveSelectedRecords(function (data) {\n\t\t\t\ttry {\n\t\t\t\t\tdata = JSON.parse(data);\n\t\t\t\t} catch (e) {\n\t\t\t\t}\n\n\t\t\t\tif (typeof data == 'object') {\n\t\t\t\t\tjQuery('[name=\"' + field + '_display\"]').val(data.label);\n\t\t\t\t\tdata = data.value;\n\t\t\t\t}\n\t\t\t\tjQuery('[name=\"' + field + '\"]').val(data);\n\t\t\t});\n\t\t});\n\n\t\tjQuery('#clearRole').on('click', function (e) {\n\t\t\tjQuery('[name=\"transfer_record_display\"]').val('');\n\t\t\tjQuery('[name=\"transfer_record\"]').val('');\n\t\t});\n\t},\n\n\tinitPopupView: function () {\n\t\tjQuery('.roleEle').on('click', function (e) {\n\t\t\tvar target = $(e.currentTarget);\n\t\t\t// jquery_windowmsg plugin expects second parameter to be string.\n\t\t\tjQuery.triggerParentEvent('postSelection', JSON.stringify({\n\t\t\t\tvalue: target.closest('li').data('roleid'),\n\t\t\t\tlabel: target.text()\n\t\t\t}));\n\t\t\tself.close();\n\t\t});\n\t},\n\n\tinitEditView: function () {\n\n\t\tfunction applyMoveChanges(roleid, parent_roleid) {\n\t\t\tvar params = {\n\t\t\t\tmodule: 'Roles',\n\t\t\t\taction: 'MoveAjax',\n\t\t\t\tparent: 'Settings',\n\t\t\t\trecord: roleid,\n\t\t\t\tparent_roleid: parent_roleid\n\t\t\t}\n\n\t\t\tAppConnector.request(params).done(function (res) {\n\t\t\t\tif (!res.success) {\n\t\t\t\t\tapp.showAlert(app.vtranslate('JS_FAILED_TO_SAVE'));\n\t\t\t\t\twindow.location.reload();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tjQuery('[rel=\"tooltip\"]').tooltip();\n\n\t\tfunction modalActionHandler(event) {\n\t\t\tvar target = $(event.currentTarget);\n\t\t\tapp.showModalWindow(null, target.data('url'), function (data) {\n\t\t\t\tSettings_Roles_Js.initDeleteView();\n\t\t\t});\n\t\t}\n\n\t\tjQuery('[data-action=\"modal\"]').on('click', modalActionHandler);\n\n\t\tjQuery('.toolbar').hide();\n\n\t\tjQuery('.toolbar-handle').on('mouseover', function (e) {\n\t\t\tvar target = $(e.currentTarget);\n\t\t\tjQuery('.toolbar', target).css({display: 'inline'});\n\t\t});\n\t\tjQuery('.toolbar-handle').on('mouseout', function (e) {\n\t\t\tvar target = $(e.currentTarget);\n\t\t\tjQuery('.toolbar', target).hide();\n\t\t});\n\n\t\tjQuery('.draggable').draggable({\n\t\t\tcontainment: '.treeView',\n\t\t\tstart: function (event, ui) {\n\t\t\t\tvar container = jQuery(ui.helper);\n\t\t\t\tvar referenceid = container.data('refid');\n\t\t\t\tvar sourceGroup = jQuery('[data-grouprefid=\"' + referenceid + '\"]');\n\t\t\t\tvar sourceRoleId = sourceGroup.data('roleid');\n\t\t\t\tif (sourceRoleId == 'H5' || sourceRoleId == 'H2') {\n\t\t\t\t\tvar params = {};\n\t\t\t\t\tparams.title = app.vtranslate('JS_PERMISSION_DENIED');\n\t\t\t\t\tparams.text = app.vtranslate('JS_NO_PERMISSIONS_TO_MOVE');\n\t\t\t\t\tparams.type = 'error';\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t}\n\t\t\t},\n\t\t\thelper: function (event) {\n\t\t\t\tvar target = $(event.currentTarget);\n\t\t\t\tvar targetGroup = target.closest('li');\n\t\t\t\tvar timestamp = +(new Date());\n\n\t\t\t\tvar container = $('<div/>');\n\t\t\t\tcontainer.data('refid', timestamp);\n\t\t\t\tcontainer.html(targetGroup.clone());\n\n\t\t\t\t// For later reference we shall assign the id before we return\n\t\t\t\ttargetGroup.attr('data-grouprefid', timestamp);\n\n\t\t\t\treturn container;\n\t\t\t}\n\t\t});\n\t\tjQuery('.droppable').droppable({\n\t\t\thoverClass: 'btn-primary',\n\t\t\ttolerance: 'pointer',\n\t\t\tdrop: function (event, ui) {\n\t\t\t\tvar container = $(ui.helper);\n\t\t\t\tvar referenceid = container.data('refid');\n\t\t\t\tvar sourceGroup = $('[data-grouprefid=\"' + referenceid + '\"]');\n\n\t\t\t\tvar thisWrapper = $(this).closest('div');\n\n\t\t\t\tvar targetRole = thisWrapper.closest('li').data('role');\n\t\t\t\tvar targetRoleId = thisWrapper.closest('li').data('roleid');\n\t\t\t\tvar sourceRole = sourceGroup.data('role');\n\t\t\t\tvar sourceRoleId = sourceGroup.data('roleid');\n\n\t\t\t\t// Attempt to push parent-into-its own child hierarchy?\n\t\t\t\tif (targetRole.indexOf(sourceRole + '::') == 0) {\n\t\t\t\t\t// Sorry\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t//Attempt to move the roles CEO and Sales Person\n\t\t\t\tif (sourceRoleId == 'H5' || sourceRoleId == 'H2') {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tsourceGroup.appendTo(thisWrapper.next('ul'));\n\n\t\t\t\tapplyMoveChanges(sourceRoleId, targetRoleId);\n\t\t\t}\n\t\t});\n\t},\n\n\tregisterSubmitEvent: function () {\n\t\tvar thisInstance = this;\n\t\tvar form = jQuery('#EditView');\n\t\tform.on('submit', function (e) {\n\t\t\tif (form.data('submit') == 'true' && form.data('performCheck') == 'true') {\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\tvar selectElement = jQuery('#profilesList');\n\t\t\t\tvar select2Element = app.getSelect2ElementFromSelect(selectElement);\n\t\t\t\tvar result = Vtiger_MultiSelect_Validator_Js.invokeValidation(selectElement);\n\t\t\t\tif (result != true) {\n\t\t\t\t\tselect2Element.validationEngine('showPrompt', result, 'error', 'bottomLeft', true);\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\treturn;\n\t\t\t\t} else {\n\t\t\t\t\tselect2Element.validationEngine('hide');\n\t\t\t\t}\n\n\t\t\t\tif (form.data('jqv').InvalidFields.length <= 0) {\n\t\t\t\t\tvar formData = form.serializeFormData();\n\t\t\t\t\tthisInstance.checkDuplicateName({\n\t\t\t\t\t\t'rolename': formData.rolename,\n\t\t\t\t\t\t'record': formData.record\n\t\t\t\t\t}).done(function (data) {\n\t\t\t\t\t\tform.data('submit', 'true');\n\t\t\t\t\t\tform.data('performCheck', 'true');\n\t\t\t\t\t\tform.submit();\n\t\t\t\t\t\tjQuery.progressIndicator({\n\t\t\t\t\t\t\t'blockInfo': {\n\t\t\t\t\t\t\t\t'enabled': true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}).fail(function (data, err) {\n\t\t\t\t\t\tvar params = {};\n\t\t\t\t\t\tparams['text'] = data['message'];\n\t\t\t\t\t\tparams['type'] = 'error';\n\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\t//If validation fails, form should submit again\n\t\t\t\t\tform.removeData('submit');\n\t\t\t\t\tapp.formAlignmentAfterValidation(form);\n\t\t\t\t}\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t});\n\t},\n\n\t/*\n\t * Function to check Duplication of Role Names\n\t * returns boolean true or false\n\t */\n\n\tcheckDuplicateName: function (details) {\n\t\tvar aDeferred = jQuery.Deferred();\n\n\t\tvar params = {\n\t\t\t'module': app.getModuleName(),\n\t\t\t'parent': app.getParentModuleName(),\n\t\t\t'action': 'EditAjax',\n\t\t\t'mode': 'checkDuplicate',\n\t\t\t'rolename': details.rolename,\n\t\t\t'record': details.record\n\t\t}\n\n\t\tAppConnector.request(params).done(function (data) {\n\t\t\tvar response = data['result'];\n\t\t\tvar result = response['success'];\n\t\t\tif (result == true) {\n\t\t\t\taDeferred.reject(response);\n\t\t\t} else {\n\t\t\t\taDeferred.resolve(response);\n\t\t\t}\n\t\t}).fail(function (error, err) {\n\t\t\taDeferred.reject(error, err);\n\t\t});\n\t\treturn aDeferred.promise();\n\t},\n\t/**\n\t * Register button to open modal logo upload form\n\t */\n\tregisterModalUploadButton: function () {\n\t\tconst thisInstance = this;\n\t\t$('.js-upload-logo').on('click', function () {\n\t\t\tapp.showModalWindow(null, $(this).data('url'), function (data) {\n\t\t\t\tthisInstance.registerUploadButton(data.find('form'));\n\t\t\t});\n\t\t});\n\t},\n\t/**\n\t * Register button send form\n\t * @param {jQuery} form\n\t */\n\tregisterUploadButton: function (form) {\n\t\tform.on('submit', function (e) {\n\t\t\te.preventDefault();\n\t\t\tif (form.validationEngine('validate') === true) {\n\t\t\t\tapp.removeEmptyFilesInput(form[0]);\n\t\t\t\tlet formData = new FormData(form[0]),\n\t\t\t\t\tprogressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\t\t\tblockInfo: {'enabled': true}\n\t\t\t\t\t}),\n\t\t\t\t\tnotifyType = '';\n\t\t\t\tAppConnector.request({\n\t\t\t\t\turl: 'index.php',\n\t\t\t\t\ttype: 'POST',\n\t\t\t\t\tdata: formData,\n\t\t\t\t\tprocessData: false,\n\t\t\t\t\tcontentType: false\n\t\t\t\t}).done(function (data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({'mode': 'hide'});\n\t\t\t\t\tif (true === data.result.success) {\n\t\t\t\t\t\tnotifyType = 'success';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnotifyType = 'error';\n\t\t\t\t\t}\n\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\ttitle: app.vtranslate('JS_MESSAGE'),\n\t\t\t\t\t\ttext: app.vtranslate(data.result.message),\n\t\t\t\t\t\ttype: notifyType\n\t\t\t\t\t});\n\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t},\n\tregisterEvents: function () {\n\t\tSettings_Roles_Js.registerModalUploadButton();\n\t\tSettings_Roles_Js.initEditView();\n\t\tSettings_Roles_Js.registerSubmitEvent();\n\t}\n}\njQuery(document).ready(function () {\n\tSettings_Roles_Js.registerEvents();\n})\n"],"names":["Settings_Roles_Js","validationEngine","app","validationEngineOptions","on","e","preventDefault","target","$","currentTarget","field","data","popupInstance","Vtiger_Popup_Js","getInstance","show","retrieveSelectedRecords","JSON","parse","val","label","value","triggerParentEvent","stringify","closest","text","close","applyMoveChanges","roleid","parent_roleid","params","request","done","res","success","showAlert","vtranslate","location","reload","tooltip","modalActionHandler","event","showModalWindow","initDeleteView","hide","css","display","draggable","ui","container","jQuery","helper","referenceid","sourceGroup","sourceRoleId","title","type","showMessage","targetGroup","timestamp","Date","html","clone","attr","droppable","thisWrapper","targetRole","targetRoleId","sourceRole","indexOf","appendTo","next","thisInstance","form","selectElement","select2Element","getSelect2ElementFromSelect","result","Vtiger_MultiSelect_Validator_Js","invokeValidation","InvalidFields","length","formData","serializeFormData","checkDuplicateName","rolename","record","submit","progressIndicator","fail","err","removeData","formAlignmentAfterValidation","details","aDeferred","Deferred","getModuleName","getParentModuleName","response","reject","resolve","error","promise","registerUploadButton","find","removeEmptyFilesInput","FormData","progressIndicatorElement","notifyType","showPnotify","message","hideModalWindow","registerModalUploadButton","initEditView","registerSubmitEvent","document","ready","registerEvents"],"mappings":"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"}