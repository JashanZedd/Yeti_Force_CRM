"use strict";Settings_Vtiger_Edit_Js("Settings_Companies_Edit_Js",{},{registerNewsletter:function(){$('[name="EditCompanies"]').find('[id$="newsletter"]').on("click",(function(e){var inputsContainer=$(e.target).closest(".js-card-body");$(e.target).prop("checked")?(inputsContainer.find('[id$="firstname"]').attr("data-validation-engine","validate[required]"),inputsContainer.find('[id$="lastname"]').attr("data-validation-engine","validate[required]"),inputsContainer.find('[id$="email"]').attr("data-validation-engine","validate[required,custom[email]]"),inputsContainer.find(".js-newsletter-content").removeClass("d-none")):(inputsContainer.find('[id$="firstname"]').removeAttr("data-validation-engine").val(""),inputsContainer.find('[id$="lastname"]').removeAttr("data-validation-engine").val(""),inputsContainer.find('[id$="email"]').removeAttr("data-validation-engine").val(""),inputsContainer.find(".js-newsletter-content").addClass("d-none"))}))},registerSubmitForm:function(){var form=this.getForm();form.on("submit",(function(e){if(e.preventDefault(),!0===form.validationEngine("validate")){app.removeEmptyFilesInput(form[0]);var params={url:"index.php",type:"POST",data:new FormData(form[0]),processData:!1,contentType:!1},progressIndicatorElement=jQuery.progressIndicator({blockInfo:{enabled:!0}});AppConnector.request(params).done((function(data){progressIndicatorElement.progressIndicator({mode:"hide"}),1==data.result.success?window.location.href=data.result.url:Settings_Vtiger_Index_Js.showMessage({text:data.result.message,type:"error"})}))}else app.formAlignmentAfterValidation(form)}))},registerEvents:function(){var form=this.getForm();form.length&&(form.validationEngine(app.validationEngineOptions),form.find("[data-inputmask]").inputmask()),this.registerSubmitForm(),this.registerNewsletter()}});
//# sourceMappingURL=Edit.min.js.map
