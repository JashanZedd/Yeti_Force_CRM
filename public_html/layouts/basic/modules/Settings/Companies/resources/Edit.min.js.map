{"version":3,"file":"Edit.min.js","sources":["Edit.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nSettings_Vtiger_Edit_Js('Settings_Companies_Edit_Js', {}, {\n\t/**\n\t * Register events for form checkbox element\n\t */\n\tregisterNewsletter() {\n\t\tconst form = $('[name=\"EditCompanies\"]');\n\t\tform.find('[id$=\"newsletter\"]').on('click', (e) => {\n\t\t\tlet inputsContainer = $(e.target).closest('.js-card-body');\n\t\t\tif ($(e.target).prop('checked')) {\n\t\t\t\tinputsContainer.find('[id$=\"firstname\"]').attr('data-validation-engine', 'validate[required]');\n\t\t\t\tinputsContainer.find('[id$=\"lastname\"]').attr('data-validation-engine', 'validate[required]');\n\t\t\t\tinputsContainer.find('[id$=\"email\"]').attr('data-validation-engine', 'validate[required,custom[email]]');\n\t\t\t\tinputsContainer.find('.js-newsletter-content').removeClass('d-none');\n\t\t\t} else {\n\t\t\t\tinputsContainer.find('[id$=\"firstname\"]').removeAttr('data-validation-engine').val('');\n\t\t\t\tinputsContainer.find('[id$=\"lastname\"]').removeAttr('data-validation-engine').val('');\n\t\t\t\tinputsContainer.find('[id$=\"email\"]').removeAttr('data-validation-engine').val('');\n\t\t\t\tinputsContainer.find('.js-newsletter-content').addClass('d-none');\n\t\t\t}\n\t\t});\n\t},\n\tregisterSubmitForm: function () {\n\t\tvar form = this.getForm();\n\t\tform.on('submit', function (e) {\n\t\t\te.preventDefault();\n\t\t\tif (form.validationEngine('validate') === true) {\n\t\t\t\tapp.removeEmptyFilesInput(form[0]);\n\t\t\t\tvar formData = new FormData(form[0]);\n\t\t\t\tvar params = {\n\t\t\t\t\turl: 'index.php',\n\t\t\t\t\ttype: \"POST\",\n\t\t\t\t\tdata: formData,\n\t\t\t\t\tprocessData: false,\n\t\t\t\t\tcontentType: false\n\t\t\t\t};\n\t\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\t\tblockInfo: {'enabled': true}\n\t\t\t\t});\n\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({'mode': 'hide'});\n\t\t\t\t\tif (true == data.result.success) {\n\t\t\t\t\t\twindow.location.href = data.result.url\n\t\t\t\t\t} else {\n\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({text: data.result.message, type: 'error'});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tapp.formAlignmentAfterValidation(form);\n\t\t\t}\n\t\t})\n\t},\n\tregisterEvents: function () {\n\t\tvar form = this.getForm()\n\t\tif (form.length) {\n\t\t\tform.validationEngine(app.validationEngineOptions);\n\t\t\tform.find(\"[data-inputmask]\").inputmask();\n\t\t}\n\t\tthis.registerSubmitForm();\n\t\tthis.registerNewsletter();\n\t}\n})\n"],"names":["Settings_Vtiger_Edit_Js","$","find","on","e","inputsContainer","target","closest","prop","attr","removeClass","removeAttr","val","addClass","form","this","getForm","preventDefault","validationEngine","removeEmptyFilesInput","params","FormData","progressIndicatorElement","jQuery","progressIndicator","enabled","request","done","data","mode","result","success","location","href","url","showMessage","text","message","type","formAlignmentAfterValidation","length","app","validationEngineOptions","inputmask","registerSubmitForm","registerNewsletter"],"mappings":"aAGAA,wBAAwB,6BAA8B,GAAI,+BAK3CC,EAAE,0BACVC,KAAK,sBAAsBC,GAAG,SAAS,SAACC,OACxCC,gBAAkBJ,EAAEG,EAAEE,QAAQC,QAAQ,iBACtCN,EAAEG,EAAEE,QAAQE,KAAK,4BACJN,KAAK,qBAAqBO,KAAK,yBAA0B,sCACzDP,KAAK,oBAAoBO,KAAK,yBAA0B,sCACxDP,KAAK,iBAAiBO,KAAK,yBAA0B,oDACrDP,KAAK,0BAA0BQ,YAAY,4BAE3CR,KAAK,qBAAqBS,WAAW,0BAA0BC,IAAI,oBACnEV,KAAK,oBAAoBS,WAAW,0BAA0BC,IAAI,oBAClEV,KAAK,iBAAiBS,WAAW,0BAA0BC,IAAI,oBAC/DV,KAAK,0BAA0BW,SAAS,kCAIvC,eACfC,KAAOC,KAAKC,eACXb,GAAG,UAAU,SAAUC,QACzBa,kBACwC,IAAtCH,KAAKI,iBAAiB,YAAsB,KAC3CC,sBAAsBL,KAAK,QAE3BM,OAAS,KACP,iBACC,YAHQ,IAAIC,SAASP,KAAK,iBAKnB,eACA,GAEVQ,yBAA2BC,OAAOC,kBAAkB,WAC5C,CAACC,SAAW,kBAEXC,QAAQN,QAAQO,MAAK,SAAUC,+BAClBJ,kBAAkB,CAACK,KAAQ,SAChD,GAAQD,KAAKE,OAAOC,eAChBC,SAASC,KAAOL,KAAKE,OAAOI,6BAEVC,YAAY,CAACC,KAAMR,KAAKE,OAAOO,QAASC,KAAM,sBAIrEC,6BAA6BzB,yBAIpB,eACXA,KAAOC,KAAKC,UACZF,KAAK0B,cACHtB,iBAAiBuB,IAAIC,8BACrBxC,KAAK,oBAAoByC,kBAE1BC,0BACAC"}