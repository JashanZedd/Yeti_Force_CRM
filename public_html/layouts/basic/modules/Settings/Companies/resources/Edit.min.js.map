{"version":3,"file":"Edit.min.js","sources":["Edit.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nSettings_Vtiger_Edit_Js('Settings_Companies_Edit_Js', {}, {\n\t/**\n\t * Register events for form checkbox element\n\t */\n\tregisterNewsletter() {\n\t\tconst form = $('[name=\"EditCompanies\"]');\n\t\tform.find('[id$=\"newsletter\"]').on('click', (e) => {\n\t\t\tlet inputsContainer = $(e.target).closest('.js-card-body');\n\t\t\tif ($(e.target).prop('checked')) {\n\t\t\t\tinputsContainer.find('[id$=\"firstname\"]').attr('data-validation-engine', 'validate[required]');\n\t\t\t\tinputsContainer.find('[id$=\"lastname\"]').attr('data-validation-engine', 'validate[required]');\n\t\t\t\tinputsContainer.find('[id$=\"email\"]').attr('data-validation-engine', 'validate[required,custom[email]]');\n\t\t\t\tinputsContainer.find('.js-newsletter-content').removeClass('d-none');\n\t\t\t} else {\n\t\t\t\tinputsContainer.find('[id$=\"firstname\"]').removeAttr('data-validation-engine').val('');\n\t\t\t\tinputsContainer.find('[id$=\"lastname\"]').removeAttr('data-validation-engine').val('');\n\t\t\t\tinputsContainer.find('[id$=\"email\"]').removeAttr('data-validation-engine').val('');\n\t\t\t\tinputsContainer.find('.js-newsletter-content').addClass('d-none');\n\t\t\t}\n\t\t});\n\t},\n\tregisterSubmitForm: function () {\n\t\tvar form = this.getForm();\n\t\tform.on('submit', function (e) {\n\t\t\te.preventDefault();\n\t\t\tif (form.validationEngine('validate') === true) {\n\t\t\t\tapp.removeEmptyFilesInput(form[0]);\n\t\t\t\tvar formData = new FormData(form[0]);\n\t\t\t\tvar params = {\n\t\t\t\t\turl: 'index.php',\n\t\t\t\t\ttype: \"POST\",\n\t\t\t\t\tdata: formData,\n\t\t\t\t\tprocessData: false,\n\t\t\t\t\tcontentType: false\n\t\t\t\t};\n\t\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\t\tblockInfo: {'enabled': true}\n\t\t\t\t});\n\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({'mode': 'hide'});\n\t\t\t\t\tif (true == data.result.success) {\n\t\t\t\t\t\twindow.location.href = data.result.url\n\t\t\t\t\t} else {\n\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({text: data.result.message, type: 'error'});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tapp.formAlignmentAfterValidation(form);\n\t\t\t}\n\t\t})\n\t},\n\tregisterEvents: function () {\n\t\tvar form = this.getForm()\n\t\tif (form.length) {\n\t\t\tform.validationEngine(app.validationEngineOptions);\n\t\t\tform.find(\"[data-inputmask]\").inputmask();\n\t\t}\n\t\tthis.registerSubmitForm();\n\t\tthis.registerNewsletter();\n\t}\n})\n"],"names":["Settings_Vtiger_Edit_Js","form","$","find","on","e","inputsContainer","target","closest","prop","attr","removeClass","removeAttr","val","addClass","getForm","preventDefault","validationEngine","removeEmptyFilesInput","formData","FormData","params","progressIndicatorElement","jQuery","progressIndicator","request","done","data","result","success","location","href","url","showMessage","text","message","type","formAlignmentAfterValidation","length","app","validationEngineOptions","inputmask","registerSubmitForm","registerNewsletter"],"mappings":";;AAAA;AACA;AAEAA,wBAAwB,4BAAxB,EAAsD,EAAtD,EAA0D;;;;mBAAA,gCAIpC;MACdC,OAAOC,EAAE,wBAAF,CAAb;OACKC,IAAL,CAAU,oBAAV,EAAgCC,EAAhC,CAAmC,OAAnC,EAA4C,UAACC,CAAD,EAAO;OAC9CC,kBAAkBJ,EAAEG,EAAEE,MAAJ,EAAYC,OAAZ,CAAoB,eAApB,CAAtB;OACIN,EAAEG,EAAEE,MAAJ,EAAYE,IAAZ,CAAiB,SAAjB,CAAJ,EAAiC;oBAChBN,IAAhB,CAAqB,mBAArB,EAA0CO,IAA1C,CAA+C,wBAA/C,EAAyE,oBAAzE;oBACgBP,IAAhB,CAAqB,kBAArB,EAAyCO,IAAzC,CAA8C,wBAA9C,EAAwE,oBAAxE;oBACgBP,IAAhB,CAAqB,eAArB,EAAsCO,IAAtC,CAA2C,wBAA3C,EAAqE,kCAArE;oBACgBP,IAAhB,CAAqB,wBAArB,EAA+CQ,WAA/C,CAA2D,QAA3D;IAJD,MAKO;oBACUR,IAAhB,CAAqB,mBAArB,EAA0CS,UAA1C,CAAqD,wBAArD,EAA+EC,GAA/E,CAAmF,EAAnF;oBACgBV,IAAhB,CAAqB,kBAArB,EAAyCS,UAAzC,CAAoD,wBAApD,EAA8EC,GAA9E,CAAkF,EAAlF;oBACgBV,IAAhB,CAAqB,eAArB,EAAsCS,UAAtC,CAAiD,wBAAjD,EAA2EC,GAA3E,CAA+E,EAA/E;oBACgBV,IAAhB,CAAqB,wBAArB,EAA+CW,QAA/C,CAAwD,QAAxD;;GAXF;EANwD;;qBAqBrC,8BAAY;MAC3Bb,OAAO,KAAKc,OAAL,EAAX;OACKX,EAAL,CAAQ,QAAR,EAAkB,UAAUC,CAAV,EAAa;KAC5BW,cAAF;OACIf,KAAKgB,gBAAL,CAAsB,UAAtB,MAAsC,IAA1C,EAAgD;QAC3CC,qBAAJ,CAA0BjB,KAAK,CAAL,CAA1B;QACIkB,WAAW,IAAIC,QAAJ,CAAanB,KAAK,CAAL,CAAb,CAAf;QACIoB,SAAS;UACP,WADO;WAEN,MAFM;WAGNF,QAHM;kBAIC,KAJD;kBAKC;KALd;QAOIG,2BAA2BC,OAAOC,iBAAP,CAAyB;gBAC5C,EAAC,WAAW,IAAZ;KADmB,CAA/B;iBAGaC,OAAb,CAAqBJ,MAArB,EAA6BK,IAA7B,CAAkC,UAAUC,IAAV,EAAgB;8BACxBH,iBAAzB,CAA2C,EAAC,QAAQ,MAAT,EAA3C;SACI,QAAQG,KAAKC,MAAL,CAAYC,OAAxB,EAAiC;aACzBC,QAAP,CAAgBC,IAAhB,GAAuBJ,KAAKC,MAAL,CAAYI,GAAnC;MADD,MAEO;+BACmBC,WAAzB,CAAqC,EAACC,MAAMP,KAAKC,MAAL,CAAYO,OAAnB,EAA4BC,MAAM,OAAlC,EAArC;;KALF;IAbD,MAqBO;QACFC,4BAAJ,CAAiCpC,IAAjC;;GAxBF;EAvBwD;iBAmDzC,0BAAY;MACvBA,OAAO,KAAKc,OAAL,EAAX;MACId,KAAKqC,MAAT,EAAiB;QACXrB,gBAAL,CAAsBsB,IAAIC,uBAA1B;QACKrC,IAAL,CAAU,kBAAV,EAA8BsC,SAA9B;;OAEIC,kBAAL;OACKC,kBAAL;;CA1DF"}