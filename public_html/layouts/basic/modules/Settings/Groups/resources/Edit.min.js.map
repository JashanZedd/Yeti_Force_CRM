{"version":3,"file":"Edit.min.js","sources":["Edit.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n *************************************************************************************/\n'use strict';\n\nSettings_Vtiger_Edit_Js('Settings_Groups_Edit_Js', {}, {\n\tmemberSelectElement: false,\n\n\tgetMemberSelectElement: function () {\n\t\tif (this.memberSelectElement == false) {\n\t\t\tthis.memberSelectElement = jQuery('#memberList');\n\t\t}\n\t\treturn this.memberSelectElement;\n\t},\n\t/**\n\t * Function to register form for validation\n\t */\n\tregisterFormForValidation: function () {\n\t\tvar editViewForm = this.getForm();\n\t\teditViewForm.validationEngine(app.getvalidationEngineOptions(true));\n\t},\n\n\t/**\n\t * Function to register the submit event of form\n\t */\n\tregisterSubmitEvent: function () {\n\t\tvar thisInstance = this;\n\t\tvar form = jQuery('#EditView');\n\t\tform.on('submit', function (e) {\n\t\t\tif (form.data('submit') == 'true' && form.data('performCheck') == 'true') {\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\tif (form.data('jqv').InvalidFields.length <= 0) {\n\t\t\t\t\tvar formData = form.serializeFormData();\n\t\t\t\t\tthisInstance.checkDuplicateName({\n\t\t\t\t\t\t'groupname': formData.groupname,\n\t\t\t\t\t\t'record': formData.record\n\t\t\t\t\t}).done(function (data) {\n\t\t\t\t\t\tform.data('submit', 'true');\n\t\t\t\t\t\tform.data('performCheck', 'true');\n\t\t\t\t\t\tform.submit();\n\t\t\t\t\t}).fail(function (data, err) {\n\t\t\t\t\t\tvar params = {};\n\t\t\t\t\t\tparams['text'] = data['message'];\n\t\t\t\t\t\tparams['type'] = 'error';\n\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\t//If validation fails, form should submit again\n\t\t\t\t\tform.removeData('submit');\n\t\t\t\t\tapp.formAlignmentAfterValidation(form);\n\t\t\t\t}\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t});\n\t},\n\n\t/*\n\t * Function to check Duplication of Group Names\n\t * returns boolean true or false\n\t */\n\tcheckDuplicateName: function (details) {\n\t\tvar aDeferred = jQuery.Deferred();\n\n\t\tvar params = {\n\t\t\t'module': app.getModuleName(),\n\t\t\t'parent': app.getParentModuleName(),\n\t\t\t'action': 'EditAjax',\n\t\t\t'mode': 'checkDuplicate',\n\t\t\t'groupname': details.groupname,\n\t\t\t'record': details.record\n\t\t}\n\n\t\tAppConnector.request(params).done(function (data) {\n\t\t\tvar response = data['result'];\n\t\t\tvar result = response['success'];\n\t\t\tif (result == true) {\n\t\t\t\taDeferred.reject(response);\n\t\t\t} else {\n\t\t\t\taDeferred.resolve(response);\n\t\t\t}\n\t\t}).fail(function (error, err) {\n\t\t\taDeferred.reject(error, err);\n\t\t});\n\t\treturn aDeferred.promise();\n\t},\n\t/**\n\t * Register events for section \"modules\"\n\t */\n\tregisterButtonsModule: function(){\n\t\tconst editViewForm = this.getForm();\n\t\teditViewForm.find('.js-modules-select-all, .js-modules-deselect-all').on('click', function(e){\n\t\t\t$('#modulesList option').prop('selected', $(this).hasClass('js-modules-select-all')).parent().trigger('change');\n\t\t});\n\t},\n\t/**\n\t * Function which will handle the registrations for the elements\n\t */\n\tregisterEvents: function () {\n\t\tthis._super();\n\t\tthis.registerSubmitEvent();\n\t\tthis.registerButtonsModule()\n\t}\n});\n"],"names":["Settings_Vtiger_Edit_Js","memberSelectElement","jQuery","editViewForm","getForm","validationEngine","app","getvalidationEngineOptions","thisInstance","form","on","e","data","InvalidFields","length","formData","serializeFormData","checkDuplicateName","groupname","record","done","submit","fail","err","params","showMessage","removeData","formAlignmentAfterValidation","preventDefault","details","aDeferred","Deferred","getModuleName","getParentModuleName","request","response","result","reject","resolve","error","promise","find","prop","$","hasClass","parent","trigger","_super","registerSubmitEvent","registerButtonsModule"],"mappings":";;AAAA;;;;;;;;AAQA;AAEAA,wBAAwB,yBAAxB,EAAmD,EAAnD,EAAuD;sBACjC,KADiC;;yBAG9B,kCAAY;MAC/B,KAAKC,mBAAL,IAA4B,KAAhC,EAAuC;QACjCA,mBAAL,GAA2BC,OAAO,aAAP,CAA3B;;SAEM,KAAKD,mBAAZ;EAPqD;;;;4BAY3B,qCAAY;MAClCE,eAAe,KAAKC,OAAL,EAAnB;eACaC,gBAAb,CAA8BC,IAAIC,0BAAJ,CAA+B,IAA/B,CAA9B;EAdqD;;;;;sBAoBjC,+BAAY;MAC5BC,eAAe,IAAnB;MACIC,OAAOP,OAAO,WAAP,CAAX;OACKQ,EAAL,CAAQ,QAAR,EAAkB,UAAUC,CAAV,EAAa;OAC1BF,KAAKG,IAAL,CAAU,QAAV,KAAuB,MAAvB,IAAiCH,KAAKG,IAAL,CAAU,cAAV,KAA6B,MAAlE,EAA0E;WAClE,IAAP;IADD,MAEO;QACFH,KAAKG,IAAL,CAAU,KAAV,EAAiBC,aAAjB,CAA+BC,MAA/B,IAAyC,CAA7C,EAAgD;SAC3CC,WAAWN,KAAKO,iBAAL,EAAf;kBACaC,kBAAb,CAAgC;mBAClBF,SAASG,SADS;gBAErBH,SAASI;MAFpB,EAGGC,IAHH,CAGQ,UAAUR,IAAV,EAAgB;WAClBA,IAAL,CAAU,QAAV,EAAoB,MAApB;WACKA,IAAL,CAAU,cAAV,EAA0B,MAA1B;WACKS,MAAL;MAND,EAOGC,IAPH,CAOQ,UAAUV,IAAV,EAAgBW,GAAhB,EAAqB;UACxBC,SAAS,EAAb;aACO,MAAP,IAAiBZ,KAAK,SAAL,CAAjB;aACO,MAAP,IAAiB,OAAjB;+BACyBa,WAAzB,CAAqCD,MAArC;aACO,KAAP;MAZD;KAFD,MAgBO;;UAEDE,UAAL,CAAgB,QAAhB;SACIC,4BAAJ,CAAiClB,IAAjC;;MAECmB,cAAF;;GAzBF;EAvBqD;;;;;;qBAyDlC,4BAAUC,OAAV,EAAmB;MAClCC,YAAY5B,OAAO6B,QAAP,EAAhB;;MAEIP,SAAS;aACFlB,IAAI0B,aAAJ,EADE;aAEF1B,IAAI2B,mBAAJ,EAFE;aAGF,UAHE;WAIJ,gBAJI;gBAKCJ,QAAQX,SALT;aAMFW,QAAQV;GANnB;;eASae,OAAb,CAAqBV,MAArB,EAA6BJ,IAA7B,CAAkC,UAAUR,IAAV,EAAgB;OAC7CuB,WAAWvB,KAAK,QAAL,CAAf;OACIwB,SAASD,SAAS,SAAT,CAAb;OACIC,UAAU,IAAd,EAAoB;cACTC,MAAV,CAAiBF,QAAjB;IADD,MAEO;cACIG,OAAV,CAAkBH,QAAlB;;GANF,EAQGb,IARH,CAQQ,UAAUiB,KAAV,EAAiBhB,GAAjB,EAAsB;aACnBc,MAAV,CAAiBE,KAAjB,EAAwBhB,GAAxB;GATD;SAWOO,UAAUU,OAAV,EAAP;EAhFqD;;;;wBAqF/B,iCAAU;MAC1BrC,eAAe,KAAKC,OAAL,EAArB;eACaqC,IAAb,CAAkB,kDAAlB,EAAsE/B,EAAtE,CAAyE,OAAzE,EAAkF,UAASC,CAAT,EAAW;KAC1F,qBAAF,EAAyB+B,IAAzB,CAA8B,UAA9B,EAA0CC,EAAE,IAAF,EAAQC,QAAR,CAAiB,uBAAjB,CAA1C,EAAqFC,MAArF,GAA8FC,OAA9F,CAAsG,QAAtG;GADD;EAvFqD;;;;iBA8FtC,0BAAY;OACtBC,MAAL;OACKC,mBAAL;OACKC,qBAAL;;CAjGF"}