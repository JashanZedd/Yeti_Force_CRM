{"version":3,"file":"Edit.min.js","sources":["Edit.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n * Contributor(s): YetiForce S.A.\n *************************************************************************************/\n'use strict';\n\nSettings_Vtiger_Edit_Js(\n\t'Settings_Groups_Edit_Js',\n\t{},\n\t{\n\t\t/**\n\t\t * Function to register form for validation\n\t\t */\n\t\tregisterFormForValidation: function () {\n\t\t\tthis.getForm().validationEngine(app.getvalidationEngineOptions(true));\n\t\t},\n\n\t\t/**\n\t\t * Function to register the submit event of form\n\t\t */\n\t\tregisterSubmitEvent: function () {\n\t\t\tlet form = this.getForm();\n\t\t\tform.on('submit', (e) => {\n\t\t\t\tif (form.data('submit') == 'true' && form.data('performCheck') == 'true') {\n\t\t\t\t\tdocument.progressLoader = $.progressIndicator({\n\t\t\t\t\t\tmessage: app.vtranslate('JS_SAVE_LOADER_INFO'),\n\t\t\t\t\t\tposition: 'html',\n\t\t\t\t\t\tblockInfo: { enabled: true }\n\t\t\t\t\t});\n\t\t\t\t\treturn true;\n\t\t\t\t} else {\n\t\t\t\t\tif (form.data('jqv').InvalidFields.length <= 0) {\n\t\t\t\t\t\tlet formData = form.serializeFormData();\n\t\t\t\t\t\tthis.validate(formData)\n\t\t\t\t\t\t\t.done(function (_) {\n\t\t\t\t\t\t\t\tform.data('submit', 'true');\n\t\t\t\t\t\t\t\tform.data('performCheck', 'true');\n\t\t\t\t\t\t\t\tform.submit();\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.fail(function (data, err) {\n\t\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({ text: data['message'], type: 'error' });\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\t//If validation fails, form should submit again\n\t\t\t\t\t\tform.removeData('submit');\n\t\t\t\t\t\tapp.formAlignmentAfterValidation(form);\n\t\t\t\t\t}\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t/*\n\t\t * Function to check Duplication of Group Names\n\t\t * returns boolean true or false\n\t\t */\n\t\tvalidate: function (params) {\n\t\t\tconst aDeferred = jQuery.Deferred();\n\t\t\tparams.mode = 'preSaveValidation';\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\tlet response = data.result;\n\t\t\t\t\tif (response.success) {\n\t\t\t\t\t\taDeferred.reject(response);\n\t\t\t\t\t} else {\n\t\t\t\t\t\taDeferred.resolve(response);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.fail(function (error, err) {\n\t\t\t\t\taDeferred.reject(error, err);\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/**\n\t\t * Register events for section \"modules\"\n\t\t */\n\t\tregisterButtonsModule: function () {\n\t\t\tconst editViewForm = this.getForm();\n\t\t\teditViewForm.find('.js-modules-select-all, .js-modules-deselect-all').on('click', function (e) {\n\t\t\t\teditViewForm\n\t\t\t\t\t.find('[name=\"modules[]\"] option')\n\t\t\t\t\t.prop('selected', $(this).hasClass('js-modules-select-all'))\n\t\t\t\t\t.parent()\n\t\t\t\t\t.trigger('change');\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function which will handle the registrations for the elements\n\t\t */\n\t\tregisterEvents: function () {\n\t\t\tthis._super();\n\t\t\tthis.registerSubmitEvent();\n\t\t\tthis.registerButtonsModule();\n\t\t}\n\t}\n);\n"],"names":["Settings_Vtiger_Edit_Js","registerFormForValidation","getForm","validationEngine","app","getvalidationEngineOptions","registerSubmitEvent","form","on","e","data","progressLoader","$","progressIndicator","message","vtranslate","position","blockInfo","enabled","InvalidFields","length","serializeFormData","validate","formData","done","submit","fail","showMessage","text","type","removeData","formAlignmentAfterValidation","preventDefault","params","jQuery","Deferred","mode","AppConnector","request","response","result","success","aDeferred","reject","resolve","error","err","promise","registerButtonsModule","editViewForm","find","prop","hasClass","parent","trigger","registerEvents","_super"],"mappings":"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"}