{"version":3,"file":"Edit.min.js","sources":["Edit.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n *************************************************************************************/\n'use strict';\n\nSettings_Vtiger_Edit_Js('Settings_Groups_Edit_Js', {}, {\n\tmemberSelectElement: false,\n\n\tgetMemberSelectElement: function () {\n\t\tif (this.memberSelectElement == false) {\n\t\t\tthis.memberSelectElement = jQuery('#memberList');\n\t\t}\n\t\treturn this.memberSelectElement;\n\t},\n\t/**\n\t * Function to register form for validation\n\t */\n\tregisterFormForValidation: function () {\n\t\tvar editViewForm = this.getForm();\n\t\teditViewForm.validationEngine(app.getvalidationEngineOptions(true));\n\t},\n\n\t/**\n\t * Function to register the submit event of form\n\t */\n\tregisterSubmitEvent: function () {\n\t\tvar thisInstance = this;\n\t\tvar form = jQuery('#EditView');\n\t\tform.on('submit', function (e) {\n\t\t\tif (form.data('submit') == 'true' && form.data('performCheck') == 'true') {\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\tif (form.data('jqv').InvalidFields.length <= 0) {\n\t\t\t\t\tvar formData = form.serializeFormData();\n\t\t\t\t\tthisInstance.checkDuplicateName({\n\t\t\t\t\t\t'groupname': formData.groupname,\n\t\t\t\t\t\t'record': formData.record\n\t\t\t\t\t}).done(function (data) {\n\t\t\t\t\t\tform.data('submit', 'true');\n\t\t\t\t\t\tform.data('performCheck', 'true');\n\t\t\t\t\t\tform.submit();\n\t\t\t\t\t}).fail(function (data, err) {\n\t\t\t\t\t\tvar params = {};\n\t\t\t\t\t\tparams['text'] = data['message'];\n\t\t\t\t\t\tparams['type'] = 'error';\n\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\t//If validation fails, form should submit again\n\t\t\t\t\tform.removeData('submit');\n\t\t\t\t\tapp.formAlignmentAfterValidation(form);\n\t\t\t\t}\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t});\n\t},\n\n\t/*\n\t * Function to check Duplication of Group Names\n\t * returns boolean true or false\n\t */\n\tcheckDuplicateName: function (details) {\n\t\tvar aDeferred = jQuery.Deferred();\n\n\t\tvar params = {\n\t\t\t'module': app.getModuleName(),\n\t\t\t'parent': app.getParentModuleName(),\n\t\t\t'action': 'EditAjax',\n\t\t\t'mode': 'checkDuplicate',\n\t\t\t'groupname': details.groupname,\n\t\t\t'record': details.record\n\t\t}\n\n\t\tAppConnector.request(params).done(function (data) {\n\t\t\tvar response = data['result'];\n\t\t\tvar result = response['success'];\n\t\t\tif (result == true) {\n\t\t\t\taDeferred.reject(response);\n\t\t\t} else {\n\t\t\t\taDeferred.resolve(response);\n\t\t\t}\n\t\t}).fail(function (error, err) {\n\t\t\taDeferred.reject(error, err);\n\t\t});\n\t\treturn aDeferred.promise();\n\t},\n\t/**\n\t * Register events for section \"modules\"\n\t */\n\tregisterButtonsModule: function(){\n\t\tconst editViewForm = this.getForm();\n\t\teditViewForm.find('.js-modules-select-all, .js-modules-deselect-all').on('click', function(e){\n\t\t\t$('#modulesList option').prop('selected', $(this).hasClass('js-modules-select-all')).parent().trigger('change');\n\t\t});\n\t},\n\t/**\n\t * Function which will handle the registrations for the elements\n\t */\n\tregisterEvents: function () {\n\t\tthis._super();\n\t\tthis.registerSubmitEvent();\n\t\tthis.registerButtonsModule()\n\t}\n});\n"],"names":["Settings_Vtiger_Edit_Js","this","memberSelectElement","jQuery","getForm","validationEngine","app","getvalidationEngineOptions","thisInstance","form","on","e","data","InvalidFields","length","formData","serializeFormData","checkDuplicateName","groupname","record","done","submit","fail","err","params","showMessage","removeData","formAlignmentAfterValidation","preventDefault","details","aDeferred","Deferred","getModuleName","getParentModuleName","request","response","reject","resolve","error","promise","find","prop","$","hasClass","parent","trigger","_super","registerSubmitEvent","registerButtonsModule"],"mappings":"aAUAA,wBAAwB,0BAA2B,GAAI,sBACjC,yBAEG,kBACS,GAA5BC,KAAKC,2BACHA,oBAAsBC,OAAO,gBAE5BF,KAAKC,+CAKc,WACPD,KAAKG,UACXC,iBAAiBC,IAAIC,4BAA2B,yBAMzC,eAChBC,aAAeP,KACfQ,KAAON,OAAO,kBACbO,GAAG,UAAU,SAAUC,MACA,QAAvBF,KAAKG,KAAK,WAAoD,QAA7BH,KAAKG,KAAK,uBACvC,KAEHH,KAAKG,KAAK,OAAOC,cAAcC,QAAU,EAAG,KAC3CC,SAAWN,KAAKO,iCACPC,mBAAmB,WAClBF,SAASG,iBACZH,SAASI,SACjBC,MAAK,SAAUR,WACZA,KAAK,SAAU,aACfA,KAAK,eAAgB,aACrBS,YACHC,MAAK,SAAUV,KAAMW,SACnBC,OAAS,iBACb,KAAiBZ,KAAA,eACjB,KAAiB,iCACQa,YAAYD,SAC9B,eAIHE,WAAW,cACZC,6BAA6BlB,QAEhCmB,wCASe,SAAUC,aACzBC,UAAY3B,OAAO4B,WAEnBP,OAAS,QACFlB,IAAI0B,uBACJ1B,IAAI2B,6BACJ,gBACF,2BACKJ,QAAQX,iBACXW,QAAQV,4BAGNe,QAAQV,QAAQJ,MAAK,SAAUR,UACvCuB,SAAWvB,KAAA,OAED,GADDuB,SAAA,kBAEFC,OAAOD,oBAEPE,QAAQF,aAEjBb,MAAK,SAAUgB,MAAOf,eACda,OAAOE,MAAOf,QAElBO,UAAUS,iCAKK,WACDtC,KAAKG,UACboC,KAAK,oDAAoD9B,GAAG,SAAS,SAASC,KACxF,uBAAuB8B,KAAK,WAAYC,EAAEzC,MAAM0C,SAAS,0BAA0BC,SAASC,QAAQ,6BAMxF,gBACVC,cACAC,2BACAC"}