{"version":3,"file":"SwitchUsers.min.js","sources":["SwitchUsers.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class('Settings_Users_SwitchUsers_Js', {}, {\n\tregisterAdd: function (content) {\n\t\tvar thisInstance = this;\n\t\tcontent.find('.addItem').on('click', function (e) {\n\t\t\tvar data = [];\n\t\t\tcontent.find('.switchUsersTable tbody tr').each(function (index) {\n\t\t\t\tdata.push({\n\t\t\t\t\tuser: $(this).find('.sufrom').val(),\n\t\t\t\t});\n\t\t\t});\n\t\t\tvar id = parseInt(content.find('#suCount').val()) + 1;\n\t\t\tvar target = $(e.currentTarget);\n\t\t\tvar cloneItem = content.find('.cloneItem tbody').clone(true, true);\n\t\t\tvar suFrom = cloneItem.find('.sufrom option')\n\t\t\tsuFrom.each(function (index, option) {\n\t\t\t\t$.each(data, function (key, selectedUser) {\n\t\t\t\t\tif ($(option).val() == selectedUser.user) {\n\t\t\t\t\t\tcloneItem.find(option).remove()\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t\tcloneItem.find('tr').attr('data-id', id).addClass('row' + id);\n\t\t\tcontent.find('.switchUsersTable tbody').append(cloneItem.html());\n\t\t\tcontent.find('#suCount').val(id);\n\t\t\tthisInstance.registerDelete(content.find('tr.row' + id));\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(content.find('tr.row' + id).find('select'));\n\t\t});\n\t},\n\tregisterDelete: function (content) {\n\t\tcontent.find('.delate').on('click', function (e) {\n\t\t\tvar target = $(e.currentTarget);\n\t\t\ttarget.closest('tr').remove();\n\t\t});\n\t},\n\tregisterSave: function (content) {\n\t\tcontent.find('.saveItems').on('click', function (e) {\n\t\t\tvar data = [];\n\t\t\tcontent.find('.switchUsersTable tbody tr').each(function (index) {\n\t\t\t\tif ($(this).find('.suto :selected').length > 0) {\n\t\t\t\t\tdata.push({\n\t\t\t\t\t\tuser: $(this).find('.sufrom').val(),\n\t\t\t\t\t\taccess: $(this).find('.suto').val(),\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t\tapp.saveAjax('saveSwitchUsers', data).done(function (data) {\n\t\t\t\tSettings_Vtiger_Index_Js.showMessage({type: 'success', text: data.result.message});\n\t\t\t});\n\t\t});\n\t},\n\tregisterEvents: function () {\n\t\tvar content = $('.contentsDiv');\n\t\tthis.registerAdd(content);\n\t\tthis.registerDelete(content);\n\t\tthis.registerSave(content);\n\t}\n});\n"],"names":["jQuery","Class","registerAdd","content","find","on","e","each","data","push","user","$","val","parseInt","target","currentTarget","cloneItem","clone","suFrom","index","option","key","selectedUser","remove","attr","id","addClass","append","html","thisInstance","registerDelete","App","Fields","Picklist","showSelect2ElementView","closest","registerSave","length","access","app","saveAjax","done","Settings_Vtiger_Index_Js","showMessage","type","text","result","message","registerEvents"],"mappings":"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"}