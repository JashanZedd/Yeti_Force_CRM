{"version":3,"file":"SwitchUsers.min.js","sources":["SwitchUsers.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class('Settings_Users_SwitchUsers_Js', {}, {\n\tregisterAdd: function (content) {\n\t\tvar thisInstance = this;\n\t\tcontent.find('.addItem').on('click', function (e) {\n\t\t\tvar data = [];\n\t\t\tcontent.find('.switchUsersTable tbody tr').each(function (index) {\n\t\t\t\tdata.push({\n\t\t\t\t\tuser: $(this).find('.sufrom').val(),\n\t\t\t\t});\n\t\t\t});\n\t\t\tvar id = parseInt(content.find('#suCount').val()) + 1;\n\t\t\tvar cloneItem = content.find('.cloneItem tbody').clone(true, true);\n\t\t\tvar suFrom = cloneItem.find('.sufrom option')\n\t\t\tsuFrom.each(function (index, option) {\n\t\t\t\t$.each(data, function (key, selectedUser) {\n\t\t\t\t\tif ($(option).val() == selectedUser.user) {\n\t\t\t\t\t\tcloneItem.find(option).remove()\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t\tcloneItem.find('tr').attr('data-id', id).addClass('row' + id);\n\t\t\tcontent.find('.switchUsersTable tbody').append(cloneItem.html());\n\t\t\tcontent.find('#suCount').val(id);\n\t\t\tthisInstance.registerDelete(content.find('tr.row' + id));\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(content.find('tr.row' + id).find('select'));\n\t\t});\n\t},\n\tregisterDelete: function (content) {\n\t\tcontent.find('.delate').on('click', function (e) {\n\t\t\tvar target = $(e.currentTarget);\n\t\t\ttarget.closest('tr').remove();\n\t\t});\n\t},\n\tregisterSave: function (content) {\n\t\tcontent.find('.saveItems').on('click', function (e) {\n\t\t\tvar data = [];\n\t\t\tcontent.find('.switchUsersTable tbody tr').each(function (index) {\n\t\t\t\tif ($(this).find('.suto :selected').length > 0) {\n\t\t\t\t\tdata.push({\n\t\t\t\t\t\tuser: $(this).find('.sufrom').val(),\n\t\t\t\t\t\taccess: $(this).find('.suto').val(),\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t\tapp.saveAjax('saveSwitchUsers', data).done(function (data) {\n\t\t\t\tSettings_Vtiger_Index_Js.showMessage({type: 'success', text: data.result.message});\n\t\t\t});\n\t\t});\n\t},\n\tregisterEvents: function () {\n\t\tvar content = $('.contentsDiv');\n\t\tthis.registerAdd(content);\n\t\tthis.registerDelete(content);\n\t\tthis.registerSave(content);\n\t}\n});\n"],"names":["jQuery","Class","content","thisInstance","this","find","on","e","data","each","index","push","$","val","id","parseInt","cloneItem","clone","option","key","selectedUser","user","remove","attr","addClass","append","html","registerDelete","Fields","Picklist","showSelect2ElementView","currentTarget","closest","length","saveAjax","done","showMessage","type","text","result","message","registerAdd","registerSave"],"mappings":"aAGAA,OAAOC,MAAM,gCAAiC,GAAI,aACpC,SAAUC,aAClBC,aAAeC,aACXC,KAAK,YAAYC,GAAG,SAAS,SAAUC,OAC1CC,KAAO,WACHH,KAAK,8BAA8BI,MAAK,SAAUC,YACpDC,KAAK,MACHC,EAAER,MAAMC,KAAK,WAAWQ,eAG5BC,GAAKC,SAASb,QAAQG,KAAK,YAAYQ,OAAS,EAChDG,UAAYd,QAAQG,KAAK,oBAAoBY,OAAM,GAAM,GAChDD,UAAUX,KAAK,kBACrBI,MAAK,SAAUC,MAAOQ,UAC1BT,KAAKD,MAAM,SAAUW,IAAKC,cACvBR,EAAEM,QAAQL,OAASO,aAAaC,gBACzBhB,KAAKa,QAAQI,yBAIhBjB,KAAK,MAAMkB,KAAK,UAAWT,IAAIU,SAAS,MAAQV,YAClDT,KAAK,2BAA2BoB,OAAOT,UAAUU,gBACjDrB,KAAK,YAAYQ,IAAIC,iBAChBa,eAAezB,QAAQG,KAAK,SAAWS,SAChDc,OAAOC,SAASC,uBAAuB5B,QAAQG,KAAK,SAAWS,IAAIT,KAAK,8BAG9D,SAAUH,iBACjBG,KAAK,WAAWC,GAAG,SAAS,SAAUC,GAChCK,EAAEL,EAAEwB,eACVC,QAAQ,MAAMV,0BAGT,SAAUpB,iBACfG,KAAK,cAAcC,GAAG,SAAS,SAAUC,OAC5CC,KAAO,WACHH,KAAK,8BAA8BI,MAAK,SAAUC,OACrDE,EAAER,MAAMC,KAAK,mBAAmB4B,OAAS,QACvCtB,KAAK,MACHC,EAAER,MAAMC,KAAK,WAAWQ,aACtBD,EAAER,MAAMC,KAAK,SAASQ,eAI7BqB,SAAS,kBAAmB1B,MAAM2B,MAAK,SAAU3B,+BAC3B4B,YAAY,CAACC,KAAM,UAAWC,KAAM9B,KAAK+B,OAAOC,gCAI5D,eACXtC,QAAUU,EAAE,qBACX6B,YAAYvC,cACZyB,eAAezB,cACfwC,aAAaxC"}