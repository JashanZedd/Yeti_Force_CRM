{"version":3,"file":"Locks.min.js","sources":["Locks.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class('Settings_Users_Locks_Js', {}, {\n\t/**\n\t * Add item\n\t * @param {jQuery} content\n\t */\n\tregisterAdd: function (content) {\n\t\tvar thisInstance = this;\n\t\tcontent.find('.js-add-item').on('click', function (e) {\n\t\t\tvar id = parseInt(content.find('#js-lock-count').val()) + 1;\n\t\t\tvar cloneItem = content.find('.js-clone-item tbody').clone(true, true);\n\t\t\tcloneItem.find('tr').attr('data-id', id).addClass('row' + id);\n\t\t\tcontent.find('.js-locks-table tbody').append(cloneItem.html());\n\t\t\tcontent.find('#js-lock-count').val(id);\n\t\t\tthisInstance.registerDelete(content.find('tr.row' + id));\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(content.find('tr.row' + id).find('select'));\n\t\t});\n\t},\n\t/**\n\t * Register events for delete item\n\t * @param {jQuery} content\n\t */\n\tregisterDelete: function (content) {\n\t\tcontent.find('.js-delete-item').on('click', function (e) {\n\t\t\tvar target = $(e.currentTarget);\n\t\t\ttarget.closest('tr').remove();\n\t\t});\n\t},\n\t/**\n\t * Register events for save\n\t * @param {jQuery} content\n\t */\n\tregisterSave: function (content) {\n\t\tcontent.find('.js-save-items').on('click', function (e) {\n\t\t\tvar data = [];\n\t\t\tcontent.find('.js-locks-table tbody tr').each(function (index) {\n\t\t\t\tdata.push({\n\t\t\t\t\tuser: $(this).find('.js-users').val(),\n\t\t\t\t\tlocks: $(this).find('.js-locks').val()\n\t\t\t\t});\n\t\t\t});\n\t\t\tapp.saveAjax('saveLocks', data).done(function (data) {\n\t\t\t\tSettings_Vtiger_Index_Js.showMessage({type: 'success', text: data.result.message});\n\t\t\t});\n\t\t});\n\t},\n\t/**\n\t * Main function\n\t */\n\tregisterEvents: function () {\n\t\tvar content = $('.contentsDiv');\n\t\tthis.registerAdd(content);\n\t\tthis.registerDelete(content);\n\t\tthis.registerSave(content);\n\t}\n});\n"],"names":["jQuery","Class","content","thisInstance","find","on","e","id","parseInt","val","cloneItem","clone","attr","addClass","append","html","registerDelete","Fields","Picklist","showSelect2ElementView","target","$","currentTarget","closest","remove","data","each","index","push","saveAjax","done","showMessage","type","text","result","message","registerAdd","registerSave"],"mappings":";;AAAA;AACA;AAEAA,OAAOC,KAAP,CAAa,yBAAb,EAAwC,EAAxC,EAA4C;;;;;cAK9B,qBAAUC,OAAV,EAAmB;MAC3BC,eAAe,IAAnB;UACQC,IAAR,CAAa,cAAb,EAA6BC,EAA7B,CAAgC,OAAhC,EAAyC,UAAUC,CAAV,EAAa;OACjDC,KAAKC,SAASN,QAAQE,IAAR,CAAa,gBAAb,EAA+BK,GAA/B,EAAT,IAAiD,CAA1D;OACIC,YAAYR,QAAQE,IAAR,CAAa,sBAAb,EAAqCO,KAArC,CAA2C,IAA3C,EAAiD,IAAjD,CAAhB;aACUP,IAAV,CAAe,IAAf,EAAqBQ,IAArB,CAA0B,SAA1B,EAAqCL,EAArC,EAAyCM,QAAzC,CAAkD,QAAQN,EAA1D;WACQH,IAAR,CAAa,uBAAb,EAAsCU,MAAtC,CAA6CJ,UAAUK,IAAV,EAA7C;WACQX,IAAR,CAAa,gBAAb,EAA+BK,GAA/B,CAAmCF,EAAnC;gBACaS,cAAb,CAA4Bd,QAAQE,IAAR,CAAa,WAAWG,EAAxB,CAA5B;OACIU,MAAJ,CAAWC,QAAX,CAAoBC,sBAApB,CAA2CjB,QAAQE,IAAR,CAAa,WAAWG,EAAxB,EAA4BH,IAA5B,CAAiC,QAAjC,CAA3C;GAPD;EAP0C;;;;;iBAqB3B,wBAAUF,OAAV,EAAmB;UAC1BE,IAAR,CAAa,iBAAb,EAAgCC,EAAhC,CAAmC,OAAnC,EAA4C,UAAUC,CAAV,EAAa;OACpDc,SAASC,EAAEf,EAAEgB,aAAJ,CAAb;UACOC,OAAP,CAAe,IAAf,EAAqBC,MAArB;GAFD;EAtB0C;;;;;eA+B7B,sBAAUtB,OAAV,EAAmB;UACxBE,IAAR,CAAa,gBAAb,EAA+BC,EAA/B,CAAkC,OAAlC,EAA2C,UAAUC,CAAV,EAAa;OACnDmB,OAAO,EAAX;WACQrB,IAAR,CAAa,0BAAb,EAAyCsB,IAAzC,CAA8C,UAAUC,KAAV,EAAiB;SACzDC,IAAL,CAAU;WACHP,EAAE,IAAF,EAAQjB,IAAR,CAAa,WAAb,EAA0BK,GAA1B,EADG;YAEFY,EAAE,IAAF,EAAQjB,IAAR,CAAa,WAAb,EAA0BK,GAA1B;KAFR;IADD;OAMIoB,QAAJ,CAAa,WAAb,EAA0BJ,IAA1B,EAAgCK,IAAhC,CAAqC,UAAUL,IAAV,EAAgB;6BAC3BM,WAAzB,CAAqC,EAACC,MAAM,SAAP,EAAkBC,MAAMR,KAAKS,MAAL,CAAYC,OAApC,EAArC;IADD;GARD;EAhC0C;;;;iBAgD3B,0BAAY;MACvBjC,UAAUmB,EAAE,cAAF,CAAd;OACKe,WAAL,CAAiBlC,OAAjB;OACKc,cAAL,CAAoBd,OAApB;OACKmC,YAAL,CAAkBnC,OAAlB;;CApDF"}