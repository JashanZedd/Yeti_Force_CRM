{"version":3,"file":"Locks.min.js","sources":["Locks.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class('Settings_Users_Locks_Js', {}, {\n\t/**\n\t * Add item\n\t * @param {jQuery} content\n\t */\n\tregisterAdd: function (content) {\n\t\tvar thisInstance = this;\n\t\tcontent.find('.js-add-item').on('click', function (e) {\n\t\t\tvar id = parseInt(content.find('#js-lock-count').val()) + 1;\n\t\t\tvar cloneItem = content.find('.js-clone-item tbody').clone(true, true);\n\t\t\tcloneItem.find('tr').attr('data-id', id).addClass('row' + id);\n\t\t\tcontent.find('.js-locks-table tbody').append(cloneItem.html());\n\t\t\tcontent.find('#js-lock-count').val(id);\n\t\t\tthisInstance.registerDelete(content.find('tr.row' + id));\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(content.find('tr.row' + id).find('select'));\n\t\t});\n\t},\n\t/**\n\t * Register events for delete item\n\t * @param {jQuery} content\n\t */\n\tregisterDelete: function (content) {\n\t\tcontent.find('.js-delete-item').on('click', function (e) {\n\t\t\tvar target = $(e.currentTarget);\n\t\t\ttarget.closest('tr').remove();\n\t\t});\n\t},\n\t/**\n\t * Register events for save\n\t * @param {jQuery} content\n\t */\n\tregisterSave: function (content) {\n\t\tcontent.find('.js-save-items').on('click', function (e) {\n\t\t\tvar data = [];\n\t\t\tcontent.find('.js-locks-table tbody tr').each(function (index) {\n\t\t\t\tdata.push({\n\t\t\t\t\tuser: $(this).find('.js-users').val(),\n\t\t\t\t\tlocks: $(this).find('.js-locks').val()\n\t\t\t\t});\n\t\t\t});\n\t\t\tapp.saveAjax('saveLocks', data).done(function (data) {\n\t\t\t\tSettings_Vtiger_Index_Js.showMessage({type: 'success', text: data.result.message});\n\t\t\t});\n\t\t});\n\t},\n\t/**\n\t * Main function\n\t */\n\tregisterEvents: function () {\n\t\tvar content = $('.contentsDiv');\n\t\tthis.registerAdd(content);\n\t\tthis.registerDelete(content);\n\t\tthis.registerSave(content);\n\t}\n});\n"],"names":["jQuery","Class","content","thisInstance","this","find","on","e","id","parseInt","val","cloneItem","clone","attr","addClass","append","html","registerDelete","Fields","Picklist","showSelect2ElementView","$","currentTarget","closest","remove","data","each","index","push","saveAjax","done","showMessage","type","text","result","message","registerAdd","registerSave"],"mappings":"aAGAA,OAAOC,MAAM,0BAA2B,GAAI,aAK9B,SAAUC,aAClBC,aAAeC,aACXC,KAAK,gBAAgBC,GAAG,SAAS,SAAUC,OAC9CC,GAAKC,SAASP,QAAQG,KAAK,kBAAkBK,OAAS,EACtDC,UAAYT,QAAQG,KAAK,wBAAwBO,OAAM,GAAM,aACvDP,KAAK,MAAMQ,KAAK,UAAWL,IAAIM,SAAS,MAAQN,YAClDH,KAAK,yBAAyBU,OAAOJ,UAAUK,gBAC/CX,KAAK,kBAAkBK,IAAIF,iBACtBS,eAAef,QAAQG,KAAK,SAAWG,SAChDU,OAAOC,SAASC,uBAAuBlB,QAAQG,KAAK,SAAWG,IAAIH,KAAK,8BAO9D,SAAUH,iBACjBG,KAAK,mBAAmBC,GAAG,SAAS,SAAUC,GACxCc,EAAEd,EAAEe,eACVC,QAAQ,MAAMC,0BAOT,SAAUtB,iBACfG,KAAK,kBAAkBC,GAAG,SAAS,SAAUC,OAChDkB,KAAO,WACHpB,KAAK,4BAA4BqB,MAAK,SAAUC,YAClDC,KAAK,MACHP,EAAEjB,MAAMC,KAAK,aAAaK,YACzBW,EAAEjB,MAAMC,KAAK,aAAaK,eAG/BmB,SAAS,YAAaJ,MAAMK,MAAK,SAAUL,+BACrBM,YAAY,CAACC,KAAM,UAAWC,KAAMR,KAAKS,OAAOC,gCAO5D,eACXjC,QAAUmB,EAAE,qBACXe,YAAYlC,cACZe,eAAef,cACfmC,aAAanC"}