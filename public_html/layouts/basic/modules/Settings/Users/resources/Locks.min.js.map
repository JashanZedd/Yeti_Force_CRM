{"version":3,"file":"Locks.min.js","sources":["Locks.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class(\n\t'Settings_Users_Locks_Js',\n\t{},\n\t{\n\t\t/**\n\t\t * Add item\n\t\t * @param {jQuery} content\n\t\t */\n\t\tregisterAdd: function (content) {\n\t\t\tvar thisInstance = this;\n\t\t\tcontent.find('.js-add-item').on('click', function (e) {\n\t\t\t\tvar id = parseInt(content.find('#js-lock-count').val()) + 1;\n\t\t\t\tvar cloneItem = content.find('.js-clone-item tbody').clone(true, true);\n\t\t\t\tcloneItem\n\t\t\t\t\t.find('tr')\n\t\t\t\t\t.attr('data-id', id)\n\t\t\t\t\t.addClass('row' + id);\n\t\t\t\tcontent.find('.js-locks-table tbody').append(cloneItem.html());\n\t\t\t\tcontent.find('#js-lock-count').val(id);\n\t\t\t\tthisInstance.registerDelete(content.find('tr.row' + id));\n\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(content.find('tr.row' + id).find('select'));\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register events for delete item\n\t\t * @param {jQuery} content\n\t\t */\n\t\tregisterDelete: function (content) {\n\t\t\tcontent.find('.js-delete-item').on('click', function (e) {\n\t\t\t\tvar target = $(e.currentTarget);\n\t\t\t\ttarget.closest('tr').remove();\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register events for save\n\t\t * @param {jQuery} content\n\t\t */\n\t\tregisterSave: function (content) {\n\t\t\tcontent.find('.js-save-items').on('click', function (e) {\n\t\t\t\tvar data = [];\n\t\t\t\tcontent.find('.js-locks-table tbody tr').each(function (index) {\n\t\t\t\t\tdata.push({\n\t\t\t\t\t\tuser: $(this).find('.js-users').val(),\n\t\t\t\t\t\tlocks: $(this).find('.js-locks').val()\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\tapp.saveAjax('saveLocks', data).done(function (data) {\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({ type: 'success', text: data.result.message });\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Main function\n\t\t */\n\t\tregisterEvents: function () {\n\t\t\tvar content = $('.contentsDiv');\n\t\t\tthis.registerAdd(content);\n\t\t\tthis.registerDelete(content);\n\t\t\tthis.registerSave(content);\n\t\t}\n\t}\n);\n"],"names":["jQuery","Class","registerAdd","content","find","on","id","parseInt","val","cloneItem","clone","attr","addClass","append","html","thisInstance","registerDelete","App","Fields","Picklist","showSelect2ElementView","e","$","currentTarget","target","closest","remove","registerSave","data","each","push","user","locks","app","saveAjax","done","Settings_Vtiger_Index_Js","showMessage","type","text","result","message","registerEvents"],"mappings":"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"}