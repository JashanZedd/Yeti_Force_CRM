jQuery.Class("Settings_Users_Locks_Js",{},{registerAdd:function(b){var a=this;b.find(".js-add-item").on("click",function(d){var f=parseInt(b.find("#js-lock-count").val())+1;var c=b.find(".js-clone-item tbody").clone(true,true);c.find("tr").attr("data-id",f).addClass("row"+f);b.find(".js-locks-table tbody").append(c.html());b.find("#js-lock-count").val(f);a.registerDelete(b.find("tr.row"+f));App.Fields.Picklist.showSelect2ElementView(b.find("tr.row"+f).find("select"))})},registerDelete:function(a){a.find(".js-delete-item").on("click",function(c){var b=$(c.currentTarget);b.closest("tr").remove()})},registerSave:function(a){a.find(".js-save-items").on("click",function(c){var b=[];a.find(".js-locks-table tbody tr").each(function(d){b.push({user:$(this).find(".js-users").val(),locks:$(this).find(".js-locks").val()})});app.saveAjax("saveLocks",b).then(function(d){Settings_Vtiger_Index_Js.showMessage({type:"success",text:d.result.message})})})},registerEvents:function(){var a=$(".contentsDiv");this.registerAdd(a);this.registerDelete(a);this.registerSave(a)}});