var Colors_Js={initEvants:function(){$(".UserColors .updateColor").click(Colors_Js.updateColor);$(".UserColors .generateColor").click(Colors_Js.generateColor);$(".UserColors .activeColor").click(Colors_Js.activeColor)},updateColor:function(f){var g=$(f.currentTarget);var a=g.closest("tr");var c=g.closest("table");var j=jQuery(".UserColors .editColorContainer");var h=j.clone(true,true);var d=g.data("metod");var i=$("#calendarColorPreview"+g.data("type")+g.data("id"));var b=function(e){e.find(".editColorContainer").removeClass("hide").show();var l=e.find(".selectedColor");l.val(i.data("color"));var k={flat:true,color:i.data("color"),onChange:function(m,o,n){l.val("#"+o)}};if(typeof customParams!="undefined"){k=jQuery.extend(k,customParams)}e.find(".calendarColorPicker").ColorPicker(k);e.find('[name="saveButton"]').click(function(n){var m=$.progressIndicator({message:app.vtranslate("Update labels"),blockInfo:{enabled:true}});Colors_Js.registerSaveEvent(d,{color:l.val(),id:g.data("id"),table:a.data("table"),field:c.data("fieldname"),});i.css("background",l.val());g.data("color",l.val());m.progressIndicator({mode:"hide"});app.hideModalWindow()})};app.showModalWindow(h,function(e){if(typeof b=="function"){b(e)}},{width:"1000px"})},generateColor:function(f){var d=$(f.currentTarget);var b=d.closest("table");var c=d.data("metod");var a=$("#calendarColorPreview"+d.data("type")+d.data("id"));var g={module:app.getModuleName(),action:"SaveAjax",mode:"generateColor",params:{id:d.data("id"),color:a.data("color"),table:d.data("table"),field:b.data("fieldname"),mode:c,}};AppConnector.request(g).then(function(h){var e=h.result;var i={text:e.message,animation:"show",type:"success"};a.css("background",e.color);a.data("color",e.color);Vtiger_Helper_Js.showPnotify(i)},function(h,e){})},registerSaveEvent:function(c,a){var b={};b.data={module:app.getModuleName(),action:"SaveAjax",mode:c,params:a};b.async=false;b.dataType="json";AppConnector.request(b).done(function(e){var d=e.result;var f={text:d.message,animation:"show",type:"success"};Vtiger_Helper_Js.showPnotify(f);return d},function(e,d){})},activeColor:function(c){var b=$(c.currentTarget);var a=$("#calendarColorPreview"+b.data("type")+b.data("id"));var d={};d.data={module:app.getModuleName(),action:"SaveAjax",mode:"activeColor",params:{status:b.is(":checked"),color:a.data("color"),id:b.data("id")}};d.async=false;d.dataType="json";AppConnector.request(d).done(function(f){var e=f.result;var g={text:e.message,animation:"show",type:"success"};Vtiger_Helper_Js.showPnotify(g);a.css("background",e.color);a.data("color",e.color)})},registerEvents:function(){Colors_Js.initEvants()}};$(document).ready(function(){Colors_Js.registerEvents()});