var Colors_Js={initEvants:function(){$(".UserColors .updateColor").click(Colors_Js.updateColor);$(".UserColors .generateColor").click(Colors_Js.generateColor);$(".UserColors .activeColor").click(Colors_Js.activeColor)},updateColor:function(i){var h=$(i.currentTarget);var c=h.closest("tr");var f=h.closest("table");var a=jQuery(".UserColors .editColorContainer");var b=a.clone(true,true);var g=h.data("metod");var d=function(e){e.find(".editColorContainer").removeClass("hide").show();var k=e.find(".selectedColor");k.val($("#calendarColorPreview"+h.data("type")+h.data("id")).data("color"));var j={flat:true,color:$("#calendarColorPreview"+h.data("type")+h.data("id")).data("color"),onChange:function(l,n,m){k.val("#"+n)}};if(typeof customParams!="undefined"){j=jQuery.extend(j,customParams)}e.find(".calendarColorPicker").ColorPicker(j);e.find('[name="saveButton"]').click(function(m){var l=$.progressIndicator({message:app.vtranslate("Update labels"),blockInfo:{enabled:true}});console.log(m);Colors_Js.registerSaveEvent(g,{color:k.val(),id:h.data("id"),table:c.data("table"),field:f.data("fieldname"),});$("#calendarColorPreview"+h.data("type")+h.data("id")).css("background",k.val());h.data("color",k.val());l.progressIndicator({mode:"hide"});app.hideModalWindow()})};app.showModalWindow(b,function(e){if(typeof d=="function"){d(e)}},{width:"1000px"})},generateColor:function(d){var c=$(d.currentTarget);var a=c.closest("table");var b=c.data("metod");var f={module:app.getModuleName(),action:"SaveAjax",mode:"generateColor",params:{id:c.data("id"),color:$("#calendarColorPreview"+c.data("type")+c.data("id")).data("color"),table:c.data("table"),field:a.data("fieldname"),mode:b,}};AppConnector.request(f).then(function(g){var e=g.result;var h={text:e.message,animation:"show",type:"success"};$("#calendarColorPreview"+c.data("type")+c.data("id")).css("background",e.color);$("#calendarColorPreview"+c.data("type")+c.data("id")).data("color",e.color);Vtiger_Helper_Js.showPnotify(h)},function(g,e){})},registerSaveEvent:function(c,a){var b={};b.data={module:app.getModuleName(),action:"SaveAjax",mode:c,params:a};b.async=false;b.dataType="json";AppConnector.request(b).done(function(e){var d=e.result;var f={text:d.message,animation:"show",type:"success"};Vtiger_Helper_Js.showPnotify(f);return d},function(e,d){})},activeColor:function(b){var a=$(b.currentTarget);var c={};c.data={module:app.getModuleName(),action:"SaveAjax",mode:"activeColor",params:{status:a.is(":checked"),color:$("#calendarColorPreview"+a.data("type")+a.data("id")).data("color"),id:a.data("id")}};c.async=false;c.dataType="json";AppConnector.request(c).done(function(e){var d=e.result;var f={text:d.message,animation:"show",type:"success"};Vtiger_Helper_Js.showPnotify(f);$("#calendarColorPreview"+a.data("type")+a.data("id")).css("background",d.color);$("#calendarColorPreview"+a.data("type")+a.data("id")).data("color",d.color)})},registerEvents:function(){Colors_Js.initEvants()}};$(document).ready(function(){Colors_Js.registerEvents()});