{"version":3,"file":"RegistrationSerialModal.min.js","sources":["RegistrationSerialModal.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class('Settings_YetiForce_RegistrationSerialModal_Js', {\n\tregisterEvents() {\n\t\tconst container = $(\"[data-view='RegistrationSerialModal']\");\n\t\tconst form = container.find('form');\n\t\tform.validationEngine(app.validationEngineOptions);\n\t\tform.on('submit', function (e) {\n\t\t\te.preventDefault();\n\t\t\tcontainer.find('[name=\"saveButton\"]').click();\n\t\t});\n\t\tcontainer.find('[name=\"saveButton\"]').on('click', function (e) {\n\t\t\tif (!form.validationEngine('validate')) {\n\t\t\t\te.preventDefault();\n\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\ttext: app.vtranslate('JS_ENTER_REGISTRATION_KEY'),\n\t\t\t\t\ttype: 'error'\n\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tcontainer.find('button[name=saveButton]').prop(\"disabled\", true);\n\t\t\tvar progress = $.progressIndicator({\n\t\t\t\t'message': app.vtranslate('JS_LOADING_PLEASE_WAIT'),\n\t\t\t\t'blockInfo': {\n\t\t\t\t\t'enabled': true\n\t\t\t\t}\n\t\t\t});\n\t\t\tAppConnector.request({\n\t\t\t\t'module': 'YetiForce',\n\t\t\t\t'parent': 'Settings',\n\t\t\t\t'action': 'Register',\n\t\t\t\t'mode': 'serial',\n\t\t\t\t'key': container.find('.registrationKey').val()\n\t\t\t}).done(function (data) {\n\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\ttext: data['result']['message'],\n\t\t\t\t\ttype: data['result']['type']\n\t\t\t\t});\n\t\t\t\tprogress.progressIndicator({'mode': 'hide'});\n\t\t\t\tif (data['result']['type'] === 'success') {\n\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t}\n\t\t\t\tcontainer.find('button[name=saveButton]').prop(\"disabled\", false);\n\t\t\t\treturn data['result'];\n\t\t\t});\n\t\t});\n\t}\n}, {});\nSettings_YetiForce_RegistrationSerialModal_Js.registerEvents();\n"],"names":["jQuery","Class","container","$","form","find","validationEngine","app","validationEngineOptions","on","e","preventDefault","click","showPnotify","vtranslate","prop","progress","progressIndicator","request","val","done","data","hideModalWindow","Settings_YetiForce_RegistrationSerialModal_Js","registerEvents"],"mappings":";;AAAA;AACA;AAEAA,OAAOC,KAAP,CAAa,+CAAb,EAA8D;eAAA,4BAC5C;MACVC,YAAYC,EAAE,uCAAF,CAAlB;MACMC,OAAOF,UAAUG,IAAV,CAAe,MAAf,CAAb;OACKC,gBAAL,CAAsBC,IAAIC,uBAA1B;OACKC,EAAL,CAAQ,QAAR,EAAkB,UAAUC,CAAV,EAAa;KAC5BC,cAAF;aACUN,IAAV,CAAe,qBAAf,EAAsCO,KAAtC;GAFD;YAIUP,IAAV,CAAe,qBAAf,EAAsCI,EAAtC,CAAyC,OAAzC,EAAkD,UAAUC,CAAV,EAAa;OAC1D,CAACN,KAAKE,gBAAL,CAAsB,UAAtB,CAAL,EAAwC;MACrCK,cAAF;qBACiBE,WAAjB,CAA6B;WACtBN,IAAIO,UAAJ,CAAe,2BAAf,CADsB;WAEtB;KAFP;WAIO,KAAP;;aAEST,IAAV,CAAe,yBAAf,EAA0CU,IAA1C,CAA+C,UAA/C,EAA2D,IAA3D;OACIC,WAAWb,EAAEc,iBAAF,CAAoB;eACvBV,IAAIO,UAAJ,CAAe,wBAAf,CADuB;iBAErB;gBACD;;IAHE,CAAf;gBAMaI,OAAb,CAAqB;cACV,WADU;cAEV,UAFU;cAGV,UAHU;YAIZ,QAJY;WAKbhB,UAAUG,IAAV,CAAe,kBAAf,EAAmCc,GAAnC;IALR,EAMGC,IANH,CAMQ,UAAUC,IAAV,EAAgB;qBACNR,WAAjB,CAA6B;WACtBQ,KAAK,QAAL,EAAe,SAAf,CADsB;WAEtBA,KAAK,QAAL,EAAe,MAAf;KAFP;aAISJ,iBAAT,CAA2B,EAAC,QAAQ,MAAT,EAA3B;QACII,KAAK,QAAL,EAAe,MAAf,MAA2B,SAA/B,EAA0C;SACrCC,eAAJ;;cAESjB,IAAV,CAAe,yBAAf,EAA0CU,IAA1C,CAA+C,UAA/C,EAA2D,KAA3D;WACOM,KAAK,QAAL,CAAP;IAhBD;GAhBD;;CATF,EA6CG,EA7CH;AA8CAE,8CAA8CC,cAA9C"}