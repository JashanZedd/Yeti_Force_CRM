{"version":3,"file":"RegistrationOnlineModal.min.js","sources":["RegistrationOnlineModal.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class(\n\t'Settings_YetiForce_RegistrationOnlineModal_Js',\n\t{\n\t\t/**\n\t\t * Register events for form checkbox element\n\t\t */\n\t\tregisterNewsletter() {\n\t\t\tconst form = $('[data-view=\"RegistrationOnlineModal\"]').find('form');\n\t\t\tform.find('[id$=\"newsletter]\"]').on('click', e => {\n\t\t\t\tlet inputsContainer = $(e.target).closest('.js-card-body');\n\t\t\t\tif ($(e.target).prop('checked')) {\n\t\t\t\t\tinputsContainer.find('[id$=\"firstname]\"]').attr('data-validation-engine', 'validate[required]');\n\t\t\t\t\tinputsContainer.find('[id$=\"lastname]\"]').attr('data-validation-engine', 'validate[required]');\n\t\t\t\t\tinputsContainer.find('[id$=\"email]\"]').attr('data-validation-engine', 'validate[required,custom[email]]');\n\t\t\t\t\tinputsContainer.find('.js-newsletter-content').removeClass('d-none');\n\t\t\t\t} else {\n\t\t\t\t\tinputsContainer\n\t\t\t\t\t\t.find('[id$=\"firstname]\"]')\n\t\t\t\t\t\t.removeAttr('data-validation-engine')\n\t\t\t\t\t\t.val('');\n\t\t\t\t\tinputsContainer\n\t\t\t\t\t\t.find('[id$=\"lastname]\"]')\n\t\t\t\t\t\t.removeAttr('data-validation-engine')\n\t\t\t\t\t\t.val('');\n\t\t\t\t\tinputsContainer\n\t\t\t\t\t\t.find('[id$=\"email]\"]')\n\t\t\t\t\t\t.removeAttr('data-validation-engine')\n\t\t\t\t\t\t.val('');\n\t\t\t\t\tinputsContainer.find('.js-newsletter-content').addClass('d-none');\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterEvents() {\n\t\t\tconst container = $(\"[data-view='RegistrationOnlineModal']\");\n\t\t\tconst form = container.find('form');\n\t\t\tform.validationEngine(app.validationEngineOptions);\n\t\t\tform.on('submit', function(e) {\n\t\t\t\te.preventDefault();\n\t\t\t\tcontainer.find('[name=\"saveButton\"]').click();\n\t\t\t});\n\t\t\tcontainer.find('[name=\"saveButton\"]').on('click', function(e) {\n\t\t\t\tif (!form.validationEngine('validate')) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\ttext: app.vtranslate('JS_ENTER_ALL_REGISTRATION_DATA'),\n\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t});\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tcontainer.find('button[name=saveButton]').prop('disabled', true);\n\t\t\t\tlet progress = $.progressIndicator({\n\t\t\t\t\tmessage: app.vtranslate('JS_LOADING_PLEASE_WAIT'),\n\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\tenabled: true\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tAppConnector.request({\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tdata:  new FormData(form[0]),\n\t\t\t\t\tprocessData: false,\n\t\t\t\t\tcontentType: false,\n\t\t\t\t}).done(function(data) {\n\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\ttext: data['result']['message'],\n\t\t\t\t\t\ttype: data['result']['type']\n\t\t\t\t\t});\n\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tif (data['result']['type'] === 'success') {\n\t\t\t\t\t\tlet href = location.href.replace('displayModal=online', '');\n\t\t\t\t\t\tlocation.replace(href);\n\t\t\t\t\t}\n\t\t\t\t\tcontainer.find('button[name=saveButton]').prop('disabled', false);\n\t\t\t\t\treturn data['result'];\n\t\t\t\t});\n\t\t\t});\n\t\t\tthis.registerNewsletter();\n\t\t}\n\t},\n\t{}\n);\nSettings_YetiForce_RegistrationOnlineModal_Js.registerEvents();\n"],"names":["jQuery","Class","$","find","on","inputsContainer","e","target","closest","prop","attr","removeClass","removeAttr","val","addClass","container","form","validationEngine","app","validationEngineOptions","preventDefault","click","showPnotify","vtranslate","progress","progressIndicator","request","FormData","done","data","mode","href","location","replace","registerNewsletter","Settings_YetiForce_RegistrationOnlineModal_Js","registerEvents"],"mappings":"aAGAA,OAAOC,MACN,gDACA,+BAKeC,EAAE,yCAAyCC,KAAK,QACxDA,KAAK,uBAAuBC,GAAG,SAAS,gBACxCC,gBAAkBH,EAAEI,EAAEC,QAAQC,QAAQ,iBACtCN,EAAEI,EAAEC,QAAQE,KAAK,4BACJN,KAAK,sBAAsBO,KAAK,yBAA0B,sCAC1DP,KAAK,qBAAqBO,KAAK,yBAA0B,sCACzDP,KAAK,kBAAkBO,KAAK,yBAA0B,oDACtDP,KAAK,0BAA0BQ,YAAY,4BAGzDR,KAAK,sBACLS,WAAW,0BACXC,IAAI,oBAEJV,KAAK,qBACLS,WAAW,0BACXC,IAAI,oBAEJV,KAAK,kBACLS,WAAW,0BACXC,IAAI,oBACUV,KAAK,0BAA0BW,SAAS,6CAKpDC,UAAYb,EAAE,yCACdc,KAAOD,UAAUZ,KAAK,aACvBc,iBAAiBC,IAAIC,8BACrBf,GAAG,UAAU,SAASE,KACxBc,2BACQjB,KAAK,uBAAuBkB,qBAE7BlB,KAAK,uBAAuBC,GAAG,SAAS,SAASE,OACrDU,KAAKC,iBAAiB,qBACxBG,kCACeE,YAAY,MACtBJ,IAAIK,WAAW,uCACf,WAEA,YAEEpB,KAAK,2BAA2BM,KAAK,YAAY,OACvDe,SAAWtB,EAAEuB,kBAAkB,SACzBP,IAAIK,WAAW,oCACb,UACD,kBAGEG,QAAQ,QACZ,YACD,IAAIC,SAASX,KAAK,iBACZ,eACA,IACXY,MAAK,SAASC,0BACCP,YAAY,MACtBO,KAAA,OAAA,aACAA,KAAA,OAAA,gBAEEJ,kBAAkB,CAAEK,KAAM,SACJ,YAA3BD,KAAA,OAAA,KAAsC,KACrCE,KAAOC,SAASD,KAAKE,QAAQ,sBAAuB,aAC/CA,QAAQF,uBAER5B,KAAK,2BAA2BM,KAAK,YAAY,GACpDoB,KAAA,kBAGJK,uBAGP,IAEDC,8CAA8CC"}