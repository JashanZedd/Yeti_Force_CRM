{"version":3,"file":"RegistrationOnlineModal.min.js","sources":["RegistrationOnlineModal.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class(\n\t'Settings_YetiForce_RegistrationOnlineModal_Js',\n\t{\n\t\t/**\n\t\t * Register events for form checkbox element\n\t\t */\n\t\tregisterNewsletter() {\n\t\t\tconst form = $('[data-view=\"RegistrationOnlineModal\"]').find('form');\n\t\t\tform.find('[id$=\"newsletter]\"]').on('click', e => {\n\t\t\t\tlet inputsContainer = $(e.target).closest('.js-card-body');\n\t\t\t\tif ($(e.target).prop('checked')) {\n\t\t\t\t\tinputsContainer.find('[id$=\"firstname]\"]').attr('data-validation-engine', 'validate[required]');\n\t\t\t\t\tinputsContainer.find('[id$=\"lastname]\"]').attr('data-validation-engine', 'validate[required]');\n\t\t\t\t\tinputsContainer.find('[id$=\"email]\"]').attr('data-validation-engine', 'validate[required,custom[email]]');\n\t\t\t\t\tinputsContainer.find('.js-newsletter-content').removeClass('d-none');\n\t\t\t\t} else {\n\t\t\t\t\tinputsContainer\n\t\t\t\t\t\t.find('[id$=\"firstname]\"]')\n\t\t\t\t\t\t.removeAttr('data-validation-engine')\n\t\t\t\t\t\t.val('');\n\t\t\t\t\tinputsContainer\n\t\t\t\t\t\t.find('[id$=\"lastname]\"]')\n\t\t\t\t\t\t.removeAttr('data-validation-engine')\n\t\t\t\t\t\t.val('');\n\t\t\t\t\tinputsContainer\n\t\t\t\t\t\t.find('[id$=\"email]\"]')\n\t\t\t\t\t\t.removeAttr('data-validation-engine')\n\t\t\t\t\t\t.val('');\n\t\t\t\t\tinputsContainer.find('.js-newsletter-content').addClass('d-none');\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterEvents() {\n\t\t\tconst container = $(\"[data-view='RegistrationOnlineModal']\");\n\t\t\tconst form = container.find('form');\n\t\t\tform.validationEngine(app.validationEngineOptions);\n\t\t\tform.on('submit', function(e) {\n\t\t\t\te.preventDefault();\n\t\t\t\tcontainer.find('[name=\"saveButton\"]').click();\n\t\t\t});\n\t\t\tcontainer.find('[name=\"saveButton\"]').on('click', function(e) {\n\t\t\t\tif (!form.validationEngine('validate')) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\ttext: app.vtranslate('JS_ENTER_ALL_REGISTRATION_DATA'),\n\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t});\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tcontainer.find('button[name=saveButton]').prop('disabled', true);\n\t\t\t\tlet progress = $.progressIndicator({\n\t\t\t\t\tmessage: app.vtranslate('JS_LOADING_PLEASE_WAIT'),\n\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\tenabled: true\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tAppConnector.request({\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tdata:  new FormData(form[0]),\n\t\t\t\t\tprocessData: false,\n\t\t\t\t\tcontentType: false,\n\t\t\t\t}).done(function(data) {\n\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\ttext: data['result']['message'],\n\t\t\t\t\t\ttype: data['result']['type']\n\t\t\t\t\t});\n\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tif (data['result']['type'] === 'success') {\n\t\t\t\t\t\tlet href = location.href.replace('displayModal=online', '');\n\t\t\t\t\t\tlocation.replace(href);\n\t\t\t\t\t}\n\t\t\t\t\tcontainer.find('button[name=saveButton]').prop('disabled', false);\n\t\t\t\t\treturn data['result'];\n\t\t\t\t});\n\t\t\t});\n\t\t\tthis.registerNewsletter();\n\t\t}\n\t},\n\t{}\n);\nSettings_YetiForce_RegistrationOnlineModal_Js.registerEvents();\n"],"names":["jQuery","Class","form","$","find","on","inputsContainer","e","target","closest","prop","attr","removeClass","removeAttr","val","addClass","container","validationEngine","app","validationEngineOptions","preventDefault","click","showPnotify","vtranslate","progress","progressIndicator","request","FormData","done","data","mode","href","location","replace","registerNewsletter","Settings_YetiForce_RegistrationOnlineModal_Js","registerEvents"],"mappings":";;AAAA;AACA;AAEAA,OAAOC,KAAP,CACC,+CADD,EAEC;;;;mBAAA,gCAIsB;MACdC,OAAOC,EAAE,uCAAF,EAA2CC,IAA3C,CAAgD,MAAhD,CAAb;OACKA,IAAL,CAAU,qBAAV,EAAiCC,EAAjC,CAAoC,OAApC,EAA6C,aAAK;OAC7CC,kBAAkBH,EAAEI,EAAEC,MAAJ,EAAYC,OAAZ,CAAoB,eAApB,CAAtB;OACIN,EAAEI,EAAEC,MAAJ,EAAYE,IAAZ,CAAiB,SAAjB,CAAJ,EAAiC;oBAChBN,IAAhB,CAAqB,oBAArB,EAA2CO,IAA3C,CAAgD,wBAAhD,EAA0E,oBAA1E;oBACgBP,IAAhB,CAAqB,mBAArB,EAA0CO,IAA1C,CAA+C,wBAA/C,EAAyE,oBAAzE;oBACgBP,IAAhB,CAAqB,gBAArB,EAAuCO,IAAvC,CAA4C,wBAA5C,EAAsE,kCAAtE;oBACgBP,IAAhB,CAAqB,wBAArB,EAA+CQ,WAA/C,CAA2D,QAA3D;IAJD,MAKO;oBAEJR,IADF,CACO,oBADP,EAEES,UAFF,CAEa,wBAFb,EAGEC,GAHF,CAGM,EAHN;oBAKEV,IADF,CACO,mBADP,EAEES,UAFF,CAEa,wBAFb,EAGEC,GAHF,CAGM,EAHN;oBAKEV,IADF,CACO,gBADP,EAEES,UAFF,CAEa,wBAFb,EAGEC,GAHF,CAGM,EAHN;oBAIgBV,IAAhB,CAAqB,wBAArB,EAA+CW,QAA/C,CAAwD,QAAxD;;GApBF;EANF;eAAA,4BA8BkB;MACVC,YAAYb,EAAE,uCAAF,CAAlB;MACMD,OAAOc,UAAUZ,IAAV,CAAe,MAAf,CAAb;OACKa,gBAAL,CAAsBC,IAAIC,uBAA1B;OACKd,EAAL,CAAQ,QAAR,EAAkB,UAASE,CAAT,EAAY;KAC3Ba,cAAF;aACUhB,IAAV,CAAe,qBAAf,EAAsCiB,KAAtC;GAFD;YAIUjB,IAAV,CAAe,qBAAf,EAAsCC,EAAtC,CAAyC,OAAzC,EAAkD,UAASE,CAAT,EAAY;OACzD,CAACL,KAAKe,gBAAL,CAAsB,UAAtB,CAAL,EAAwC;MACrCG,cAAF;qBACiBE,WAAjB,CAA6B;WACtBJ,IAAIK,UAAJ,CAAe,gCAAf,CADsB;WAEtB;KAFP;WAIO,KAAP;;aAESnB,IAAV,CAAe,yBAAf,EAA0CM,IAA1C,CAA+C,UAA/C,EAA2D,IAA3D;OACIc,WAAWrB,EAAEsB,iBAAF,CAAoB;aACzBP,IAAIK,UAAJ,CAAe,wBAAf,CADyB;eAEvB;cACD;;IAHI,CAAf;gBAMaG,OAAb,CAAqB;YACZ,MADY;UAEb,IAAIC,QAAJ,CAAazB,KAAK,CAAL,CAAb,CAFa;iBAGP,KAHO;iBAIP;IAJd,EAKG0B,IALH,CAKQ,UAASC,IAAT,EAAe;qBACLP,WAAjB,CAA6B;WACtBO,KAAK,QAAL,EAAe,SAAf,CADsB;WAEtBA,KAAK,QAAL,EAAe,MAAf;KAFP;aAISJ,iBAAT,CAA2B,EAAEK,MAAM,MAAR,EAA3B;QACID,KAAK,QAAL,EAAe,MAAf,MAA2B,SAA/B,EAA0C;SACrCE,OAAOC,SAASD,IAAT,CAAcE,OAAd,CAAsB,qBAAtB,EAA6C,EAA7C,CAAX;cACSA,OAAT,CAAiBF,IAAjB;;cAES3B,IAAV,CAAe,yBAAf,EAA0CM,IAA1C,CAA+C,UAA/C,EAA2D,KAA3D;WACOmB,KAAK,QAAL,CAAP;IAhBD;GAhBD;OAmCKK,kBAAL;;CA3EH,EA8EC,EA9ED;AAgFAC,8CAA8CC,cAA9C"}