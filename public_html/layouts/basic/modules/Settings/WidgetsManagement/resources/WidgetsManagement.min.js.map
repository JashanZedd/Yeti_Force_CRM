{"version":3,"file":"WidgetsManagement.min.js","sources":["WidgetsManagement.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class(\n\t'Settings_WidgetsManagement_Js',\n\t{},\n\t{\n\t\t/**\n\t\t * Container element\n\t\t */\n\t\tcontainer: false,\n\t\t/**\n\t\t *\n\t\t * @param {jQuery} container\n\t\t * @returns {jQuery}\n\t\t */\n\t\tsetContainer: function (container) {\n\t\t\tthis.container = container;\n\t\t\treturn this.container;\n\t\t},\n\t\t/**\n\t\t * Function to create the array of block roles list\n\t\t */\n\t\tgetAuthorization: function () {\n\t\t\tlet authorization = [],\n\t\t\t\tcontainer = jQuery('#moduleBlocks');\n\t\t\tcontainer.find('.editFieldsTable').each(function () {\n\t\t\t\tauthorization.push(jQuery(this).data('code').toString());\n\t\t\t});\n\t\t\treturn authorization;\n\t\t},\n\n\t\tgetCurrentDashboardId() {\n\t\t\treturn $('.selectDashboard li a.active').parent().data('id');\n\t\t},\n\t\tregisterAddedDashboard() {\n\t\t\tconst thisInstance = this;\n\t\t\t$('.addDashboard').on('click', () => {\n\t\t\t\tapp.showModalWindow({\n\t\t\t\t\turl: 'index.php?parent=Settings&module=' + app.getModuleName() + '&view=DashboardType',\n\t\t\t\t\tsendByAjaxCb: () => {\n\t\t\t\t\t\tlet contentsDiv = $('.contentsDiv');\n\t\t\t\t\t\tthisInstance.getModuleLayoutEditor('Home').done((data) => {\n\t\t\t\t\t\t\tthisInstance.updateContentsDiv(contentsDiv, data);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterSelectDashboard() {\n\t\t\tconst thisInstance = this;\n\t\t\t$('.selectDashboard li').on('click', (e) => {\n\t\t\t\tlet contentsDiv = $('.contentsDiv');\n\t\t\t\tthisInstance\n\t\t\t\t\t.getModuleLayoutEditor($('#selectedModuleName').val(), $(e.currentTarget).data('id'))\n\t\t\t\t\t.done((data) => {\n\t\t\t\t\t\tthisInstance.updateContentsDiv(contentsDiv, data);\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterDashboardAction() {\n\t\t\tconst thisInstance = this;\n\t\t\t$('.editDashboard').on('click', (e) => {\n\t\t\t\tlet currentTarget = $(e.currentTarget);\n\t\t\t\te.stopPropagation();\n\t\t\t\tapp.showModalWindow({\n\t\t\t\t\turl:\n\t\t\t\t\t\t'index.php?parent=Settings&module=' +\n\t\t\t\t\t\tapp.getModuleName() +\n\t\t\t\t\t\t'&view=DashboardType&dashboardId=' +\n\t\t\t\t\t\tcurrentTarget.closest('li').data('id'),\n\t\t\t\t\tsendByAjaxCb: () => {\n\t\t\t\t\t\tlet contentsDiv = $('.contentsDiv');\n\t\t\t\t\t\tthisInstance.getModuleLayoutEditor('Home', currentTarget.closest('li').data('id')).done((data) => {\n\t\t\t\t\t\t\tthisInstance.updateContentsDiv(contentsDiv, data);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t\t$('.deleteDashboard').on('click', (e) => {\n\t\t\t\tlet currentTarget = $(e.currentTarget);\n\t\t\t\te.stopPropagation();\n\t\t\t\tAppConnector.request({\n\t\t\t\t\tparent: 'Settings',\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\taction: 'Dashboard',\n\t\t\t\t\tmode: 'delete',\n\t\t\t\t\tdashboardId: currentTarget.closest('li').data('id')\n\t\t\t\t}).done(() => {\n\t\t\t\t\tlet contentsDiv = $('.contentsDiv');\n\t\t\t\t\tthisInstance.getModuleLayoutEditor('Home', 1).done((data) => {\n\t\t\t\t\t\tthisInstance.updateContentsDiv(contentsDiv, data);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to register click event for add custom block button\n\t\t */\n\t\tregisterAddBlockDashBoard: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar contents = jQuery('#layoutDashBoards');\n\t\t\tcontents.find('.addBlockDashBoard').on('click', function (e) {\n\t\t\t\tvar addBlockContainer = contents.find('.addBlockDashBoardModal').clone(true, true);\n\t\t\t\tvar inUseAuthorization = thisInstance.getAuthorization();\n\t\t\t\taddBlockContainer.find('select.authorized option').each(function () {\n\t\t\t\t\tif (jQuery.inArray(jQuery(this).val(), inUseAuthorization) != -1) jQuery(this).remove();\n\t\t\t\t});\n\n\t\t\t\tvar callBackFunction = function (data) {\n\t\t\t\t\tApp.Fields.Picklist.changeSelectElementView(data.find('select'));\n\t\t\t\t\tvar form = data.find('.addBlockDashBoardForm');\n\t\t\t\t\tform.validationEngine(app.validationEngineOptions);\n\t\t\t\t\tform.on('submit', function (e) {\n\t\t\t\t\t\tif (form.validationEngine('validate')) {\n\t\t\t\t\t\t\tvar paramsForm = form.serializeFormData();\n\t\t\t\t\t\t\tdelete paramsForm._csrf;\n\t\t\t\t\t\t\tthisInstance.save(paramsForm, 'addBlock').done(function (data) {\n\t\t\t\t\t\t\t\tvar params = {};\n\t\t\t\t\t\t\t\tvar response = data.result;\n\t\t\t\t\t\t\t\tif (response['success']) {\n\t\t\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\t\t\tparams['text'] = app.vtranslate('JS_BLOCK_ADDED');\n\t\t\t\t\t\t\t\t\tthisInstance.reloadContent();\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tparams['text'] = response['message'];\n\t\t\t\t\t\t\t\t\tparams['type'] = 'error';\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t\tapp.showModalWindow(\n\t\t\t\t\taddBlockContainer,\n\t\t\t\t\tfunction (data) {\n\t\t\t\t\t\tif (typeof callBackFunction == 'function') {\n\t\t\t\t\t\t\tcallBackFunction(data);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(data.find('.js-authorized'));\n\t\t\t\t\t},\n\t\t\t\t\t{ width: '1000px' }\n\t\t\t\t);\n\t\t\t});\n\t\t},\n\t\tsave: function (form, mode, params = null) {\n\t\t\tvar aDeferred = jQuery.Deferred();\n\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (!params) {\n\t\t\t\tparams = {};\n\t\t\t\tparams['form'] = form;\n\t\t\t\tparams['module'] = app.getModuleName();\n\t\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\t\tparams['sourceModule'] = jQuery('#selectedModuleName').val();\n\t\t\t\tparams['action'] = 'SaveAjax';\n\t\t\t\tparams['mode'] = mode;\n\t\t\t}\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t})\n\t\t\t\t.fail(function (error) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\taDeferred.reject(error);\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\n\t\tregisterSpecialWidget: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar container = jQuery('#layoutDashBoards');\n\t\t\tcontainer.find('.addNotebook').on('click', function (e) {\n\t\t\t\tthisInstance.addNoteBookWidget(this, jQuery(this).data('url'));\n\t\t\t});\n\t\t\tcontainer.find('.addMiniList').on('click', function (e) {\n\t\t\t\tthisInstance.addMiniListWidget(this, jQuery(this).data('url'));\n\t\t\t});\n\t\t\tcontainer.find('.addRss').on('click', function (e) {\n\t\t\t\tthisInstance.addRssWidget($(e.currentTarget), jQuery(this).data('url'));\n\t\t\t});\n\t\t},\n\t\taddRssWidget: function (element, url) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar objectToShowModal = {\n\t\t\t\turl: 'index.php?module=' + app.getModuleName() + '&parent=' + app.getParentModuleName() + '&view=AddRss',\n\t\t\t\tcb: function (container) {\n\t\t\t\t\tcontainer.find('.removeChannel').on('click', function (e) {\n\t\t\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\t\t\tvar row = currentTarget.closest('.form-group');\n\t\t\t\t\t\trow.remove();\n\t\t\t\t\t});\n\t\t\t\t\tcontainer.find('.addChannel').on('click', function (e) {\n\t\t\t\t\t\tvar newRow = container.find('.newChannel').clone();\n\t\t\t\t\t\tvar formContainer = container.find('.formContainer');\n\t\t\t\t\t\tformContainer.append(newRow);\n\t\t\t\t\t\tnewRow.removeClass('d-none');\n\t\t\t\t\t\tnewRow.removeClass('newChannel');\n\t\t\t\t\t\tnewRow.find('input').removeAttr('disabled');\n\t\t\t\t\t\tnewRow.find('.removeChannel').on('click', function (e) {\n\t\t\t\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\t\t\t\tvar row = currentTarget.closest('.form-group');\n\t\t\t\t\t\t\trow.remove();\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t\tcontainer.find('[name=\"blockId\"]').val(element.data('blockId'));\n\t\t\t\t\tcontainer.find('[name=\"linkId\"]').val(element.data('linkid'));\n\t\t\t\t\tvar form = container.find('form');\n\t\t\t\t\tform.on('submit', function (e) {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tvar channels = [];\n\t\t\t\t\t\tif (form.validationEngine('validate')) {\n\t\t\t\t\t\t\tform.find('.channelRss:not(:disabled)').each(function () {\n\t\t\t\t\t\t\t\tchannels.push(jQuery(this).val());\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tlet paramsForm = form.serializeFormData();\n\t\t\t\t\t\t\tparamsForm.channels = channels;\n\t\t\t\t\t\t\tAppConnector.request(paramsForm).done(function (data) {\n\t\t\t\t\t\t\t\tif (data.result === true) {\n\t\t\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({ text: app.vtranslate('JS_WIDGET_ADDED') });\n\t\t\t\t\t\t\t\t\tthisInstance.reloadContent();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\t\t\tapp.showModalWindow(objectToShowModal);\n\t\t},\n\t\taddNoteBookWidget: function (element, url) {\n\t\t\tvar thisInstance = this;\n\t\t\telement = jQuery(element);\n\t\t\tapp.showModalWindow(null, 'index.php?module=Home&view=AddNotePad', function (wizardContainer) {\n\t\t\t\tvar form = jQuery('form', wizardContainer);\n\t\t\t\tform.validationEngine(\n\t\t\t\t\t$.extend(\n\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tonValidationComplete: function (form, valid) {\n\t\t\t\t\t\t\t\tif (valid) {\n\t\t\t\t\t\t\t\t\t//To prevent multiple click on save\n\t\t\t\t\t\t\t\t\tjQuery(\"[name='saveButton']\", wizardContainer).attr('disabled', 'disabled');\n\t\t\t\t\t\t\t\t\tvar notePadName = form.find('[name=\"notePadName\"]').val();\n\t\t\t\t\t\t\t\t\tvar notePadContent = form.find('[name=\"notePadContent\"]').val();\n\t\t\t\t\t\t\t\t\tvar isDefault = 0;\n\t\t\t\t\t\t\t\t\tvar linkId = element.data('linkid');\n\t\t\t\t\t\t\t\t\tvar blockId = element.data('block-id');\n\t\t\t\t\t\t\t\t\tvar noteBookParams = {\n\t\t\t\t\t\t\t\t\t\tmodule: jQuery('#selectedModuleName').val(),\n\t\t\t\t\t\t\t\t\t\taction: 'NoteBook',\n\t\t\t\t\t\t\t\t\t\tmode: 'noteBookCreate',\n\t\t\t\t\t\t\t\t\t\tnotePadName: notePadName,\n\t\t\t\t\t\t\t\t\t\tnotePadContent: notePadContent,\n\t\t\t\t\t\t\t\t\t\tblockid: blockId,\n\t\t\t\t\t\t\t\t\t\tlinkId: linkId,\n\t\t\t\t\t\t\t\t\t\tisdefault: isDefault,\n\t\t\t\t\t\t\t\t\t\twidth: 4,\n\t\t\t\t\t\t\t\t\t\theight: 3\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\tAppConnector.request(noteBookParams).done(function (data) {\n\t\t\t\t\t\t\t\t\t\tif (data.result.success) {\n\t\t\t\t\t\t\t\t\t\t\tvar widgetId = data.result.widgetId;\n\t\t\t\t\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\t\t\t\t\tnoteBookParams['id'] = widgetId;\n\t\t\t\t\t\t\t\t\t\t\tnoteBookParams['label'] = notePadName;\n\t\t\t\t\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({\n\t\t\t\t\t\t\t\t\t\t\t\ttext: app.vtranslate('JS_WIDGET_ADDED')\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\tthisInstance.reloadContent();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tapp.validationEngineOptions\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t});\n\t\t},\n\t\taddMiniListWidget: function (element, url) {\n\t\t\t// 1. Show popup window for selection (module, filter, fields)\n\t\t\t// 2. Compute the dynamic mini-list widget url\n\t\t\t// 3. Add widget with URL to the page.\n\t\t\tconst thisInstance = this;\n\t\t\telement = $(element);\n\t\t\tapp.showModalWindow(null, url, function (wizardContainer) {\n\t\t\t\tlet form = $('form', wizardContainer),\n\t\t\t\t\tmoduleNameSelectDOM = $('select[name=\"module\"]', wizardContainer),\n\t\t\t\t\tfilteridSelectDOM = $('select[name=\"filterid\"]', wizardContainer),\n\t\t\t\t\tfieldHrefDOM = $('select[name=\"field_href\"]', wizardContainer),\n\t\t\t\t\tfieldsSelectDOM = $('select[name=\"fields\"]', wizardContainer),\n\t\t\t\t\tfilterFieldsSelectDOM = $('select[name=\"filter_fields\"]', wizardContainer),\n\t\t\t\t\tmoduleNameSelect2 = App.Fields.Picklist.showSelect2ElementView(moduleNameSelectDOM, {\n\t\t\t\t\t\tplaceholder: app.vtranslate('JS_SELECT_MODULE')\n\t\t\t\t\t}),\n\t\t\t\t\tfilteridSelect2 = App.Fields.Picklist.showSelect2ElementView(filteridSelectDOM, {\n\t\t\t\t\t\tplaceholder: app.vtranslate('JS_PLEASE_SELECT_ATLEAST_ONE_OPTION')\n\t\t\t\t\t}),\n\t\t\t\t\tfieldHrefSelect2 = App.Fields.Picklist.showSelect2ElementView(fieldHrefDOM, {\n\t\t\t\t\t\tallowClear: true\n\t\t\t\t\t}),\n\t\t\t\t\tfieldsSelect2 = App.Fields.Picklist.showSelect2ElementView(fieldsSelectDOM, {\n\t\t\t\t\t\tplaceholder: app.vtranslate('JS_PLEASE_SELECT_ATLEAST_ONE_OPTION'),\n\t\t\t\t\t\tcloseOnSelect: true,\n\t\t\t\t\t\tmaximumSelectionLength: 6\n\t\t\t\t\t}),\n\t\t\t\t\tfilterFieldsSelect2 = App.Fields.Picklist.showSelect2ElementView(filterFieldsSelectDOM, {\n\t\t\t\t\t\tplaceholder: app.vtranslate('JS_PLEASE_SELECT_ATLEAST_ONE_OPTION')\n\t\t\t\t\t}),\n\t\t\t\t\tfooter = $('.modal-footer', wizardContainer);\n\t\t\t\tfilteridSelectDOM.closest('tr').hide();\n\t\t\t\tfieldHrefDOM.closest('tr').hide();\n\t\t\t\tfieldsSelectDOM.closest('tr').hide();\n\t\t\t\tfilterFieldsSelectDOM.closest('tr').hide();\n\t\t\t\tfooter.hide();\n\t\t\t\tmoduleNameSelect2.on('change', function () {\n\t\t\t\t\tif (!moduleNameSelect2.val()) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\tmodule: 'Home',\n\t\t\t\t\t\tview: 'MiniListWizard',\n\t\t\t\t\t\tstep: 'step2',\n\t\t\t\t\t\tselectedModule: moduleNameSelect2.val()\n\t\t\t\t\t}).done(function (res) {\n\t\t\t\t\t\tfilteridSelectDOM.empty().html(res).trigger('change');\n\t\t\t\t\t\tfilteridSelect2.closest('tr').show();\n\t\t\t\t\t\tfieldsSelectDOM.closest('tr').hide();\n\t\t\t\t\t\tfilterFieldsSelectDOM.closest('tr').hide();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\tfilteridSelect2.on('change', function () {\n\t\t\t\t\tif (!filteridSelect2.val()) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tfooter.hide();\n\t\t\t\t\tfieldsSelectDOM.closest('tr').hide();\n\t\t\t\t\tfilterFieldsSelectDOM.closest('tr').hide();\n\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\tmodule: 'Home',\n\t\t\t\t\t\tview: 'MiniListWizard',\n\t\t\t\t\t\tstep: 'step3',\n\t\t\t\t\t\tselectedModule: moduleNameSelect2.val(),\n\t\t\t\t\t\tfilterid: filteridSelect2.val()\n\t\t\t\t\t}).done(function (res) {\n\t\t\t\t\t\tres = $(res);\n\t\t\t\t\t\tfieldsSelectDOM.empty().html(res.find('select[name=\"fields\"]').html()).trigger('change');\n\t\t\t\t\t\tfilterFieldsSelectDOM.empty().html(res.find('select[name=\"filter_fields\"]').html()).trigger('change');\n\t\t\t\t\t\tfieldsSelect2.closest('tr').show();\n\t\t\t\t\t\tfieldHrefSelect2.closest('tr').show();\n\t\t\t\t\t\tfilterFieldsSelect2.closest('tr').show();\n\t\t\t\t\t\tfieldsSelect2.data('select2').$selection.find('.select2-search__field').parent().css('width', '100%');\n\t\t\t\t\t\tfilterFieldsSelect2.data('select2').$selection.find('.select2-search__field').parent().css('width', '100%');\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\tfieldsSelect2.on('change', function () {\n\t\t\t\t\tfieldHrefDOM.find('option:not([value=\"\"]').remove();\n\t\t\t\t\t$(this)\n\t\t\t\t\t\t.find('option:checked')\n\t\t\t\t\t\t.each(function (index, element) {\n\t\t\t\t\t\t\tlet option = $(element);\n\t\t\t\t\t\t\tlet newOption = new Option(option.text(), option.val(), true, true);\n\t\t\t\t\t\t\tfieldHrefSelect2.append(newOption);\n\t\t\t\t\t\t});\n\t\t\t\t\tfieldHrefSelect2.val('').trigger('change');\n\t\t\t\t\tif (!fieldsSelect2.val()) {\n\t\t\t\t\t\tfooter.hide();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfooter.show();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tform.on('submit', function (e) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tlet selectedFields = [];\n\t\t\t\t\tfieldsSelect2.select2('data').map(function (obj) {\n\t\t\t\t\t\tselectedFields.push(obj.id);\n\t\t\t\t\t});\n\t\t\t\t\tlet data = {\n\t\t\t\t\t\tmodule: moduleNameSelect2.val()\n\t\t\t\t\t};\n\t\t\t\t\tdata['fields'] = selectedFields;\n\t\t\t\t\tdata['filterFields'] = filterFieldsSelect2.val();\n\t\t\t\t\tdata['fieldHref'] = fieldHrefSelect2.val();\n\t\t\t\t\tlet paramsForm = {\n\t\t\t\t\t\tdata: JSON.stringify(data),\n\t\t\t\t\t\tblockid: element.data('block-id'),\n\t\t\t\t\t\ttitle: form.find('[name=\"widgetTitle\"]').val(),\n\t\t\t\t\t\tlinkid: element.data('linkid'),\n\t\t\t\t\t\tlabel: moduleNameSelect2.find(':selected').text() + ' - ' + filteridSelect2.find(':selected').text(),\n\t\t\t\t\t\tname: 'Mini List',\n\t\t\t\t\t\tfilterid: filteridSelect2.val(),\n\t\t\t\t\t\tisdefault: 0,\n\t\t\t\t\t\tcache: 0,\n\t\t\t\t\t\theight: 4,\n\t\t\t\t\t\twidth: 4,\n\t\t\t\t\t\towners_all: ['mine', 'all', 'users', 'groups'],\n\t\t\t\t\t\tdefault_owner: 'mine'\n\t\t\t\t\t};\n\t\t\t\t\tlet sourceModule = $('[name=\"widgetsManagementEditorModules\"]').val();\n\t\t\t\t\tlet baseParams = {\n\t\t\t\t\t\tform: paramsForm,\n\t\t\t\t\t\tmodule: sourceModule,\n\t\t\t\t\t\tsourceModule: sourceModule,\n\t\t\t\t\t\taction: 'Widget',\n\t\t\t\t\t\tmode: 'add',\n\t\t\t\t\t\taddToUser: false,\n\t\t\t\t\t\tlinkid: paramsForm.linkid,\n\t\t\t\t\t\tname: paramsForm.name\n\t\t\t\t\t};\n\t\t\t\t\tthisInstance.save(paramsForm, 'save', baseParams).done(function (data) {\n\t\t\t\t\t\tlet result = data['result'],\n\t\t\t\t\t\t\tparams = {};\n\t\t\t\t\t\tif (data['success']) {\n\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\tparamsForm['id'] = result['id'];\n\t\t\t\t\t\t\tparamsForm['status'] = result['status'];\n\t\t\t\t\t\t\tparams['text'] = app.vtranslate('JS_WIDGET_ADDED');\n\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t\t\t\tthisInstance.reloadContent();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tlet message = data['error']['message'],\n\t\t\t\t\t\t\t\terrorField;\n\t\t\t\t\t\t\tif (data['error']['code'] !== 513) {\n\t\t\t\t\t\t\t\terrorField = form.find('[name=\"fieldName\"]');\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\terrorField = form.find('[name=\"fieldLabel\"]');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\terrorField.validationEngine('showPrompt', message, 'error', 'topLeft', true);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Reload content\n\t\t */\n\t\treloadContent: function () {\n\t\t\t$('.selectDashboard .nav-link.active').trigger('click');\n\t\t},\n\t\t/**\n\t\t * Function to register the click event for delete custom block\n\t\t */\n\t\tregisterDeleteCustomBlockEvent: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar contents = jQuery('#layoutDashBoards');\n\t\t\tcontents.on('click', '.js-delete-custom-block-btn', function (e) {\n\t\t\t\tvar currentTarget = jQuery(e.currentTarget);\n\t\t\t\tvar table = currentTarget.closest('div.editFieldsTable');\n\t\t\t\tvar blockId = table.data('block-id');\n\t\t\t\tvar paramsFrom = {};\n\t\t\t\tparamsFrom['blockid'] = blockId;\n\t\t\t\tapp.showConfirmModal({\n\t\t\t\t\ttitle: app.vtranslate('JS_LBL_ARE_YOU_SURE_YOU_WANT_TO_DELETE'),\n\t\t\t\t\tconfirmedCallback: () => {\n\t\t\t\t\t\tthisInstance.save(paramsFrom, 'removeBlock').done(function (_) {\n\t\t\t\t\t\t\tthisInstance.reloadContent();\n\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({ text: app.vtranslate('JS_CUSTOM_BLOCK_DELETED') });\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to register the change event for layout editor modules list\n\t\t */\n\t\tregisterModulesChangeEvent() {\n\t\t\tconst thisInstance = this;\n\t\t\tlet container = $('#widgetsManagementEditorContainer');\n\t\t\tlet contentsDiv = container.closest('.contentsDiv');\n\t\t\tApp.Fields.Picklist.changeSelectElementView(container.find('[name=\"widgetsManagementEditorModules\"]'));\n\t\t\tcontainer.on('change', '[name=\"widgetsManagementEditorModules\"]', (e) => {\n\t\t\t\tthisInstance\n\t\t\t\t\t.getModuleLayoutEditor($(e.currentTarget).val(), thisInstance.getCurrentDashboardId())\n\t\t\t\t\t.done((data) => {\n\t\t\t\t\t\tthisInstance.updateContentsDiv(contentsDiv, data);\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Update contents div and register events.\n\t\t * @param {jQuery} contentsDiv\n\t\t * @param {HTMLElement} data\n\t\t */\n\t\tupdateContentsDiv(contentsDiv, data) {\n\t\t\tcontentsDiv.html(data);\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(contentsDiv.find('.select2'));\n\t\t\tthis.registerEvents();\n\t\t},\n\t\t/**\n\t\t * Function to get the respective module layout editor through pjax\n\t\t */\n\t\tgetModuleLayoutEditor: function (selectedModule, selectedDashboard) {\n\t\t\tvar aDeferred = jQuery.Deferred();\n\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tvar params = {};\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['view'] = 'Configuration';\n\t\t\tparams['sourceModule'] = selectedModule;\n\t\t\tparams['dashboardId'] = selectedDashboard;\n\t\t\tAppConnector.requestPjax(params)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t})\n\t\t\t\t.fail(function (error) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\taDeferred.reject();\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\n\t\t/**\n\t\t * Function to register the click event for delete widget\n\t\t */\n\t\tregisterDeleteWidgetEvent: function (contents) {\n\t\t\tif (typeof contents === 'undefined') {\n\t\t\t\tcontents = jQuery('#layoutDashBoards');\n\t\t\t}\n\t\t\tcontents.find('.js-delete-widget').on('click', (e) => {\n\t\t\t\tlet widgetId = e.currentTarget.dataset.id;\n\t\t\t\tapp.showConfirmModal({\n\t\t\t\t\ttitle: app.vtranslate('JS_LBL_ARE_YOU_SURE_YOU_WANT_TO_DELETE'),\n\t\t\t\t\tconfirmedCallback: () => {\n\t\t\t\t\t\tlet progress = $.progressIndicator({\n\t\t\t\t\t\t\tmessage: app.vtranslate('JS_SAVE_LOADER_INFO'),\n\t\t\t\t\t\t\tposition: 'html',\n\t\t\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\t\t\tenabled: true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tapp.saveAjax('delete', null, { widgetId: widgetId }).done((data) => {\n\t\t\t\t\t\t\tif (data.result === true) {\n\t\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({\n\t\t\t\t\t\t\t\t\ttype: 'success',\n\t\t\t\t\t\t\t\t\ttext: app.vtranslate('JS_CUSTOM_FIELD_DELETED')\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\tthis.reloadContent();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\tregisterWidgetEvent: function () {\n\t\t\tlet contents = $('#layoutDashBoards');\n\t\t\tcontents.find('.js-edit-widget').on('click', (e) => {\n\t\t\t\tlet url = e.currentTarget.dataset.url;\n\t\t\t\tthis.addWidget(url);\n\t\t\t});\n\n\t\t\tcontents.find('.js-add-widget').on('click', (e) => {\n\t\t\t\tlet url = e.currentTarget.dataset.url;\n\t\t\t\tif (!url) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tapp.showModalWindow({\n\t\t\t\t\turl: url,\n\t\t\t\t\tcb: (modalContainer) => {\n\t\t\t\t\t\tmodalContainer.on('click', '.js-modal__save', (_) => {\n\t\t\t\t\t\t\tlet selectedOption = modalContainer.find('.js-widget').val();\n\t\t\t\t\t\t\tif (selectedOption) {\n\t\t\t\t\t\t\t\tthis.addWidget(selectedOption);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tthis.registerDeleteWidgetEvent(contents);\n\t\t},\n\n\t\taddWidget: function (url) {\n\t\t\tapp.showModalWindow({\n\t\t\t\turl: url,\n\t\t\t\tcb: (container) => {\n\t\t\t\t\tapp.showPopoverElementView(container.find('.js-popover-tooltip'));\n\t\t\t\t},\n\t\t\t\tsendByAjaxCb: (_, response) => {\n\t\t\t\t\tif (response.result === true) {\n\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({\n\t\t\t\t\t\t\ttype: 'success',\n\t\t\t\t\t\t\ttext: app.vtranslate('JS_WIDGET_ADDED')\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.reloadContent();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterManageWidget: function () {\n\t\t\tlet contents = $('#widgetsManagementEditorContainer');\n\t\t\tcontents.find('.js-show-manage-widget-modal').on('click', (e) => {\n\t\t\t\tlet url = e.currentTarget.dataset.url;\n\t\t\t\tapp.showModalWindow({\n\t\t\t\t\turl: url,\n\t\t\t\t\tcb: (modalContainer) => {\n\t\t\t\t\t\tmodalContainer.on('click', '.js-modal__save', (_) => {\n\t\t\t\t\t\t\tconst allChecked = modalContainer.find('input[name=\"widgetLinkId\"]:checked');\n\t\t\t\t\t\t\tlet formData = modalContainer.find('form').serializeFormData();\n\t\t\t\t\t\t\tlet selectedWidgets = Array.from(allChecked).map((checkbox) => checkbox.value);\n\t\t\t\t\t\t\tif (selectedWidgets.length === 0) {\n\t\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\t\ttext: app.vtranslate('JS_SELECT_AT_LEAST_ONE_WIDGET'),\n\t\t\t\t\t\t\t\t\ttype: 'info'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tformData['widgetLinkId'] = selectedWidgets;\n\t\t\t\t\t\t\t\tlet progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\t\t\t\t\t\tposition: 'html',\n\t\t\t\t\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\t\t\t\t\tenabled: true\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tformData['dashboardId'] = this.getCurrentDashboardId();\n\t\t\t\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\t\t\t\tparent: 'Settings',\n\t\t\t\t\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\t\t\t\t\taction: 'SaveAjax',\n\t\t\t\t\t\t\t\t\tmode: 'transfer',\n\t\t\t\t\t\t\t\t\tform: formData\n\t\t\t\t\t\t\t\t}).done((data) => {\n\t\t\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\t\t\ttext: data.result,\n\t\t\t\t\t\t\t\t\t\ttype: 'info'\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\t\t\tthis.container.find('.selectDashboard li a.active').trigger('click');\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * register events for layout editor\n\t\t */\n\t\tregisterEvents: function () {\n\t\t\tthis.setContainer($('.contentsDiv'));\n\t\t\tthis.registerAddBlockDashBoard();\n\t\t\tthis.registerWidgetEvent();\n\t\t\tthis.registerSpecialWidget();\n\t\t\tthis.registerDeleteCustomBlockEvent();\n\t\t\tthis.registerModulesChangeEvent();\n\t\t\tthis.registerAddedDashboard();\n\t\t\tthis.registerSelectDashboard();\n\t\t\tthis.registerDashboardAction();\n\t\t\tthis.registerManageWidget();\n\t\t}\n\t}\n);\n\n$(function () {\n\tvar instance = new Settings_WidgetsManagement_Js();\n\tinstance.registerEvents();\n});\n"],"names":["jQuery","Class","container","setContainer","getAuthorization","find","each","authorization","push","data","toString","getCurrentDashboardId","parent","registerAddedDashboard","$","on","app","showModalWindow","url","getModuleName","sendByAjaxCb","contentsDiv","thisInstance","getModuleLayoutEditor","done","updateContentsDiv","registerSelectDashboard","e","val","currentTarget","registerDashboardAction","stopPropagation","closest","AppConnector","request","module","action","mode","dashboardId","registerAddBlockDashBoard","contents","addBlockContainer","clone","inUseAuthorization","inArray","remove","App","Fields","Picklist","changeSelectElementView","form","validationEngine","validationEngineOptions","serializeFormData","paramsForm","_csrf","save","response","result","hideModalWindow","params","vtranslate","reloadContent","Settings_Vtiger_Index_Js","showMessage","preventDefault","callBackFunction","showSelect2ElementView","width","aDeferred","Deferred","progressIndicatorElement","progressIndicator","position","blockInfo","enabled","getParentModuleName","resolve","fail","error","reject","promise","registerSpecialWidget","addNoteBookWidget","addMiniListWidget","addRssWidget","element","objectToShowModal","cb","row","newRow","formContainer","append","removeClass","removeAttr","channels","text","wizardContainer","extend","onValidationComplete","valid","attr","notePadName","notePadContent","linkId","blockId","noteBookParams","blockid","isdefault","height","success","widgetId","moduleNameSelectDOM","filteridSelectDOM","fieldHrefDOM","fieldsSelectDOM","filterFieldsSelectDOM","moduleNameSelect2","placeholder","filteridSelect2","fieldHrefSelect2","allowClear","fieldsSelect2","closeOnSelect","maximumSelectionLength","filterFieldsSelect2","footer","hide","view","step","selectedModule","res","empty","html","trigger","show","filterid","$selection","css","index","option","newOption","Option","selectedFields","select2","map","obj","id","JSON","stringify","title","linkid","label","name","cache","owners_all","default_owner","sourceModule","baseParams","addToUser","message","errorField","registerDeleteCustomBlockEvent","table","paramsFrom","showConfirmModal","confirmedCallback","registerModulesChangeEvent","registerEvents","selectedDashboard","requestPjax","registerDeleteWidgetEvent","dataset","progress","saveAjax","type","registerWidgetEvent","addWidget","modalContainer","selectedOption","showPopoverElementView","_","registerManageWidget","formData","selectedWidgets","Array","from","allChecked","checkbox","value","length","showNotify","instance"],"mappings":"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"}