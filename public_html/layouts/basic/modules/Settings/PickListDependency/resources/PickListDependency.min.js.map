{"version":3,"file":"PickListDependency.min.js","sources":["PickListDependency.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n *************************************************************************************/\n'use strict';\n\njQuery.Class(\n\t'Settings_PickListDependency_Js',\n\t{\n\t\t//holds the picklist dependency instance\n\t\tpickListDependencyInstance: false,\n\t\t/**\n\t\t * Function used to triggerAdd new Dependency for the picklists\n\t\t */\n\t\ttriggerAdd: function (event) {\n\t\t\tevent.stopPropagation();\n\t\t\tvar instance = Settings_PickListDependency_Js.pickListDependencyInstance;\n\t\t\tinstance.updatedSourceValues = [];\n\t\t\tinstance.showEditView(instance.listViewForModule).done(function (data) {\n\t\t\t\tinstance.registerAddViewEvents();\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * This function used to trigger Edit picklist dependency\n\t\t */\n\t\ttriggerEdit: function (event, module, sourceField, targetField) {\n\t\t\tevent.stopPropagation();\n\t\t\tvar instance = Settings_PickListDependency_Js.pickListDependencyInstance;\n\t\t\tinstance.updatedSourceValues = [];\n\t\t\tinstance.showEditView(module, sourceField, targetField).done(function (data) {\n\t\t\t\tvar form = jQuery('#pickListDependencyForm');\n\t\t\t\tform\n\t\t\t\t\t.find('select[name=\"sourceModule\"],select[name=\"sourceField\"],select[name=\"targetField\"]')\n\t\t\t\t\t.prop('disabled', true);\n\t\t\t\tinstance.registerDependencyGraphEvents();\n\t\t\t\tinstance.registerSubmitEvent();\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * This function used to trigger Delete picklist dependency\n\t\t */\n\t\ttriggerDelete: function (event, module, sourceField, targetField) {\n\t\t\tevent.stopPropagation();\n\t\t\tlet currentTrEle = jQuery(event.currentTarget).closest('tr');\n\t\t\tlet instance = Settings_PickListDependency_Js.pickListDependencyInstance;\n\n\t\t\tapp.showConfirmModal({\n\t\t\t\ttitle: app.vtranslate('JS_LBL_ARE_YOU_SURE_YOU_WANT_TO_DELETE'),\n\t\t\t\tconfirmedCallback: () => {\n\t\t\t\t\tinstance.deleteDependency(module, sourceField, targetField).done(function (data) {\n\t\t\t\t\t\tvar params = {};\n\t\t\t\t\t\tparams.text = app.vtranslate('JS_DEPENDENCY_DELETED_SUEESSFULLY');\n\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t\t\tcurrentTrEle.fadeOut('slow').remove();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\t{\n\t\t//constructor\n\t\tinit: function () {\n\t\t\tSettings_PickListDependency_Js.pickListDependencyInstance = this;\n\t\t},\n\t\t//holds the listview forModule\n\t\tlistViewForModule: '',\n\t\t//holds the updated sourceValues while editing dependency\n\t\tupdatedSourceValues: [],\n\t\t//holds the new mapping of source values and target values\n\t\tvalueMapping: [],\n\t\t//holds the list of selected source values for dependency\n\t\tselectedSourceValues: [],\n\t\t/*\n\t\t * function to show editView for Add/Edit Dependency\n\t\t * @params: module - selected module\n\t\t *\t\t\tsourceField - source picklist\n\t\t *\t\t\ttargetField - target picklist\n\t\t */\n\t\tshowEditView: function (module, sourceField, targetField) {\n\t\t\tvar aDeferred = jQuery.Deferred();\n\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tvar params = {};\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['view'] = 'Edit';\n\t\t\tparams['sourceModule'] = module;\n\t\t\tparams['sourcefield'] = sourceField;\n\t\t\tparams['targetfield'] = targetField;\n\n\t\t\tAppConnector.requestPjax(params)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tvar container = jQuery('.contentsDiv');\n\t\t\t\t\tcontainer.html(data);\n\t\t\t\t\t//register all select2 Elements\n\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(container.find('select.select2'), {\n\t\t\t\t\t\tdropdownCss: { 'z-index': 0 }\n\t\t\t\t\t});\n\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t})\n\t\t\t\t.fail(function (error) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\taDeferred.reject(error);\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/**\n\t\t * Function to get the Dependency graph based on selected module\n\t\t */\n\t\tgetModuleDependencyGraph: function (form) {\n\t\t\tvar thisInstance = this;\n\t\t\tform.find('[name=\"sourceModule\"]').on('change', function () {\n\t\t\t\tvar forModule = form.find('[name=\"sourceModule\"]').val();\n\t\t\t\tthisInstance.showEditView(forModule).done(function (data) {\n\t\t\t\t\tthisInstance.registerAddViewEvents();\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register change event for picklist fields in add/edit picklist dependency\n\t\t */\n\t\tregisterPicklistFieldsChangeEvent: function (form) {\n\t\t\tvar thisInstance = this;\n\t\t\tform.find('[name=\"sourceField\"],[name=\"targetField\"]').on('change', function () {\n\t\t\t\tthisInstance.checkValuesForDependencyGraph(form);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function used to check the selected picklist fields are valid before showing dependency graph\n\t\t */\n\t\tcheckValuesForDependencyGraph: function (form) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar sourceField = form.find('[name=\"sourceField\"]');\n\t\t\tvar targetField = form.find('[name=\"targetField\"]');\n\t\t\tvar select2SourceField = app.getSelect2ElementFromSelect(sourceField);\n\t\t\tvar select2TargetField = app.getSelect2ElementFromSelect(targetField);\n\t\t\tvar sourceFieldValue = sourceField.val();\n\t\t\tvar targetFieldValue = targetField.val();\n\t\t\tvar dependencyGraph = jQuery('#dependencyGraph');\n\t\t\tif (sourceFieldValue != '' && targetFieldValue != '') {\n\t\t\t\tvar resultMessage = app.vtranslate('JS_SOURCE_AND_TARGET_FIELDS_SHOULD_NOT_BE_SAME');\n\t\t\t\tform.find('.errorMessage').addClass('d-none');\n\t\t\t\tif (sourceFieldValue == targetFieldValue) {\n\t\t\t\t\tselect2TargetField.validationEngine('showPrompt', resultMessage, 'error', 'topLeft', true);\n\t\t\t\t\tdependencyGraph.html('');\n\t\t\t\t} else {\n\t\t\t\t\tselect2SourceField.validationEngine('hide');\n\t\t\t\t\tselect2TargetField.validationEngine('hide');\n\t\t\t\t\tvar sourceModule = form.find('[name=\"sourceModule\"]').val();\n\t\t\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\t\t\tposition: 'html',\n\t\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\t\tenabled: true\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tthisInstance\n\t\t\t\t\t\t.checkCyclicDependency(sourceModule, sourceFieldValue, targetFieldValue)\n\t\t\t\t\t\t.done(function (data) {\n\t\t\t\t\t\t\tvar result = data['result'];\n\t\t\t\t\t\t\tif (!result['result']) {\n\t\t\t\t\t\t\t\tthisInstance.addNewDependencyPickList(sourceModule, sourceFieldValue, targetFieldValue);\n\t\t\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\t\tform.find('.errorMessage').removeClass('d-none');\n\t\t\t\t\t\t\t\tform.find('.cancelAddView').removeClass('d-none');\n\t\t\t\t\t\t\t\tdependencyGraph.html('');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.fail(function (error, err) {\n\t\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tform.find('.errorMessage').addClass('d-none');\n\t\t\t\tvar result = app.vtranslate('JS_SELECT_SOME_VALUE');\n\t\t\t\tif (sourceFieldValue == '') {\n\t\t\t\t\tselect2SourceField.validationEngine('showPrompt', result, 'error', 'topLeft', true);\n\t\t\t\t} else if (targetFieldValue == '') {\n\t\t\t\t\tselect2TargetField.validationEngine('showPrompt', result, 'error', 'topLeft', true);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Function used to check the cyclic dependency of the selected picklist fields\n\t\t * @params: sourceModule - selected module\n\t\t *            sourceFieldValue - source picklist value\n\t\t *            targetFieldValue - target picklist value\n\t\t */\n\t\tcheckCyclicDependency: function (sourceModule, sourceFieldValue, targetFieldValue) {\n\t\t\tvar aDeferred = jQuery.Deferred();\n\t\t\tvar params = {};\n\t\t\tparams['mode'] = 'checkCyclicDependency';\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['action'] = 'Index';\n\t\t\tparams['sourceModule'] = sourceModule;\n\t\t\tparams['sourcefield'] = sourceFieldValue;\n\t\t\tparams['targetfield'] = targetFieldValue;\n\n\t\t\tAppConnector.request(params).done(\n\t\t\t\tfunction (data) {\n\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t},\n\t\t\t\tfunction (error, err) {\n\t\t\t\t\taDeferred.reject();\n\t\t\t\t}\n\t\t\t);\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/**\n\t\t * Function used to show the new picklist dependency graph\n\t\t * @params: sourceModule - selected module\n\t\t *            sourceFieldValue - source picklist value\n\t\t *            targetFieldValue - target picklist value\n\t\t */\n\t\taddNewDependencyPickList: function (sourceModule, sourceFieldValue, targetFieldValue) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar dependencyGraph = $('#dependencyGraph');\n\t\t\tthisInstance.updatedSourceValues = [];\n\t\t\tAppConnector.request({\n\t\t\t\tmode: 'getDependencyGraph',\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\tview: 'IndexAjax',\n\t\t\t\tsourceModule: sourceModule,\n\t\t\t\tsourcefield: sourceFieldValue,\n\t\t\t\ttargetfield: targetFieldValue\n\t\t\t}).done(function (data) {\n\t\t\t\tdependencyGraph.html(data).css({ padding: '10px', border: '1px solid #ddd', background: '#fff' });\n\t\t\t\tthisInstance.registerDependencyGraphEvents();\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * This function will delete the pickList Dependency\n\t\t * @params: module - selected module\n\t\t *            sourceField - source picklist value\n\t\t *            targetField - target picklist value\n\t\t */\n\t\tdeleteDependency: function (module, sourceField, targetField) {\n\t\t\tvar aDeferred = jQuery.Deferred();\n\t\t\tvar params = {};\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['action'] = 'DeleteAjax';\n\t\t\tparams['sourceModule'] = module;\n\t\t\tparams['sourcefield'] = sourceField;\n\t\t\tparams['targetfield'] = targetField;\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t})\n\t\t\t\t.fail(function (error, err) {\n\t\t\t\t\taDeferred.reject(error, err);\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/**\n\t\t * Function used to show cancel link in add view and register click event for cancel\n\t\t */\n\t\tregisterCancelAddView: function (form) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar cancelDiv = form.find('.cancelAddView');\n\t\t\tcancelDiv.removeClass('d-none');\n\t\t\tcancelDiv.find('.cancelLink').on('click', function () {\n\t\t\t\tthisInstance.loadListViewContents(thisInstance.listViewForModule);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register all the events related to addView of picklist dependency\n\t\t */\n\t\tregisterAddViewEvents: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar form = jQuery('#pickListDependencyForm');\n\t\t\tthisInstance.registerCancelAddView(form);\n\t\t\tthisInstance.getModuleDependencyGraph(form);\n\t\t\tthisInstance.registerPicklistFieldsChangeEvent(form);\n\t\t\tthisInstance.registerSubmitEvent();\n\t\t},\n\t\t/**\n\t\t * Register all the events in editView of picklist dependency\n\t\t */\n\t\tregisterDependencyGraphEvents: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar form = jQuery('#pickListDependencyForm');\n\t\t\tvar dependencyGraph = jQuery('#dependencyGraph');\n\t\t\tform.find('.cancelAddView').addClass('d-none');\n\t\t\tthisInstance.registerTargetFieldsClickEvent(dependencyGraph);\n\t\t\tthisInstance.registerTargetFieldsUnmarkAll(dependencyGraph);\n\t\t\tthisInstance.registerSelectSourceValuesClick(dependencyGraph);\n\t\t\tthisInstance.registerCancelDependency(form);\n\t\t},\n\t\t/**\n\t\t * Register all the events related to listView of picklist dependency\n\t\t */\n\t\tregisterListViewEvents: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar forModule = jQuery('.contentsDiv').find('.pickListSupportedModules').val();\n\t\t\tthisInstance.listViewForModule = forModule;\n\t\t\tthisInstance.registerSourceModuleChangeEvent();\n\t\t},\n\t\t/**\n\t\t * Register the click event for cancel picklist dependency changes\n\t\t */\n\t\tregisterCancelDependency: function (form) {\n\t\t\tvar thisInstance = this;\n\t\t\t//Register click event for cancel link\n\t\t\tvar cancelDependencyLink = form.find('.cancelDependency');\n\t\t\tcancelDependencyLink.on('click', function () {\n\t\t\t\tthisInstance.loadListViewContents(thisInstance.listViewForModule);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register the click event for target fields in dependency graph\n\t\t */\n\t\tregisterTargetFieldsClickEvent: function (dependencyGraph) {\n\t\t\tvar thisInstance = this;\n\t\t\tthisInstance.updatedSourceValues = [];\n\t\t\tdependencyGraph.find('td.picklistValueMapping').on('click', function (e) {\n\t\t\t\tvar currentTarget = jQuery(e.currentTarget);\n\t\t\t\tvar sourceValue = currentTarget.data('sourceValue');\n\t\t\t\tif (jQuery.inArray(sourceValue, thisInstance.updatedSourceValues) == -1) {\n\t\t\t\t\tthisInstance.updatedSourceValues.push(sourceValue);\n\t\t\t\t}\n\t\t\t\tif (currentTarget.hasClass('selectedCell')) {\n\t\t\t\t\tcurrentTarget.addClass('unselectedCell').removeClass('selectedCell');\n\t\t\t\t} else {\n\t\t\t\t\tcurrentTarget.addClass('selectedCell').removeClass('unselectedCell');\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterTargetFieldsUnmarkAll: function (dependencyGraph) {\n\t\t\tvar thisInstance = this;\n\t\t\tthisInstance.updatedSourceValues = [];\n\t\t\tdependencyGraph.find('.unmarkAll').on('click', function (e) {\n\t\t\t\tdependencyGraph.find('td.picklistValueMapping').each(function (index) {\n\t\t\t\t\tvar currentTarget = jQuery(this);\n\t\t\t\t\tvar sourceValue = currentTarget.data('sourceValue');\n\t\t\t\t\tif (jQuery.inArray(sourceValue, thisInstance.updatedSourceValues) == -1) {\n\t\t\t\t\t\tthisInstance.updatedSourceValues.push(sourceValue);\n\t\t\t\t\t}\n\t\t\t\t\tcurrentTarget.addClass('unselectedCell').removeClass('selectedCell');\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function used to update the value mapping to save the picklist dependency\n\t\t */\n\t\tupdateValueMapping: function (dependencyGraph) {\n\t\t\tconst self = this;\n\t\t\tself.valueMapping = [];\n\t\t\tlet sourceValuesArray = self.updatedSourceValues;\n\t\t\tlet dependencyTable = dependencyGraph.find('.pickListDependencyTable');\n\t\t\tfor (var key in sourceValuesArray) {\n\t\t\t\tlet encodedSourceValue;\n\t\t\t\tif (typeof sourceValuesArray[key] == 'string') {\n\t\t\t\t\tencodedSourceValue = sourceValuesArray[key].replace(/\"/g, '\\\\\"');\n\t\t\t\t} else {\n\t\t\t\t\tencodedSourceValue = sourceValuesArray[key];\n\t\t\t\t}\n\t\t\t\tlet selectedTargetValues = dependencyTable\n\t\t\t\t\t.find('td[data-source-value=\"' + encodedSourceValue + '\"]')\n\t\t\t\t\t.filter('.selectedCell');\n\t\t\t\tlet targetValues = [];\n\t\t\t\tif (selectedTargetValues.length > 0) {\n\t\t\t\t\tjQuery.each(selectedTargetValues, function (index, element) {\n\t\t\t\t\t\ttargetValues.push(jQuery(element).data('targetValue'));\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\ttargetValues.push('');\n\t\t\t\t}\n\t\t\t\tself.valueMapping.push({\n\t\t\t\t\tsourcevalue: sourceValuesArray[key],\n\t\t\t\t\ttargetvalues: targetValues\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Register click event for select source values button in add/edit view\n\t\t */\n\t\tregisterSelectSourceValuesClick(dependencyGraph) {\n\t\t\tdependencyGraph.find('button.sourceValues').on('click', () => {\n\t\t\t\tconst selectSourceValues = dependencyGraph.find('.modalCloneCopy');\n\t\t\t\tconst clonedContainer = selectSourceValues.clone(true, true).removeClass('modalCloneCopy');\n\t\t\t\tapp.showModalWindow(\n\t\t\t\t\tclonedContainer,\n\t\t\t\t\t(data) => {\n\t\t\t\t\t\tdata.find('.sourcePicklistValuesModal').removeClass('d-none');\n\t\t\t\t\t\tdata.find('[name=\"saveButton\"]').on('click', (e) => {\n\t\t\t\t\t\t\tthis.selectedSourceValues = [];\n\t\t\t\t\t\t\tconst sourceValues = data.find('.sourceValue');\n\t\t\t\t\t\t\t$.each(sourceValues, (index, ele) => {\n\t\t\t\t\t\t\t\tconst element = $(ele);\n\t\t\t\t\t\t\t\tconst elementId = element.attr('id');\n\t\t\t\t\t\t\t\tconst hiddenElement = selectSourceValues.find('#' + elementId);\n\t\t\t\t\t\t\t\tif (element.is(':checked')) {\n\t\t\t\t\t\t\t\t\tthis.selectedSourceValues.push(element.val());\n\t\t\t\t\t\t\t\t\thiddenElement.prop('checked', true);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\thiddenElement.prop('checked', false);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\tthis.loadMappingForSelectedValues(dependencyGraph);\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\t{ width: '1000px' }\n\t\t\t\t);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function used to load mapping for selected picklist fields\n\t\t */\n\t\tloadMappingForSelectedValues: function (dependencyGraph) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar allSourcePickListValues = JSON.parse(dependencyGraph.find('.allSourceValues').val());\n\t\t\tvar dependencyTable = dependencyGraph.find('.pickListDependencyTable');\n\t\t\tfor (var key in allSourcePickListValues) {\n\t\t\t\tif (typeof allSourcePickListValues[key] == 'string') {\n\t\t\t\t\tvar encodedSourcePickListValue = allSourcePickListValues[key].replace(/\"/g, '\\\\\"');\n\t\t\t\t} else {\n\t\t\t\t\tencodedSourcePickListValue = allSourcePickListValues[key];\n\t\t\t\t}\n\t\t\t\tvar mappingCells = dependencyTable.find('[data-source-value=\"' + encodedSourcePickListValue + '\"]');\n\t\t\t\tif (jQuery.inArray(allSourcePickListValues[key], thisInstance.selectedSourceValues) == -1) {\n\t\t\t\t\tmappingCells.hide();\n\t\t\t\t} else {\n\t\t\t\t\tmappingCells.show();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * This function will save the picklist dependency details\n\t\t */\n\t\tsavePickListDependency: function (form) {\n\t\t\tconst self = this;\n\t\t\tlet progressIndicatorElement = $.progressIndicator({\n\t\t\t\t\tposition: 'html',\n\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\tenabled: true\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t\tparams = form.serializeFormData();\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['action'] = 'SaveAjax';\n\t\t\tparams['mapping'] = JSON.stringify(self.valueMapping);\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\tif (data['success']) {\n\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tVtiger_Helper_Js.showMessage({\n\t\t\t\t\t\t\ttext: app.vtranslate('JS_PICKLIST_DEPENDENCY_SAVED'),\n\t\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t\t});\n\t\t\t\t\t\tself.loadListViewContents(params['sourceModule']);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.fail(function (error) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t});\n\t\t},\n\t\t/**\n\t\t * This function will load the listView contents after Add/Edit picklist dependency\n\t\t */\n\t\tloadListViewContents: function (forModule) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tvar params = {};\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['view'] = 'List';\n\t\t\tparams['formodule'] = forModule;\n\n\t\t\tAppConnector.requestPjax(params)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t//replace the new list view contents\n\t\t\t\t\tjQuery('.contentsDiv').html(data);\n\t\t\t\t\tApp.Fields.Picklist.changeSelectElementView(jQuery('.contentsDiv'));\n\t\t\t\t\tthisInstance.registerListViewEvents();\n\t\t\t\t})\n\t\t\t\t.fail(function (error, err) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * register change event for source module in add/edit picklist dependency\n\t\t */\n\t\tregisterSourceModuleChangeEvent: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar container = jQuery('.contentsDiv');\n\t\t\tcontainer.find('.pickListSupportedModules').on('change', function (e) {\n\t\t\t\tvar currentTarget = jQuery(e.currentTarget);\n\t\t\t\tvar forModule = currentTarget.val();\n\t\t\t\tthisInstance.loadListViewContents(forModule);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * register the form submit event\n\t\t */\n\t\tregisterSubmitEvent: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar form = jQuery('#pickListDependencyForm');\n\t\t\tvar dependencyGraph = jQuery('#dependencyGraph');\n\t\t\tform.on('submit', function (e) {\n\t\t\t\te.preventDefault();\n\t\t\t\ttry {\n\t\t\t\t\tthisInstance.updateValueMapping(dependencyGraph);\n\t\t\t\t} catch (e) {\n\t\t\t\t\tapp.showAlert(e.message);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (form.find('.editDependency').val() != 'true' && thisInstance.valueMapping.length < 1) {\n\t\t\t\t\tvar params = {};\n\t\t\t\t\tparams.text = app.vtranslate('JS_PICKLIST_DEPENDENCY_NO_SAVED');\n\t\t\t\t\tparams.type = 'info';\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t} else {\n\t\t\t\t\tthisInstance.savePickListDependency(form);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * register events for picklist dependency\n\t\t */\n\t\tregisterEvents: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar form = jQuery('#pickListDependencyForm');\n\t\t\tif (form.length > 0) {\n\t\t\t\tif (form.find('.editDependency').val() == 'true') {\n\t\t\t\t\tform\n\t\t\t\t\t\t.find('select[name=\"sourceModule\"],select[name=\"sourceField\"],select[name=\"targetField\"]')\n\t\t\t\t\t\t.prop('disabled', true);\n\t\t\t\t\tthisInstance.registerDependencyGraphEvents();\n\t\t\t\t\tthisInstance.registerSubmitEvent();\n\t\t\t\t} else {\n\t\t\t\t\tthisInstance.registerAddViewEvents();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthisInstance.registerListViewEvents();\n\t\t\t}\n\t\t}\n\t}\n);\n\njQuery(document).ready(function () {\n\tvar instance = new Settings_PickListDependency_Js();\n\tinstance.registerEvents();\n});\n"],"names":["jQuery","Class","pickListDependencyInstance","triggerAdd","event","stopPropagation","instance","Settings_PickListDependency_Js","updatedSourceValues","showEditView","listViewForModule","done","registerAddViewEvents","triggerEdit","module","sourceField","targetField","form","find","prop","registerDependencyGraphEvents","registerSubmitEvent","triggerDelete","currentTrEle","currentTarget","closest","app","showConfirmModal","title","vtranslate","confirmedCallback","deleteDependency","params","text","Settings_Vtiger_Index_Js","showMessage","fadeOut","remove","init","valueMapping","selectedSourceValues","aDeferred","Deferred","progressIndicatorElement","progressIndicator","position","blockInfo","enabled","getModuleName","getParentModuleName","AppConnector","requestPjax","data","mode","container","html","App","Fields","Picklist","showSelect2ElementView","dropdownCss","resolve","fail","error","reject","promise","getModuleDependencyGraph","thisInstance","on","forModule","val","registerPicklistFieldsChangeEvent","checkValuesForDependencyGraph","select2SourceField","getSelect2ElementFromSelect","select2TargetField","sourceFieldValue","targetFieldValue","dependencyGraph","resultMessage","addClass","validationEngine","sourceModule","checkCyclicDependency","result","removeClass","addNewDependencyPickList","request","$","parent","view","sourcefield","targetfield","css","padding","border","background","err","registerCancelAddView","cancelDiv","loadListViewContents","registerTargetFieldsClickEvent","registerTargetFieldsUnmarkAll","registerSelectSourceValuesClick","registerCancelDependency","registerListViewEvents","registerSourceModuleChangeEvent","cancelDependencyLink","e","sourceValue","inArray","push","hasClass","each","updateValueMapping","self","sourceValuesArray","dependencyTable","encodedSourceValue","key","replace","selectedTargetValues","filter","targetValues","length","index","element","sourcevalue","targetvalues","selectSourceValues","clonedContainer","clone","showModalWindow","sourceValues","ele","elementId","attr","hiddenElement","is","hideModalWindow","loadMappingForSelectedValues","width","allSourcePickListValues","JSON","parse","encodedSourcePickListValue","mappingCells","hide","show","savePickListDependency","serializeFormData","stringify","Vtiger_Helper_Js","type","changeSelectElementView","preventDefault","showAlert","message","registerEvents","document","ready"],"mappings":"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"}