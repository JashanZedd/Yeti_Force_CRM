{"version":3,"file":"Edit.min.js","sources":["Edit.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\nwindow.Settings_PickListDependency_Edit_Js = class {\n\tconditionBuilders = [];\n\n\t/**\n\t * Get progress inducator element\n\t * @param {jQuery} block\n\t * @returns\n\t */\n\tgetProgressIndicator(block) {\n\t\tlet params = { position: 'html', blockInfo: { enabled: true } };\n\t\tif (typeof block !== 'undefined') {\n\t\t\tparams.blockInfo.elementToBlock = block;\n\t\t}\n\t\treturn $.progressIndicator(params);\n\t}\n\n\t/**\n\t * Register basic events\n\t */\n\tregisterBasicEvents() {\n\t\tthis.container.on('change', 'select[name=\"tabid\"]', (e) => {\n\t\t\tif (!e.currentTarget.value) {\n\t\t\t\tthis.fieldsContainer.html('');\n\t\t\t\tthis.graphContainer.html('');\n\t\t\t} else {\n\t\t\t\tthis.getView({ mode: 'dependentFields', ...this.getDefaultParams() }).done((data) => {\n\t\t\t\t\tthis.fieldsContainer.html(data);\n\t\t\t\t\tthis.moduleField = this.fieldsContainer.find('select[name=\"tabid\"]');\n\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(this.fieldsContainer.find('select'));\n\t\t\t\t\tthis.graphContainer.html('');\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tthis.fieldsContainer.on('change', 'select[name=\"source_field\"]', () => {\n\t\t\tthis.graphContainer.html('');\n\t\t\tthis.validate(form).done(() => {\n\t\t\t\tthis.getView({ mode: 'getDependencyGraph', ...this.getDefaultParams(), ...this.form.serializeFormData() }).done(\n\t\t\t\t\t(data) => {\n\t\t\t\t\t\tthis.graphContainer.html(data);\n\t\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(this.graphContainer.find('select'));\n\t\t\t\t\t\tthis.registerConditionBuilder();\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\n\t\tthis.container.on('click', '.js-pd-save', () => {\n\t\t\tfor (var key in this.conditionBuilders) {\n\t\t\t\tthis.container.find(`input[name=\"${key}\"]`).val(JSON.stringify(this.conditionBuilders[key].getConditions()));\n\t\t\t}\n\t\t\tthis.validate(form).done(() => {\n\t\t\t\tthis.saveAjax({ mode: 'save', ...this.form.serializeFormData() });\n\t\t\t});\n\t\t});\n\t}\n\t/**\n\t * Validate\n\t * @returns bool\n\t */\n\tvalidate() {\n\t\tlet aDeferred = $.Deferred();\n\t\tlet result = this.form.validationEngine('validate');\n\t\tif (result) {\n\t\t\tthis.saveAjax({\n\t\t\t\tmode: 'preSaveValidation',\n\t\t\t\t...this.getDefaultParams(),\n\t\t\t\t...this.form.serializeFormData()\n\t\t\t})\n\t\t\t\t.done((response) => {\n\t\t\t\t\tlet errors = response.result;\n\t\t\t\t\tfor (let i in errors) {\n\t\t\t\t\t\tif (errors[i].result !== true) {\n\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\ttext: errors[i].message ? errors[i].message : app.vtranslate('JS_ERROR'),\n\t\t\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\t\t\tdelay: 3000,\n\t\t\t\t\t\t\t\thide: true\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\terrors.length <= 0 ? aDeferred.resolve(true) : aDeferred.reject(false);\n\t\t\t\t})\n\t\t\t\t.fail((response) => {\n\t\t\t\t\taDeferred.reject(response);\n\t\t\t\t});\n\t\t} else {\n\t\t\taDeferred.reject(result);\n\t\t}\n\n\t\treturn aDeferred.promise();\n\t}\n\n\t/**\n\t * Save data\n\t * @param {Object} formData\n\t */\n\tsaveAjax(formData) {\n\t\tlet progress = this.getProgressIndicator();\n\t\tlet aDeferred = $.Deferred();\n\t\tapp\n\t\t\t.saveAjax('', [], formData)\n\t\t\t.done((response) => {\n\t\t\t\tif (response && typeof response === 'string') {\n\t\t\t\t\tresponse = JSON.parse(response);\n\t\t\t\t}\n\t\t\t\tif (response.result && response.result.url) {\n\t\t\t\t\twindow.location.href = response.result.url;\n\t\t\t\t}\n\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\taDeferred.resolve(response);\n\t\t\t})\n\t\t\t.fail((error) => {\n\t\t\t\tapp.showNotify({ text: app.vtranslate('JS_ERROR'), type: 'error' });\n\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\taDeferred.reject(error);\n\t\t\t});\n\n\t\treturn aDeferred.promise();\n\t}\n\t/**\n\t * Get default params\n\t * @returns {Object}\n\t */\n\tgetDefaultParams() {\n\t\treturn {\n\t\t\tmodule: app.getModuleName(),\n\t\t\tparent: app.getParentModuleName(),\n\t\t\tview: 'IndexAjax',\n\t\t\ttabid: this.moduleField.val()\n\t\t};\n\t}\n\n\t/**\n\t * Get view\n\t * @param {Objcet} params\n\t * @returns html\n\t */\n\tgetView(params) {\n\t\tlet aDeferred = $.Deferred();\n\t\tlet progressIndicatorElement = $.progressIndicator({ position: 'html', blockInfo: { enabled: true } });\n\t\tAppConnector.request(params)\n\t\t\t.done(function (data) {\n\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\taDeferred.resolve(data);\n\t\t\t})\n\t\t\t.fail(function (error) {\n\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\tapp.showNotify({ text: app.vtranslate('JS_ERROR'), type: 'error' });\n\t\t\t\taDeferred.reject(error);\n\t\t\t});\n\n\t\treturn aDeferred.promise();\n\t}\n\t/**\n\t * Register condition builder\n\t */\n\tregisterConditionBuilder() {\n\t\tlet sourceModuleName = this.moduleField.val();\n\t\tif (sourceModuleName) {\n\t\t\tlet sourceField = this.fieldsContainer.find('[name=\"source_field\"]').val();\n\t\t\tthis.container.find('.js-condition-builder').each((_, e) => {\n\t\t\t\tlet conditionBuilder = new Vtiger_ConditionBuilder_Js($(e), { sourceModuleName, sourceField });\n\t\t\t\tconditionBuilder.registerEvents();\n\t\t\t\tlet name = $(e).closest('.js-field-container').find('.js-condition-value').attr('name');\n\t\t\t\tthis.conditionBuilders[name] = conditionBuilder;\n\t\t\t});\n\t\t}\n\t}\n\t/**\n\t * Register toggle block\n\t */\n\tregisterBlockToggleEvent() {\n\t\tthis.container.on('click', '.blockHeader', function (e) {\n\t\t\tconst target = $(e.target);\n\t\t\tif (\n\t\t\t\ttarget.is('input') ||\n\t\t\t\ttarget.is('button') ||\n\t\t\t\ttarget.parents().is('button') ||\n\t\t\t\ttarget.hasClass('js-stop-propagation') ||\n\t\t\t\ttarget.parents().hasClass('js-stop-propagation')\n\t\t\t) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tconst blockHeader = $(e.currentTarget);\n\t\t\tconst blockContents = blockHeader.next();\n\t\t\tconst iconToggle = blockHeader.find('.iconToggle');\n\t\t\tif (blockContents.hasClass('d-none')) {\n\t\t\t\tblockContents.removeClass('d-none');\n\t\t\t\ticonToggle.removeClass(iconToggle.data('hide')).addClass(iconToggle.data('show'));\n\t\t\t} else {\n\t\t\t\tblockContents.addClass('d-none');\n\t\t\t\ticonToggle.removeClass(iconToggle.data('show')).addClass(iconToggle.data('hide'));\n\t\t\t}\n\t\t});\n\t}\n\t/**\n\t * Register events\n\t */\n\tregisterEvents() {\n\t\tthis.container = $('.js-picklist-dependent-container');\n\t\tthis.form = this.container.find('form');\n\t\tthis.moduleField = this.container.find('select[name=\"tabid\"]');\n\t\tthis.fieldsContainer = this.container.find('.js-dependent-fields');\n\t\tthis.graphContainer = this.container.find('.js-dependency-tables-container');\n\t\tthis.form.validationEngine(app.validationEngineOptions);\n\t\tthis.registerBasicEvents();\n\t\tthis.registerConditionBuilder();\n\t\tthis.registerBlockToggleEvent();\n\t}\n};\n"],"names":["window","Settings_PickListDependency_Edit_Js","block","params","position","blockInfo","enabled","elementToBlock","$","progressIndicator","container","on","e","currentTarget","value","getView","mode","getDefaultParams","done","data","fieldsContainer","html","moduleField","find","App","Fields","Picklist","showSelect2ElementView","graphContainer","validate","form","serializeFormData","registerConditionBuilder","conditionBuilders","key","val","JSON","stringify","getConditions","saveAjax","Deferred","result","validationEngine","response","errors","i","app","showNotify","text","message","vtranslate","type","delay","hide","length","aDeferred","resolve","reject","fail","promise","formData","getProgressIndicator","parse","url","location","href","progress","error","module","getModuleName","parent","getParentModuleName","view","tabid","progressIndicatorElement","request","sourceModuleName","each","_","conditionBuilder","sourceField","registerEvents","closest","attr","name","target","is","parents","hasClass","blockHeader","blockContents","next","iconToggle","removeClass","addClass","validationEngineOptions","registerBasicEvents","registerBlockToggleEvent"],"mappings":"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"}