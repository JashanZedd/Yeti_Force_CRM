jQuery.Class("Settings_Countries_Index_Js",{},{registerSortableEvent:function(){var b=this;var a=jQuery("tbody",jQuery(".listViewEntriesTable"));a.sortable({helper:function(d,c){c.children().each(function(e,f){f=jQuery(f);f.width(f.width())});return c},containment:a,revert:true,update:function(d,c){b.registerSequenceListOnServer()}})},registerStatus:function(a){a.find("button.status").on("click",function(){var c=$(this);var d=c.closest("tr").data("id");var b=c.data("status")?0:1;AppConnector.request({module:app.getModuleName(),parent:app.getParentModuleName(),action:"UpdateStatus",id:d,status:b}).then(function(e){if(e.success&&e.result){c.data("status",b);c.toggleClass("btn-success").toggleClass("btn-danger");Vtiger_Helper_Js.showMessage({title:app.vtranslate("JS_LBL_COUNTRY"),text:app.vtranslate("JS_SAVE_NOTIFY_OK"),type:"success",animation:"show"})}})})},registerPhone:function(a){a.find("button.phone").on("click",function(){var c=$(this);var d=c.closest("tr").data("id");var b=c.data("phone")?0:1;AppConnector.request({module:app.getModuleName(),parent:app.getParentModuleName(),action:"UpdatePhone",id:d,phone:b}).then(function(e){if(e.success&&e.result){c.data("phone",b);c.toggleClass("btn-success").toggleClass("btn-danger");Vtiger_Helper_Js.showMessage({title:app.vtranslate("JS_LBL_COUNTRY"),text:app.vtranslate("JS_SAVE_NOTIFY_OK"),type:"success",animation:"show"})}})})},registerUitype:function(a){a.find("button.uitype").on("click",function(){var c=$(this);var d=c.closest("tr").data("id");var b=c.data("uitype")?0:1;AppConnector.request({module:app.getModuleName(),parent:app.getParentModuleName(),action:"UpdateUitype",id:d,uitype:b}).then(function(e){if(e.success&&e.result){c.data("uitype",b);c.toggleClass("btn-success").toggleClass("btn-danger");Vtiger_Helper_Js.showMessage({title:app.vtranslate("JS_LBL_COUNTRY"),text:app.vtranslate("JS_SAVE_NOTIFY_OK"),type:"success",animation:"show"})}})})},registerAllStatuses:function(a){a.find("button.all-statuses").on("click",function(){var c=$(this);var b=c.data("all-statuses")?0:1;AppConnector.request({module:app.getModuleName(),parent:app.getParentModuleName(),action:"UpdateAllStatuses",status:b}).then(function(e){if(e.success&&e.result){var d=a.find(".status");if(b){d.removeClass("btn-success").addClass("btn-danger");d.data("status",1)}else{d.removeClass("btn-danger").addClass("btn-success");d.data("status",0)}c.data("all-statuses",b);Vtiger_Helper_Js.showMessage({title:app.vtranslate("JS_LBL_COUNTRY"),text:app.vtranslate("JS_SAVE_NOTIFY_OK"),type:"success",animation:"show"})}})})},registerRowToTop:function(b){var a=this;b.find("button.to-top").on("click",function(){var c=$(this).closest("tr");$(this).closest("table.listViewEntriesTable tbody").prepend(c);a.registerSequenceListOnServer()})},registerRowToBottom:function(b){var a=this;b.find("button.to-bottom").on("click",function(){var c=$(this).closest("tr");$(this).closest("table.listViewEntriesTable tbody").append(c);a.registerSequenceListOnServer()})},registerSequenceListOnServer:function(){var a={};jQuery("tbody tr").each(function(c){a[++c]=jQuery(this).data("id")});var b={sequencesList:JSON.stringify(a),module:app.getModuleName(),parent:app.getParentModuleName(),action:"UpdateSequence"};AppConnector.request(b).then(function(c){Vtiger_Helper_Js.showMessage({title:app.vtranslate("JS_LBL_COUNTRY"),text:app.vtranslate("JS_SAVE_NOTIFY_OK"),type:"success",animation:"show"})})},registerEvents:function(){var a=$(".contentsDiv");this.registerSortableEvent();this.registerStatus(a);this.registerPhone(a);this.registerUitype(a);this.registerAllStatuses(a);this.registerRowToTop(a);this.registerRowToBottom(a)}});