{"version":3,"file":"Index.min.js","sources":["Index.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\n$.Class(\"Settings_Countries_Index_Js\", {}, {\n\tregisterSortableEvent: function () {\n\t\tvar thisInstance = this;\n\t\tvar tbody = $(\"tbody\", $('.listViewEntriesTable'));\n\t\ttbody.sortable({\n\t\t\thelper: function (e, ui) {\n\t\t\t\t//while dragging helper elements td element will take width as contents width\n\t\t\t\t//so we are explicity saying that it has to be same width so that element will not\n\t\t\t\t//look like distrubed\n\t\t\t\tui.children().each(function (index, element) {\n\t\t\t\t\telement = $(element);\n\t\t\t\t\telement.width(element.width());\n\t\t\t\t})\n\t\t\t\treturn ui;\n\t\t\t},\n\t\t\tcontainment: tbody,\n\t\t\trevert: true,\n\t\t\tupdate: function (e, ui) {\n\t\t\t\tthisInstance.registerSequenceListOnServer();\n\t\t\t}\n\t\t});\n\t},\n\tregisterStatus: function (content) {\n\t\tcontent.find('button.status').on('click', function () {\n\t\t\tvar element = $(this);\n\t\t\tvar id = element.closest('tr').data('id');\n\t\t\tvar status = element.data('status') ? 0 : 1;\n\t\t\tAppConnector.request({\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\taction: 'SaveAjax',\n\t\t\t\tmode: 'updateStatus',\n\t\t\t\tid: id,\n\t\t\t\tstatus: status\n\t\t\t}).done(function (data) {\n\t\t\t\tif (data.success && data.result) {\n\t\t\t\t\telement.data('status', status)\n\t\t\t\t\telement.toggleClass('btn-success')\n\t\t\t\t\t\t.toggleClass('btn-danger');\n\t\t\t\t\tVtiger_Helper_Js.showMessage({\n\t\t\t\t\t\ttitle: app.vtranslate('JS_COUNTRY_SETTING'),\n\t\t\t\t\t\ttext: app.vtranslate('JS_SAVE_NOTIFY_OK'),\n\t\t\t\t\t\ttype: 'success',\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\tregisterPhone: function (content) {\n\t\tcontent.find('button.phone').on('click', function () {\n\t\t\tvar element = $(this);\n\t\t\tvar id = element.closest('tr').data('id');\n\t\t\tvar phone = element.data('phone') ? 0 : 1;\n\t\t\tAppConnector.request({\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\taction: 'SaveAjax',\n\t\t\t\tmode: 'updatePhone',\n\t\t\t\tid: id,\n\t\t\t\tphone: phone\n\t\t\t}).done(function (data) {\n\t\t\t\tif (data.success && data.result) {\n\t\t\t\t\telement.data('phone', phone)\n\t\t\t\t\telement.toggleClass('btn-success')\n\t\t\t\t\t\t.toggleClass('btn-danger');\n\t\t\t\t\tVtiger_Helper_Js.showMessage({\n\t\t\t\t\t\ttitle: app.vtranslate('JS_COUNTRY_SETTING'),\n\t\t\t\t\t\ttext: app.vtranslate('JS_SAVE_NOTIFY_OK'),\n\t\t\t\t\t\ttype: 'success',\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\tregisterUitype: function (content) {\n\t\tcontent.find('button.uitype').on('click', function () {\n\t\t\tvar element = $(this);\n\t\t\tvar id = element.closest('tr').data('id');\n\t\t\tvar uitype = element.data('uitype') ? 0 : 1;\n\t\t\tAppConnector.request({\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\taction: 'SaveAjax',\n\t\t\t\tmode: 'updateUitype',\n\t\t\t\tid: id,\n\t\t\t\tuitype: uitype\n\t\t\t}).done(function (data) {\n\t\t\t\tif (data.success && data.result) {\n\t\t\t\t\telement.data('uitype', uitype)\n\t\t\t\t\telement.toggleClass('btn-success')\n\t\t\t\t\t\t.toggleClass('btn-danger');\n\t\t\t\t\tVtiger_Helper_Js.showMessage({\n\t\t\t\t\t\ttitle: app.vtranslate('JS_COUNTRY_SETTING'),\n\t\t\t\t\t\ttext: app.vtranslate('JS_SAVE_NOTIFY_OK'),\n\t\t\t\t\t\ttype: 'success',\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\tallStatuses: 1,\n\tregisterAllStatuses: function (content) {\n\t\tvar thisInstance = this;\n\t\tcontent.find('button.all-statuses').on('click', function () {\n\t\t\tvar status = thisInstance.allStatuses ? 0 : 1;\n\t\t\tAppConnector.request({\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\taction: 'SaveAjax',\n\t\t\t\tmode: 'updateAllStatuses',\n\t\t\t\tstatus: status\n\t\t\t}).done(function (data) {\n\t\t\t\tif (data.success && data.result) {\n\t\t\t\t\tvar elements = content.find('.status');\n\t\t\t\t\tif (status) {\n\t\t\t\t\t\telements.removeClass('btn-success').addClass('btn-danger');\n\t\t\t\t\t\telements.data('status', 1);\n\t\t\t\t\t} else {\n\t\t\t\t\t\telements.removeClass('btn-danger').addClass('btn-success');\n\t\t\t\t\t\telements.data('status', 0);\n\t\t\t\t\t}\n\t\t\t\t\tVtiger_Helper_Js.showMessage({\n\t\t\t\t\t\ttitle: app.vtranslate('JS_COUNTRY_SETTING'),\n\t\t\t\t\t\ttext: app.vtranslate('JS_SAVE_NOTIFY_OK'),\n\t\t\t\t\t\ttype: 'success',\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (data.success) {\n\t\t\t\t\tthisInstance.allStatuses = status;\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\tregisterRowToTop: function (content) {\n\t\tvar thisInstance = this;\n\t\tcontent.find('button.to-top').on('click', function () {\n\t\t\tvar row = $(this).closest('tr');\n\t\t\t$(this).closest('table.listViewEntriesTable tbody').prepend(row);\n\t\t\tthisInstance.registerSequenceListOnServer();\n\t\t});\n\t},\n\tregisterRowToBottom: function (content) {\n\t\tvar thisInstance = this;\n\t\tcontent.find('button.to-bottom').on('click', function () {\n\t\t\tvar row = $(this).closest('tr');\n\t\t\t$(this).closest('table.listViewEntriesTable tbody').append(row);\n\t\t\tthisInstance.registerSequenceListOnServer();\n\t\t});\n\t},\n\tregisterSequenceListOnServer: function () {\n\t\tvar sequenceList = {};\n\t\t$('tbody tr').each(function (i) {\n\t\t\tsequenceList[++i] = $(this).data('id');\n\t\t});\n\t\tAppConnector.request({\n\t\t\tsequencesList: JSON.stringify(sequenceList),\n\t\t\tmodule: app.getModuleName(),\n\t\t\tparent: app.getParentModuleName(),\n\t\t\taction: 'SaveAjax',\n\t\t\tmode: 'updateSequence'\n\t\t}).done(function (data) {\n\t\t\tVtiger_Helper_Js.showMessage({\n\t\t\t\ttitle: app.vtranslate('JS_COUNTRY_SETTING'),\n\t\t\t\ttext: app.vtranslate('JS_SAVE_NOTIFY_OK'),\n\t\t\t\ttype: 'success',\n\t\t\t});\n\t\t});\n\t},\n\tregisterEvents: function () {\n\t\tvar content = $('.contentsDiv');\n\n\t\tthis.registerSortableEvent();\n\t\tthis.registerStatus(content);\n\t\tthis.registerPhone(content);\n\t\tthis.registerUitype(content);\n\t\tthis.registerAllStatuses(content);\n\t\tthis.registerRowToTop(content);\n\t\tthis.registerRowToBottom(content);\n\t}\n});\n"],"names":["$","Class","thisInstance","this","tbody","sortable","e","ui","children","each","index","element","width","registerSequenceListOnServer","content","find","on","id","closest","data","status","request","app","getModuleName","getParentModuleName","done","success","result","toggleClass","showMessage","vtranslate","phone","uitype","allStatuses","elements","removeClass","addClass","row","prepend","append","sequenceList","i","JSON","stringify","registerSortableEvent","registerStatus","registerPhone","registerUitype","registerAllStatuses","registerRowToTop","registerRowToBottom"],"mappings":"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"}