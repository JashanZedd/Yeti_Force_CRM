{"version":3,"file":"Index.min.js","sources":["Index.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\n$.Class(\"Settings_Countries_Index_Js\", {}, {\n\tregisterSortableEvent: function () {\n\t\tvar thisInstance = this;\n\t\tvar tbody = $(\"tbody\", $('.listViewEntriesTable'));\n\t\ttbody.sortable({\n\t\t\thelper: function (e, ui) {\n\t\t\t\t//while dragging helper elements td element will take width as contents width\n\t\t\t\t//so we are explicity saying that it has to be same width so that element will not\n\t\t\t\t//look like distrubed\n\t\t\t\tui.children().each(function (index, element) {\n\t\t\t\t\telement = $(element);\n\t\t\t\t\telement.width(element.width());\n\t\t\t\t})\n\t\t\t\treturn ui;\n\t\t\t},\n\t\t\tcontainment: tbody,\n\t\t\trevert: true,\n\t\t\tupdate: function (e, ui) {\n\t\t\t\tthisInstance.registerSequenceListOnServer();\n\t\t\t}\n\t\t});\n\t},\n\tregisterStatus: function (content) {\n\t\tcontent.find('button.status').on('click', function () {\n\t\t\tvar element = $(this);\n\t\t\tvar id = element.closest('tr').data('id');\n\t\t\tvar status = element.data('status') ? 0 : 1;\n\t\t\tAppConnector.request({\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\taction: 'SaveAjax',\n\t\t\t\tmode: 'updateStatus',\n\t\t\t\tid: id,\n\t\t\t\tstatus: status\n\t\t\t}).done(function (data) {\n\t\t\t\tif (data.success && data.result) {\n\t\t\t\t\telement.data('status', status)\n\t\t\t\t\telement.toggleClass('btn-success')\n\t\t\t\t\t\t.toggleClass('btn-danger');\n\t\t\t\t\tVtiger_Helper_Js.showMessage({\n\t\t\t\t\t\ttitle: app.vtranslate('JS_COUNTRY_SETTING'),\n\t\t\t\t\t\ttext: app.vtranslate('JS_SAVE_NOTIFY_OK'),\n\t\t\t\t\t\ttype: 'success',\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\tregisterPhone: function (content) {\n\t\tcontent.find('button.phone').on('click', function () {\n\t\t\tvar element = $(this);\n\t\t\tvar id = element.closest('tr').data('id');\n\t\t\tvar phone = element.data('phone') ? 0 : 1;\n\t\t\tAppConnector.request({\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\taction: 'SaveAjax',\n\t\t\t\tmode: 'updatePhone',\n\t\t\t\tid: id,\n\t\t\t\tphone: phone\n\t\t\t}).done(function (data) {\n\t\t\t\tif (data.success && data.result) {\n\t\t\t\t\telement.data('phone', phone)\n\t\t\t\t\telement.toggleClass('btn-success')\n\t\t\t\t\t\t.toggleClass('btn-danger');\n\t\t\t\t\tVtiger_Helper_Js.showMessage({\n\t\t\t\t\t\ttitle: app.vtranslate('JS_COUNTRY_SETTING'),\n\t\t\t\t\t\ttext: app.vtranslate('JS_SAVE_NOTIFY_OK'),\n\t\t\t\t\t\ttype: 'success',\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\tregisterUitype: function (content) {\n\t\tcontent.find('button.uitype').on('click', function () {\n\t\t\tvar element = $(this);\n\t\t\tvar id = element.closest('tr').data('id');\n\t\t\tvar uitype = element.data('uitype') ? 0 : 1;\n\t\t\tAppConnector.request({\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\taction: 'SaveAjax',\n\t\t\t\tmode: 'updateUitype',\n\t\t\t\tid: id,\n\t\t\t\tuitype: uitype\n\t\t\t}).done(function (data) {\n\t\t\t\tif (data.success && data.result) {\n\t\t\t\t\telement.data('uitype', uitype)\n\t\t\t\t\telement.toggleClass('btn-success')\n\t\t\t\t\t\t.toggleClass('btn-danger');\n\t\t\t\t\tVtiger_Helper_Js.showMessage({\n\t\t\t\t\t\ttitle: app.vtranslate('JS_COUNTRY_SETTING'),\n\t\t\t\t\t\ttext: app.vtranslate('JS_SAVE_NOTIFY_OK'),\n\t\t\t\t\t\ttype: 'success',\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\tallStatuses: 1,\n\tregisterAllStatuses: function (content) {\n\t\tvar thisInstance = this;\n\t\tcontent.find('button.all-statuses').on('click', function () {\n\t\t\tvar status = thisInstance.allStatuses ? 0 : 1;\n\t\t\tAppConnector.request({\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\taction: 'SaveAjax',\n\t\t\t\tmode: 'updateAllStatuses',\n\t\t\t\tstatus: status\n\t\t\t}).done(function (data) {\n\t\t\t\tif (data.success && data.result) {\n\t\t\t\t\tvar elements = content.find('.status');\n\t\t\t\t\tif (status) {\n\t\t\t\t\t\telements.removeClass('btn-success').addClass('btn-danger');\n\t\t\t\t\t\telements.data('status', 1);\n\t\t\t\t\t} else {\n\t\t\t\t\t\telements.removeClass('btn-danger').addClass('btn-success');\n\t\t\t\t\t\telements.data('status', 0);\n\t\t\t\t\t}\n\t\t\t\t\tVtiger_Helper_Js.showMessage({\n\t\t\t\t\t\ttitle: app.vtranslate('JS_COUNTRY_SETTING'),\n\t\t\t\t\t\ttext: app.vtranslate('JS_SAVE_NOTIFY_OK'),\n\t\t\t\t\t\ttype: 'success',\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (data.success) {\n\t\t\t\t\tthisInstance.allStatuses = status;\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\tregisterRowToTop: function (content) {\n\t\tvar thisInstance = this;\n\t\tcontent.find('button.to-top').on('click', function () {\n\t\t\tvar row = $(this).closest('tr');\n\t\t\t$(this).closest('table.listViewEntriesTable tbody').prepend(row);\n\t\t\tthisInstance.registerSequenceListOnServer();\n\t\t});\n\t},\n\tregisterRowToBottom: function (content) {\n\t\tvar thisInstance = this;\n\t\tcontent.find('button.to-bottom').on('click', function () {\n\t\t\tvar row = $(this).closest('tr');\n\t\t\t$(this).closest('table.listViewEntriesTable tbody').append(row);\n\t\t\tthisInstance.registerSequenceListOnServer();\n\t\t});\n\t},\n\tregisterSequenceListOnServer: function () {\n\t\tvar sequenceList = {};\n\t\t$('tbody tr').each(function (i) {\n\t\t\tsequenceList[++i] = $(this).data('id');\n\t\t});\n\t\tAppConnector.request({\n\t\t\tsequencesList: JSON.stringify(sequenceList),\n\t\t\tmodule: app.getModuleName(),\n\t\t\tparent: app.getParentModuleName(),\n\t\t\taction: 'SaveAjax',\n\t\t\tmode: 'updateSequence'\n\t\t}).done(function (data) {\n\t\t\tVtiger_Helper_Js.showMessage({\n\t\t\t\ttitle: app.vtranslate('JS_COUNTRY_SETTING'),\n\t\t\t\ttext: app.vtranslate('JS_SAVE_NOTIFY_OK'),\n\t\t\t\ttype: 'success',\n\t\t\t});\n\t\t});\n\t},\n\tregisterEvents: function () {\n\t\tvar content = $('.contentsDiv');\n\n\t\tthis.registerSortableEvent();\n\t\tthis.registerStatus(content);\n\t\tthis.registerPhone(content);\n\t\tthis.registerUitype(content);\n\t\tthis.registerAllStatuses(content);\n\t\tthis.registerRowToTop(content);\n\t\tthis.registerRowToBottom(content);\n\t}\n});\n"],"names":["$","Class","thisInstance","tbody","sortable","e","ui","children","each","index","element","width","registerSequenceListOnServer","content","find","on","id","closest","data","status","request","app","getModuleName","getParentModuleName","done","success","result","toggleClass","showMessage","vtranslate","phone","uitype","allStatuses","elements","removeClass","addClass","row","prepend","append","sequenceList","i","JSON","stringify","registerSortableEvent","registerStatus","registerPhone","registerUitype","registerAllStatuses","registerRowToTop","registerRowToBottom"],"mappings":";;AAAA;AACA;AAEAA,EAAEC,KAAF,CAAQ,6BAAR,EAAuC,EAAvC,EAA2C;wBACnB,iCAAY;MAC9BC,eAAe,IAAnB;MACIC,QAAQH,EAAE,OAAF,EAAWA,EAAE,uBAAF,CAAX,CAAZ;QACMI,QAAN,CAAe;WACN,gBAAUC,CAAV,EAAaC,EAAb,EAAiB;;;;OAIrBC,QAAH,GAAcC,IAAd,CAAmB,UAAUC,KAAV,EAAiBC,OAAjB,EAA0B;eAClCV,EAAEU,OAAF,CAAV;aACQC,KAAR,CAAcD,QAAQC,KAAR,EAAd;KAFD;WAIOL,EAAP;IATa;gBAWDH,KAXC;WAYN,IAZM;WAaN,gBAAUE,CAAV,EAAaC,EAAb,EAAiB;iBACXM,4BAAb;;GAdF;EAJyC;iBAsB1B,wBAAUC,OAAV,EAAmB;UAC1BC,IAAR,CAAa,eAAb,EAA8BC,EAA9B,CAAiC,OAAjC,EAA0C,YAAY;OACjDL,UAAUV,EAAE,IAAF,CAAd;OACIgB,KAAKN,QAAQO,OAAR,CAAgB,IAAhB,EAAsBC,IAAtB,CAA2B,IAA3B,CAAT;OACIC,SAAST,QAAQQ,IAAR,CAAa,QAAb,IAAyB,CAAzB,GAA6B,CAA1C;gBACaE,OAAb,CAAqB;YACZC,IAAIC,aAAJ,EADY;YAEZD,IAAIE,mBAAJ,EAFY;YAGZ,UAHY;UAId,cAJc;QAKhBP,EALgB;YAMZG;IANT,EAOGK,IAPH,CAOQ,UAAUN,IAAV,EAAgB;QACnBA,KAAKO,OAAL,IAAgBP,KAAKQ,MAAzB,EAAiC;aACxBR,IAAR,CAAa,QAAb,EAAuBC,MAAvB;aACQQ,WAAR,CAAoB,aAApB,EACEA,WADF,CACc,YADd;sBAEiBC,WAAjB,CAA6B;aACrBP,IAAIQ,UAAJ,CAAe,oBAAf,CADqB;YAEtBR,IAAIQ,UAAJ,CAAe,mBAAf,CAFsB;YAGtB;MAHP;;IAZF;GAJD;EAvByC;gBAgD3B,uBAAUhB,OAAV,EAAmB;UACzBC,IAAR,CAAa,cAAb,EAA6BC,EAA7B,CAAgC,OAAhC,EAAyC,YAAY;OAChDL,UAAUV,EAAE,IAAF,CAAd;OACIgB,KAAKN,QAAQO,OAAR,CAAgB,IAAhB,EAAsBC,IAAtB,CAA2B,IAA3B,CAAT;OACIY,QAAQpB,QAAQQ,IAAR,CAAa,OAAb,IAAwB,CAAxB,GAA4B,CAAxC;gBACaE,OAAb,CAAqB;YACZC,IAAIC,aAAJ,EADY;YAEZD,IAAIE,mBAAJ,EAFY;YAGZ,UAHY;UAId,aAJc;QAKhBP,EALgB;WAMbc;IANR,EAOGN,IAPH,CAOQ,UAAUN,IAAV,EAAgB;QACnBA,KAAKO,OAAL,IAAgBP,KAAKQ,MAAzB,EAAiC;aACxBR,IAAR,CAAa,OAAb,EAAsBY,KAAtB;aACQH,WAAR,CAAoB,aAApB,EACEA,WADF,CACc,YADd;sBAEiBC,WAAjB,CAA6B;aACrBP,IAAIQ,UAAJ,CAAe,oBAAf,CADqB;YAEtBR,IAAIQ,UAAJ,CAAe,mBAAf,CAFsB;YAGtB;MAHP;;IAZF;GAJD;EAjDyC;iBA0E1B,wBAAUhB,OAAV,EAAmB;UAC1BC,IAAR,CAAa,eAAb,EAA8BC,EAA9B,CAAiC,OAAjC,EAA0C,YAAY;OACjDL,UAAUV,EAAE,IAAF,CAAd;OACIgB,KAAKN,QAAQO,OAAR,CAAgB,IAAhB,EAAsBC,IAAtB,CAA2B,IAA3B,CAAT;OACIa,SAASrB,QAAQQ,IAAR,CAAa,QAAb,IAAyB,CAAzB,GAA6B,CAA1C;gBACaE,OAAb,CAAqB;YACZC,IAAIC,aAAJ,EADY;YAEZD,IAAIE,mBAAJ,EAFY;YAGZ,UAHY;UAId,cAJc;QAKhBP,EALgB;YAMZe;IANT,EAOGP,IAPH,CAOQ,UAAUN,IAAV,EAAgB;QACnBA,KAAKO,OAAL,IAAgBP,KAAKQ,MAAzB,EAAiC;aACxBR,IAAR,CAAa,QAAb,EAAuBa,MAAvB;aACQJ,WAAR,CAAoB,aAApB,EACEA,WADF,CACc,YADd;sBAEiBC,WAAjB,CAA6B;aACrBP,IAAIQ,UAAJ,CAAe,oBAAf,CADqB;YAEtBR,IAAIQ,UAAJ,CAAe,mBAAf,CAFsB;YAGtB;MAHP;;IAZF;GAJD;EA3EyC;cAoG7B,CApG6B;sBAqGrB,6BAAUhB,OAAV,EAAmB;MACnCX,eAAe,IAAnB;UACQY,IAAR,CAAa,qBAAb,EAAoCC,EAApC,CAAuC,OAAvC,EAAgD,YAAY;OACvDI,SAASjB,aAAa8B,WAAb,GAA2B,CAA3B,GAA+B,CAA5C;gBACaZ,OAAb,CAAqB;YACZC,IAAIC,aAAJ,EADY;YAEZD,IAAIE,mBAAJ,EAFY;YAGZ,UAHY;UAId,mBAJc;YAKZJ;IALT,EAMGK,IANH,CAMQ,UAAUN,IAAV,EAAgB;QACnBA,KAAKO,OAAL,IAAgBP,KAAKQ,MAAzB,EAAiC;SAC5BO,WAAWpB,QAAQC,IAAR,CAAa,SAAb,CAAf;SACIK,MAAJ,EAAY;eACFe,WAAT,CAAqB,aAArB,EAAoCC,QAApC,CAA6C,YAA7C;eACSjB,IAAT,CAAc,QAAd,EAAwB,CAAxB;MAFD,MAGO;eACGgB,WAAT,CAAqB,YAArB,EAAmCC,QAAnC,CAA4C,aAA5C;eACSjB,IAAT,CAAc,QAAd,EAAwB,CAAxB;;sBAEgBU,WAAjB,CAA6B;aACrBP,IAAIQ,UAAJ,CAAe,oBAAf,CADqB;YAEtBR,IAAIQ,UAAJ,CAAe,mBAAf,CAFsB;YAGtB;MAHP;;QAMGX,KAAKO,OAAT,EAAkB;kBACJO,WAAb,GAA2Bb,MAA3B;;IAvBF;GAFD;EAvGyC;mBAqIxB,0BAAUN,OAAV,EAAmB;MAChCX,eAAe,IAAnB;UACQY,IAAR,CAAa,eAAb,EAA8BC,EAA9B,CAAiC,OAAjC,EAA0C,YAAY;OACjDqB,MAAMpC,EAAE,IAAF,EAAQiB,OAAR,CAAgB,IAAhB,CAAV;KACE,IAAF,EAAQA,OAAR,CAAgB,kCAAhB,EAAoDoB,OAApD,CAA4DD,GAA5D;gBACaxB,4BAAb;GAHD;EAvIyC;sBA6IrB,6BAAUC,OAAV,EAAmB;MACnCX,eAAe,IAAnB;UACQY,IAAR,CAAa,kBAAb,EAAiCC,EAAjC,CAAoC,OAApC,EAA6C,YAAY;OACpDqB,MAAMpC,EAAE,IAAF,EAAQiB,OAAR,CAAgB,IAAhB,CAAV;KACE,IAAF,EAAQA,OAAR,CAAgB,kCAAhB,EAAoDqB,MAApD,CAA2DF,GAA3D;gBACaxB,4BAAb;GAHD;EA/IyC;+BAqJZ,wCAAY;MACrC2B,eAAe,EAAnB;IACE,UAAF,EAAc/B,IAAd,CAAmB,UAAUgC,CAAV,EAAa;gBAClB,EAAEA,CAAf,IAAoBxC,EAAE,IAAF,EAAQkB,IAAR,CAAa,IAAb,CAApB;GADD;eAGaE,OAAb,CAAqB;kBACLqB,KAAKC,SAAL,CAAeH,YAAf,CADK;WAEZlB,IAAIC,aAAJ,EAFY;WAGZD,IAAIE,mBAAJ,EAHY;WAIZ,UAJY;SAKd;GALP,EAMGC,IANH,CAMQ,UAAUN,IAAV,EAAgB;oBACNU,WAAjB,CAA6B;WACrBP,IAAIQ,UAAJ,CAAe,oBAAf,CADqB;UAEtBR,IAAIQ,UAAJ,CAAe,mBAAf,CAFsB;UAGtB;IAHP;GAPD;EA1JyC;iBAwK1B,0BAAY;MACvBhB,UAAUb,EAAE,cAAF,CAAd;;OAEK2C,qBAAL;OACKC,cAAL,CAAoB/B,OAApB;OACKgC,aAAL,CAAmBhC,OAAnB;OACKiC,cAAL,CAAoBjC,OAApB;OACKkC,mBAAL,CAAyBlC,OAAzB;OACKmC,gBAAL,CAAsBnC,OAAtB;OACKoC,mBAAL,CAAyBpC,OAAzB;;CAjLF"}