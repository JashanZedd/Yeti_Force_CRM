'use strict';

Vtiger_AdvanceFilter_Js('HideBlocks_AdvanceFilter_Js',{},{validationSupportedFieldConditionMap:{email:['e','n'],date:['is'],datetime:['is']},allConditionValidationNeededFieldList:['double','integer'],comparatorsWithNoValueBoxMap:['has changed','is empty','is not empty','is added'],getFieldSpecificType:function d(a){var b=a.data('fieldinfo'),c=b.type;return c},getModuleName:function a(){return app.getModuleName()},addNewCondition:function e(a){var b=jQuery('.basic',a),c=b.find('.js-conditions-row').clone(!0,!0);jQuery('select',c).addClass('select2');var d=jQuery('.conditionList',a);return d.append(c),App.Fields.Picklist.changeSelectElementView(c),c.find('[name="columnname"]').find('optgroup:first option:first').attr('selected','selected').trigger('change'),this},loadConditions:function n(a){var b=a.closest('div.js-conditions-row'),c=b.find('select[name="comparator"]'),d=b.find('[name="comparatorValue"]').val(),e=a.find('option:selected'),f=e.val(),g=f.match(/\((\w+)\) (\w+)/),h=this.getFieldSpecificType(e),i=this.getConditionListFromType(h);'undefined'==typeof i&&(i={},i.none='None');var j='';for(var k in i)if(i.hasOwnProperty(k)){var l=i[k],m=this.getConditionLabel(l);null==g?(j+='<option value="'+l+'"',l==d&&(j+=' selected="selected" '),j+='>'+m+'</option>'):'has changed'!=l&&(j+='<option value="'+l+'"',l==d&&(j+=' selected="selected" '),j+='>'+m+'</option>');}return c.empty().html(j).trigger('change'),c},getValues:function g(){var a=this,b=this.getFilterContainer(),c=new Array('columnname','comparator','value','valuetype','column_condition'),d={},e=0,f=jQuery('.conditionGroup',b);return f.each(function(b,g){var h=jQuery(g),i=jQuery('.conditionList .js-conditions-row',h);if(0>=i.length)return !0;var j={};i.each(function(d,f){var g=jQuery(f),h=jQuery('[name="columnname"]',g),k=jQuery('[data-value="value"]',g);if(a.isEmptyFieldSelected(h))return !0;var l,m,n=h.find('option:selected').data('fieldinfo'),o=n.type,p={};if('picklist'==o||'multipicklist'==o){for(l in c)if(m=c[l],'value'==m&&k.is('input')){var q=k.val(),r=k.data('picklistvalues'),s=q.split(','),t=[];for(d=0;d<s.length;d++)'undefined'==typeof r[s[d]]?t.push(s[d]):t.push(r[s[d]]);var u=t.join(',');p[m]=u;}else if('value'==m&&k.is('select')&&'picklist'==o)p[m]=k.val();else if('value'==m&&k.is('select')&&'multipicklist'==o){var v=k.val();p[m]=null==v?v:v.join(',');}else p[m]=jQuery('[name="'+m+'"]',g).val();}else for(l in c)m=c[l],p[m]='value'==m?k.val():jQuery('[name="'+m+'"]',g).val();('false'==jQuery('[name="valuetype"]',g).val()||0==jQuery('[name="valuetype"]',g).length)&&(p.valuetype='rawtext'),p.groupid='0'==b?'0':'1',g.is(':last-child')&&(p.column_condition=''),j[e]=p,e++;}),jQuery.isEmptyObject(j)||(d[b+1]={},d[b+1].columns=j),0<h.find('div.groupCondition').length&&!jQuery.isEmptyObject(d[b+1])&&(d[b+1].condition=f.find('div.groupCondition [name="condition"]').val());}),d},getFieldSpecificUi:function d(a){var b=a.find('option:selected'),c=b.data('fieldinfo');return -1==jQuery.inArray(c.comparatorElementVal,this.comparatorsWithNoValueBoxMap)?this._super(a):jQuery('')}}),Vtiger_Field_Js('Workflows_Field_Js',{},{getUiTypeSpecificHtml:function b(){var a=this.getUiTypeModel();return a.getUi()},getModuleName:function b(){var a=app.getModuleName();return a},getUi:function b(){var a='<input type="text" class="getPopupUi" name="'+this.getName()+'"  /><input type="hidden" name="valuetype" value="'+this.get('workflow_valuetype')+'" />';return a=jQuery(a),a.filter('.getPopupUi').val(app.htmlDecode(this.getValue())),this.addValidationToElement(a)}}),Vtiger_Date_Field_Js('Workflows_Date_Field_Js',{},{getDateFormat:function a(){return this.get('date-format')},getUi:function e(){var a,b,c=this.get('comparatorElementVal'),d=this.get('dateSpecificConditions');if(0<c.length){if('between'==c||'custom'==c)return a='<div class="date"><input class="dateRangeField" data-calendar-type="range" name="'+this.getName()+'" data-date-format="'+this.getDateFormat()+'" type="text" ReadOnly="true" value="'+this.getValue()+'"></div>',b=jQuery(a),this.addValidationToElement(b);if(this._specialDateComparator(c))return a='<input name="'+this.getName()+'" type="text" value="'+this.getValue()+'" data-validation-engine="validate[funcCall[Vtiger_Base_Validator_Js.invokeValidation]]" data-validator="[{"name":"PositiveNumber"}]">\n\t\t\t\t\t\t\t<input type="hidden" name="valuetype" value="'+this.get('workflow_valuetype')+'" />',jQuery(a);if(c in d){var f=d[c].startdate,g=d[c].enddate;return a='<input name="'+this.getName()+'"  type="text" ReadOnly="true" value="'+f+','+g+'">',jQuery(a)}if('is today'==c);else return this._super()}else return a='<input type="text" class="getPopupUi date" name="'+this.getName()+'"  data-date-format="'+this.getDateFormat()+'"  value="'+this.getValue()+'" /><input type="hidden" name="valuetype" value="'+this.get('workflow_valuetype')+'" />',b=jQuery(a),this.addValidationToElement(b)},_specialDateComparator:function d(a){var b=['less than days ago','more than days ago','in less than','in more than','days ago','days later'];for(var c in b)if(a==b[c])return !0;return !1}}),Vtiger_Date_Field_Js('Workflows_Datetime_Field_Js',{},{getDateFormat:function a(){return this.get('date-format')},getUi:function c(){var a,b;return this._specialDateTimeComparator(this.get('comparatorElementVal'))?(a='<input name="'+this.getName()+'" type="text" value="'+this.getValue()+'" data-validator="[{name:PositiveNumber}]"><input type="hidden" name="valuetype" value="'+this.get('workflow_valuetype')+'" />',b=jQuery(a)):(a='<input type="text" class="getPopupUi date" name="'+this.getName()+'"  data-date-format="'+this.getDateFormat()+'"  value="'+this.getValue()+'" /><input type="hidden" name="valuetype" value="'+this.get('workflow_valuetype')+'" />',b=jQuery(a)),b},_specialDateTimeComparator:function d(a){var b=['less than hours before','less than hours later','more than hours later','more than hours before'];for(var c in b)if(a==b[c])return !0;return !1}}),Vtiger_Currency_Field_Js('Workflows_Currency_Field_Js',{},{getUi:function c(){var a='<input type="text" class="getPopupUi marginLeftZero" name="'+this.getName()+'" value="'+this.getValue()+'"  /><input type="hidden" name="valuetype" value="'+this.get('workflow_valuetype')+'" />',b=jQuery(a);return this.addValidationToElement(b)}}),Vtiger_Time_Field_Js('Workflows_Time_Field_Js',{},{getUi:function c(){var a='<input type="text" class="getPopupUi time" name="'+this.getName()+'"  value="'+this.getValue()+'" /><input type="hidden" name="valuetype" value="'+this.get('workflow_valuetype')+'" />',b=jQuery(a);return this.addValidationToElement(b)}}),Vtiger_Field_Js('Vtiger_Percentage_Field_Js',{},{getUi:function c(){var a='<input type="text" class="getPopupUi" name="'+this.getName()+'" value="'+this.getValue()+'" /><input type="hidden" name="valuetype" value="'+this.get('workflow_valuetype')+'" />',b=jQuery(a);return this.addValidationToElement(b)}}),Vtiger_Field_Js('Vtiger_Text_Field_Js',{},{getUi:function c(){var a='<input type="text" class="getPopupUi" name="'+this.getName()+'" value="'+this.getValue()+'" /><input type="hidden" name="valuetype" value="'+this.get('workflow_valuetype')+'" />',b=jQuery(a);return this.addValidationToElement(b)}}),Vtiger_Field_Js('Vtiger_Boolean_Field_Js',{},{getUi:function c(){var a='<input type="text" class="getPopupUi boolean" name="'+this.getName()+'" value="'+this.getValue()+'" /><input type="hidden" name="valuetype" value="'+this.get('workflow_valuetype')+'" />',b=jQuery(a);return this.addValidationToElement(b)}}),Vtiger_Owner_Field_Js('Workflows_Owner_Field_Js',{},{getUi:function h(){var a='<select class="select2" name="'+this.getName()+'">',b=this.getPickListValues(),c=this.getValue();for(var d in b){a+='<optgroup label="'+d+'">';var e=b[d];for(var f in e)a+='<option value="'+f+'" ',f==c&&(a+=' selected '),a+='>'+e[f]+'</option>';a+='</optgroup>';}a+='</select>';var g=jQuery(a);return this.addValidationToElement(g),g}}),Vtiger_Picklist_Field_Js('Workflows_Picklist_Field_Js',{},{getUi:function i(){var a=app.htmlDecode(this.getValue()),b=this.getPickListValues(),c=[];jQuery.map(b,function(a){c.push(a);});var d={};for(var e in b){var f=b[e];d[f]=e;}var g='<input type="hidden" class="row select2" name="'+this.getName()+'">',h=jQuery(g).val(b[a]);h.data('tags',c).data('picklistvalues',d),this.addValidationToElement(h);App.Fields.Picklist.showSelect2ElementView(h,{placeholder:app.vtranslate('JS_PLEASE_SELECT_ATLEAST_ONE_OPTION'),closeOnSelect:!0,maximumSelectionLength:1});return h}});
//# sourceMappingURL=AdvanceFilter.min.js.map
