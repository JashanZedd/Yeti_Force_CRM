'use strict';

/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */

jQuery.Class('Settings_TwoFactorAuthentication_Index_Js', {}, {
	/**
  * Container (Form)
  */
	container: null,
	/**
  * Get Container (Form)
  * @returns {Object}
  */
	getContainer: function getContainer() {
		if (this.container === null) {
			this.container = $('form.js-two-factor-auth__form');
		}
		return this.container;
	},

	/**
  * Register events for form
  */
	registerForm: function registerForm() {
		var container = this.getContainer();
		container.on('change', function (event) {
			event.preventDefault();
			container.validationEngine(app.validationEngineOptions);
			if (container.validationEngine('validate')) {
				var progressIndicatorElement = jQuery.progressIndicator({
					position: 'html',
					blockInfo: {
						enabled: true
					}
				});
				AppConnector.request(container.serializeFormData()).done(function (response) {
					progressIndicatorElement.progressIndicator({ mode: 'hide' });
					Vtiger_Helper_Js.showPnotify({
						text: response.result.message,
						type: 'info'
					});
				});
			}
		});
	},

	/**
  * Register all events in view
  */
	registerEvents: function registerEvents() {
		this.registerForm();
	}
});
//# sourceMappingURL=Index.min.js.map
