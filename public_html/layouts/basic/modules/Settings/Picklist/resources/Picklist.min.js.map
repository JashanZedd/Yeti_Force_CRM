{"version":3,"file":"Picklist.min.js","sources":["Picklist.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n *************************************************************************************/\n'use strict';\n\nvar Settings_Picklist_Js = {\n\tregisterModuleChangeEvent: function() {\n\t\tjQuery('#pickListModules').on('change', function(e) {\n\t\t\tvar selectedModule = jQuery(e.currentTarget).val();\n\t\t\tif (selectedModule.length <= 0) {\n\t\t\t\tSettings_Vtiger_Index_Js.showMessage({\n\t\t\t\t\ttype: 'error',\n\t\t\t\t\ttext: app.vtranslate('JS_PLEASE_SELECT_MODULE')\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar params = {\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\tsource_module: selectedModule,\n\t\t\t\tview: 'IndexAjax',\n\t\t\t\tmode: 'getPickListDetailsForModule'\n\t\t\t};\n\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tAppConnector.request(params).done(function(data) {\n\t\t\t\tjQuery('#modulePickListContainer').html(data);\n\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\tApp.Fields.Picklist.changeSelectElementView(jQuery('#modulePickListContainer'));\n\t\t\t\tSettings_Picklist_Js.registerModulePickListChangeEvent();\n\t\t\t\tjQuery('#modulePickList').trigger('change');\n\t\t\t});\n\t\t});\n\t},\n\n\tregisterModulePickListChangeEvent: function() {\n\t\tjQuery('#modulePickList').on('change', function(e) {\n\t\t\tvar params = {\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\tsource_module: jQuery('#pickListModules').val(),\n\t\t\t\tview: 'IndexAjax',\n\t\t\t\tmode: 'getPickListValueForField',\n\t\t\t\tpickListFieldId: jQuery(e.currentTarget).val()\n\t\t\t};\n\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tAppConnector.request(params).done(function(data) {\n\t\t\t\tjQuery('#modulePickListValuesContainer').html(data);\n\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(jQuery('#rolesList'));\n\t\t\t\tSettings_Picklist_Js.registerItemActions();\n\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t});\n\t\t});\n\t},\n\n\tregisterAddItemEvent: function() {\n\t\tjQuery('#addItem').on('click', function(e) {\n\t\t\tvar data = jQuery('#createViewContents').find('.modal');\n\t\t\tvar clonedCreateView = data\n\t\t\t\t.clone(true, true)\n\t\t\t\t.removeClass('basicCreateView')\n\t\t\t\t.addClass('createView');\n\t\t\tclonedCreateView.find('.rolesList').addClass('select2');\n\t\t\tclonedCreateView.find('.automation-list').addClass('select2');\n\t\t\tvar callBackFunction = function(data) {\n\t\t\t\tjQuery('[name=\"addItemForm\"]', data).validationEngine();\n\t\t\t\tSettings_Picklist_Js.registerAddItemSaveEvent(data);\n\t\t\t\tSettings_Picklist_Js.regiserSelectRolesEvent(data);\n\t\t\t};\n\t\t\tapp.showModalWindow(clonedCreateView, function(data) {\n\t\t\t\tif (typeof callBackFunction == 'function') {\n\t\t\t\t\tcallBackFunction(data);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\n\tregisterAssingValueToRuleEvent: function() {\n\t\tjQuery('#assignValue').on('click', function() {\n\t\t\tvar pickListValuesTable = jQuery('#pickListValuesTable');\n\t\t\tvar selectedListItem = jQuery('.selectedListItem', pickListValuesTable);\n\t\t\tif (selectedListItem.length > 0) {\n\t\t\t\tvar selectedValues = [];\n\t\t\t\tjQuery.each(selectedListItem, function(i, element) {\n\t\t\t\t\tselectedValues.push(\n\t\t\t\t\t\tjQuery(element)\n\t\t\t\t\t\t\t.closest('tr')\n\t\t\t\t\t\t\t.data('key')\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tvar params = {\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\tsource_module: jQuery('#pickListModules').val(),\n\t\t\t\tview: 'IndexAjax',\n\t\t\t\tmode: 'showAssignValueToRoleView',\n\t\t\t\tpickListFieldId: jQuery('#modulePickList').val()\n\t\t\t};\n\t\t\tAppConnector.request(params).done(function(data) {\n\t\t\t\tapp.showModalWindow(data);\n\t\t\t\tjQuery('[name=\"addItemForm\"]', jQuery(data)).validationEngine();\n\t\t\t\tSettings_Picklist_Js.registerAssignValueToRoleSaveEvent(jQuery(data));\n\t\t\t\tif (selectedListItem.length > 0) {\n\t\t\t\t\tjQuery('[name=\"assign_values[]\"]', jQuery('#assignValueToRoleForm')).select2('val', selectedValues);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\n\tregisterAssignValueToRoleSaveEvent: function(data) {\n\t\tjQuery('#assignValueToRoleForm').on('submit', function(e) {\n\t\t\tvar form = jQuery(e.currentTarget);\n\n\t\t\tvar assignValuesSelectElement = jQuery('[name=\"assign_values[]\"]', form);\n\t\t\tvar assignValuesSelect2Element = app.getSelect2ElementFromSelect(assignValuesSelectElement);\n\t\t\tvar assignValueResult = Vtiger_MultiSelect_Validator_Js.invokeValidation(assignValuesSelectElement);\n\t\t\tif (assignValueResult != true) {\n\t\t\t\tassignValuesSelect2Element.validationEngine('showPrompt', assignValueResult, 'error', 'topLeft', true);\n\t\t\t} else {\n\t\t\t\tassignValuesSelect2Element.validationEngine('hide');\n\t\t\t}\n\n\t\t\tvar rolesSelectElement = jQuery('[name=\"rolesSelected[]\"]', form);\n\t\t\tvar select2Element = app.getSelect2ElementFromSelect(rolesSelectElement);\n\t\t\tvar result = Vtiger_MultiSelect_Validator_Js.invokeValidation(rolesSelectElement);\n\t\t\tif (result != true) {\n\t\t\t\tselect2Element.validationEngine('showPrompt', result, 'error', 'bottomLeft', true);\n\t\t\t} else {\n\t\t\t\tselect2Element.validationEngine('hide');\n\t\t\t}\n\n\t\t\tif (assignValueResult != true || result != true) {\n\t\t\t\te.preventDefault();\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\tform.find('[name=\"saveButton\"]').attr('disabled', 'disabled');\n\t\t\t}\n\t\t\tvar params = jQuery(e.currentTarget).serializeFormData();\n\t\t\tAppConnector.request(params).done(function(data) {\n\t\t\t\tif (typeof data.result !== 'undefined') {\n\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({\n\t\t\t\t\t\ttext: app.vtranslate('JS_VALUE_ASSIGNED_SUCCESSFULLY'),\n\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t\te.preventDefault();\n\t\t});\n\t},\n\n\tregisterEnablePickListValueClickEvent: function() {\n\t\tjQuery('#listViewContents').on('click', '.assignToRolePickListValue', function(e) {\n\t\t\tjQuery('#saveOrder').removeAttr('disabled');\n\n\t\t\tvar pickListVaue = jQuery(e.currentTarget);\n\t\t\tif (pickListVaue.hasClass('selectedCell')) {\n\t\t\t\tpickListVaue.removeClass('selectedCell').addClass('unselectedCell');\n\t\t\t\tpickListVaue.find('.fas').remove();\n\t\t\t} else {\n\t\t\t\tpickListVaue.removeClass('unselectedCell').addClass('selectedCell');\n\t\t\t\tpickListVaue.prepend('<i class=\"fas fa-check float-left\"></span>');\n\t\t\t}\n\t\t});\n\t},\n\n\tregisterenableOrDisableListSaveEvent: function() {\n\t\tjQuery('#saveOrder').on('click', function(e) {\n\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true,\n\t\t\t\t\telementToBlock: jQuery('.tab-content')\n\t\t\t\t}\n\t\t\t});\n\t\t\tvar pickListValues = jQuery('.assignToRolePickListValue');\n\t\t\tvar disabledValues = [];\n\t\t\tvar enabledValues = [];\n\t\t\tjQuery.each(pickListValues, function(i, element) {\n\t\t\t\tvar currentValue = jQuery(element);\n\t\t\t\tif (currentValue.hasClass('selectedCell')) {\n\t\t\t\t\tenabledValues.push(currentValue.data('id'));\n\t\t\t\t} else {\n\t\t\t\t\tdisabledValues.push(currentValue.data('id'));\n\t\t\t\t}\n\t\t\t});\n\t\t\tvar params = {\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\taction: 'SaveAjax',\n\t\t\t\tmode: 'enableOrDisable',\n\t\t\t\tenabled_values: enabledValues,\n\t\t\t\tdisabled_values: disabledValues,\n\t\t\t\tpicklistName: jQuery('[name=\"picklistName\"]').val(),\n\t\t\t\trolesSelected: jQuery('#rolesList').val()\n\t\t\t};\n\t\t\tAppConnector.request(params).done(function(data) {\n\t\t\t\tif (typeof data.result !== 'undefined') {\n\t\t\t\t\tjQuery(e.currentTarget).attr('disabled', 'disabled');\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({\n\t\t\t\t\t\ttext: app.vtranslate('JS_LIST_UPDATED_SUCCESSFULLY'),\n\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\n\tregiserSelectRolesEvent: function(data) {\n\t\tdata.find('[name=\"rolesSelected[]\"]').on('change', function(e) {\n\t\t\tvar rolesSelectElement = jQuery(e.currentTarget);\n\t\t\tvar selectedValue = rolesSelectElement.val();\n\t\t\tif (jQuery.inArray('all', selectedValue) != -1) {\n\t\t\t\trolesSelectElement.select2('val', '');\n\t\t\t\trolesSelectElement.select2('val', 'all');\n\t\t\t\trolesSelectElement.select2('close');\n\t\t\t\trolesSelectElement\n\t\t\t\t\t.find('option')\n\t\t\t\t\t.not(':first')\n\t\t\t\t\t.attr('disabled', 'disabled');\n\t\t\t\tdata\n\t\t\t\t\t.find(jQuery('.modal-body'))\n\t\t\t\t\t.append(\n\t\t\t\t\t\t'<div class=\"alert alert-info textAlignCenter\">' + app.vtranslate('JS_ALL_ROLES_SELECTED') + '</div>'\n\t\t\t\t\t);\n\t\t\t} else {\n\t\t\t\trolesSelectElement.find('option').removeAttr('disabled', 'disabled');\n\t\t\t\tdata\n\t\t\t\t\t.find('.modal-body')\n\t\t\t\t\t.find('.alert')\n\t\t\t\t\t.remove();\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t * Register rename item event\n\t */\n\tregisterRenameItemEvent: function() {\n\t\t$('#renameItem').on('click', e => {\n\t\t\tconst selectedListItems = this.getSelectedItems();\n\t\t\tif (selectedListItems.length < 1) {\n\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\ttitle: app.vtranslate('JS_MESSAGE'),\n\t\t\t\t\ttext: app.vtranslate('JS_NO_ITEM_SELECTED'),\n\t\t\t\t\ttype: 'error'\n\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t} else if (selectedListItems.length > 1) {\n\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\ttitle: app.vtranslate('JS_MESSAGE'),\n\t\t\t\t\ttext: app.vtranslate('JS_MORE_THAN_ONE_ITEM_SELECTED'),\n\t\t\t\t\ttype: 'error'\n\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t} else {\n\t\t\t\tAppConnector.request({\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\tsource_module: $('#pickListModules').val(),\n\t\t\t\t\tview: 'IndexAjax',\n\t\t\t\t\tmode: 'showEditView',\n\t\t\t\t\tpickListFieldId: $('#modulePickList').val(),\n\t\t\t\t\tfieldValueId: selectedListItems[0].keyId\n\t\t\t\t}).done(data => {\n\t\t\t\t\tapp.showModalWindow(data);\n\t\t\t\t\tconst form = $('#renameItemForm');\n\t\t\t\t\tthis.registerScrollForNonEditablePicklistValues(form);\n\t\t\t\t\tform.validationEngine();\n\t\t\t\t\tSettings_Picklist_Js.registerRenameItemSaveEvent();\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t * Function to register the scroll bar for NonEditable Picklist Values\n\t */\n\tregisterScrollForNonEditablePicklistValues: function(container) {\n\t\tjQuery(container)\n\t\t\t.find('.nonEditablePicklistValues')\n\t\t\t.slimScroll({\n\t\t\t\theight: '70px',\n\t\t\t\tsize: '6px'\n\t\t\t});\n\t},\n\n\t/**\n\t * Get selected list items\n\t *\n\t * @return  {array}\n\t */\n\tgetSelectedItems() {\n\t\tconst pickListValuesTable = $('#pickListValuesTable');\n\t\tconst selectedListItem = $('.selectedListItem', pickListValuesTable);\n\t\tconst selectedListItemsArray = [];\n\t\t$.each(selectedListItem, function(index, element) {\n\t\t\tselectedListItemsArray.push({\n\t\t\t\tkey: $(element)\n\t\t\t\t\t.closest('tr')\n\t\t\t\t\t.data('key'),\n\t\t\t\tkeyId: $(element)\n\t\t\t\t\t.closest('tr')\n\t\t\t\t\t.data('key-id')\n\t\t\t});\n\t\t});\n\t\treturn selectedListItemsArray;\n\t},\n\n\t/**\n\t * Register delete item event\n\t */\n\tregisterDeleteItemEvent() {\n\t\t$('#deleteItem').on('click', e => {\n\t\t\tconst selectedListItems = this.getSelectedItems();\n\t\t\tconst pickListValues = $('.pickListValue', pickListValuesTable);\n\t\t\tif (pickListValues.length === selectedListItems.length) {\n\t\t\t\tSettings_Vtiger_Index_Js.showMessage({\n\t\t\t\t\ttext: app.vtranslate('JS_YOU_CANNOT_DELETE_ALL_THE_VALUES'),\n\t\t\t\t\ttype: 'error'\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.showDeleteItemForm({\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\tsource_module: jQuery('#pickListModules').val(),\n\t\t\t\tview: 'IndexAjax',\n\t\t\t\tmode: 'showDeleteView',\n\t\t\t\tpickListFieldId: $('#modulePickList').val(),\n\t\t\t\tfieldValue: JSON.stringify(selectedListItems.map(item => item.key))\n\t\t\t});\n\t\t});\n\t},\n\n\tregisterDeleteOptionEvent: function() {\n\t\tlet replaceValueElement = jQuery('#replaceValue');\n\t\tjQuery('[name=\"delete_value[]\"]').on('select2:unselect', function(e) {\n\t\t\tlet id = e.params.data.id;\n\t\t\tlet text = e.params.data.text;\n\t\t\treplaceValueElement.append('<option value=\"' + id + '\">' + text + '</option>').trigger('change');\n\t\t});\n\t\tjQuery('[name=\"delete_value[]\"]').on('select2:select', function(e) {\n\t\t\tlet id = e.params.data.id;\n\t\t\tjQuery('#replaceValue option[value=\"' + id + '\"]').remove();\n\t\t\treplaceValueElement.trigger('change');\n\t\t});\n\t},\n\n\tregisterChangeRoleEvent: function() {\n\t\tjQuery('#rolesList').on('change', function(e) {\n\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true,\n\t\t\t\t\telementToBlock: jQuery('.tab-content')\n\t\t\t\t}\n\t\t\t});\n\t\t\tvar rolesList = jQuery(e.currentTarget);\n\t\t\tvar params = {\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\tview: 'IndexAjax',\n\t\t\t\tmode: 'getPickListValueByRole',\n\t\t\t\trolesSelected: rolesList.val(),\n\t\t\t\tpickListFieldId: jQuery('#modulePickList').val(),\n\t\t\t\tsourceModule: jQuery('input[name=\"source_module\"]').val()\n\t\t\t};\n\t\t\tAppConnector.request(params).done(function(data) {\n\t\t\t\tjQuery('#pickListValeByRoleContainer').html(data);\n\t\t\t\tSettings_Picklist_Js.registerenableOrDisableListSaveEvent();\n\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t});\n\t\t});\n\t},\n\n\t/**\n\t * Register process status item save evet\n\t *\n\t * @param   {jQuery}  form\n\t */\n\tregisterProcessStatusItemSaveEvent(form) {\n\t\tform.on('submit', e => {\n\t\t\te.preventDefault();\n\t\t\tlet form = $(e.currentTarget);\n\t\t\tif (form.validationEngine('validate')) {\n\t\t\t\tlet newValue,\n\t\t\t\t\tparams = form.serializeFormData();\n\t\t\t\tif (form.find('[name=\"newValue\"]').length > 0) {\n\t\t\t\t\tnewValue = $.trim(form.find('[name=\"newValue\"]').val());\n\t\t\t\t\tparams.newValue = newValue;\n\t\t\t\t}\n\t\t\t\tif (form.data('jqv').InvalidFields.length === 0) {\n\t\t\t\t\tform.find('[name=\"saveButton\"]').attr('disabled', 'disabled');\n\t\t\t\t}\n\t\t\t\tconst progress = $.progressIndicator({ position: 'html', blockInfo: { enabled: true } });\n\t\t\t\tAppConnector.request(params)\n\t\t\t\t\t.done(data => {\n\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tif (typeof data.result !== 'undefined' && data.result === true) {\n\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\t\t\ttitle: app.vtranslate('JS_MESSAGE'),\n\t\t\t\t\t\t\t\ttext: app.vtranslate('JS_ITEM_SAVED_SUCCESSFULLY'),\n\t\t\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tform.find('[name=\"saveButton\"]').attr('disabled', false);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function(data, err) {\n\t\t\t\t\t\tapp.errorLog(data, err);\n\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t});\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t * Register process status item event\n\t */\n\tregisterProcessStatusItemEvent() {\n\t\t$('#processStatusItem').on('click', e => {\n\t\t\tconst selectedListItems = this.getSelectedItems();\n\t\t\tif (selectedListItems.length === 0) {\n\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\ttitle: app.vtranslate('JS_MESSAGE'),\n\t\t\t\t\ttext: app.vtranslate('JS_NO_ITEM_SELECTED'),\n\t\t\t\t\ttype: 'error'\n\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t} else if (selectedListItems.length > 1) {\n\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\ttitle: app.vtranslate('JS_MESSAGE'),\n\t\t\t\t\ttext: app.vtranslate('JS_MORE_THAN_ONE_ITEM_SELECTED'),\n\t\t\t\t\ttype: 'error'\n\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t} else {\n\t\t\t\tAppConnector.request({\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\tsource_module: $('#pickListModules').val(),\n\t\t\t\t\tview: 'IndexAjax',\n\t\t\t\t\tmode: 'showProcessStatusView',\n\t\t\t\t\tpickListFieldId: $('#modulePickList').val(),\n\t\t\t\t\tfieldValueId: selectedListItems[0].keyId\n\t\t\t\t}).done(data => {\n\t\t\t\t\tapp.showModalWindow(data);\n\t\t\t\t\tlet form = $('#processStatusItemForm');\n\t\t\t\t\tthis.registerScrollForNonEditablePicklistValues(form);\n\t\t\t\t\tform.validationEngine();\n\t\t\t\t\tSettings_Picklist_Js.registerProcessStatusItemSaveEvent(form);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t},\n\n\tregisterAddItemSaveEvent: function(container) {\n\t\tcontainer.find('[name=\"addItemForm\"]').on('submit', function(e) {\n\t\t\tvar form = jQuery(e.currentTarget);\n\t\t\tvar validationResult = form.validationEngine('validate');\n\t\t\tif (validationResult == true) {\n\t\t\t\tvar invalidFields = form.data('jqv').InvalidFields;\n\t\t\t\tif (invalidFields.length == 0) {\n\t\t\t\t\tform.find('[name=\"saveButton\"]').attr('disabled', 'disabled');\n\t\t\t\t}\n\n\t\t\t\tvar params = jQuery(e.currentTarget).serializeFormData();\n\t\t\t\tvar newValue = params.newValue;\n\t\t\t\tparams.newValue = jQuery.trim(newValue);\n\t\t\t\tAppConnector.request(params).done(function(data) {\n\t\t\t\t\tdata = data.result;\n\t\t\t\t\tif (data) {\n\t\t\t\t\t\tvar newValue = jQuery.trim(jQuery('[name=\"newValue\"]', container).val());\n\t\t\t\t\t\tvar dragImagePath = jQuery('#dragImagePath').val();\n\t\t\t\t\t\tvar newElement =\n\t\t\t\t\t\t\t'<tr class=\"pickListValue u-cursor-pointer\"><td class=\"u-text-ellipsis\"><img class=\"alignMiddle\" src=\"' +\n\t\t\t\t\t\t\tdragImagePath +\n\t\t\t\t\t\t\t'\" />&nbsp;&nbsp;' +\n\t\t\t\t\t\t\tnewValue +\n\t\t\t\t\t\t\t'</td></tr>';\n\t\t\t\t\t\tvar newPickListValueRow = jQuery(newElement).appendTo(jQuery('#pickListValuesTable').find('tbody'));\n\t\t\t\t\t\tnewPickListValueRow.attr('data-key', newValue);\n\t\t\t\t\t\tnewPickListValueRow.attr('data-key-id', data['id']);\n\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\tvar params = {\n\t\t\t\t\t\t\ttitle: app.vtranslate('JS_MESSAGE'),\n\t\t\t\t\t\t\ttext: app.vtranslate('JS_ITEM_ADDED_SUCCESSFULLY'),\n\t\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t\t};\n\t\t\t\t\t\tVtiger_Helper_Js.showPnotify(params);\n\t\t\t\t\t\t//update the new item in the hidden picklist values array\n\t\t\t\t\t\tvar pickListValuesEle = jQuery('[name=\"pickListValues\"]');\n\t\t\t\t\t\tvar pickListValuesArray = JSON.parse(pickListValuesEle.val());\n\t\t\t\t\t\tpickListValuesArray[data['id']] = newValue;\n\t\t\t\t\t\tpickListValuesEle.val(JSON.stringify(pickListValuesArray));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tform.find('[name=\"saveButton\"]').attr('disabled', false);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\te.preventDefault();\n\t\t});\n\t},\n\t/**\n\t * Remene item\n\t */\n\tregisterRenameItemSaveEvent() {\n\t\t$('#renameItemForm').on('submit', e => {\n\t\t\te.preventDefault();\n\t\t\tlet form = $(e.currentTarget);\n\t\t\tif (form.validationEngine('validate')) {\n\t\t\t\tlet newValue,\n\t\t\t\t\toldValue = form.find('[name=\"oldValue\"]').val(),\n\t\t\t\t\tid = form.find('[name=\"primaryKeyId\"]').val(),\n\t\t\t\t\tparams = $(e.currentTarget).serializeFormData();\n\t\t\t\tif (form.find('[name=\"newValue\"]').length > 0) {\n\t\t\t\t\tnewValue = $.trim(form.find('[name=\"newValue\"]').val());\n\t\t\t\t\tparams.newValue = newValue;\n\t\t\t\t}\n\t\t\t\tif (form.data('jqv').InvalidFields.length === 0) {\n\t\t\t\t\tform.find('[name=\"saveButton\"]').attr('disabled', 'disabled');\n\t\t\t\t}\n\t\t\t\tconst progress = $.progressIndicator({ position: 'html', blockInfo: { enabled: true } });\n\t\t\t\tAppConnector.request(params)\n\t\t\t\t\t.done(data => {\n\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tif (typeof data.result !== 'undefined') {\n\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\t\t\ttitle: app.vtranslate('JS_MESSAGE'),\n\t\t\t\t\t\t\t\ttext: app.vtranslate('JS_ITEM_RENAMED_SUCCESSFULLY'),\n\t\t\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif (newValue !== '') {\n\t\t\t\t\t\t\t\tlet encodedOldValue = oldValue.replace(/\"/g, '\\\\\"'),\n\t\t\t\t\t\t\t\t\tdragImagePath = $('#dragImagePath').val(),\n\t\t\t\t\t\t\t\t\trenamedElement =\n\t\t\t\t\t\t\t\t\t\t'<tr class=\"pickListValue u-cursor-pointer\">' +\n\t\t\t\t\t\t\t\t\t\t'<td class=\"u-text-ellipsis\"><img class=\"alignMiddle\" src=\"' +\n\t\t\t\t\t\t\t\t\t\tdragImagePath +\n\t\t\t\t\t\t\t\t\t\t'\" />&nbsp;&nbsp;' +\n\t\t\t\t\t\t\t\t\t\tdata.result.newValue +\n\t\t\t\t\t\t\t\t\t\t'</td></tr>';\n\t\t\t\t\t\t\t\t$('[data-key=\"' + encodedOldValue + '\"]').replaceWith(\n\t\t\t\t\t\t\t\t\t$(renamedElement)\n\t\t\t\t\t\t\t\t\t\t.attr('data-key', newValue)\n\t\t\t\t\t\t\t\t\t\t.attr('data-key-id', id)\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t//update the new item in the hidden picklist values array\n\t\t\t\t\t\t\t\tlet pickListValuesEle = $('[name=\"pickListValues\"]'),\n\t\t\t\t\t\t\t\t\tpickListValuesArray = JSON.parse(pickListValuesEle.val());\n\t\t\t\t\t\t\t\tpickListValuesArray[id] = newValue;\n\t\t\t\t\t\t\t\tpickListValuesEle.val(JSON.stringify(pickListValuesArray));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tform.find('[name=\"saveButton\"]').attr('disabled', false);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function(data, err) {\n\t\t\t\t\t\tapp.errorLog(data, err);\n\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t});\n\t\t\t}\n\t\t});\n\t},\n\n\tshowDeleteItemForm: function(params) {\n\t\tvar thisInstance = this;\n\t\tAppConnector.request(params).done(function(data) {\n\t\t\tapp.showModalWindow(data, function(data) {\n\t\t\t\tif (typeof callBackFunction == 'function') {\n\t\t\t\t\tcallBackFunction(data);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\tvar callBackFunction = function(data) {\n\t\t\tvar form = data.find('#deleteItemForm');\n\t\t\tthisInstance.registerScrollForNonEditablePicklistValues(form);\n\t\t\tvar maximumSelectionSize = jQuery('#pickListValuesCount').val() - 1;\n\t\t\tApp.Fields.Picklist.changeSelectElementView(jQuery('[name=\"delete_value[]\"]'), 'select2', {\n\t\t\t\tmaximumSelectionLength: maximumSelectionSize,\n\t\t\t\tdropdownCss: { 'z-index': 100001 }\n\t\t\t});\n\t\t\tSettings_Picklist_Js.registerDeleteOptionEvent();\n\n\t\t\tvar validationParams = app.getvalidationEngineOptions(true);\n\t\t\tvalidationParams.onValidationComplete = function(form, valid) {\n\t\t\t\tif (valid) {\n\t\t\t\t\tvar selectElement = jQuery('[name=\"delete_value[]\"]');\n\t\t\t\t\tvar select2Element = app.getSelect2ElementFromSelect(selectElement);\n\t\t\t\t\tvar result = Vtiger_MultiSelect_Validator_Js.invokeValidation(selectElement);\n\t\t\t\t\tif (result !== true) {\n\t\t\t\t\t\tselect2Element.validationEngine('showPrompt', result, 'error', 'topLeft', true);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tselect2Element.validationEngine('hide');\n\t\t\t\t\t\tform.find('[name=\"saveButton\"]').attr('disabled', 'disabled');\n\t\t\t\t\t}\n\t\t\t\t\tvar deleteValues = jQuery('[name=\"delete_value[]\"]').val();\n\t\t\t\t\tAppConnector.request(form.serializeFormData()).done(function(data) {\n\t\t\t\t\t\tif (typeof data.result !== 'undefined') {\n\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\t//delete the item in the hidden picklist values array\n\t\t\t\t\t\t\tvar pickListValuesEle = jQuery('[name=\"pickListValues\"]');\n\t\t\t\t\t\t\tvar pickListValuesArray = JSON.parse(pickListValuesEle.val());\n\t\t\t\t\t\t\tjQuery.each(deleteValues, function(i, e) {\n\t\t\t\t\t\t\t\tvar encodedOldValue = e.replace(/\"/g, '\\\\\"');\n\t\t\t\t\t\t\t\tjQuery('[data-key-id=\"' + encodedOldValue + '\"]').remove();\n\t\t\t\t\t\t\t\tdelete pickListValuesArray[e];\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tpickListValuesEle.val(JSON.stringify(pickListValuesArray));\n\t\t\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\t\t\ttitle: app.vtranslate('JS_MESSAGE'),\n\t\t\t\t\t\t\t\ttext: app.vtranslate('JS_ITEMS_DELETED_SUCCESSFULLY'),\n\t\t\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t};\n\t\t\tform.validationEngine(validationParams);\n\t\t};\n\t},\n\n\tregisterSelectPickListValueEvent: function() {\n\t\tjQuery('#pickListValuesTable').on('click', '.pickListValue', function(event) {\n\t\t\tvar currentRow = jQuery(event.currentTarget);\n\t\t\tvar currentRowTd = currentRow.find('td');\n\t\t\tevent.preventDefault();\n\n\t\t\tif (event.ctrlKey) {\n\t\t\t\tcurrentRowTd.toggleClass('selectedListItem');\n\t\t\t} else {\n\t\t\t\tjQuery('.pickListValue')\n\t\t\t\t\t.find('td')\n\t\t\t\t\t.not(currentRowTd)\n\t\t\t\t\t.removeClass('selectedListItem');\n\t\t\t\tcurrentRowTd.toggleClass('selectedListItem');\n\t\t\t}\n\t\t});\n\t},\n\n\tregisterPickListValuesSortableEvent: function() {\n\t\tvar tbody = jQuery('tbody', jQuery('#pickListValuesTable'));\n\t\ttbody.sortable({\n\t\t\thelper: function(e, ui) {\n\t\t\t\t//while dragging helper elements td element will take width as contents width\n\t\t\t\t//so we are explicity saying that it has to be same width so that element will not\n\t\t\t\t//look like distrubed\n\t\t\t\tui.children().each(function(index, element) {\n\t\t\t\t\telement = jQuery(element);\n\t\t\t\t\telement.width(element.width());\n\t\t\t\t});\n\t\t\t\treturn ui;\n\t\t\t},\n\t\t\tcontainment: tbody,\n\t\t\trevert: true,\n\t\t\tupdate: function(e, ui) {\n\t\t\t\tjQuery('#saveSequence').removeAttr('disabled');\n\t\t\t}\n\t\t});\n\t},\n\n\tregisterSaveSequenceClickEvent: function() {\n\t\tjQuery('#saveSequence').on('click', function(e) {\n\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true,\n\t\t\t\t\telementToBlock: jQuery('.tab-content')\n\t\t\t\t}\n\t\t\t});\n\t\t\tvar pickListValuesSequenceArray = {};\n\t\t\tvar pickListValues = jQuery('#pickListValuesTable').find('.pickListValue');\n\t\t\tjQuery.each(pickListValues, function(i, element) {\n\t\t\t\tpickListValuesSequenceArray[jQuery(element).data('key-id')] = ++i;\n\t\t\t});\n\t\t\tvar params = {\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\taction: 'SaveAjax',\n\t\t\t\tmode: 'saveOrder',\n\t\t\t\tpicklistValues: pickListValuesSequenceArray,\n\t\t\t\tpicklistName: jQuery('[name=\"picklistName\"]').val()\n\t\t\t};\n\t\t\tAppConnector.request(params).done(function(data) {\n\t\t\t\tif (typeof data.result !== 'undefined') {\n\t\t\t\t\tjQuery('#saveSequence').attr('disabled', 'disabled');\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({\n\t\t\t\t\t\ttext: app.vtranslate('JS_SEQUENCE_UPDATED_SUCCESSFULLY'),\n\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\n\tregisterAssingValueToRoleTabClickEvent: function() {\n\t\tjQuery('#assignedToRoleTab').on('click', function(e) {\n\t\t\tjQuery('#rolesList').trigger('change');\n\t\t});\n\t},\n\n\tregisterItemActions: function() {\n\t\tSettings_Picklist_Js.registerAddItemEvent();\n\t\tSettings_Picklist_Js.registerRenameItemEvent();\n\t\tSettings_Picklist_Js.registerDeleteItemEvent();\n\t\tSettings_Picklist_Js.registerSelectPickListValueEvent();\n\t\tSettings_Picklist_Js.registerAssingValueToRuleEvent();\n\t\tSettings_Picklist_Js.registerChangeRoleEvent();\n\t\tSettings_Picklist_Js.registerAssingValueToRoleTabClickEvent();\n\t\tSettings_Picklist_Js.registerPickListValuesSortableEvent();\n\t\tSettings_Picklist_Js.registerSaveSequenceClickEvent();\n\t\tSettings_Picklist_Js.registerProcessStatusItemEvent();\n\t},\n\n\tregisterEvents: function() {\n\t\tSettings_Picklist_Js.registerModuleChangeEvent();\n\t\tSettings_Picklist_Js.registerModulePickListChangeEvent();\n\t\tSettings_Picklist_Js.registerItemActions();\n\t\tSettings_Picklist_Js.registerEnablePickListValueClickEvent();\n\t}\n};\n\njQuery(document).ready(function() {\n\tSettings_Picklist_Js.registerEvents();\n});\n\nVtiger_Base_Validator_Js(\n\t'Vtiger_FieldLabel_Validator_Js',\n\t{\n\t\t/**\n\t\t *Function which invokes field validation\n\t\t *@param accepts field element as parameter\n\t\t * @return error if validation fails true on success\n\t\t */\n\t\tinvokeValidation: function(field, rules, i, options) {\n\t\t\tvar instance = new Vtiger_FieldLabel_Validator_Js();\n\t\t\tinstance.setElement(field);\n\t\t\tvar response = instance.validate();\n\t\t\tif (response != true) {\n\t\t\t\treturn instance.getError();\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t/**\n\t\t * Function to validate the field label\n\t\t * @return true if validation is successfull\n\t\t * @return false if validation error occurs\n\t\t */\n\t\tvalidate: function() {\n\t\t\tvar fieldValue = this.getFieldValue();\n\t\t\treturn this.validateValue(fieldValue);\n\t\t},\n\n\t\tvalidateValue: function(fieldValue) {\n\t\t\tlet specialChars = /[\\<\\>\\\"\\,\\#]/;\n\t\t\tif (specialChars.test(fieldValue)) {\n\t\t\t\tthis.setError(app.vtranslate('JS_SPECIAL_CHARACTERS') + ' < > \" , # ' + app.vtranslate('JS_NOT_ALLOWED'));\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t}\n);\n"],"names":["Settings_Picklist_Js","on","e","selectedModule","jQuery","currentTarget","val","length","showMessage","app","vtranslate","params","getModuleName","getParentModuleName","progressIndicatorElement","progressIndicator","request","done","data","html","mode","Fields","Picklist","changeSelectElementView","registerModulePickListChangeEvent","trigger","showSelect2ElementView","registerItemActions","clonedCreateView","find","clone","removeClass","addClass","callBackFunction","validationEngine","registerAddItemSaveEvent","regiserSelectRolesEvent","showModalWindow","pickListValuesTable","selectedListItem","selectedValues","each","i","element","push","closest","registerAssignValueToRoleSaveEvent","select2","form","assignValuesSelectElement","assignValuesSelect2Element","getSelect2ElementFromSelect","assignValueResult","Vtiger_MultiSelect_Validator_Js","invokeValidation","rolesSelectElement","select2Element","result","attr","serializeFormData","hideModalWindow","preventDefault","removeAttr","pickListVaue","hasClass","remove","prepend","pickListValues","disabledValues","enabledValues","currentValue","selectedValue","inArray","not","append","selectedListItems","_this","getSelectedItems","showPnotify","$","keyId","registerScrollForNonEditablePicklistValues","registerRenameItemSaveEvent","container","slimScroll","selectedListItemsArray","index","_this2","showDeleteItemForm","JSON","stringify","map","item","key","replaceValueElement","id","text","rolesList","registerenableOrDisableListSaveEvent","newValue","trim","InvalidFields","progress","position","blockInfo","enabled","fail","err","errorLog","_this3","registerProcessStatusItemSaveEvent","dragImagePath","newPickListValueRow","appendTo","pickListValuesEle","pickListValuesArray","parse","oldValue","encodedOldValue","replace","renamedElement","replaceWith","thisInstance","this","maximumSelectionSize","z-index","registerDeleteOptionEvent","validationParams","getvalidationEngineOptions","onValidationComplete","valid","selectElement","deleteValues","event","currentRowTd","ctrlKey","toggleClass","tbody","sortable","ui","children","width","pickListValuesSequenceArray","registerAddItemEvent","registerRenameItemEvent","registerDeleteItemEvent","registerSelectPickListValueEvent","registerAssingValueToRuleEvent","registerChangeRoleEvent","registerAssingValueToRoleTabClickEvent","registerPickListValuesSortableEvent","registerSaveSequenceClickEvent","registerProcessStatusItemEvent","registerModuleChangeEvent","registerEnablePickListValueClickEvent","document","ready","registerEvents","Vtiger_Base_Validator_Js","field","rules","options","instance","Vtiger_FieldLabel_Validator_Js","setElement","validate","getError","fieldValue","getFieldValue","validateValue","test","setError"],"mappings":"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"}