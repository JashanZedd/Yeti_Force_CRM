{"version":3,"file":"Picklist.min.js","sources":["Picklist.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n *************************************************************************************/\n'use strict';\n\nvar Settings_Picklist_Js = {\n\tregisterModuleChangeEvent: function() {\n\t\tjQuery('#pickListModules').on('change', function(e) {\n\t\t\tvar selectedModule = jQuery(e.currentTarget).val();\n\t\t\tif (selectedModule.length <= 0) {\n\t\t\t\tSettings_Vtiger_Index_Js.showMessage({\n\t\t\t\t\ttype: 'error',\n\t\t\t\t\ttext: app.vtranslate('JS_PLEASE_SELECT_MODULE')\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar params = {\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\tsource_module: selectedModule,\n\t\t\t\tview: 'IndexAjax',\n\t\t\t\tmode: 'getPickListDetailsForModule'\n\t\t\t};\n\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tAppConnector.request(params).done(function(data) {\n\t\t\t\tjQuery('#modulePickListContainer').html(data);\n\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\tApp.Fields.Picklist.changeSelectElementView(jQuery('#modulePickListContainer'));\n\t\t\t\tSettings_Picklist_Js.registerModulePickListChangeEvent();\n\t\t\t\tjQuery('#modulePickList').trigger('change');\n\t\t\t});\n\t\t});\n\t},\n\n\tregisterModulePickListChangeEvent: function() {\n\t\tjQuery('#modulePickList').on('change', function(e) {\n\t\t\tvar params = {\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\tsource_module: jQuery('#pickListModules').val(),\n\t\t\t\tview: 'IndexAjax',\n\t\t\t\tmode: 'getPickListValueForField',\n\t\t\t\tpickListFieldId: jQuery(e.currentTarget).val()\n\t\t\t};\n\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tAppConnector.request(params).done(function(data) {\n\t\t\t\tjQuery('#modulePickListValuesContainer').html(data);\n\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(jQuery('#rolesList'));\n\t\t\t\tSettings_Picklist_Js.registerItemActions();\n\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t});\n\t\t});\n\t},\n\n\tregisterAddItemEvent: function() {\n\t\tjQuery('#addItem').on('click', function(e) {\n\t\t\tvar data = jQuery('#createViewContents').find('.modal');\n\t\t\tvar clonedCreateView = data\n\t\t\t\t.clone(true, true)\n\t\t\t\t.removeClass('basicCreateView')\n\t\t\t\t.addClass('createView');\n\t\t\tclonedCreateView.find('.rolesList').addClass('select2');\n\t\t\tclonedCreateView.find('.automation-list').addClass('select2');\n\t\t\tvar callBackFunction = function(data) {\n\t\t\t\tjQuery('[name=\"addItemForm\"]', data).validationEngine();\n\t\t\t\tSettings_Picklist_Js.registerAddItemSaveEvent(data);\n\t\t\t\tSettings_Picklist_Js.regiserSelectRolesEvent(data);\n\t\t\t};\n\t\t\tapp.showModalWindow(clonedCreateView, function(data) {\n\t\t\t\tif (typeof callBackFunction == 'function') {\n\t\t\t\t\tcallBackFunction(data);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\n\tregisterAssingValueToRuleEvent: function() {\n\t\tjQuery('#assignValue').on('click', function() {\n\t\t\tvar pickListValuesTable = jQuery('#pickListValuesTable');\n\t\t\tvar selectedListItem = jQuery('.selectedListItem', pickListValuesTable);\n\t\t\tif (selectedListItem.length > 0) {\n\t\t\t\tvar selectedValues = [];\n\t\t\t\tjQuery.each(selectedListItem, function(i, element) {\n\t\t\t\t\tselectedValues.push(\n\t\t\t\t\t\tjQuery(element)\n\t\t\t\t\t\t\t.closest('tr')\n\t\t\t\t\t\t\t.data('key')\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tvar params = {\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\tsource_module: jQuery('#pickListModules').val(),\n\t\t\t\tview: 'IndexAjax',\n\t\t\t\tmode: 'showAssignValueToRoleView',\n\t\t\t\tpickListFieldId: jQuery('#modulePickList').val()\n\t\t\t};\n\t\t\tAppConnector.request(params).done(function(data) {\n\t\t\t\tapp.showModalWindow(data);\n\t\t\t\tjQuery('[name=\"addItemForm\"]', jQuery(data)).validationEngine();\n\t\t\t\tSettings_Picklist_Js.registerAssignValueToRoleSaveEvent(jQuery(data));\n\t\t\t\tif (selectedListItem.length > 0) {\n\t\t\t\t\tjQuery('[name=\"assign_values[]\"]', jQuery('#assignValueToRoleForm')).select2('val', selectedValues);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\n\tregisterAssignValueToRoleSaveEvent: function(data) {\n\t\tjQuery('#assignValueToRoleForm').on('submit', function(e) {\n\t\t\tvar form = jQuery(e.currentTarget);\n\n\t\t\tvar assignValuesSelectElement = jQuery('[name=\"assign_values[]\"]', form);\n\t\t\tvar assignValuesSelect2Element = app.getSelect2ElementFromSelect(assignValuesSelectElement);\n\t\t\tvar assignValueResult = Vtiger_MultiSelect_Validator_Js.invokeValidation(assignValuesSelectElement);\n\t\t\tif (assignValueResult != true) {\n\t\t\t\tassignValuesSelect2Element.validationEngine('showPrompt', assignValueResult, 'error', 'topLeft', true);\n\t\t\t} else {\n\t\t\t\tassignValuesSelect2Element.validationEngine('hide');\n\t\t\t}\n\n\t\t\tvar rolesSelectElement = jQuery('[name=\"rolesSelected[]\"]', form);\n\t\t\tvar select2Element = app.getSelect2ElementFromSelect(rolesSelectElement);\n\t\t\tvar result = Vtiger_MultiSelect_Validator_Js.invokeValidation(rolesSelectElement);\n\t\t\tif (result != true) {\n\t\t\t\tselect2Element.validationEngine('showPrompt', result, 'error', 'bottomLeft', true);\n\t\t\t} else {\n\t\t\t\tselect2Element.validationEngine('hide');\n\t\t\t}\n\n\t\t\tif (assignValueResult != true || result != true) {\n\t\t\t\te.preventDefault();\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\tform.find('[name=\"saveButton\"]').attr('disabled', 'disabled');\n\t\t\t}\n\t\t\tvar params = jQuery(e.currentTarget).serializeFormData();\n\t\t\tAppConnector.request(params).done(function(data) {\n\t\t\t\tif (typeof data.result !== 'undefined') {\n\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({\n\t\t\t\t\t\ttext: app.vtranslate('JS_VALUE_ASSIGNED_SUCCESSFULLY'),\n\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t\te.preventDefault();\n\t\t});\n\t},\n\n\tregisterEnablePickListValueClickEvent: function() {\n\t\tjQuery('#listViewContents').on('click', '.assignToRolePickListValue', function(e) {\n\t\t\tjQuery('#saveOrder').removeAttr('disabled');\n\n\t\t\tvar pickListVaue = jQuery(e.currentTarget);\n\t\t\tif (pickListVaue.hasClass('selectedCell')) {\n\t\t\t\tpickListVaue.removeClass('selectedCell').addClass('unselectedCell');\n\t\t\t\tpickListVaue.find('.fas').remove();\n\t\t\t} else {\n\t\t\t\tpickListVaue.removeClass('unselectedCell').addClass('selectedCell');\n\t\t\t\tpickListVaue.prepend('<i class=\"fas fa-check float-left\"></span>');\n\t\t\t}\n\t\t});\n\t},\n\n\tregisterenableOrDisableListSaveEvent: function() {\n\t\tjQuery('#saveOrder').on('click', function(e) {\n\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true,\n\t\t\t\t\telementToBlock: jQuery('.tab-content')\n\t\t\t\t}\n\t\t\t});\n\t\t\tvar pickListValues = jQuery('.assignToRolePickListValue');\n\t\t\tvar disabledValues = [];\n\t\t\tvar enabledValues = [];\n\t\t\tjQuery.each(pickListValues, function(i, element) {\n\t\t\t\tvar currentValue = jQuery(element);\n\t\t\t\tif (currentValue.hasClass('selectedCell')) {\n\t\t\t\t\tenabledValues.push(currentValue.data('id'));\n\t\t\t\t} else {\n\t\t\t\t\tdisabledValues.push(currentValue.data('id'));\n\t\t\t\t}\n\t\t\t});\n\t\t\tvar params = {\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\taction: 'SaveAjax',\n\t\t\t\tmode: 'enableOrDisable',\n\t\t\t\tenabled_values: enabledValues,\n\t\t\t\tdisabled_values: disabledValues,\n\t\t\t\tpicklistName: jQuery('[name=\"picklistName\"]').val(),\n\t\t\t\trolesSelected: jQuery('#rolesList').val()\n\t\t\t};\n\t\t\tAppConnector.request(params).done(function(data) {\n\t\t\t\tif (typeof data.result !== 'undefined') {\n\t\t\t\t\tjQuery(e.currentTarget).attr('disabled', 'disabled');\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({\n\t\t\t\t\t\ttext: app.vtranslate('JS_LIST_UPDATED_SUCCESSFULLY'),\n\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\n\tregiserSelectRolesEvent: function(data) {\n\t\tdata.find('[name=\"rolesSelected[]\"]').on('change', function(e) {\n\t\t\tvar rolesSelectElement = jQuery(e.currentTarget);\n\t\t\tvar selectedValue = rolesSelectElement.val();\n\t\t\tif (jQuery.inArray('all', selectedValue) != -1) {\n\t\t\t\trolesSelectElement.select2('val', '');\n\t\t\t\trolesSelectElement.select2('val', 'all');\n\t\t\t\trolesSelectElement.select2('close');\n\t\t\t\trolesSelectElement\n\t\t\t\t\t.find('option')\n\t\t\t\t\t.not(':first')\n\t\t\t\t\t.attr('disabled', 'disabled');\n\t\t\t\tdata\n\t\t\t\t\t.find(jQuery('.modal-body'))\n\t\t\t\t\t.append(\n\t\t\t\t\t\t'<div class=\"alert alert-info textAlignCenter\">' + app.vtranslate('JS_ALL_ROLES_SELECTED') + '</div>'\n\t\t\t\t\t);\n\t\t\t} else {\n\t\t\t\trolesSelectElement.find('option').removeAttr('disabled', 'disabled');\n\t\t\t\tdata\n\t\t\t\t\t.find('.modal-body')\n\t\t\t\t\t.find('.alert')\n\t\t\t\t\t.remove();\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t * Register rename item event\n\t */\n\tregisterRenameItemEvent: function() {\n\t\t$('#renameItem').on('click', e => {\n\t\t\tconst selectedListItems = this.getSelectedItems();\n\t\t\tif (selectedListItems.length < 1) {\n\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\ttitle: app.vtranslate('JS_MESSAGE'),\n\t\t\t\t\ttext: app.vtranslate('JS_NO_ITEM_SELECTED'),\n\t\t\t\t\ttype: 'error'\n\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t} else if (selectedListItems.length > 1) {\n\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\ttitle: app.vtranslate('JS_MESSAGE'),\n\t\t\t\t\ttext: app.vtranslate('JS_MORE_THAN_ONE_ITEM_SELECTED'),\n\t\t\t\t\ttype: 'error'\n\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t} else {\n\t\t\t\tAppConnector.request({\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\tsource_module: $('#pickListModules').val(),\n\t\t\t\t\tview: 'IndexAjax',\n\t\t\t\t\tmode: 'showEditView',\n\t\t\t\t\tpickListFieldId: $('#modulePickList').val(),\n\t\t\t\t\tfieldValueId: selectedListItems[0].keyId\n\t\t\t\t}).done(data => {\n\t\t\t\t\tapp.showModalWindow(data);\n\t\t\t\t\tconst form = $('#renameItemForm');\n\t\t\t\t\tthis.registerScrollForNonEditablePicklistValues(form);\n\t\t\t\t\tform.validationEngine();\n\t\t\t\t\tSettings_Picklist_Js.registerRenameItemSaveEvent();\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t * Function to register the scroll bar for NonEditable Picklist Values\n\t */\n\tregisterScrollForNonEditablePicklistValues: function(container) {\n\t\tjQuery(container)\n\t\t\t.find('.nonEditablePicklistValues')\n\t\t\t.slimScroll({\n\t\t\t\theight: '70px',\n\t\t\t\tsize: '6px'\n\t\t\t});\n\t},\n\n\t/**\n\t * Get selected list items\n\t *\n\t * @return  {array}\n\t */\n\tgetSelectedItems() {\n\t\tconst pickListValuesTable = $('#pickListValuesTable');\n\t\tconst selectedListItem = $('.selectedListItem', pickListValuesTable);\n\t\tconst selectedListItemsArray = [];\n\t\t$.each(selectedListItem, function(index, element) {\n\t\t\tselectedListItemsArray.push({\n\t\t\t\tkey: $(element)\n\t\t\t\t\t.closest('tr')\n\t\t\t\t\t.data('key'),\n\t\t\t\tkeyId: $(element)\n\t\t\t\t\t.closest('tr')\n\t\t\t\t\t.data('key-id')\n\t\t\t});\n\t\t});\n\t\treturn selectedListItemsArray;\n\t},\n\n\t/**\n\t * Register delete item event\n\t */\n\tregisterDeleteItemEvent() {\n\t\t$('#deleteItem').on('click', e => {\n\t\t\tconst selectedListItems = this.getSelectedItems();\n\t\t\tconst pickListValues = $('.pickListValue', pickListValuesTable);\n\t\t\tif (pickListValues.length === selectedListItems.length) {\n\t\t\t\tSettings_Vtiger_Index_Js.showMessage({\n\t\t\t\t\ttext: app.vtranslate('JS_YOU_CANNOT_DELETE_ALL_THE_VALUES'),\n\t\t\t\t\ttype: 'error'\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.showDeleteItemForm({\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\tsource_module: jQuery('#pickListModules').val(),\n\t\t\t\tview: 'IndexAjax',\n\t\t\t\tmode: 'showDeleteView',\n\t\t\t\tpickListFieldId: $('#modulePickList').val(),\n\t\t\t\tfieldValue: JSON.stringify(selectedListItems.map(item => item.key))\n\t\t\t});\n\t\t});\n\t},\n\n\tregisterDeleteOptionEvent: function() {\n\t\tlet replaceValueElement = jQuery('#replaceValue');\n\t\tjQuery('[name=\"delete_value[]\"]').on('select2:unselect', function(e) {\n\t\t\tlet id = e.params.data.id;\n\t\t\tlet text = e.params.data.text;\n\t\t\treplaceValueElement.append('<option value=\"' + id + '\">' + text + '</option>').trigger('change');\n\t\t});\n\t\tjQuery('[name=\"delete_value[]\"]').on('select2:select', function(e) {\n\t\t\tlet id = e.params.data.id;\n\t\t\tjQuery('#replaceValue option[value=\"' + id + '\"]').remove();\n\t\t\treplaceValueElement.trigger('change');\n\t\t});\n\t},\n\n\tregisterChangeRoleEvent: function() {\n\t\tjQuery('#rolesList').on('change', function(e) {\n\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true,\n\t\t\t\t\telementToBlock: jQuery('.tab-content')\n\t\t\t\t}\n\t\t\t});\n\t\t\tvar rolesList = jQuery(e.currentTarget);\n\t\t\tvar params = {\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\tview: 'IndexAjax',\n\t\t\t\tmode: 'getPickListValueByRole',\n\t\t\t\trolesSelected: rolesList.val(),\n\t\t\t\tpickListFieldId: jQuery('#modulePickList').val(),\n\t\t\t\tsourceModule: jQuery('input[name=\"source_module\"]').val()\n\t\t\t};\n\t\t\tAppConnector.request(params).done(function(data) {\n\t\t\t\tjQuery('#pickListValeByRoleContainer').html(data);\n\t\t\t\tSettings_Picklist_Js.registerenableOrDisableListSaveEvent();\n\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t});\n\t\t});\n\t},\n\n\t/**\n\t * Register process status item save evet\n\t *\n\t * @param   {jQuery}  form\n\t */\n\tregisterProcessStatusItemSaveEvent(form) {\n\t\tform.on('submit', e => {\n\t\t\te.preventDefault();\n\t\t\tlet form = $(e.currentTarget);\n\t\t\tif (form.validationEngine('validate')) {\n\t\t\t\tlet newValue,\n\t\t\t\t\tparams = form.serializeFormData();\n\t\t\t\tif (form.find('[name=\"newValue\"]').length > 0) {\n\t\t\t\t\tnewValue = $.trim(form.find('[name=\"newValue\"]').val());\n\t\t\t\t\tparams.newValue = newValue;\n\t\t\t\t}\n\t\t\t\tif (form.data('jqv').InvalidFields.length === 0) {\n\t\t\t\t\tform.find('[name=\"saveButton\"]').attr('disabled', 'disabled');\n\t\t\t\t}\n\t\t\t\tconst progress = $.progressIndicator({ position: 'html', blockInfo: { enabled: true } });\n\t\t\t\tAppConnector.request(params)\n\t\t\t\t\t.done(data => {\n\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tif (typeof data.result !== 'undefined' && data.result === true) {\n\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\t\t\ttitle: app.vtranslate('JS_MESSAGE'),\n\t\t\t\t\t\t\t\ttext: app.vtranslate('JS_ITEM_SAVED_SUCCESSFULLY'),\n\t\t\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tform.find('[name=\"saveButton\"]').attr('disabled', false);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function(data, err) {\n\t\t\t\t\t\tapp.errorLog(data, err);\n\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t});\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t * Register process status item event\n\t */\n\tregisterProcessStatusItemEvent() {\n\t\t$('#processStatusItem').on('click', e => {\n\t\t\tconst selectedListItems = this.getSelectedItems();\n\t\t\tif (selectedListItems.length === 0) {\n\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\ttitle: app.vtranslate('JS_MESSAGE'),\n\t\t\t\t\ttext: app.vtranslate('JS_NO_ITEM_SELECTED'),\n\t\t\t\t\ttype: 'error'\n\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t} else if (selectedListItems.length > 1) {\n\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\ttitle: app.vtranslate('JS_MESSAGE'),\n\t\t\t\t\ttext: app.vtranslate('JS_MORE_THAN_ONE_ITEM_SELECTED'),\n\t\t\t\t\ttype: 'error'\n\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t} else {\n\t\t\t\tAppConnector.request({\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\tsource_module: $('#pickListModules').val(),\n\t\t\t\t\tview: 'IndexAjax',\n\t\t\t\t\tmode: 'showProcessStatusView',\n\t\t\t\t\tpickListFieldId: $('#modulePickList').val(),\n\t\t\t\t\tfieldValueId: selectedListItems[0].keyId\n\t\t\t\t}).done(data => {\n\t\t\t\t\tapp.showModalWindow(data);\n\t\t\t\t\tlet form = $('#processStatusItemForm');\n\t\t\t\t\tthis.registerScrollForNonEditablePicklistValues(form);\n\t\t\t\t\tform.validationEngine();\n\t\t\t\t\tSettings_Picklist_Js.registerProcessStatusItemSaveEvent(form);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t},\n\n\tregisterAddItemSaveEvent: function(container) {\n\t\tcontainer.find('[name=\"addItemForm\"]').on('submit', function(e) {\n\t\t\tvar form = jQuery(e.currentTarget);\n\t\t\tvar validationResult = form.validationEngine('validate');\n\t\t\tif (validationResult == true) {\n\t\t\t\tvar invalidFields = form.data('jqv').InvalidFields;\n\t\t\t\tif (invalidFields.length == 0) {\n\t\t\t\t\tform.find('[name=\"saveButton\"]').attr('disabled', 'disabled');\n\t\t\t\t}\n\n\t\t\t\tvar params = jQuery(e.currentTarget).serializeFormData();\n\t\t\t\tvar newValue = params.newValue;\n\t\t\t\tparams.newValue = jQuery.trim(newValue);\n\t\t\t\tAppConnector.request(params).done(function(data) {\n\t\t\t\t\tdata = data.result;\n\t\t\t\t\tif (data) {\n\t\t\t\t\t\tvar newValue = jQuery.trim(jQuery('[name=\"newValue\"]', container).val());\n\t\t\t\t\t\tvar dragImagePath = jQuery('#dragImagePath').val();\n\t\t\t\t\t\tvar newElement =\n\t\t\t\t\t\t\t'<tr class=\"pickListValue u-cursor-pointer\"><td class=\"u-text-ellipsis\"><img class=\"alignMiddle\" src=\"' +\n\t\t\t\t\t\t\tdragImagePath +\n\t\t\t\t\t\t\t'\" />&nbsp;&nbsp;' +\n\t\t\t\t\t\t\tnewValue +\n\t\t\t\t\t\t\t'</td></tr>';\n\t\t\t\t\t\tvar newPickListValueRow = jQuery(newElement).appendTo(jQuery('#pickListValuesTable').find('tbody'));\n\t\t\t\t\t\tnewPickListValueRow.attr('data-key', newValue);\n\t\t\t\t\t\tnewPickListValueRow.attr('data-key-id', data['id']);\n\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\tvar params = {\n\t\t\t\t\t\t\ttitle: app.vtranslate('JS_MESSAGE'),\n\t\t\t\t\t\t\ttext: app.vtranslate('JS_ITEM_ADDED_SUCCESSFULLY'),\n\t\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t\t};\n\t\t\t\t\t\tVtiger_Helper_Js.showPnotify(params);\n\t\t\t\t\t\t//update the new item in the hidden picklist values array\n\t\t\t\t\t\tvar pickListValuesEle = jQuery('[name=\"pickListValues\"]');\n\t\t\t\t\t\tvar pickListValuesArray = JSON.parse(pickListValuesEle.val());\n\t\t\t\t\t\tpickListValuesArray[data['id']] = newValue;\n\t\t\t\t\t\tpickListValuesEle.val(JSON.stringify(pickListValuesArray));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tform.find('[name=\"saveButton\"]').attr('disabled', false);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\te.preventDefault();\n\t\t});\n\t},\n\t/**\n\t * Remene item\n\t */\n\tregisterRenameItemSaveEvent() {\n\t\t$('#renameItemForm').on('submit', e => {\n\t\t\te.preventDefault();\n\t\t\tlet form = $(e.currentTarget);\n\t\t\tif (form.validationEngine('validate')) {\n\t\t\t\tlet newValue,\n\t\t\t\t\toldValue = form.find('[name=\"oldValue\"]').val(),\n\t\t\t\t\tid = form.find('[name=\"primaryKeyId\"]').val(),\n\t\t\t\t\tparams = $(e.currentTarget).serializeFormData();\n\t\t\t\tif (form.find('[name=\"newValue\"]').length > 0) {\n\t\t\t\t\tnewValue = $.trim(form.find('[name=\"newValue\"]').val());\n\t\t\t\t\tparams.newValue = newValue;\n\t\t\t\t}\n\t\t\t\tif (form.data('jqv').InvalidFields.length === 0) {\n\t\t\t\t\tform.find('[name=\"saveButton\"]').attr('disabled', 'disabled');\n\t\t\t\t}\n\t\t\t\tconst progress = $.progressIndicator({ position: 'html', blockInfo: { enabled: true } });\n\t\t\t\tAppConnector.request(params)\n\t\t\t\t\t.done(data => {\n\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tif (typeof data.result !== 'undefined') {\n\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\t\t\ttitle: app.vtranslate('JS_MESSAGE'),\n\t\t\t\t\t\t\t\ttext: app.vtranslate('JS_ITEM_RENAMED_SUCCESSFULLY'),\n\t\t\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif (newValue !== '') {\n\t\t\t\t\t\t\t\tlet encodedOldValue = oldValue.replace(/\"/g, '\\\\\"'),\n\t\t\t\t\t\t\t\t\tdragImagePath = $('#dragImagePath').val(),\n\t\t\t\t\t\t\t\t\trenamedElement =\n\t\t\t\t\t\t\t\t\t\t'<tr class=\"pickListValue u-cursor-pointer\">' +\n\t\t\t\t\t\t\t\t\t\t'<td class=\"u-text-ellipsis\"><img class=\"alignMiddle\" src=\"' +\n\t\t\t\t\t\t\t\t\t\tdragImagePath +\n\t\t\t\t\t\t\t\t\t\t'\" />&nbsp;&nbsp;' +\n\t\t\t\t\t\t\t\t\t\tdata.result.newValue +\n\t\t\t\t\t\t\t\t\t\t'</td></tr>';\n\t\t\t\t\t\t\t\t$('[data-key=\"' + encodedOldValue + '\"]').replaceWith(\n\t\t\t\t\t\t\t\t\t$(renamedElement)\n\t\t\t\t\t\t\t\t\t\t.attr('data-key', newValue)\n\t\t\t\t\t\t\t\t\t\t.attr('data-key-id', id)\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t//update the new item in the hidden picklist values array\n\t\t\t\t\t\t\t\tlet pickListValuesEle = $('[name=\"pickListValues\"]'),\n\t\t\t\t\t\t\t\t\tpickListValuesArray = JSON.parse(pickListValuesEle.val());\n\t\t\t\t\t\t\t\tpickListValuesArray[id] = newValue;\n\t\t\t\t\t\t\t\tpickListValuesEle.val(JSON.stringify(pickListValuesArray));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tform.find('[name=\"saveButton\"]').attr('disabled', false);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function(data, err) {\n\t\t\t\t\t\tapp.errorLog(data, err);\n\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t});\n\t\t\t}\n\t\t});\n\t},\n\n\tshowDeleteItemForm: function(params) {\n\t\tvar thisInstance = this;\n\t\tAppConnector.request(params).done(function(data) {\n\t\t\tapp.showModalWindow(data, function(data) {\n\t\t\t\tif (typeof callBackFunction == 'function') {\n\t\t\t\t\tcallBackFunction(data);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\tvar callBackFunction = function(data) {\n\t\t\tvar form = data.find('#deleteItemForm');\n\t\t\tthisInstance.registerScrollForNonEditablePicklistValues(form);\n\t\t\tvar maximumSelectionSize = jQuery('#pickListValuesCount').val() - 1;\n\t\t\tApp.Fields.Picklist.changeSelectElementView(jQuery('[name=\"delete_value[]\"]'), 'select2', {\n\t\t\t\tmaximumSelectionLength: maximumSelectionSize,\n\t\t\t\tdropdownCss: { 'z-index': 100001 }\n\t\t\t});\n\t\t\tSettings_Picklist_Js.registerDeleteOptionEvent();\n\n\t\t\tvar validationParams = app.getvalidationEngineOptions(true);\n\t\t\tvalidationParams.onValidationComplete = function(form, valid) {\n\t\t\t\tif (valid) {\n\t\t\t\t\tvar selectElement = jQuery('[name=\"delete_value[]\"]');\n\t\t\t\t\tvar select2Element = app.getSelect2ElementFromSelect(selectElement);\n\t\t\t\t\tvar result = Vtiger_MultiSelect_Validator_Js.invokeValidation(selectElement);\n\t\t\t\t\tif (result !== true) {\n\t\t\t\t\t\tselect2Element.validationEngine('showPrompt', result, 'error', 'topLeft', true);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tselect2Element.validationEngine('hide');\n\t\t\t\t\t\tform.find('[name=\"saveButton\"]').attr('disabled', 'disabled');\n\t\t\t\t\t}\n\t\t\t\t\tvar deleteValues = jQuery('[name=\"delete_value[]\"]').val();\n\t\t\t\t\tAppConnector.request(form.serializeFormData()).done(function(data) {\n\t\t\t\t\t\tif (typeof data.result !== 'undefined') {\n\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\t//delete the item in the hidden picklist values array\n\t\t\t\t\t\t\tvar pickListValuesEle = jQuery('[name=\"pickListValues\"]');\n\t\t\t\t\t\t\tvar pickListValuesArray = JSON.parse(pickListValuesEle.val());\n\t\t\t\t\t\t\tjQuery.each(deleteValues, function(i, e) {\n\t\t\t\t\t\t\t\tvar encodedOldValue = e.replace(/\"/g, '\\\\\"');\n\t\t\t\t\t\t\t\tjQuery('[data-key-id=\"' + encodedOldValue + '\"]').remove();\n\t\t\t\t\t\t\t\tdelete pickListValuesArray[e];\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tpickListValuesEle.val(JSON.stringify(pickListValuesArray));\n\t\t\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\t\t\ttitle: app.vtranslate('JS_MESSAGE'),\n\t\t\t\t\t\t\t\ttext: app.vtranslate('JS_ITEMS_DELETED_SUCCESSFULLY'),\n\t\t\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t};\n\t\t\tform.validationEngine(validationParams);\n\t\t};\n\t},\n\n\tregisterSelectPickListValueEvent: function() {\n\t\tjQuery('#pickListValuesTable').on('click', '.pickListValue', function(event) {\n\t\t\tvar currentRow = jQuery(event.currentTarget);\n\t\t\tvar currentRowTd = currentRow.find('td');\n\t\t\tevent.preventDefault();\n\n\t\t\tif (event.ctrlKey) {\n\t\t\t\tcurrentRowTd.toggleClass('selectedListItem');\n\t\t\t} else {\n\t\t\t\tjQuery('.pickListValue')\n\t\t\t\t\t.find('td')\n\t\t\t\t\t.not(currentRowTd)\n\t\t\t\t\t.removeClass('selectedListItem');\n\t\t\t\tcurrentRowTd.toggleClass('selectedListItem');\n\t\t\t}\n\t\t});\n\t},\n\n\tregisterPickListValuesSortableEvent: function() {\n\t\tvar tbody = jQuery('tbody', jQuery('#pickListValuesTable'));\n\t\ttbody.sortable({\n\t\t\thelper: function(e, ui) {\n\t\t\t\t//while dragging helper elements td element will take width as contents width\n\t\t\t\t//so we are explicity saying that it has to be same width so that element will not\n\t\t\t\t//look like distrubed\n\t\t\t\tui.children().each(function(index, element) {\n\t\t\t\t\telement = jQuery(element);\n\t\t\t\t\telement.width(element.width());\n\t\t\t\t});\n\t\t\t\treturn ui;\n\t\t\t},\n\t\t\tcontainment: tbody,\n\t\t\trevert: true,\n\t\t\tupdate: function(e, ui) {\n\t\t\t\tjQuery('#saveSequence').removeAttr('disabled');\n\t\t\t}\n\t\t});\n\t},\n\n\tregisterSaveSequenceClickEvent: function() {\n\t\tjQuery('#saveSequence').on('click', function(e) {\n\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true,\n\t\t\t\t\telementToBlock: jQuery('.tab-content')\n\t\t\t\t}\n\t\t\t});\n\t\t\tvar pickListValuesSequenceArray = {};\n\t\t\tvar pickListValues = jQuery('#pickListValuesTable').find('.pickListValue');\n\t\t\tjQuery.each(pickListValues, function(i, element) {\n\t\t\t\tpickListValuesSequenceArray[jQuery(element).data('key-id')] = ++i;\n\t\t\t});\n\t\t\tvar params = {\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\taction: 'SaveAjax',\n\t\t\t\tmode: 'saveOrder',\n\t\t\t\tpicklistValues: pickListValuesSequenceArray,\n\t\t\t\tpicklistName: jQuery('[name=\"picklistName\"]').val()\n\t\t\t};\n\t\t\tAppConnector.request(params).done(function(data) {\n\t\t\t\tif (typeof data.result !== 'undefined') {\n\t\t\t\t\tjQuery('#saveSequence').attr('disabled', 'disabled');\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({\n\t\t\t\t\t\ttext: app.vtranslate('JS_SEQUENCE_UPDATED_SUCCESSFULLY'),\n\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\n\tregisterAssingValueToRoleTabClickEvent: function() {\n\t\tjQuery('#assignedToRoleTab').on('click', function(e) {\n\t\t\tjQuery('#rolesList').trigger('change');\n\t\t});\n\t},\n\n\tregisterItemActions: function() {\n\t\tSettings_Picklist_Js.registerAddItemEvent();\n\t\tSettings_Picklist_Js.registerRenameItemEvent();\n\t\tSettings_Picklist_Js.registerDeleteItemEvent();\n\t\tSettings_Picklist_Js.registerSelectPickListValueEvent();\n\t\tSettings_Picklist_Js.registerAssingValueToRuleEvent();\n\t\tSettings_Picklist_Js.registerChangeRoleEvent();\n\t\tSettings_Picklist_Js.registerAssingValueToRoleTabClickEvent();\n\t\tSettings_Picklist_Js.registerPickListValuesSortableEvent();\n\t\tSettings_Picklist_Js.registerSaveSequenceClickEvent();\n\t\tSettings_Picklist_Js.registerProcessStatusItemEvent();\n\t},\n\n\tregisterEvents: function() {\n\t\tSettings_Picklist_Js.registerModuleChangeEvent();\n\t\tSettings_Picklist_Js.registerModulePickListChangeEvent();\n\t\tSettings_Picklist_Js.registerItemActions();\n\t\tSettings_Picklist_Js.registerEnablePickListValueClickEvent();\n\t}\n};\n\njQuery(document).ready(function() {\n\tSettings_Picklist_Js.registerEvents();\n});\n\nVtiger_Base_Validator_Js(\n\t'Vtiger_FieldLabel_Validator_Js',\n\t{\n\t\t/**\n\t\t *Function which invokes field validation\n\t\t *@param accepts field element as parameter\n\t\t * @return error if validation fails true on success\n\t\t */\n\t\tinvokeValidation: function(field, rules, i, options) {\n\t\t\tvar instance = new Vtiger_FieldLabel_Validator_Js();\n\t\t\tinstance.setElement(field);\n\t\t\tvar response = instance.validate();\n\t\t\tif (response != true) {\n\t\t\t\treturn instance.getError();\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t/**\n\t\t * Function to validate the field label\n\t\t * @return true if validation is successfull\n\t\t * @return false if validation error occurs\n\t\t */\n\t\tvalidate: function() {\n\t\t\tvar fieldValue = this.getFieldValue();\n\t\t\treturn this.validateValue(fieldValue);\n\t\t},\n\n\t\tvalidateValue: function(fieldValue) {\n\t\t\tlet specialChars = /[\\<\\>\\\"\\,\\#]/;\n\t\t\tif (specialChars.test(fieldValue)) {\n\t\t\t\tthis.setError(app.vtranslate('JS_SPECIAL_CHARACTERS') + ' < > \" , # ' + app.vtranslate('JS_NOT_ALLOWED'));\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t}\n);\n"],"names":["Settings_Picklist_Js","on","e","selectedModule","jQuery","currentTarget","val","length","showMessage","app","vtranslate","params","getModuleName","getParentModuleName","progressIndicatorElement","progressIndicator","request","done","data","html","mode","Fields","Picklist","changeSelectElementView","registerModulePickListChangeEvent","trigger","showSelect2ElementView","registerItemActions","find","clonedCreateView","clone","removeClass","addClass","callBackFunction","validationEngine","registerAddItemSaveEvent","regiserSelectRolesEvent","showModalWindow","pickListValuesTable","selectedListItem","selectedValues","each","i","element","push","closest","registerAssignValueToRoleSaveEvent","select2","form","assignValuesSelectElement","assignValuesSelect2Element","getSelect2ElementFromSelect","assignValueResult","Vtiger_MultiSelect_Validator_Js","invokeValidation","rolesSelectElement","select2Element","result","preventDefault","attr","serializeFormData","hideModalWindow","removeAttr","pickListVaue","hasClass","remove","prepend","pickListValues","disabledValues","enabledValues","currentValue","selectedValue","inArray","not","append","selectedListItems","getSelectedItems","showPnotify","$","keyId","registerScrollForNonEditablePicklistValues","registerRenameItemSaveEvent","container","slimScroll","selectedListItemsArray","index","showDeleteItemForm","JSON","stringify","map","item","key","replaceValueElement","id","text","rolesList","registerenableOrDisableListSaveEvent","newValue","trim","InvalidFields","progress","position","blockInfo","enabled","fail","err","errorLog","registerProcessStatusItemSaveEvent","validationResult","invalidFields","dragImagePath","newElement","newPickListValueRow","appendTo","pickListValuesEle","pickListValuesArray","parse","oldValue","encodedOldValue","replace","renamedElement","replaceWith","thisInstance","maximumSelectionSize","registerDeleteOptionEvent","validationParams","getvalidationEngineOptions","onValidationComplete","valid","selectElement","deleteValues","event","currentRow","currentRowTd","ctrlKey","toggleClass","tbody","sortable","ui","children","width","pickListValuesSequenceArray","registerAddItemEvent","registerRenameItemEvent","registerDeleteItemEvent","registerSelectPickListValueEvent","registerAssingValueToRuleEvent","registerChangeRoleEvent","registerAssingValueToRoleTabClickEvent","registerPickListValuesSortableEvent","registerSaveSequenceClickEvent","registerProcessStatusItemEvent","registerModuleChangeEvent","registerEnablePickListValueClickEvent","document","ready","registerEvents","Vtiger_Base_Validator_Js","field","rules","options","instance","Vtiger_FieldLabel_Validator_Js","setElement","response","validate","getError","fieldValue","getFieldValue","validateValue","specialChars","test","setError"],"mappings":"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"}