{"version":3,"file":"Index.min.js","sources":["Index.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\n$.Class(\n\t'Settings_RecordNumbering_Index_Js',\n\t{},\n\t{\n\t\tform: false,\n\t\tclipBoardInstances: [],\n\t\tgetForm: function () {\n\t\t\tif (this.form == false) {\n\t\t\t\tthis.form = jQuery('#EditView');\n\t\t\t}\n\t\t\treturn this.form;\n\t\t},\n\n\t\t/**\n\t\t * Function to register change event for source module field\n\t\t */\n\t\tregisterOnChangeEventOfSourceModule() {\n\t\t\tconst editViewForm = this.getForm();\n\t\t\tconst sequenceBtn = editViewForm.find('.js-adavanced-sequence');\n\t\t\teditViewForm.find('[name=\"sourceModule\"]').on('change', (e) => {\n\t\t\t\t$('.saveButton').removeAttr('disabled');\n\t\t\t\tsequenceBtn.addClass('d-none');\n\t\t\t\tAppConnector.request({\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\tview: 'CustomRecordNumbering',\n\t\t\t\t\tsourceModule: $(e.currentTarget).val()\n\t\t\t\t}).done((data) => {\n\t\t\t\t\tif (data) {\n\t\t\t\t\t\t$('.js-container').html(data);\n\t\t\t\t\t\tthis.form = false;\n\t\t\t\t\t\tthis.registerEvents();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Function to register event for saving module custom numbering\n\t\t */\n\t\tsaveModuleCustomNumbering() {\n\t\t\tif ($('.saveButton').attr('disabled')) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst editViewForm = this.getForm();\n\t\t\tconst sourceModule = editViewForm.find('[name=\"sourceModule\"]').val();\n\t\t\tconst prefix = editViewForm.find('[name=\"prefix\"]');\n\t\t\tconst leadingZeros = editViewForm.find('[name=\"leading_zeros\"]').val();\n\t\t\tconst currentPrefix = $.trim(prefix.val());\n\t\t\tconst postfix = editViewForm.find('[name=\"postfix\"]');\n\t\t\tconst currentPostfix = jQuery.trim(postfix.val());\n\t\t\tconst sequenceNumberElement = editViewForm.find('[name=\"sequenceNumber\"]');\n\t\t\tconst sequenceNumber = sequenceNumberElement.val();\n\t\t\tconst oldSequenceNumber = sequenceNumberElement.data('oldSequenceNumber');\n\t\t\tif (sequenceNumber < oldSequenceNumber && currentPrefix === prefix.data('oldPrefix') && currentPostfix === postfix.data('oldPostfix')) {\n\t\t\t\tsequenceNumberElement.validationEngine('showPrompt', app.vtranslate('JS_SEQUENCE_NUMBER_MESSAGE') + ' ' + oldSequenceNumber, 'error', 'topLeft', true);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\teditViewForm.find('.saveButton').attr('disabled', 'disabled');\n\t\t\tAppConnector.request({\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\taction: 'SaveAjax',\n\t\t\t\tmode: 'saveModuleCustomNumberingData',\n\t\t\t\tsourceModule: sourceModule,\n\t\t\t\tprefix: currentPrefix,\n\t\t\t\tleading_zeros: leadingZeros,\n\t\t\t\tpostfix: currentPostfix,\n\t\t\t\tsequenceNumber: sequenceNumber,\n\t\t\t\treset_sequence: editViewForm.find('[name=\"reset_sequence\"]').val()\n\t\t\t}).done(function (data) {\n\t\t\t\tif (data.success === true) {\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({\n\t\t\t\t\t\ttext: app.vtranslate('JS_RECORD_NUMBERING_SAVED_SUCCESSFULLY_FOR') + ' ' + editViewForm.find('option[value=\"' + sourceModule + '\"]').text()\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({\n\t\t\t\t\t\ttext: currentPrefix + ' ' + app.vtranslate(data.error.message),\n\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Function to handle update record with the given sequence number\n\t\t */\n\t\tregisterEventToUpdateRecordsWithSequenceNumber() {\n\t\t\tconst editViewForm = this.getForm();\n\t\t\t$('[name=\"updateRecordWithSequenceNumber\"]')\n\t\t\t\t.off('click')\n\t\t\t\t.on('click', function () {\n\t\t\t\t\tconst sourceModule = editViewForm.find('[name=\"sourceModule\"]').val();\n\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\t\taction: 'SaveAjax',\n\t\t\t\t\t\tmode: 'updateRecordsWithSequenceNumber',\n\t\t\t\t\t\tsourceModule: sourceModule\n\t\t\t\t\t}).done(function (data) {\n\t\t\t\t\t\tif (data.success === true) {\n\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({\n\t\t\t\t\t\t\t\ttext: app.vtranslate('JS_RECORD_NUMBERING_UPDATED_SUCCESSFULLY_FOR') + ' ' + editViewForm.find('option[value=\"' + sourceModule + '\"]').text()\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(data.error.message);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Function to register change event for prefix,postfix,reset_sequence and sequence number\n\t\t */\n\t\tregisterChangeEvent() {\n\t\t\tthis.getForm()\n\t\t\t\t.find('[name=\"prefix\"],[name=\"leading_zeros\"],[name=\"sequenceNumber\"],[name=\"postfix\"],[name=\"reset_sequence\"]')\n\t\t\t\t.on('change', this.checkPrefix.bind(this));\n\t\t},\n\n\t\tregisterCopyClipboard: function (editViewForm) {\n\t\t\tfor (let i in this.clipBoardInstances) {\n\t\t\t\tthis.clipBoardInstances[i].destroy();\n\t\t\t}\n\t\t\tthis.clipBoardInstances[0] = new ClipboardJS('#customVariableCopy', {\n\t\t\t\ttext: function (trigger) {\n\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\ttext: app.vtranslate('JS_NOTIFY_COPY_TEXT'),\n\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t});\n\t\t\t\t\treturn '{{' + editViewForm.find('#customVariables').val() + '}}';\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.clipBoardInstances[1] = new ClipboardJS('#picklistVariableCopy', {\n\t\t\t\ttext: function (trigger) {\n\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\ttext: app.vtranslate('JS_NOTIFY_COPY_TEXT'),\n\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t});\n\t\t\t\t\treturn '{{' + editViewForm.find('#picklistVariables').val() + '}}';\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.clipBoardInstances[2] = new ClipboardJS('#referenceVariableCopy', {\n\t\t\t\ttext: function (trigger) {\n\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\ttext: app.vtranslate('JS_NOTIFY_COPY_TEXT'),\n\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t});\n\t\t\t\t\treturn editViewForm.find('#referenceVariables').val();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Check if reset sequence appears in prefix or postfix to prevent duplicate number generation\n\t\t * @returns {boolean}\n\t\t */\n\t\tcheckPrefix() {\n\t\t\tlet sequenceExists = false;\n\t\t\tconst editViewForm = this.getForm();\n\t\t\tconst value = editViewForm.find('[name=\"reset_sequence\"]').val();\n\t\t\tconst prefix = editViewForm.find('[name=\"prefix\"]').val();\n\t\t\tconst postfix = editViewForm.find('[name=\"postfix\"]').val();\n\t\t\tconst saveBtn = editViewForm.find('.saveButton');\n\t\t\tswitch (value) {\n\t\t\t\tcase 'Y':\n\t\t\t\t\tif (prefix.indexOf('{{YY}}') === -1 && prefix.indexOf('{{YYYY}}') === -1 && postfix.indexOf('{{YY}}') === -1 && postfix.indexOf('{{YYYY}}') === -1) {\n\t\t\t\t\t\tsaveBtn.attr('disabled', 'disabled');\n\t\t\t\t\t\tVtiger_Helper_Js.showMessage({\n\t\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\t\ttext: app.vtranslate('JS_RS_ADD_YEAR_VARIABLE')\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsaveBtn.removeAttr('disabled');\n\t\t\t\t\t\tsequenceExists = true;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'M':\n\t\t\t\t\tif (prefix.indexOf('{{MM}}') === -1 && prefix.indexOf('{{M}}') === -1 && postfix.indexOf('{{MM}}') === -1 && postfix.indexOf('{{M}}') === -1) {\n\t\t\t\t\t\tsaveBtn.attr('disabled', 'disabled');\n\t\t\t\t\t\tVtiger_Helper_Js.showMessage({\n\t\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\t\ttext: app.vtranslate('JS_RS_ADD_MONTH_VARIABLE')\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsaveBtn.removeAttr('disabled');\n\t\t\t\t\t\tsequenceExists = true;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'D':\n\t\t\t\t\tif (prefix.indexOf('{{DD}}') === -1 && prefix.indexOf('{{D}}') === -1 && postfix.indexOf('{{DD}}') === -1 && postfix.indexOf('{{D}}') === -1) {\n\t\t\t\t\t\tsaveBtn.attr('disabled', 'disabled');\n\t\t\t\t\t\tVtiger_Helper_Js.showMessage({\n\t\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\t\ttext: app.vtranslate('JS_RS_ADD_DAY_VARIABLE')\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsaveBtn.removeAttr('disabled');\n\t\t\t\t\t\tsequenceExists = true;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'X':\n\t\t\t\tdefault:\n\t\t\t\t\tsaveBtn.removeAttr('disabled');\n\t\t\t\t\tsequenceExists = true;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (sequenceExists) {\n\t\t\t\tlet regex = new RegExp('{{picklist:([a-z0-9_]+)}}', 'g');\n\t\t\t\tlet regexResult = (postfix + prefix).match(regex);\n\t\t\t\tif (regexResult && regexResult.length > 1) {\n\t\t\t\t\tVtiger_Helper_Js.showMessage({\n\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\ttext: app.vtranslate('JS_PICKLIST_TOO_MANY')\n\t\t\t\t\t});\n\t\t\t\t\tsequenceExists = false;\n\t\t\t\t\tsaveBtn.attr('disabled', 'disabled');\n\t\t\t\t} else {\n\t\t\t\t\tsaveBtn.removeAttr('disabled');\n\t\t\t\t\tsequenceExists = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.checkAdavancedSequenceBtn();\n\t\t\treturn sequenceExists;\n\t\t},\n\n\t\t/**\n\t\t * Function to enable button if prefix or postfix has picklist value\n\t\t */\n\t\tcheckAdavancedSequenceBtn: function () {\n\t\t\tconst editViewForm = this.getForm();\n\t\t\tconst sequenceBtn = editViewForm.find('.js-adavanced-sequence');\n\t\t\tconst prefix = editViewForm.find('[name=\"prefix\"]').val();\n\t\t\tconst postfix = editViewForm.find('[name=\"postfix\"]').val();\n\t\t\tlet regex = new RegExp('{{picklist:([a-z0-9_]+)}}', 'g');\n\t\t\tlet regexResult = (postfix + prefix).match(regex);\n\t\t\tif ((regexResult && regexResult.length > 1) || !regexResult) {\n\t\t\t\tsequenceBtn.addClass('d-none');\n\t\t\t} else {\n\t\t\t\tsequenceBtn.removeClass('d-none');\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Function to register event on button\n\t\t */\n\t\tregisterAdavancedSequenceEvent: function () {\n\t\t\tconst editViewForm = this.getForm();\n\t\t\tconst sequenceBtn = editViewForm.find('.js-adavanced-sequence');\n\t\t\tsequenceBtn.on('click', function () {\n\t\t\t\tlet sourceModule = editViewForm.find('[name=\"sourceModule\"]').val();\n\t\t\t\tlet picklistName = '';\n\t\t\t\tlet prefix = editViewForm.find('[name=\"prefix\"]').val();\n\t\t\t\tlet postfix = editViewForm.find('[name=\"postfix\"]').val();\n\t\t\t\tlet regex = new RegExp('{{picklist:([a-z0-9_]+)}}', 'g');\n\t\t\t\tif (prefix.match(regex)) {\n\t\t\t\t\tpicklistName = prefix;\n\t\t\t\t} else if (postfix.match(regex)) {\n\t\t\t\t\tpicklistName = postfix;\n\t\t\t\t}\n\t\t\t\tAppConnector.request({\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\tview: 'Advanced',\n\t\t\t\t\tsourceModule: sourceModule,\n\t\t\t\t\tpicklist: picklistName\n\t\t\t\t}).done(function (data) {\n\t\t\t\t\tif (data) {\n\t\t\t\t\t\tapp.showModalWindow(data, function (container) {\n\t\t\t\t\t\t\tlet modalForm = container.find('form');\n\t\t\t\t\t\t\tmodalForm.validationEngine(app.validationEngineOptionsForRecord);\n\t\t\t\t\t\t\tcontainer.on('click', '.js-modal__save', function (e) {\n\t\t\t\t\t\t\t\tif (modalForm.validationEngine('validate')) {\n\t\t\t\t\t\t\t\t\tlet progressIndicatorElement = $.progressIndicator({\n\t\t\t\t\t\t\t\t\t\tposition: 'html',\n\t\t\t\t\t\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\t\t\t\t\t\tenabled: true\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\t\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\t\t\t\t\t\taction: 'SaveAjax',\n\t\t\t\t\t\t\t\t\t\tmode: 'saveModuleCustomNumberingAdvanceData',\n\t\t\t\t\t\t\t\t\t\tsourceModule: sourceModule,\n\t\t\t\t\t\t\t\t\t\tsequenceNumber: modalForm.find('.js-picklist-sequence').serializeFormData()\n\t\t\t\t\t\t\t\t\t}).done(function (data) {\n\t\t\t\t\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\t\t\t\tif (data.success === true) {\n\t\t\t\t\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({\n\t\t\t\t\t\t\t\t\t\t\t\ttext: app.vtranslate('JS_RECORD_NUMBERING_SAVED_SUCCESSFULLY_FOR') + ' ' + editViewForm.find('option[value=\"' + sourceModule + '\"]').text()\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Function to register events\n\t\t */\n\t\tregisterEvents: function () {\n\t\t\tconst thisInstance = this;\n\t\t\tconst editViewForm = this.getForm();\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(editViewForm.find('select'));\n\t\t\tthis.registerOnChangeEventOfSourceModule();\n\t\t\tthis.registerEventToUpdateRecordsWithSequenceNumber();\n\t\t\tthis.registerChangeEvent();\n\t\t\tthis.checkAdavancedSequenceBtn();\n\t\t\tthis.registerAdavancedSequenceEvent();\n\t\t\tlet params = app.validationEngineOptions;\n\t\t\tparams.onValidationComplete = function (editViewForm, valid) {\n\t\t\t\tif (valid) {\n\t\t\t\t\tthisInstance.saveModuleCustomNumbering();\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t};\n\t\t\teditViewForm.validationEngine('detach');\n\t\t\teditViewForm.validationEngine('attach', params);\n\t\t\tthis.registerCopyClipboard(editViewForm);\n\t\t}\n\t}\n);\n"],"names":["$","Class","form","clipBoardInstances","getForm","jQuery","registerOnChangeEventOfSourceModule","editViewForm","sequenceBtn","find","on","e","removeAttr","addClass","AppConnector","request","module","app","getModuleName","parent","getParentModuleName","view","sourceModule","currentTarget","val","done","data","html","registerEvents","saveModuleCustomNumbering","attr","prefix","leadingZeros","currentPrefix","trim","postfix","currentPostfix","sequenceNumberElement","sequenceNumber","oldSequenceNumber","validationEngine","vtranslate","action","mode","leading_zeros","reset_sequence","success","Settings_Vtiger_Index_Js","showMessage","text","error","message","type","registerEventToUpdateRecordsWithSequenceNumber","off","registerChangeEvent","checkPrefix","bind","registerCopyClipboard","i","destroy","showNotify","value","saveBtn","indexOf","Vtiger_Helper_Js","sequenceExists","regexResult","match","regex","length","checkAdavancedSequenceBtn","removeClass","registerAdavancedSequenceEvent","picklistName","picklist","showModalWindow","container","modalForm","validationEngineOptionsForRecord","progressIndicator","position","blockInfo","enabled","serializeFormData","progressIndicatorElement","hideModalWindow","App","Fields","Picklist","showSelect2ElementView","validationEngineOptions","params","onValidationComplete","valid","thisInstance"],"mappings":"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"}