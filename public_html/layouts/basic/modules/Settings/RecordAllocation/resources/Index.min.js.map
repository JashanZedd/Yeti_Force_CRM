{"version":3,"file":"Index.min.js","sources":["Index.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class(\n\t'Settings_RecordAllocation_Index_Js',\n\t{},\n\t{\n\t\tcontainer: false,\n\t\t/**\n\t\t * Register tables\n\t\t * @param {jQuery} contentData\n\t\t */\n\t\tregisterDataTables: function (contentData) {\n\t\t\tconst thisInstance = this;\n\t\t\t$.extend($.fn.dataTable.defaults, {\n\t\t\t\tlanguage: {\n\t\t\t\t\tsLengthMenu: app.vtranslate('JS_S_LENGTH_MENU'),\n\t\t\t\t\tsZeroRecords: app.vtranslate('JS_NO_RESULTS_FOUND'),\n\t\t\t\t\tsInfo: app.vtranslate('JS_S_INFO'),\n\t\t\t\t\tsInfoEmpty: app.vtranslate('JS_S_INFO_EMPTY'),\n\t\t\t\t\tsSearch: app.vtranslate('JS_SEARCH'),\n\t\t\t\t\tsEmptyTable: app.vtranslate('JS_NO_RESULTS_FOUND'),\n\t\t\t\t\tsInfoFiltered: app.vtranslate('JS_S_INFO_FILTERED'),\n\t\t\t\t\tsLoadingRecords: app.vtranslate('JS_LOADING_OF_RECORDS'),\n\t\t\t\t\tsProcessing: app.vtranslate('JS_LOADING_OF_RECORDS'),\n\t\t\t\t\toAria: {\n\t\t\t\t\t\tsSortAscending: app.vtranslate('JS_S_SORT_ASCENDING'),\n\t\t\t\t\t\tsSortDescending: app.vtranslate('JS_S_SORT_DESCENDING')\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (contentData == undefined) {\n\t\t\t\tcontentData = thisInstance.getContainer();\n\t\t\t}\n\t\t\tcontentData.find('.js-data-table').dataTable({\n\t\t\t\tscrollY: 200,\n\t\t\t\tdeferRender: true,\n\t\t\t\tscroller: true,\n\t\t\t\tpaging: false,\n\t\t\t\tinfo: false\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register event drag and drop\n\t\t * @param {jQuery} contentData\n\t\t */\n\t\tregisterDragDropEvent: function (contentData) {\n\t\t\tif (contentData == undefined) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst thisInstance = this;\n\t\t\tlet panel = contentData.closest('.js-panel'),\n\t\t\t\tindex = panel.data('index'),\n\t\t\t\twidth;\n\t\t\tcontentData.find('.js-drag-drop-' + index).draggable({\n\t\t\t\tappendTo: 'body',\n\t\t\t\thelper: 'clone',\n\t\t\t\tstart: function (e, ui) {\n\t\t\t\t\twidth = $(ui.helper.context).width();\n\t\t\t\t\t$(ui.helper).css('width', width).addClass('dataTableDragDrop bg-primary');\n\t\t\t\t},\n\t\t\t\tzIndex: 9999999999\n\t\t\t});\n\t\t\tcontentData.find('.dataTables_scrollBody .js-data-table').droppable({\n\t\t\t\tactiveClass: 'ui-state-default',\n\t\t\t\thoverClass: 'ui-state-hover',\n\t\t\t\taccept: '.js-drag-drop-' + index,\n\t\t\t\tdrop: function (event, ui) {\n\t\t\t\t\tlet tableBase = $(ui.draggable).closest('.js-data-table'),\n\t\t\t\t\t\ttable = $(this);\n\t\t\t\t\tif (tableBase.data('mode') != table.data('mode')) {\n\t\t\t\t\t\ttableBase.DataTable().row(ui.draggable).remove().draw();\n\t\t\t\t\t\ttable.DataTable().row.add(ui.draggable[0]).draw();\n\t\t\t\t\t\ttable = table.data('mode') == 'active' ? table : tableBase;\n\t\t\t\t\t\tthisInstance.save(table.closest('.js-panel'));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Save users for module\n\t\t * @param {jQuery} container\n\t\t */\n\t\tsave: function (container) {\n\t\t\tlet data = {\n\t\t\t\t\tmodule: container.data('modulename'),\n\t\t\t\t\tuserid: container.find('.js-base-user').val(),\n\t\t\t\t\ttype: app.getMainParams('fieldType')\n\t\t\t\t},\n\t\t\t\tuserData = [],\n\t\t\t\tdataContainer = container.find('.dataTables_scrollBody:first tbody tr');\n\t\t\tdataContainer.each(function (e) {\n\t\t\t\tlet id = $(this).data('id'),\n\t\t\t\t\tmode = $(this).data('type');\n\t\t\t\tif (id && mode) {\n\t\t\t\t\tif (!userData[mode]) {\n\t\t\t\t\t\tuserData[mode] = [];\n\t\t\t\t\t}\n\t\t\t\t\tuserData[mode].push(id);\n\t\t\t\t}\n\t\t\t});\n\t\t\tdata['ids'] = jQuery.extend({}, userData);\n\t\t\tapp.saveAjax('save', jQuery.extend({}, data));\n\t\t},\n\t\t/**\n\t\t * Register event to show form\n\t\t */\n\t\tregisterModalButton: function () {\n\t\t\tconst thisInstance = this,\n\t\t\t\tcontainer = this.getContainer();\n\t\t\tcontainer.find('button.js-add-panel').on('click', function () {\n\t\t\t\tlet modalWindow = container.find('.js-modal-add-panel').clone(true, true),\n\t\t\t\t\tinUseModules = thisInstance.getModules();\n\t\t\t\tmodalWindow.find('select option').each(function () {\n\t\t\t\t\tif ($.inArray($(this).val(), inUseModules) != -1) {\n\t\t\t\t\t\t$(this).remove();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tapp.showModalWindow(modalWindow, function (data) {\n\t\t\t\t\t//register all select2 Elements\n\t\t\t\t\tlet selectElement = data.find('select'),\n\t\t\t\t\t\tform = data.find('form');\n\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(selectElement);\n\t\t\t\t\tform.on('submit', function (e) {\n\t\t\t\t\t\tlet currentTarget = $(e.currentTarget),\n\t\t\t\t\t\t\tmodule = currentTarget.find('.js-modules-list');\n\t\t\t\t\t\tif (module.length && module.val()) {\n\t\t\t\t\t\t\tthisInstance.addPanel(module.val());\n\t\t\t\t\t\t}\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Returns list of modules which are visible\n\t\t * @returns {Array}\n\t\t */\n\t\tgetModules: function () {\n\t\t\tvar modules = [];\n\t\t\tthis.getContainer()\n\t\t\t\t.find('.js-panel')\n\t\t\t\t.each(function () {\n\t\t\t\t\tmodules.push(jQuery(this).data('modulename'));\n\t\t\t\t});\n\t\t\treturn modules;\n\t\t},\n\t\t/**\n\t\t * Load users form modules\n\t\t * @param {string} module\n\t\t * @returns {jQuery.Deferred}\n\t\t */\n\t\taddPanel: function (module) {\n\t\t\tconst thisInstance = this;\n\t\t\tlet aDeferred = jQuery.Deferred(),\n\t\t\t\tprogressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\t\tposition: 'html',\n\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\tenabled: true\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t\tlastPanel = this.getContainer().find('.js-panel:last');\n\t\t\tAppConnector.request({\n\t\t\t\tindex: lastPanel.data('index'),\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\tsourceModule: module,\n\t\t\t\tview: 'Index',\n\t\t\t\tmode: 'getPanel',\n\t\t\t\ttype: app.getMainParams('fieldType')\n\t\t\t}).done(\n\t\t\t\tfunction (data) {\n\t\t\t\t\tlet elements = thisInstance.getContainer().find('.js-panels-container').append(data);\n\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(elements.find('.select2'));\n\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t},\n\t\t\t\tfunction (error) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\taDeferred.reject(error);\n\t\t\t\t}\n\t\t\t);\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/**\n\t\t * Register event to load users\n\t\t */\n\t\tregisterLoadData: function () {\n\t\t\tconst thisInstance = this;\n\t\t\tthis.getContainer().on('change', '.js-base-user', function (e) {\n\t\t\t\tlet selectElement = jQuery(e.currentTarget),\n\t\t\t\t\tpanel = selectElement.closest('.js-panel-item'),\n\t\t\t\t\tdataJson = panel.find('.js-module-allocation-data').val(),\n\t\t\t\t\tdata = [];\n\t\t\t\tif (dataJson && dataJson != 'null') {\n\t\t\t\t\tdata = JSON.parse(dataJson);\n\t\t\t\t}\n\t\t\t\tlet userData = data[selectElement.val()],\n\t\t\t\t\tbodyContainer = panel.find('.js-active-panel');\n\t\t\t\tif (bodyContainer.length) {\n\t\t\t\t\tbodyContainer.remove();\n\t\t\t\t}\n\t\t\t\tlet bodyContainerTable = panel.find('.js-clear-tables').clone(true, true);\n\t\t\t\tif (userData != undefined) {\n\t\t\t\t\tlet activeData = bodyContainerTable.find('.js-data-table .dropContainer:first'),\n\t\t\t\t\t\tbaseData = bodyContainerTable.find('.js-data-table .dropContainer:last');\n\t\t\t\t\tbaseData.find('tr').each(function () {\n\t\t\t\t\t\tlet mode = jQuery(this).data('type'),\n\t\t\t\t\t\t\tid = jQuery(this).data('id');\n\t\t\t\t\t\tif ($.inArray(id, userData[mode]) != -1 || $.inArray(id.toString(), userData[mode]) != -1) {\n\t\t\t\t\t\t\tactiveData.append(jQuery(this));\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tpanel\n\t\t\t\t\t.find('.js-panel-body')\n\t\t\t\t\t.removeClass('d-none')\n\t\t\t\t\t.append(bodyContainerTable.removeClass('js-clear-tables d-none').addClass('js-active-panel'));\n\t\t\t\tthisInstance.registerDataTables(bodyContainerTable);\n\t\t\t\tthisInstance.registerDragDropEvent(bodyContainerTable);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register basic events\n\t\t */\n\t\tregisterHeaderElements: function () {\n\t\t\tthis.getContainer().on('click', '.js-remove-panel', function (e) {\n\t\t\t\tlet panel = jQuery(e.currentTarget).closest('.js-panel');\n\t\t\t\tapp.showConfirmModal({\n\t\t\t\t\ttitle: app.vtranslate('JS_ARE_YOU_SURE_YOU_WANT_TO_DELETE_PANEL'),\n\t\t\t\t\tconfirmedCallback: () => {\n\t\t\t\t\t\tapp\n\t\t\t\t\t\t\t.saveAjax('removePanel', {\n\t\t\t\t\t\t\t\tmodule: panel.data('modulename'),\n\t\t\t\t\t\t\t\ttype: app.getMainParams('fieldType')\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.done(function () {\n\t\t\t\t\t\t\t\tpanel.fadeOut(300, function () {\n\t\t\t\t\t\t\t\t\t$(this).remove();\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t\tthis.registerLoadData();\n\t\t},\n\t\t/**\n\t\t * Returns container\n\t\t * @returns {jQuery}\n\t\t */\n\t\tgetContainer: function () {\n\t\t\tif (this.container == false) {\n\t\t\t\tthis.container = jQuery('div.contentsDiv');\n\t\t\t}\n\t\t\treturn this.container;\n\t\t},\n\t\t/**\n\t\t * Main function\n\t\t */\n\t\tregisterEvents: function () {\n\t\t\tthis.registerModalButton();\n\t\t\tthis.registerHeaderElements();\n\t\t}\n\t}\n);\n"],"names":["jQuery","Class","container","registerDataTables","contentData","thisInstance","$","extend","fn","dataTable","defaults","language","sLengthMenu","app","vtranslate","sZeroRecords","sInfo","sInfoEmpty","sSearch","sEmptyTable","sInfoFiltered","sLoadingRecords","sProcessing","oAria","sSortAscending","sSortDescending","getContainer","find","scrollY","deferRender","scroller","paging","info","registerDragDropEvent","width","panel","closest","index","data","draggable","appendTo","helper","start","e","ui","context","css","addClass","zIndex","droppable","activeClass","hoverClass","accept","drop","event","table","tableBase","DataTable","row","remove","draw","add","save","module","userid","val","type","getMainParams","userData","dataContainer","each","id","mode","push","saveAjax","registerModalButton","on","clone","inUseModules","getModules","modalWindow","inArray","showModalWindow","form","App","Fields","Picklist","showSelect2ElementView","selectElement","currentTarget","length","addPanel","preventDefault","modules","aDeferred","Deferred","progressIndicatorElement","progressIndicator","position","blockInfo","enabled","lastPanel","request","getModuleName","parent","getParentModuleName","sourceModule","view","done","elements","append","hideModalWindow","resolve","error","reject","promise","registerLoadData","dataJson","JSON","parse","bodyContainer","activeData","bodyContainerTable","baseData","toString","removeClass","registerHeaderElements","showConfirmModal","title","confirmedCallback","fadeOut","registerEvents"],"mappings":"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"}