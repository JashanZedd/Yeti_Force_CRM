{"version":3,"file":"Index.min.js","sources":["Index.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nSettings_Vtiger_Index_Js(\"Settings_Log_Index_Js\", {}, {\n\n\t/**\n\t * Get data from server\n\t *\n\t * @param {function} callback\n\t */\n\tgetData(callback) {\n\t\tconst progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t'position': 'html',\n\t\t\t'blockInfo': {\n\t\t\t\t'enabled': true\n\t\t\t}\n\t\t});\n\t\tAppConnector.request({\n\t\t\turl: 'index.php',\n\t\t\ttype: 'POST',\n\t\t\tdata: {\n\t\t\t\tmodule: 'Log',\n\t\t\t\tparent: 'Settings',\n\t\t\t\taction: 'Data',\n\t\t\t\ttype: this.container.find('.nav .active').data('type'),\n\t\t\t\trange: this.container.find('.js-date-range-filter').val()\n\t\t\t}\n\t\t}).done((response) => {\n\t\t\tconst columns = [], data = [];\n\t\t\tfor (let key in response.columns) {\n\t\t\t\tconst render = (key === 'url' || key === 'request') ? (data) => data : $.fn.dataTable.render.text();\n\t\t\t\tcolumns.push({\n\t\t\t\t\ttitle: response.columns[key],\n\t\t\t\t\tname: key,\n\t\t\t\t\tdata: key,\n\t\t\t\t\trender\n\t\t\t\t});\n\t\t\t}\n\t\t\tfor (let key in response.data) {\n\t\t\t\tlet row = response.data[key];\n\t\t\t\tif (typeof row.url !== 'undefined') {\n\t\t\t\t\tconst original = row.url;\n\t\t\t\t\tif (row.url.indexOf('?') === -1) {\n\t\t\t\t\t\trow.url = 'index.php?' + row.url;\n\t\t\t\t\t}\n\t\t\t\t\trow.url = `<a href=\"${row.url}\" title=\"${response.columns['url']}\" data-content=\"${original}\" class=\"js-popover-tooltip\">${original.length > 50 ? original.substr(0, 50) + '...' : original}</a>`;\n\t\t\t\t}\n\t\t\t\tdata.push(row);\n\t\t\t}\n\t\t\tcallback(data, columns);\n\t\t\tprogressIndicatorElement.progressIndicator({mode: 'hide'});\n\t\t});\n\t},\n\n\t/**\n\t * Initialize data table component\n\t *\n\t * @param {array} data\n\t * @param {array} columns\n\t * @returns {jQuery}\n\t */\n\tinitDataTable(data, columns) {\n\t\treturn this.container.find('.js-data-table').dataTable({\n\t\t\tsearching: false,\n\t\t\tprocessing: false,\n\t\t\tscrollX: true,\n\t\t\tbAutoWidth: false,\n\t\t\tdata,\n\t\t\tcolumns,\n\t\t\tlanguage: {\n\t\t\t\tsLengthMenu: app.vtranslate('JS_S_LENGTH_MENU'),\n\t\t\t\tsZeroRecords: app.vtranslate('JS_NO_RESULTS_FOUND'),\n\t\t\t\tsInfo: app.vtranslate('JS_S_INFO'),\n\t\t\t\tsInfoEmpty: app.vtranslate('JS_S_INFO_EMPTY'),\n\t\t\t\tsSearch: app.vtranslate('JS_SEARCH'),\n\t\t\t\tsEmptyTable: app.vtranslate('JS_NO_RESULTS_FOUND'),\n\t\t\t\tsInfoFiltered: app.vtranslate('JS_S_INFO_FILTERED'),\n\t\t\t\tsLoadingRecords: app.vtranslate('JS_LOADING_OF_RECORDS'),\n\t\t\t\tsProcessing: app.vtranslate('JS_LOADING_OF_RECORDS'),\n\t\t\t\toPaginate: {\n\t\t\t\t\tsFirst: app.vtranslate('JS_S_FIRST'),\n\t\t\t\t\tsPrevious: app.vtranslate('JS_S_PREVIOUS'),\n\t\t\t\t\tsNext: app.vtranslate('JS_S_NEXT'),\n\t\t\t\t\tsLast: app.vtranslate('JS_S_LAST')\n\t\t\t\t},\n\t\t\t\toAria: {\n\t\t\t\t\tsSortAscending: app.vtranslate('JS_S_SORT_ASCENDING'),\n\t\t\t\t\tsSortDescending: app.vtranslate('JS_S_SORT_DESCENDING')\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t * Register data table component\n\t */\n\tregisterDataTable() {\n\t\tApp.Fields.Date.registerRange(this.container.find('.js-log-range'));\n\t\tlet table, tableApi;\n\t\tthis.getData((data, columns) => {\n\t\t\ttable = this.initDataTable(data, columns);\n\t\t\ttableApi = table.api();\n\t\t});\n\t\tthis.container.find('.js-date-range-btn').click((e) => {\n\t\t\tthis.getData((data, columns) => {\n\t\t\t\ttableApi.data().clear();\n\t\t\t\ttableApi.rows.add(data);\n\t\t\t\ttableApi.draw();\n\t\t\t});\n\t\t})\n\t},\n\n\t/**\n\t * Register events\n\t */\n\tregisterEvents() {\n\t\tthis._super();\n\t\tthis.container = $('.js-log');\n\t\tthis.registerDataTable();\n\t}\n});\n"],"names":["Settings_Vtiger_Index_Js","callback","progressIndicatorElement","jQuery","progressIndicator","request","container","find","data","val","done","response","columns","key","render","$","fn","dataTable","text","push","row","url","original","indexOf","length","substr","mode","app","vtranslate","Fields","Date","registerRange","table","tableApi","getData","initDataTable","api","click","e","clear","rows","add","draw","_super","registerDataTable"],"mappings":"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"}