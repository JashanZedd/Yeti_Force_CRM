{"version":3,"file":"ApiAddress.min.js","sources":["ApiAddress.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class(\n\t'Settings_ApiAddress_Configuration_Js',\n\t{},\n\t{\n\t\tregisterSave: function (container) {\n\t\t\tcontainer.validationEngine(app.validationEngineOptions);\n\t\t\tcontainer.find('.saveGlobal').on('click', (e) => {\n\t\t\t\tif (!container.validationEngine('validate')) {\n\t\t\t\t\tapp.formAlignmentAfterValidation(container);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tlet form = $(e.currentTarget).closest('form');\n\t\t\t\tlet formData = form.serializeFormData();\n\t\t\t\tlet active = {};\n\t\t\t\t$('[name=\"active\"]').each((i, e) => {\n\t\t\t\t\tactive[e.dataset.type] = e.checked ? 1 : 0;\n\t\t\t\t});\n\t\t\t\tformData['active'] = active;\n\t\t\t\tformData['module'] = 'ApiAddress';\n\t\t\t\tformData['parent'] = 'Settings';\n\t\t\t\tformData['mode'] = 'global';\n\t\t\t\tformData['action'] = 'SaveConfig';\n\n\t\t\t\tAppConnector.request(formData)\n\t\t\t\t\t.done(function (data) {\n\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\ttext: data['result']['message'],\n\t\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t\t});\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function () {\n\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\ttext: app.vtranslate('JS_ERROR'),\n\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterConfigModal(container) {\n\t\t\tcontainer.find('.js-show-config-modal').on('click', (e) => {\n\t\t\t\tconst providerName = e.currentTarget.dataset.provider;\n\n\t\t\t\tapp.showModalWindow({\n\t\t\t\t\turl: `index.php?module=ApiAddress&parent=Settings&view=ApiConfigModal&provider=${providerName}`,\n\t\t\t\t\tcb: (modalContainer) => {\n\t\t\t\t\t\tmodalContainer.on('click', '.js-modal__save', () => {\n\t\t\t\t\t\t\tlet form = modalContainer.find('form');\n\t\t\t\t\t\t\tif (form.validationEngine('validate')) {\n\t\t\t\t\t\t\t\tlet formData = form.serializeFormData();\n\t\t\t\t\t\t\t\tlet progress = $.progressIndicator({\n\t\t\t\t\t\t\t\t\tmessage: app.vtranslate('JS_SAVE_LOADER_INFO'),\n\t\t\t\t\t\t\t\t\tblockInfo: { enabled: true }\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tapp\n\t\t\t\t\t\t\t\t\t.saveAjax('', [], formData)\n\t\t\t\t\t\t\t\t\t.done(() => {\n\t\t\t\t\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t.fail(() => {\n\t\t\t\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\t\t\t\ttext: app.vtranslate('JS_ERROR'),\n\t\t\t\t\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t.always(() => {\n\t\t\t\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\tconst container = $('.js-validation-form');\n\t\t\tthis.registerConfigModal(container);\n\t\t\tthis.registerSave(container);\n\t\t}\n\t}\n);\n"],"names":["jQuery","Class","registerSave","container","validationEngine","app","validationEngineOptions","find","on","e","formAlignmentAfterValidation","$","currentTarget","closest","formData","form","serializeFormData","active","each","i","dataset","type","checked","AppConnector","request","done","data","showNotify","text","fail","vtranslate","registerConfigModal","providerName","provider","showModalWindow","url","cb","modalContainer","progress","progressIndicator","message","blockInfo","enabled","saveAjax","window","location","reload","always","hideModalWindow","mode","registerEvents"],"mappings":"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"}