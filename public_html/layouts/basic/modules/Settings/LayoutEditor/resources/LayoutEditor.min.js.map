{"version":3,"file":"LayoutEditor.min.js","sources":["LayoutEditor.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n * Contributor(s): YetiForce.com\n *************************************************************************************/\n'use strict';\n\n$.Class(\n\t'Settings_LayoutEditor_Js',\n\t{},\n\t{\n\t\tupdatedBlockSequence: {},\n\t\treactiveFieldsList: [],\n\t\tinActiveFieldsList: false,\n\t\tupdatedBlockFieldsList: [],\n\t\tupdatedBlocksList: [],\n\t\tblockNamesList: [],\n\t\t/**\n\t\t * Function to set the inactive fields list used to show the inactive fields\n\t\t */\n\t\tsetInactiveFieldsList: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar contents = $('#layoutEditorContainer').find('.contents');\n\t\t\tvar json = contents.find('.inActiveFieldsArray');\n\t\t\tif (0 < json.length) {\n\t\t\t\tthisInstance.inActiveFieldsList = JSON.parse(json.val());\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Function to regiser the event to make the blocks sortable\n\t\t */\n\t\tmakeBlocksListSortable: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar contents = $('#layoutEditorContainer').find('.contents');\n\t\t\tvar table = contents.find('.blockSortable');\n\t\t\tcontents.sortable({\n\t\t\t\tcontainment: contents,\n\t\t\t\titems: table,\n\t\t\t\trevert: true,\n\t\t\t\ttolerance: 'pointer',\n\t\t\t\tcursor: 'move',\n\t\t\t\tupdate: function(e, ui) {\n\t\t\t\t\tthisInstance.updateBlockSequence();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function which will update block sequence\n\t\t */\n\t\tupdateBlockSequence: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar progressIndicatorElement = $.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tvar sequence = JSON.stringify(thisInstance.updateBlocksListByOrder());\n\t\t\tvar params = {};\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['action'] = 'Block';\n\t\t\tparams['mode'] = 'updateSequenceNumber';\n\t\t\tparams['sequence'] = sequence;\n\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function(data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tvar params = {};\n\t\t\t\t\tparams['text'] = app.vtranslate('JS_BLOCK_SEQUENCE_UPDATED');\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t})\n\t\t\t\t.fail(function(error) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function which will arrange the sequence number of blocks\n\t\t */\n\t\tupdateBlocksListByOrder: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar contents = $('#layoutEditorContainer').find('.contents');\n\t\t\tcontents.find('.editFieldsTable.blockSortable').each(function(index, domElement) {\n\t\t\t\tvar blockTable = $(domElement);\n\t\t\t\tvar blockId = blockTable.data('blockId');\n\t\t\t\tvar actualBlockSequence = blockTable.data('sequence');\n\t\t\t\tvar expectedBlockSequence = index + 1;\n\n\t\t\t\tif (expectedBlockSequence != actualBlockSequence) {\n\t\t\t\t\tblockTable.data('sequence', expectedBlockSequence);\n\t\t\t\t}\n\t\t\t\tthisInstance.updatedBlockSequence[blockId] = expectedBlockSequence;\n\t\t\t});\n\t\t\treturn thisInstance.updatedBlockSequence;\n\t\t},\n\t\t/**\n\t\t * Function to register all the relatedList Events\n\t\t */\n\t\tregisterRelatedListEvents: function() {\n\t\t\tconst thisInstance = this,\n\t\t\t\trelatedList = $('#relatedTabOrder');\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(relatedList.find('.relatedTabModulesList .select2_container'), {\n\t\t\t\tsortable: true,\n\t\t\t\tsortableCb: currentTarget => {\n\t\t\t\t\tthisInstance.updateSelectedFields(currentTarget);\n\t\t\t\t}\n\t\t\t});\n\t\t\trelatedList.on('click', '.inActiveRelationModule', function(e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tvar relatedModule = currentTarget.closest('.relatedModule');\n\t\t\t\trelatedModule\n\t\t\t\t\t.find('.activeRelationModule')\n\t\t\t\t\t.removeClass('d-none')\n\t\t\t\t\t.show();\n\t\t\t\tcurrentTarget.hide();\n\t\t\t\tthisInstance.changeStatusRelatedModule(relatedModule.data('relation-id'), false);\n\t\t\t});\n\t\t\trelatedList.on('click', '.activeRelationModule', function(e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tvar relatedModule = currentTarget.closest('.relatedModule');\n\t\t\t\trelatedModule\n\t\t\t\t\t.find('.inActiveRelationModule')\n\t\t\t\t\t.removeClass('d-none')\n\t\t\t\t\t.show();\n\t\t\t\tcurrentTarget.hide();\n\t\t\t\tthisInstance.changeStatusRelatedModule(relatedModule.data('relation-id'), true);\n\t\t\t});\n\t\t\trelatedList.on('click', '.removeRelation', function(e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tvar relatedModule = currentTarget.closest('.relatedModule');\n\t\t\t\tthisInstance.removeRelation(relatedModule);\n\t\t\t});\n\t\t\trelatedList.on('click', '.addToFavorites', function(e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tthisInstance.changeStateFavorites(currentTarget);\n\t\t\t});\n\t\t\trelatedList.on('change', '.relatedViewType', function(e) {\n\t\t\t\tvar currentTarget = $(this);\n\t\t\t\tvar value = currentTarget.val();\n\t\t\t\tif (!value) {\n\t\t\t\t\tcurrentTarget.validationEngine('showPrompt', app.vtranslate('JS_PLEASE_SELECT_ATLEAST_ONE_OPTION'));\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tcurrentTarget.validationEngine('hide');\n\t\t\t\tthisInstance.changeRelatedViewType(currentTarget);\n\t\t\t});\n\t\t\trelatedList.find('.js-related-column-list').on('change', function(e) {\n\t\t\t\tthisInstance.updateSelectedFields($(e.currentTarget));\n\t\t\t});\n\t\t\trelatedList.on('click', '.addRelation', function(e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tvar container = currentTarget.closest('#relatedTabOrder');\n\t\t\t\tvar contentsDiv = container.closest('.contentsDiv');\n\t\t\t\tvar addRelationContainer = relatedList.find('.addRelationContainer').clone(true, true);\n\t\t\t\tvar callBackFunction = function(data) {\n\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(data.find('select'));\n\t\t\t\t\tdata.find('.relLabel').val(data.find('.target option:selected').val());\n\t\t\t\t\tdata.on('change', '.target', function(e) {\n\t\t\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\t\t\tdata.find('.relLabel').val(currentTarget.find('option:selected').val());\n\t\t\t\t\t});\n\t\t\t\t\tdata.find('[name=\"type\"]').on('change', function() {\n\t\t\t\t\t\tif ($(this).val() === 'getAttachments') {\n\t\t\t\t\t\t\tdata.find('[name=\"target\"] option')\n\t\t\t\t\t\t\t\t.not('[value=\"Documents\"]')\n\t\t\t\t\t\t\t\t.addClass('d-none');\n\t\t\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(data.find('[name=\"target\"]'));\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tdata.find('[name=\"target\"] option').removeClass('d-none');\n\t\t\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(data.find('[name=\"target\"]'));\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tdata.on('click', '.addButton', function(e) {\n\t\t\t\t\t\tvar form = data.find('form').serializeFormData();\n\t\t\t\t\t\tvar params = {};\n\t\t\t\t\t\tparams['module'] = app.getModuleName();\n\t\t\t\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\t\t\t\tparams['action'] = 'Relation';\n\t\t\t\t\t\tparams['mode'] = 'addRelation';\n\t\t\t\t\t\t$.extend(params, form);\n\t\t\t\t\t\tAppConnector.request(params).done(function(data) {\n\t\t\t\t\t\t\tlet response = data.result;\n\t\t\t\t\t\t\tif (response && response.success) {\n\t\t\t\t\t\t\t\tthisInstance\n\t\t\t\t\t\t\t\t\t.getRelModuleLayoutEditor(container.find('[name=\"layoutEditorRelModules\"]').val())\n\t\t\t\t\t\t\t\t\t.done(function(data) {\n\t\t\t\t\t\t\t\t\t\tcontentsDiv.html(data);\n\t\t\t\t\t\t\t\t\t\tthisInstance.registerEvents();\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else if (response && response.message) {\n\t\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({ type: 'error', text: response.message });\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t\tapp.showModalWindow(addRelationContainer, function(data) {\n\t\t\t\t\tif (typeof callBackFunction == 'function') {\n\t\t\t\t\t\tcallBackFunction(data);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tgetSelectedFields: function(target) {\n\t\t\tvar selectedFields = [];\n\t\t\ttarget.find(':selected').each(function(e) {\n\t\t\t\tselectedFields.push({\n\t\t\t\t\tid: $(this).val(),\n\t\t\t\t\tname: $(this).data('field-name') ? $(this).data('field-name') : $(this).data('name')\n\t\t\t\t});\n\t\t\t});\n\t\t\treturn selectedFields;\n\t\t},\n\t\t/**\n\t\t * Function to regiser the event to make the related modules sortable\n\t\t */\n\t\tmakeRelatedModuleSortable: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar relatedModulesContainer = $('.relatedModulesList');\n\t\t\tvar modulesList = relatedModulesContainer.find('.relatedModule');\n\t\t\trelatedModulesContainer.sortable({\n\t\t\t\tcontainment: relatedModulesContainer,\n\t\t\t\titems: modulesList,\n\t\t\t\thandle: '.mainBlockTableLabel',\n\t\t\t\trevert: true,\n\t\t\t\ttolerance: 'pointer',\n\t\t\t\tcursor: 'move',\n\t\t\t\tupdate: function(e, ui) {\n\t\t\t\t\tthisInstance.updateSequenceRelatedModule();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tchangeRelatedViewType: function(currentTarget) {\n\t\t\tvar relatedModule = currentTarget.closest('.relatedModule');\n\t\t\tAppConnector.request({\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\taction: 'Relation',\n\t\t\t\tmode: 'updateRelatedViewType',\n\t\t\t\trelationId: relatedModule.data('relation-id'),\n\t\t\t\ttypes: currentTarget.val()\n\t\t\t})\n\t\t\t\t.done(function(data) {\n\t\t\t\t\tif (data.success) {\n\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({\n\t\t\t\t\t\t\ttext: data.result.text\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({\n\t\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\t\ttext: data.error.message\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.fail(function(error) {\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({\n\t\t\t\t\t\ttext: error.message\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t},\n\t\tchangeStateFavorites: function(currentTarget) {\n\t\t\tvar relatedModule = currentTarget.closest('.relatedModule');\n\t\t\tvar status = currentTarget.data('state') == 1 ? 0 : 1;\n\t\t\tvar params = {};\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['action'] = 'Relation';\n\t\t\tparams['mode'] = 'updateStateFavorites';\n\t\t\tparams['relationId'] = relatedModule.data('relation-id');\n\t\t\tparams['status'] = status;\n\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function(data) {\n\t\t\t\t\tcurrentTarget.data('state', status);\n\t\t\t\t\tif (status) {\n\t\t\t\t\t\tcurrentTarget.find('.far').addClass('d-none');\n\t\t\t\t\t\tcurrentTarget.find('.fas').removeClass('d-none');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcurrentTarget.find('.fas').addClass('d-none');\n\t\t\t\t\t\tcurrentTarget.find('.far').removeClass('d-none');\n\t\t\t\t\t}\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({ text: app.vtranslate('JS_SAVE_NOTIFY_OK') });\n\t\t\t\t})\n\t\t\t\t.fail(function(error) {\n\t\t\t\t\tvar params = {};\n\t\t\t\t\tparams['text'] = error;\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t});\n\t\t},\n\t\tchangeStatusRelatedModule: function(relationId, status) {\n\t\t\tvar params = {};\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['action'] = 'Relation';\n\t\t\tparams['mode'] = 'changeStatusRelation';\n\t\t\tparams['relationId'] = relationId;\n\t\t\tparams['status'] = status;\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function(data) {\n\t\t\t\t\tvar params = {};\n\t\t\t\t\tif (status) {\n\t\t\t\t\t\tparams['text'] = app.vtranslate('JS_SAVED_CHANGE_STATUS_1');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tparams['text'] = app.vtranslate('JS_SAVED_CHANGE_STATUS_0');\n\t\t\t\t\t}\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t})\n\t\t\t\t.fail(function(error) {\n\t\t\t\t\tvar params = {};\n\t\t\t\t\tparams['text'] = error;\n\t\t\t\t\tparams['type'] = 'error';\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t});\n\t\t},\n\t\tremoveRelation: function(relatedModule) {\n\t\t\tvar message = app.vtranslate('JS_DELETE_RELATION_CONFIRMATION');\n\t\t\tVtiger_Helper_Js.showConfirmationBox({ message: message })\n\t\t\t\t.done(function(e) {\n\t\t\t\t\tvar params = {};\n\t\t\t\t\tparams['module'] = app.getModuleName();\n\t\t\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\t\t\tparams['action'] = 'Relation';\n\t\t\t\t\tparams['mode'] = 'removeRelation';\n\t\t\t\t\tparams['relationId'] = relatedModule.data('relation-id');\n\n\t\t\t\t\tAppConnector.request(params)\n\t\t\t\t\t\t.done(function(data) {\n\t\t\t\t\t\t\tvar params = {};\n\t\t\t\t\t\t\tparams['text'] = app.vtranslate('JS_REMOVE_RELATION_OK');\n\t\t\t\t\t\t\trelatedModule.remove();\n\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.fail(function(error) {\n\t\t\t\t\t\t\tvar params = {\n\t\t\t\t\t\t\t\ttext: message,\n\t\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t\t.fail(function(error, err) {});\n\t\t},\n\t\tupdateSequenceRelatedModule: function() {\n\t\t\tvar modules = [];\n\t\t\tvar relatedModulesContainer = $('.relatedModulesList');\n\t\t\tvar params = {};\n\t\t\tvar progressIndicatorElement = $.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\trelatedModulesContainer.find('.relatedModule').each(function(index, domElement) {\n\t\t\t\tvar relationId = $(domElement).data('relationId');\n\t\t\t\tmodules.push({ relationId: relationId, index: index });\n\t\t\t});\n\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['action'] = 'Relation';\n\t\t\tparams['mode'] = 'updateSequenceRelatedModule';\n\t\t\tparams['modules'] = modules;\n\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function(data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tvar params = {};\n\t\t\t\t\tparams['text'] = app.vtranslate('JS_UPDATE_SEQUENCE');\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t})\n\t\t\t\t.fail(function(error) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tvar params = {};\n\t\t\t\t\tparams['text'] = error;\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t});\n\t\t},\n\t\tupdateSelectedFields: function(target) {\n\t\t\tconst thisInstance = this;\n\t\t\tlet params = {},\n\t\t\t\trelatedModule = $(target).closest('.relatedModule'),\n\t\t\t\tprogressIndicatorElement = $.progressIndicator({\n\t\t\t\t\tposition: 'html',\n\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\tenabled: true\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t\tselectedFields;\n\t\t\tif ($(target).data('type') == 'inventory') {\n\t\t\t\tparams['inventory'] = true;\n\t\t\t\tselectedFields = $(target).val();\n\t\t\t} else {\n\t\t\t\tselectedFields = thisInstance.getSelectedFields($(target));\n\t\t\t}\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['action'] = 'Relation';\n\t\t\tparams['mode'] = 'updateSelectedFields';\n\t\t\tparams['relationId'] = relatedModule.data('relation-id');\n\t\t\tparams['fields'] = selectedFields;\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function() {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tlet params = {};\n\t\t\t\t\tparams['text'] = app.vtranslate('JS_UPDATED_FIELD_LIST_MODULE_RELATED');\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t})\n\t\t\t\t.fail(function(error) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tlet params = {};\n\t\t\t\t\tparams['text'] = error;\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to regiser the event to make the fields sortable\n\t\t */\n\t\tmakeFieldsListSortable: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar contents = $('#layoutEditorContainer').find('.contents');\n\t\t\tvar table = contents.find('.editFieldsTable');\n\t\t\ttable.each(function() {\n\t\t\t\tvar containment = $(this).closest('.moduleBlocks');\n\t\t\t\t$(this)\n\t\t\t\t\t.find('ul[name=sortable1], ul[name=sortable2]')\n\t\t\t\t\t.sortable({\n\t\t\t\t\t\tcontainment: containment,\n\t\t\t\t\t\ttolerance: 'pointer',\n\t\t\t\t\t\tcursor: 'move',\n\t\t\t\t\t\tconnectWith: containment.find('.connectedSortable'),\n\t\t\t\t\t\tupdate: function(e, ui) {\n\t\t\t\t\t\t\tvar currentField = ui['item'];\n\t\t\t\t\t\t\tif (currentField.closest('.moduleBlocks').hasClass('inventoryBlock')) {\n\t\t\t\t\t\t\t\tthisInstance.showSaveFieldSequenceButton(currentField.closest('.editFieldsTable'));\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthisInstance.showSaveFieldSequenceButton(thisInstance.getDetailViewLayout());\n\t\t\t\t\t\t\t\tthisInstance.createUpdatedBlocksList(currentField);\n\t\t\t\t\t\t\t\t// rearrange the older block fields\n\t\t\t\t\t\t\t\tif (ui.sender) {\n\t\t\t\t\t\t\t\t\tvar olderBlock = ui.sender.closest('.editFieldsTable');\n\t\t\t\t\t\t\t\t\tthisInstance.reArrangeBlockFields(olderBlock);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tgetDetailViewLayout: function() {\n\t\t\treturn $('#detailViewLayout');\n\t\t},\n\t\tgetInventoryViewLayout: function() {\n\t\t\treturn $('#inventoryViewLayout');\n\t\t},\n\t\t/**\n\t\t * Function to show the save button of fieldSequence\n\t\t */\n\t\tshowSaveFieldSequenceButton: function(layout) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar saveButton = layout.find('.saveFieldSequence');\n\t\t\tif (app.isHidden(saveButton) || app.isInvisible(saveButton)) {\n\t\t\t\tif (!saveButton.hasClass('inventorySequence')) {\n\t\t\t\t\tthisInstance.updatedBlocksList = [];\n\t\t\t\t\tthisInstance.updatedBlockFieldsList = [];\n\t\t\t\t}\n\t\t\t\tsaveButton.removeClass('d-none');\n\t\t\t\tsaveButton.removeClass('invisible');\n\t\t\t\tvar params = {};\n\t\t\t\tparams['text'] = app.vtranslate('JS_SAVE_THE_CHANGES_TO_UPDATE_FIELD_SEQUENCE');\n\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Function which will hide the saveFieldSequence button\n\t\t */\n\t\thideSaveFieldSequenceButton: function() {\n\t\t\tvar layout = $('#detailViewLayout');\n\t\t\tvar saveButton = layout.find('.saveFieldSequence');\n\t\t\tsaveButton.addClass('d-none');\n\t\t},\n\t\t/**\n\t\t * Function to create the blocks list which are updated while sorting\n\t\t */\n\t\tcreateUpdatedBlocksList: function(currentField) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar block = currentField.closest('.editFieldsTable');\n\t\t\tvar updatedBlockId = block.data('blockId');\n\t\t\tif ($.inArray(updatedBlockId, thisInstance.updatedBlocksList) == -1) {\n\t\t\t\tthisInstance.updatedBlocksList.push(updatedBlockId);\n\t\t\t}\n\t\t\tthisInstance.reArrangeBlockFields(block);\n\t\t},\n\t\t/**\n\t\t * Function that rearranges fields in the block when the fields are moved\n\t\t * @param <jQuery object> block\n\t\t */\n\t\treArrangeBlockFields: function(block) {\n\t\t\t// 1.get the containers, 2.compare the length, 3.if uneven then move the last element\n\t\t\tvar leftSideContainer = block.find('ul[name=sortable1]');\n\t\t\tvar rightSideContainer = block.find('ul[name=sortable2]');\n\t\t\tif (leftSideContainer.children().length < rightSideContainer.children().length) {\n\t\t\t\tvar lastElementInRightContainer = rightSideContainer.children(':last');\n\t\t\t\tleftSideContainer.append(lastElementInRightContainer);\n\t\t\t} else if (leftSideContainer.children().length > rightSideContainer.children().length + 1) {\n\t\t\t\t//greater than 1\n\t\t\t\tvar lastElementInLeftContainer = leftSideContainer.children(':last');\n\t\t\t\trightSideContainer.append(lastElementInLeftContainer);\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Function to create the list of updated blocks with all the fields and their sequences\n\t\t */\n\t\tcreateUpdatedBlockFieldsList: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar contents = $('#layoutEditorContainer').find('.contents');\n\n\t\t\tfor (var index in thisInstance.updatedBlocksList) {\n\t\t\t\tvar updatedBlockId = thisInstance.updatedBlocksList[index];\n\t\t\t\tvar updatedBlock = contents.find('.block_' + updatedBlockId);\n\t\t\t\tvar firstBlockSortFields = updatedBlock.find('ul[name=sortable1]');\n\t\t\t\tvar editFields = firstBlockSortFields.find('.editFields');\n\t\t\t\tvar expectedFieldSequence = 1;\n\t\t\t\teditFields.each(function(i, domElement) {\n\t\t\t\t\tvar fieldEle = $(domElement);\n\t\t\t\t\tvar fieldId = fieldEle.data('fieldId');\n\t\t\t\t\tthisInstance.updatedBlockFieldsList.push({\n\t\t\t\t\t\tfieldid: fieldId,\n\t\t\t\t\t\tsequence: expectedFieldSequence,\n\t\t\t\t\t\tblock: updatedBlockId\n\t\t\t\t\t});\n\t\t\t\t\texpectedFieldSequence = expectedFieldSequence + 2;\n\t\t\t\t});\n\t\t\t\tvar secondBlockSortFields = updatedBlock.find('ul[name=sortable2]');\n\t\t\t\tvar secondEditFields = secondBlockSortFields.find('.editFields');\n\t\t\t\tvar sequenceValue = 2;\n\t\t\t\tsecondEditFields.each(function(i, domElement) {\n\t\t\t\t\tvar fieldEle = $(domElement);\n\t\t\t\t\tvar fieldId = fieldEle.data('fieldId');\n\t\t\t\t\tthisInstance.updatedBlockFieldsList.push({\n\t\t\t\t\t\tfieldid: fieldId,\n\t\t\t\t\t\tsequence: sequenceValue,\n\t\t\t\t\t\tblock: updatedBlockId\n\t\t\t\t\t});\n\t\t\t\t\tsequenceValue = sequenceValue + 2;\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Function to register click event for save button of fields sequence\n\t\t */\n\t\tregisterFieldSequenceSaveClick: function() {\n\t\t\tthis.getDetailViewLayout()\n\t\t\t\t.find('.saveFieldSequence')\n\t\t\t\t.on('click', () => {\n\t\t\t\t\tthis.hideSaveFieldSequenceButton();\n\t\t\t\t\tthis.createUpdatedBlockFieldsList();\n\t\t\t\t\tthis.updateFieldSequence();\n\t\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function will save the field sequences\n\t\t */\n\t\tupdateFieldSequence: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar progressIndicatorElement = $.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tvar params = {};\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['action'] = 'Field';\n\t\t\tparams['mode'] = 'move';\n\t\t\tparams['updatedFields'] = thisInstance.updatedBlockFieldsList;\n\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function(data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\twindow.location.reload();\n\t\t\t\t\tvar params = {};\n\t\t\t\t\tparams['text'] = app.vtranslate('JS_FIELD_SEQUENCE_UPDATED');\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t})\n\t\t\t\t.fail(function(error) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to check if picklist exist\n\t\t */\n\t\tcheckPicklistExist(fieldNameValue){\n\t\t\tlet aDeferred = $.Deferred();\n\t\t\tAppConnector.request({\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\taction: 'Field',\n\t\t\t\tmode: 'checkPicklistExist',\n\t\t\t\tfieldName: fieldNameValue.toLowerCase()\n\t\t\t}).done(function(data) {\n\t\t\t\tif(data.result){\n\t\t\t\t\tVtiger_Helper_Js.showConfirmationBox({message: app.vtranslate('JS_EXIST_PICKLIST_NAME')})\n\t\t\t\t\t.done(function(data) {\n\t\t\t\t\t\taDeferred.resolve(true);\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function(error) {\n\t\t\t\t\t\taDeferred.resolve(false);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\taDeferred.resolve(true);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/**\n\t\t * Function to register click evnet add custom field button\n\t\t */\n\t\tregisterAddCustomFieldEvent() {\n\t\t\tconst thisInstance = this;\n\t\t\tlet container = $('#layoutEditorContainer'),\n\t\t\t\tcontents = container.find('.contents');\n\t\t\tcontents.find('.addCustomField').on('click', e => {\n\t\t\t\tlet blockId = $(e.currentTarget).closest('.editFieldsTable').data('blockId'),\n\t\t\t\t\taddFieldContainer = container.find('.createFieldModal').clone(true, true);\n\t\t\t\taddFieldContainer.removeClass('d-none').show();\n\t\t\t\tlet callBackFunction = data => {\n\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(data.find('select'), { width: '100%' });\n\t\t\t\t\tlet form = data.find('.createCustomFieldForm');\n\t\t\t\t\tform.attr('id', 'createFieldForm');\n\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(form.find('[name=\"pickListValues\"]'), {\n\t\t\t\t\t\ttags: true,\n\t\t\t\t\t\ttokenSeparators: [',']\n\t\t\t\t\t});\n\t\t\t\t\tthis.registerFieldTypeChangeEvent(form);\n\t\t\t\t\tthis.registerMultiReferenceFieldsChangeEvent(form);\n\t\t\t\t\tthis.registerMultiReferenceFilterFieldChangeEvent(form);\n\t\t\t\t\tlet params = app.getvalidationEngineOptions(true);\n\t\t\t\t\tparams.onValidationComplete = (form, valid) => {\n\t\t\t\t\t\tif (valid && thisInstance.validateFieldsValue(form)) {\n\t\t\t\t\t\t\tlet saveButton = form.find(':submit'),\n\t\t\t\t\t\t\t\tfieldNameValue = $('[name=\"fieldName\"]', form).val(),\n\t\t\t\t\t\t\t\tfieldTypeValue = $('[name=\"fieldType\"]', form).val();\n\t\t\t\t\t\t\tsaveButton.attr('disabled', 'disabled');\n\t\t\t\t\t\t\tif (fieldTypeValue == 'Picklist' || fieldTypeValue == 'MultiSelectCombo') {\n\t\t\t\t\t\t\t\tthisInstance.checkPicklistExist(fieldNameValue).done(result => {\n\t\t\t\t\t\t\t\t\tif (result) {\n\t\t\t\t\t\t\t\t\t\tthisInstance.saveCustomField(blockId, form);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tsaveButton.removeAttr('disabled');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthisInstance.saveCustomField(blockId, form);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t};\n\t\t\t\t\tform.validationEngine(params);\n\t\t\t\t};\n\t\t\t\tapp.showModalWindow(\n\t\t\t\t\taddFieldContainer,\n\t\t\t\t\tdata => {\n\t\t\t\t\t\tif (typeof callBackFunction == 'function') {\n\t\t\t\t\t\t\tcallBackFunction(data);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{ width: '1000px' }\n\t\t\t\t);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to validate fields value\n\t\t */\n\t\tvalidateFieldsValue: function(form){\n\t\t\tlet fieldTypeValue = $('[name=\"fieldType\"]', form).val(),\n\t\t\t\tfieldNameValue = $('[name=\"fieldName\"]', form).val(),\n\t\t\t\tmessage;\n\t\t\tif (fieldTypeValue == 'Picklist' || fieldTypeValue == 'MultiSelectCombo') {\n\t\t\t\tlet pickListValueElement = $('#pickListValues', form),\n\t\t\t\t\tpickListValuesArray = pickListValueElement.val(),\n\t\t\t\t\tpickListValuesArraySize = pickListValuesArray.length,\n\t\t\t\t\ti,\n\t\t\t\t\tselect2Element,\n\t\t\t\t\tspecialChars = /[\"]/;\n\t\t\t\tif (fieldNameValue.toLowerCase() === 'status' || 'picklist' === fieldNameValue.toLowerCase()) {\n\t\t\t\t\tmessage = app.vtranslate('JS_RESERVED_PICKLIST_NAME');\n\t\t\t\t\t$('[name=\"fieldName\"]', form).validationEngine('showPrompt', message, 'error', 'bottomLeft', true);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tfor (i = 0; i < pickListValuesArraySize; i++) {\n\t\t\t\t\tif (specialChars.test(pickListValuesArray[i])) {\n\t\t\t\t\t\tselect2Element = app.getSelect2ElementFromSelect(pickListValueElement);\n\t\t\t\t\t\tmessage = app.vtranslate('JS_SPECIAL_CHARACTERS') + ' \" ' + app.vtranslate('JS_NOT_ALLOWED');\n\t\t\t\t\t\tselect2Element.validationEngine('showPrompt', message, 'error', 'bottomLeft', true);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tlet lowerCasedpickListValuesArray = $.map(pickListValuesArray, (item, index) => {\n\t\t\t\t\t\treturn item.toLowerCase();\n\t\t\t\t\t}),\n\t\t\t\t\tuniqueLowerCasedpickListValuesArray = $.uniqueSort(lowerCasedpickListValuesArray),\n\t\t\t\t\tuniqueLowerCasedpickListValuesArraySize = uniqueLowerCasedpickListValuesArray.length,\n\t\t\t\t\tarrayDiffSize = pickListValuesArraySize - uniqueLowerCasedpickListValuesArraySize;\n\t\t\t\tif (arrayDiffSize > 0) {\n\t\t\t\t\tselect2Element = app.getSelect2ElementFromSelect(pickListValueElement);\n\t\t\t\t\tmessage = app.vtranslate('JS_DUPLICATES_VALUES_FOUND');\n\t\t\t\t\tselect2Element.validationEngine('showPrompt', message, 'error', 'bottomLeft', true);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (fieldTypeValue == 'Tree' || fieldTypeValue == 'CategoryMultipicklist') {\n\t\t\t\tlet treeListElement = form.find('select.TreeList');\n\t\t\t\tif (treeListElement.val() == '-') {\n\t\t\t\t\tmessage = app.vtranslate('JS_FIELD_CAN_NOT_BE_EMPTY');\n\t\t\t\t\tform.find('.TreeList').validationEngine(\n\t\t\t\t\t\t'showPrompt',\n\t\t\t\t\t\tmessage,\n\t\t\t\t\t\t'error',\n\t\t\t\t\t\t'bottomLeft',\n\t\t\t\t\t\ttrue\n\t\t\t\t\t);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (fieldTypeValue == 'ServerAccess') {\n\t\t\t\tlet serverListElement = form.find('select[name=\"server\"]');\n\t\t\t\tif (serverListElement.val() == '-') {\n\t\t\t\t\tmessage = app.vtranslate('JS_FIELD_CAN_NOT_BE_EMPTY');\n\t\t\t\t\tserverListElement.validationEngine(\n\t\t\t\t\t\t'showPrompt',\n\t\t\t\t\t\tmessage,\n\t\t\t\t\t\t'error',\n\t\t\t\t\t\t'bottomLeft',\n\t\t\t\t\t\ttrue\n\t\t\t\t\t);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\t\t/**\n\t\t * Function to save field and show message\n\t\t */\n\t\tsaveCustomField: function(blockId, form){\n\t\t\tlet saveButton = form.find(':submit');\n\t\t\tthis.addCustomField(blockId, form).done(data => {\n\t\t\t\tlet result = data['result'],\n\t\t\t\t\tparams = {};\n\t\t\t\tif (data['success']) {\n\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\tparams['text'] = app.vtranslate('JS_CUSTOM_FIELD_ADDED');\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t\tthis.showCustomField(result);\n\t\t\t\t} else {\n\t\t\t\t\tmessage = data['error']['message'];\n\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\ttitle:\n\t\t\t\t\t\t\tdata['error']['code'] != 513\n\t\t\t\t\t\t\t\t? form.find('.fieldNameForm').text()\n\t\t\t\t\t\t\t\t: form.find('.fieldLabelForm').text(),\n\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\ttext: data['error']['message']\n\t\t\t\t\t});\n\t\t\t\t\tsaveButton.removeAttr('disabled');\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to create the array of block names list\n\t\t */\n\t\tsetBlocksListArray: function(form) {\n\t\t\tvar thisInstance = this;\n\t\t\tthisInstance.blockNamesList = [];\n\t\t\tvar blocksListSelect = form.find('[name=\"beforeBlockId\"]');\n\t\t\tblocksListSelect.find('option').each(function(index, ele) {\n\t\t\t\tvar option = $(ele);\n\t\t\t\tvar label = option.data('label');\n\t\t\t\tthisInstance.blockNamesList.push(label.toLowerCase());\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to save the custom field details\n\t\t */\n\t\taddCustomField: function(blockId, form) {\n\t\t\tvar modalHeader = form.closest('#' + Window.lastModalId).find('.modal-header h3');\n\t\t\tvar aDeferred = $.Deferred();\n\n\t\t\tmodalHeader.progressIndicator({\n\t\t\t\tsmallLoadingImage: true,\n\t\t\t\timageContainerCss: { display: 'inline', 'margin-left': '18%', position: 'absolute' }\n\t\t\t});\n\n\t\t\tvar params = form.serializeFormData();\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['action'] = 'Field';\n\t\t\tparams['mode'] = 'add';\n\t\t\tparams['blockid'] = blockId;\n\t\t\tparams['sourceModule'] = $('#selectedModuleName').val();\n\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function(data) {\n\t\t\t\t\tmodalHeader.progressIndicator({ mode: 'hide' });\n\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t})\n\t\t\t\t.fail(function(err, error, errorObj) {\n\t\t\t\t\tmodalHeader.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tif (errorObj.responseText !== undefined) {\n\t\t\t\t\t\tapp.showNotify({ title: JSON.parse(errorObj.responseText).error.message, type: 'error' });\n\t\t\t\t\t}\n\t\t\t\t\taDeferred.reject(error);\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/**\n\t\t * Function to register change event for fieldType while adding custom field\n\t\t */\n\t\tregisterFieldTypeChangeEvent(form) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar lengthInput = form.find('[name=\"fieldLength\"]');\n\n\t\t\t//special validators while adding new field\n\t\t\tvar lengthValidator = [{ name: 'DecimalMaxLength' }];\n\t\t\tvar maxLengthValidator = [{ name: 'MaxLength' }];\n\t\t\tvar decimalValidator = [{ name: 'FloatingDigits' }];\n\n\t\t\t//By default add the max length validator\n\t\t\tlengthInput.data('validator', maxLengthValidator);\n\n\t\t\t//register the change event for field types\n\t\t\tform.find('[name=\"fieldType\"]').on('change', function(e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tvar lengthInput = form.find('[name=\"fieldLength\"]');\n\t\t\t\tvar selectedOption = currentTarget.find('option:selected');\n\n\t\t\t\t//hide all the elements like length, decimal,picklist\n\t\t\t\tform.find('.supportedType').addClass('d-none');\n\t\t\t\tif (selectedOption.data('lengthsupported')) {\n\t\t\t\t\tform.find('.lengthsupported').removeClass('d-none');\n\t\t\t\t\tif (!selectedOption.data('nolimitforlength')) {\n\t\t\t\t\t\tlengthInput.data('validator', maxLengthValidator);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlengthInput.data('validator', [{ name: 'WholeNumberGreaterThanZero' }]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (selectedOption.data('decimalsupported')) {\n\t\t\t\t\tvar decimalFieldUi = form.find('.decimalsupported');\n\t\t\t\t\tdecimalFieldUi.removeClass('d-none');\n\n\t\t\t\t\tvar decimalInput = decimalFieldUi.find('[name=\"decimal\"]');\n\t\t\t\t\tvar maxFloatingDigits = selectedOption.data('maxfloatingdigits');\n\n\t\t\t\t\tif (typeof maxFloatingDigits !== 'undefined') {\n\t\t\t\t\t\tdecimalInput.data('validator', decimalValidator);\n\t\t\t\t\t\tlengthInput.data('validator', lengthValidator);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (selectedOption.data('decimalreadonly')) {\n\t\t\t\t\t\tdecimalInput.val(maxFloatingDigits).attr('readonly', true);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdecimalInput.removeAttr('readonly').val('');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (selectedOption.data('predefinedvalueexists')) {\n\t\t\t\t\tvar pickListUi = form.find('.preDefinedValueExists');\n\t\t\t\t\tpickListUi.removeClass('d-none');\n\t\t\t\t}\n\t\t\t\tif (selectedOption.data('picklistoption')) {\n\t\t\t\t\tvar pickListOption = form.find('.picklistOption');\n\t\t\t\t\tpickListOption.removeClass('d-none');\n\t\t\t\t}\n\t\t\t\tif (selectedOption.val() == 'Related1M') {\n\t\t\t\t\tform.find('.preDefinedModuleList').removeClass('d-none');\n\t\t\t\t}\n\t\t\t\tif (selectedOption.val() == 'Tree' || selectedOption.val() == 'CategoryMultipicklist') {\n\t\t\t\t\tform.find('.preDefinedTreeList').removeClass('d-none');\n\t\t\t\t}\n\t\t\t\tif (selectedOption.val() == 'ServerAccess') {\n\t\t\t\t\tform.find('.js-server-access-list').removeClass('d-none');\n\t\t\t\t}\n\t\t\t\tif (selectedOption.val() == 'MultiReferenceValue') {\n\t\t\t\t\tform.find('.preMultiReferenceValue').removeClass('d-none');\n\t\t\t\t\tthisInstance.loadMultiReferenceFields(form);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to add new custom field ui to the list\n\t\t */\n\t\tshowCustomField: function(result) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar contents = $('#layoutEditorContainer').find('.contents');\n\t\t\tvar relatedBlock = contents.find('.block_' + result['blockid']);\n\t\t\tvar fieldCopy = contents.find('.newCustomFieldCopy').clone(true, true);\n\t\t\tvar fieldContainer = fieldCopy.find('div.marginLeftZero.border1px');\n\t\t\tfieldContainer\n\t\t\t\t.addClass('opacity editFields')\n\t\t\t\t.attr('data-field-id', result['id'])\n\t\t\t\t.attr('data-block-id', result['blockid']);\n\t\t\tfieldContainer.find('.deleteCustomField, .saveFieldDetails').attr('data-field-id', result['id']);\n\t\t\tfieldContainer.find('.fieldLabel').html(result['label'] + ' [' + result['name'] + ']');\n\t\t\tfieldContainer\n\t\t\t\t.find('#relatedFieldValue')\n\t\t\t\t.val(result['name'])\n\t\t\t\t.prop('id', 'relatedFieldValue' + result['id']);\n\t\t\tfieldContainer.find('.copyFieldLabel').attr('data-target', 'relatedFieldValue' + result['id']);\n\t\t\tthisInstance.registerCopyClipboard();\n\t\t\tif (!result['customField']) {\n\t\t\t\tfieldContainer.find('.deleteCustomField').remove();\n\t\t\t}\n\t\t\tif ($.inArray(result['type'], ['string', 'phone', 'currency', 'url', 'integer', 'double']) == -1) {\n\t\t\t\tfieldContainer.find('.maskField').remove();\n\t\t\t}\n\t\t\tvar block = relatedBlock.find('.blockFieldsList');\n\t\t\tvar sortable1 = block.find('.js-sort-table1');\n\t\t\tvar length1 = sortable1.children().length;\n\t\t\tvar sortable2 = block.find('.js-sort-table2');\n\t\t\tvar length2 = sortable2.children().length;\n\t\t\t// Deciding where to add the new field\n\t\t\tif (length1 > length2) {\n\t\t\t\tsortable2.append(fieldCopy.removeClass('d-none newCustomFieldCopy'));\n\t\t\t} else {\n\t\t\t\tsortable1.append(fieldCopy.removeClass('d-none newCustomFieldCopy'));\n\t\t\t}\n\t\t\tthisInstance.makeFieldsListSortable();\n\t\t},\n\t\t/**\n\t\t * Function to register click event for add custom block button\n\t\t */\n\t\tregisterAddCustomBlockEvent: function() {\n\t\t\tconst thisInstance = this;\n\t\t\tlet contents = $('#layoutEditorContainer').find('.contents');\n\t\t\tcontents.find('.addCustomBlock').on('click', function(e) {\n\t\t\t\tlet addBlockContainer = contents.find('.addBlockModal').clone(true, true),\n\t\t\t\t\tcallBackFunction = function(data) {\n\t\t\t\t\tdata.find('.addBlockModal')\n\t\t\t\t\t\t.removeClass('d-none')\n\t\t\t\t\t\t.show();\n\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(data.find('select'));\n\t\t\t\t\tlet form = data.find('.addCustomBlockForm');\n\t\t\t\t\tthisInstance.setBlocksListArray(form);\n\t\t\t\t\tlet fieldLabel = form.find('[name=\"label\"]'),\n\t\t\t\t\t\tparams = Object.create(app.validationEngineOptions);\n\t\t\t\t\tparams.onValidationComplete = function(form, valid) {\n\t\t\t\t\t\tif (valid) {\n\t\t\t\t\t\t\tlet formData = form.serializeFormData();\n\t\t\t\t\t\t\tif ($.inArray(formData['label'].toLowerCase(), thisInstance.blockNamesList) == -1) {\n\t\t\t\t\t\t\t\tthisInstance.saveBlockDetails(form).done(function(data) {\n\t\t\t\t\t\t\t\t\tif (data['success']) {\n\t\t\t\t\t\t\t\t\t\tlet result = data['result'];\n\t\t\t\t\t\t\t\t\t\tthisInstance.displayNewCustomBlock(result);\n\t\t\t\t\t\t\t\t\t\tthisInstance.updateNewSequenceForBlocks(result['sequenceList']);\n\t\t\t\t\t\t\t\t\t\tthisInstance.appendNewBlockToBlocksList(result, form);\n\t\t\t\t\t\t\t\t\t\tthisInstance.makeFieldsListSortable();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\t\treturn valid;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tlet result = app.vtranslate('JS_BLOCK_NAME_EXISTS');\n\t\t\t\t\t\t\t\tfieldLabel.validationEngine('showPrompt', result, 'error', 'topLeft', true);\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\tform.validationEngine(params);\n\t\t\t\t\tform.on('submit', function(e) {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t\tapp.showModalWindow(\n\t\t\t\t\taddBlockContainer,\n\t\t\t\t\tfunction(data) {\n\t\t\t\t\t\tcallBackFunction(data);\n\t\t\t\t\t},\n\t\t\t\t\t{ width: '1000px' }\n\t\t\t\t);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to save the new custom block details\n\t\t */\n\t\tsaveBlockDetails: function(form) {\n\t\t\tvar aDeferred = $.Deferred();\n\t\t\tvar progressIndicatorElement = $.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tvar params = form.serializeFormData();\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['sourceModule'] = $('#selectedModuleName').val();\n\t\t\tparams['action'] = 'Block';\n\t\t\tparams['mode'] = 'save';\n\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function(data) {\n\t\t\t\t\tlet response = data.result;\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tif (response && response.success) {\n\t\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\t\ttext: app.vtranslate('JS_CUSTOM_BLOCK_ADDED')\n\t\t\t\t\t\t});\n\t\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\t\ttext: response.message\n\t\t\t\t\t\t});\n\t\t\t\t\t\taDeferred.reject(false);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.fail(function(error) {\n\t\t\t\t\taDeferred.reject(error);\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/**\n\t\t * Function used to display the new custom block ui after save\n\t\t */\n\t\tdisplayNewCustomBlock: function(result) {\n\t\t\tvar contents = $('#layoutEditorContainer').find('.contents');\n\t\t\tvar beforeBlockId = result['beforeBlockId'];\n\t\t\tvar beforeBlock = contents.find('.block_' + beforeBlockId);\n\n\t\t\tvar newBlockCloneCopy = contents.find('.newCustomBlockCopy').clone(true, true);\n\t\t\tnewBlockCloneCopy\n\t\t\t\t.data('blockId', result['id'])\n\t\t\t\t.find('.blockLabel')\n\t\t\t\t.append($('<strong class=\"align-middle\">' + result['label'] + '</strong>'));\n\t\t\tnewBlockCloneCopy.find('.js-block-visibility').data('blockId', result['id']);\n\t\t\tif (result['isAddCustomFieldEnabled']) {\n\t\t\t\tnewBlockCloneCopy.find('.addCustomField').removeClass('d-none');\n\t\t\t}\n\t\t\tbeforeBlock.after(\n\t\t\t\tnewBlockCloneCopy\n\t\t\t\t\t.removeClass('d-none newCustomBlockCopy')\n\t\t\t\t\t.addClass('editFieldsTable block_' + result['id'])\n\t\t\t);\n\n\t\t\tnewBlockCloneCopy.find('.blockFieldsList').sortable({ connectWith: '.blockFieldsList' });\n\t\t},\n\t\t/**\n\t\t * Function to update the sequence for all blocks after adding new Block\n\t\t */\n\t\tupdateNewSequenceForBlocks: function(sequenceList) {\n\t\t\tvar contents = $('#layoutEditorContainer').find('.contents');\n\t\t\t$.each(sequenceList, function(blockId, sequence) {\n\t\t\t\tcontents.find('.block_' + blockId).data('sequence', sequence);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to update the block list with the new block label in the clone container\n\t\t */\n\t\tappendNewBlockToBlocksList: function(result, form) {\n\t\t\tvar contents = $('#layoutEditorContainer').find('.contents');\n\t\t\tvar hiddenAddBlockModel = contents.find('.addBlockModal');\n\t\t\tvar blocksListSelect = hiddenAddBlockModel.find('[name=\"beforeBlockId\"]');\n\t\t\tvar option = $('<option>', {\n\t\t\t\tvalue: result['id'],\n\t\t\t\ttext: result['label']\n\t\t\t});\n\t\t\tblocksListSelect.append(option.attr('data-label', result['label']));\n\t\t},\n\t\t/**\n\t\t * Function to update the block list to remove the deleted custom block label in the clone container\n\t\t */\n\t\tremoveBlockFromBlocksList: function(blockId) {\n\t\t\tvar contents = $('#layoutEditorContainer').find('.contents');\n\t\t\tvar hiddenAddBlockModel = contents.find('.addBlockModal');\n\t\t\tvar blocksListSelect = hiddenAddBlockModel.find('[name=\"beforeBlockId\"]');\n\t\t\tblocksListSelect.find('option[value=\"' + blockId + '\"]').remove();\n\t\t},\n\t\t/**\n\t\t * Function to register the change event for block visibility\n\t\t */\n\t\tregisterBlockVisibilityEvent: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar contents = $('#layoutEditorContainer').find('.contents');\n\t\t\tcontents.on('click', '.js-block-visibility', function(e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tthisInstance.updateBlockStatus(currentTarget);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to save the changed visibility for the block\n\t\t */\n\t\tupdateBlockStatus: function(currentTarget) {\n\t\t\tvar blockStatus = currentTarget.data('visible');\n\t\t\tvar progressIndicatorElement = $.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tvar params = {};\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['sourceModule'] = $('#selectedModuleName').val();\n\t\t\tparams['action'] = 'Block';\n\t\t\tparams['mode'] = 'save';\n\t\t\tparams['blockid'] = currentTarget.data('blockId');\n\t\t\tparams['display_status'] = blockStatus;\n\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function(data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tvar params = {};\n\t\t\t\t\tif (blockStatus == '1') {\n\t\t\t\t\t\tparams['text'] = app.vtranslate('JS_BLOCK_VISIBILITY_SHOW');\n\t\t\t\t\t} else if (blockStatus == '2') {\n\t\t\t\t\t\tparams['text'] = app.vtranslate('JS_BLOCK_VISIBILITY_DYNAMIC');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tparams['text'] = app.vtranslate('JS_BLOCK_VISIBILITY_HIDE');\n\t\t\t\t\t}\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t})\n\t\t\t\t.fail(function(error) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to register the click event for inactive fields list\n\t\t */\n\t\tregisterInactiveFieldsEvent: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar contents = $('#layoutEditorContainer').find('.contents');\n\t\t\tcontents.on('click', '.js-inactive-fields-btn', function(e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tvar currentBlock = currentTarget.closest('.editFieldsTable');\n\t\t\t\tvar blockId = currentBlock.data('blockId');\n\t\t\t\t//If there are no hidden fields, show pnotify\n\t\t\t\tif ($.isEmptyObject(thisInstance.inActiveFieldsList[blockId])) {\n\t\t\t\t\tvar params = {};\n\t\t\t\t\tparams['text'] = app.vtranslate('JS_NO_HIDDEN_FIELDS_EXISTS');\n\t\t\t\t\tparams['type'] = 'error';\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t} else {\n\t\t\t\t\tvar inActiveFieldsContainer = contents.find('.inactiveFieldsModal').clone(true, true);\n\n\t\t\t\t\tvar callBackFunction = function(data) {\n\t\t\t\t\t\tdata.find('.inactiveFieldsModal')\n\t\t\t\t\t\t\t.removeClass('d-none')\n\t\t\t\t\t\t\t.show();\n\t\t\t\t\t\tthisInstance.reactiveFieldsList = [];\n\t\t\t\t\t\tvar form = data.find('.inactiveFieldsForm');\n\t\t\t\t\t\tthisInstance.showHiddenFields(blockId, form);\n\t\t\t\t\t\t//register click event for reactivate button in the inactive fields modal\n\t\t\t\t\t\tform.on('submit', function(e) {\n\t\t\t\t\t\t\tthisInstance.createReactivateFieldslist(blockId, form);\n\t\t\t\t\t\t\tthisInstance.reActivateHiddenFields(currentBlock);\n\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t});\n\t\t\t\t\t};\n\n\t\t\t\t\tapp.showModalWindow(\n\t\t\t\t\t\tinActiveFieldsContainer,\n\t\t\t\t\t\tfunction(data) {\n\t\t\t\t\t\t\tif (typeof callBackFunction == 'function') {\n\t\t\t\t\t\t\t\tcallBackFunction(data);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ width: '1000px' }\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to show the list of inactive fields in the modal\n\t\t */\n\t\tshowHiddenFields: function(blockId, form) {\n\t\t\tvar thisInstance = this;\n\t\t\t$.each(thisInstance.inActiveFieldsList[blockId], function(key, value) {\n\t\t\t\tvar inActiveField = $(\n\t\t\t\t\t'<div class=\"col-md-4 marginLeftZero padding-bottom1per' +\n\t\t\t\t\t\t' checkbox\"><label class=\"\"><input type=\"checkbox\" class=\"inActiveField\"' +\n\t\t\t\t\t\t' value=\"' +\n\t\t\t\t\t\tkey +\n\t\t\t\t\t\t'\" />&nbsp;' +\n\t\t\t\t\t\tvalue +\n\t\t\t\t\t\t'</label></div>'\n\t\t\t\t);\n\t\t\t\tform.find('.inActiveList').append(inActiveField);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to create the list of reactivate fields list\n\t\t */\n\t\tcreateReactivateFieldslist: function(blockId, form) {\n\t\t\tvar thisInstance = this;\n\t\t\tform.find('.inActiveField').each(function(index, domElement) {\n\t\t\t\tvar element = $(domElement);\n\t\t\t\tvar fieldId = element.val();\n\t\t\t\tif (element.is(':checked')) {\n\t\t\t\t\tdelete thisInstance.inActiveFieldsList[blockId][fieldId];\n\t\t\t\t\tthisInstance.reactiveFieldsList.push(fieldId);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to unHide the selected fields in the inactive fields modal\n\t\t */\n\t\treActivateHiddenFields: function(currentBlock) {\n\t\t\tconst thisInstance = this;\n\t\t\tlet progressIndicatorElement = $.progressIndicator({\n\t\t\t\t\tposition: 'html',\n\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\tenabled: true\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t\tparams = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\taction: 'Field',\n\t\t\t\t\tmode: 'unHide',\n\t\t\t\t\tblockId: currentBlock.data('blockId'),\n\t\t\t\t\tfieldIdList: JSON.stringify(thisInstance.reactiveFieldsList)\n\t\t\t\t},\n\t\t\t\tmessageParams = {};\n\t\t\tif (params.fieldIdList !== '[]') {\n\t\t\t\tAppConnector.request(params)\n\t\t\t\t\t.done(function(data) {\n\t\t\t\t\t\tfor (let index in data.result) {\n\t\t\t\t\t\t\tthisInstance.showCustomField(data.result[index]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tmessageParams.text = app.vtranslate('JS_SELECTED_FIELDS_REACTIVATED');\n\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(messageParams);\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function(error) {\n\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tmessageParams.text = app.vtranslate('JS_NO_ITEM_SELECTED');\n\t\t\t\tmessageParams.type = 'error';\n\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\tSettings_Vtiger_Index_Js.showMessage(messageParams);\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Function to register the click event for delete custom block\n\t\t */\n\t\tregisterDeleteCustomBlockEvent: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar contents = $('#layoutEditorContainer').find('.contents');\n\t\t\tcontents.on('click', '.js-delete-custom-block-btn', function(e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tvar table = currentTarget.closest('div.editFieldsTable');\n\t\t\t\tvar blockId = table.data('blockId');\n\n\t\t\t\tvar message = app.vtranslate('JS_LBL_ARE_YOU_SURE_YOU_WANT_TO_DELETE');\n\t\t\t\tVtiger_Helper_Js.showConfirmationBox({ message: message })\n\t\t\t\t\t.done(function(e) {\n\t\t\t\t\t\tthisInstance.deleteCustomBlock(blockId);\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function(error, err) {});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to delete the custom block\n\t\t */\n\t\tdeleteCustomBlock: function(blockId) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar progressIndicatorElement = $.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tvar params = {};\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['action'] = 'Block';\n\t\t\tparams['mode'] = 'delete';\n\t\t\tparams['blockid'] = blockId;\n\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function(data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tvar params = {};\n\t\t\t\t\tlet result = data.result;\n\t\t\t\t\tif (data['success'] && result.success) {\n\t\t\t\t\t\tthisInstance.removeDeletedBlock(blockId);\n\t\t\t\t\t\tthisInstance.removeBlockFromBlocksList(blockId);\n\t\t\t\t\t\tparams['text'] = app.vtranslate('JS_CUSTOM_BLOCK_DELETED');\n\t\t\t\t\t} else if (result && result.message) {\n\t\t\t\t\t\tparams['text'] = result.message;\n\t\t\t\t\t\tparams['type'] = 'error';\n\t\t\t\t\t}\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t})\n\t\t\t\t.fail(function(error, err) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tapp.errorLog(error, err);\n\t\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to remove the deleted custom block from the ui\n\t\t */\n\t\tremoveDeletedBlock: function(blockId) {\n\t\t\tvar contents = $('#layoutEditorContainer').find('.contents');\n\t\t\tvar deletedTable = contents.find('.block_' + blockId);\n\t\t\tdeletedTable.fadeOut('slow').remove();\n\t\t},\n\t\t/**\n\t\t * Function to register the click event for delete custom field\n\t\t */\n\t\tregisterDeleteCustomFieldEvent: function(contents) {\n\t\t\tconst thisInstance = this;\n\t\t\tif (typeof contents === 'undefined') {\n\t\t\t\tcontents = $('#layoutEditorContainer').find('.contents');\n\t\t\t}\n\t\t\tcontents.find('.deleteCustomField').on('click', function(e) {\n\t\t\t\tlet currentTarget = $(e.currentTarget),\n\t\t\t\t\tfieldId = currentTarget.data('fieldId'),\n\t\t\t\t\tmessage = app.vtranslate('JS_LBL_ARE_YOU_SURE_YOU_WANT_TO_DELETE');\n\t\t\t\tVtiger_Helper_Js.showConfirmationBox({ message: message })\n\t\t\t\t\t.done(function(e) {\n\t\t\t\t\t\tthisInstance\n\t\t\t\t\t\t\t.deleteCustomField(fieldId)\n\t\t\t\t\t\t\t.done(function(data) {\n\t\t\t\t\t\t\t\tlet response = data.result;\n\t\t\t\t\t\t\t\tif (response && response.success) {\n\t\t\t\t\t\t\t\t\tlet field = currentTarget.closest('div.editFields'),\n\t\t\t\t\t\t\t\t\t\tblockId = field.data('blockId');\n\t\t\t\t\t\t\t\t\tfield\n\t\t\t\t\t\t\t\t\t\t.parent()\n\t\t\t\t\t\t\t\t\t\t.fadeOut('slow')\n\t\t\t\t\t\t\t\t\t\t.remove();\n\t\t\t\t\t\t\t\t\tthisInstance.reArrangeBlockFields($('#block_' + blockId));\n\t\t\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({text: app.vtranslate('JS_CUSTOM_FIELD_DELETED')});\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({type: 'error', text: response.message});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function(error, err) {});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to delete the custom field\n\t\t */\n\t\tdeleteCustomField: function(fieldId) {\n\t\t\tvar aDeferred = $.Deferred();\n\t\t\tvar progressIndicatorElement = $.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tvar params = {};\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['action'] = 'Field';\n\t\t\tparams['mode'] = 'delete';\n\t\t\tparams['fieldid'] = fieldId;\n\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function(data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t})\n\t\t\t\t.fail(function(error) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\taDeferred.reject();\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/**\n\t\t * Function to register the cahnge event for mandatory & default checkboxes in edit field details\n\t\t */\n\t\tregisterFieldDetailsChange: function(contents) {\n\t\t\tcontents.find('[name=\"mandatory\"]').on('change', function(e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tif (currentTarget.attr('readonly') !== 'readonly') {\n\t\t\t\t\tvar form = currentTarget.closest('.fieldDetailsForm');\n\t\t\t\t\tvar quickcreateEle = form\n\t\t\t\t\t\t.find('[name=\"quickcreate\"]')\n\t\t\t\t\t\t.filter(':checkbox')\n\t\t\t\t\t\t.not('.optionDisabled');\n\t\t\t\t\tvar presenceEle = form\n\t\t\t\t\t\t.find('[name=\"presence\"]')\n\t\t\t\t\t\t.filter(':checkbox')\n\t\t\t\t\t\t.not('.optionDisabled');\n\t\t\t\t\tif (currentTarget.is(':checked')) {\n\t\t\t\t\t\tquickcreateEle.attr('checked', true).attr('readonly', 'readonly');\n\t\t\t\t\t\tpresenceEle.attr('checked', true).attr('readonly', 'readonly');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tquickcreateEle.removeAttr('readonly');\n\t\t\t\t\t\tpresenceEle.removeAttr('readonly');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tcontents.find('[name=\"defaultvalue\"],[name=\"header_field\"]').on('change', function(e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tvar defaultValueUi = currentTarget.closest('.checkbox').find('.js-toggle-hide');\n\t\t\t\tif (currentTarget.is(':checked')) {\n\t\t\t\t\tdefaultValueUi.removeClass('zeroOpacity');\n\t\t\t\t} else {\n\t\t\t\t\tdefaultValueUi.addClass('zeroOpacity');\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to register the click event for related modules list tab\n\t\t */\n\t\trelatedModulesTabClickEvent: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar contents = $('#layoutEditorContainer').find('.contents');\n\t\t\tvar relatedContainer = contents.find('#relatedTabOrder');\n\t\t\tvar relatedTab = contents.find('.relatedListTab');\n\t\t\trelatedTab.on('click', function() {\n\t\t\t\tif (relatedContainer.find('.relatedTabModulesList').length > 0) {\n\t\t\t\t} else {\n\t\t\t\t\tthisInstance.showRelatedTabModulesList(relatedContainer);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to show the related tab modules list in the tab\n\t\t */\n\t\tshowRelatedTabModulesList: function(relatedContainer) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar params = {};\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['sourceModule'] = $('#selectedModuleName').val();\n\t\t\tparams['view'] = 'Index';\n\t\t\tparams['mode'] = 'showRelatedListLayout';\n\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function(data) {\n\t\t\t\t\trelatedContainer.html(data);\n\t\t\t\t\tif ($(data).find('.relatedListContainer').length > 0) {\n\t\t\t\t\t\tthisInstance.makeRelatedModuleSortable();\n\t\t\t\t\t\tthisInstance.registerRelatedListEvents();\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.fail(function(error) {});\n\t\t},\n\t\t/**\n\t\t * Function to get the respective module layout editor through pjax\n\t\t */\n\t\tgetModuleLayoutEditor: function(selectedModule) {\n\t\t\tvar aDeferred = $.Deferred();\n\t\t\tvar progressIndicatorElement = $.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tvar params = {};\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['view'] = 'Index';\n\t\t\tparams['sourceModule'] = selectedModule;\n\n\t\t\tAppConnector.requestPjax(params)\n\t\t\t\t.done(function(data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t})\n\t\t\t\t.fail(function(error) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\taDeferred.reject();\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\tgetRelModuleLayoutEditor: function(selectedModule) {\n\t\t\tvar aDeferred = $.Deferred();\n\t\t\tvar progressIndicatorElement = $.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tvar params = {};\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['view'] = 'Index';\n\t\t\tparams['mode'] = 'showRelatedListLayout';\n\t\t\tparams['sourceModule'] = selectedModule;\n\n\t\t\tAppConnector.requestPjax(params)\n\t\t\t\t.done(function(data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t})\n\t\t\t\t.fail(function(error) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\taDeferred.reject();\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/**\n\t\t * Function to register the change event for layout editor modules list\n\t\t */\n\t\tregisterModulesChangeEvent: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar container = $('#layoutEditorContainer');\n\t\t\tvar contentsDiv = container.closest('.contentsDiv');\n\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(container.find('[name=\"layoutEditorModules\"]'));\n\n\t\t\tcontainer.on('change', '[name=\"layoutEditorModules\"]', function(e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tvar selectedModule = currentTarget.val();\n\t\t\t\tthisInstance.getModuleLayoutEditor(selectedModule).done(function(data) {\n\t\t\t\t\tcontentsDiv.html(data);\n\t\t\t\t\tthisInstance.registerEvents();\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterRelModulesChangeEvent: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar container = $('#layoutEditorContainer');\n\t\t\tvar contentsDiv = container.closest('.contentsDiv');\n\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(container.find('[name=\"layoutEditorRelModules\"]'));\n\n\t\t\tcontainer.on('change', '[name=\"layoutEditorRelModules\"]', function(e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tvar selectedModule = currentTarget.val();\n\t\t\t\tthisInstance.getRelModuleLayoutEditor(selectedModule).done(function(data) {\n\t\t\t\t\tcontentsDiv.html(data);\n\t\t\t\t\tthisInstance.registerEvents();\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tlockCheckbox: function(contents) {\n\t\t\tcontents.on('change', ':checkbox', function(e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tif (currentTarget.attr('readonly') === 'readonly') {\n\t\t\t\t\tvar status = $(e.currentTarget).is(':checked');\n\t\t\t\t\tif (!status) {\n\t\t\t\t\t\t$(e.currentTarget).prop('checked', true);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$(e.currentTarget).prop('checked', false);\n\t\t\t\t\t}\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterEditFieldDetailsClick: function(contents) {\n\t\t\tvar thisInstance = this;\n\t\t\tif (typeof contents === 'undefined') {\n\t\t\t\tcontents = $('#layoutEditorContainer').find('.contents');\n\t\t\t}\n\t\t\tcontents.find('.editFieldDetails').on('click', function(e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tvar fieldRow = currentTarget.closest('div.editFields');\n\t\t\t\tvar fieldId = fieldRow.data('fieldId');\n\t\t\t\tvar block = fieldRow.closest('.editFieldsTable');\n\t\t\t\tvar blockId = block.data('blockId');\n\t\t\t\tapp.showModalWindow({\n\t\t\t\t\turl:\n\t\t\t\t\t\t'index.php?parent=Settings&module=LayoutEditor&view=EditField&fieldId=' +\n\t\t\t\t\t\tfieldRow.data('fieldId'),\n\t\t\t\t\tcb: function(modalContainer) {\n\t\t\t\t\t\tthisInstance.registerFieldDetailsChange(modalContainer);\n\t\t\t\t\t\tthisInstance.lockCheckbox(modalContainer);\n\t\t\t\t\t\tthisInstance.registerVaribleToParsers(modalContainer);\n\t\t\t\t\t\tapp.registerEventForClockPicker(modalContainer.find('.clockPicker'));\n\t\t\t\t\t\tmodalContainer.find('[data-inputmask]').inputmask();\n\t\t\t\t\t},\n\t\t\t\t\tsendByAjaxCb: (formData, response) => {\n\t\t\t\t\t\tif (!response.success) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({\n\t\t\t\t\t\t\ttext: app.vtranslate('JS_FIELD_DETAILS_SAVED')\n\t\t\t\t\t\t});\n\t\t\t\t\t\tlet result = response['result'];\n\t\t\t\t\t\tlet fieldLabel = fieldRow.find('.fieldLabel');\n\t\t\t\t\t\tif (result['presence'] === '1') {\n\t\t\t\t\t\t\tfieldRow\n\t\t\t\t\t\t\t\t.parent()\n\t\t\t\t\t\t\t\t.fadeOut('slow')\n\t\t\t\t\t\t\t\t.remove();\n\t\t\t\t\t\t\tif ($.isEmptyObject(thisInstance.inActiveFieldsList[blockId])) {\n\t\t\t\t\t\t\t\tif (thisInstance.inActiveFieldsList.length === 0) {\n\t\t\t\t\t\t\t\t\tthisInstance.inActiveFieldsList = {};\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tthisInstance.inActiveFieldsList[blockId] = {};\n\t\t\t\t\t\t\t\tthisInstance.inActiveFieldsList[blockId][fieldId] = result['label'];\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthisInstance.inActiveFieldsList[blockId][fieldId] = result['label'];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthisInstance.reArrangeBlockFields(block);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (result['mandatory']) {\n\t\t\t\t\t\t\tif (fieldLabel.find('.redColor').length === 0) {\n\t\t\t\t\t\t\t\tfieldRow.find('.fieldLabel').append($('<span class=\"redColor\">*</span>'));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tfieldRow\n\t\t\t\t\t\t\t\t.find('.fieldLabel')\n\t\t\t\t\t\t\t\t.find('.redColor')\n\t\t\t\t\t\t\t\t.remove();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterVaribleToParsers: function(container) {\n\t\t\tcontainer.find('.configButton').on('click', function(e) {\n\t\t\t\tcontainer.find('.js-toggle-hide .js-base-element').each(function(n, e) {\n\t\t\t\t\tvar currentElement = $(e);\n\t\t\t\t\tif (currentElement.hasClass('d-none')) {\n\t\t\t\t\t\tcurrentElement.find('input,select').prop('disabled', false);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcurrentElement.find('input,select').prop('disabled', true);\n\t\t\t\t\t}\n\t\t\t\t\tcurrentElement.toggleClass('d-none');\n\t\t\t\t});\n\t\t\t});\n\t\t\tcontainer.find('.varibleToParsers').on('click', function(e) {\n\t\t\t\tlet element = $(e.currentTarget);\n\t\t\t\tlet container = element.closest('.js-base-element');\n\t\t\t\tlet input = container.find('[name=\"' + container.data('name') + '\"]');\n\t\t\t\tlet fieldId = element\n\t\t\t\t\t.closest('form')\n\t\t\t\t\t.find('[name=\"fieldid\"]')\n\t\t\t\t\t.val();\n\t\t\t\tlet id = 'varibleToParsersModal';\n\t\t\t\tapp.showModalWindow({\n\t\t\t\t\tid: id,\n\t\t\t\t\turl:\n\t\t\t\t\t\t'index.php?parent=Settings&module=LayoutEditor&view=VaribleToParsers&fieldId=' +\n\t\t\t\t\t\tfieldId +\n\t\t\t\t\t\t'&defaultValue=' +\n\t\t\t\t\t\tinput.val(),\n\t\t\t\t\tcb: function(modalContainer) {\n\t\t\t\t\t\tmodalContainer.find('[name=\"saveButton\"]').on('click', function() {\n\t\t\t\t\t\t\tinput.val(modalContainer.find('select').val());\n\t\t\t\t\t\t\tapp.hideModalWindow(null, id);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t\tApp.Fields.Tree.register(container);\n\t\t},\n\t\t/**\n\t\t * Function to register all the events for blocks\n\t\t */\n\t\tregisterBlockEvents: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tthisInstance.makeBlocksListSortable();\n\t\t\tthisInstance.registerAddCustomFieldEvent();\n\t\t\tthisInstance.registerBlockVisibilityEvent();\n\t\t\tthisInstance.registerInactiveFieldsEvent();\n\t\t\tthisInstance.registerDeleteCustomBlockEvent();\n\t\t},\n\t\t/**\n\t\t * Function to register all the events for fields\n\t\t */\n\t\tregisterFieldEvents: function(contents) {\n\t\t\tvar thisInstance = this;\n\t\t\tif (typeof contents === 'undefined') {\n\t\t\t\tcontents = $('#layoutEditorContainer').find('.contents');\n\t\t\t}\n\t\t\tApp.Fields.Date.register(contents);\n\t\t\tApp.Fields.Picklist.changeSelectElementView(contents);\n\t\t\tthisInstance.makeFieldsListSortable();\n\t\t\tthisInstance.registerDeleteCustomFieldEvent(contents);\n\t\t\tthisInstance.registerEditFieldDetailsClick(contents);\n\n\t\t\tcontents.find(':checkbox').on('change', function(e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tif (currentTarget.attr('readonly') == 'readonly') {\n\t\t\t\t\tvar status = $(e.currentTarget).is(':checked');\n\t\t\t\t\tif (!status) {\n\t\t\t\t\t\t$(e.currentTarget).prop('checked', true);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$(e.currentTarget).prop('checked', false);\n\t\t\t\t\t}\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to register switch\n\t\t */\n\t\tregisterSwitch: function() {\n\t\t\tvar container = $('#layoutEditorContainer');\n\t\t\tcontainer.find('.js-switch--inventory').on('click', function(event) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tvar switchBtn = $(event.currentTarget);\n\t\t\t\tvar state = switchBtn.data('value');\n\t\t\t\tvar message = app.vtranslate('JS_EXTENDED_MODULE');\n\t\t\t\tVtiger_Helper_Js.showConfirmationBox({\n\t\t\t\t\tmessage: '<span class=\"message-medium\">' + message + '</span>',\n\t\t\t\t\tclassName: 'test'\n\t\t\t\t}).done(function(e) {\n\t\t\t\t\tlet progress = $.progressIndicator({\n\t\t\t\t\t\tmessage: app.vtranslate('JS_SAVE_LOADER_INFO'),\n\t\t\t\t\t\tposition: 'html',\n\t\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\t\tenabled: true\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tvar params = {};\n\t\t\t\t\tparams['sourceModule'] = container.find('[name=\"layoutEditorModules\"]').val();\n\t\t\t\t\tparams['type'] = state;\n\t\t\t\t\tapp.saveAjax('changeModuleType', null, params).done(function(data) {\n\t\t\t\t\t\tif (data.result) {\n\t\t\t\t\t\t\tif (data.result.success) {\n\t\t\t\t\t\t\t\tcontainer.find('.js-switch--inventory').prop('disabled', true);\n\t\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({ type: 'success', text: data.result.message });\n\t\t\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to adding inventory field\n\t\t */\n\t\tregisterAddInventoryField() {\n\t\t\tconst thisInstance = this;\n\t\t\tlet container = thisInstance.getInventoryViewLayout();\n\t\t\tcontainer.find('.addInventoryField').on('click', e => {\n\t\t\t\tlet currentTarget = $(e.currentTarget);\n\t\t\t\tlet selectedModule = $('#layoutEditorContainer')\n\t\t\t\t\t.find('[name=\"layoutEditorModules\"]')\n\t\t\t\t\t.val();\n\t\t\t\tlet blockId = currentTarget.closest('.inventoryBlock').data('block-id');\n\t\t\t\tconst progress = $.progressIndicator();\n\t\t\t\tapp.showModalWindow(\n\t\t\t\t\tnull,\n\t\t\t\t\t'index.php?module=LayoutEditor&parent=Settings&view=CreateInventoryFields&mode=step1&sourceModule=' +\n\t\t\t\t\t\tselectedModule +\n\t\t\t\t\t\t'&block=' +\n\t\t\t\t\t\tblockId,\n\t\t\t\t\tmodalContainer => {\n\t\t\t\t\t\tapp.showScrollBar(modalContainer.find('.well'), {\n\t\t\t\t\t\t\theight: '300px'\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthisInstance.registerStep1(modalContainer, blockId);\n\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to editing inventory field\n\t\t */\n\t\tregisterEditInventoryField: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar container = thisInstance.getInventoryViewLayout();\n\t\t\tcontainer.find('.editInventoryField').on('click', function(e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tvar selectedModule = $('#layoutEditorContainer')\n\t\t\t\t\t.find('[name=\"layoutEditorModules\"]')\n\t\t\t\t\t.val();\n\t\t\t\tvar blockId = currentTarget.closest('.inventoryBlock').data('block-id');\n\t\t\t\tvar editField = currentTarget.closest('.editFields');\n\t\t\t\tvar progress = $.progressIndicator();\n\t\t\t\tapp.showModalWindow(\n\t\t\t\t\tnull,\n\t\t\t\t\t'index.php?module=LayoutEditor&parent=Settings&view=CreateInventoryFields&mode=step2&sourceModule=' +\n\t\t\t\t\t\tselectedModule +\n\t\t\t\t\t\t'&type=' +\n\t\t\t\t\t\teditField.data('type') +\n\t\t\t\t\t\t'&fieldName=' +\n\t\t\t\t\t\teditField.data('name'),\n\t\t\t\t\tfunction(container) {\n\t\t\t\t\t\tapp.showPopoverElementView(container.find('.js-help-info'));\n\t\t\t\t\t\tthisInstance.registerStep2(container, blockId);\n\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to adding inventory field first step\n\t\t *\n\t\t * @param {jQuery} container\n\t\t * @param {int} blockId\n\t\t */\n\t\tregisterStep1(container, blockId) {\n\t\t\tconst thisInstance = this;\n\t\t\tcontainer.find('.js-next-button').on('click', e => {\n\t\t\t\tlet selectedModule = $('#layoutEditorContainer')\n\t\t\t\t\t.find('[name=\"layoutEditorModules\"]')\n\t\t\t\t\t.val();\n\t\t\t\tlet type = container.find('select.type').val();\n\t\t\t\tif (type === null) {\n\t\t\t\t\tcontainer\n\t\t\t\t\t\t.find('select.type')\n\t\t\t\t\t\t.validationEngine('showPrompt', app.vtranslate('JS_REQUIRED_FIELD'), 'error', 'topRight', true);\n\t\t\t\t} else {\n\t\t\t\t\tapp.hideModalWindow(() => {\n\t\t\t\t\t\tconst progress = $.progressIndicator({\n\t\t\t\t\t\t\tposition: 'html',\n\t\t\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\t\t\tenabled: true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tapp.showModalWindow(\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t'index.php?module=LayoutEditor&parent=Settings&view=CreateInventoryFields&mode=step2&sourceModule=' +\n\t\t\t\t\t\t\t\tselectedModule +\n\t\t\t\t\t\t\t\t'&type=' +\n\t\t\t\t\t\t\t\ttype,\n\t\t\t\t\t\t\tmodalContainer => {\n\t\t\t\t\t\t\t\tthisInstance.registerStep2(modalContainer, blockId);\n\t\t\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to save inventory field\n\t\t */\n\t\tregisterStep2: function(container, blockId) {\n\t\t\tlet thisInstance = this;\n\t\t\tlet containerInventory = thisInstance.getInventoryViewLayout();\n\t\t\tlet form = container.find('form');\n\t\t\tlet selectedModule = $('#layoutEditorContainer')\n\t\t\t\t.find('[name=\"layoutEditorModules\"]')\n\t\t\t\t.val();\n\t\t\tform.validationEngine(app.validationEngineOptions);\n\t\t\tform.on('submit', function(e) {\n\t\t\t\tlet formData = form.serializeFormData();\n\t\t\t\tlet paramsName = container.find('#params');\n\t\t\t\tif (paramsName.length) {\n\t\t\t\t\tparamsName = JSON.parse(paramsName.val());\n\t\t\t\t\tlet params = {};\n\t\t\t\t\tfor (let i in formData) {\n\t\t\t\t\t\tif ($.inArray(i, paramsName) != -1) {\n\t\t\t\t\t\t\tlet value = formData[i];\n\t\t\t\t\t\t\tif (i === 'modules' && typeof value === 'string') {\n\t\t\t\t\t\t\t\tvalue = [value];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tparams[i] = value;\n\t\t\t\t\t\t\tdelete formData[i];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tformData.params = JSON.stringify(params);\n\t\t\t\t}\n\t\t\t\tlet errorExists = form.validationEngine('validate');\n\t\t\t\tif (errorExists != false) {\n\t\t\t\t\tformData.block = blockId;\n\t\t\t\t\tformData.sourceModule = selectedModule;\n\t\t\t\t\tapp.saveAjax('saveInventoryField', null, formData).done(function(data) {\n\t\t\t\t\t\tlet result = data.result,\n\t\t\t\t\t\t\tsuccess = data.success;\n\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\tif (success && result && result.edit) {\n\t\t\t\t\t\t\tlet liElement = containerInventory.find('[data-id=\"' + result.data.id + '\"]');\n\t\t\t\t\t\t\tliElement.find('.fieldLabel').text(result.data.translate);\n\t\t\t\t\t\t} else if (success && result) {\n\t\t\t\t\t\t\tlet newLiElement = containerInventory.find('.newLiElement').clone(true, true);\n\t\t\t\t\t\t\tnewLiElement\n\t\t\t\t\t\t\t\t.removeClass('d-none newLiElement')\n\t\t\t\t\t\t\t\t.find('.editFields')\n\t\t\t\t\t\t\t\t.attr('data-id', result.data.id)\n\t\t\t\t\t\t\t\t.attr('data-sequence', result.data.sequence)\n\t\t\t\t\t\t\t\t.attr('data-name', result.data.columnName)\n\t\t\t\t\t\t\t\t.attr('data-type', result.data.invtype)\n\t\t\t\t\t\t\t\t.find('.fieldLabel')\n\t\t\t\t\t\t\t\t.text(result.data.translate);\n\t\t\t\t\t\t\tcontainerInventory\n\t\t\t\t\t\t\t\t.find('[data-block-id=\"' + result.data.block + '\"] .connectedSortable')\n\t\t\t\t\t\t\t\t.append(newLiElement);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tVtiger_Helper_Js.showPnotify(app.vtranslate('JS_ERROR'));\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t\tcontainer.find('form').on('submit', function(event) {\n\t\t\t\tevent.preventDefault();\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to register click event for save button of fields sequence\n\t\t */\n\t\tregisterInventoryFieldSequenceSaveClick: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar containerInventory = thisInstance.getInventoryViewLayout();\n\t\t\tvar selectedModule = $('#layoutEditorContainer')\n\t\t\t\t.find('[name=\"layoutEditorModules\"]')\n\t\t\t\t.val();\n\t\t\tcontainerInventory.on('click', '.saveFieldSequence', function(e) {\n\t\t\t\tvar button = $(e.currentTarget);\n\t\t\t\tvar target = button.closest('.inventoryBlock');\n\t\t\t\tvar fieldId = [];\n\t\t\t\ttarget.find('.editFields').each(function() {\n\t\t\t\t\tfieldId.push($(this).data('id'));\n\t\t\t\t});\n\t\t\t\tapp.saveAjax('saveSequence', null, { sourceModule: selectedModule, ids: fieldId }).done(function(data) {\n\t\t\t\t\tbutton.addClass('invisible');\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * removing elements in advanced blocks\n\t\t */\n\t\tregisterDeleteInventoryField: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar container = thisInstance.getInventoryViewLayout();\n\t\t\tvar selectedModule = $('#layoutEditorContainer')\n\t\t\t\t.find('[name=\"layoutEditorModules\"]')\n\t\t\t\t.val();\n\t\t\tcontainer.find('.deleteInventoryField').on('click', function(e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tvar liElement = currentTarget.closest('li');\n\t\t\t\tvar message = app.vtranslate('JS_DELETE_INVENTORY_CONFIRMATION');\n\t\t\t\tVtiger_Helper_Js.showConfirmationBox({ message: message })\n\t\t\t\t\t.done(function(e) {\n\t\t\t\t\t\tvar progressIndicatorElement = $.progressIndicator({\n\t\t\t\t\t\t\tmessage: app.vtranslate('JS_SAVE_LOADER_INFO'),\n\t\t\t\t\t\t\tposition: 'html',\n\t\t\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\t\t\tenabled: true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tvar editFields = liElement.find('.editFields');\n\t\t\t\t\t\tapp.saveAjax('delete', null, {\n\t\t\t\t\t\t\tsourceModule: selectedModule,\n\t\t\t\t\t\t\tfieldName: editFields.data('name')\n\t\t\t\t\t\t}).done(function(response) {\n\t\t\t\t\t\t\tlet param = {};\n\t\t\t\t\t\t\tif (response.result) {\n\t\t\t\t\t\t\t\tliElement.remove();\n\t\t\t\t\t\t\t\tparam = { type: 'success', text: app.vtranslate('JS_SAVE_CHANGES') };\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tparam = { type: 'error', text: app.vtranslate('JS_ERROR') };\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(param);\n\t\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t});\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function(error, err) {\n\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Loading list of fields for a related module\n\t\t */\n\t\tloadMultiReferenceFields: function(form) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar module = form.find('[name=\"MRVModule\"]').val();\n\t\t\tform.find('[name=\"MRVField\"],[name=\"MRVFilterField\"]').select2('destroy');\n\t\t\tform.find('[name=\"MRVField\"]').html(thisInstance.cacheMRVField.html());\n\t\t\tform.find('[name=\"MRVField\"] optgroup').each(function(index) {\n\t\t\t\tif ($(this).data('module') != module) {\n\t\t\t\t\t$(this).remove();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tform.find('[name=\"MRVFilterField\"]').html(thisInstance.cacheMRVFilter.html());\n\t\t\tform.find('[name=\"MRVFilterField\"] option').each(function(index) {\n\t\t\t\tif ($(this).data('module') != module) {\n\t\t\t\t\t$(this).remove();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(form.find('[name=\"MRVField\"],[name=\"MRVFilterField\"]'), {\n\t\t\t\twidth: '100%'\n\t\t\t});\n\t\t},\n\t\tcacheMRVField: false,\n\t\tcacheMRVFilter: false,\n\t\t/**\n\t\t * Loading list of fields for a related module\n\t\t */\n\t\tregisterMultiReferenceFieldsChangeEvent: function(form) {\n\t\t\tvar thisInstance = this;\n\t\t\tthisInstance.cacheMRVField = form.find('[name=\"MRVField\"]').clone(true, true);\n\t\t\tthisInstance.cacheMRVFilter = form.find('[name=\"MRVFilterField\"]').clone(true, true);\n\n\t\t\tform.find('[name=\"MRVModule\"]').on('change', function(e) {\n\t\t\t\tthisInstance.loadMultiReferenceFields(form);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Loading list of fields for a related module\n\t\t */\n\t\tregisterMultiReferenceFilterFieldChangeEvent: function(form) {\n\t\t\tform.find('[name=\"MRVFilterField\"]').on('change', function(e) {\n\t\t\t\tvar params = {};\n\t\t\t\tparams['module'] = app.getModuleName();\n\t\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\t\tparams['action'] = 'Field';\n\t\t\t\tparams['mode'] = 'getPicklist';\n\t\t\t\tparams['rfield'] = form.find('[name=\"MRVFilterField\"]').val();\n\t\t\t\tparams['rmodule'] = form.find('[name=\"MRVModule\"]').val();\n\n\t\t\t\tform.find('[name=\"MRVFilterValue\"]').select2('destroy');\n\t\t\t\tform.find('[name=\"MRVFilterValue\"] option').remove();\n\t\t\t\tAppConnector.request(params).done(function(data) {\n\t\t\t\t\t$.each(data.result, function(index, value) {\n\t\t\t\t\t\tform.find('[name=\"MRVFilterValue\"]').append(\n\t\t\t\t\t\t\t$('<option>')\n\t\t\t\t\t\t\t\t.val(index)\n\t\t\t\t\t\t\t\t.html(value)\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(form.find('[name=\"MRVFilterValue\"]'), { width: '100%' });\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register label copy\n\t\t */\n\t\tregisterCopyClipboard: function() {\n\t\t\tnew ClipboardJS('.copyFieldLabel', {\n\t\t\t\ttext: function(trigger) {\n\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\ttext: app.vtranslate('JS_NOTIFY_COPY_TEXT'),\n\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t});\n\t\t\t\t\treturn $('#layoutEditorContainer')\n\t\t\t\t\t\t.find('#' + trigger.getAttribute('data-target'))\n\t\t\t\t\t\t.val();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Context help\n\t\t * @param {jQuery} container\n\t\t */\n\t\tregisterContextHelp: function() {\n\t\t\t$(document).on('click', '.js-context-help', function(e) {\n\t\t\t\tconst customConfig = {\n\t\t\t\t\ttoolbar: 'Min'\n\t\t\t\t};\n\t\t\t\tconst element = $(e.currentTarget);\n\t\t\t\tlet progressInstance = $.progressIndicator({\n\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\tenabled: true\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tAppConnector.request({\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\tview: 'HelpInfo',\n\t\t\t\t\tfield: element.data('field-id')\n\t\t\t\t}).done(function(data) {\n\t\t\t\t\tapp.showModalWindow(data, modalContainer => {\n\t\t\t\t\t\tprogressInstance.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tapp.showPopoverElementView(modalContainer.find('.js-help-info'));\n\t\t\t\t\t\tnew App.Fields.Text.Editor(modalContainer.find('.js-context-area:visible'), customConfig);\n\t\t\t\t\t\tmodalContainer.find('.js-lang').on('change', function(e) {\n\t\t\t\t\t\t\tlet previous = modalContainer.find('.js-editor:not([disabled])');\n\t\t\t\t\t\t\tApp.Fields.Text.destroyEditor(previous);\n\t\t\t\t\t\t\tprevious.closest('.js-context-block').addClass('d-none');\n\t\t\t\t\t\t\tprevious.prop('disabled', true);\n\t\t\t\t\t\t\tlet element = $(e.currentTarget).val();\n\t\t\t\t\t\t\tlet textArea = modalContainer.find('#' + element + '.js-context-area');\n\t\t\t\t\t\t\ttextArea.prop('disabled', false);\n\t\t\t\t\t\t\ttextArea.closest('.js-context-block').removeClass('d-none');\n\t\t\t\t\t\t\tApp.Fields.Text.destroyEditor(textArea);\n\t\t\t\t\t\t\tmodalContainer.find('.js-help-info').attr('data-content', textArea.val());\n\t\t\t\t\t\t\tnew App.Fields.Text.Editor(textArea, customConfig);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tmodalContainer.find('form').on('submit', function(e) {\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\tvar form = $(e.currentTarget);\n\t\t\t\t\t\t\tvar params = form.serializeFormData();\n\t\t\t\t\t\t\tif (typeof params.views === 'undefined') {\n\t\t\t\t\t\t\t\tparams.views = form.find('[name=\"views\"]').val();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tapp.saveAjax('contextHelp', '', params).done(function(data) {\n\t\t\t\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\t\t\t\ttype: 'success',\n\t\t\t\t\t\t\t\t\ttext: app.vtranslate('JS_SAVE_CHANGES')\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tlet prefix = form.find('.js-lang').val();\n\t\t\t\t\t\t\t\tlet textArea = form.find('#' + prefix + '.js-context-area');\n\t\t\t\t\t\t\t\tform.find('.js-help-info').attr('data-content', textArea.val());\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * register events for layout editor\n\t\t */\n\t\tregisterEvents: function() {\n\t\t\tvar thisInstance = this;\n\n\t\t\tthisInstance.registerBlockEvents();\n\t\t\tthisInstance.registerFieldEvents();\n\t\t\tthisInstance.setInactiveFieldsList();\n\t\t\tthisInstance.registerAddCustomBlockEvent();\n\n\t\t\tthisInstance.relatedModulesTabClickEvent();\n\t\t\tthisInstance.registerModulesChangeEvent();\n\t\t\tthisInstance.registerRelModulesChangeEvent();\n\n\t\t\tif (1 === $('#relatedTabOrder').length) {\n\t\t\t\tthisInstance.registerRelatedListEvents();\n\t\t\t\tthisInstance.makeRelatedModuleSortable();\n\t\t\t}\n\n\t\t\tthisInstance.registerSwitch();\n\t\t\tthisInstance.registerAddInventoryField();\n\t\t\tthisInstance.registerEditInventoryField();\n\t\t\tthisInstance.registerInventoryFieldSequenceSaveClick();\n\t\t\tthisInstance.registerDeleteInventoryField();\n\t\t\tthis.registerFieldSequenceSaveClick();\n\t\t},\n\t\tregisterBasicEvents: function() {\n\t\t\tvar container = $('#layoutEditorContainer');\n\t\t\tthis.registerEvents();\n\t\t\tthis.registerCopyClipboard();\n\t\t\tthis.registerContextHelp(container);\n\t\t}\n\t}\n);\n\n$(document).ready(function() {\n\tvar instance = new Settings_LayoutEditor_Js();\n\tinstance.registerBasicEvents();\n});\n\nVtiger_WholeNumberGreaterThanZero_Validator_Js(\n\t'Vtiger_FloatingDigits_Validator_Js',\n\t{\n\t\t/**\n\t\t *Function which invokes field validation\n\t\t *@param accepts field element as parameter\n\t\t * @return error if validation fails true on success\n\t\t */\n\t\tinvokeValidation: function(field, rules, i, options) {\n\t\t\tvar rangeInstance = new Vtiger_FloatingDigits_Validator_Js();\n\t\t\trangeInstance.setElement(field);\n\t\t\tvar response = rangeInstance.validate();\n\t\t\tif (response != true) {\n\t\t\t\treturn rangeInstance.getError();\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t/**\n\t\t * Function to validate the decimals length\n\t\t * @return true if validation is successfull\n\t\t * @return false if validation error occurs\n\t\t */\n\t\tvalidate: function() {\n\t\t\tvar response = this._super();\n\t\t\tif (response != true) {\n\t\t\t\treturn response;\n\t\t\t} else {\n\t\t\t\tvar fieldValue = this.getFieldValue();\n\t\t\t\tif (fieldValue < 2 || fieldValue > 5) {\n\t\t\t\t\tvar errorInfo = app.vtranslate('JS_PLEASE_ENTER_NUMBER_IN_RANGE_2TO5');\n\t\t\t\t\tthis.setError(errorInfo);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tvar specialChars = /^[+]/;\n\t\t\t\tif (specialChars.test(fieldValue)) {\n\t\t\t\t\tvar error = app.vtranslate('JS_CONTAINS_ILLEGAL_CHARACTERS');\n\t\t\t\t\tthis.setError(error);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n);\n\nVtiger_WholeNumberGreaterThanZero_Validator_Js(\n\t'Vtiger_DecimalMaxLength_Validator_Js',\n\t{\n\t\t/**\n\t\t *Function which invokes field validation\n\t\t *@param accepts field element as parameter\n\t\t * @return error if validation fails true on success\n\t\t */\n\t\tinvokeValidation: function(field, rules, i, options) {\n\t\t\tvar rangeInstance = new Vtiger_DecimalMaxLength_Validator_Js();\n\t\t\trangeInstance.setElement(field);\n\t\t\tvar response = rangeInstance.validate();\n\t\t\tif (response != true) {\n\t\t\t\treturn rangeInstance.getError();\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t/**\n\t\t * Function to validate the fieldLength\n\t\t * @return true if validation is successfull\n\t\t * @return false if validation error occurs\n\t\t */\n\t\tvalidate: function() {\n\t\t\tvar response = this._super();\n\t\t\tif (response != true) {\n\t\t\t\treturn response;\n\t\t\t} else {\n\t\t\t\tvar fieldValue = this.getFieldValue();\n\t\t\t\tvar decimalFieldValue = $('#createFieldForm')\n\t\t\t\t\t.find('[name=\"decimal\"]')\n\t\t\t\t\t.val();\n\t\t\t\tvar fieldLength = parseInt(64) - parseInt(decimalFieldValue);\n\t\t\t\tif (fieldValue > fieldLength && !(fieldLength < 0) && fieldLength >= 59) {\n\t\t\t\t\tvar errorInfo = app.vtranslate('JS_LENGTH_SHOULD_BE_LESS_THAN_EQUAL_TO') + ' ' + fieldLength;\n\t\t\t\t\tthis.setError(errorInfo);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tvar specialChars = /^[+]/;\n\t\t\t\tif (specialChars.test(fieldValue)) {\n\t\t\t\t\tvar error = app.vtranslate('JS_CONTAINS_ILLEGAL_CHARACTERS');\n\t\t\t\t\tthis.setError(error);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n);\n\nVtiger_WholeNumberGreaterThanZero_Validator_Js(\n\t'Vtiger_MaxLength_Validator_Js',\n\t{\n\t\t/**\n\t\t *Function which invokes field validation\n\t\t *@param accepts field element as parameter\n\t\t * @return error if validation fails true on success\n\t\t */\n\t\tinvokeValidation: function(field, rules, i, options) {\n\t\t\tvar rangeInstance = new Vtiger_DecimalMaxLength_Validator_Js();\n\t\t\trangeInstance.setElement(field);\n\t\t\tvar response = rangeInstance.validate();\n\t\t\tif (response != true) {\n\t\t\t\treturn rangeInstance.getError();\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t/**\n\t\t * Function to validate the fieldLength\n\t\t * @return true if validation is successfull\n\t\t * @return false if validation error occurs\n\t\t */\n\t\tvalidate: function() {\n\t\t\tvar response = this._super();\n\t\t\tif (response != true) {\n\t\t\t\treturn response;\n\t\t\t} else {\n\t\t\t\tvar fieldValue = this.getFieldValue();\n\t\t\t\tif (fieldValue > 255) {\n\t\t\t\t\tvar errorInfo = app.vtranslate('JS_LENGTH_SHOULD_BE_LESS_THAN_EQUAL_TO') + ' 255';\n\t\t\t\t\tthis.setError(errorInfo);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tvar specialChars = /^[+]/;\n\t\t\t\tif (specialChars.test(fieldValue)) {\n\t\t\t\t\tvar error = app.vtranslate('JS_CONTAINS_ILLEGAL_CHARACTERS');\n\t\t\t\t\tthis.setError(error);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n);\n\nVtiger_Base_Validator_Js(\n\t'Vtiger_FieldLabel_Validator_Js',\n\t{\n\t\t/**\n\t\t *Function which invokes field validation\n\t\t *@param accepts field element as parameter\n\t\t * @return error if validation fails true on success\n\t\t */\n\t\tinvokeValidation: function(field, rules, i, options) {\n\t\t\tvar instance = new Vtiger_FieldLabel_Validator_Js();\n\t\t\tinstance.setElement(field);\n\t\t\tvar response = instance.validate();\n\t\t\tif (response != true) {\n\t\t\t\treturn instance.getError();\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t/**\n\t\t * Function to validate the field label\n\t\t * @return true if validation is successfull\n\t\t * @return false if validation error occurs\n\t\t */\n\t\tvalidate: function() {\n\t\t\tvar fieldValue = this.getFieldValue();\n\t\t\treturn this.validateValue(fieldValue);\n\t\t},\n\t\tvalidateValue: function(fieldValue) {\n\t\t\tvar specialChars = /[&\\<\\>\\:\\'\\\"\\,]/;\n\n\t\t\tif (specialChars.test(fieldValue)) {\n\t\t\t\tvar errorInfo =\n\t\t\t\t\tapp.vtranslate('JS_SPECIAL_CHARACTERS') + ' & < > \\' \" : , ' + app.vtranslate('JS_NOT_ALLOWED');\n\t\t\t\tthis.setError(errorInfo);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t}\n);\n\nVtiger_Base_Validator_Js(\n\t'Vtiger_PicklistFieldValues_Validator_Js',\n\t{\n\t\t/**\n\t\t *Function which invokes field validation\n\t\t *@param accepts field element as parameter\n\t\t * @return error if validation fails true on success\n\t\t */\n\t\tinvokeValidation: function(field, rules, i, options) {\n\t\t\tlet instance = new Vtiger_PicklistFieldValues_Validator_Js();\n\t\t\tinstance.setElement(field);\n\t\t\tlet response = instance.validate();\n\t\t\tif (response != true) {\n\t\t\t\treturn instance.getError();\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t/**\n\t\t * Function to validate the field label\n\t\t * @return true if validation is successfull\n\t\t * @return false if validation error occurs\n\t\t */\n\t\tvalidate: function() {\n\t\t\treturn this.validateValue(this.getElement().val());\n\t\t},\n\t\tvalidateValue: function(fieldValue) {\n\t\t\tlet specialChars = /[\\<\\>\\\"\\,\\#]/;\n\t\t\tlet r = true;\n\t\t\t$.each(fieldValue, (i, val) => {\n\t\t\t\tif (specialChars.test(val)) {\n\t\t\t\t\tthis.setError(\n\t\t\t\t\t\tapp.vtranslate('JS_SPECIAL_CHARACTERS') + ' < > \" , # ' + app.vtranslate('JS_NOT_ALLOWED')\n\t\t\t\t\t);\n\t\t\t\t\tr = false;\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn r;\n\t\t}\n\t}\n);\n"],"names":["$","Class","thisInstance","contents","find","json","length","inActiveFieldsList","JSON","parse","val","table","sortable","e","ui","updateBlockSequence","progressIndicatorElement","progressIndicator","sequence","stringify","updateBlocksListByOrder","params","app","getModuleName","getParentModuleName","request","done","data","mode","vtranslate","showMessage","fail","error","each","index","domElement","blockTable","blockId","actualBlockSequence","expectedBlockSequence","updatedBlockSequence","relatedList","Fields","Picklist","showSelect2ElementView","updateSelectedFields","currentTarget","on","relatedModule","closest","removeClass","show","hide","changeStatusRelatedModule","removeRelation","changeStateFavorites","value","validationEngine","changeRelatedViewType","container","contentsDiv","addRelationContainer","clone","callBackFunction","not","addClass","form","serializeFormData","extend","response","result","success","getRelModuleLayoutEditor","html","registerEvents","message","type","text","showModalWindow","target","selectedFields","push","relatedModulesContainer","modulesList","updateSequenceRelatedModule","status","relationId","showConfirmationBox","remove","err","modules","getSelectedFields","containment","currentField","hasClass","showSaveFieldSequenceButton","getDetailViewLayout","createUpdatedBlocksList","sender","olderBlock","reArrangeBlockFields","layout","saveButton","isHidden","isInvisible","updatedBlocksList","updatedBlockFieldsList","block","updatedBlockId","inArray","leftSideContainer","rightSideContainer","children","lastElementInRightContainer","append","lastElementInLeftContainer","updatedBlock","firstBlockSortFields","editFields","expectedFieldSequence","i","fieldEle","fieldId","secondBlockSortFields","secondEditFields","sequenceValue","hideSaveFieldSequenceButton","createUpdatedBlockFieldsList","updateFieldSequence","location","reload","fieldNameValue","aDeferred","Deferred","toLowerCase","resolve","promise","addFieldContainer","width","attr","registerFieldTypeChangeEvent","registerMultiReferenceFieldsChangeEvent","registerMultiReferenceFilterFieldChangeEvent","getvalidationEngineOptions","onValidationComplete","valid","validateFieldsValue","fieldTypeValue","checkPicklistExist","saveCustomField","removeAttr","pickListValueElement","pickListValuesArray","pickListValuesArraySize","select2Element","specialChars","test","getSelect2ElementFromSelect","lowerCasedpickListValuesArray","map","item","uniqueLowerCasedpickListValuesArray","uniqueSort","uniqueLowerCasedpickListValuesArraySize","arrayDiffSize","treeListElement","serverListElement","addCustomField","hideModalWindow","showCustomField","showPnotify","blockNamesList","blocksListSelect","ele","option","label","modalHeader","Window","lastModalId","display","position","errorObj","responseText","undefined","showNotify","title","reject","lengthInput","lengthValidator","name","maxLengthValidator","decimalValidator","selectedOption","decimalFieldUi","decimalInput","maxFloatingDigits","pickListUi","pickListOption","loadMultiReferenceFields","relatedBlock","fieldCopy","fieldContainer","prop","registerCopyClipboard","sortable1","length1","sortable2","length2","makeFieldsListSortable","addBlockContainer","setBlocksListArray","fieldLabel","Object","create","validationEngineOptions","formData","saveBlockDetails","displayNewCustomBlock","updateNewSequenceForBlocks","appendNewBlockToBlocksList","preventDefault","beforeBlockId","beforeBlock","newBlockCloneCopy","after","connectWith","sequenceList","hiddenAddBlockModel","updateBlockStatus","blockStatus","currentBlock","isEmptyObject","inActiveFieldsContainer","reactiveFieldsList","showHiddenFields","createReactivateFieldslist","reActivateHiddenFields","key","inActiveField","element","is","messageParams","fieldIdList","deleteCustomBlock","removeDeletedBlock","removeBlockFromBlocksList","errorLog","deletedTable","fadeOut","deleteCustomField","field","parent","quickcreateEle","filter","presenceEle","defaultValueUi","relatedContainer","relatedTab","showRelatedTabModulesList","makeRelatedModuleSortable","registerRelatedListEvents","selectedModule","requestPjax","getModuleLayoutEditor","fieldRow","modalContainer","registerFieldDetailsChange","lockCheckbox","registerVaribleToParsers","registerEventForClockPicker","inputmask","n","currentElement","toggleClass","input","id","Tree","register","makeBlocksListSortable","registerAddCustomFieldEvent","registerBlockVisibilityEvent","registerInactiveFieldsEvent","registerDeleteCustomBlockEvent","Date","changeSelectElementView","registerDeleteCustomFieldEvent","registerEditFieldDetailsClick","event","switchBtn","state","progress","saveAjax","getInventoryViewLayout","showScrollBar","registerStep1","editField","showPopoverElementView","registerStep2","containerInventory","paramsName","errorExists","sourceModule","edit","liElement","translate","newLiElement","columnName","invtype","button","ids","param","module","select2","cacheMRVField","cacheMRVFilter","ClipboardJS","trigger","getAttribute","document","customConfig","progressInstance","App","Text","Editor","previous","destroyEditor","textArea","views","prefix","registerBlockEvents","registerFieldEvents","setInactiveFieldsList","registerAddCustomBlockEvent","relatedModulesTabClickEvent","registerModulesChangeEvent","registerRelModulesChangeEvent","registerSwitch","registerAddInventoryField","registerEditInventoryField","registerInventoryFieldSequenceSaveClick","registerDeleteInventoryField","registerFieldSequenceSaveClick","registerContextHelp","ready","instance","Settings_LayoutEditor_Js","registerBasicEvents","Vtiger_WholeNumberGreaterThanZero_Validator_Js","rules","options","rangeInstance","Vtiger_FloatingDigits_Validator_Js","setElement","validate","getError","_super","fieldValue","getFieldValue","errorInfo","setError","Vtiger_DecimalMaxLength_Validator_Js","decimalFieldValue","fieldLength","parseInt","Vtiger_Base_Validator_Js","Vtiger_FieldLabel_Validator_Js","validateValue","Vtiger_PicklistFieldValues_Validator_Js","getElement","r"],"mappings":"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"}