{"version":3,"file":"LayoutEditor.min.js","sources":["LayoutEditor.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n * Contributor(s): YetiForce.com\n *************************************************************************************/\n'use strict';\n\n$.Class(\n\t'Settings_LayoutEditor_Js',\n\t{},\n\t{\n\t\tupdatedBlockSequence: {},\n\t\treactiveFieldsList: [],\n\t\tinActiveFieldsList: false,\n\t\tupdatedBlockFieldsList: [],\n\t\tupdatedBlocksList: [],\n\t\tblockNamesList: [],\n\t\t/**\n\t\t * Function to set the inactive fields list used to show the inactive fields\n\t\t */\n\t\tsetInactiveFieldsList: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar contents = $('#layoutEditorContainer').find('.contents');\n\t\t\tvar json = contents.find('.inActiveFieldsArray');\n\t\t\tif (0 < json.length) {\n\t\t\t\tthisInstance.inActiveFieldsList = JSON.parse(json.val());\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Function to regiser the event to make the blocks sortable\n\t\t */\n\t\tmakeBlocksListSortable: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar contents = $('#layoutEditorContainer').find('.contents');\n\t\t\tvar table = contents.find('.blockSortable');\n\t\t\tcontents.sortable({\n\t\t\t\tcontainment: contents,\n\t\t\t\titems: table,\n\t\t\t\trevert: true,\n\t\t\t\ttolerance: 'pointer',\n\t\t\t\tcursor: 'move',\n\t\t\t\tupdate: function(e, ui) {\n\t\t\t\t\tthisInstance.updateBlockSequence();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function which will update block sequence\n\t\t */\n\t\tupdateBlockSequence: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar progressIndicatorElement = $.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tvar sequence = JSON.stringify(thisInstance.updateBlocksListByOrder());\n\t\t\tvar params = {};\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['action'] = 'Block';\n\t\t\tparams['mode'] = 'updateSequenceNumber';\n\t\t\tparams['sequence'] = sequence;\n\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function(data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tvar params = {};\n\t\t\t\t\tparams['text'] = app.vtranslate('JS_BLOCK_SEQUENCE_UPDATED');\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t})\n\t\t\t\t.fail(function(error) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function which will arrange the sequence number of blocks\n\t\t */\n\t\tupdateBlocksListByOrder: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar contents = $('#layoutEditorContainer').find('.contents');\n\t\t\tcontents.find('.editFieldsTable.blockSortable').each(function(index, domElement) {\n\t\t\t\tvar blockTable = $(domElement);\n\t\t\t\tvar blockId = blockTable.data('blockId');\n\t\t\t\tvar actualBlockSequence = blockTable.data('sequence');\n\t\t\t\tvar expectedBlockSequence = index + 1;\n\n\t\t\t\tif (expectedBlockSequence != actualBlockSequence) {\n\t\t\t\t\tblockTable.data('sequence', expectedBlockSequence);\n\t\t\t\t}\n\t\t\t\tthisInstance.updatedBlockSequence[blockId] = expectedBlockSequence;\n\t\t\t});\n\t\t\treturn thisInstance.updatedBlockSequence;\n\t\t},\n\t\t/**\n\t\t * Function to register all the relatedList Events\n\t\t */\n\t\tregisterRelatedListEvents: function() {\n\t\t\tconst thisInstance = this,\n\t\t\t\trelatedList = $('#relatedTabOrder');\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(relatedList.find('.relatedTabModulesList .select2_container'), {\n\t\t\t\tsortable: true,\n\t\t\t\tsortableCb: currentTarget => {\n\t\t\t\t\tthisInstance.updateSelectedFields(currentTarget);\n\t\t\t\t}\n\t\t\t});\n\t\t\trelatedList.on('click', '.inActiveRelationModule', function(e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tvar relatedModule = currentTarget.closest('.relatedModule');\n\t\t\t\trelatedModule\n\t\t\t\t\t.find('.activeRelationModule')\n\t\t\t\t\t.removeClass('d-none')\n\t\t\t\t\t.show();\n\t\t\t\tcurrentTarget.hide();\n\t\t\t\tthisInstance.changeStatusRelatedModule(relatedModule.data('relation-id'), false);\n\t\t\t});\n\t\t\trelatedList.on('click', '.activeRelationModule', function(e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tvar relatedModule = currentTarget.closest('.relatedModule');\n\t\t\t\trelatedModule\n\t\t\t\t\t.find('.inActiveRelationModule')\n\t\t\t\t\t.removeClass('d-none')\n\t\t\t\t\t.show();\n\t\t\t\tcurrentTarget.hide();\n\t\t\t\tthisInstance.changeStatusRelatedModule(relatedModule.data('relation-id'), true);\n\t\t\t});\n\t\t\trelatedList.on('click', '.removeRelation', function(e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tvar relatedModule = currentTarget.closest('.relatedModule');\n\t\t\t\tthisInstance.removeRelation(relatedModule);\n\t\t\t});\n\t\t\trelatedList.on('click', '.addToFavorites', function(e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tthisInstance.changeStateFavorites(currentTarget);\n\t\t\t});\n\t\t\trelatedList.on('change', '.relatedViewType', function(e) {\n\t\t\t\tvar currentTarget = $(this);\n\t\t\t\tvar value = currentTarget.val();\n\t\t\t\tif (!value) {\n\t\t\t\t\tcurrentTarget.validationEngine('showPrompt', app.vtranslate('JS_PLEASE_SELECT_ATLEAST_ONE_OPTION'));\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tcurrentTarget.validationEngine('hide');\n\t\t\t\tthisInstance.changeRelatedViewType(currentTarget);\n\t\t\t});\n\t\t\trelatedList.find('.js-related-column-list').on('change', function(e) {\n\t\t\t\tthisInstance.updateSelectedFields($(e.currentTarget));\n\t\t\t});\n\t\t\trelatedList.on('click', '.addRelation', function(e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tvar container = currentTarget.closest('#relatedTabOrder');\n\t\t\t\tvar contentsDiv = container.closest('.contentsDiv');\n\t\t\t\tvar addRelationContainer = relatedList.find('.addRelationContainer').clone(true, true);\n\t\t\t\tvar callBackFunction = function(data) {\n\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(data.find('select'));\n\t\t\t\t\tdata.find('.relLabel').val(data.find('.target option:selected').val());\n\t\t\t\t\tdata.on('change', '.target', function(e) {\n\t\t\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\t\t\tdata.find('.relLabel').val(currentTarget.find('option:selected').val());\n\t\t\t\t\t});\n\t\t\t\t\tdata.find('[name=\"type\"]').on('change', function() {\n\t\t\t\t\t\tif ($(this).val() === 'getAttachments') {\n\t\t\t\t\t\t\tdata.find('[name=\"target\"] option')\n\t\t\t\t\t\t\t\t.not('[value=\"Documents\"]')\n\t\t\t\t\t\t\t\t.addClass('d-none');\n\t\t\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(data.find('[name=\"target\"]'));\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tdata.find('[name=\"target\"] option').removeClass('d-none');\n\t\t\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(data.find('[name=\"target\"]'));\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tdata.on('click', '.addButton', function(e) {\n\t\t\t\t\t\tvar form = data.find('form').serializeFormData();\n\t\t\t\t\t\tvar params = {};\n\t\t\t\t\t\tparams['module'] = app.getModuleName();\n\t\t\t\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\t\t\t\tparams['action'] = 'Relation';\n\t\t\t\t\t\tparams['mode'] = 'addRelation';\n\t\t\t\t\t\t$.extend(params, form);\n\t\t\t\t\t\tAppConnector.request(params).done(function(data) {\n\t\t\t\t\t\t\tlet response = data.result;\n\t\t\t\t\t\t\tif (response && response.success) {\n\t\t\t\t\t\t\t\tthisInstance\n\t\t\t\t\t\t\t\t\t.getRelModuleLayoutEditor(container.find('[name=\"layoutEditorRelModules\"]').val())\n\t\t\t\t\t\t\t\t\t.done(function(data) {\n\t\t\t\t\t\t\t\t\t\tcontentsDiv.html(data);\n\t\t\t\t\t\t\t\t\t\tthisInstance.registerEvents();\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else if (response && response.message) {\n\t\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({ type: 'error', text: response.message });\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t\tapp.showModalWindow(addRelationContainer, function(data) {\n\t\t\t\t\tif (typeof callBackFunction == 'function') {\n\t\t\t\t\t\tcallBackFunction(data);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tgetSelectedFields: function(target) {\n\t\t\tvar selectedFields = [];\n\t\t\ttarget.find(':selected').each(function(e) {\n\t\t\t\tselectedFields.push({\n\t\t\t\t\tid: $(this).val(),\n\t\t\t\t\tname: $(this).data('field-name') ? $(this).data('field-name') : $(this).data('name')\n\t\t\t\t});\n\t\t\t});\n\t\t\treturn selectedFields;\n\t\t},\n\t\t/**\n\t\t * Function to regiser the event to make the related modules sortable\n\t\t */\n\t\tmakeRelatedModuleSortable: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar relatedModulesContainer = $('.relatedModulesList');\n\t\t\tvar modulesList = relatedModulesContainer.find('.relatedModule');\n\t\t\trelatedModulesContainer.sortable({\n\t\t\t\tcontainment: relatedModulesContainer,\n\t\t\t\titems: modulesList,\n\t\t\t\thandle: '.mainBlockTableLabel',\n\t\t\t\trevert: true,\n\t\t\t\ttolerance: 'pointer',\n\t\t\t\tcursor: 'move',\n\t\t\t\tupdate: function(e, ui) {\n\t\t\t\t\tthisInstance.updateSequenceRelatedModule();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tchangeRelatedViewType: function(currentTarget) {\n\t\t\tvar relatedModule = currentTarget.closest('.relatedModule');\n\t\t\tAppConnector.request({\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\taction: 'Relation',\n\t\t\t\tmode: 'updateRelatedViewType',\n\t\t\t\trelationId: relatedModule.data('relation-id'),\n\t\t\t\ttypes: currentTarget.val()\n\t\t\t})\n\t\t\t\t.done(function(data) {\n\t\t\t\t\tif (data.success) {\n\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({\n\t\t\t\t\t\t\ttext: data.result.text\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({\n\t\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\t\ttext: data.error.message\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.fail(function(error) {\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({\n\t\t\t\t\t\ttext: error.message\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t},\n\t\tchangeStateFavorites: function(currentTarget) {\n\t\t\tvar relatedModule = currentTarget.closest('.relatedModule');\n\t\t\tvar status = currentTarget.data('state') == 1 ? 0 : 1;\n\t\t\tvar params = {};\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['action'] = 'Relation';\n\t\t\tparams['mode'] = 'updateStateFavorites';\n\t\t\tparams['relationId'] = relatedModule.data('relation-id');\n\t\t\tparams['status'] = status;\n\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function(data) {\n\t\t\t\t\tcurrentTarget.data('state', status);\n\t\t\t\t\tif (status) {\n\t\t\t\t\t\tcurrentTarget.find('.far').addClass('d-none');\n\t\t\t\t\t\tcurrentTarget.find('.fas').removeClass('d-none');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcurrentTarget.find('.fas').addClass('d-none');\n\t\t\t\t\t\tcurrentTarget.find('.far').removeClass('d-none');\n\t\t\t\t\t}\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({ text: app.vtranslate('JS_SAVE_NOTIFY_OK') });\n\t\t\t\t})\n\t\t\t\t.fail(function(error) {\n\t\t\t\t\tvar params = {};\n\t\t\t\t\tparams['text'] = error;\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t});\n\t\t},\n\t\tchangeStatusRelatedModule: function(relationId, status) {\n\t\t\tvar params = {};\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['action'] = 'Relation';\n\t\t\tparams['mode'] = 'changeStatusRelation';\n\t\t\tparams['relationId'] = relationId;\n\t\t\tparams['status'] = status;\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function(data) {\n\t\t\t\t\tvar params = {};\n\t\t\t\t\tif (status) {\n\t\t\t\t\t\tparams['text'] = app.vtranslate('JS_SAVED_CHANGE_STATUS_1');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tparams['text'] = app.vtranslate('JS_SAVED_CHANGE_STATUS_0');\n\t\t\t\t\t}\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t})\n\t\t\t\t.fail(function(error) {\n\t\t\t\t\tvar params = {};\n\t\t\t\t\tparams['text'] = error;\n\t\t\t\t\tparams['type'] = 'error';\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t});\n\t\t},\n\t\tremoveRelation: function(relatedModule) {\n\t\t\tvar message = app.vtranslate('JS_DELETE_RELATION_CONFIRMATION');\n\t\t\tVtiger_Helper_Js.showConfirmationBox({ message: message })\n\t\t\t\t.done(function(e) {\n\t\t\t\t\tvar params = {};\n\t\t\t\t\tparams['module'] = app.getModuleName();\n\t\t\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\t\t\tparams['action'] = 'Relation';\n\t\t\t\t\tparams['mode'] = 'removeRelation';\n\t\t\t\t\tparams['relationId'] = relatedModule.data('relation-id');\n\n\t\t\t\t\tAppConnector.request(params)\n\t\t\t\t\t\t.done(function(data) {\n\t\t\t\t\t\t\tvar params = {};\n\t\t\t\t\t\t\tparams['text'] = app.vtranslate('JS_REMOVE_RELATION_OK');\n\t\t\t\t\t\t\trelatedModule.remove();\n\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.fail(function(error) {\n\t\t\t\t\t\t\tvar params = {\n\t\t\t\t\t\t\t\ttext: message,\n\t\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t\t.fail(function(error, err) {});\n\t\t},\n\t\tupdateSequenceRelatedModule: function() {\n\t\t\tvar modules = [];\n\t\t\tvar relatedModulesContainer = $('.relatedModulesList');\n\t\t\tvar params = {};\n\t\t\tvar progressIndicatorElement = $.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\trelatedModulesContainer.find('.relatedModule').each(function(index, domElement) {\n\t\t\t\tvar relationId = $(domElement).data('relationId');\n\t\t\t\tmodules.push({ relationId: relationId, index: index });\n\t\t\t});\n\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['action'] = 'Relation';\n\t\t\tparams['mode'] = 'updateSequenceRelatedModule';\n\t\t\tparams['modules'] = modules;\n\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function(data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tvar params = {};\n\t\t\t\t\tparams['text'] = app.vtranslate('JS_UPDATE_SEQUENCE');\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t})\n\t\t\t\t.fail(function(error) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tvar params = {};\n\t\t\t\t\tparams['text'] = error;\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t});\n\t\t},\n\t\tupdateSelectedFields: function(target) {\n\t\t\tconst thisInstance = this;\n\t\t\tlet params = {},\n\t\t\t\trelatedModule = $(target).closest('.relatedModule'),\n\t\t\t\tprogressIndicatorElement = $.progressIndicator({\n\t\t\t\t\tposition: 'html',\n\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\tenabled: true\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t\tselectedFields;\n\t\t\tif ($(target).data('type') == 'inventory') {\n\t\t\t\tparams['inventory'] = true;\n\t\t\t\tselectedFields = $(target).val();\n\t\t\t} else {\n\t\t\t\tselectedFields = thisInstance.getSelectedFields($(target));\n\t\t\t}\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['action'] = 'Relation';\n\t\t\tparams['mode'] = 'updateSelectedFields';\n\t\t\tparams['relationId'] = relatedModule.data('relation-id');\n\t\t\tparams['fields'] = selectedFields;\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function() {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tlet params = {};\n\t\t\t\t\tparams['text'] = app.vtranslate('JS_UPDATED_FIELD_LIST_MODULE_RELATED');\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t})\n\t\t\t\t.fail(function(error) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tlet params = {};\n\t\t\t\t\tparams['text'] = error;\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to regiser the event to make the fields sortable\n\t\t */\n\t\tmakeFieldsListSortable: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar contents = $('#layoutEditorContainer').find('.contents');\n\t\t\tvar table = contents.find('.editFieldsTable');\n\t\t\ttable.each(function() {\n\t\t\t\tvar containment = $(this).closest('.moduleBlocks');\n\t\t\t\t$(this)\n\t\t\t\t\t.find('ul[name=sortable1], ul[name=sortable2]')\n\t\t\t\t\t.sortable({\n\t\t\t\t\t\tcontainment: containment,\n\t\t\t\t\t\ttolerance: 'pointer',\n\t\t\t\t\t\tcursor: 'move',\n\t\t\t\t\t\tconnectWith: containment.find('.connectedSortable'),\n\t\t\t\t\t\tupdate: function(e, ui) {\n\t\t\t\t\t\t\tvar currentField = ui['item'];\n\t\t\t\t\t\t\tif (currentField.closest('.moduleBlocks').hasClass('inventoryBlock')) {\n\t\t\t\t\t\t\t\tthisInstance.showSaveFieldSequenceButton(currentField.closest('.editFieldsTable'));\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthisInstance.showSaveFieldSequenceButton(thisInstance.getDetailViewLayout());\n\t\t\t\t\t\t\t\tthisInstance.createUpdatedBlocksList(currentField);\n\t\t\t\t\t\t\t\t// rearrange the older block fields\n\t\t\t\t\t\t\t\tif (ui.sender) {\n\t\t\t\t\t\t\t\t\tvar olderBlock = ui.sender.closest('.editFieldsTable');\n\t\t\t\t\t\t\t\t\tthisInstance.reArrangeBlockFields(olderBlock);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tgetDetailViewLayout: function() {\n\t\t\treturn $('#detailViewLayout');\n\t\t},\n\t\tgetInventoryViewLayout: function() {\n\t\t\treturn $('#inventoryViewLayout');\n\t\t},\n\t\t/**\n\t\t * Function to show the save button of fieldSequence\n\t\t */\n\t\tshowSaveFieldSequenceButton: function(layout) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar saveButton = layout.find('.saveFieldSequence');\n\t\t\tif (app.isHidden(saveButton) || app.isInvisible(saveButton)) {\n\t\t\t\tif (!saveButton.hasClass('inventorySequence')) {\n\t\t\t\t\tthisInstance.updatedBlocksList = [];\n\t\t\t\t\tthisInstance.updatedBlockFieldsList = [];\n\t\t\t\t}\n\t\t\t\tsaveButton.removeClass('d-none');\n\t\t\t\tsaveButton.removeClass('invisible');\n\t\t\t\tvar params = {};\n\t\t\t\tparams['text'] = app.vtranslate('JS_SAVE_THE_CHANGES_TO_UPDATE_FIELD_SEQUENCE');\n\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Function which will hide the saveFieldSequence button\n\t\t */\n\t\thideSaveFieldSequenceButton: function() {\n\t\t\tvar layout = $('#detailViewLayout');\n\t\t\tvar saveButton = layout.find('.saveFieldSequence');\n\t\t\tsaveButton.addClass('d-none');\n\t\t},\n\t\t/**\n\t\t * Function to create the blocks list which are updated while sorting\n\t\t */\n\t\tcreateUpdatedBlocksList: function(currentField) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar block = currentField.closest('.editFieldsTable');\n\t\t\tvar updatedBlockId = block.data('blockId');\n\t\t\tif ($.inArray(updatedBlockId, thisInstance.updatedBlocksList) == -1) {\n\t\t\t\tthisInstance.updatedBlocksList.push(updatedBlockId);\n\t\t\t}\n\t\t\tthisInstance.reArrangeBlockFields(block);\n\t\t},\n\t\t/**\n\t\t * Function that rearranges fields in the block when the fields are moved\n\t\t * @param <jQuery object> block\n\t\t */\n\t\treArrangeBlockFields: function(block) {\n\t\t\t// 1.get the containers, 2.compare the length, 3.if uneven then move the last element\n\t\t\tvar leftSideContainer = block.find('ul[name=sortable1]');\n\t\t\tvar rightSideContainer = block.find('ul[name=sortable2]');\n\t\t\tif (leftSideContainer.children().length < rightSideContainer.children().length) {\n\t\t\t\tvar lastElementInRightContainer = rightSideContainer.children(':last');\n\t\t\t\tleftSideContainer.append(lastElementInRightContainer);\n\t\t\t} else if (leftSideContainer.children().length > rightSideContainer.children().length + 1) {\n\t\t\t\t//greater than 1\n\t\t\t\tvar lastElementInLeftContainer = leftSideContainer.children(':last');\n\t\t\t\trightSideContainer.append(lastElementInLeftContainer);\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Function to create the list of updated blocks with all the fields and their sequences\n\t\t */\n\t\tcreateUpdatedBlockFieldsList: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar contents = $('#layoutEditorContainer').find('.contents');\n\n\t\t\tfor (var index in thisInstance.updatedBlocksList) {\n\t\t\t\tvar updatedBlockId = thisInstance.updatedBlocksList[index];\n\t\t\t\tvar updatedBlock = contents.find('.block_' + updatedBlockId);\n\t\t\t\tvar firstBlockSortFields = updatedBlock.find('ul[name=sortable1]');\n\t\t\t\tvar editFields = firstBlockSortFields.find('.editFields');\n\t\t\t\tvar expectedFieldSequence = 1;\n\t\t\t\teditFields.each(function(i, domElement) {\n\t\t\t\t\tvar fieldEle = $(domElement);\n\t\t\t\t\tvar fieldId = fieldEle.data('fieldId');\n\t\t\t\t\tthisInstance.updatedBlockFieldsList.push({\n\t\t\t\t\t\tfieldid: fieldId,\n\t\t\t\t\t\tsequence: expectedFieldSequence,\n\t\t\t\t\t\tblock: updatedBlockId\n\t\t\t\t\t});\n\t\t\t\t\texpectedFieldSequence = expectedFieldSequence + 2;\n\t\t\t\t});\n\t\t\t\tvar secondBlockSortFields = updatedBlock.find('ul[name=sortable2]');\n\t\t\t\tvar secondEditFields = secondBlockSortFields.find('.editFields');\n\t\t\t\tvar sequenceValue = 2;\n\t\t\t\tsecondEditFields.each(function(i, domElement) {\n\t\t\t\t\tvar fieldEle = $(domElement);\n\t\t\t\t\tvar fieldId = fieldEle.data('fieldId');\n\t\t\t\t\tthisInstance.updatedBlockFieldsList.push({\n\t\t\t\t\t\tfieldid: fieldId,\n\t\t\t\t\t\tsequence: sequenceValue,\n\t\t\t\t\t\tblock: updatedBlockId\n\t\t\t\t\t});\n\t\t\t\t\tsequenceValue = sequenceValue + 2;\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Function to register click event for save button of fields sequence\n\t\t */\n\t\tregisterFieldSequenceSaveClick: function() {\n\t\t\tthis.getDetailViewLayout()\n\t\t\t\t.find('.saveFieldSequence')\n\t\t\t\t.on('click', () => {\n\t\t\t\t\tthis.hideSaveFieldSequenceButton();\n\t\t\t\t\tthis.createUpdatedBlockFieldsList();\n\t\t\t\t\tthis.updateFieldSequence();\n\t\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function will save the field sequences\n\t\t */\n\t\tupdateFieldSequence: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar progressIndicatorElement = $.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tvar params = {};\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['action'] = 'Field';\n\t\t\tparams['mode'] = 'move';\n\t\t\tparams['updatedFields'] = thisInstance.updatedBlockFieldsList;\n\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function(data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\twindow.location.reload();\n\t\t\t\t\tvar params = {};\n\t\t\t\t\tparams['text'] = app.vtranslate('JS_FIELD_SEQUENCE_UPDATED');\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t})\n\t\t\t\t.fail(function(error) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to check if picklist exist\n\t\t */\n\t\tcheckPicklistExist(fieldNameValue){\n\t\t\tlet aDeferred = $.Deferred();\n\t\t\tAppConnector.request({\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\taction: 'Field',\n\t\t\t\tmode: 'checkPicklistExist',\n\t\t\t\tfieldName: fieldNameValue.toLowerCase()\n\t\t\t}).done(function(data) {\n\t\t\t\tif(data.result){\n\t\t\t\t\tVtiger_Helper_Js.showConfirmationBox({message: app.vtranslate('JS_EXIST_PICKLIST_NAME')})\n\t\t\t\t\t.done(function(data) {\n\t\t\t\t\t\taDeferred.resolve(true);\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function(error) {\n\t\t\t\t\t\taDeferred.resolve(false);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\taDeferred.resolve(true);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/**\n\t\t * Function to register click evnet add custom field button\n\t\t */\n\t\tregisterAddCustomFieldEvent() {\n\t\t\tconst thisInstance = this;\n\t\t\tlet container = $('#layoutEditorContainer'),\n\t\t\t\tcontents = container.find('.contents');\n\t\t\tcontents.find('.addCustomField').on('click', e => {\n\t\t\t\tlet blockId = $(e.currentTarget).closest('.editFieldsTable').data('blockId'),\n\t\t\t\t\taddFieldContainer = container.find('.createFieldModal').clone(true, true);\n\t\t\t\taddFieldContainer.removeClass('d-none').show();\n\t\t\t\tlet callBackFunction = data => {\n\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(data.find('select'), { width: '100%' });\n\t\t\t\t\tlet form = data.find('.createCustomFieldForm');\n\t\t\t\t\tform.attr('id', 'createFieldForm');\n\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(form.find('[name=\"pickListValues\"]'), {\n\t\t\t\t\t\ttags: true,\n\t\t\t\t\t\ttokenSeparators: [',']\n\t\t\t\t\t});\n\t\t\t\t\tthis.registerFieldTypeChangeEvent(form);\n\t\t\t\t\tthis.registerMultiReferenceFieldsChangeEvent(form);\n\t\t\t\t\tthis.registerMultiReferenceFilterFieldChangeEvent(form);\n\t\t\t\t\tlet params = app.getvalidationEngineOptions(true);\n\t\t\t\t\tparams.onValidationComplete = (form, valid) => {\n\t\t\t\t\t\tif (valid && thisInstance.validateFieldsValue(form)) {\n\t\t\t\t\t\t\tlet saveButton = form.find(':submit'),\n\t\t\t\t\t\t\t\tfieldNameValue = $('[name=\"fieldName\"]', form).val(),\n\t\t\t\t\t\t\t\tfieldTypeValue = $('[name=\"fieldType\"]', form).val();\n\t\t\t\t\t\t\tsaveButton.attr('disabled', 'disabled');\n\t\t\t\t\t\t\tif (fieldTypeValue == 'Picklist' || fieldTypeValue == 'MultiSelectCombo') {\n\t\t\t\t\t\t\t\tthisInstance.checkPicklistExist(fieldNameValue).done(result => {\n\t\t\t\t\t\t\t\t\tif (result) {\n\t\t\t\t\t\t\t\t\t\tthisInstance.saveCustomField(blockId, form);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tsaveButton.removeAttr('disabled');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthisInstance.saveCustomField(blockId, form);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t};\n\t\t\t\t\tform.validationEngine(params);\n\t\t\t\t};\n\t\t\t\tapp.showModalWindow(\n\t\t\t\t\taddFieldContainer,\n\t\t\t\t\tdata => {\n\t\t\t\t\t\tif (typeof callBackFunction == 'function') {\n\t\t\t\t\t\t\tcallBackFunction(data);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{ width: '1000px' }\n\t\t\t\t);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to validate fields value\n\t\t */\n\t\tvalidateFieldsValue: function(form){\n\t\t\tlet fieldTypeValue = $('[name=\"fieldType\"]', form).val(),\n\t\t\t\tfieldNameValue = $('[name=\"fieldName\"]', form).val(),\n\t\t\t\tmessage;\n\t\t\tif (fieldTypeValue == 'Picklist' || fieldTypeValue == 'MultiSelectCombo') {\n\t\t\t\tlet pickListValueElement = $('#pickListValues', form),\n\t\t\t\t\tpickListValuesArray = pickListValueElement.val(),\n\t\t\t\t\tpickListValuesArraySize = pickListValuesArray.length,\n\t\t\t\t\ti,\n\t\t\t\t\tselect2Element,\n\t\t\t\t\tspecialChars = /[\"]/;\n\t\t\t\tif (fieldNameValue.toLowerCase() === 'status' || 'picklist' === fieldNameValue.toLowerCase()) {\n\t\t\t\t\tmessage = app.vtranslate('JS_RESERVED_PICKLIST_NAME');\n\t\t\t\t\t$('[name=\"fieldName\"]', form).validationEngine('showPrompt', message, 'error', 'bottomLeft', true);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tfor (i = 0; i < pickListValuesArraySize; i++) {\n\t\t\t\t\tif (specialChars.test(pickListValuesArray[i])) {\n\t\t\t\t\t\tselect2Element = app.getSelect2ElementFromSelect(pickListValueElement);\n\t\t\t\t\t\tmessage = app.vtranslate('JS_SPECIAL_CHARACTERS') + ' \" ' + app.vtranslate('JS_NOT_ALLOWED');\n\t\t\t\t\t\tselect2Element.validationEngine('showPrompt', message, 'error', 'bottomLeft', true);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tlet lowerCasedpickListValuesArray = $.map(pickListValuesArray, (item, index) => {\n\t\t\t\t\t\treturn item.toLowerCase();\n\t\t\t\t\t}),\n\t\t\t\t\tuniqueLowerCasedpickListValuesArray = $.uniqueSort(lowerCasedpickListValuesArray),\n\t\t\t\t\tuniqueLowerCasedpickListValuesArraySize = uniqueLowerCasedpickListValuesArray.length,\n\t\t\t\t\tarrayDiffSize = pickListValuesArraySize - uniqueLowerCasedpickListValuesArraySize;\n\t\t\t\tif (arrayDiffSize > 0) {\n\t\t\t\t\tselect2Element = app.getSelect2ElementFromSelect(pickListValueElement);\n\t\t\t\t\tmessage = app.vtranslate('JS_DUPLICATES_VALUES_FOUND');\n\t\t\t\t\tselect2Element.validationEngine('showPrompt', message, 'error', 'bottomLeft', true);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (fieldTypeValue == 'Tree' || fieldTypeValue == 'CategoryMultipicklist') {\n\t\t\t\tlet treeListElement = form.find('select.TreeList');\n\t\t\t\tif (treeListElement.val() == '-') {\n\t\t\t\t\tmessage = app.vtranslate('JS_FIELD_CAN_NOT_BE_EMPTY');\n\t\t\t\t\tform.find('.TreeList').validationEngine(\n\t\t\t\t\t\t'showPrompt',\n\t\t\t\t\t\tmessage,\n\t\t\t\t\t\t'error',\n\t\t\t\t\t\t'bottomLeft',\n\t\t\t\t\t\ttrue\n\t\t\t\t\t);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (fieldTypeValue == 'ServerAccess') {\n\t\t\t\tlet serverListElement = form.find('select[name=\"server\"]');\n\t\t\t\tif (serverListElement.val() == '-') {\n\t\t\t\t\tmessage = app.vtranslate('JS_FIELD_CAN_NOT_BE_EMPTY');\n\t\t\t\t\tserverListElement.validationEngine(\n\t\t\t\t\t\t'showPrompt',\n\t\t\t\t\t\tmessage,\n\t\t\t\t\t\t'error',\n\t\t\t\t\t\t'bottomLeft',\n\t\t\t\t\t\ttrue\n\t\t\t\t\t);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\t\t/**\n\t\t * Function to save field and show message\n\t\t */\n\t\tsaveCustomField: function(blockId, form){\n\t\t\tlet saveButton = form.find(':submit');\n\t\t\tthis.addCustomField(blockId, form).done(data => {\n\t\t\t\tlet result = data['result'],\n\t\t\t\t\tparams = {};\n\t\t\t\tif (data['success']) {\n\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\tparams['text'] = app.vtranslate('JS_CUSTOM_FIELD_ADDED');\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t\tthis.showCustomField(result);\n\t\t\t\t} else {\n\t\t\t\t\tmessage = data['error']['message'];\n\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\ttitle:\n\t\t\t\t\t\t\tdata['error']['code'] != 513\n\t\t\t\t\t\t\t\t? form.find('.fieldNameForm').text()\n\t\t\t\t\t\t\t\t: form.find('.fieldLabelForm').text(),\n\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\ttext: data['error']['message']\n\t\t\t\t\t});\n\t\t\t\t\tsaveButton.removeAttr('disabled');\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to create the array of block names list\n\t\t */\n\t\tsetBlocksListArray: function(form) {\n\t\t\tvar thisInstance = this;\n\t\t\tthisInstance.blockNamesList = [];\n\t\t\tvar blocksListSelect = form.find('[name=\"beforeBlockId\"]');\n\t\t\tblocksListSelect.find('option').each(function(index, ele) {\n\t\t\t\tvar option = $(ele);\n\t\t\t\tvar label = option.data('label');\n\t\t\t\tthisInstance.blockNamesList.push(label.toLowerCase());\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to save the custom field details\n\t\t */\n\t\taddCustomField: function(blockId, form) {\n\t\t\tvar modalHeader = form.closest('#' + Window.lastModalId).find('.modal-header h3');\n\t\t\tvar aDeferred = $.Deferred();\n\n\t\t\tmodalHeader.progressIndicator({\n\t\t\t\tsmallLoadingImage: true,\n\t\t\t\timageContainerCss: { display: 'inline', 'margin-left': '18%', position: 'absolute' }\n\t\t\t});\n\n\t\t\tvar params = form.serializeFormData();\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['action'] = 'Field';\n\t\t\tparams['mode'] = 'add';\n\t\t\tparams['blockid'] = blockId;\n\t\t\tparams['sourceModule'] = $('#selectedModuleName').val();\n\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function(data) {\n\t\t\t\t\tmodalHeader.progressIndicator({ mode: 'hide' });\n\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t})\n\t\t\t\t.fail(function(err, error, errorObj) {\n\t\t\t\t\tmodalHeader.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tif (errorObj.responseText !== undefined) {\n\t\t\t\t\t\tapp.showNotify({ title: JSON.parse(errorObj.responseText).error.message, type: 'error' });\n\t\t\t\t\t}\n\t\t\t\t\taDeferred.reject(error);\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/**\n\t\t * Function to register change event for fieldType while adding custom field\n\t\t */\n\t\tregisterFieldTypeChangeEvent(form) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar lengthInput = form.find('[name=\"fieldLength\"]');\n\n\t\t\t//special validators while adding new field\n\t\t\tvar lengthValidator = [{ name: 'DecimalMaxLength' }];\n\t\t\tvar maxLengthValidator = [{ name: 'MaxLength' }];\n\t\t\tvar decimalValidator = [{ name: 'FloatingDigits' }];\n\n\t\t\t//By default add the max length validator\n\t\t\tlengthInput.data('validator', maxLengthValidator);\n\n\t\t\t//register the change event for field types\n\t\t\tform.find('[name=\"fieldType\"]').on('change', function(e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tvar lengthInput = form.find('[name=\"fieldLength\"]');\n\t\t\t\tvar selectedOption = currentTarget.find('option:selected');\n\n\t\t\t\t//hide all the elements like length, decimal,picklist\n\t\t\t\tform.find('.supportedType').addClass('d-none');\n\t\t\t\tif (selectedOption.data('lengthsupported')) {\n\t\t\t\t\tform.find('.lengthsupported').removeClass('d-none');\n\t\t\t\t\tif (!selectedOption.data('nolimitforlength')) {\n\t\t\t\t\t\tlengthInput.data('validator', maxLengthValidator);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlengthInput.data('validator', [{ name: 'WholeNumberGreaterThanZero' }]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (selectedOption.data('decimalsupported')) {\n\t\t\t\t\tvar decimalFieldUi = form.find('.decimalsupported');\n\t\t\t\t\tdecimalFieldUi.removeClass('d-none');\n\n\t\t\t\t\tvar decimalInput = decimalFieldUi.find('[name=\"decimal\"]');\n\t\t\t\t\tvar maxFloatingDigits = selectedOption.data('maxfloatingdigits');\n\n\t\t\t\t\tif (typeof maxFloatingDigits !== 'undefined') {\n\t\t\t\t\t\tdecimalInput.data('validator', decimalValidator);\n\t\t\t\t\t\tlengthInput.data('validator', lengthValidator);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (selectedOption.data('decimalreadonly')) {\n\t\t\t\t\t\tdecimalInput.val(maxFloatingDigits).attr('readonly', true);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdecimalInput.removeAttr('readonly').val('');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (selectedOption.data('predefinedvalueexists')) {\n\t\t\t\t\tvar pickListUi = form.find('.preDefinedValueExists');\n\t\t\t\t\tpickListUi.removeClass('d-none');\n\t\t\t\t}\n\t\t\t\tif (selectedOption.data('picklistoption')) {\n\t\t\t\t\tvar pickListOption = form.find('.picklistOption');\n\t\t\t\t\tpickListOption.removeClass('d-none');\n\t\t\t\t}\n\t\t\t\tif (selectedOption.val() == 'Related1M') {\n\t\t\t\t\tform.find('.preDefinedModuleList').removeClass('d-none');\n\t\t\t\t}\n\t\t\t\tif (selectedOption.val() == 'Tree' || selectedOption.val() == 'CategoryMultipicklist') {\n\t\t\t\t\tform.find('.preDefinedTreeList').removeClass('d-none');\n\t\t\t\t}\n\t\t\t\tif (selectedOption.val() == 'ServerAccess') {\n\t\t\t\t\tform.find('.js-server-access-list').removeClass('d-none');\n\t\t\t\t}\n\t\t\t\tif (selectedOption.val() == 'MultiReferenceValue') {\n\t\t\t\t\tform.find('.preMultiReferenceValue').removeClass('d-none');\n\t\t\t\t\tthisInstance.loadMultiReferenceFields(form);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to add new custom field ui to the list\n\t\t */\n\t\tshowCustomField: function(result) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar contents = $('#layoutEditorContainer').find('.contents');\n\t\t\tvar relatedBlock = contents.find('.block_' + result['blockid']);\n\t\t\tvar fieldCopy = contents.find('.newCustomFieldCopy').clone(true, true);\n\t\t\tvar fieldContainer = fieldCopy.find('div.marginLeftZero.border1px');\n\t\t\tfieldContainer\n\t\t\t\t.addClass('opacity editFields')\n\t\t\t\t.attr('data-field-id', result['id'])\n\t\t\t\t.attr('data-block-id', result['blockid']);\n\t\t\tfieldContainer.find('.deleteCustomField, .saveFieldDetails').attr('data-field-id', result['id']);\n\t\t\tfieldContainer.find('.fieldLabel').html(result['label'] + ' [' + result['name'] + ']');\n\t\t\tfieldContainer\n\t\t\t\t.find('#relatedFieldValue')\n\t\t\t\t.val(result['name'])\n\t\t\t\t.prop('id', 'relatedFieldValue' + result['id']);\n\t\t\tfieldContainer.find('.copyFieldLabel').attr('data-target', 'relatedFieldValue' + result['id']);\n\t\t\tthisInstance.registerCopyClipboard();\n\t\t\tif (!result['customField']) {\n\t\t\t\tfieldContainer.find('.deleteCustomField').remove();\n\t\t\t}\n\t\t\tif ($.inArray(result['type'], ['string', 'phone', 'currency', 'url', 'integer', 'double']) == -1) {\n\t\t\t\tfieldContainer.find('.maskField').remove();\n\t\t\t}\n\t\t\tvar block = relatedBlock.find('.blockFieldsList');\n\t\t\tvar sortable1 = block.find('.js-sort-table1');\n\t\t\tvar length1 = sortable1.children().length;\n\t\t\tvar sortable2 = block.find('.js-sort-table2');\n\t\t\tvar length2 = sortable2.children().length;\n\t\t\t// Deciding where to add the new field\n\t\t\tif (length1 > length2) {\n\t\t\t\tsortable2.append(fieldCopy.removeClass('d-none newCustomFieldCopy'));\n\t\t\t} else {\n\t\t\t\tsortable1.append(fieldCopy.removeClass('d-none newCustomFieldCopy'));\n\t\t\t}\n\t\t\tthisInstance.makeFieldsListSortable();\n\t\t},\n\t\t/**\n\t\t * Function to register click event for add custom block button\n\t\t */\n\t\tregisterAddCustomBlockEvent: function() {\n\t\t\tconst thisInstance = this;\n\t\t\tlet contents = $('#layoutEditorContainer').find('.contents');\n\t\t\tcontents.find('.addCustomBlock').on('click', function(e) {\n\t\t\t\tlet addBlockContainer = contents.find('.addBlockModal').clone(true, true),\n\t\t\t\t\tcallBackFunction = function(data) {\n\t\t\t\t\tdata.find('.addBlockModal')\n\t\t\t\t\t\t.removeClass('d-none')\n\t\t\t\t\t\t.show();\n\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(data.find('select'));\n\t\t\t\t\tlet form = data.find('.addCustomBlockForm');\n\t\t\t\t\tthisInstance.setBlocksListArray(form);\n\t\t\t\t\tlet fieldLabel = form.find('[name=\"label\"]'),\n\t\t\t\t\t\tparams = Object.create(app.validationEngineOptions);\n\t\t\t\t\tparams.onValidationComplete = function(form, valid) {\n\t\t\t\t\t\tif (valid) {\n\t\t\t\t\t\t\tlet formData = form.serializeFormData();\n\t\t\t\t\t\t\tif ($.inArray(formData['label'].toLowerCase(), thisInstance.blockNamesList) == -1) {\n\t\t\t\t\t\t\t\tthisInstance.saveBlockDetails(form).done(function(data) {\n\t\t\t\t\t\t\t\t\tif (data['success']) {\n\t\t\t\t\t\t\t\t\t\tlet result = data['result'];\n\t\t\t\t\t\t\t\t\t\tthisInstance.displayNewCustomBlock(result);\n\t\t\t\t\t\t\t\t\t\tthisInstance.updateNewSequenceForBlocks(result['sequenceList']);\n\t\t\t\t\t\t\t\t\t\tthisInstance.appendNewBlockToBlocksList(result, form);\n\t\t\t\t\t\t\t\t\t\tthisInstance.makeFieldsListSortable();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\t\treturn valid;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tlet result = app.vtranslate('JS_BLOCK_NAME_EXISTS');\n\t\t\t\t\t\t\t\tfieldLabel.validationEngine('showPrompt', result, 'error', 'topLeft', true);\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\tform.validationEngine(params);\n\t\t\t\t\tform.on('submit', function(e) {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t\tapp.showModalWindow(\n\t\t\t\t\taddBlockContainer,\n\t\t\t\t\tfunction(data) {\n\t\t\t\t\t\tcallBackFunction(data);\n\t\t\t\t\t},\n\t\t\t\t\t{ width: '1000px' }\n\t\t\t\t);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to save the new custom block details\n\t\t */\n\t\tsaveBlockDetails: function(form) {\n\t\t\tvar aDeferred = $.Deferred();\n\t\t\tvar progressIndicatorElement = $.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tvar params = form.serializeFormData();\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['sourceModule'] = $('#selectedModuleName').val();\n\t\t\tparams['action'] = 'Block';\n\t\t\tparams['mode'] = 'save';\n\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function(data) {\n\t\t\t\t\tlet response = data.result;\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tif (response && response.success) {\n\t\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\t\ttext: app.vtranslate('JS_CUSTOM_BLOCK_ADDED')\n\t\t\t\t\t\t});\n\t\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\t\ttext: response.message\n\t\t\t\t\t\t});\n\t\t\t\t\t\taDeferred.reject(false);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.fail(function(error) {\n\t\t\t\t\taDeferred.reject(error);\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/**\n\t\t * Function used to display the new custom block ui after save\n\t\t */\n\t\tdisplayNewCustomBlock: function(result) {\n\t\t\tvar contents = $('#layoutEditorContainer').find('.contents');\n\t\t\tvar beforeBlockId = result['beforeBlockId'];\n\t\t\tvar beforeBlock = contents.find('.block_' + beforeBlockId);\n\n\t\t\tvar newBlockCloneCopy = contents.find('.newCustomBlockCopy').clone(true, true);\n\t\t\tnewBlockCloneCopy\n\t\t\t\t.data('blockId', result['id'])\n\t\t\t\t.find('.blockLabel')\n\t\t\t\t.append($('<strong class=\"align-middle\">' + result['label'] + '</strong>'));\n\t\t\tnewBlockCloneCopy.find('.js-block-visibility').data('blockId', result['id']);\n\t\t\tif (result['isAddCustomFieldEnabled']) {\n\t\t\t\tnewBlockCloneCopy.find('.addCustomField').removeClass('d-none');\n\t\t\t}\n\t\t\tbeforeBlock.after(\n\t\t\t\tnewBlockCloneCopy\n\t\t\t\t\t.removeClass('d-none newCustomBlockCopy')\n\t\t\t\t\t.addClass('editFieldsTable block_' + result['id'])\n\t\t\t);\n\n\t\t\tnewBlockCloneCopy.find('.blockFieldsList').sortable({ connectWith: '.blockFieldsList' });\n\t\t},\n\t\t/**\n\t\t * Function to update the sequence for all blocks after adding new Block\n\t\t */\n\t\tupdateNewSequenceForBlocks: function(sequenceList) {\n\t\t\tvar contents = $('#layoutEditorContainer').find('.contents');\n\t\t\t$.each(sequenceList, function(blockId, sequence) {\n\t\t\t\tcontents.find('.block_' + blockId).data('sequence', sequence);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to update the block list with the new block label in the clone container\n\t\t */\n\t\tappendNewBlockToBlocksList: function(result, form) {\n\t\t\tvar contents = $('#layoutEditorContainer').find('.contents');\n\t\t\tvar hiddenAddBlockModel = contents.find('.addBlockModal');\n\t\t\tvar blocksListSelect = hiddenAddBlockModel.find('[name=\"beforeBlockId\"]');\n\t\t\tvar option = $('<option>', {\n\t\t\t\tvalue: result['id'],\n\t\t\t\ttext: result['label']\n\t\t\t});\n\t\t\tblocksListSelect.append(option.attr('data-label', result['label']));\n\t\t},\n\t\t/**\n\t\t * Function to update the block list to remove the deleted custom block label in the clone container\n\t\t */\n\t\tremoveBlockFromBlocksList: function(blockId) {\n\t\t\tvar contents = $('#layoutEditorContainer').find('.contents');\n\t\t\tvar hiddenAddBlockModel = contents.find('.addBlockModal');\n\t\t\tvar blocksListSelect = hiddenAddBlockModel.find('[name=\"beforeBlockId\"]');\n\t\t\tblocksListSelect.find('option[value=\"' + blockId + '\"]').remove();\n\t\t},\n\t\t/**\n\t\t * Function to register the change event for block visibility\n\t\t */\n\t\tregisterBlockVisibilityEvent: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar contents = $('#layoutEditorContainer').find('.contents');\n\t\t\tcontents.on('click', '.js-block-visibility', function(e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tthisInstance.updateBlockStatus(currentTarget);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to save the changed visibility for the block\n\t\t */\n\t\tupdateBlockStatus: function(currentTarget) {\n\t\t\tvar blockStatus = currentTarget.data('visible');\n\t\t\tvar progressIndicatorElement = $.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tvar params = {};\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['sourceModule'] = $('#selectedModuleName').val();\n\t\t\tparams['action'] = 'Block';\n\t\t\tparams['mode'] = 'save';\n\t\t\tparams['blockid'] = currentTarget.data('blockId');\n\t\t\tparams['display_status'] = blockStatus;\n\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function(data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tvar params = {};\n\t\t\t\t\tif (blockStatus == '1') {\n\t\t\t\t\t\tparams['text'] = app.vtranslate('JS_BLOCK_VISIBILITY_SHOW');\n\t\t\t\t\t} else if (blockStatus == '2') {\n\t\t\t\t\t\tparams['text'] = app.vtranslate('JS_BLOCK_VISIBILITY_DYNAMIC');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tparams['text'] = app.vtranslate('JS_BLOCK_VISIBILITY_HIDE');\n\t\t\t\t\t}\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t})\n\t\t\t\t.fail(function(error) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to register the click event for inactive fields list\n\t\t */\n\t\tregisterInactiveFieldsEvent: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar contents = $('#layoutEditorContainer').find('.contents');\n\t\t\tcontents.on('click', '.js-inactive-fields-btn', function(e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tvar currentBlock = currentTarget.closest('.editFieldsTable');\n\t\t\t\tvar blockId = currentBlock.data('blockId');\n\t\t\t\t//If there are no hidden fields, show pnotify\n\t\t\t\tif ($.isEmptyObject(thisInstance.inActiveFieldsList[blockId])) {\n\t\t\t\t\tvar params = {};\n\t\t\t\t\tparams['text'] = app.vtranslate('JS_NO_HIDDEN_FIELDS_EXISTS');\n\t\t\t\t\tparams['type'] = 'error';\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t} else {\n\t\t\t\t\tvar inActiveFieldsContainer = contents.find('.inactiveFieldsModal').clone(true, true);\n\n\t\t\t\t\tvar callBackFunction = function(data) {\n\t\t\t\t\t\tdata.find('.inactiveFieldsModal')\n\t\t\t\t\t\t\t.removeClass('d-none')\n\t\t\t\t\t\t\t.show();\n\t\t\t\t\t\tthisInstance.reactiveFieldsList = [];\n\t\t\t\t\t\tvar form = data.find('.inactiveFieldsForm');\n\t\t\t\t\t\tthisInstance.showHiddenFields(blockId, form);\n\t\t\t\t\t\t//register click event for reactivate button in the inactive fields modal\n\t\t\t\t\t\tform.on('submit', function(e) {\n\t\t\t\t\t\t\tthisInstance.createReactivateFieldslist(blockId, form);\n\t\t\t\t\t\t\tthisInstance.reActivateHiddenFields(currentBlock);\n\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t});\n\t\t\t\t\t};\n\n\t\t\t\t\tapp.showModalWindow(\n\t\t\t\t\t\tinActiveFieldsContainer,\n\t\t\t\t\t\tfunction(data) {\n\t\t\t\t\t\t\tif (typeof callBackFunction == 'function') {\n\t\t\t\t\t\t\t\tcallBackFunction(data);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ width: '1000px' }\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to show the list of inactive fields in the modal\n\t\t */\n\t\tshowHiddenFields: function(blockId, form) {\n\t\t\tvar thisInstance = this;\n\t\t\t$.each(thisInstance.inActiveFieldsList[blockId], function(key, value) {\n\t\t\t\tvar inActiveField = $(\n\t\t\t\t\t'<div class=\"col-md-4 marginLeftZero padding-bottom1per' +\n\t\t\t\t\t\t' checkbox\"><label class=\"\"><input type=\"checkbox\" class=\"inActiveField\"' +\n\t\t\t\t\t\t' value=\"' +\n\t\t\t\t\t\tkey +\n\t\t\t\t\t\t'\" />&nbsp;' +\n\t\t\t\t\t\tvalue +\n\t\t\t\t\t\t'</label></div>'\n\t\t\t\t);\n\t\t\t\tform.find('.inActiveList').append(inActiveField);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to create the list of reactivate fields list\n\t\t */\n\t\tcreateReactivateFieldslist: function(blockId, form) {\n\t\t\tvar thisInstance = this;\n\t\t\tform.find('.inActiveField').each(function(index, domElement) {\n\t\t\t\tvar element = $(domElement);\n\t\t\t\tvar fieldId = element.val();\n\t\t\t\tif (element.is(':checked')) {\n\t\t\t\t\tdelete thisInstance.inActiveFieldsList[blockId][fieldId];\n\t\t\t\t\tthisInstance.reactiveFieldsList.push(fieldId);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to unHide the selected fields in the inactive fields modal\n\t\t */\n\t\treActivateHiddenFields: function(currentBlock) {\n\t\t\tconst thisInstance = this;\n\t\t\tlet progressIndicatorElement = $.progressIndicator({\n\t\t\t\t\tposition: 'html',\n\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\tenabled: true\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t\tparams = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\taction: 'Field',\n\t\t\t\t\tmode: 'unHide',\n\t\t\t\t\tblockId: currentBlock.data('blockId'),\n\t\t\t\t\tfieldIdList: JSON.stringify(thisInstance.reactiveFieldsList)\n\t\t\t\t},\n\t\t\t\tmessageParams = {};\n\t\t\tif (params.fieldIdList !== '[]') {\n\t\t\t\tAppConnector.request(params)\n\t\t\t\t\t.done(function(data) {\n\t\t\t\t\t\tfor (let index in data.result) {\n\t\t\t\t\t\t\tthisInstance.showCustomField(data.result[index]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tmessageParams.text = app.vtranslate('JS_SELECTED_FIELDS_REACTIVATED');\n\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(messageParams);\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function(error) {\n\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tmessageParams.text = app.vtranslate('JS_NO_ITEM_SELECTED');\n\t\t\t\tmessageParams.type = 'error';\n\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\tSettings_Vtiger_Index_Js.showMessage(messageParams);\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Function to register the click event for delete custom block\n\t\t */\n\t\tregisterDeleteCustomBlockEvent: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar contents = $('#layoutEditorContainer').find('.contents');\n\t\t\tcontents.on('click', '.js-delete-custom-block-btn', function(e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tvar table = currentTarget.closest('div.editFieldsTable');\n\t\t\t\tvar blockId = table.data('blockId');\n\n\t\t\t\tvar message = app.vtranslate('JS_LBL_ARE_YOU_SURE_YOU_WANT_TO_DELETE');\n\t\t\t\tVtiger_Helper_Js.showConfirmationBox({ message: message })\n\t\t\t\t\t.done(function(e) {\n\t\t\t\t\t\tthisInstance.deleteCustomBlock(blockId);\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function(error, err) {});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to delete the custom block\n\t\t */\n\t\tdeleteCustomBlock: function(blockId) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar progressIndicatorElement = $.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tvar params = {};\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['action'] = 'Block';\n\t\t\tparams['mode'] = 'delete';\n\t\t\tparams['blockid'] = blockId;\n\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function(data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tvar params = {};\n\t\t\t\t\tlet result = data.result;\n\t\t\t\t\tif (data['success'] && result.success) {\n\t\t\t\t\t\tthisInstance.removeDeletedBlock(blockId);\n\t\t\t\t\t\tthisInstance.removeBlockFromBlocksList(blockId);\n\t\t\t\t\t\tparams['text'] = app.vtranslate('JS_CUSTOM_BLOCK_DELETED');\n\t\t\t\t\t} else if (result && result.message) {\n\t\t\t\t\t\tparams['text'] = result.message;\n\t\t\t\t\t\tparams['type'] = 'error';\n\t\t\t\t\t}\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t})\n\t\t\t\t.fail(function(error, err) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tapp.errorLog(error, err);\n\t\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to remove the deleted custom block from the ui\n\t\t */\n\t\tremoveDeletedBlock: function(blockId) {\n\t\t\tvar contents = $('#layoutEditorContainer').find('.contents');\n\t\t\tvar deletedTable = contents.find('.block_' + blockId);\n\t\t\tdeletedTable.fadeOut('slow').remove();\n\t\t},\n\t\t/**\n\t\t * Function to register the click event for delete custom field\n\t\t */\n\t\tregisterDeleteCustomFieldEvent: function(contents) {\n\t\t\tconst thisInstance = this;\n\t\t\tif (typeof contents === 'undefined') {\n\t\t\t\tcontents = $('#layoutEditorContainer').find('.contents');\n\t\t\t}\n\t\t\tcontents.find('.deleteCustomField').on('click', function(e) {\n\t\t\t\tlet currentTarget = $(e.currentTarget),\n\t\t\t\t\tfieldId = currentTarget.data('fieldId'),\n\t\t\t\t\tmessage = app.vtranslate('JS_LBL_ARE_YOU_SURE_YOU_WANT_TO_DELETE');\n\t\t\t\tVtiger_Helper_Js.showConfirmationBox({ message: message })\n\t\t\t\t\t.done(function(e) {\n\t\t\t\t\t\tthisInstance\n\t\t\t\t\t\t\t.deleteCustomField(fieldId)\n\t\t\t\t\t\t\t.done(function(data) {\n\t\t\t\t\t\t\t\tlet response = data.result;\n\t\t\t\t\t\t\t\tif (response && response.success) {\n\t\t\t\t\t\t\t\t\tlet field = currentTarget.closest('div.editFields'),\n\t\t\t\t\t\t\t\t\t\tblockId = field.data('blockId');\n\t\t\t\t\t\t\t\t\tfield\n\t\t\t\t\t\t\t\t\t\t.parent()\n\t\t\t\t\t\t\t\t\t\t.fadeOut('slow')\n\t\t\t\t\t\t\t\t\t\t.remove();\n\t\t\t\t\t\t\t\t\tthisInstance.reArrangeBlockFields($('#block_' + blockId));\n\t\t\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({text: app.vtranslate('JS_CUSTOM_FIELD_DELETED')});\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({type: 'error', text: response.message});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function(error, err) {});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to delete the custom field\n\t\t */\n\t\tdeleteCustomField: function(fieldId) {\n\t\t\tvar aDeferred = $.Deferred();\n\t\t\tvar progressIndicatorElement = $.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tvar params = {};\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['action'] = 'Field';\n\t\t\tparams['mode'] = 'delete';\n\t\t\tparams['fieldid'] = fieldId;\n\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function(data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t})\n\t\t\t\t.fail(function(error) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\taDeferred.reject();\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/**\n\t\t * Function to register the cahnge event for mandatory & default checkboxes in edit field details\n\t\t */\n\t\tregisterFieldDetailsChange: function(contents) {\n\t\t\tcontents.find('[name=\"mandatory\"]').on('change', function(e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tif (currentTarget.attr('readonly') !== 'readonly') {\n\t\t\t\t\tvar form = currentTarget.closest('.fieldDetailsForm');\n\t\t\t\t\tvar quickcreateEle = form\n\t\t\t\t\t\t.find('[name=\"quickcreate\"]')\n\t\t\t\t\t\t.filter(':checkbox')\n\t\t\t\t\t\t.not('.optionDisabled');\n\t\t\t\t\tvar presenceEle = form\n\t\t\t\t\t\t.find('[name=\"presence\"]')\n\t\t\t\t\t\t.filter(':checkbox')\n\t\t\t\t\t\t.not('.optionDisabled');\n\t\t\t\t\tif (currentTarget.is(':checked')) {\n\t\t\t\t\t\tquickcreateEle.attr('checked', true).attr('readonly', 'readonly');\n\t\t\t\t\t\tpresenceEle.attr('checked', true).attr('readonly', 'readonly');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tquickcreateEle.removeAttr('readonly');\n\t\t\t\t\t\tpresenceEle.removeAttr('readonly');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tcontents.find('[name=\"defaultvalue\"],[name=\"header_field\"]').on('change', function(e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tvar defaultValueUi = currentTarget.closest('.checkbox').find('.js-toggle-hide');\n\t\t\t\tif (currentTarget.is(':checked')) {\n\t\t\t\t\tdefaultValueUi.removeClass('zeroOpacity');\n\t\t\t\t} else {\n\t\t\t\t\tdefaultValueUi.addClass('zeroOpacity');\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to register the click event for related modules list tab\n\t\t */\n\t\trelatedModulesTabClickEvent: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar contents = $('#layoutEditorContainer').find('.contents');\n\t\t\tvar relatedContainer = contents.find('#relatedTabOrder');\n\t\t\tvar relatedTab = contents.find('.relatedListTab');\n\t\t\trelatedTab.on('click', function() {\n\t\t\t\tif (relatedContainer.find('.relatedTabModulesList').length > 0) {\n\t\t\t\t} else {\n\t\t\t\t\tthisInstance.showRelatedTabModulesList(relatedContainer);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to show the related tab modules list in the tab\n\t\t */\n\t\tshowRelatedTabModulesList: function(relatedContainer) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar params = {};\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['sourceModule'] = $('#selectedModuleName').val();\n\t\t\tparams['view'] = 'Index';\n\t\t\tparams['mode'] = 'showRelatedListLayout';\n\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function(data) {\n\t\t\t\t\trelatedContainer.html(data);\n\t\t\t\t\tif ($(data).find('.relatedListContainer').length > 0) {\n\t\t\t\t\t\tthisInstance.makeRelatedModuleSortable();\n\t\t\t\t\t\tthisInstance.registerRelatedListEvents();\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.fail(function(error) {});\n\t\t},\n\t\t/**\n\t\t * Function to get the respective module layout editor through pjax\n\t\t */\n\t\tgetModuleLayoutEditor: function(selectedModule) {\n\t\t\tvar aDeferred = $.Deferred();\n\t\t\tvar progressIndicatorElement = $.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tvar params = {};\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['view'] = 'Index';\n\t\t\tparams['sourceModule'] = selectedModule;\n\n\t\t\tAppConnector.requestPjax(params)\n\t\t\t\t.done(function(data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t})\n\t\t\t\t.fail(function(error) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\taDeferred.reject();\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\tgetRelModuleLayoutEditor: function(selectedModule) {\n\t\t\tvar aDeferred = $.Deferred();\n\t\t\tvar progressIndicatorElement = $.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tvar params = {};\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['view'] = 'Index';\n\t\t\tparams['mode'] = 'showRelatedListLayout';\n\t\t\tparams['sourceModule'] = selectedModule;\n\n\t\t\tAppConnector.requestPjax(params)\n\t\t\t\t.done(function(data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t})\n\t\t\t\t.fail(function(error) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\taDeferred.reject();\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/**\n\t\t * Function to register the change event for layout editor modules list\n\t\t */\n\t\tregisterModulesChangeEvent: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar container = $('#layoutEditorContainer');\n\t\t\tvar contentsDiv = container.closest('.contentsDiv');\n\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(container.find('[name=\"layoutEditorModules\"]'));\n\n\t\t\tcontainer.on('change', '[name=\"layoutEditorModules\"]', function(e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tvar selectedModule = currentTarget.val();\n\t\t\t\tthisInstance.getModuleLayoutEditor(selectedModule).done(function(data) {\n\t\t\t\t\tcontentsDiv.html(data);\n\t\t\t\t\tthisInstance.registerEvents();\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterRelModulesChangeEvent: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar container = $('#layoutEditorContainer');\n\t\t\tvar contentsDiv = container.closest('.contentsDiv');\n\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(container.find('[name=\"layoutEditorRelModules\"]'));\n\n\t\t\tcontainer.on('change', '[name=\"layoutEditorRelModules\"]', function(e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tvar selectedModule = currentTarget.val();\n\t\t\t\tthisInstance.getRelModuleLayoutEditor(selectedModule).done(function(data) {\n\t\t\t\t\tcontentsDiv.html(data);\n\t\t\t\t\tthisInstance.registerEvents();\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tlockCheckbox: function(contents) {\n\t\t\tcontents.on('change', ':checkbox', function(e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tif (currentTarget.attr('readonly') === 'readonly') {\n\t\t\t\t\tvar status = $(e.currentTarget).is(':checked');\n\t\t\t\t\tif (!status) {\n\t\t\t\t\t\t$(e.currentTarget).prop('checked', true);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$(e.currentTarget).prop('checked', false);\n\t\t\t\t\t}\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterEditFieldDetailsClick: function(contents) {\n\t\t\tvar thisInstance = this;\n\t\t\tif (typeof contents === 'undefined') {\n\t\t\t\tcontents = $('#layoutEditorContainer').find('.contents');\n\t\t\t}\n\t\t\tcontents.find('.editFieldDetails').on('click', function(e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tvar fieldRow = currentTarget.closest('div.editFields');\n\t\t\t\tvar fieldId = fieldRow.data('fieldId');\n\t\t\t\tvar block = fieldRow.closest('.editFieldsTable');\n\t\t\t\tvar blockId = block.data('blockId');\n\t\t\t\tapp.showModalWindow({\n\t\t\t\t\turl:\n\t\t\t\t\t\t'index.php?parent=Settings&module=LayoutEditor&view=EditField&fieldId=' +\n\t\t\t\t\t\tfieldRow.data('fieldId'),\n\t\t\t\t\tcb: function(modalContainer) {\n\t\t\t\t\t\tthisInstance.registerFieldDetailsChange(modalContainer);\n\t\t\t\t\t\tthisInstance.lockCheckbox(modalContainer);\n\t\t\t\t\t\tthisInstance.registerVaribleToParsers(modalContainer);\n\t\t\t\t\t\tapp.registerEventForClockPicker(modalContainer.find('.clockPicker'));\n\t\t\t\t\t\tmodalContainer.find('[data-inputmask]').inputmask();\n\t\t\t\t\t},\n\t\t\t\t\tsendByAjaxCb: (formData, response) => {\n\t\t\t\t\t\tif (!response.success) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({\n\t\t\t\t\t\t\ttext: app.vtranslate('JS_FIELD_DETAILS_SAVED')\n\t\t\t\t\t\t});\n\t\t\t\t\t\tlet result = response['result'];\n\t\t\t\t\t\tlet fieldLabel = fieldRow.find('.fieldLabel');\n\t\t\t\t\t\tif (result['presence'] === '1') {\n\t\t\t\t\t\t\tfieldRow\n\t\t\t\t\t\t\t\t.parent()\n\t\t\t\t\t\t\t\t.fadeOut('slow')\n\t\t\t\t\t\t\t\t.remove();\n\t\t\t\t\t\t\tif ($.isEmptyObject(thisInstance.inActiveFieldsList[blockId])) {\n\t\t\t\t\t\t\t\tif (thisInstance.inActiveFieldsList.length === 0) {\n\t\t\t\t\t\t\t\t\tthisInstance.inActiveFieldsList = {};\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tthisInstance.inActiveFieldsList[blockId] = {};\n\t\t\t\t\t\t\t\tthisInstance.inActiveFieldsList[blockId][fieldId] = result['label'];\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthisInstance.inActiveFieldsList[blockId][fieldId] = result['label'];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthisInstance.reArrangeBlockFields(block);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (result['mandatory']) {\n\t\t\t\t\t\t\tif (fieldLabel.find('.redColor').length === 0) {\n\t\t\t\t\t\t\t\tfieldRow.find('.fieldLabel').append($('<span class=\"redColor\">*</span>'));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tfieldRow\n\t\t\t\t\t\t\t\t.find('.fieldLabel')\n\t\t\t\t\t\t\t\t.find('.redColor')\n\t\t\t\t\t\t\t\t.remove();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterVaribleToParsers: function(container) {\n\t\t\tcontainer.find('.configButton').on('click', function(e) {\n\t\t\t\tcontainer.find('.js-toggle-hide .js-base-element').each(function(n, e) {\n\t\t\t\t\tvar currentElement = $(e);\n\t\t\t\t\tif (currentElement.hasClass('d-none')) {\n\t\t\t\t\t\tcurrentElement.find('input,select').prop('disabled', false);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcurrentElement.find('input,select').prop('disabled', true);\n\t\t\t\t\t}\n\t\t\t\t\tcurrentElement.toggleClass('d-none');\n\t\t\t\t});\n\t\t\t});\n\t\t\tcontainer.find('.varibleToParsers').on('click', function(e) {\n\t\t\t\tlet element = $(e.currentTarget);\n\t\t\t\tlet container = element.closest('.js-base-element');\n\t\t\t\tlet input = container.find('[name=\"' + container.data('name') + '\"]');\n\t\t\t\tlet fieldId = element\n\t\t\t\t\t.closest('form')\n\t\t\t\t\t.find('[name=\"fieldid\"]')\n\t\t\t\t\t.val();\n\t\t\t\tlet id = 'varibleToParsersModal';\n\t\t\t\tapp.showModalWindow({\n\t\t\t\t\tid: id,\n\t\t\t\t\turl:\n\t\t\t\t\t\t'index.php?parent=Settings&module=LayoutEditor&view=VaribleToParsers&fieldId=' +\n\t\t\t\t\t\tfieldId +\n\t\t\t\t\t\t'&defaultValue=' +\n\t\t\t\t\t\tinput.val(),\n\t\t\t\t\tcb: function(modalContainer) {\n\t\t\t\t\t\tmodalContainer.find('[name=\"saveButton\"]').on('click', function() {\n\t\t\t\t\t\t\tinput.val(modalContainer.find('select').val());\n\t\t\t\t\t\t\tapp.hideModalWindow(null, id);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t\tApp.Fields.Tree.register(container);\n\t\t},\n\t\t/**\n\t\t * Function to register all the events for blocks\n\t\t */\n\t\tregisterBlockEvents: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tthisInstance.makeBlocksListSortable();\n\t\t\tthisInstance.registerAddCustomFieldEvent();\n\t\t\tthisInstance.registerBlockVisibilityEvent();\n\t\t\tthisInstance.registerInactiveFieldsEvent();\n\t\t\tthisInstance.registerDeleteCustomBlockEvent();\n\t\t},\n\t\t/**\n\t\t * Function to register all the events for fields\n\t\t */\n\t\tregisterFieldEvents: function(contents) {\n\t\t\tvar thisInstance = this;\n\t\t\tif (typeof contents === 'undefined') {\n\t\t\t\tcontents = $('#layoutEditorContainer').find('.contents');\n\t\t\t}\n\t\t\tApp.Fields.Date.register(contents);\n\t\t\tApp.Fields.Picklist.changeSelectElementView(contents);\n\t\t\tthisInstance.makeFieldsListSortable();\n\t\t\tthisInstance.registerDeleteCustomFieldEvent(contents);\n\t\t\tthisInstance.registerEditFieldDetailsClick(contents);\n\n\t\t\tcontents.find(':checkbox').on('change', function(e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tif (currentTarget.attr('readonly') == 'readonly') {\n\t\t\t\t\tvar status = $(e.currentTarget).is(':checked');\n\t\t\t\t\tif (!status) {\n\t\t\t\t\t\t$(e.currentTarget).prop('checked', true);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$(e.currentTarget).prop('checked', false);\n\t\t\t\t\t}\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to register switch\n\t\t */\n\t\tregisterSwitch: function() {\n\t\t\tvar container = $('#layoutEditorContainer');\n\t\t\tcontainer.find('.js-switch--inventory').on('click', function(event) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tvar switchBtn = $(event.currentTarget);\n\t\t\t\tvar state = switchBtn.data('value');\n\t\t\t\tvar message = app.vtranslate('JS_EXTENDED_MODULE');\n\t\t\t\tVtiger_Helper_Js.showConfirmationBox({\n\t\t\t\t\tmessage: '<span class=\"message-medium\">' + message + '</span>',\n\t\t\t\t\tclassName: 'test'\n\t\t\t\t}).done(function(e) {\n\t\t\t\t\tlet progress = $.progressIndicator({\n\t\t\t\t\t\tmessage: app.vtranslate('JS_SAVE_LOADER_INFO'),\n\t\t\t\t\t\tposition: 'html',\n\t\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\t\tenabled: true\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tvar params = {};\n\t\t\t\t\tparams['sourceModule'] = container.find('[name=\"layoutEditorModules\"]').val();\n\t\t\t\t\tparams['type'] = state;\n\t\t\t\t\tapp.saveAjax('changeModuleType', null, params).done(function(data) {\n\t\t\t\t\t\tif (data.result) {\n\t\t\t\t\t\t\tif (data.result.success) {\n\t\t\t\t\t\t\t\tcontainer.find('.js-switch--inventory').prop('disabled', true);\n\t\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({ type: 'success', text: data.result.message });\n\t\t\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to adding inventory field\n\t\t */\n\t\tregisterAddInventoryField() {\n\t\t\tconst thisInstance = this;\n\t\t\tlet container = thisInstance.getInventoryViewLayout();\n\t\t\tcontainer.find('.addInventoryField').on('click', e => {\n\t\t\t\tlet currentTarget = $(e.currentTarget);\n\t\t\t\tlet selectedModule = $('#layoutEditorContainer')\n\t\t\t\t\t.find('[name=\"layoutEditorModules\"]')\n\t\t\t\t\t.val();\n\t\t\t\tlet blockId = currentTarget.closest('.inventoryBlock').data('block-id');\n\t\t\t\tconst progress = $.progressIndicator();\n\t\t\t\tapp.showModalWindow(\n\t\t\t\t\tnull,\n\t\t\t\t\t'index.php?module=LayoutEditor&parent=Settings&view=CreateInventoryFields&mode=step1&sourceModule=' +\n\t\t\t\t\t\tselectedModule +\n\t\t\t\t\t\t'&block=' +\n\t\t\t\t\t\tblockId,\n\t\t\t\t\tmodalContainer => {\n\t\t\t\t\t\tapp.showScrollBar(modalContainer.find('.well'), {\n\t\t\t\t\t\t\theight: '300px'\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthisInstance.registerStep1(modalContainer, blockId);\n\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to editing inventory field\n\t\t */\n\t\tregisterEditInventoryField: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar container = thisInstance.getInventoryViewLayout();\n\t\t\tcontainer.find('.editInventoryField').on('click', function(e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tvar selectedModule = $('#layoutEditorContainer')\n\t\t\t\t\t.find('[name=\"layoutEditorModules\"]')\n\t\t\t\t\t.val();\n\t\t\t\tvar blockId = currentTarget.closest('.inventoryBlock').data('block-id');\n\t\t\t\tvar editField = currentTarget.closest('.editFields');\n\t\t\t\tvar progress = $.progressIndicator();\n\t\t\t\tapp.showModalWindow(\n\t\t\t\t\tnull,\n\t\t\t\t\t'index.php?module=LayoutEditor&parent=Settings&view=CreateInventoryFields&mode=step2&sourceModule=' +\n\t\t\t\t\t\tselectedModule +\n\t\t\t\t\t\t'&type=' +\n\t\t\t\t\t\teditField.data('type') +\n\t\t\t\t\t\t'&fieldName=' +\n\t\t\t\t\t\teditField.data('name'),\n\t\t\t\t\tfunction(container) {\n\t\t\t\t\t\tapp.showPopoverElementView(container.find('.js-help-info'));\n\t\t\t\t\t\tthisInstance.registerStep2(container, blockId);\n\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to adding inventory field first step\n\t\t *\n\t\t * @param {jQuery} container\n\t\t * @param {int} blockId\n\t\t */\n\t\tregisterStep1(container, blockId) {\n\t\t\tconst thisInstance = this;\n\t\t\tcontainer.find('.js-next-button').on('click', e => {\n\t\t\t\tlet selectedModule = $('#layoutEditorContainer')\n\t\t\t\t\t.find('[name=\"layoutEditorModules\"]')\n\t\t\t\t\t.val();\n\t\t\t\tlet type = container.find('select.type').val();\n\t\t\t\tif (type === null) {\n\t\t\t\t\tcontainer\n\t\t\t\t\t\t.find('select.type')\n\t\t\t\t\t\t.validationEngine('showPrompt', app.vtranslate('JS_REQUIRED_FIELD'), 'error', 'topRight', true);\n\t\t\t\t} else {\n\t\t\t\t\tapp.hideModalWindow(() => {\n\t\t\t\t\t\tconst progress = $.progressIndicator({\n\t\t\t\t\t\t\tposition: 'html',\n\t\t\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\t\t\tenabled: true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tapp.showModalWindow(\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t'index.php?module=LayoutEditor&parent=Settings&view=CreateInventoryFields&mode=step2&sourceModule=' +\n\t\t\t\t\t\t\t\tselectedModule +\n\t\t\t\t\t\t\t\t'&type=' +\n\t\t\t\t\t\t\t\ttype,\n\t\t\t\t\t\t\tmodalContainer => {\n\t\t\t\t\t\t\t\tthisInstance.registerStep2(modalContainer, blockId);\n\t\t\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to save inventory field\n\t\t */\n\t\tregisterStep2: function(container, blockId) {\n\t\t\tlet thisInstance = this;\n\t\t\tlet containerInventory = thisInstance.getInventoryViewLayout();\n\t\t\tlet form = container.find('form');\n\t\t\tlet selectedModule = $('#layoutEditorContainer')\n\t\t\t\t.find('[name=\"layoutEditorModules\"]')\n\t\t\t\t.val();\n\t\t\tform.validationEngine(app.validationEngineOptions);\n\t\t\tform.on('submit', function(e) {\n\t\t\t\tlet formData = form.serializeFormData();\n\t\t\t\tlet paramsName = container.find('#params');\n\t\t\t\tif (paramsName.length) {\n\t\t\t\t\tparamsName = JSON.parse(paramsName.val());\n\t\t\t\t\tlet params = {};\n\t\t\t\t\tfor (let i in formData) {\n\t\t\t\t\t\tif ($.inArray(i, paramsName) != -1) {\n\t\t\t\t\t\t\tlet value = formData[i];\n\t\t\t\t\t\t\tif (i === 'modules' && typeof value === 'string') {\n\t\t\t\t\t\t\t\tvalue = [value];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tparams[i] = value;\n\t\t\t\t\t\t\tdelete formData[i];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tformData.params = JSON.stringify(params);\n\t\t\t\t}\n\t\t\t\tlet errorExists = form.validationEngine('validate');\n\t\t\t\tif (errorExists != false) {\n\t\t\t\t\tformData.block = blockId;\n\t\t\t\t\tformData.sourceModule = selectedModule;\n\t\t\t\t\tapp.saveAjax('saveInventoryField', null, formData).done(function(data) {\n\t\t\t\t\t\tlet result = data.result,\n\t\t\t\t\t\t\tsuccess = data.success;\n\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\tif (success && result && result.edit) {\n\t\t\t\t\t\t\tlet liElement = containerInventory.find('[data-id=\"' + result.data.id + '\"]');\n\t\t\t\t\t\t\tliElement.find('.fieldLabel').text(result.data.translate);\n\t\t\t\t\t\t} else if (success && result) {\n\t\t\t\t\t\t\tlet newLiElement = containerInventory.find('.newLiElement').clone(true, true);\n\t\t\t\t\t\t\tnewLiElement\n\t\t\t\t\t\t\t\t.removeClass('d-none newLiElement')\n\t\t\t\t\t\t\t\t.find('.editFields')\n\t\t\t\t\t\t\t\t.attr('data-id', result.data.id)\n\t\t\t\t\t\t\t\t.attr('data-sequence', result.data.sequence)\n\t\t\t\t\t\t\t\t.attr('data-name', result.data.columnName)\n\t\t\t\t\t\t\t\t.attr('data-type', result.data.invtype)\n\t\t\t\t\t\t\t\t.find('.fieldLabel')\n\t\t\t\t\t\t\t\t.text(result.data.translate);\n\t\t\t\t\t\t\tcontainerInventory\n\t\t\t\t\t\t\t\t.find('[data-block-id=\"' + result.data.block + '\"] .connectedSortable')\n\t\t\t\t\t\t\t\t.append(newLiElement);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tVtiger_Helper_Js.showPnotify(app.vtranslate('JS_ERROR'));\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t\tcontainer.find('form').on('submit', function(event) {\n\t\t\t\tevent.preventDefault();\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to register click event for save button of fields sequence\n\t\t */\n\t\tregisterInventoryFieldSequenceSaveClick: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar containerInventory = thisInstance.getInventoryViewLayout();\n\t\t\tvar selectedModule = $('#layoutEditorContainer')\n\t\t\t\t.find('[name=\"layoutEditorModules\"]')\n\t\t\t\t.val();\n\t\t\tcontainerInventory.on('click', '.saveFieldSequence', function(e) {\n\t\t\t\tvar button = $(e.currentTarget);\n\t\t\t\tvar target = button.closest('.inventoryBlock');\n\t\t\t\tvar fieldId = [];\n\t\t\t\ttarget.find('.editFields').each(function() {\n\t\t\t\t\tfieldId.push($(this).data('id'));\n\t\t\t\t});\n\t\t\t\tapp.saveAjax('saveSequence', null, { sourceModule: selectedModule, ids: fieldId }).done(function(data) {\n\t\t\t\t\tbutton.addClass('invisible');\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * removing elements in advanced blocks\n\t\t */\n\t\tregisterDeleteInventoryField: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar container = thisInstance.getInventoryViewLayout();\n\t\t\tvar selectedModule = $('#layoutEditorContainer')\n\t\t\t\t.find('[name=\"layoutEditorModules\"]')\n\t\t\t\t.val();\n\t\t\tcontainer.find('.deleteInventoryField').on('click', function(e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tvar liElement = currentTarget.closest('li');\n\t\t\t\tvar message = app.vtranslate('JS_DELETE_INVENTORY_CONFIRMATION');\n\t\t\t\tVtiger_Helper_Js.showConfirmationBox({ message: message })\n\t\t\t\t\t.done(function(e) {\n\t\t\t\t\t\tvar progressIndicatorElement = $.progressIndicator({\n\t\t\t\t\t\t\tmessage: app.vtranslate('JS_SAVE_LOADER_INFO'),\n\t\t\t\t\t\t\tposition: 'html',\n\t\t\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\t\t\tenabled: true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tvar editFields = liElement.find('.editFields');\n\t\t\t\t\t\tapp.saveAjax('delete', null, {\n\t\t\t\t\t\t\tsourceModule: selectedModule,\n\t\t\t\t\t\t\tfieldName: editFields.data('name')\n\t\t\t\t\t\t}).done(function(response) {\n\t\t\t\t\t\t\tlet param = {};\n\t\t\t\t\t\t\tif (response.result) {\n\t\t\t\t\t\t\t\tliElement.remove();\n\t\t\t\t\t\t\t\tparam = { type: 'success', text: app.vtranslate('JS_SAVE_CHANGES') };\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tparam = { type: 'error', text: app.vtranslate('JS_ERROR') };\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(param);\n\t\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t});\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function(error, err) {\n\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Loading list of fields for a related module\n\t\t */\n\t\tloadMultiReferenceFields: function(form) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar module = form.find('[name=\"MRVModule\"]').val();\n\t\t\tform.find('[name=\"MRVField\"],[name=\"MRVFilterField\"]').select2('destroy');\n\t\t\tform.find('[name=\"MRVField\"]').html(thisInstance.cacheMRVField.html());\n\t\t\tform.find('[name=\"MRVField\"] optgroup').each(function(index) {\n\t\t\t\tif ($(this).data('module') != module) {\n\t\t\t\t\t$(this).remove();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tform.find('[name=\"MRVFilterField\"]').html(thisInstance.cacheMRVFilter.html());\n\t\t\tform.find('[name=\"MRVFilterField\"] option').each(function(index) {\n\t\t\t\tif ($(this).data('module') != module) {\n\t\t\t\t\t$(this).remove();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(form.find('[name=\"MRVField\"],[name=\"MRVFilterField\"]'), {\n\t\t\t\twidth: '100%'\n\t\t\t});\n\t\t},\n\t\tcacheMRVField: false,\n\t\tcacheMRVFilter: false,\n\t\t/**\n\t\t * Loading list of fields for a related module\n\t\t */\n\t\tregisterMultiReferenceFieldsChangeEvent: function(form) {\n\t\t\tvar thisInstance = this;\n\t\t\tthisInstance.cacheMRVField = form.find('[name=\"MRVField\"]').clone(true, true);\n\t\t\tthisInstance.cacheMRVFilter = form.find('[name=\"MRVFilterField\"]').clone(true, true);\n\n\t\t\tform.find('[name=\"MRVModule\"]').on('change', function(e) {\n\t\t\t\tthisInstance.loadMultiReferenceFields(form);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Loading list of fields for a related module\n\t\t */\n\t\tregisterMultiReferenceFilterFieldChangeEvent: function(form) {\n\t\t\tform.find('[name=\"MRVFilterField\"]').on('change', function(e) {\n\t\t\t\tvar params = {};\n\t\t\t\tparams['module'] = app.getModuleName();\n\t\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\t\tparams['action'] = 'Field';\n\t\t\t\tparams['mode'] = 'getPicklist';\n\t\t\t\tparams['rfield'] = form.find('[name=\"MRVFilterField\"]').val();\n\t\t\t\tparams['rmodule'] = form.find('[name=\"MRVModule\"]').val();\n\n\t\t\t\tform.find('[name=\"MRVFilterValue\"]').select2('destroy');\n\t\t\t\tform.find('[name=\"MRVFilterValue\"] option').remove();\n\t\t\t\tAppConnector.request(params).done(function(data) {\n\t\t\t\t\t$.each(data.result, function(index, value) {\n\t\t\t\t\t\tform.find('[name=\"MRVFilterValue\"]').append(\n\t\t\t\t\t\t\t$('<option>')\n\t\t\t\t\t\t\t\t.val(index)\n\t\t\t\t\t\t\t\t.html(value)\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(form.find('[name=\"MRVFilterValue\"]'), { width: '100%' });\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register label copy\n\t\t */\n\t\tregisterCopyClipboard: function() {\n\t\t\tnew ClipboardJS('.copyFieldLabel', {\n\t\t\t\ttext: function(trigger) {\n\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\ttext: app.vtranslate('JS_NOTIFY_COPY_TEXT'),\n\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t});\n\t\t\t\t\treturn $('#layoutEditorContainer')\n\t\t\t\t\t\t.find('#' + trigger.getAttribute('data-target'))\n\t\t\t\t\t\t.val();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Context help\n\t\t * @param {jQuery} container\n\t\t */\n\t\tregisterContextHelp: function() {\n\t\t\t$(document).on('click', '.js-context-help', function(e) {\n\t\t\t\tconst customConfig = {\n\t\t\t\t\ttoolbar: 'Min'\n\t\t\t\t};\n\t\t\t\tconst element = $(e.currentTarget);\n\t\t\t\tlet progressInstance = $.progressIndicator({\n\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\tenabled: true\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tAppConnector.request({\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\tview: 'HelpInfo',\n\t\t\t\t\tfield: element.data('field-id')\n\t\t\t\t}).done(function(data) {\n\t\t\t\t\tapp.showModalWindow(data, modalContainer => {\n\t\t\t\t\t\tprogressInstance.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tapp.showPopoverElementView(modalContainer.find('.js-help-info'));\n\t\t\t\t\t\tnew App.Fields.Text.Editor(modalContainer.find('.js-context-area:visible'), customConfig);\n\t\t\t\t\t\tmodalContainer.find('.js-lang').on('change', function(e) {\n\t\t\t\t\t\t\tlet previous = modalContainer.find('.js-editor:not([disabled])');\n\t\t\t\t\t\t\tApp.Fields.Text.destroyEditor(previous);\n\t\t\t\t\t\t\tprevious.closest('.js-context-block').addClass('d-none');\n\t\t\t\t\t\t\tprevious.prop('disabled', true);\n\t\t\t\t\t\t\tlet element = $(e.currentTarget).val();\n\t\t\t\t\t\t\tlet textArea = modalContainer.find('#' + element + '.js-context-area');\n\t\t\t\t\t\t\ttextArea.prop('disabled', false);\n\t\t\t\t\t\t\ttextArea.closest('.js-context-block').removeClass('d-none');\n\t\t\t\t\t\t\tApp.Fields.Text.destroyEditor(textArea);\n\t\t\t\t\t\t\tmodalContainer.find('.js-help-info').attr('data-content', textArea.val());\n\t\t\t\t\t\t\tnew App.Fields.Text.Editor(textArea, customConfig);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tmodalContainer.find('form').on('submit', function(e) {\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\tvar form = $(e.currentTarget);\n\t\t\t\t\t\t\tvar params = form.serializeFormData();\n\t\t\t\t\t\t\tif (typeof params.views === 'undefined') {\n\t\t\t\t\t\t\t\tparams.views = form.find('[name=\"views\"]').val();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tapp.saveAjax('contextHelp', '', params).done(function(data) {\n\t\t\t\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\t\t\t\ttype: 'success',\n\t\t\t\t\t\t\t\t\ttext: app.vtranslate('JS_SAVE_CHANGES')\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tlet prefix = form.find('.js-lang').val();\n\t\t\t\t\t\t\t\tlet textArea = form.find('#' + prefix + '.js-context-area');\n\t\t\t\t\t\t\t\tform.find('.js-help-info').attr('data-content', textArea.val());\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * register events for layout editor\n\t\t */\n\t\tregisterEvents: function() {\n\t\t\tvar thisInstance = this;\n\n\t\t\tthisInstance.registerBlockEvents();\n\t\t\tthisInstance.registerFieldEvents();\n\t\t\tthisInstance.setInactiveFieldsList();\n\t\t\tthisInstance.registerAddCustomBlockEvent();\n\n\t\t\tthisInstance.relatedModulesTabClickEvent();\n\t\t\tthisInstance.registerModulesChangeEvent();\n\t\t\tthisInstance.registerRelModulesChangeEvent();\n\n\t\t\tif (1 === $('#relatedTabOrder').length) {\n\t\t\t\tthisInstance.registerRelatedListEvents();\n\t\t\t\tthisInstance.makeRelatedModuleSortable();\n\t\t\t}\n\n\t\t\tthisInstance.registerSwitch();\n\t\t\tthisInstance.registerAddInventoryField();\n\t\t\tthisInstance.registerEditInventoryField();\n\t\t\tthisInstance.registerInventoryFieldSequenceSaveClick();\n\t\t\tthisInstance.registerDeleteInventoryField();\n\t\t\tthis.registerFieldSequenceSaveClick();\n\t\t},\n\t\tregisterBasicEvents: function() {\n\t\t\tvar container = $('#layoutEditorContainer');\n\t\t\tthis.registerEvents();\n\t\t\tthis.registerCopyClipboard();\n\t\t\tthis.registerContextHelp(container);\n\t\t}\n\t}\n);\n\n$(document).ready(function() {\n\tvar instance = new Settings_LayoutEditor_Js();\n\tinstance.registerBasicEvents();\n});\n\nVtiger_WholeNumberGreaterThanZero_Validator_Js(\n\t'Vtiger_FloatingDigits_Validator_Js',\n\t{\n\t\t/**\n\t\t *Function which invokes field validation\n\t\t *@param accepts field element as parameter\n\t\t * @return error if validation fails true on success\n\t\t */\n\t\tinvokeValidation: function(field, rules, i, options) {\n\t\t\tvar rangeInstance = new Vtiger_FloatingDigits_Validator_Js();\n\t\t\trangeInstance.setElement(field);\n\t\t\tvar response = rangeInstance.validate();\n\t\t\tif (response != true) {\n\t\t\t\treturn rangeInstance.getError();\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t/**\n\t\t * Function to validate the decimals length\n\t\t * @return true if validation is successfull\n\t\t * @return false if validation error occurs\n\t\t */\n\t\tvalidate: function() {\n\t\t\tvar response = this._super();\n\t\t\tif (response != true) {\n\t\t\t\treturn response;\n\t\t\t} else {\n\t\t\t\tvar fieldValue = this.getFieldValue();\n\t\t\t\tif (fieldValue < 2 || fieldValue > 5) {\n\t\t\t\t\tvar errorInfo = app.vtranslate('JS_PLEASE_ENTER_NUMBER_IN_RANGE_2TO5');\n\t\t\t\t\tthis.setError(errorInfo);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tvar specialChars = /^[+]/;\n\t\t\t\tif (specialChars.test(fieldValue)) {\n\t\t\t\t\tvar error = app.vtranslate('JS_CONTAINS_ILLEGAL_CHARACTERS');\n\t\t\t\t\tthis.setError(error);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n);\n\nVtiger_WholeNumberGreaterThanZero_Validator_Js(\n\t'Vtiger_DecimalMaxLength_Validator_Js',\n\t{\n\t\t/**\n\t\t *Function which invokes field validation\n\t\t *@param accepts field element as parameter\n\t\t * @return error if validation fails true on success\n\t\t */\n\t\tinvokeValidation: function(field, rules, i, options) {\n\t\t\tvar rangeInstance = new Vtiger_DecimalMaxLength_Validator_Js();\n\t\t\trangeInstance.setElement(field);\n\t\t\tvar response = rangeInstance.validate();\n\t\t\tif (response != true) {\n\t\t\t\treturn rangeInstance.getError();\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t/**\n\t\t * Function to validate the fieldLength\n\t\t * @return true if validation is successfull\n\t\t * @return false if validation error occurs\n\t\t */\n\t\tvalidate: function() {\n\t\t\tvar response = this._super();\n\t\t\tif (response != true) {\n\t\t\t\treturn response;\n\t\t\t} else {\n\t\t\t\tvar fieldValue = this.getFieldValue();\n\t\t\t\tvar decimalFieldValue = $('#createFieldForm')\n\t\t\t\t\t.find('[name=\"decimal\"]')\n\t\t\t\t\t.val();\n\t\t\t\tvar fieldLength = parseInt(64) - parseInt(decimalFieldValue);\n\t\t\t\tif (fieldValue > fieldLength && !(fieldLength < 0) && fieldLength >= 59) {\n\t\t\t\t\tvar errorInfo = app.vtranslate('JS_LENGTH_SHOULD_BE_LESS_THAN_EQUAL_TO') + ' ' + fieldLength;\n\t\t\t\t\tthis.setError(errorInfo);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tvar specialChars = /^[+]/;\n\t\t\t\tif (specialChars.test(fieldValue)) {\n\t\t\t\t\tvar error = app.vtranslate('JS_CONTAINS_ILLEGAL_CHARACTERS');\n\t\t\t\t\tthis.setError(error);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n);\n\nVtiger_WholeNumberGreaterThanZero_Validator_Js(\n\t'Vtiger_MaxLength_Validator_Js',\n\t{\n\t\t/**\n\t\t *Function which invokes field validation\n\t\t *@param accepts field element as parameter\n\t\t * @return error if validation fails true on success\n\t\t */\n\t\tinvokeValidation: function(field, rules, i, options) {\n\t\t\tvar rangeInstance = new Vtiger_DecimalMaxLength_Validator_Js();\n\t\t\trangeInstance.setElement(field);\n\t\t\tvar response = rangeInstance.validate();\n\t\t\tif (response != true) {\n\t\t\t\treturn rangeInstance.getError();\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t/**\n\t\t * Function to validate the fieldLength\n\t\t * @return true if validation is successfull\n\t\t * @return false if validation error occurs\n\t\t */\n\t\tvalidate: function() {\n\t\t\tvar response = this._super();\n\t\t\tif (response != true) {\n\t\t\t\treturn response;\n\t\t\t} else {\n\t\t\t\tvar fieldValue = this.getFieldValue();\n\t\t\t\tif (fieldValue > 255) {\n\t\t\t\t\tvar errorInfo = app.vtranslate('JS_LENGTH_SHOULD_BE_LESS_THAN_EQUAL_TO') + ' 255';\n\t\t\t\t\tthis.setError(errorInfo);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tvar specialChars = /^[+]/;\n\t\t\t\tif (specialChars.test(fieldValue)) {\n\t\t\t\t\tvar error = app.vtranslate('JS_CONTAINS_ILLEGAL_CHARACTERS');\n\t\t\t\t\tthis.setError(error);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n);\n\nVtiger_Base_Validator_Js(\n\t'Vtiger_FieldLabel_Validator_Js',\n\t{\n\t\t/**\n\t\t *Function which invokes field validation\n\t\t *@param accepts field element as parameter\n\t\t * @return error if validation fails true on success\n\t\t */\n\t\tinvokeValidation: function(field, rules, i, options) {\n\t\t\tvar instance = new Vtiger_FieldLabel_Validator_Js();\n\t\t\tinstance.setElement(field);\n\t\t\tvar response = instance.validate();\n\t\t\tif (response != true) {\n\t\t\t\treturn instance.getError();\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t/**\n\t\t * Function to validate the field label\n\t\t * @return true if validation is successfull\n\t\t * @return false if validation error occurs\n\t\t */\n\t\tvalidate: function() {\n\t\t\tvar fieldValue = this.getFieldValue();\n\t\t\treturn this.validateValue(fieldValue);\n\t\t},\n\t\tvalidateValue: function(fieldValue) {\n\t\t\tvar specialChars = /[&\\<\\>\\:\\'\\\"\\,]/;\n\n\t\t\tif (specialChars.test(fieldValue)) {\n\t\t\t\tvar errorInfo =\n\t\t\t\t\tapp.vtranslate('JS_SPECIAL_CHARACTERS') + ' & < > \\' \" : , ' + app.vtranslate('JS_NOT_ALLOWED');\n\t\t\t\tthis.setError(errorInfo);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t}\n);\n\nVtiger_Base_Validator_Js(\n\t'Vtiger_PicklistFieldValues_Validator_Js',\n\t{\n\t\t/**\n\t\t *Function which invokes field validation\n\t\t *@param accepts field element as parameter\n\t\t * @return error if validation fails true on success\n\t\t */\n\t\tinvokeValidation: function(field, rules, i, options) {\n\t\t\tlet instance = new Vtiger_PicklistFieldValues_Validator_Js();\n\t\t\tinstance.setElement(field);\n\t\t\tlet response = instance.validate();\n\t\t\tif (response != true) {\n\t\t\t\treturn instance.getError();\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t/**\n\t\t * Function to validate the field label\n\t\t * @return true if validation is successfull\n\t\t * @return false if validation error occurs\n\t\t */\n\t\tvalidate: function() {\n\t\t\treturn this.validateValue(this.getElement().val());\n\t\t},\n\t\tvalidateValue: function(fieldValue) {\n\t\t\tlet specialChars = /[\\<\\>\\\"\\,\\#]/;\n\t\t\tlet r = true;\n\t\t\t$.each(fieldValue, (i, val) => {\n\t\t\t\tif (specialChars.test(val)) {\n\t\t\t\t\tthis.setError(\n\t\t\t\t\t\tapp.vtranslate('JS_SPECIAL_CHARACTERS') + ' < > \" , # ' + app.vtranslate('JS_NOT_ALLOWED')\n\t\t\t\t\t);\n\t\t\t\t\tr = false;\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn r;\n\t\t}\n\t}\n);\n"],"names":["$","Class","json","find","length","this","inActiveFieldsList","JSON","parse","val","thisInstance","contents","table","sortable","e","ui","updateBlockSequence","progressIndicatorElement","progressIndicator","sequence","stringify","updateBlocksListByOrder","params","app","getModuleName","getParentModuleName","request","done","data","mode","vtranslate","showMessage","fail","error","each","index","domElement","blockTable","blockId","expectedBlockSequence","updatedBlockSequence","relatedList","Fields","Picklist","showSelect2ElementView","updateSelectedFields","currentTarget","on","relatedModule","closest","removeClass","show","hide","changeStatusRelatedModule","removeRelation","changeStateFavorites","validationEngine","changeRelatedViewType","container","contentsDiv","addRelationContainer","clone","callBackFunction","not","addClass","form","serializeFormData","extend","response","result","success","getRelModuleLayoutEditor","html","registerEvents","message","type","text","showModalWindow","target","selectedFields","push","relatedModulesContainer","modulesList","updateSequenceRelatedModule","status","relationId","showConfirmationBox","remove","err","modules","getSelectedFields","containment","currentField","hasClass","showSaveFieldSequenceButton","getDetailViewLayout","createUpdatedBlocksList","sender","olderBlock","reArrangeBlockFields","layout","saveButton","isHidden","isInvisible","updatedBlocksList","updatedBlockFieldsList","block","updatedBlockId","inArray","leftSideContainer","rightSideContainer","children","lastElementInRightContainer","append","lastElementInLeftContainer","updatedBlock","editFields","expectedFieldSequence","i","fieldId","secondEditFields","sequenceValue","hideSaveFieldSequenceButton","createUpdatedBlockFieldsList","updateFieldSequence","location","reload","fieldNameValue","aDeferred","Deferred","toLowerCase","resolve","promise","addFieldContainer","width","attr","registerFieldTypeChangeEvent","registerMultiReferenceFieldsChangeEvent","registerMultiReferenceFilterFieldChangeEvent","getvalidationEngineOptions","onValidationComplete","valid","validateFieldsValue","fieldTypeValue","checkPicklistExist","saveCustomField","removeAttr","pickListValueElement","pickListValuesArray","pickListValuesArraySize","select2Element","specialChars","test","getSelect2ElementFromSelect","lowerCasedpickListValuesArray","map","item","uniqueSort","serverListElement","addCustomField","hideModalWindow","showCustomField","showPnotify","blockNamesList","ele","label","modalHeader","Window","lastModalId","display","margin-left","position","errorObj","undefined","responseText","showNotify","title","reject","lengthInput","lengthValidator","name","maxLengthValidator","decimalValidator","selectedOption","decimalFieldUi","decimalInput","maxFloatingDigits","loadMultiReferenceFields","relatedBlock","fieldCopy","fieldContainer","prop","registerCopyClipboard","sortable1","length1","sortable2","makeFieldsListSortable","addBlockContainer","setBlocksListArray","fieldLabel","Object","create","validationEngineOptions","formData","saveBlockDetails","displayNewCustomBlock","updateNewSequenceForBlocks","appendNewBlockToBlocksList","preventDefault","beforeBlockId","beforeBlock","newBlockCloneCopy","after","connectWith","sequenceList","blocksListSelect","option","updateBlockStatus","blockStatus","currentBlock","isEmptyObject","inActiveFieldsContainer","reactiveFieldsList","showHiddenFields","createReactivateFieldslist","reActivateHiddenFields","key","value","inActiveField","element","is","messageParams","fieldIdList","deleteCustomBlock","removeDeletedBlock","removeBlockFromBlocksList","errorLog","fadeOut","deleteCustomField","field","parent","quickcreateEle","filter","presenceEle","defaultValueUi","relatedContainer","showRelatedTabModulesList","makeRelatedModuleSortable","registerRelatedListEvents","selectedModule","requestPjax","getModuleLayoutEditor","fieldRow","modalContainer","registerFieldDetailsChange","lockCheckbox","registerVaribleToParsers","registerEventForClockPicker","inputmask","n","currentElement","toggleClass","input","id","Tree","register","makeBlocksListSortable","registerAddCustomFieldEvent","registerBlockVisibilityEvent","registerInactiveFieldsEvent","registerDeleteCustomBlockEvent","Date","changeSelectElementView","registerDeleteCustomFieldEvent","registerEditFieldDetailsClick","event","state","progress","saveAjax","getInventoryViewLayout","showScrollBar","registerStep1","editField","showPopoverElementView","registerStep2","containerInventory","paramsName","sourceModule","edit","translate","newLiElement","columnName","invtype","button","ids","liElement","param","module","select2","cacheMRVField","cacheMRVFilter","ClipboardJS","trigger","getAttribute","document","customConfig","progressInstance","App","Text","Editor","previous","destroyEditor","textArea","views","prefix","registerBlockEvents","registerFieldEvents","setInactiveFieldsList","registerAddCustomBlockEvent","relatedModulesTabClickEvent","registerModulesChangeEvent","registerRelModulesChangeEvent","registerSwitch","registerAddInventoryField","registerEditInventoryField","registerInventoryFieldSequenceSaveClick","registerDeleteInventoryField","registerFieldSequenceSaveClick","registerContextHelp","ready","Settings_LayoutEditor_Js","registerBasicEvents","Vtiger_WholeNumberGreaterThanZero_Validator_Js","rules","options","rangeInstance","Vtiger_FloatingDigits_Validator_Js","setElement","validate","getError","_super","fieldValue","getFieldValue","errorInfo","setError","Vtiger_DecimalMaxLength_Validator_Js","decimalFieldValue","fieldLength","parseInt","Vtiger_Base_Validator_Js","instance","Vtiger_FieldLabel_Validator_Js","validateValue","Vtiger_PicklistFieldValues_Validator_Js","getElement","r"],"mappings":"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"}