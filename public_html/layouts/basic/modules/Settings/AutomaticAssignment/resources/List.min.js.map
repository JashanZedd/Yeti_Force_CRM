{"version":3,"file":"List.min.js","sources":["List.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nSettings_Vtiger_List_Js('Settings_AutomaticAssignment_List_Js', {\n\tchangeRecordState: function (recordId, state) {\n\t\tvar aDeferred = jQuery.Deferred();\n\t\tvar message = app.vtranslate('JS_STATE_CONFIRMATION');\n\t\tVtiger_Helper_Js.showConfirmationBox({'message': message}).done(function (e) {\n\t\t\tapp.saveAjax('save', {active: state}, {record: recordId}).done(function (respons) {\n\t\t\t\tvar listInstance = Settings_AutomaticAssignment_List_Js.getInstance();\n\t\t\t\tlistInstance.getListViewRecords();\n\t\t\t});\n\t\t}).fail(function (error, err) {\n\t\t\tapp.errorLog(error, err);\n\t\t});\n\t\treturn aDeferred.promise();\n\t},\n}, {\n\tcontainer: false,\n\tregisterFilterChangeEvent: function () {\n\t\tvar thisInstance = this;\n\t\tjQuery('#moduleFilter').on('change', function (e) {\n\t\t\tjQuery('#pageNumber').val(\"1\");\n\t\t\tjQuery('#pageToJump').val('1');\n\t\t\tjQuery('#orderBy').val('');\n\t\t\tjQuery(\"#sortOrder\").val('');\n\t\t\tvar params = {\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\tsourceModule: jQuery(e.currentTarget).val()\n\t\t\t}\n\t\t\t//Make the select all count as empty\n\t\t\tjQuery('#recordsCount').val('');\n\t\t\t//Make total number of pages as empty\n\t\t\tjQuery('#totalPageCount').text(\"\");\n\t\t\tthisInstance.getListViewRecords(params).done(function (data) {\n\t\t\t\tthisInstance.updatePagination();\n\t\t\t});\n\t\t});\n\t},\n\tgetContainer: function () {\n\t\tif (this.container == false) {\n\t\t\tthis.container = jQuery('div.contentsDiv');\n\t\t}\n\t\treturn this.container;\n\t},\n\tregisterModalEvents: function (data, url) {\n\t\tvar form = data.find('form');\n\t\tvar submitButton = data.find('.submitButton');\n\t\tdata.find('[name=\"tabid\"]').on('change', function (e) {\n\t\t\tvar progress = jQuery.progressIndicator({\n\t\t\t\t'position': 'html',\n\t\t\t\t'blockInfo': {\n\t\t\t\t\t'enabled': true\n\t\t\t\t}\n\t\t\t});\n\t\t\tvar element = jQuery(e.currentTarget);\n\t\t\tvar getFieldsUrl = url + '&tabid=' + element.val();\n\t\t\tAppConnector.request(getFieldsUrl).done(function (fields) {\n\t\t\t\t\tdata.find('.fieldList').html(fields);\n\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(data.find('.fieldList select'));\n\t\t\t\t\tsubmitButton.removeClass('d-none');\n\t\t\t\t\tprogress.progressIndicator({'mode': 'hide'});\n\t\t\t\t}).fail(function (textStatus, errorThrown) {\n\t\t\t\t\tprogress.progressIndicator({'mode': 'hide'});\n\t\t\t\t\tapp.errorLog(textStatus, errorThrown);\n\t\t\t\t}\n\t\t\t);\n\t\t})\n\t\tform.on('submit', function (e) {\n\t\t\te.preventDefault();\n\t\t\tvar params = form.serializeFormData();\n\t\t\tapp.saveAjax('save', params).done(function (response) {\n\t\t\t\tvar id = response.result;\n\t\t\t\tif (id) {\n\t\t\t\t\tvar url = form.attr('action');\n\t\t\t\t\turl = url + '&record=' + id;\n\t\t\t\t\twindow.location.href = url;\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\tregisterEvents: function () {\n\t\tvar thisInstance = this;\n\t\tthis._super();\n\t\tthis.registerFilterChangeEvent();\n\t\tthis.getContainer().find('.addRecord').on('click', function (e) {\n\t\t\tvar button = jQuery(e.currentTarget);\n\t\t\tvar url = button.data('url');\n\t\t\tapp.showModalWindow(null, url, function (data) {\n\t\t\t\tthisInstance.registerModalEvents(data, url);\n\t\t\t});\n\t\t});\n\t}\n})\n"],"names":["Settings_Vtiger_List_Js","recordId","state","aDeferred","jQuery","Deferred","message","app","vtranslate","showConfirmationBox","done","e","saveAjax","active","record","respons","listInstance","Settings_AutomaticAssignment_List_Js","getInstance","getListViewRecords","fail","error","err","errorLog","promise","thisInstance","on","val","params","getModuleName","getParentModuleName","currentTarget","text","data","updatePagination","container","url","form","find","submitButton","progress","progressIndicator","element","getFieldsUrl","request","fields","html","Fields","Picklist","showSelect2ElementView","removeClass","textStatus","errorThrown","preventDefault","serializeFormData","response","id","result","attr","location","href","_super","registerFilterChangeEvent","getContainer","button","showModalWindow","registerModalEvents"],"mappings":"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"}