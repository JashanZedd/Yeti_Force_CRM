{"version":3,"file":"List.min.js","sources":["List.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nSettings_Vtiger_List_Js('Settings_AutomaticAssignment_List_Js', {\n\tchangeRecordState: function (recordId, state) {\n\t\tvar aDeferred = jQuery.Deferred();\n\t\tvar message = app.vtranslate('JS_STATE_CONFIRMATION');\n\t\tVtiger_Helper_Js.showConfirmationBox({'message': message}).done(function (e) {\n\t\t\tapp.saveAjax('save', {active: state}, {record: recordId}).done(function (respons) {\n\t\t\t\tvar listInstance = Settings_AutomaticAssignment_List_Js.getInstance();\n\t\t\t\tlistInstance.getListViewRecords();\n\t\t\t});\n\t\t}).fail(function (error, err) {\n\t\t\tapp.errorLog(error, err);\n\t\t});\n\t\treturn aDeferred.promise();\n\t},\n}, {\n\tcontainer: false,\n\tregisterFilterChangeEvent: function () {\n\t\tvar thisInstance = this;\n\t\tjQuery('#moduleFilter').on('change', function (e) {\n\t\t\tjQuery('#pageNumber').val(\"1\");\n\t\t\tjQuery('#pageToJump').val('1');\n\t\t\tjQuery('#orderBy').val('');\n\t\t\tjQuery(\"#sortOrder\").val('');\n\t\t\tvar params = {\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\tsourceModule: jQuery(e.currentTarget).val()\n\t\t\t}\n\t\t\t//Make the select all count as empty\n\t\t\tjQuery('#recordsCount').val('');\n\t\t\t//Make total number of pages as empty\n\t\t\tjQuery('#totalPageCount').text(\"\");\n\t\t\tthisInstance.getListViewRecords(params).done(function (data) {\n\t\t\t\tthisInstance.updatePagination();\n\t\t\t});\n\t\t});\n\t},\n\tgetContainer: function () {\n\t\tif (this.container == false) {\n\t\t\tthis.container = jQuery('div.contentsDiv');\n\t\t}\n\t\treturn this.container;\n\t},\n\tregisterModalEvents: function (data, url) {\n\t\tvar form = data.find('form');\n\t\tvar submitButton = data.find('.submitButton');\n\t\tdata.find('[name=\"tabid\"]').on('change', function (e) {\n\t\t\tvar progress = jQuery.progressIndicator({\n\t\t\t\t'position': 'html',\n\t\t\t\t'blockInfo': {\n\t\t\t\t\t'enabled': true\n\t\t\t\t}\n\t\t\t});\n\t\t\tvar element = jQuery(e.currentTarget);\n\t\t\tvar getFieldsUrl = url + '&tabid=' + element.val();\n\t\t\tAppConnector.request(getFieldsUrl).done(function (fields) {\n\t\t\t\t\tdata.find('.fieldList').html(fields);\n\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(data.find('.fieldList select'));\n\t\t\t\t\tsubmitButton.removeClass('d-none');\n\t\t\t\t\tprogress.progressIndicator({'mode': 'hide'});\n\t\t\t\t}).fail(function (textStatus, errorThrown) {\n\t\t\t\t\tprogress.progressIndicator({'mode': 'hide'});\n\t\t\t\t\tapp.errorLog(textStatus, errorThrown);\n\t\t\t\t}\n\t\t\t);\n\t\t})\n\t\tform.on('submit', function (e) {\n\t\t\te.preventDefault();\n\t\t\tvar params = form.serializeFormData();\n\t\t\tapp.saveAjax('save', params).done(function (response) {\n\t\t\t\tvar id = response.result;\n\t\t\t\tif (id) {\n\t\t\t\t\tvar url = form.attr('action');\n\t\t\t\t\turl = url + '&record=' + id;\n\t\t\t\t\twindow.location.href = url;\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\tregisterEvents: function () {\n\t\tvar thisInstance = this;\n\t\tthis._super();\n\t\tthis.registerFilterChangeEvent();\n\t\tthis.getContainer().find('.addRecord').on('click', function (e) {\n\t\t\tvar button = jQuery(e.currentTarget);\n\t\t\tvar url = button.data('url');\n\t\t\tapp.showModalWindow(null, url, function (data) {\n\t\t\t\tthisInstance.registerModalEvents(data, url);\n\t\t\t});\n\t\t});\n\t}\n})\n"],"names":["Settings_Vtiger_List_Js","recordId","state","aDeferred","jQuery","Deferred","message","app","vtranslate","showConfirmationBox","done","e","saveAjax","active","record","respons","Settings_AutomaticAssignment_List_Js","getInstance","getListViewRecords","fail","error","err","errorLog","promise","thisInstance","this","on","val","params","getModuleName","getParentModuleName","currentTarget","text","data","updatePagination","container","url","form","find","submitButton","progress","progressIndicator","element","getFieldsUrl","request","fields","html","Fields","Picklist","showSelect2ElementView","removeClass","mode","textStatus","errorThrown","preventDefault","serializeFormData","response","id","result","attr","location","href","_super","registerFilterChangeEvent","getContainer","showModalWindow","registerModalEvents"],"mappings":"aAGAA,wBAAwB,uCAAwC,mBAC5C,SAAUC,SAAUC,WAClCC,UAAYC,OAAOC,WACnBC,QAAUC,IAAIC,WAAW,iDACZC,oBAAoB,CAACH,QAAWA,UAAUI,MAAK,SAAUC,OACrEC,SAAS,OAAQ,CAACC,OAAQX,OAAQ,CAACY,OAAQb,WAAWS,MAAK,SAAUK,SACrDC,qCAAqCC,cAC3CC,2BAEZC,MAAK,SAAUC,MAAOC,SACpBC,SAASF,MAAOC,QAEdlB,UAAUoB,YAEhB,YACS,4BACgB,eACtBC,aAAeC,YACZ,iBAAiBC,GAAG,UAAU,SAAUf,UACvC,eAAegB,IAAI,YACnB,eAAeA,IAAI,YACnB,YAAYA,IAAI,WAChB,cAAcA,IAAI,QACrBC,OAAS,QACJrB,IAAIsB,uBACJtB,IAAIuB,mCACE1B,OAAOO,EAAEoB,eAAeJ,OAGvCvB,OAAO,iBAAiBuB,IAAI,WAErB,mBAAmBK,KAAK,iBAClBd,mBAAmBU,QAAQlB,MAAK,SAAUuB,mBACzCC,uCAIF,kBACS,GAAlBT,KAAKU,iBACHA,UAAY/B,OAAO,oBAElBqB,KAAKU,+BAEQ,SAAUF,KAAMG,SAChCC,KAAOJ,KAAKK,KAAK,QACjBC,aAAeN,KAAKK,KAAK,sBACxBA,KAAK,kBAAkBZ,GAAG,UAAU,SAAUf,OAC9C6B,SAAWpC,OAAOqC,kBAAkB,UAC3B,iBACC,UACD,KAGTC,QAAUtC,OAAOO,EAAEoB,eACnBY,aAAeP,IAAM,UAAYM,QAAQf,mBAChCiB,QAAQD,cAAcjC,MAAK,SAAUmC,aAC3CP,KAAK,cAAcQ,KAAKD,YACzBE,OAAOC,SAASC,uBAAuBhB,KAAKK,KAAK,mCACxCY,YAAY,mBAChBT,kBAAkB,CAACU,KAAQ,YAClChC,MAAK,SAAUiC,WAAYC,sBACpBZ,kBAAkB,CAACU,KAAQ,aAChC7B,SAAS8B,WAAYC,wBAIvB3B,GAAG,UAAU,SAAUf,KACzB2C,qBACE1B,OAASS,KAAKkB,wBACd3C,SAAS,OAAQgB,QAAQlB,MAAK,SAAU8C,cACvCC,GAAKD,SAASE,UACdD,GAAI,KACHrB,IAAMC,KAAKsB,KAAK,cACdvB,IAAM,WAAaqB,UAClBG,SAASC,KAAOzB,2BAKX,eACXZ,aAAeC,UACdqC,cACAC,iCACAC,eAAe1B,KAAK,cAAcZ,GAAG,SAAS,SAAUf,OAExDyB,IADShC,OAAOO,EAAEoB,eACLE,KAAK,WAClBgC,gBAAgB,KAAM7B,KAAK,SAAUH,mBAC3BiC,oBAAoBjC,KAAMG"}