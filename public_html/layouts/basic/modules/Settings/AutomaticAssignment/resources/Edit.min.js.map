{"version":3,"file":"Edit.min.js","sources":["Edit.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class(\n\t'Settings_AutomaticAssignment_Edit_Js',\n\t{},\n\t{\n\t\tcontainer: false,\n\t\tadvanceFilterInstance: false,\n\t\tconditionBuilders: [],\n\t\tsetContainer: function (container) {\n\t\t\tthis.container = container;\n\t\t\treturn this.container;\n\t\t},\n\t\tgetContainer: function () {\n\t\t\tif (this.container == false) {\n\t\t\t\tthis.container = jQuery('div.contentsDiv form');\n\t\t\t}\n\t\t\treturn this.container;\n\t\t},\n\t\tregisterBlockToggleEvent() {\n\t\t\tthis.container.on('click', '.blockHeader', function (e) {\n\t\t\t\tconst target = $(e.target);\n\t\t\t\tif (\n\t\t\t\t\ttarget.is('input') ||\n\t\t\t\t\ttarget.is('button') ||\n\t\t\t\t\ttarget.parents().is('button') ||\n\t\t\t\t\ttarget.hasClass('js-stop-propagation') ||\n\t\t\t\t\ttarget.parents().hasClass('js-stop-propagation')\n\t\t\t\t) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tconst blockHeader = $(e.currentTarget);\n\t\t\t\tconst blockContents = blockHeader.next();\n\t\t\t\tconst iconToggle = blockHeader.find('.iconToggle');\n\t\t\t\tif (blockContents.hasClass('d-none')) {\n\t\t\t\t\tblockContents.removeClass('d-none');\n\t\t\t\t\ticonToggle.removeClass(iconToggle.data('hide')).addClass(iconToggle.data('show'));\n\t\t\t\t} else {\n\t\t\t\t\tblockContents.addClass('d-none');\n\t\t\t\t\ticonToggle.removeClass(iconToggle.data('show')).addClass(iconToggle.data('hide'));\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register submit event\n\t\t */\n\t\tregisterSubmitEvent() {\n\t\t\tthis.container.off('submit').on('submit', (e) => {\n\t\t\t\te.preventDefault();\n\t\t\t\tthis.container.find('.js-toggle-panel').find('.js-block-content').removeClass('d-none');\n\t\t\t\tif ($(e.currentTarget).validationEngine('validate')) {\n\t\t\t\t\tdocument.progressLoader = $.progressIndicator({\n\t\t\t\t\t\tmessage: app.vtranslate('JS_SAVE_LOADER_INFO'),\n\t\t\t\t\t\tposition: 'html',\n\t\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\t\tenabled: true\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tfor (var key in this.conditionBuilders) {\n\t\t\t\t\t\tthis.container\n\t\t\t\t\t\t\t.find(`input[name=\"${key}\"]`)\n\t\t\t\t\t\t\t.val(JSON.stringify(this.conditionBuilders[key].getConditions()));\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.preSaveValidation().done((response) => {\n\t\t\t\t\t\tif (response === true) {\n\t\t\t\t\t\t\tlet formData = this.container.serializeFormData();\n\t\t\t\t\t\t\tapp\n\t\t\t\t\t\t\t\t.saveAjax('save', [], formData)\n\t\t\t\t\t\t\t\t.done(function (data) {\n\t\t\t\t\t\t\t\t\tif (data.result && data.result.success) {\n\t\t\t\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({ text: app.vtranslate('JS_SAVE_SUCCESS') });\n\t\t\t\t\t\t\t\t\t\twindow.location.href = data.result.url;\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tdocument.progressLoader.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\t\t\t\tapp.showNotify({ text: app.vtranslate('JS_ERROR'), type: 'error' });\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.fail(function () {\n\t\t\t\t\t\t\t\t\tdocument.progressLoader.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\t\t\tapp.showNotify({ text: app.vtranslate('JS_ERROR'), type: 'error' });\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tdocument.progressLoader.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\te.stopPropagation();\n\t\t\t\treturn false;\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * PreSave validation\n\t\t */\n\t\tpreSaveValidation: function () {\n\t\t\tconst aDeferred = $.Deferred();\n\t\t\tlet formData = new FormData(this.container[0]);\n\t\t\tformData.append('mode', 'preSaveValidation');\n\t\t\tAppConnector.request({\n\t\t\t\tasync: false,\n\t\t\t\turl: 'index.php',\n\t\t\t\ttype: 'POST',\n\t\t\t\tdata: formData,\n\t\t\t\tprocessData: false,\n\t\t\t\tcontentType: false\n\t\t\t})\n\t\t\t\t.done((data) => {\n\t\t\t\t\tlet response = data.result;\n\t\t\t\t\tfor (let i in response) {\n\t\t\t\t\t\tif (response[i].result !== true) {\n\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\ttext: response[i].message ? response[i].message : app.vtranslate('JS_ERROR'),\n\t\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif (response[i].hoverField != undefined) {\n\t\t\t\t\t\t\t\tthis.container.find('[name=\"' + response[i].hoverField + '\"]').focus();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\taDeferred.resolve(data.result.length <= 0);\n\t\t\t\t})\n\t\t\t\t.fail((textStatus, errorThrown) => {\n\t\t\t\t\tapp.showNotify({ text: app.vtranslate('JS_ERROR'), type: 'error' });\n\t\t\t\t\tapp.errorLog(textStatus, errorThrown);\n\t\t\t\t\taDeferred.resolve(false);\n\t\t\t\t});\n\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/**\n\t\t * Load condition builder\n\t\t *\n\t\t * @param   {Integer}  sourceTabId\n\t\t */\n\t\tloadConditionBuilderView(sourceTabId) {\n\t\t\tif (!sourceTabId) {\n\t\t\t\tthis.container.find('.js-condition-builder-container').html('');\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tlet progress = $.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tAppConnector.request({\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\tview: 'Conditions',\n\t\t\t\tsourceTabId: sourceTabId\n\t\t\t}).done((data) => {\n\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\tthis.container.find('.js-condition-builder-container').html(data);\n\t\t\t\tthis.registerConditionBuilder();\n\t\t\t});\n\t\t},\n\t\tregisterConditionBuilder() {\n\t\t\tlet sourceModuleName = this.sourceModuleSelect.val();\n\t\t\tif (sourceModuleName) {\n\t\t\t\tthis.container.find('.js-condition-builder').each((_, e) => {\n\t\t\t\t\tlet conditionBuilder = new Vtiger_ConditionBuilder_Js($(e), sourceModuleName);\n\t\t\t\t\tconditionBuilder.registerEvents();\n\t\t\t\t\tlet name = $(e).closest('.js-field-container').find('.js-condition-value').attr('name');\n\t\t\t\t\tthis.conditionBuilders[name] = conditionBuilder;\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Register source module change\n\t\t */\n\t\tregisterSourceModuleChange() {\n\t\t\tthis.sourceModuleSelect = this.container.find('select[name=\"tabid\"]');\n\t\t\tthis.sourceTabId = this.sourceModuleSelect.val();\n\t\t\tthis.sourceModuleSelect.on('change', (e) => {\n\t\t\t\tlet value = $(e.currentTarget).val();\n\t\t\t\tif (this.sourceTabId !== value && this.sourceTabId !== null) {\n\t\t\t\t\tthis.sourceTabId = value;\n\t\t\t\t\tthis.loadConditionBuilderView(this.sourceTabId);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterMethodChange() {\n\t\t\tthis.container.find('[name=\"method\"]').on('change', (e) => {\n\t\t\t\tlet countingCriteria = this.container.find('[name=\"record_limit_conditions\"]').closest('.js-field-container');\n\t\t\t\tif ($(e.currentTarget).val() == 1) {\n\t\t\t\t\tcountingCriteria.addClass('d-none');\n\t\t\t\t} else {\n\t\t\t\t\tcountingCriteria.removeClass('d-none');\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterBasicEvents: function () {\n\t\t\tthis.container.validationEngine(app.validationEngineOptionsForRecord);\n\t\t\tthis.registerSubmitEvent();\n\t\t\tthis.registerBlockToggleEvent();\n\t\t\tthis.registerSourceModuleChange();\n\t\t\tthis.registerConditionBuilder();\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\tthis.setContainer($('.contentsDiv form'));\n\t\t\tthis.registerBasicEvents();\n\t\t\tapp.showPopoverElementView(this.container.find('.js-popover-tooltip'));\n\t\t}\n\t}\n);\n"],"names":["jQuery","Class","container","advanceFilterInstance","conditionBuilders","setContainer","getContainer","registerBlockToggleEvent","on","e","target","$","is","parents","hasClass","currentTarget","blockContents","blockHeader","next","iconToggle","find","removeClass","data","addClass","registerSubmitEvent","off","preventDefault","validationEngine","progressLoader","progressIndicator","message","app","vtranslate","position","blockInfo","enabled","key","val","JSON","stringify","getConditions","preSaveValidation","done","response","formData","serializeFormData","saveAjax","result","success","Settings_Vtiger_Index_Js","showMessage","text","window","location","href","url","document","mode","showNotify","type","fail","stopPropagation","aDeferred","Deferred","append","AppConnector","request","async","processData","contentType","i","hoverField","focus","resolve","length","textStatus","errorThrown","errorLog","promise","loadConditionBuilderView","sourceTabId","html","progress","module","getModuleName","parent","getParentModuleName","view","registerConditionBuilder","sourceModuleName","sourceModuleSelect","each","_","conditionBuilder","registerEvents","closest","attr","name","registerSourceModuleChange","value","registerMethodChange","countingCriteria","registerBasicEvents","validationEngineOptionsForRecord","showPopoverElementView"],"mappings":"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"}