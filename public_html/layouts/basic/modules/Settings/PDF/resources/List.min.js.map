{"version":3,"file":"List.min.js","sources":["List.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nSettings_Vtiger_List_Js(\"Settings_PDF_List_Js\", {}, {\n\tgetListContainer: function () {\n\t\treturn jQuery('#listViewContainer');\n\t},\n\tregisterFilterChangeEvent: function () {\n\t\tvar thisInstance = this;\n\t\tjQuery('#moduleFilter').on('change', function (e) {\n\t\t\tjQuery('#pageNumber').val('1');\n\t\t\tjQuery('#pageToJump').val('1');\n\t\t\tjQuery('#orderBy').val('');\n\t\t\tjQuery(\"#sortOrder\").val('');\n\t\t\tvar params = {\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\tsourceModule: jQuery(e.currentTarget).val()\n\t\t\t}\n\t\t\t//Make the select all count as empty\n\t\t\tjQuery('#recordsCount').val('');\n\t\t\t//Make total number of pages as empty\n\t\t\tjQuery('#totalPageCount').text('');\n\t\t\tthisInstance.getListViewRecords(params).done(function (data) {\n\t\t\t\tthisInstance.updatePagination();\n\t\t\t});\n\t\t});\n\t},\n\t/*\n\t * Function to register the list view row click event\n\t */\n\tregisterRowClickEvent: function () {\n\t\tvar listViewContentDiv = this.getListViewContentContainer();\n\t\tlistViewContentDiv.on('click', '.listViewEntries', function (e) {\n\t\t\tvar editUrl = jQuery(e.currentTarget).find('.fas').closest('a').attr('href');\n\t\t\twindow.location.href = editUrl;\n\t\t});\n\t},\n\tgetDefaultParams: function () {\n\t\tvar pageNumber = jQuery('#pageNumber').val();\n\t\tvar module = app.getModuleName();\n\t\tvar parent = app.getParentModuleName();\n\t\tvar params = {\n\t\t\t'module': module,\n\t\t\t'parent': parent,\n\t\t\t'page': pageNumber,\n\t\t\t'view': \"List\",\n\t\t\tsourceModule: jQuery('#moduleFilter').val()\n\t\t};\n\t\treturn params;\n\t},\n\tregisterAddNewTemplate: function (container) {\n\t\tjQuery('#addButton', container).on('click', function () {\n\t\t\tvar selectedModule = jQuery('#moduleFilter option:selected').val();\n\t\t\tvar url = jQuery(this).data('url');\n\t\t\tif (selectedModule.length) {\n\t\t\t\turl += '&source_module=' + selectedModule;\n\t\t\t}\n\t\t\twindow.location.href = url;\n\t\t});\n\t},\n\tregisterImportTemplate: function (container) {\n\t\tjQuery('#importButton', container).on('click', function () {\n\t\t\twindow.location.href = jQuery(this).data('url');\n\t\t});\n\t},\n\tregisterTemplateDelete: function (container) {\n\t\tconst self = this;\n\t\tif (container == undefined) {\n\t\t\tcontainer = self.getListContainer();\n\t\t}\n\t\tcontainer.find('.templateDelete').on('click', function (e) {\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t\tlet deleteId = $(this).closest(\"tr\").data(\"id\");\n\t\t\tVtiger_Helper_Js.showConfirmationBox({\n\t\t\t\tmessage: app.vtranslate(\"JS_LBL_ARE_YOU_SURE_YOU_WANT_TO_DELETE\")\n\t\t\t}).done(function(e) {\n\t\t\t\tSettings_PDF_List_Js.deleteById(deleteId).done(function() {\n\t\t\t\t\tself.registerTemplateDelete(container);\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t},\n\t/*\n\t * Function which will give you all the list view params\n\t */\n\tgetListViewRecords: function (urlParams) {\n\t\tvar thisInstance = this;\n\t\tvar aDeferred = jQuery.Deferred();\n\t\tthis._super(urlParams).done(function (data) {\n\t\t\tthisInstance.registerTemplateDelete();\n\t\t\taDeferred.resolve(data);\n\t\t});\n\t\treturn aDeferred.promise();\n\t},\n\tregisterEvents: function () {\n\t\tthis._super();\n\t\tvar container = this.getListContainer();\n\t\tthis.registerFilterChangeEvent();\n\t\tthis.registerAddNewTemplate(container);\n\t\tthis.registerTemplateDelete(container);\n\t\tthis.registerImportTemplate(container);\n\t}\n});\n"],"names":["Settings_Vtiger_List_Js","jQuery","thisInstance","on","e","val","params","app","getModuleName","getParentModuleName","currentTarget","text","getListViewRecords","done","data","updatePagination","listViewContentDiv","getListViewContentContainer","editUrl","find","closest","attr","location","href","pageNumber","module","parent","container","selectedModule","url","length","self","undefined","getListContainer","stopPropagation","preventDefault","deleteId","$","showConfirmationBox","vtranslate","deleteById","registerTemplateDelete","urlParams","aDeferred","Deferred","_super","resolve","promise","registerFilterChangeEvent","registerAddNewTemplate","registerImportTemplate"],"mappings":"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"}