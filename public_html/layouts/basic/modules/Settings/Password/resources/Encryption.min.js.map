{"version":3,"file":"Encryption.min.js","sources":["Encryption.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class(\n\t'Settings_Password_Encryption_Js',\n\t{},\n\t{\n\t\t/**\n\t\t * Container\n\t\t */\n\t\tcontainer: null,\n\t\t/**\n\t\t * Set container\n\t\t * @param {Object} element\n\t\t */\n\t\tsetContainer: function (element) {\n\t\t\tthis.container = element;\n\t\t},\n\t\t/**\n\t\t * Get Container\n\t\t * @returns {Object}\n\t\t */\n\t\tgetContainer: function () {\n\t\t\treturn this.container;\n\t\t},\n\t\t/**\n\t\t * Get nav tab\n\t\t * @returns {Object}\n\t\t */\n\t\tgetActiveTabNav: function () {\n\t\t\treturn this.getContainer().find('.js-nav-container a.active');\n\t\t},\n\t\t/**\n\t\t * Get tab (Form)\n\t\t * @returns {Object}\n\t\t */\n\t\tgetTabForm: function () {\n\t\t\treturn this.getContainer().find('.tab-pane.active form');\n\t\t},\n\t\t/**\n\t\t * Register change tab\n\t\t */\n\t\tregisterChangeTab: function () {\n\t\t\tlet container = this.getContainer();\n\t\t\tthis.passwordAlert(container);\n\t\t\tcontainer.find('.js-nav-container a').on('click', (e) => {\n\t\t\t\tthis.loadTab(e.currentTarget.dataset.url);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Load content from URL\n\t\t * @param {string} url\n\t\t */\n\t\tloadTab: function (url) {\n\t\t\tlet tabContainer = this.getContainer().find('.js-tab-container');\n\t\t\tlet progressIndicatorElement = $.progressIndicator({\n\t\t\t\tblockInfo: {\n\t\t\t\t\telementToBlock: tabContainer,\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tAppConnector.request(url)\n\t\t\t\t.done((data) => {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\ttabContainer.html(data);\n\t\t\t\t\tthis.registerBasicEvents(tabContainer);\n\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(tabContainer.find('select'));\n\t\t\t\t})\n\t\t\t\t.fail(function (textStatus, errorThrown) {\n\t\t\t\t\tapp.errorLog(textStatus, errorThrown);\n\t\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Register events for change method encryption\n\t\t */\n\t\tregisterChangeMethodName: function () {\n\t\t\tlet container = this.getTabForm();\n\t\t\tif (container.length) {\n\t\t\t\tthis.passwordAlert(container);\n\t\t\t}\n\t\t\tcontainer.find('[name=\"methods\"]').on('change', (e) => {\n\t\t\t\tthis.passwordAlert($(e.currentTarget).closest('form'));\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register events for change method encryption\n\t\t */\n\t\tregisterChangeModule: function () {\n\t\t\tthis.getTabForm()\n\t\t\t\t.find('[name=\"target\"]')\n\t\t\t\t.on('change', (e) => {\n\t\t\t\t\tlet url = this.getActiveTabNav().data('url') + '&target=' + e.currentTarget.value;\n\t\t\t\t\tthis.loadTab(url);\n\t\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Password alerts\n\t\t * @param {jQuery} container\n\t\t */\n\t\tpasswordAlert: function (container) {\n\t\t\tlet methodElement = container.find('[name=\"methods\"]');\n\t\t\tlet mapLengthVector = JSON.parse($('[name=\"lengthVectors\"]').val());\n\t\t\tlet length = mapLengthVector[methodElement.val()];\n\t\t\tlet validator = '';\n\t\t\tlet passwordElement = container.find('#password');\n\t\t\tlet vectorElement = container.find('#vector');\n\t\t\tlet passwordInfoAlert = container.find('.js-password-alert');\n\t\t\tif (length == undefined) {\n\t\t\t\tpasswordInfoAlert.addClass('d-none');\n\t\t\t\tvectorElement.attr('disabled', 'disabled');\n\t\t\t\tpasswordElement.attr('disabled', 'disabled');\n\t\t\t} else if (length === 0) {\n\t\t\t\tpasswordInfoAlert.addClass('d-none');\n\t\t\t\tvectorElement.val('');\n\t\t\t\tvectorElement.attr('disabled', 'disabled');\n\t\t\t} else {\n\t\t\t\tpasswordInfoAlert.removeClass('d-none');\n\t\t\t\tpasswordInfoAlert.find('.js-password-length').text(length);\n\t\t\t\tvectorElement.removeAttr('disabled');\n\t\t\t\tpasswordElement.removeAttr('disabled');\n\t\t\t\tvalidator = 'validate[required,maxSize[' + length + '],minSize[' + length + ']]';\n\t\t\t}\n\t\t\tvectorElement.attr('data-validation-engine', validator);\n\t\t},\n\t\t/**\n\t\t * Register events for form\n\t\t */\n\t\tregisterForm: function () {\n\t\t\tlet form = this.getTabForm();\n\t\t\tform.on('submit', (event) => {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tform.validationEngine(app.validationEngineOptions);\n\t\t\t\tif (form.validationEngine('validate')) {\n\t\t\t\t\tlet save = () => {\n\t\t\t\t\t\tlet progressElement = $.progressIndicator({ blockInfo: { enabled: true } });\n\t\t\t\t\t\tAppConnector.request(form.serializeFormData()).done((response) => {\n\t\t\t\t\t\t\tprogressElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\ttext: response.result,\n\t\t\t\t\t\t\t\ttype: 'info',\n\t\t\t\t\t\t\t\thide: false\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tthis.getActiveTabNav().trigger('click');\n\t\t\t\t\t\t});\n\t\t\t\t\t};\n\t\t\t\t\tlet progressIndicatorElement = $.progressIndicator({ blockInfo: { enabled: true } });\n\t\t\t\t\tlet formData = form.serializeFormData();\n\t\t\t\t\tformData.mode = 'checkEncryptionStatus';\n\t\t\t\t\tAppConnector.request(formData).done((response) => {\n\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tif (response.result.message) {\n\t\t\t\t\t\t\tapp.showConfirmModal({\n\t\t\t\t\t\t\t\ttext: response.result.message + `<div>${app.vtranslate('JS_CHANGE_CONFIRMATION')}</div>`,\n\t\t\t\t\t\t\t\tconfirmedCallback: () => {\n\t\t\t\t\t\t\t\t\tsave();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else if (response.result.result) {\n\t\t\t\t\t\t\tsave();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register events to preview password\n\t\t */\n\t\tregisterPreviewPassword: function () {\n\t\t\tvar container = this.getTabForm();\n\t\t\tvar button = container.find('.previewPassword');\n\t\t\tbutton.on('mousedown', function () {\n\t\t\t\t$('#' + $(this).data('id')).attr('type', 'text');\n\t\t\t});\n\t\t\tbutton.on('mouseup', function () {\n\t\t\t\t$('#' + $(this).data('id')).attr('type', 'password');\n\t\t\t});\n\t\t\tbutton.on('mouseout', function () {\n\t\t\t\t$('#' + $(this).data('id')).attr('type', 'password');\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register basic events in view\n\t\t */\n\t\tregisterBasicEvents: function () {\n\t\t\tthis.registerForm();\n\t\t\tthis.registerChangeMethodName();\n\t\t\tthis.registerChangeModule();\n\t\t\tthis.registerPreviewPassword();\n\t\t},\n\t\t/**\n\t\t * Register all events in view\n\t\t */\n\t\tregisterEvents: function () {\n\t\t\tthis.setContainer($('.contentsDiv'));\n\t\t\tthis.registerChangeTab();\n\t\t\tthis.registerBasicEvents();\n\t\t}\n\t}\n);\n"],"names":["jQuery","Class","container","setContainer","element","getContainer","getActiveTabNav","find","getTabForm","registerChangeTab","passwordAlert","on","e","loadTab","currentTarget","dataset","url","tabContainer","progressIndicatorElement","$","progressIndicator","blockInfo","elementToBlock","enabled","AppConnector","request","done","data","mode","html","registerBasicEvents","App","Fields","Picklist","showSelect2ElementView","fail","textStatus","errorThrown","app","errorLog","registerChangeMethodName","length","closest","registerChangeModule","value","mapLengthVector","JSON","parse","val","methodElement","validator","passwordElement","vectorElement","passwordInfoAlert","addClass","attr","removeClass","text","removeAttr","registerForm","form","event","preventDefault","validationEngine","validationEngineOptions","progressElement","serializeFormData","response","showNotify","result","type","hide","trigger","formData","message","showConfirmModal","vtranslate","confirmedCallback","save","registerPreviewPassword","button","registerEvents"],"mappings":"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"}