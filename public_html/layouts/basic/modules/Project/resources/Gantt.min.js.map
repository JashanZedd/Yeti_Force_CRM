{"version":3,"file":"Gantt.min.js","sources":["Gantt.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nclass Gantt {\n\t/**\n\t * Constructor\n\t *\n\t * @param {jQuery|HTMLElement|string} container\n\t * @param {object} projectData\n\t */\n\tconstructor(container, projectData) {\n\t\tthis.container = $(container);\n\t\tthis.containerParent = this.container.parent();\n\t\tthis.headerContainer = this.containerParent\n\t\t\t.parent()\n\t\t\t.find('.js-gantt-header')\n\t\t\t.eq(0);\n\t\tthis.weekStart = 6 - CONFIG.firstDayOfWeekNos;\n\t\tlet workingDays = [1, 2, 3, 4, 5];\n\t\tthis.options = {\n\t\t\tslots: {\n\t\t\t\theader: {\n\t\t\t\t\tbeforeOptions: `<button class=\"btn btn-primary pb-2 mr-2 h-100 js-gantt__front-filter\"><span class=\"fas fa-filter\"></span> ${\n\t\t\t\t\t\tLANG.JS_GANTT_FILTER\n\t\t\t\t\t}</button>`\n\t\t\t\t}\n\t\t\t},\n\t\t\tmaxRows: 30,\n\t\t\ttimes: {\n\t\t\t\ttimeZoom: 20\n\t\t\t},\n\t\t\tcalendar: {\n\t\t\t\tworkingDays\n\t\t\t},\n\t\t\ttitle: {\n\t\t\t\tlabel: LANG.JS_GANTT_TITLE,\n\t\t\t\thtml: true\n\t\t\t},\n\t\t\ttaskList: {\n\t\t\t\texpander: {\n\t\t\t\t\tstraight: false\n\t\t\t\t},\n\t\t\t\tcolumns: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 1,\n\t\t\t\t\t\tlabel: app.vtranslate('JS_NO.'),\n\t\t\t\t\t\thtml: true,\n\t\t\t\t\t\tvalue: 'number',\n\t\t\t\t\t\twidth: 65\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 2,\n\t\t\t\t\t\tlabel: app.vtranslate('JS_NAME'),\n\t\t\t\t\t\thtml: true,\n\t\t\t\t\t\tvalue: 'label',\n\t\t\t\t\t\twidth: 280,\n\t\t\t\t\t\texpander: true\n\t\t\t\t\t},\n\t\t\t\t\t{ id: 3, label: app.vtranslate('JS_PRIORITY'), value: 'priority_label', width: 70 },\n\t\t\t\t\t{ id: 3, label: app.vtranslate('JS_STATUS'), value: 'status_label', width: 80 },\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 4,\n\t\t\t\t\t\tlabel: app.vtranslate('JS_DAYS'),\n\t\t\t\t\t\tvalue: task => {\n\t\t\t\t\t\t\treturn task.duration / 24 / 60 / 60;\n\t\t\t\t\t\t},\n\t\t\t\t\t\twidth: 75,\n\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t'task-list-header-label': {\n\t\t\t\t\t\t\t\t'text-align': 'center',\n\t\t\t\t\t\t\t\twidth: '100%'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t'task-list-item-value-container': {\n\t\t\t\t\t\t\t\t'text-align': 'center',\n\t\t\t\t\t\t\t\twidth: '100%'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 5,\n\t\t\t\t\t\tlabel: app.vtranslate('JS_PLANNED'),\n\t\t\t\t\t\tvalue: task => {\n\t\t\t\t\t\t\treturn task.planned_duration;\n\t\t\t\t\t\t},\n\t\t\t\t\t\twidth: 85,\n\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t'task-list-header-label': {\n\t\t\t\t\t\t\t\t'text-align': 'center',\n\t\t\t\t\t\t\t\twidth: '100%'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t'task-list-item-value-container': {\n\t\t\t\t\t\t\t\t'text-align': 'center',\n\t\t\t\t\t\t\t\twidth: '100%'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 6,\n\t\t\t\t\t\tlabel: app.vtranslate('JS_REALISATION'),\n\t\t\t\t\t\tvalue: 'sum_time',\n\t\t\t\t\t\twidth: 85,\n\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t'task-list-header-label': {\n\t\t\t\t\t\t\t\t'text-align': 'center',\n\t\t\t\t\t\t\t\twidth: '100%'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t'task-list-item-value-container': {\n\t\t\t\t\t\t\t\t'text-align': 'center',\n\t\t\t\t\t\t\t\twidth: '100%'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{ id: 7, label: app.vtranslate('JS_ASSIGNED', 'Project'), value: 'assigned_user_name', width: 110 },\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 8,\n\t\t\t\t\t\tlabel: '%',\n\t\t\t\t\t\tvalue: 'progress',\n\t\t\t\t\t\twidth: 35,\n\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t'task-list-header-label': {\n\t\t\t\t\t\t\t\t'text-align': 'center',\n\t\t\t\t\t\t\t\twidth: '100%'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t'task-list-item-value-container': {\n\t\t\t\t\t\t\t\t'text-align': 'center',\n\t\t\t\t\t\t\t\twidth: '100%'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t};\n\t\tthis.dynamicStyle = {\n\t\t\t'chart-expander-wrapper': {\n\t\t\t\t'line-height': '1'\n\t\t\t},\n\t\t\t'chart-row-bar-polygon': {\n\t\t\t\tstroke: '#E74C3C00',\n\t\t\t\t'stroke-width': 0,\n\t\t\t\tfill: '#F75C4C'\n\t\t\t},\n\t\t\t'chart-row-progress-bar-outline': {\n\t\t\t\tstroke: '#E74C3C00',\n\t\t\t\t'stroke-width': 0\n\t\t\t},\n\t\t\t'chart-days-highlight-rect': {\n\t\t\t\tfill: '#f3f5f780'\n\t\t\t},\n\t\t\t'header-title': {\n\t\t\t\tfloat: 'none',\n\t\t\t\tdisplay: 'inline-flex',\n\t\t\t\toverflow: 'hidden'\n\t\t\t},\n\t\t\t'header-options': {\n\t\t\t\tfloat: 'none',\n\t\t\t\tdisplay: 'inline-flex'\n\t\t\t},\n\t\t\t'header-title--html': {\n\t\t\t\t'white-space': 'nowrap',\n\t\t\t\toverflow: 'hidden',\n\t\t\t\t'text-overflow': 'ellipsis',\n\t\t\t\t'padding-left': '0',\n\t\t\t\t'letter-spacing': '0'\n\t\t\t},\n\t\t\t'slot-header-beforeOptions': {\n\t\t\t\theight: '100%',\n\t\t\t\t'vertical-align': 'top'\n\t\t\t}\n\t\t};\n\t\tthis.registerLanguage();\n\t\tif (typeof projectData !== 'undefined') {\n\t\t\tthis.options.title.label = projectData;\n\t\t\tthis.loadProject(projectData);\n\t\t}\n\t\tthis.registerEvents();\n\t}\n\n\t/**\n\t * Register language translations globally (replace old ones)\n\t */\n\tregisterLanguage() {\n\t\tthis.options.locale = {\n\t\t\tname: CONFIG.langKey,\n\t\t\tweekStart: this.weekStart,\n\t\t\tweekdays: [\n\t\t\t\tLANG.JS_SUNDAY,\n\t\t\t\tLANG.JS_MONDAY,\n\t\t\t\tLANG.JS_TUESDAY,\n\t\t\t\tLANG.JS_WEDNESDAY,\n\t\t\t\tLANG.JS_THURSDAY,\n\t\t\t\tLANG.JS_FRIDAY,\n\t\t\t\tLANG.JS_SATURDAY\n\t\t\t],\n\t\t\tweekdaysShort: [LANG.JS_SUN, LANG.JS_MON, LANG.JS_TUE, LANG.JS_WED, LANG.JS_THU, LANG.JS_FRI, LANG.JS_SAT],\n\t\t\tweekdaysMin: [LANG.JS_SUN, LANG.JS_MON, LANG.JS_TUE, LANG.JS_WED, LANG.JS_THU, LANG.JS_FRI, LANG.JS_SAT],\n\t\t\tmonths: [\n\t\t\t\tLANG.JS_JANUARY,\n\t\t\t\tLANG.JS_FEBRUARY,\n\t\t\t\tLANG.JS_MARCH,\n\t\t\t\tLANG.JS_APRIL,\n\t\t\t\tLANG.JS_MAY,\n\t\t\t\tLANG.JS_JUNE,\n\t\t\t\tLANG.JS_JULY,\n\t\t\t\tLANG.JS_AUGUST,\n\t\t\t\tLANG.JS_SEPTEMBER,\n\t\t\t\tLANG.JS_NOVEMBER,\n\t\t\t\tLANG.JS_OCTOBER,\n\t\t\t\tLANG.JS_DECEMBER\n\t\t\t],\n\t\t\tmonthsShort: [\n\t\t\t\tLANG.JS_JAN,\n\t\t\t\tLANG.JS_FEB,\n\t\t\t\tLANG.JS_MAR,\n\t\t\t\tLANG.JS_APR,\n\t\t\t\tLANG.JS_MAY,\n\t\t\t\tLANG.JS_JUN,\n\t\t\t\tLANG.JS_JUL,\n\t\t\t\tLANG.JS_AUG,\n\t\t\t\tLANG.JS_SEP,\n\t\t\t\tLANG.JS_NOV,\n\t\t\t\tLANG.JS_OCT,\n\t\t\t\tLANG.JS_DEC\n\t\t\t],\n\t\t\tordinal: n => `${n}`,\n\t\t\tNow: LANG.JS_GANTT_NOW,\n\t\t\t'X-Scale': LANG.JS_GANTT_ZOOM_X,\n\t\t\t'Y-Scale': LANG.JS_GANTT_ZOOM_Y,\n\t\t\t'Task list width': LANG.JS_GANTT_TASKLIST,\n\t\t\t'Before/After': LANG.JS_GANTT_EXPAND,\n\t\t\t'Display task list': LANG.JS_GANTT_TASKLIST_VISIBLE\n\t\t};\n\t}\n\n\t/**\n\t * Filter project data\n\t *\n\t * @param {Object} projectData\n\t * @returns {Object}\n\t */\n\tfilterProjectData(projectData) {\n\t\tlet tasks = this.allTasks.map(task => Object.assign({}, task));\n\t\tfor (let moduleName in this.filter.status) {\n\t\t\tif (this.filter.status.hasOwnProperty(moduleName)) {\n\t\t\t\tconst visibleLabels = this.filter.status[moduleName].map(status => status.label);\n\t\t\t\ttasks = tasks.filter(task => {\n\t\t\t\t\tif (task.module !== moduleName) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\tif (visibleLabels.indexOf(task.status_label) >= 0) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\treturn tasks;\n\t}\n\n\t/**\n\t * Add icons to tasks\n\t * @param {array} tasks\n\t * @returns {array}\n\t */\n\taddIcons(tasks) {\n\t\treturn tasks.map(task => {\n\t\t\tlet icon = 'briefcase';\n\t\t\tif (task.type === 'milestone') {\n\t\t\t\ticon = 'folder';\n\t\t\t} else if (task.type === 'task') {\n\t\t\t\ticon = 'file';\n\t\t\t}\n\t\t\tconst iconClass = 'fas fa-' + icon;\n\t\t\ttask.label = `<span class=\"${iconClass} fa-lg mr-1\"></span> ${task.label}`;\n\t\t\treturn task;\n\t\t});\n\t}\n\n\t/**\n\t * Resize gantt chart\n\t */\n\tresize() {\n\t\tlet offsetTop = this.container.offset().top;\n\t\tlet contentHeight =\n\t\t\t$('body')\n\t\t\t\t.eq(0)\n\t\t\t\t.height() -\n\t\t\t$('.js-footer')\n\t\t\t\t.eq(0)\n\t\t\t\t.height();\n\t\tlet height = contentHeight - offsetTop - 100;\n\t\tif (height < 300) {\n\t\t\theight = 300;\n\t\t}\n\t\tthis.options.maxHeight = height;\n\t\tif (typeof this.ganttState !== 'undefined' && this.ganttState) {\n\t\t\tthis.ganttState.maxHeight = height;\n\t\t}\n\t}\n\n\t/**\n\t * Register gantt header actions\n\t */\n\tregisterHeaderActions() {\n\t\tthis.headerContainer.find('.js-gantt-header__btn-filter').on('click', e => {\n\t\t\te.preventDefault();\n\t\t\tthis.showFiltersModal();\n\t\t});\n\t\tthis.headerContainer.find('.js-gantt-header__btn-center').on('click', e => {\n\t\t\tthis.ganttElastic.$emit('recenterPosition');\n\t\t});\n\t\tthis.headerContainer.find('.js-gantt-header__range-slider--x').on('input', e => {\n\t\t\tthis.ganttElastic.$emit('times-timeZoom-change', Number(e.target.value));\n\t\t});\n\t\tthis.headerContainer.find('.js-gantt-header__range-slider--y').on('input', e => {\n\t\t\tthis.ganttElastic.$emit('row-height-change', Number(e.target.value));\n\t\t});\n\t\tthis.headerContainer.find('.js-gantt-header__range-slider--task-list-width').on('input', e => {\n\t\t\tthis.ganttElastic.$emit('taskList-width-change', Number(e.target.value));\n\t\t});\n\t\tthis.headerContainer.find('.js-gantt-header__range-slider--scope').on('input', e => {\n\t\t\tthis.ganttElastic.$emit('scope-change', Number(e.target.value));\n\t\t});\n\t\tthis.headerContainer.find('.js-gantt-header__range-slider--task-list-visible').on('change', e => {\n\t\t\tthis.ganttState.options.taskList.display = $(e.target).is(':checked');\n\t\t});\n\t\tthis.ganttElastic.$watch('state.taskList.display', value => {\n\t\t\tthis.headerContainer.find('.js-gantt-header__range-slider--task-list-visible').prop('checked', value);\n\t\t});\n\t\tthis.headerContainer\n\t\t\t.find('.js-gantt-header__range-slider--task-list-visible')\n\t\t\t.prop('checked', this.ganttState.options.taskList.display ? 'checked' : false);\n\t}\n\n\t/**\n\t * Load project\n\t */\n\tloadProject(projectData) {\n\t\tthis.projectData = projectData;\n\t\tif (typeof this.projectData.tasks === 'undefined' || this.projectData.tasks.length === 0) {\n\t\t\t$('.js-hide-filter').addClass('d-none');\n\t\t\t$('.js-show-add-record').removeClass('d-none');\n\t\t\treturn;\n\t\t} else {\n\t\t\tthis.allTasks = this.addIcons(this.projectData.tasks);\n\t\t}\n\t\tthis.statuses = this.projectData.statuses;\n\t\tthis.filter = { status: this.projectData.activeStatuses };\n\t\tthis.container.closest('form').on('submit', ev => {\n\t\t\tev.preventDefault();\n\t\t\tev.stopPropagation();\n\t\t\treturn false;\n\t\t});\n\t\tthis.resize();\n\t\tconst self = this;\n\t\tif (typeof self.ganttElastic === 'undefined') {\n\t\t\tthis.ganttApp = GanttElastic.mount({\n\t\t\t\tel: '#' + this.container.attr('id'),\n\t\t\t\tdata: {\n\t\t\t\t\ttasks: this.allTasks,\n\t\t\t\t\toptions: this.options,\n\t\t\t\t\tdynamicStyle: this.dynamicStyle\n\t\t\t\t},\n\t\t\t\tready(ganttElasticInstance) {\n\t\t\t\t\tself.ganttElastic = ganttElasticInstance;\n\t\t\t\t\tself.ganttState = ganttElasticInstance.state;\n\t\t\t\t\tself.registerHeaderActions();\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.container = this.containerParent.find('.gantt-elastic').eq(0);\n\t\t} else {\n\t\t\tself.ganttApp.tasks = this.allTasks;\n\t\t}\n\t}\n\n\t/**\n\t * Load project from ajax request\n\t * @param {object} params - request params such as module/action and projectId\n\t */\n\tloadProjectFromAjax(params) {\n\t\tconst self = this,\n\t\t\tprogressInstance = jQuery.progressIndicator({\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true,\n\t\t\t\t\tonBlock: () => {\n\t\t\t\t\t\tAppConnector.request(params).done(response => {\n\t\t\t\t\t\t\tself.loadProject(response.result);\n\t\t\t\t\t\t\tprogressInstance.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\t/**\n\t * Load new data to gantt\n\t *\n\t * @param {Object} data\n\t */\n\treloadData(data) {\n\t\tthis.loadProject(data);\n\t}\n\n\t/**\n\t * Save filter and reload data.\n\t *\n\t * @param {Object} filterOptions\n\t */\n\tsaveFilter(filterOptions) {\n\t\tthis.filter = filterOptions;\n\t\tthis.ganttApp.tasks = this.filterProjectData(this.projectData);\n\t}\n\n\t/**\n\t * Get status from value (object with other props)\n\t * @param {String} value\n\t * @param {String} moduleName\n\t * @returns {Object}\n\t */\n\tgetStatusFromValue(value, moduleName) {\n\t\tfor (let status of this.statuses[moduleName]) {\n\t\t\tif (status.value === value) {\n\t\t\t\treturn Object.assign({}, status);\n\t\t\t}\n\t\t}\n\t\tapp.errorLog(`Status not found [${value}]`);\n\t}\n\n\t/**\n\t * Open modal with status filters\n\t */\n\tshowFiltersModal() {\n\t\tconst self = this;\n\t\tconst box = bootbox.dialog({\n\t\t\tshow: 'false',\n\t\t\tmessage: `<div class=\"js-gantt__filter-modal form\" data-js=\"container\">\n\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t<label>${app.vtranslate('JS_PROJECT_STATUSES', 'Project')}:</label>\n\t\t\t\t\t<select class=\"select2 form-control\" id=\"js-gantt__filter-project\" multiple>\n\t\t\t\t\t\t${self.statuses.Project.map(status => {\n\t\t\t\t\t\t\treturn `<option value=\"${status.value}\" ${\n\t\t\t\t\t\t\t\tthis.filter.status.Project.map(status => status.value).indexOf(status.value) >= 0 ? 'selected' : ''\n\t\t\t\t\t\t\t}>${status.label}</option>`;\n\t\t\t\t\t\t})}\n\t\t\t\t\t</select>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"form-group\">\n\t\t\t\t<label>${app.vtranslate('JS_MILESTONE_STATUSES', 'Project')}:</label>\n\t\t\t\t\t<select class=\"select2 form-control\" id=\"js-gantt__filter-milestone\" multiple>\n\t\t\t\t\t\t${self.statuses.ProjectMilestone.map(status => {\n\t\t\t\t\t\t\treturn `<option value=\"${status.value}\" ${\n\t\t\t\t\t\t\t\tthis.filter.status.ProjectMilestone.map(status => status.value).indexOf(status.value) >= 0\n\t\t\t\t\t\t\t\t\t? 'selected'\n\t\t\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t\t}>${status.label}</option>`;\n\t\t\t\t\t\t})}\n\t\t\t\t\t</select>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"form-group\">\n\t\t\t\t<label>${app.vtranslate('JS_TASK_STATUSES', 'Project')}:</label>\n\t\t\t\t\t<select class=\"select2 form-control\" id=\"js-gantt__filter-task\" multiple>\n\t\t\t\t\t\t${self.statuses.ProjectTask.map(status => {\n\t\t\t\t\t\t\treturn `<option value=\"${status.value}\" ${\n\t\t\t\t\t\t\t\tthis.filter.status.ProjectTask.map(status => status.value).indexOf(status.value) >= 0 ? 'selected' : ''\n\t\t\t\t\t\t\t}>${status.label}</option>`;\n\t\t\t\t\t\t})}\n\t\t\t\t\t</select>\n\t\t\t\t</div>\n\t\t\t</div>`,\n\t\t\ttitle: '<span class=\"fas fa-filter\"></span> ' + app.vtranslate('JS_FILTER_BY_STATUSES', 'Project'),\n\t\t\tbuttons: {\n\t\t\t\tsuccess: {\n\t\t\t\t\tlabel: '<span class=\"fas fa-check mr-1\"></span>' + app.vtranslate('JS_UPDATE_GANTT', 'Project'),\n\t\t\t\t\tclassName: 'btn-success',\n\t\t\t\t\tcallback: function() {\n\t\t\t\t\t\tself.saveFilter({\n\t\t\t\t\t\t\tstatus: {\n\t\t\t\t\t\t\t\tProject: $('#js-gantt__filter-project', this)\n\t\t\t\t\t\t\t\t\t.val()\n\t\t\t\t\t\t\t\t\t.map(status => {\n\t\t\t\t\t\t\t\t\t\treturn self.getStatusFromValue(status, 'Project');\n\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\tProjectMilestone: $('#js-gantt__filter-milestone', this)\n\t\t\t\t\t\t\t\t\t.val()\n\t\t\t\t\t\t\t\t\t.map(status => {\n\t\t\t\t\t\t\t\t\t\treturn self.getStatusFromValue(status, 'ProjectMilestone');\n\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\tProjectTask: $('#js-gantt__filter-task', this)\n\t\t\t\t\t\t\t\t\t.val()\n\t\t\t\t\t\t\t\t\t.map(status => {\n\t\t\t\t\t\t\t\t\t\treturn self.getStatusFromValue(status, 'ProjectTask');\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tdanger: {\n\t\t\t\t\tlabel: '<span class=\"fas fa-times mr-1\"></span>' + app.vtranslate('JS_CANCEL'),\n\t\t\t\t\tclassName: 'btn-danger',\n\t\t\t\t\tcallback: function() {}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tApp.Fields.Picklist.showSelect2ElementView($(box).find('.select2'));\n\t\tbox.show();\n\t}\n\n\t/**\n\t * Register events for gantt actions in current container\n\t */\n\tregisterEvents() {\n\t\tconst container = this.container;\n\t\tcontainer.find('[data-toggle=\"tooltip\"]').tooltip();\n\t\twindow.addEventListener('resize', () => {\n\t\t\tthis.resize();\n\t\t});\n\t}\n}\n"],"names":["Gantt","container","projectData","$","containerParent","this","parent","headerContainer","find","eq","weekStart","CONFIG","firstDayOfWeekNos","options","LANG","JS_GANTT_FILTER","JS_GANTT_TITLE","app","vtranslate","id","label","value","width","task","duration","planned_duration","dynamicStyle","registerLanguage","title","loadProject","registerEvents","locale","langKey","JS_SUNDAY","JS_MONDAY","JS_TUESDAY","JS_WEDNESDAY","JS_THURSDAY","JS_FRIDAY","JS_SATURDAY","JS_SUN","JS_MON","JS_TUE","JS_WED","JS_THU","JS_FRI","JS_SAT","JS_JANUARY","JS_FEBRUARY","JS_MARCH","JS_APRIL","JS_MAY","JS_JUNE","JS_JULY","JS_AUGUST","JS_SEPTEMBER","JS_NOVEMBER","JS_OCTOBER","JS_DECEMBER","JS_JAN","JS_FEB","JS_MAR","JS_APR","JS_JUN","JS_JUL","JS_AUG","JS_SEP","JS_NOV","JS_OCT","JS_DEC","n","JS_GANTT_NOW","JS_GANTT_ZOOM_X","JS_GANTT_ZOOM_Y","JS_GANTT_TASKLIST","JS_GANTT_EXPAND","JS_GANTT_TASKLIST_VISIBLE","tasks","allTasks","map","Object","assign","moduleName","_this","filter","status","hasOwnProperty","visibleLabels","module","indexOf","status_label","icon","type","iconClass","offsetTop","offset","top","height","maxHeight","ganttState","on","preventDefault","showFiltersModal","ganttElastic","$emit","Number","e","target","taskList","display","is","$watch","prop","length","addClass","removeClass","addIcons","statuses","activeStatuses","closest","stopPropagation","resize","self","ganttApp","GanttElastic","mount","attr","ganttElasticInstance","state","registerHeaderActions","params","progressInstance","jQuery","progressIndicator","request","done","response","result","mode","data","filterOptions","filterProjectData","errorLog","box","bootbox","dialog","Project","_this3","ProjectMilestone","ProjectTask","saveFilter","val","getStatusFromValue","Fields","Picklist","showSelect2ElementView","show","tooltip","addEventListener"],"mappings":"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"}