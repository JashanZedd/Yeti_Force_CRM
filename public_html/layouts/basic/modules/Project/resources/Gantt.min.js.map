{"version":3,"file":"Gantt.min.js","sources":["Gantt.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nclass Gantt {\n\t/**\n\t * Constructor\n\t *\n\t * @param {jQuery|HTMLElement|string} container\n\t * @param {object} projectData\n\t */\n\tconstructor(container, projectData) {\n\t\tthis.container = $(container);\n\t\tthis.containerParent = this.container.parent();\n\t\tthis.headerContainer = this.containerParent\n\t\t\t.parent()\n\t\t\t.find('.js-gantt-header')\n\t\t\t.eq(0);\n\t\tthis.weekStart = 6 - CONFIG.firstDayOfWeekNos;\n\t\tlet workingDays = [1, 2, 3, 4, 5];\n\t\tthis.options = {\n\t\t\tslots: {\n\t\t\t\theader: {\n\t\t\t\t\tbeforeOptions: `<button class=\"btn btn-primary pb-2 mr-2 h-100 js-gantt__front-filter\"><span class=\"fas fa-filter\"></span> ${\n\t\t\t\t\t\tLANG.JS_GANTT_FILTER\n\t\t\t\t\t}</button>`\n\t\t\t\t}\n\t\t\t},\n\t\t\tmaxRows: 30,\n\t\t\ttimes: {\n\t\t\t\ttimeZoom: 20\n\t\t\t},\n\t\t\tcalendar: {\n\t\t\t\tworkingDays\n\t\t\t},\n\t\t\ttitle: {\n\t\t\t\tlabel: LANG.JS_GANTT_TITLE,\n\t\t\t\thtml: true\n\t\t\t},\n\t\t\ttaskList: {\n\t\t\t\texpander: {\n\t\t\t\t\tstraight: false\n\t\t\t\t},\n\t\t\t\tcolumns: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 1,\n\t\t\t\t\t\tlabel: app.vtranslate('JS_NO.'),\n\t\t\t\t\t\thtml: true,\n\t\t\t\t\t\tvalue: 'number',\n\t\t\t\t\t\twidth: 65\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 2,\n\t\t\t\t\t\tlabel: app.vtranslate('JS_NAME'),\n\t\t\t\t\t\thtml: true,\n\t\t\t\t\t\tvalue: 'label',\n\t\t\t\t\t\twidth: 280,\n\t\t\t\t\t\texpander: true\n\t\t\t\t\t},\n\t\t\t\t\t{ id: 3, label: app.vtranslate('JS_PRIORITY'), value: 'priority_label', width: 70 },\n\t\t\t\t\t{ id: 3, label: app.vtranslate('JS_STATUS'), value: 'status_label', width: 80 },\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 4,\n\t\t\t\t\t\tlabel: app.vtranslate('JS_DAYS'),\n\t\t\t\t\t\tvalue: task => {\n\t\t\t\t\t\t\treturn task.duration / 24 / 60 / 60;\n\t\t\t\t\t\t},\n\t\t\t\t\t\twidth: 75,\n\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t'task-list-header-label': {\n\t\t\t\t\t\t\t\t'text-align': 'center',\n\t\t\t\t\t\t\t\twidth: '100%'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t'task-list-item-value-container': {\n\t\t\t\t\t\t\t\t'text-align': 'center',\n\t\t\t\t\t\t\t\twidth: '100%'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 5,\n\t\t\t\t\t\tlabel: app.vtranslate('JS_PLANNED'),\n\t\t\t\t\t\tvalue: task => {\n\t\t\t\t\t\t\treturn task.planned_duration;\n\t\t\t\t\t\t},\n\t\t\t\t\t\twidth: 85,\n\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t'task-list-header-label': {\n\t\t\t\t\t\t\t\t'text-align': 'center',\n\t\t\t\t\t\t\t\twidth: '100%'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t'task-list-item-value-container': {\n\t\t\t\t\t\t\t\t'text-align': 'center',\n\t\t\t\t\t\t\t\twidth: '100%'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 6,\n\t\t\t\t\t\tlabel: app.vtranslate('JS_REALISATION'),\n\t\t\t\t\t\tvalue: 'sum_time',\n\t\t\t\t\t\twidth: 85,\n\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t'task-list-header-label': {\n\t\t\t\t\t\t\t\t'text-align': 'center',\n\t\t\t\t\t\t\t\twidth: '100%'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t'task-list-item-value-container': {\n\t\t\t\t\t\t\t\t'text-align': 'center',\n\t\t\t\t\t\t\t\twidth: '100%'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{ id: 7, label: app.vtranslate('JS_ASSIGNED', 'Project'), value: 'assigned_user_name', width: 110 },\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 8,\n\t\t\t\t\t\tlabel: '%',\n\t\t\t\t\t\tvalue: 'progress',\n\t\t\t\t\t\twidth: 35,\n\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t'task-list-header-label': {\n\t\t\t\t\t\t\t\t'text-align': 'center',\n\t\t\t\t\t\t\t\twidth: '100%'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t'task-list-item-value-container': {\n\t\t\t\t\t\t\t\t'text-align': 'center',\n\t\t\t\t\t\t\t\twidth: '100%'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t};\n\t\tthis.dynamicStyle = {\n\t\t\t'chart-expander-wrapper': {\n\t\t\t\t'line-height': '1'\n\t\t\t},\n\t\t\t'chart-row-bar-polygon': {\n\t\t\t\tstroke: '#E74C3C00',\n\t\t\t\t'stroke-width': 0,\n\t\t\t\tfill: '#F75C4C'\n\t\t\t},\n\t\t\t'chart-row-progress-bar-outline': {\n\t\t\t\tstroke: '#E74C3C00',\n\t\t\t\t'stroke-width': 0\n\t\t\t},\n\t\t\t'chart-days-highlight-rect': {\n\t\t\t\tfill: '#f3f5f780'\n\t\t\t},\n\t\t\t'header-title': {\n\t\t\t\tfloat: 'none',\n\t\t\t\tdisplay: 'inline-flex',\n\t\t\t\toverflow: 'hidden'\n\t\t\t},\n\t\t\t'header-options': {\n\t\t\t\tfloat: 'none',\n\t\t\t\tdisplay: 'inline-flex'\n\t\t\t},\n\t\t\t'header-title--html': {\n\t\t\t\t'white-space': 'nowrap',\n\t\t\t\toverflow: 'hidden',\n\t\t\t\t'text-overflow': 'ellipsis',\n\t\t\t\t'padding-left': '0',\n\t\t\t\t'letter-spacing': '0'\n\t\t\t},\n\t\t\t'slot-header-beforeOptions': {\n\t\t\t\theight: '100%',\n\t\t\t\t'vertical-align': 'top'\n\t\t\t}\n\t\t};\n\t\tthis.registerLanguage();\n\t\tif (typeof projectData !== 'undefined') {\n\t\t\tthis.options.title.label = projectData;\n\t\t\tthis.loadProject(projectData);\n\t\t}\n\t\tthis.registerEvents();\n\t}\n\n\t/**\n\t * Register language translations globally (replace old ones)\n\t */\n\tregisterLanguage() {\n\t\tthis.options.locale = {\n\t\t\tname: CONFIG.langKey,\n\t\t\tweekStart: this.weekStart,\n\t\t\tweekdays: [\n\t\t\t\tLANG.JS_SUNDAY,\n\t\t\t\tLANG.JS_MONDAY,\n\t\t\t\tLANG.JS_TUESDAY,\n\t\t\t\tLANG.JS_WEDNESDAY,\n\t\t\t\tLANG.JS_THURSDAY,\n\t\t\t\tLANG.JS_FRIDAY,\n\t\t\t\tLANG.JS_SATURDAY\n\t\t\t],\n\t\t\tweekdaysShort: [LANG.JS_SUN, LANG.JS_MON, LANG.JS_TUE, LANG.JS_WED, LANG.JS_THU, LANG.JS_FRI, LANG.JS_SAT],\n\t\t\tweekdaysMin: [LANG.JS_SUN, LANG.JS_MON, LANG.JS_TUE, LANG.JS_WED, LANG.JS_THU, LANG.JS_FRI, LANG.JS_SAT],\n\t\t\tmonths: [\n\t\t\t\tLANG.JS_JANUARY,\n\t\t\t\tLANG.JS_FEBRUARY,\n\t\t\t\tLANG.JS_MARCH,\n\t\t\t\tLANG.JS_APRIL,\n\t\t\t\tLANG.JS_MAY,\n\t\t\t\tLANG.JS_JUNE,\n\t\t\t\tLANG.JS_JULY,\n\t\t\t\tLANG.JS_AUGUST,\n\t\t\t\tLANG.JS_SEPTEMBER,\n\t\t\t\tLANG.JS_NOVEMBER,\n\t\t\t\tLANG.JS_OCTOBER,\n\t\t\t\tLANG.JS_DECEMBER\n\t\t\t],\n\t\t\tmonthsShort: [\n\t\t\t\tLANG.JS_JAN,\n\t\t\t\tLANG.JS_FEB,\n\t\t\t\tLANG.JS_MAR,\n\t\t\t\tLANG.JS_APR,\n\t\t\t\tLANG.JS_MAY,\n\t\t\t\tLANG.JS_JUN,\n\t\t\t\tLANG.JS_JUL,\n\t\t\t\tLANG.JS_AUG,\n\t\t\t\tLANG.JS_SEP,\n\t\t\t\tLANG.JS_NOV,\n\t\t\t\tLANG.JS_OCT,\n\t\t\t\tLANG.JS_DEC\n\t\t\t],\n\t\t\tordinal: n => `${n}`,\n\t\t\tNow: LANG.JS_GANTT_NOW,\n\t\t\t'X-Scale': LANG.JS_GANTT_ZOOM_X,\n\t\t\t'Y-Scale': LANG.JS_GANTT_ZOOM_Y,\n\t\t\t'Task list width': LANG.JS_GANTT_TASKLIST,\n\t\t\t'Before/After': LANG.JS_GANTT_EXPAND,\n\t\t\t'Display task list': LANG.JS_GANTT_TASKLIST_VISIBLE\n\t\t};\n\t}\n\n\t/**\n\t * Filter project data\n\t *\n\t * @param {Object} projectData\n\t * @returns {Object}\n\t */\n\tfilterProjectData(projectData) {\n\t\tlet tasks = this.allTasks.map(task => Object.assign({}, task));\n\t\tfor (let moduleName in this.filter.status) {\n\t\t\tif (this.filter.status.hasOwnProperty(moduleName)) {\n\t\t\t\tconst visibleLabels = this.filter.status[moduleName].map(status => status.label);\n\t\t\t\ttasks = tasks.filter(task => {\n\t\t\t\t\tif (task.module !== moduleName) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\tif (visibleLabels.indexOf(task.status_label) >= 0) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\treturn tasks;\n\t}\n\n\t/**\n\t * Add icons to tasks\n\t * @param {array} tasks\n\t * @returns {array}\n\t */\n\taddIcons(tasks) {\n\t\treturn tasks.map(task => {\n\t\t\tlet icon = 'briefcase';\n\t\t\tif (task.type === 'milestone') {\n\t\t\t\ticon = 'folder';\n\t\t\t} else if (task.type === 'task') {\n\t\t\t\ticon = 'file';\n\t\t\t}\n\t\t\tconst iconClass = 'fas fa-' + icon;\n\t\t\ttask.label = `<span class=\"${iconClass} fa-lg mr-1\"></span> ${task.label}`;\n\t\t\treturn task;\n\t\t});\n\t}\n\n\t/**\n\t * Resize gantt chart\n\t */\n\tresize() {\n\t\tlet offsetTop = this.container.offset().top;\n\t\tlet contentHeight =\n\t\t\t$('body')\n\t\t\t\t.eq(0)\n\t\t\t\t.height() -\n\t\t\t$('.js-footer')\n\t\t\t\t.eq(0)\n\t\t\t\t.height();\n\t\tlet height = contentHeight - offsetTop - 100;\n\t\tif (height < 300) {\n\t\t\theight = 300;\n\t\t}\n\t\tthis.options.maxHeight = height;\n\t\tif (typeof this.ganttState !== 'undefined' && this.ganttState) {\n\t\t\tthis.ganttState.maxHeight = height;\n\t\t}\n\t}\n\n\t/**\n\t * Register gantt header actions\n\t */\n\tregisterHeaderActions() {\n\t\tthis.headerContainer.find('.js-gantt-header__btn-filter').on('click', e => {\n\t\t\te.preventDefault();\n\t\t\tthis.showFiltersModal();\n\t\t});\n\t\tthis.headerContainer.find('.js-gantt-header__btn-center').on('click', e => {\n\t\t\tthis.ganttElastic.$emit('recenterPosition');\n\t\t});\n\t\tthis.headerContainer.find('.js-gantt-header__range-slider--x').on('input', e => {\n\t\t\tthis.ganttElastic.$emit('times-timeZoom-change', Number(e.target.value));\n\t\t});\n\t\tthis.headerContainer.find('.js-gantt-header__range-slider--y').on('input', e => {\n\t\t\tthis.ganttElastic.$emit('row-height-change', Number(e.target.value));\n\t\t});\n\t\tthis.headerContainer.find('.js-gantt-header__range-slider--task-list-width').on('input', e => {\n\t\t\tthis.ganttElastic.$emit('taskList-width-change', Number(e.target.value));\n\t\t});\n\t\tthis.headerContainer.find('.js-gantt-header__range-slider--scope').on('input', e => {\n\t\t\tthis.ganttElastic.$emit('scope-change', Number(e.target.value));\n\t\t});\n\t\tthis.headerContainer.find('.js-gantt-header__range-slider--task-list-visible').on('change', e => {\n\t\t\tthis.ganttState.options.taskList.display = $(e.target).is(':checked');\n\t\t});\n\t\tthis.ganttElastic.$watch('state.taskList.display', value => {\n\t\t\tthis.headerContainer.find('.js-gantt-header__range-slider--task-list-visible').prop('checked', value);\n\t\t});\n\t\tthis.headerContainer\n\t\t\t.find('.js-gantt-header__range-slider--task-list-visible')\n\t\t\t.prop('checked', this.ganttState.options.taskList.display ? 'checked' : false);\n\t}\n\n\t/**\n\t * Load project\n\t */\n\tloadProject(projectData) {\n\t\tthis.projectData = projectData;\n\t\tif (typeof this.projectData.tasks === 'undefined' || this.projectData.tasks.length === 0) {\n\t\t\t$('.js-hide-filter').addClass('d-none');\n\t\t\t$('.js-show-add-record').removeClass('d-none');\n\t\t\treturn;\n\t\t} else {\n\t\t\tthis.allTasks = this.addIcons(this.projectData.tasks);\n\t\t}\n\t\tthis.statuses = this.projectData.statuses;\n\t\tthis.filter = { status: this.projectData.activeStatuses };\n\t\tthis.container.closest('form').on('submit', ev => {\n\t\t\tev.preventDefault();\n\t\t\tev.stopPropagation();\n\t\t\treturn false;\n\t\t});\n\t\tthis.resize();\n\t\tconst self = this;\n\t\tif (typeof self.ganttElastic === 'undefined') {\n\t\t\tthis.ganttApp = GanttElastic.mount({\n\t\t\t\tel: '#' + this.container.attr('id'),\n\t\t\t\tdata: {\n\t\t\t\t\ttasks: this.allTasks,\n\t\t\t\t\toptions: this.options,\n\t\t\t\t\tdynamicStyle: this.dynamicStyle\n\t\t\t\t},\n\t\t\t\tready(ganttElasticInstance) {\n\t\t\t\t\tself.ganttElastic = ganttElasticInstance;\n\t\t\t\t\tself.ganttState = ganttElasticInstance.state;\n\t\t\t\t\tself.registerHeaderActions();\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.container = this.containerParent.find('.gantt-elastic').eq(0);\n\t\t} else {\n\t\t\tself.ganttApp.tasks = this.allTasks;\n\t\t}\n\t}\n\n\t/**\n\t * Load project from ajax request\n\t * @param {object} params - request params such as module/action and projectId\n\t */\n\tloadProjectFromAjax(params) {\n\t\tconst self = this,\n\t\t\tprogressInstance = jQuery.progressIndicator({\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true,\n\t\t\t\t\tonBlock: () => {\n\t\t\t\t\t\tAppConnector.request(params).done(response => {\n\t\t\t\t\t\t\tself.loadProject(response.result);\n\t\t\t\t\t\t\tprogressInstance.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\t/**\n\t * Load new data to gantt\n\t *\n\t * @param {Object} data\n\t */\n\treloadData(data) {\n\t\tthis.loadProject(data);\n\t}\n\n\t/**\n\t * Save filter and reload data.\n\t *\n\t * @param {Object} filterOptions\n\t */\n\tsaveFilter(filterOptions) {\n\t\tthis.filter = filterOptions;\n\t\tthis.ganttApp.tasks = this.filterProjectData(this.projectData);\n\t}\n\n\t/**\n\t * Get status from value (object with other props)\n\t * @param {String} value\n\t * @param {String} moduleName\n\t * @returns {Object}\n\t */\n\tgetStatusFromValue(value, moduleName) {\n\t\tfor (let status of this.statuses[moduleName]) {\n\t\t\tif (status.value === value) {\n\t\t\t\treturn Object.assign({}, status);\n\t\t\t}\n\t\t}\n\t\tapp.errorLog(`Status not found [${value}]`);\n\t}\n\n\t/**\n\t * Open modal with status filters\n\t */\n\tshowFiltersModal() {\n\t\tconst self = this;\n\t\tconst box = bootbox.dialog({\n\t\t\tshow: 'false',\n\t\t\tmessage: `<div class=\"js-gantt__filter-modal form\" data-js=\"container\">\n\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t<label>${app.vtranslate('JS_PROJECT_STATUSES', 'Project')}:</label>\n\t\t\t\t\t<select class=\"select2 form-control\" id=\"js-gantt__filter-project\" multiple>\n\t\t\t\t\t\t${self.statuses.Project.map(status => {\n\t\t\t\t\t\t\treturn `<option value=\"${status.value}\" ${\n\t\t\t\t\t\t\t\tthis.filter.status.Project.map(status => status.value).indexOf(status.value) >= 0 ? 'selected' : ''\n\t\t\t\t\t\t\t}>${status.label}</option>`;\n\t\t\t\t\t\t})}\n\t\t\t\t\t</select>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"form-group\">\n\t\t\t\t<label>${app.vtranslate('JS_MILESTONE_STATUSES', 'Project')}:</label>\n\t\t\t\t\t<select class=\"select2 form-control\" id=\"js-gantt__filter-milestone\" multiple>\n\t\t\t\t\t\t${self.statuses.ProjectMilestone.map(status => {\n\t\t\t\t\t\t\treturn `<option value=\"${status.value}\" ${\n\t\t\t\t\t\t\t\tthis.filter.status.ProjectMilestone.map(status => status.value).indexOf(status.value) >= 0\n\t\t\t\t\t\t\t\t\t? 'selected'\n\t\t\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t\t}>${status.label}</option>`;\n\t\t\t\t\t\t})}\n\t\t\t\t\t</select>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"form-group\">\n\t\t\t\t<label>${app.vtranslate('JS_TASK_STATUSES', 'Project')}:</label>\n\t\t\t\t\t<select class=\"select2 form-control\" id=\"js-gantt__filter-task\" multiple>\n\t\t\t\t\t\t${self.statuses.ProjectTask.map(status => {\n\t\t\t\t\t\t\treturn `<option value=\"${status.value}\" ${\n\t\t\t\t\t\t\t\tthis.filter.status.ProjectTask.map(status => status.value).indexOf(status.value) >= 0 ? 'selected' : ''\n\t\t\t\t\t\t\t}>${status.label}</option>`;\n\t\t\t\t\t\t})}\n\t\t\t\t\t</select>\n\t\t\t\t</div>\n\t\t\t</div>`,\n\t\t\ttitle: '<span class=\"fas fa-filter\"></span> ' + app.vtranslate('JS_FILTER_BY_STATUSES', 'Project'),\n\t\t\tbuttons: {\n\t\t\t\tsuccess: {\n\t\t\t\t\tlabel: '<span class=\"fas fa-check mr-1\"></span>' + app.vtranslate('JS_UPDATE_GANTT', 'Project'),\n\t\t\t\t\tclassName: 'btn-success',\n\t\t\t\t\tcallback: function() {\n\t\t\t\t\t\tself.saveFilter({\n\t\t\t\t\t\t\tstatus: {\n\t\t\t\t\t\t\t\tProject: $('#js-gantt__filter-project', this)\n\t\t\t\t\t\t\t\t\t.val()\n\t\t\t\t\t\t\t\t\t.map(status => {\n\t\t\t\t\t\t\t\t\t\treturn self.getStatusFromValue(status, 'Project');\n\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\tProjectMilestone: $('#js-gantt__filter-milestone', this)\n\t\t\t\t\t\t\t\t\t.val()\n\t\t\t\t\t\t\t\t\t.map(status => {\n\t\t\t\t\t\t\t\t\t\treturn self.getStatusFromValue(status, 'ProjectMilestone');\n\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\tProjectTask: $('#js-gantt__filter-task', this)\n\t\t\t\t\t\t\t\t\t.val()\n\t\t\t\t\t\t\t\t\t.map(status => {\n\t\t\t\t\t\t\t\t\t\treturn self.getStatusFromValue(status, 'ProjectTask');\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tdanger: {\n\t\t\t\t\tlabel: '<span class=\"fas fa-times mr-1\"></span>' + app.vtranslate('JS_CANCEL'),\n\t\t\t\t\tclassName: 'btn-danger',\n\t\t\t\t\tcallback: function() {}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tApp.Fields.Picklist.showSelect2ElementView($(box).find('.select2'));\n\t\tbox.show();\n\t}\n\n\t/**\n\t * Register events for gantt actions in current container\n\t */\n\tregisterEvents() {\n\t\tconst container = this.container;\n\t\tcontainer.find('[data-toggle=\"tooltip\"]').tooltip();\n\t\twindow.addEventListener('resize', () => {\n\t\t\tthis.resize();\n\t\t});\n\t}\n}\n"],"names":["Gantt","container","projectData","$","containerParent","parent","headerContainer","find","eq","weekStart","CONFIG","firstDayOfWeekNos","workingDays","options","LANG","JS_GANTT_FILTER","JS_GANTT_TITLE","app","vtranslate","id","label","value","width","task","duration","planned_duration","dynamicStyle","registerLanguage","title","loadProject","registerEvents","locale","langKey","JS_SUNDAY","JS_MONDAY","JS_TUESDAY","JS_WEDNESDAY","JS_THURSDAY","JS_FRIDAY","JS_SATURDAY","JS_SUN","JS_MON","JS_TUE","JS_WED","JS_THU","JS_FRI","JS_SAT","JS_JANUARY","JS_FEBRUARY","JS_MARCH","JS_APRIL","JS_MAY","JS_JUNE","JS_JULY","JS_AUGUST","JS_SEPTEMBER","JS_NOVEMBER","JS_OCTOBER","JS_DECEMBER","JS_JAN","JS_FEB","JS_MAR","JS_APR","JS_JUN","JS_JUL","JS_AUG","JS_SEP","JS_NOV","JS_OCT","JS_DEC","n","JS_GANTT_NOW","JS_GANTT_ZOOM_X","JS_GANTT_ZOOM_Y","JS_GANTT_TASKLIST","JS_GANTT_EXPAND","JS_GANTT_TASKLIST_VISIBLE","tasks","allTasks","map","Object","assign","moduleName","filter","status","hasOwnProperty","visibleLabels","module","indexOf","status_label","icon","type","iconClass","offsetTop","offset","top","contentHeight","height","maxHeight","ganttState","on","preventDefault","showFiltersModal","ganttElastic","$emit","Number","e","target","taskList","display","is","$watch","prop","length","addClass","removeClass","addIcons","statuses","activeStatuses","closest","stopPropagation","resize","self","ganttApp","GanttElastic","mount","attr","ganttElasticInstance","state","registerHeaderActions","params","progressInstance","jQuery","progressIndicator","request","done","response","result","mode","data","filterOptions","filterProjectData","errorLog","box","bootbox","dialog","Project","ProjectMilestone","ProjectTask","saveFilter","val","getStatusFromValue","Fields","Picklist","showSelect2ElementView","show","tooltip","addEventListener"],"mappings":"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"}