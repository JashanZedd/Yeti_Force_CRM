{"version":3,"file":"Gantt.min.js","sources":["Gantt.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nclass Gantt {\n\n\t/**\n\t * Constructor\n\t *\n\t * @param {jQuery|HTMLElement|string} container\n\t * @param {object} projectData\n\t */\n\tconstructor(container, projectData) {\n\t\tthis.container = $(container);\n\t\tthis.containerParent = this.container.parent();\n\t\tthis.headerContainer = this.containerParent.parent().find('.js-gantt-header').eq(0);\n\t\tthis.options = {\n\t\t\tslots: {\n\t\t\t\theader: {\n\t\t\t\t\tbeforeOptions: `<button class=\"btn btn-primary pb-2 mr-2 h-100 js-gantt__front-filter\"><span class=\"fas fa-filter\"></span> ${LANG.JS_GANTT_FILTER}</button>`\n\t\t\t\t}\n\t\t\t},\n\t\t\tmaxRows: 30,\n\t\t\tstyle: {\n\t\t\t\t'chart-row-bar-polygon': {\n\t\t\t\t\t'stroke': '#E74C3C00',\n\t\t\t\t\t'stroke-width': 0,\n\t\t\t\t\t'fill': '#F75C4C',\n\t\t\t\t},\n\t\t\t\t'chart-row-progress-bar-outline': {\n\t\t\t\t\t'stroke': '#E74C3C00',\n\t\t\t\t\t'stroke-width': 0\n\t\t\t\t},\n\t\t\t\t'header-title': {\n\t\t\t\t\t'float': 'none',\n\t\t\t\t\t'display': 'inline-flex',\n\t\t\t\t\t'overflow': 'hidden',\n\t\t\t\t},\n\t\t\t\t'header-options': {\n\t\t\t\t\t'float': 'none',\n\t\t\t\t\t'display': 'inline-flex'\n\t\t\t\t},\n\t\t\t\t'header-title--html': {\n\t\t\t\t\t'white-space': 'nowrap',\n\t\t\t\t\t'overflow': 'hidden',\n\t\t\t\t\t'text-overflow': 'ellipsis',\n\t\t\t\t\t'padding-left': '0',\n\t\t\t\t\t'letter-spacing': '0'\n\t\t\t\t},\n\t\t\t\t'slot-header-beforeOptions': {\n\t\t\t\t\t'height': '100%',\n\t\t\t\t\t'vertical-align': 'top'\n\t\t\t\t}\n\t\t\t},\n\t\t\ttitle: {\n\t\t\t\tlabel: LANG.JS_GANTT_TITLE,\n\t\t\t\thtml: true,\n\t\t\t},\n\t\t\ttaskList: {\n\t\t\t\texpander: {\n\t\t\t\t\tstraight: false,\n\t\t\t\t},\n\t\t\t\tcolumns: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 1,\n\t\t\t\t\t\tlabel: app.vtranslate('JS_NO.', 'Project'),\n\t\t\t\t\t\thtml: true,\n\t\t\t\t\t\tvalue: 'number',\n\t\t\t\t\t\twidth: 65,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 2, label: app.vtranslate('JS_NAME'),\n\t\t\t\t\t\thtml: true,\n\t\t\t\t\t\tvalue: 'label', width: 280, expander: true\n\t\t\t\t\t},\n\t\t\t\t\t{id: 3, label: app.vtranslate('JS_PRIORITY'), value: 'priority_label', width: 70},\n\t\t\t\t\t{id: 3, label: app.vtranslate('JS_STATUS'), value: 'status_label', width: 80},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 4,\n\t\t\t\t\t\tlabel: app.vtranslate('JS_DURATION_SHORT', 'Project'),\n\t\t\t\t\t\tvalue: (task) => {\n\t\t\t\t\t\t\treturn task.duration / 24 / 60 / 60;\n\t\t\t\t\t\t},\n\t\t\t\t\t\twidth: 45,\n\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t'task-list-header-label': {\n\t\t\t\t\t\t\t\t'text-align': 'center',\n\t\t\t\t\t\t\t\t'width': '100%'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t'task-list-item-value-container': {\n\t\t\t\t\t\t\t\t'text-align': 'center',\n\t\t\t\t\t\t\t\t'width': '100%'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{id: 5, label: app.vtranslate('JS_ASSIGNED', 'Project'), value: 'assigned_user_name', width: 150},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 5, label: '%', value: 'progress', width: 35, style: {\n\t\t\t\t\t\t\t'task-list-header-label': {\n\t\t\t\t\t\t\t\t'text-align': 'center',\n\t\t\t\t\t\t\t\t'width': '100%'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t'task-list-item-value-container': {\n\t\t\t\t\t\t\t\t'text-align': 'center',\n\t\t\t\t\t\t\t\t'width': '100%'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t};\n\t\tthis.registerLanguage();\n\t\tif (typeof projectData !== 'undefined') {\n\t\t\tthis.options.title.label = projectData;\n\t\t\tthis.loadProject(projectData);\n\t\t}\n\t\tthis.registerEvents();\n\t}\n\n\t/**\n\t * Register language translations globally (replace old ones)\n\t */\n\tregisterLanguage() {\n\t\tthis.options.locale = {\n\t\t\t'code': CONFIG.langKey,\n\t\t\t'name': CONFIG.langKey,\n\t\t\t'weekdays': [LANG.JS_MONDAY, LANG.JS_TUESDAY, LANG.JS_WEDNESDAY, LANG.JS_THURSDAY, LANG.JS_FRIDAY, LANG.JS_SATURDAY, LANG.JS_SUNDAY],\n\t\t\t'weekdaysShort': [LANG.JS_MON, LANG.JS_TUE, LANG.JS_WED, LANG.JS_THU, LANG.JS_FRI, LANG.JS_SAT, LANG.JS_SUN],\n\t\t\t'weekdaysMin': [LANG.JS_MON, LANG.JS_TUE, LANG.JS_WED, LANG.JS_THU, LANG.JS_FRI, LANG.JS_SAT, LANG.JS_SUN],\n\t\t\t'months': [LANG.JS_JANUARY, LANG.JS_FEBRUARY, LANG.JS_MARCH, LANG.JS_APRIL, LANG.JS_MAY, LANG.JS_JUNE, LANG.JS_JULY, LANG.JS_AUGUST, LANG.JS_SEPTEMBER, LANG.JS_NOVEMBER, LANG.JS_OCTOBER, LANG.JS_DECEMBER],\n\t\t\t'monthsShort': [LANG.JS_JAN, LANG.JS_FEB, LANG.JS_MAR, LANG.JS_APR, LANG.JS_MAY, LANG.JS_JUN, LANG.JS_JUL, LANG.JS_AUG, LANG.JS_SEP, LANG.JS_NOV, LANG.JS_OCT, LANG.JS_DEC],\n\t\t\t'ordinal': n => `${n}`,\n\t\t\t'Now': LANG.JS_GANTT_NOW,\n\t\t\t'X-Scale': LANG.JS_GANTT_ZOOM_X,\n\t\t\t'Y-Scale': LANG.JS_GANTT_ZOOM_Y,\n\t\t\t'Task list width': LANG.JS_GANTT_TASKLIST,\n\t\t\t'Before/After': LANG.JS_GANTT_EXPAND,\n\t\t\t'Display task list': LANG.JS_GANTT_TASKLIST_VISIBLE\n\t\t};\n\t}\n\n\t/**\n\t * Filter project data\n\t *\n\t * @param {Object} projectData\n\t * @returns {Object}\n\t */\n\tfilterProjectData(projectData) {\n\t\tlet tasks = this.allTasks.map(task => Object.assign({}, task));\n\t\tfor (let moduleName in this.filter.status) {\n\t\t\tif (this.filter.status.hasOwnProperty(moduleName)) {\n\t\t\t\tconst visibleLabels = this.filter.status[moduleName].map(status => status.label);\n\t\t\t\ttasks = tasks.filter(task => {\n\t\t\t\t\tif (task.module !== moduleName) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\tif (visibleLabels.indexOf(task.status_label) >= 0) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\treturn tasks;\n\t}\n\n\t/**\n\t * Add icons to tasks\n\t * @param {array} tasks\n\t * @returns {array}\n\t */\n\taddIcons(tasks) {\n\t\treturn tasks.map((task) => {\n\t\t\tlet icon = 'briefcase';\n\t\t\tif (task.type === 'milestone') {\n\t\t\t\ticon = 'folder';\n\t\t\t} else if (task.type === 'task') {\n\t\t\t\ticon = 'file';\n\t\t\t}\n\t\t\tconst iconClass = 'fas fa-' + icon;\n\t\t\ttask.label = `<span class=\"${iconClass} fa-lg mr-1\"></span> ${task.label}`;\n\t\t\treturn task;\n\t\t});\n\t}\n\n\t/**\n\t * Resize gantt chart\n\t */\n\tresize() {\n\t\tlet offsetTop = this.container.offset().top;\n\t\tlet contentHeight = $('body').eq(0).height() - $('.js-footer').eq(0).height();\n\t\tlet height = contentHeight - offsetTop - 100;\n\t\tif (height < 0) {\n\t\t\theight = 0;\n\t\t}\n\t\tthis.options.maxHeight = height;\n\t\tif (typeof this.ganttState !== 'undefined' && this.ganttState) {\n\t\t\tthis.ganttState.maxHeight = height;\n\t\t}\n\t}\n\n\t/**\n\t * Register gantt header actions\n\t */\n\tregisterHeaderActions() {\n\t\tthis.headerContainer.find('.js-gantt-header__btn-filter').on('click', (e) => {\n\t\t\te.preventDefault();\n\t\t\tthis.showFiltersModal();\n\t\t});\n\t\tthis.headerContainer.find('.js-gantt-header__btn-center').on('click', (e) => {\n\t\t\tthis.ganttElastic.$emit('recenterPosition');\n\t\t});\n\t\tthis.headerContainer.find('.js-gantt-header__range-slider--x').on('input', (e) => {\n\t\t\tthis.ganttElastic.$emit(\"times-timeZoom-change\", Number(e.target.value));\n\t\t});\n\t\tthis.headerContainer.find('.js-gantt-header__range-slider--y').on('input', (e) => {\n\t\t\tthis.ganttElastic.$emit(\"row-height-change\", Number(e.target.value));\n\t\t});\n\t\tthis.headerContainer.find('.js-gantt-header__range-slider--task-list-width').on('input', (e) => {\n\t\t\tthis.ganttElastic.$emit('taskList-width-change', Number(e.target.value));\n\t\t});\n\t\tthis.headerContainer.find('.js-gantt-header__range-slider--scope').on('input', (e) => {\n\t\t\tthis.ganttElastic.$emit('scope-change', Number(e.target.value));\n\t\t});\n\t\tthis.headerContainer.find('.js-gantt-header__range-slider--task-list-visible').on('change', (e) => {\n\t\t\tthis.ganttState.taskList.display = $(e.target).is(':checked');\n\t\t});\n\t\tthis.ganttElastic.$watch('state.taskList.display', (value) => {\n\t\t\tthis.headerContainer.find('.js-gantt-header__range-slider--task-list-visible').prop('checked', value);\n\t\t});\n\t\tthis.headerContainer.find('.js-gantt-header__range-slider--task-list-visible').prop('checked', this.ganttState.taskList.display ? 'checked' : false);\n\t}\n\n\t/**\n\t * Load project\n\t */\n\tloadProject(projectData) {\n\t\tthis.projectData = projectData;\n\t\tif (typeof this.projectData.tasks === 'undefined' || this.projectData.tasks.length === 0) {\n\t\t\t$('.js-hide-filter').addClass('d-none');\n\t\t\t$('.js-show-add-record').removeClass('d-none');\n\t\t\treturn;\n\t\t} else {\n\t\t\tthis.allTasks = this.addIcons(this.projectData.tasks);\n\t\t}\n\t\tthis.statuses = this.projectData.statuses;\n\t\tthis.filter = {status: this.projectData.activeStatuses};\n\t\tthis.container.closest('form').on('submit', (ev) => {\n\t\t\tev.preventDefault();\n\t\t\tev.stopPropagation();\n\t\t\treturn false;\n\t\t});\n\t\tthis.resize();\n\t\tconst self = this;\n\t\tif (typeof self.ganttElastic === 'undefined') {\n\t\t\tGanttElastic.mount({\n\t\t\t\tel: '#' + this.container.attr('id'),\n\t\t\t\ttasks: this.allTasks,\n\t\t\t\toptions: this.options,\n\t\t\t\tready(ganttElasticInstance) {\n\t\t\t\t\tself.ganttElastic = ganttElasticInstance;\n\t\t\t\t\tself.ganttState = ganttElasticInstance.state;\n\t\t\t\t\tself.registerHeaderActions();\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.container = this.containerParent.find('.gantt-elastic').eq(0);\n\t\t} else {\n\t\t\tself.ganttState.tasks = this.allTasks;\n\t\t}\n\t}\n\n\t/**\n\t * Load project from ajax request\n\t * @param {object} params - request params such as module/action and projectId\n\t */\n\tloadProjectFromAjax(params) {\n\t\tconst progressInstance = jQuery.progressIndicator({blockInfo: {enabled: true}});\n\t\tAppConnector.request(params).done((response) => {\n\t\t\tthis.loadProject(response.result);\n\t\t\tprogressInstance.progressIndicator({mode: 'hide'});\n\t\t});\n\t}\n\n\t/**\n\t * Load new data to gantt\n\t *\n\t * @param {Object} data\n\t */\n\treloadData(data) {\n\t\tthis.loadProject(data);\n\t}\n\n\t/**\n\t * Save filter and reload data.\n\t *\n\t * @param {Object} filterOptions\n\t */\n\tsaveFilter(filterOptions) {\n\t\tthis.filter = filterOptions;\n\t\tthis.ganttState.tasks = this.filterProjectData(this.projectData);\n\t}\n\n\t/**\n\t * Get status from value (object with other props)\n\t * @param {String} value\n\t * @param {String} moduleName\n\t * @returns {Object}\n\t */\n\tgetStatusFromValue(value, moduleName) {\n\t\tfor (let status of this.statuses[moduleName]) {\n\t\t\tif (status.value === value) {\n\t\t\t\treturn Object.assign({}, status);\n\t\t\t}\n\t\t}\n\t\tapp.errorLog(`Status not found [${value}]`);\n\t}\n\n\t/**\n\t * Open modal with status filters\n\t */\n\tshowFiltersModal() {\n\t\tconst self = this;\n\t\tconst box = bootbox.dialog({\n\t\t\tshow: 'false',\n\t\t\tmessage: `<div class=\"js-gantt__filter-modal form\" data-js=\"container\">\n\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t<label>${app.vtranslate(\"JS_PROJECT_STATUSES\", 'Project')}:</label>\n\t\t\t\t\t<select class=\"select2 form-control\" id=\"js-gantt__filter-project\" multiple>\n\t\t\t\t\t\t${self.statuses.Project.map((status) => {\n\t\t\t\treturn `<option value=\"${status.value}\" ${this.filter.status.Project.map(status => status.value).indexOf(status.value) >= 0 ? 'selected' : ''}>${status.label}</option>`;\n\t\t\t})}\n\t\t\t\t\t</select>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"form-group\">\n\t\t\t\t<label>${app.vtranslate(\"JS_MILESTONE_STATUSES\", 'Project')}:</label>\n\t\t\t\t\t<select class=\"select2 form-control\" id=\"js-gantt__filter-milestone\" multiple>\n\t\t\t\t\t\t${self.statuses.ProjectMilestone.map((status) => {\n\t\t\t\treturn `<option value=\"${status.value}\" ${this.filter.status.ProjectMilestone.map(status => status.value).indexOf(status.value) >= 0 ? 'selected' : ''}>${status.label}</option>`;\n\t\t\t})}\n\t\t\t\t\t</select>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"form-group\">\n\t\t\t\t<label>${app.vtranslate(\"JS_TASK_STATUSES\", 'Project')}:</label>\n\t\t\t\t\t<select class=\"select2 form-control\" id=\"js-gantt__filter-task\" multiple>\n\t\t\t\t\t\t${self.statuses.ProjectTask.map((status) => {\n\t\t\t\treturn `<option value=\"${status.value}\" ${this.filter.status.ProjectTask.map(status => status.value).indexOf(status.value) >= 0 ? 'selected' : ''}>${status.label}</option>`;\n\t\t\t})}\n\t\t\t\t\t</select>\n\t\t\t\t</div>\n\t\t\t</div>`,\n\t\t\ttitle: '<span class=\"fas fa-filter\"></span> ' + app.vtranslate('JS_FILTER_BY_STATUSES', 'Project'),\n\t\t\tbuttons: {\n\t\t\t\tsuccess: {\n\t\t\t\t\tlabel: '<span class=\"fas fa-check mr-1\"></span>' + app.vtranslate('JS_UPDATE_GANTT', 'Project'),\n\t\t\t\t\tclassName: \"btn-success\",\n\t\t\t\t\tcallback: function () {\n\t\t\t\t\t\tself.saveFilter({\n\t\t\t\t\t\t\tstatus: {\n\t\t\t\t\t\t\t\tProject: $('#js-gantt__filter-project', this).val().map((status) => {\n\t\t\t\t\t\t\t\t\treturn self.getStatusFromValue(status, 'Project');\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\tProjectMilestone: $('#js-gantt__filter-milestone', this).val().map((status) => {\n\t\t\t\t\t\t\t\t\treturn self.getStatusFromValue(status, 'ProjectMilestone');\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\tProjectTask: $('#js-gantt__filter-task', this).val().map((status) => {\n\t\t\t\t\t\t\t\t\treturn self.getStatusFromValue(status, 'ProjectTask');\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tdanger: {\n\t\t\t\t\tlabel: '<span class=\"fas fa-times mr-1\"></span>' + app.vtranslate('JS_CANCEL'),\n\t\t\t\t\tclassName: \"btn-danger\",\n\t\t\t\t\tcallback: function () {\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tApp.Fields.Picklist.showSelect2ElementView($(box).find('.select2'));\n\t\tbox.show();\n\t}\n\n\t/**\n\t * Register events for gantt actions in current container\n\t */\n\tregisterEvents() {\n\t\tconst container = this.container;\n\t\tcontainer.find('[data-toggle=\"tooltip\"]').tooltip();\n\t\twindow.addEventListener('resize', () => {\n\t\t\tthis.resize();\n\t\t});\n\t}\n}\n"],"names":["container","projectData","$","containerParent","parent","headerContainer","find","eq","options","slots","header","beforeOptions","LANG","JS_GANTT_FILTER","maxRows","style","title","label","JS_GANTT_TITLE","html","taskList","expander","straight","columns","id","app","vtranslate","value","width","task","duration","registerLanguage","loadProject","registerEvents","locale","CONFIG","langKey","JS_MONDAY","JS_TUESDAY","JS_WEDNESDAY","JS_THURSDAY","JS_FRIDAY","JS_SATURDAY","JS_SUNDAY","JS_MON","JS_TUE","JS_WED","JS_THU","JS_FRI","JS_SAT","JS_SUN","JS_JANUARY","JS_FEBRUARY","JS_MARCH","JS_APRIL","JS_MAY","JS_JUNE","JS_JULY","JS_AUGUST","JS_SEPTEMBER","JS_NOVEMBER","JS_OCTOBER","JS_DECEMBER","JS_JAN","JS_FEB","JS_MAR","JS_APR","JS_JUN","JS_JUL","JS_AUG","JS_SEP","JS_NOV","JS_OCT","JS_DEC","n","JS_GANTT_NOW","JS_GANTT_ZOOM_X","JS_GANTT_ZOOM_Y","JS_GANTT_TASKLIST","JS_GANTT_EXPAND","JS_GANTT_TASKLIST_VISIBLE","tasks","allTasks","map","assign","moduleName","filter","status","hasOwnProperty","module","indexOf","status_label","type","icon","iconClass","offset","top","contentHeight","height","offsetTop","maxHeight","ganttState","on","e","preventDefault","showFiltersModal","ganttElastic","$emit","Number","target","display","is","$watch","prop","length","addClass","removeClass","addIcons","statuses","activeStatuses","closest","ev","stopPropagation","resize","GanttElastic","mount","el","attr","ready","ganttElasticInstance","self","state","registerHeaderActions","params","progressInstance","jQuery","progressIndicator","blockInfo","enabled","AppConnector","request","done","response","result","mode","data","filterOptions","filterProjectData","errorLog","box","bootbox","dialog","show","message","Project","ProjectMilestone","ProjectTask","buttons","success","className","callback","saveFilter","val","getStatusFromValue","danger","App","Fields","Picklist","showSelect2ElementView","tooltip","window","addEventListener"],"mappings":"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"}