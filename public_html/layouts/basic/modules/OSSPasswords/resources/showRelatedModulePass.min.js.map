{"version":3,"file":"showRelatedModulePass.min.js","sources":["showRelatedModulePass.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n// show/hide password\n'use strict';\nvar clipBoardInstances = [];\n$('.show_pass').on('click', function(e) {\n\tlet btn = $(this);\n\tlet record = btn.data('id');\n\tlet iconElement = btn.find('span');\n\tlet text = btn.data('title-copy');\n\tlet copyKey = `.copy_pass${record}`;\n\tlet copyBtn = $(`<button type=\"button\" id=\"copybtn_${record}\" data-id=\"pass_${record}\"\n\t\tclass=\"copy_pass${record} btn btn-light btn-sm mr-2 js-popover-tooltip\" data-content=\"${text}\" data-js=\"popover\"><span class=\"fas fa-download\"></span></button>`);\n\tlet element = $('[id=\"pass_' + record + '\"]');\n\tlet passVal = element.html();\n\tlet showPassText = btn.data('titleShow') ? btn.data('titleShow') : app.vtranslate('LBL_ShowPassword');\n\tlet hidePassText = btn.data('titleHide') ? btn.data('titleHide') : app.vtranslate('LBL_HidePassword');\n\n\tif (clipBoardInstances[copyKey] === undefined) {\n\t\tlet clipboard = new ClipboardJS(copyKey, {\n\t\t\ttext: function(trigger) {\n\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\ttext: app.vtranslate('JS_NOTIFY_COPY_TEXT'),\n\t\t\t\t\ttype: 'success'\n\t\t\t\t});\n\t\t\t\treturn $('#' + trigger.getAttribute('data-id')).text();\n\t\t\t}\n\t\t});\n\t\tclipBoardInstances[copyKey] = clipboard;\n\t}\n\tif (passVal == '**********') {\n\t\tvar params = {\n\t\t\tmodule: 'OSSPasswords',\n\t\t\taction: 'GetPass',\n\t\t\trecord: record\n\t\t};\n\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\tposition: 'html',\n\t\t\tblockInfo: {\n\t\t\t\tenabled: true\n\t\t\t}\n\t\t});\n\t\tAppConnector.request(params).done(function(data) {\n\t\t\tvar response = data['result'];\n\t\t\tif (response['success']) {\n\t\t\t\telement.text(response['password']);\n\t\t\t\t// change button title to 'Hide Password'\n\t\t\t\tbtn.on('show.bs.popover', function() {\n\t\t\t\t\tthis.dataset.content = hidePassText;\n\t\t\t\t});\n\t\t\t\ticonElement.removeClass('adminIcon-passwords-encryption').addClass('fas fa-lock');\n\t\t\t\t// show copy to clipboard button\n\t\t\t\tcopyBtn.insertBefore(btn);\n\t\t\t}\n\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t});\n\t} else {\n\t\telement.html('**********');\n\t\t// change button title to 'Show Password'\n\t\tbtn.on('show.bs.popover', function() {\n\t\t\tthis.dataset.content = showPassText;\n\t\t});\n\t\tapp.showPopoverElementView(element);\n\t\ticonElement.removeClass('fas fa-lock').addClass('adminIcon-passwords-encryption');\n\t\t// hide copy to clipboard button\n\t\t$(copyKey).remove();\n\t\tclipBoardInstances[copyKey].destroy();\n\t\tdelete clipBoardInstances[copyKey];\n\t}\n\treturn false;\n});\n"],"names":["clipBoardInstances","$","on","e","btn","this","record","data","iconElement","find","text","copyKey","copyBtn","element","passVal","html","showPassText","app","vtranslate","hidePassText","undefined","clipboard","ClipboardJS","trigger","showPnotify","getAttribute","params","progressIndicatorElement","jQuery","progressIndicator","request","done","response","dataset","content","removeClass","addClass","insertBefore","mode","showPopoverElementView","remove","destroy"],"mappings":"aAGA,IAAIA,mBAAqB,GACzBC,EAAE,cAAcC,GAAG,SAAS,SAASC,OAChCC,IAAMH,EAAEI,MACRC,OAASF,IAAIG,KAAK,MAClBC,YAAcJ,IAAIK,KAAK,QACvBC,KAAON,IAAIG,KAAK,cAChBI,qBAAuBL,OACvBM,QAAUX,uCAAuCK,0BAAyBA,iCAC3DA,uEAAsEI,2EACrFG,QAAUZ,EAAE,aAAeK,OAAS,MACpCQ,QAAUD,QAAQE,OAClBC,aAAeZ,IAAIG,KAAK,aAAeH,IAAIG,KAAK,aAAeU,IAAIC,WAAW,oBAC9EC,aAAef,IAAIG,KAAK,aAAeH,IAAIG,KAAK,aAAeU,IAAIC,WAAW,4BAE9CE,IAAhCpB,mBAAmBW,SAAwB,KAC1CU,UAAY,IAAIC,YAAYX,QAAS,MAClC,SAASY,iCACGC,YAAY,MACtBP,IAAIC,WAAW,4BACf,YAEAjB,EAAE,IAAMsB,QAAQE,aAAa,YAAYf,6BAG/BC,SAAWU,aAEhB,cAAXP,QAAyB,KACxBY,OAAS,QACJ,sBACA,iBACApB,QAELqB,yBAA2BC,OAAOC,kBAAkB,UAC7C,iBACC,UACD,kBAGEC,QAAQJ,QAAQK,MAAK,SAASxB,UACtCyB,SAAWzB,KAAA,OACXyB,SAAA,kBACKtB,KAAKsB,SAAA,cAET9B,GAAG,mBAAmB,gBACpB+B,QAAQC,QAAUf,4BAEZgB,YAAY,kCAAkCC,SAAS,uBAE3DC,aAAajC,+BAEGyB,kBAAkB,CAAES,KAAM,yBAG5CvB,KAAK,kBAETb,GAAG,mBAAmB,gBACpB+B,QAAQC,QAAUlB,oBAEpBuB,uBAAuB1B,qBACfsB,YAAY,eAAeC,SAAS,oCAE9CzB,SAAS6B,4BACQ7B,SAAS8B,iBACrBzC,mBAAmBW,gBAEpB"}