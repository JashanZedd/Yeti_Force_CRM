{"version":3,"file":"showRelatedModulePass.min.js","sources":["showRelatedModulePass.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n// show/hide password\n'use strict';\nvar clipBoardInstances = [];\n$('.show_pass').on('click', function(e) {\n\tlet btn = $(this);\n\tlet record = btn.data('id');\n\tlet iconElement = btn.find('span');\n\tlet text = btn.data('title-copy');\n\tlet copyKey = `.copy_pass${record}`;\n\tlet copyBtn = $(`<button type=\"button\" id=\"copybtn_${record}\" data-id=\"pass_${record}\"\n\t\tclass=\"copy_pass${record} btn btn-light btn-sm mr-2 js-popover-tooltip\" data-content=\"${text}\" data-js=\"popover\"><span class=\"fas fa-download\"></span></button>`);\n\tlet element = $('[id=\"pass_' + record + '\"]');\n\tlet passVal = element.html();\n\tlet showPassText = btn.data('titleShow') ? btn.data('titleShow') : app.vtranslate('LBL_ShowPassword');\n\tlet hidePassText = btn.data('titleHide') ? btn.data('titleHide') : app.vtranslate('LBL_HidePassword');\n\n\tif (clipBoardInstances[copyKey] === undefined) {\n\t\tlet clipboard = new ClipboardJS(copyKey, {\n\t\t\ttext: function(trigger) {\n\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\ttext: app.vtranslate('JS_NOTIFY_COPY_TEXT'),\n\t\t\t\t\ttype: 'success'\n\t\t\t\t});\n\t\t\t\treturn $('#' + trigger.getAttribute('data-id')).text();\n\t\t\t}\n\t\t});\n\t\tclipBoardInstances[copyKey] = clipboard;\n\t}\n\tif (passVal == '**********') {\n\t\tvar params = {\n\t\t\tmodule: 'OSSPasswords',\n\t\t\taction: 'GetPass',\n\t\t\trecord: record\n\t\t};\n\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\tposition: 'html',\n\t\t\tblockInfo: {\n\t\t\t\tenabled: true\n\t\t\t}\n\t\t});\n\t\tAppConnector.request(params).done(function(data) {\n\t\t\tvar response = data['result'];\n\t\t\tif (response['success']) {\n\t\t\t\telement.text(response['password']);\n\t\t\t\t// change button title to 'Hide Password'\n\t\t\t\tbtn.on('show.bs.popover', function() {\n\t\t\t\t\tthis.dataset.content = hidePassText;\n\t\t\t\t});\n\t\t\t\ticonElement.removeClass('adminIcon-passwords-encryption').addClass('fas fa-lock');\n\t\t\t\t// show copy to clipboard button\n\t\t\t\tcopyBtn.insertBefore(btn);\n\t\t\t}\n\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t});\n\t} else {\n\t\telement.html('**********');\n\t\t// change button title to 'Show Password'\n\t\tbtn.on('show.bs.popover', function() {\n\t\t\tthis.dataset.content = showPassText;\n\t\t});\n\t\tapp.showPopoverElementView(element);\n\t\ticonElement.removeClass('fas fa-lock').addClass('adminIcon-passwords-encryption');\n\t\t// hide copy to clipboard button\n\t\t$(copyKey).remove();\n\t\tclipBoardInstances[copyKey].destroy();\n\t\tdelete clipBoardInstances[copyKey];\n\t}\n\treturn false;\n});\n"],"names":["clipBoardInstances","$","on","e","btn","record","data","iconElement","find","text","copyKey","copyBtn","element","passVal","html","showPassText","app","vtranslate","hidePassText","undefined","clipboard","ClipboardJS","trigger","showPnotify","getAttribute","params","progressIndicatorElement","jQuery","progressIndicator","request","done","response","dataset","content","removeClass","addClass","insertBefore","mode","showPopoverElementView","remove","destroy"],"mappings":";;AAAA;AACA;AAEA,IAAIA,qBAAqB,EAAzB;AACAC,EAAE,YAAF,EAAgBC,EAAhB,CAAmB,OAAnB,EAA4B,UAASC,CAAT,EAAY;KACnCC,MAAMH,EAAE,IAAF,CAAV;KACII,SAASD,IAAIE,IAAJ,CAAS,IAAT,CAAb;KACIC,cAAcH,IAAII,IAAJ,CAAS,MAAT,CAAlB;KACIC,OAAOL,IAAIE,IAAJ,CAAS,YAAT,CAAX;KACII,yBAAuBL,MAA3B;KACIM,UAAUV,yCAAuCI,MAAvC,wBAAgEA,MAAhE,+BACKA,MADL,qEAC2EI,IAD3E,wEAAd;KAEIG,UAAUX,EAAE,eAAeI,MAAf,GAAwB,IAA1B,CAAd;KACIQ,UAAUD,QAAQE,IAAR,EAAd;KACIC,eAAeX,IAAIE,IAAJ,CAAS,WAAT,IAAwBF,IAAIE,IAAJ,CAAS,WAAT,CAAxB,GAAgDU,IAAIC,UAAJ,CAAe,kBAAf,CAAnE;KACIC,eAAed,IAAIE,IAAJ,CAAS,WAAT,IAAwBF,IAAIE,IAAJ,CAAS,WAAT,CAAxB,GAAgDU,IAAIC,UAAJ,CAAe,kBAAf,CAAnE;;KAEIjB,mBAAmBU,OAAnB,MAAgCS,SAApC,EAA+C;MAC1CC,YAAY,IAAIC,WAAJ,CAAgBX,OAAhB,EAAyB;SAClC,cAASY,OAAT,EAAkB;qBACNC,WAAjB,CAA6B;WACtBP,IAAIC,UAAJ,CAAe,qBAAf,CADsB;WAEtB;KAFP;WAIOhB,EAAE,MAAMqB,QAAQE,YAAR,CAAqB,SAArB,CAAR,EAAyCf,IAAzC,EAAP;;GANc,CAAhB;qBASmBC,OAAnB,IAA8BU,SAA9B;;KAEGP,WAAW,YAAf,EAA6B;MACxBY,SAAS;WACJ,cADI;WAEJ,SAFI;WAGJpB;GAHT;MAKIqB,2BAA2BC,OAAOC,iBAAP,CAAyB;aAC7C,MAD6C;cAE5C;aACD;;GAHoB,CAA/B;eAMaC,OAAb,CAAqBJ,MAArB,EAA6BK,IAA7B,CAAkC,UAASxB,IAAT,EAAe;OAC5CyB,WAAWzB,KAAK,QAAL,CAAf;OACIyB,SAAS,SAAT,CAAJ,EAAyB;YAChBtB,IAAR,CAAasB,SAAS,UAAT,CAAb;;QAEI7B,EAAJ,CAAO,iBAAP,EAA0B,YAAW;UAC/B8B,OAAL,CAAaC,OAAb,GAAuBf,YAAvB;KADD;gBAGYgB,WAAZ,CAAwB,gCAAxB,EAA0DC,QAA1D,CAAmE,aAAnE;;YAEQC,YAAR,CAAqBhC,GAArB;;4BAEwBwB,iBAAzB,CAA2C,EAAES,MAAM,MAAR,EAA3C;GAZD;EAZD,MA0BO;UACEvB,IAAR,CAAa,YAAb;;MAEIZ,EAAJ,CAAO,iBAAP,EAA0B,YAAW;QAC/B8B,OAAL,CAAaC,OAAb,GAAuBlB,YAAvB;GADD;MAGIuB,sBAAJ,CAA2B1B,OAA3B;cACYsB,WAAZ,CAAwB,aAAxB,EAAuCC,QAAvC,CAAgD,gCAAhD;;IAEEzB,OAAF,EAAW6B,MAAX;qBACmB7B,OAAnB,EAA4B8B,OAA5B;SACOxC,mBAAmBU,OAAnB,CAAP;;QAEM,KAAP;CAhED"}