"use strict";Vtiger_Edit_Js("OSSPasswords_Edit_Js",{},{registerRecordPreSaveEvent:function(form){var thisInstance=this;void 0===form&&(form=this.getForm()),form.on(Vtiger_Edit_Js.recordPreSave,(function(e,data){var password=form.find('[name="password"]').val(),id=form.find('[name="record"]').val(),params={};"**********"===password&&((params={}).data={module:"OSSPasswords",action:"GetPass",record:id},params.async=!1,AppConnector.request(params).done((function(data){var response=data.result;if(response.success){var el=document.getElementById("OSSPasswords_editView_fieldName_password");el.value=response.password,el.onchange()}})),PasswordHelper.passwordStrength("","")),password=form.find('[name="password"]').val(),(params={}).data={module:"OSSPasswords",action:"CheckPass",password:password,id:id},params.async=!1,params.dataType="json",AppConnector.request(params).done((function(data){if(!1===data.result.success){var params={text:data.result.message,sticker:!1,sticker_hover:!1,type:"error"};Vtiger_Helper_Js.showPnotify(params),thisInstance.sending=!1,e.preventDefault(),e.stopPropagation()}else!0!==data.result.success||void 0!==thisInstance.sending&&thisInstance.sending?thisInstance.sending&&(e.preventDefault(),e.stopPropagation()):thisInstance.sending=!0}))}))},generatePassword:function(e){var form=jQuery(e.currentTarget).closest("form"),min=parseInt(jQuery("#minChars").val()),max=parseInt(jQuery("#maxChars").val()),allowedChars=jQuery("#allowedLetters").val(),password="";void 0===allowedChars&&(allowedChars="!");var chArray=allowedChars.split(",");void 0===min&&(min=10),void 0===max&&(max=15);var passlength=parseInt(Math.random()*(max-min)+min),i=0;for(i=0;i<=passlength;i++){password+=chArray[parseInt(Math.random()*chArray.length)]}var passForm=form.find('[name ="password"]');passForm.val(password),passForm.trigger("change")},registerButtonsEvents:function(){var thisInstance=this;$(".js-generatePass").on("click",(function(e){thisInstance.generatePassword(e)}))},registerBasicEvents:function(container){this._super(container),this.registerButtonsEvents(),this.registerRecordPreSaveEvent(container)}});
//# sourceMappingURL=Edit.min.js.map
