{"version":3,"file":"Edit.min.js","sources":["Edit.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery(document).ready(function ($) {\n\t// enable/disable confirm button\n\t$('#status').on('change', function () {\n\t\t$('#confirm').attr('disabled', !this.checked);\n\t});\n});\nVtiger_Edit_Js(\"Reservations_Edit_Js\", {}, {\n\n\tdifferenceDays: function () {\n\t\tvar firstDate = jQuery('input[name=\"date_start\"]');\n\t\tvar firstDateFormat = firstDate.data('date-format');\n\t\tvar firstDateValue = firstDate.val();\n\t\tvar secondDate = jQuery('input[name=\"due_date\"]');\n\t\tvar secondDateFormat = secondDate.data('date-format');\n\t\tvar secondDateValue = secondDate.val();\n\t\tvar firstTime = jQuery('input[name=\"time_start\"]');\n\t\tvar secondTime = jQuery('input[name=\"time_end\"]');\n\t\tvar firstTimeValue = firstTime.val();\n\t\tvar secondTimeValue = secondTime.val();\n\t\tvar firstDateTimeValue = firstDateValue + ' ' + firstTimeValue;\n\t\tvar secondDateTimeValue = secondDateValue + ' ' + secondTimeValue;\n\n\t\tvar firstDateInstance = Vtiger_Helper_Js.getDateInstance(firstDateTimeValue, firstDateFormat);\n\t\tvar secondDateInstance = Vtiger_Helper_Js.getDateInstance(secondDateTimeValue, secondDateFormat);\n\n\t\tvar timeBetweenDates = secondDateInstance - firstDateInstance;\n\t\tif (timeBetweenDates >= 0) {\n\t\t\treturn timeBetweenDates;\n\t\t}\n\t\treturn 'Error';\n\n\t},\n\n\t/**\n\t * Function to register recordpresave event\n\t */\n\tregisterRecordPreSaveEvent: function () {\n\t\tvar thisInstance = this;\n\t\tvar form = this.getForm();\n\n\t\tform.on(Vtiger_Edit_Js.recordPreSave, function (e, data) {\n\t\t\tvar sumeTime2 = thisInstance.differenceDays();\n\t\t\tif (sumeTime2 == 'Error') {\n\t\t\t\tvar parametry = {\n\t\t\t\t\ttext: app.vtranslate('JS_DATE_SHOULD_BE_GREATER_THAN'),\n\t\t\t\t\ttype: 'error'\n\t\t\t\t};\n\t\t\t\tVtiger_Helper_Js.showPnotify(parametry);\n\t\t\t\treturn false;\n\t\t\t} else {\n\t\t\t\tform.submit();\n\t\t\t}\n\t\t});\n\t},\n\tregisterEvents: function () {\n\t\tthis._super();\n\t\tthis.registerRecordPreSaveEvent();\n\t}\n});\n"],"names":["jQuery","document","ready","$","on","attr","checked","Vtiger_Edit_Js","firstDate","firstDateFormat","data","firstDateValue","val","secondDate","secondDateFormat","secondDateValue","firstTime","secondTime","firstTimeValue","secondTimeValue","firstDateTimeValue","secondDateTimeValue","firstDateInstance","Vtiger_Helper_Js","getDateInstance","secondDateInstance","timeBetweenDates","thisInstance","form","getForm","recordPreSave","e","sumeTime2","differenceDays","parametry","app","vtranslate","showPnotify","submit","_super","registerRecordPreSaveEvent"],"mappings":";;AAAA;AACA;AAEAA,OAAOC,QAAP,EAAiBC,KAAjB,CAAuB,UAAUC,CAAV,EAAa;;GAEjC,SAAF,EAAaC,EAAb,CAAgB,QAAhB,EAA0B,YAAY;IACnC,UAAF,EAAcC,IAAd,CAAmB,UAAnB,EAA+B,CAAC,KAAKC,OAArC;EADD;CAFD;AAMAC,eAAe,sBAAf,EAAuC,EAAvC,EAA2C;;iBAE1B,0BAAY;MACvBC,YAAYR,OAAO,0BAAP,CAAhB;MACIS,kBAAkBD,UAAUE,IAAV,CAAe,aAAf,CAAtB;MACIC,iBAAiBH,UAAUI,GAAV,EAArB;MACIC,aAAab,OAAO,wBAAP,CAAjB;MACIc,mBAAmBD,WAAWH,IAAX,CAAgB,aAAhB,CAAvB;MACIK,kBAAkBF,WAAWD,GAAX,EAAtB;MACII,YAAYhB,OAAO,0BAAP,CAAhB;MACIiB,aAAajB,OAAO,wBAAP,CAAjB;MACIkB,iBAAiBF,UAAUJ,GAAV,EAArB;MACIO,kBAAkBF,WAAWL,GAAX,EAAtB;MACIQ,qBAAqBT,iBAAiB,GAAjB,GAAuBO,cAAhD;MACIG,sBAAsBN,kBAAkB,GAAlB,GAAwBI,eAAlD;;MAEIG,oBAAoBC,iBAAiBC,eAAjB,CAAiCJ,kBAAjC,EAAqDX,eAArD,CAAxB;MACIgB,qBAAqBF,iBAAiBC,eAAjB,CAAiCH,mBAAjC,EAAsDP,gBAAtD,CAAzB;;MAEIY,mBAAmBD,qBAAqBH,iBAA5C;MACII,oBAAoB,CAAxB,EAA2B;UACnBA,gBAAP;;SAEM,OAAP;EAvByC;;;;;6BA8Bd,sCAAY;MACnCC,eAAe,IAAnB;MACIC,OAAO,KAAKC,OAAL,EAAX;;OAEKzB,EAAL,CAAQG,eAAeuB,aAAvB,EAAsC,UAAUC,CAAV,EAAarB,IAAb,EAAmB;OACpDsB,YAAYL,aAAaM,cAAb,EAAhB;OACID,aAAa,OAAjB,EAA0B;QACrBE,YAAY;WACTC,IAAIC,UAAJ,CAAe,gCAAf,CADS;WAET;KAFP;qBAIiBC,WAAjB,CAA6BH,SAA7B;WACO,KAAP;IAND,MAOO;SACDI,MAAL;;GAVF;EAlCyC;iBAgD1B,0BAAY;OACtBC,MAAL;OACKC,0BAAL;;CAlDF"}