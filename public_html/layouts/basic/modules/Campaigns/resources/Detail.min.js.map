{"version":3,"file":"Detail.min.js","sources":["Detail.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n * Contributor(s): YetiForce.com\n *************************************************************************************/\n'use strict';\n\nVtiger_Detail_Js(\n\t'Campaigns_Detail_Js',\n\t{},\n\t{\n\t\t/**\n\t\t * Function to register email enabled actions\n\t\t */\n\t\tregisterEmailEnabledActions: function() {\n\t\t\tvar moduleName = app.getModuleName();\n\t\t\tvar className = moduleName + '_List_Js';\n\t\t\tvar listInstance = new window[className]();\n\t\t\tlistInstance.registerEvents();\n\t\t\tlistInstance.markSelectedRecords();\n\t\t},\n\t\tregisterEventForRelatedTabClick: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar detailContentsHolder = thisInstance.getContentHolder();\n\t\t\tvar detailContainer = detailContentsHolder.closest('div.detailViewInfo');\n\t\t\tjQuery('.related', detailContainer).on('click', 'li:not(.spaceRelatedList)', function(e, urlAttributes) {\n\t\t\t\tvar tabElement = jQuery(e.currentTarget);\n\t\t\t\tif (!tabElement.hasClass('dropdown')) {\n\t\t\t\t\tvar element = jQuery('<div></div>');\n\t\t\t\t\telement.progressIndicator({\n\t\t\t\t\t\tposition: 'html',\n\t\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\t\tenabled: true,\n\t\t\t\t\t\t\telementToBlock: detailContainer\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tvar url = tabElement.data('url');\n\t\t\t\t\tif (typeof urlAttributes !== 'undefined') {\n\t\t\t\t\t\tvar callBack = urlAttributes.callback;\n\t\t\t\t\t\tdelete urlAttributes.callback;\n\t\t\t\t\t}\n\t\t\t\t\tthisInstance\n\t\t\t\t\t\t.loadContents(url, urlAttributes)\n\t\t\t\t\t\t.done(function(data) {\n\t\t\t\t\t\t\tthisInstance.deSelectAllrelatedTabs();\n\t\t\t\t\t\t\tthisInstance.markTabAsSelected(tabElement);\n\t\t\t\t\t\t\tVtiger_Helper_Js.showHorizontalTopScrollBar();\n\t\t\t\t\t\t\tthisInstance.registerHelpInfo();\n\t\t\t\t\t\t\tapp.registerModal(detailContentsHolder);\n\t\t\t\t\t\t\telement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\tvar emailEnabledModule = jQuery(data)\n\t\t\t\t\t\t\t\t.find('[name=\"emailEnabledModules\"]')\n\t\t\t\t\t\t\t\t.val();\n\t\t\t\t\t\t\tif (emailEnabledModule) {\n\t\t\t\t\t\t\t\tvar listInstance = new Campaigns_List_Js();\n\t\t\t\t\t\t\t\tlistInstance.registerEvents();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (typeof callBack == 'function') {\n\t\t\t\t\t\t\t\tcallBack(data);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t//Summary tab is clicked\n\t\t\t\t\t\t\tif (tabElement.data('linkKey') == thisInstance.detailViewSummaryTabLabel) {\n\t\t\t\t\t\t\t\tthisInstance.loadWidgets();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthisInstance.registerBasicEvents();\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.fail(function(error) {\n\t\t\t\t\t\t\telement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterEvents: function() {\n\t\t\tthis._super();\n\t\t\t//Calling registerevents of campaigns list to handle checkboxs click of related records\n\t\t\tvar listInstance = Vtiger_List_Js.getInstance();\n\t\t\tlistInstance.registerEvents();\n\t\t\tvar thisInstance = this;\n\t\t\tapp.event.on('RelatedList.AfterLoad', function(event, instance) {\n\t\t\t\tvar response = instance.content;\n\t\t\t\tresponse.find('[name=\"selectedIds\"]').data('selectedIds', '');\n\t\t\t\tresponse.find('[name=\"excludedIds\"]').data('excludedIds', '');\n\t\t\t\tvar emailEnabledModule = response.find('[name=\"emailEnabledModules\"]').val();\n\t\t\t\tif (emailEnabledModule) {\n\t\t\t\t\tthisInstance.registerEmailEnabledActions();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n);\n"],"names":["Vtiger_Detail_Js","moduleName","app","getModuleName","className","listInstance","window","registerEvents","markSelectedRecords","thisInstance","detailContentsHolder","getContentHolder","detailContainer","closest","on","e","urlAttributes","tabElement","jQuery","currentTarget","hasClass","element","progressIndicator","url","data","callBack","callback","loadContents","done","deSelectAllrelatedTabs","markTabAsSelected","showHorizontalTopScrollBar","registerHelpInfo","registerModal","mode","emailEnabledModule","find","val","Campaigns_List_Js","detailViewSummaryTabLabel","loadWidgets","registerBasicEvents","fail","error","_super","Vtiger_List_Js","getInstance","event","instance","response","content","registerEmailEnabledActions"],"mappings":";;AAAA;;;;;;;;;AASA;AAEAA,iBACC,qBADD,EAEC,EAFD,EAGC;;;;8BAI8B,uCAAW;MACnCC,aAAaC,IAAIC,aAAJ,EAAjB;MACIC,YAAYH,aAAa,UAA7B;MACII,eAAe,IAAIC,OAAOF,SAAP,CAAJ,EAAnB;eACaG,cAAb;eACaC,mBAAb;EATF;kCAWkC,2CAAW;MACvCC,eAAe,IAAnB;MACIC,uBAAuBD,aAAaE,gBAAb,EAA3B;MACIC,kBAAkBF,qBAAqBG,OAArB,CAA6B,oBAA7B,CAAtB;SACO,UAAP,EAAmBD,eAAnB,EAAoCE,EAApC,CAAuC,OAAvC,EAAgD,2BAAhD,EAA6E,UAASC,CAAT,EAAYC,aAAZ,EAA2B;OACnGC,aAAaC,OAAOH,EAAEI,aAAT,CAAjB;OACI,CAACF,WAAWG,QAAX,CAAoB,UAApB,CAAL,EAAsC;QACjCC,UAAUH,OAAO,aAAP,CAAd;YACQI,iBAAR,CAA0B;eACf,MADe;gBAEd;eACD,IADC;sBAEMV;;KAJlB;QAOIW,MAAMN,WAAWO,IAAX,CAAgB,KAAhB,CAAV;QACI,OAAOR,aAAP,KAAyB,WAA7B,EAA0C;SACrCS,WAAWT,cAAcU,QAA7B;YACOV,cAAcU,QAArB;;iBAGCC,YADF,CACeJ,GADf,EACoBP,aADpB,EAEEY,IAFF,CAEO,UAASJ,IAAT,EAAe;kBACPK,sBAAb;kBACaC,iBAAb,CAA+Bb,UAA/B;sBACiBc,0BAAjB;kBACaC,gBAAb;SACIC,aAAJ,CAAkBvB,oBAAlB;aACQY,iBAAR,CAA0B,EAAEY,MAAM,MAAR,EAA1B;SACIC,qBAAqBjB,OAAOM,IAAP,EACvBY,IADuB,CAClB,8BADkB,EAEvBC,GAFuB,EAAzB;SAGIF,kBAAJ,EAAwB;UACnB9B,eAAe,IAAIiC,iBAAJ,EAAnB;mBACa/B,cAAb;;SAEG,OAAOkB,QAAP,IAAmB,UAAvB,EAAmC;eACzBD,IAAT;;;SAGGP,WAAWO,IAAX,CAAgB,SAAhB,KAA8Bf,aAAa8B,yBAA/C,EAA0E;mBAC5DC,WAAb;;kBAEYC,mBAAb;KAvBF,EAyBEC,IAzBF,CAyBO,UAASC,KAAT,EAAgB;aACbrB,iBAAR,CAA0B,EAAEY,MAAM,MAAR,EAA1B;KA1BF;;GAhBF;EAfF;iBA8DiB,0BAAW;OACrBU,MAAL;;MAEIvC,eAAewC,eAAeC,WAAf,EAAnB;eACavC,cAAb;MACIE,eAAe,IAAnB;MACIsC,KAAJ,CAAUjC,EAAV,CAAa,uBAAb,EAAsC,UAASiC,KAAT,EAAgBC,QAAhB,EAA0B;OAC3DC,WAAWD,SAASE,OAAxB;YACSd,IAAT,CAAc,sBAAd,EAAsCZ,IAAtC,CAA2C,aAA3C,EAA0D,EAA1D;YACSY,IAAT,CAAc,sBAAd,EAAsCZ,IAAtC,CAA2C,aAA3C,EAA0D,EAA1D;OACIW,qBAAqBc,SAASb,IAAT,CAAc,8BAAd,EAA8CC,GAA9C,EAAzB;OACIF,kBAAJ,EAAwB;iBACVgB,2BAAb;;GANF;;CAvEH"}