{"version":3,"file":"Detail.min.js","sources":["Detail.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n * Contributor(s): YetiForce.com\n *************************************************************************************/\n'use strict';\n\nVtiger_Detail_Js(\n\t'Campaigns_Detail_Js',\n\t{},\n\t{\n\t\t/**\n\t\t * Function to register email enabled actions\n\t\t */\n\t\tregisterEmailEnabledActions: function() {\n\t\t\tvar moduleName = app.getModuleName();\n\t\t\tvar className = moduleName + '_List_Js';\n\t\t\tvar listInstance = new window[className]();\n\t\t\tlistInstance.registerEvents();\n\t\t\tlistInstance.markSelectedRecords();\n\t\t},\n\t\tregisterEventForRelatedTabClick: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar detailContentsHolder = thisInstance.getContentHolder();\n\t\t\tvar detailContainer = detailContentsHolder.closest('div.detailViewInfo');\n\t\t\tjQuery('.related', detailContainer).on('click', 'li:not(.spaceRelatedList)', function(e, urlAttributes) {\n\t\t\t\tvar tabElement = jQuery(e.currentTarget);\n\t\t\t\tif (!tabElement.hasClass('dropdown')) {\n\t\t\t\t\tvar element = jQuery('<div></div>');\n\t\t\t\t\telement.progressIndicator({\n\t\t\t\t\t\tposition: 'html',\n\t\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\t\tenabled: true,\n\t\t\t\t\t\t\telementToBlock: detailContainer\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tvar url = tabElement.data('url');\n\t\t\t\t\tif (typeof urlAttributes !== 'undefined') {\n\t\t\t\t\t\tvar callBack = urlAttributes.callback;\n\t\t\t\t\t\tdelete urlAttributes.callback;\n\t\t\t\t\t}\n\t\t\t\t\tthisInstance\n\t\t\t\t\t\t.loadContents(url, urlAttributes)\n\t\t\t\t\t\t.done(function(data) {\n\t\t\t\t\t\t\tthisInstance.deSelectAllrelatedTabs();\n\t\t\t\t\t\t\tthisInstance.markTabAsSelected(tabElement);\n\t\t\t\t\t\t\tVtiger_Helper_Js.showHorizontalTopScrollBar();\n\t\t\t\t\t\t\tthisInstance.registerHelpInfo();\n\t\t\t\t\t\t\tapp.registerModal(detailContentsHolder);\n\t\t\t\t\t\t\telement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\tvar emailEnabledModule = jQuery(data)\n\t\t\t\t\t\t\t\t.find('[name=\"emailEnabledModules\"]')\n\t\t\t\t\t\t\t\t.val();\n\t\t\t\t\t\t\tif (emailEnabledModule) {\n\t\t\t\t\t\t\t\tvar listInstance = new Campaigns_List_Js();\n\t\t\t\t\t\t\t\tlistInstance.registerEvents();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (typeof callBack == 'function') {\n\t\t\t\t\t\t\t\tcallBack(data);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t//Summary tab is clicked\n\t\t\t\t\t\t\tif (tabElement.data('linkKey') == thisInstance.detailViewSummaryTabLabel) {\n\t\t\t\t\t\t\t\tthisInstance.loadWidgets();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthisInstance.registerBasicEvents();\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.fail(function(error) {\n\t\t\t\t\t\t\telement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterEvents: function() {\n\t\t\tthis._super();\n\t\t\t//Calling registerevents of campaigns list to handle checkboxs click of related records\n\t\t\tvar listInstance = Vtiger_List_Js.getInstance();\n\t\t\tlistInstance.registerEvents();\n\t\t\tvar thisInstance = this;\n\t\t\tapp.event.on('RelatedList.AfterLoad', function(event, instance) {\n\t\t\t\tvar response = instance.content;\n\t\t\t\tresponse.find('[name=\"selectedIds\"]').data('selectedIds', '');\n\t\t\t\tresponse.find('[name=\"excludedIds\"]').data('excludedIds', '');\n\t\t\t\tvar emailEnabledModule = response.find('[name=\"emailEnabledModules\"]').val();\n\t\t\t\tif (emailEnabledModule) {\n\t\t\t\t\tthisInstance.registerEmailEnabledActions();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n);\n"],"names":["Vtiger_Detail_Js","moduleName","app","getModuleName","listInstance","window","registerEvents","markSelectedRecords","thisInstance","this","detailContentsHolder","getContentHolder","detailContainer","closest","on","e","urlAttributes","tabElement","jQuery","currentTarget","hasClass","element","progressIndicator","url","data","callBack","callback","loadContents","done","deSelectAllrelatedTabs","markTabAsSelected","showHorizontalTopScrollBar","registerHelpInfo","registerModal","mode","find","val","Campaigns_List_Js","detailViewSummaryTabLabel","loadWidgets","registerBasicEvents","fail","error","_super","Vtiger_List_Js","getInstance","event","instance","response","content","registerEmailEnabledActions"],"mappings":"aAWAA,iBACC,sBACA,GACA,6BAI8B,eACxBC,WAAaC,IAAIC,gBAEjBC,aAAe,IAAIC,OADPJ,WAAa,yBAEhBK,8BACAC,uDAEmB,eAC5BC,aAAeC,KACfC,qBAAuBF,aAAaG,mBACpCC,gBAAkBF,qBAAqBG,QAAQ,6BAC5C,WAAYD,iBAAiBE,GAAG,QAAS,6BAA6B,SAASC,EAAGC,mBACpFC,WAAaC,OAAOH,EAAEI,mBACrBF,WAAWG,SAAS,YAAa,KACjCC,QAAUH,OAAO,uBACbI,kBAAkB,UACf,iBACC,UACD,iBACOV,uBAGdW,IAAMN,WAAWO,KAAK,eACG,IAAlBR,cAA+B,KACrCS,SAAWT,cAAcU,gBACtBV,cAAcU,sBAGpBC,aAAaJ,IAAKP,eAClBY,MAAK,SAASJ,oBACDK,sCACAC,kBAAkBb,6BACdc,0CACJC,uBACTC,cAAcvB,8BACVY,kBAAkB,CAAEY,KAAM,SACThB,OAAOM,MAC9BW,KAAK,gCACLC,SAEkB,IAAIC,mBACV/B,iBAES,mBAAZmB,mBACDD,MAGNP,WAAWO,KAAK,YAAchB,aAAa8B,wCACjCC,2BAEDC,yBAEbC,MAAK,SAASC,eACNpB,kBAAkB,CAAEY,KAAM,gCAKvB,gBACVS,SAEcC,eAAeC,cACrBvC,qBACTE,aAAeC,SACfqC,MAAMhC,GAAG,yBAAyB,SAASgC,MAAOC,cACjDC,SAAWD,SAASE,iBACfd,KAAK,wBAAwBX,KAAK,cAAe,aACjDW,KAAK,wBAAwBX,KAAK,cAAe,IACjCwB,SAASb,KAAK,gCAAgCC,oBAEzDc"}