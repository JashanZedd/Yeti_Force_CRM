{"version":3,"file":"Edit.min.js","sources":["Edit.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n * Contributor(s): YetiForce.com\n *************************************************************************************/\n'use strict';\n\nVtiger_Edit_Js(\"Products_Edit_Js\", {}, {\n\tbaseCurrency: '',\n\tbaseCurrencyName: '',\n\t//Container which stores the multi currency element\n\tmultiCurrencyContainer: false,\n\t//Container which stores unit price\n\tunitPrice: false,\n\t/**\n\t * Function to get unit price\n\t */\n\tgetUnitPrice: function () {\n\t\tif (this.unitPrice == false) {\n\t\t\tthis.unitPrice = $('input.unitPrice', this.getForm());\n\t\t}\n\t\treturn this.unitPrice;\n\t},\n\t/**\n\t * Function to get more currencies container\n\t */\n\tgetMoreCurrenciesContainer: function () {\n\t\tif (this.multiCurrencyContainer == false) {\n\t\t\tthis.multiCurrencyContainer = $('.multiCurrencyEditUI');\n\t\t}\n\t\treturn this.multiCurrencyContainer;\n\t},\n\t/**\n\t * Function which aligns data just below global search element\n\t */\n\talignBelowUnitPrice: function (dataToAlign) {\n\t\tvar parentElem = $('input[name=\"unit_price\"]', this.getForm());\n\t\tdataToAlign.position({\n\t\t\t'of': parentElem,\n\t\t\t'my': \"left top\",\n\t\t\t'at': \"left bottom\",\n\t\t\t'collision': 'flip'\n\t\t});\n\t\treturn this;\n\t},\n\t/**\n\t * Function to get current Element\n\t */\n\tgetCurrentElem: function (e) {\n\t\treturn $(e.currentTarget);\n\t},\n\t/**\n\t *Function to register events for taxes\n\t */\n\tregisterEventForTaxes: function () {\n\t\tvar thisInstance = this;\n\t\tvar formElem = this.getForm();\n\t\t$('.taxes').on('change', function (e) {\n\t\t\tvar elem = thisInstance.getCurrentElem(e);\n\t\t\tvar taxBox = elem.data('taxName');\n\t\t\tif (elem.is(':checked')) {\n\t\t\t\t$('input[name=' + taxBox + ']', formElem).removeAttr('readonly');\n\t\t\t} else {\n\t\t\t\t$('input[name=' + taxBox + ']', formElem).attr('readonly', 'readonly');\n\t\t\t}\n\n\t\t});\n\t\treturn this;\n\t},\n\t/**\n\t * Function to register event for enabling base currency on radio button clicked\n\t */\n\tregisterEventForEnableBaseCurrency: function () {\n\t\tlet container = this.getMoreCurrenciesContainer();\n\t\tlet currencyLabel = $('.js-currency');\n\t\tlet thisInstance = this;\n\t\t$(container).on('change', '.baseCurrency', function (e) {\n\t\t\tlet elem = thisInstance.getCurrentElem(e);\n\t\t\tlet parentElem = elem.closest('tr');\n\t\t\tif (elem.is(':checked')) {\n\t\t\t\tlet convertedPrice = $('.convertedPrice', parentElem).val();\n\t\t\t\tthisInstance.baseCurrencyName = parentElem.data('currencyId');\n\t\t\t\tthisInstance.baseCurrency = convertedPrice;\n\t\t\t\tcurrencyLabel.text(parentElem.data('currency-symbol'));\n\t\t\t}\n\t\t});\n\t\treturn this;\n\t},\n\t/**\n\t * Function to register event for reseting the currencies\n\t */\n\tregisterEventForResetCurrency: function () {\n\t\tvar container = this.getMoreCurrenciesContainer();\n\t\tvar thisInstance = this;\n\t\t$(container).on('click', '.currencyReset', function (e) {\n\t\t\tvar parentElem = thisInstance.getCurrentElem(e).closest('tr');\n\t\t\tvar unitPriceFieldData = thisInstance.getUnitPrice().data();\n\t\t\tvar unitPrice = thisInstance.getDataBaseFormatUnitPrice();\n\t\t\tvar conversionRate = $('.conversionRate', parentElem).val();\n\t\t\tvar price = parseFloat(unitPrice) * parseFloat(conversionRate);\n\t\t\tvar calculatedPrice = app.parseNumberToShow(price);\n\t\t\t$('.convertedPrice', parentElem).val(calculatedPrice);\n\t\t});\n\t\treturn this;\n\t},\n\t/**\n\t *  Function to return stripped unit price\n\t */\n\tgetDataBaseFormatUnitPrice: function () {\n\t\tvar field = this.getUnitPrice();\n\t\tvar unitPrice = field.getNumberFromValue();\n\t\treturn unitPrice;\n\t},\n\tcalculateConversionRate: function () {\n\t\tvar container = this.getMoreCurrenciesContainer();\n\t\tvar baseCurrencyRow = container.find('.baseCurrency').filter(':checked').closest('tr');\n\t\tvar baseCurrencyConvestationRate = baseCurrencyRow.find('.conversionRate');\n\t\t//if basecurrency has conversation rate as 1 then you dont have caliculate conversation rate\n\t\tif (baseCurrencyConvestationRate.val() == \"1\") {\n\t\t\treturn;\n\t\t}\n\t\tvar baseCurrencyRatePrevValue = baseCurrencyConvestationRate.val();\n\n\t\tcontainer.find('.conversionRate').each(function (key, domElement) {\n\t\t\tvar element = $(domElement);\n\t\t\tif (!element.is(baseCurrencyConvestationRate)) {\n\t\t\t\tvar prevValue = element.val();\n\t\t\t\telement.val((prevValue / baseCurrencyRatePrevValue));\n\t\t\t}\n\t\t});\n\t\tbaseCurrencyConvestationRate.val(\"1\");\n\t},\n\t/**\n\t * Function to register event for enabling currency on checkbox checked\n\t */\n\n\tregisterEventForEnableCurrency: function () {\n\t\tvar container = this.getMoreCurrenciesContainer();\n\t\tvar thisInstance = this;\n\t\t$(container).on('change', '.enableCurrency', function (e) {\n\t\t\tvar elem = thisInstance.getCurrentElem(e);\n\t\t\tvar parentRow = elem.closest('tr');\n\n\t\t\tif (elem.is(':checked')) {\n\t\t\t\telem.attr('checked', \"checked\");\n\t\t\t\tvar conversionRate = $('.conversionRate', parentRow).val();\n\t\t\t\tvar unitPriceFieldData = thisInstance.getUnitPrice().data();\n\t\t\t\tvar unitPrice = thisInstance.getDataBaseFormatUnitPrice();\n\t\t\t\tvar price = parseFloat(unitPrice) * parseFloat(conversionRate);\n\t\t\t\t$('input', parentRow).attr('disabled', true).removeAttr('disabled');\n\t\t\t\t$('button.currencyReset', parentRow).attr('disabled', true).removeAttr('disabled');\n\t\t\t\tvar calculatedPrice = app.parseNumberToShow(price);\n\t\t\t\t$('input.convertedPrice', parentRow).val(calculatedPrice);\n\t\t\t} else {\n\t\t\t\tvar baseCurrency = $('.baseCurrency', parentRow);\n\t\t\t\tif (baseCurrency.is(':checked')) {\n\t\t\t\t\tvar currencyName = $('.currencyName', parentRow).text();\n\t\t\t\t\tvar params = {\n\t\t\t\t\t\t'type': 'error',\n\t\t\t\t\t\t'title': app.vtranslate('JS_ERROR'),\n\t\t\t\t\t\t'text': app.vtranslate('JS_BASE_CURRENCY_CHANGED_TO_DISABLE_CURRENCY') + '\"' + currencyName + '\"'\n\t\t\t\t\t};\n\t\t\t\t\tVtiger_Helper_Js.showPnotify(params);\n\t\t\t\t\telem.prop('checked', true);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t$('input', parentRow).attr('disabled', true);\n\t\t\t\t$('input.enableCurrency', parentRow).removeAttr('disabled');\n\t\t\t\t$('button.currencyReset', parentRow).attr('disabled', 'disabled');\n\t\t\t}\n\t\t});\n\t\treturn this;\n\t},\n\t/**\n\t * Function to get more currencies UI\n\t */\n\tgetMoreCurrenciesUI: function () {\n\t\tvar aDeferred = $.Deferred();\n\t\tvar moduleName = app.getModuleName();\n\t\tvar baseCurrency = $('input[name=\"base_currency\"]').val();\n\t\tvar recordId = $('input[name=\"record\"]').val();\n\t\tvar moreCurrenciesContainer = $('#moreCurrenciesContainer');\n\t\tmoreCurrenciesUi = moreCurrenciesContainer.find('.multiCurrencyEditUI');\n\t\tvar moreCurrenciesUi;\n\n\t\tif (moreCurrenciesUi.length == 0) {\n\t\t\tvar moreCurrenciesParams = {\n\t\t\t\t'module': moduleName,\n\t\t\t\t'view': \"MoreCurrenciesList\",\n\t\t\t\t'currency': baseCurrency,\n\t\t\t\t'record': recordId\n\t\t\t};\n\n\t\t\tAppConnector.request(moreCurrenciesParams).done(function (data) {\n\t\t\t\tmoreCurrenciesContainer.html(data);\n\t\t\t\taDeferred.resolve(data);\n\t\t\t}).fail(function (textStatus, errorThrown) {\n\t\t\t\taDeferred.reject(textStatus, errorThrown);\n\t\t\t});\n\t\t} else {\n\t\t\taDeferred.resolve();\n\t\t}\n\t\treturn aDeferred.promise();\n\t},\n\t/*\n\t * function to register events for more currencies link\n\t */\n\tregisterEventForMoreCurrencies: function () {\n\t\tvar thisInstance = this;\n\t\tvar form = this.getForm();\n\t\t$('#moreCurrencies').on('click', function (e) {\n\t\t\tvar progressInstance = $.progressIndicator();\n\t\t\tthisInstance.getMoreCurrenciesUI().done(function () {\n\t\t\t\tvar moreCurrenciesUi;\n\t\t\t\tmoreCurrenciesUi = $('#moreCurrenciesContainer').find('.multiCurrencyEditUI');\n\t\t\t\tif (moreCurrenciesUi.length > 0) {\n\t\t\t\t\tmoreCurrenciesUi = moreCurrenciesUi.clone(true, true);\n\t\t\t\t\tprogressInstance.hide();\n\t\t\t\t\tvar css = {'text-align': 'left', 'width': '65%'};\n\t\t\t\t\tvar callback = function (data) {\n\t\t\t\t\t\tvar params = app.validationEngineOptionsForRecord;\n\t\t\t\t\t\tvar form = data.find('#currencyContainer');\n\t\t\t\t\t\tparams.onValidationComplete = function (form, valid) {\n\t\t\t\t\t\t\tif (valid) {\n\t\t\t\t\t\t\t\tthisInstance.saveCurrencies();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t};\n\t\t\t\t\t\tform.validationEngine(params);\n\t\t\t\t\t\tapp.showScrollBar(data.find('.currencyContent'), {'height': '400px'});\n\t\t\t\t\t\tthisInstance.baseCurrency = thisInstance.getUnitPrice().val();\n\t\t\t\t\t\tvar multiCurrencyEditUI = $('.multiCurrencyEditUI');\n\t\t\t\t\t\tthisInstance.multiCurrencyContainer = multiCurrencyEditUI;\n\t\t\t\t\t\tthisInstance.calculateConversionRate();\n\t\t\t\t\t\tthisInstance.registerEventForEnableCurrency();\n\t\t\t\t\t\tthisInstance.registerEventForEnableBaseCurrency();\n\t\t\t\t\t\tthisInstance.registerEventForResetCurrency();\n\t\t\t\t\t\tthisInstance.triggerForBaseCurrencyCalc();\n\t\t\t\t\t};\n\t\t\t\t\tvar moreCurrenciesContainer = $('#moreCurrenciesContainer').find('.multiCurrencyEditUI');\n\t\t\t\t\tvar contentInsideForm = moreCurrenciesUi.find('.multiCurrencyContainer').html();\n\t\t\t\t\tmoreCurrenciesUi.find('.multiCurrencyContainer').remove();\n\t\t\t\t\tvar form = '<form id=\"currencyContainer\"></form>';\n\t\t\t\t\t$(form).insertAfter(moreCurrenciesUi.find('.modal-header'));\n\t\t\t\t\tmoreCurrenciesUi.find('form').html(contentInsideForm);\n\t\t\t\t\tmoreCurrenciesContainer.find('input[name^=curname]').each(function (index, element) {\n\t\t\t\t\t\tvar dataValue = $(element).val();\n\t\t\t\t\t\tvar dataId = $(element).attr('id');\n\t\t\t\t\t\tmoreCurrenciesUi.find('#' + dataId).val(dataValue);\n\t\t\t\t\t});\n\t\t\t\t\tvar modalWindowParams = {\n\t\t\t\t\t\tdata: moreCurrenciesUi,\n\t\t\t\t\t\tcss: css,\n\t\t\t\t\t\tcb: callback\n\t\t\t\t\t};\n\t\t\t\t\tapp.showModalWindow(modalWindowParams);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\t/**\n\t * Function to calculate base currency price value if unit\n\t * present on click of more currencies\n\t */\n\ttriggerForBaseCurrencyCalc: function () {\n\t\tvar multiCurrencyEditUI = this.getMoreCurrenciesContainer();\n\t\tvar baseCurrency = multiCurrencyEditUI.find('.enableCurrency');\n\t\t$.each(baseCurrency, function (key, val) {\n\t\t\tif ($(val).is(':checked')) {\n\t\t\t\tvar baseCurrencyRow = $(val).closest('tr');\n\t\t\t\tif (parseFloat(baseCurrencyRow.find('.convertedPrice').val()) == 0) {\n\t\t\t\t\tbaseCurrencyRow.find('.currencyReset').trigger('click');\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t$(val).closest('tr').find('.convertedPrice').val('');\n\t\t\t}\n\t\t});\n\t},\n\t/**\n\t * Function to register onchange event for unit price\n\t */\n\tregisterEventForUnitPrice: function () {\n\t\tvar thisInstance = this;\n\t\tvar unitPrice = this.getUnitPrice();\n\t\tunitPrice.on('change', function () {\n\t\t\tthisInstance.triggerForBaseCurrencyCalc();\n\t\t});\n\t},\n\tregisterRecordPreSaveEvent: function (form) {\n\t\tvar thisInstance = this;\n\t\tif (typeof form === \"undefined\") {\n\t\t\tform = this.getForm();\n\t\t}\n\n\t\tform.on(Vtiger_Edit_Js.recordPreSave, function (e, data) {\n\t\t\tvar multiCurrencyContent = $('#moreCurrenciesContainer').find('.currencyContent');\n\t\t\tvar unitPrice = thisInstance.getUnitPrice();\n\t\t\tif ((multiCurrencyContent.length < 1) && (unitPrice.length > 0)) {\n\t\t\t\te.preventDefault();\n\t\t\t\tthisInstance.getMoreCurrenciesUI().done(function () {\n\t\t\t\t\tthisInstance.preSaveConfigOfForm(form);\n\t\t\t\t\tform.submit();\n\t\t\t\t});\n\t\t\t} else if (multiCurrencyContent.length > 0) {\n\t\t\t\tthisInstance.preSaveConfigOfForm(form);\n\t\t\t}\n\t\t});\n\t},\n\t/**\n\t * Function to handle settings before save of record\n\t */\n\tpreSaveConfigOfForm: function (form) {\n\t\tvar unitPrice = this.getUnitPrice();\n\t\tif (unitPrice.length > 0) {\n\t\t\tvar unitPriceValue = unitPrice.val();\n\t\t\tvar baseCurrencyName = form.find('[name=\"base_currency\"]').val();\n\t\t\tform.find('[name=\"' + baseCurrencyName + '\"]').val(unitPriceValue);\n\t\t\tform.find('#requstedUnitPrice').attr('name', baseCurrencyName).val(unitPriceValue);\n\t\t}\n\t},\n\tsaveCurrencies: function () {\n\t\tvar thisInstance = this;\n\t\tvar errorMessage, params;\n\t\tvar form = $('#currencyContainer');\n\t\tvar editViewForm = thisInstance.getForm();\n\t\tvar modalContainer = $('#' + Window.lastModalId);\n\t\tvar enabledBaseCurrency = modalContainer.find('.enableCurrency').filter(':checked');\n\t\tif (enabledBaseCurrency.length < 1) {\n\t\t\terrorMessage = app.vtranslate('JS_PLEASE_SELECT_BASE_CURRENCY_FOR_PRODUCT');\n\t\t\tparams = {\n\t\t\t\ttext: errorMessage,\n\t\t\t\t'type': 'error'\n\t\t\t};\n\t\t\tVtiger_Helper_Js.showMessage(params);\n\t\t\tform.removeData('submit');\n\t\t\treturn;\n\t\t}\n\t\tenabledBaseCurrency.attr('checked', \"checked\");\n\t\tmodalContainer.find('.enableCurrency').filter(\":not(:checked)\").removeAttr('checked');\n\t\tvar selectedBaseCurrency = modalContainer.find('.baseCurrency').filter(':checked');\n\t\tif (selectedBaseCurrency.length < 1) {\n\t\t\terrorMessage = app.vtranslate('JS_PLEASE_ENABLE_BASE_CURRENCY_FOR_PRODUCT');\n\t\t\tparams = {\n\t\t\t\ttext: errorMessage,\n\t\t\t\t'type': 'error'\n\t\t\t};\n\t\t\tVtiger_Helper_Js.showMessage(params);\n\t\t\tform.removeData('submit');\n\t\t\treturn;\n\t\t}\n\t\tselectedBaseCurrency.attr('checked', \"checked\");\n\t\tmodalContainer.find('.baseCurrency').filter(\":not(:checked)\").removeAttr('checked');\n\t\tvar parentElem = selectedBaseCurrency.closest('tr');\n\t\tvar convertedPrice = $('.convertedPrice', parentElem).val();\n\t\tthisInstance.baseCurrencyName = parentElem.data('currencyId');\n\t\tthisInstance.baseCurrency = convertedPrice;\n\n\t\tthisInstance.getUnitPrice().val(thisInstance.baseCurrency);\n\t\t$('input[name=\"base_currency\"]', editViewForm).val(thisInstance.baseCurrencyName);\n\n\t\tvar savedValuesOfMultiCurrency = modalContainer.find('.currencyContent').html();\n\t\tvar moreCurrenciesContainer = $('#moreCurrenciesContainer');\n\t\tmoreCurrenciesContainer.find('.currencyContent').html(savedValuesOfMultiCurrency);\n\t\tmodalContainer.find('input[name^=curname]').each(function (index, element) {\n\t\t\tvar dataValue = $(element).val();\n\t\t\tvar dataId = $(element).attr('id');\n\t\t\tmoreCurrenciesContainer.find('.currencyContent').find('#' + dataId).val(dataValue);\n\t\t});\n\t\tapp.hideModalWindow();\n\t},\n\tregisterEventForUsageunit: function () {\n\t\tthis.checkUsageUnit();\n\t\t$('select[name=\"usageunit\"]').on('change', this.checkUsageUnit);\n\t},\n\tcheckUsageUnit: function () {\n\t\tvar selectUsageunit = $('select[name=\"usageunit\"]');\n\t\tvar inputQtyPerUnit = $('input[name=\"qty_per_unit\"]');\n\t\tvar value = selectUsageunit.val();\n\t\tif (value === 'pack') {\n\t\t\tinputQtyPerUnit.prop('disabled', false);\n\t\t} else {\n\t\t\tinputQtyPerUnit.prop('disabled', true);\n\t\t}\n\t},\n\tregisterEvents: function () {\n\t\tthis._super();\n\t\tthis.registerEventForMoreCurrencies();\n\t\tthis.registerEventForTaxes();\n\t\tthis.registerEventForUnitPrice();\n\t\tthis.registerRecordPreSaveEvent();\n\t\tthis.registerEventForUsageunit();\n\t}\n});\n"],"names":["Vtiger_Edit_Js","baseCurrency","baseCurrencyName","multiCurrencyContainer","unitPrice","getUnitPrice","$","getForm","getMoreCurrenciesContainer","alignBelowUnitPrice","dataToAlign","position","parentElem","getCurrentElem","e","currentTarget","registerEventForTaxes","formElem","on","thisInstance","taxBox","elem","data","is","removeAttr","attr","registerEventForEnableBaseCurrency","currencyLabel","container","closest","val","convertedPrice","text","registerEventForResetCurrency","unitPriceFieldData","getDataBaseFormatUnitPrice","conversionRate","price","parseFloat","calculatedPrice","app","parseNumberToShow","field","getNumberFromValue","calculateConversionRate","baseCurrencyRow","find","filter","baseCurrencyConvestationRate","each","key","domElement","element","prevValue","baseCurrencyRatePrevValue","registerEventForEnableCurrency","parentRow","params","vtranslate","currencyName","showPnotify","prop","getMoreCurrenciesUI","Deferred","moduleName","getModuleName","recordId","moreCurrenciesContainer","moreCurrenciesUi","length","AppConnector","request","done","html","aDeferred","resolve","fail","textStatus","errorThrown","reject","promise","registerEventForMoreCurrencies","form","progressIndicator","clone","progressInstance","hide","validationEngineOptionsForRecord","onValidationComplete","valid","saveCurrencies","validationEngine","showScrollBar","multiCurrencyEditUI","triggerForBaseCurrencyCalc","contentInsideForm","remove","insertAfter","index","dataId","dataValue","css","cb","callback","showModalWindow","modalWindowParams","trigger","registerEventForUnitPrice","registerRecordPreSaveEvent","recordPreSave","preventDefault","preSaveConfigOfForm","submit","unitPriceValue","editViewForm","modalContainer","Window","lastModalId","enabledBaseCurrency","errorMessage","Vtiger_Helper_Js","showMessage","removeData","selectedBaseCurrency","savedValuesOfMultiCurrency","hideModalWindow","registerEventForUsageunit","checkUsageUnit","inputQtyPerUnit","value","selectUsageunit","registerEvents","_super"],"mappings":";;AAWAA,eAAe,kBAAf,CAAmC,EAAnC,CAAuC,CACtCC,aAAc,EADwB,CAEtCC,iBAAkB,EAFoB,CAItCC,yBAJsC,CAMtCC,YANsC,CAUtCC,aAAc,uBAAY,CAIzB,OAHI,SAAKD,SAGT,GAFC,KAAKA,SAAL,CAAiBE,EAAE,iBAAF,CAAqB,KAAKC,OAAL,EAArB,CAElB,EAAO,KAAKH,SACZ,CAfqC,CAmBtCI,2BAA4B,qCAAY,CAIvC,OAHI,SAAKL,sBAGT,GAFC,KAAKA,sBAAL,CAA8BG,EAAE,sBAAF,CAE/B,EAAO,KAAKH,sBACZ,CAxBqC,CA4BtCM,oBAAqB,6BAAUC,WAAV,CAAuB,CAC3C,eAAiBJ,EAAE,0BAAF,CAA8B,KAAKC,OAAL,EAA9B,CAAjB,CAOA,mBANYI,QAAZ,CAAqB,CACpB,GAAMC,UADc,CAEpB,GAAM,UAFc,CAGpB,GAAM,aAHc,CAIpB,UAAa,MAJO,CAArB,CAMA,CAAO,IACP,CArCqC,CAyCtCC,eAAgB,wBAAUC,CAAV,CAAa,CAC5B,SAASA,EAAEC,aAAJ,CACP,CA3CqC,CA+CtCC,sBAAuB,gCAAY,kBACf,IADe,CAE9BC,SAAW,KAAKV,OAAL,EAFmB,CAalC,SAVE,QAAF,EAAYW,EAAZ,CAAe,QAAf,CAAyB,SAAUJ,CAAV,CAAa,UAC1BK,aAAaN,cAAb,CAA4BC,CAA5B,CAD0B,CAEjCM,OAASC,KAAKC,IAAL,CAAU,SAAV,CAFwB,CAGjCD,KAAKE,EAAL,CAAQ,UAAR,CAHiC,CAIpCjB,EAAE,cAAgBc,MAAhB,CAAyB,GAA3B,CAAgCH,QAAhC,EAA0CO,UAA1C,CAAqD,UAArD,CAJoC,CAMpClB,EAAE,cAAgBc,MAAhB,CAAyB,GAA3B,CAAgCH,QAAhC,EAA0CQ,IAA1C,CAA+C,UAA/C,CAA2D,UAA3D,EAGD,CATD,CAUA,CAAO,IACP,CA7DqC,CAiEtCC,mCAAoC,6CAAY,eAC/B,KAAKlB,0BAAL,EAD+B,CAE3CmB,cAAgBrB,EAAE,cAAF,CAF2B,CAG3Ca,aAAe,IAH4B,CAc/C,SAVES,SAAF,EAAaV,EAAb,CAAgB,QAAhB,CAA0B,eAA1B,CAA2C,SAAUJ,CAAV,CAAa,UAC5CK,aAAaN,cAAb,CAA4BC,CAA5B,CAD4C,CAEnDF,WAAaS,KAAKQ,OAAL,CAAa,IAAb,CAFsC,CAGvD,GAAIR,KAAKE,EAAL,CAAQ,UAAR,CAAJ,CAAyB,CACxB,mBAAqBjB,EAAE,iBAAF,CAAqBM,UAArB,EAAiCkB,GAAjC,EAArB,CACAX,aAAajB,gBAAb,CAAgCU,WAAWU,IAAX,CAAgB,YAAhB,CAFR,CAGxBH,aAAalB,YAAb,CAA4B8B,cAHJ,CAIxBJ,cAAcK,IAAd,CAAmBpB,WAAWU,IAAX,CAAgB,iBAAhB,CAAnB,EACA,CACD,CATD,CAUA,CAAO,IACP,CAhFqC,CAoFtCW,8BAA+B,wCAAY,eAC1B,KAAKzB,0BAAL,EAD0B,CAEtCW,aAAe,IAFuB,CAY1C,SATES,SAAF,EAAaV,EAAb,CAAgB,OAAhB,CAAyB,gBAAzB,CAA2C,SAAUJ,CAAV,CAAa,gBACtCK,aAAaN,cAAb,CAA4BC,CAA5B,EAA+Be,OAA/B,CAAuC,IAAvC,CADsC,CAEnDK,mBAAqBf,aAAad,YAAb,GAA4BiB,IAA5B,EAF8B,CAGnDlB,UAAYe,aAAagB,0BAAb,EAHuC,CAInDC,eAAiB9B,EAAE,iBAAF,CAAqBM,UAArB,EAAiCkB,GAAjC,EAJkC,CAKnDO,MAAQC,WAAWlC,SAAX,EAAwBkC,WAAWF,cAAX,CALmB,CAMnDG,gBAAkBC,IAAIC,iBAAJ,CAAsBJ,KAAtB,CANiC,CAOvD/B,EAAE,iBAAF,CAAqBM,UAArB,EAAiCkB,GAAjC,CAAqCS,eAArC,EACA,CARD,CASA,CAAO,IACP,CAjGqC,CAqGtCJ,2BAA4B,qCAAY,WAC3B,KAAK9B,YAAL,EAD2B,CAEnCD,UAAYsC,MAAMC,kBAAN,EAFuB,CAGvC,gBACA,CAzGqC,CA0GtCC,wBAAyB,kCAAY,eACpB,KAAKpC,0BAAL,EADoB,CAEhCqC,gBAAkBjB,UAAUkB,IAAV,CAAe,eAAf,EAAgCC,MAAhC,CAAuC,UAAvC,EAAmDlB,OAAnD,CAA2D,IAA3D,CAFc,CAGhCmB,6BAA+BH,gBAAgBC,IAAhB,CAAqB,iBAArB,CAHC,CAKpC,GAA0C,GAAtC,+BAA6BhB,GAA7B,EAAJ,EAGA,8BAAgCkB,6BAA6BlB,GAA7B,EAAhC,CAEAF,UAAUkB,IAAV,CAAe,iBAAf,EAAkCG,IAAlC,CAAuC,SAAUC,GAAV,CAAeC,UAAf,CAA2B,CACjE,YAAc7C,EAAE6C,UAAF,CAAd,CACA,GAAI,CAACC,QAAQ7B,EAAR,CAAWyB,4BAAX,CAAL,CAA+C,CAC9C,cAAgBI,QAAQtB,GAAR,EAAhB,CACAsB,QAAQtB,GAAR,CAAauB,UAAYC,yBAAzB,EACA,CACD,CAND,CALA,CAYAN,6BAA6BlB,GAA7B,CAAiC,GAAjC,EAZA,CAaA,CA5HqC,CAiItCyB,+BAAgC,yCAAY,eAC3B,KAAK/C,0BAAL,EAD2B,CAEvCW,aAAe,IAFwB,CAmC3C,SAhCES,SAAF,EAAaV,EAAb,CAAgB,QAAhB,CAA0B,iBAA1B,CAA6C,SAAUJ,CAAV,CAAa,UAC9CK,aAAaN,cAAb,CAA4BC,CAA5B,CAD8C,CAErD0C,UAAYnC,KAAKQ,OAAL,CAAa,IAAb,CAFyC,CAIzD,GAAIR,KAAKE,EAAL,CAAQ,UAAR,CAAJ,CAAyB,CACxBF,KAAKI,IAAL,CAAU,SAAV,CAAqB,SAArB,CADwB,oBAEHnB,EAAE,iBAAF,CAAqBkD,SAArB,EAAgC1B,GAAhC,EAFG,CAGpBI,mBAAqBf,aAAad,YAAb,GAA4BiB,IAA5B,EAHD,CAIpBlB,UAAYe,aAAagB,0BAAb,EAJQ,CAKpBE,MAAQC,WAAWlC,SAAX,EAAwBkC,WAAWF,cAAX,CALZ,CAMxB9B,EAAE,OAAF,CAAWkD,SAAX,EAAsB/B,IAAtB,CAA2B,UAA3B,KAA6CD,UAA7C,CAAwD,UAAxD,CANwB,CAOxBlB,EAAE,sBAAF,CAA0BkD,SAA1B,EAAqC/B,IAArC,CAA0C,UAA1C,KAA4DD,UAA5D,CAAuE,UAAvE,CAPwB,CAQxB,oBAAsBgB,IAAIC,iBAAJ,CAAsBJ,KAAtB,CAAtB,CACA/B,EAAE,sBAAF,CAA0BkD,SAA1B,EAAqC1B,GAArC,CAAyCS,eAAzC,EACA,CAVD,IAUO,CACN,iBAAmBjC,EAAE,eAAF,CAAmBkD,SAAnB,CAAnB,CACA,GAAIvD,aAAasB,EAAb,CAAgB,UAAhB,CAAJ,CAAiC,kBACbjB,EAAE,eAAF,CAAmBkD,SAAnB,EAA8BxB,IAA9B,EADa,CAE5ByB,OAAS,CACZ,KAAQ,OADI,CAEZ,MAASjB,IAAIkB,UAAJ,CAAe,UAAf,CAFG,CAGZ,KAAQlB,IAAIkB,UAAJ,CAAe,8CAAf,EAAiE,GAAjE,CAAuEC,YAAvE,CAAsF,GAHlF,CAFmB,CAShC,wBAFiBC,WAAjB,CAA6BH,MAA7B,CAEA,WADKI,IAAL,CAAU,SAAV,IAEA,CACDvD,EAAE,OAAF,CAAWkD,SAAX,EAAsB/B,IAAtB,CAA2B,UAA3B,IAbM,CAcNnB,EAAE,sBAAF,CAA0BkD,SAA1B,EAAqChC,UAArC,CAAgD,UAAhD,CAdM,CAeNlB,EAAE,sBAAF,CAA0BkD,SAA1B,EAAqC/B,IAArC,CAA0C,UAA1C,CAAsD,UAAtD,EACA,CACD,CA/BD,CAgCA,CAAO,IACP,CArKqC,CAyKtCqC,oBAAqB,8BAAY,eAChBxD,EAAEyD,QAAF,EADgB,CAE5BC,WAAaxB,IAAIyB,aAAJ,EAFe,CAG5BhE,aAAeK,EAAE,6BAAF,EAAiCwB,GAAjC,EAHa,CAI5BoC,SAAW5D,EAAE,sBAAF,EAA0BwB,GAA1B,EAJiB,CAK5BqC,wBAA0B7D,EAAE,0BAAF,CALE,CAMhC8D,iBAAmBD,wBAAwBrB,IAAxB,CAA6B,sBAA7B,CANa,CAOhC,oBAAA,CAEA,GAA+B,CAA3B,mBAAiBuB,MAArB,CAAkC,CAQjCC,aAAaC,OAAb,CAP2B,CAC1B,OAAUP,UADgB,CAE1B,KAAQ,oBAFkB,CAG1B,SAAY/D,YAHc,CAI1B,OAAUiE,QAJgB,CAO3B,EAA2CM,IAA3C,CAAgD,SAAUlD,IAAV,CAAgB,CAC/D6C,wBAAwBM,IAAxB,CAA6BnD,IAA7B,CAD+D,CAE/DoD,UAAUC,OAAV,CAAkBrD,IAAlB,EACA,CAHD,EAGGsD,IAHH,CAGQ,SAAUC,UAAV,CAAsBC,WAAtB,CAAmC,CAC1CJ,UAAUK,MAAV,CAAiBF,UAAjB,CAA6BC,WAA7B,EACA,CALD,EAMA,CAdD,eAeWH,OAAV,EAfD,CAiBA,iBAAiBK,OAAV,EACP,CApMqC,CAwMtCC,+BAAgC,yCAAY,kBACxB,IADwB,CAEvCC,KAAO,KAAK3E,OAAL,EAFgC,CAG3CD,EAAE,iBAAF,EAAqBY,EAArB,CAAwB,OAAxB,CAAiC,UAAa,CAC7C,qBAAuBZ,EAAE6E,iBAAF,EAAvB,CACAhE,aAAa2C,mBAAb,GAAmCU,IAAnC,CAAwC,UAAY,CACnD,oBAAA,CAEA,GADAJ,iBAAmB9D,EAAE,0BAAF,EAA8BwC,IAA9B,CAAmC,sBAAnC,CACnB,CAA8B,CAA1B,kBAAiBuB,MAArB,CAAiC,CAChCD,iBAAmBA,iBAAiBgB,KAAjB,OADa,CAEhCC,iBAAiBC,IAAjB,EAFgC,cAIjB,SAAUhE,IAAV,CAAgB,YACjBkB,IAAI+C,gCADa,CAE1BL,KAAO5D,KAAKwB,IAAL,CAAU,oBAAV,CAFmB,CAG9BW,OAAO+B,oBAAP,CAA8B,SAAUN,IAAV,CAAgBO,KAAhB,CAAuB,CAIpD,YAAA,EAFCtE,aAAauE,cAAb,EAED,GACA,CAR6B,CAS9BR,KAAKS,gBAAL,CAAsBlC,MAAtB,CAT8B,CAU9BjB,IAAIoD,aAAJ,CAAkBtE,KAAKwB,IAAL,CAAU,kBAAV,CAAlB,CAAiD,CAAC,OAAU,OAAX,CAAjD,CAV8B,CAW9B3B,aAAalB,YAAb,CAA4BkB,aAAad,YAAb,GAA4ByB,GAA5B,EAXE,CAY9B,wBAA0BxB,EAAE,sBAAF,CAA1B,CACAa,aAAahB,sBAAb,CAAsC0F,mBAbR,CAc9B1E,aAAayB,uBAAb,EAd8B,CAe9BzB,aAAaoC,8BAAb,EAf8B,CAgB9BpC,aAAaO,kCAAb,EAhB8B,CAiB9BP,aAAac,6BAAb,EAjB8B,CAkB9Bd,aAAa2E,0BAAb,GACA,CAvB+B,CAwB5B3B,wBAA0B7D,EAAE,0BAAF,EAA8BwC,IAA9B,CAAmC,sBAAnC,CAxBE,CAyB5BiD,kBAAoB3B,iBAAiBtB,IAAjB,CAAsB,yBAAtB,EAAiD2B,IAAjD,EAzBQ,CA0BhCL,iBAAiBtB,IAAjB,CAAsB,yBAAtB,EAAiDkD,MAAjD,EA1BgC,CA4BhC1F,0CAAQ2F,WAAR,CAAoB7B,iBAAiBtB,IAAjB,CAAsB,eAAtB,CAApB,CA5BgC,CA6BhCsB,iBAAiBtB,IAAjB,CAAsB,MAAtB,EAA8B2B,IAA9B,CAAmCsB,iBAAnC,CA7BgC,CA8BhC5B,wBAAwBrB,IAAxB,CAA6B,sBAA7B,EAAqDG,IAArD,CAA0D,SAAUiD,KAAV,CAAiB9C,OAAjB,CAA0B,eACnE9C,EAAE8C,OAAF,EAAWtB,GAAX,EADmE,CAE/EqE,OAAS7F,EAAE8C,OAAF,EAAW3B,IAAX,CAAgB,IAAhB,CAFsE,CAGnF2C,iBAAiBtB,IAAjB,CAAsB,IAAMqD,MAA5B,EAAoCrE,GAApC,CAAwCsE,SAAxC,EACA,CAJD,CA9BgC,CAmChC,sBAAwB,CACvB9E,KAAM8C,gBADiB,CAEvBiC,IAlCS,CAAC,aAAc,MAAf,CAAuB,MAAS,KAAhC,CAgCc,CAGvBC,GAAIC,QAHmB,CAAxB,CAKA/D,IAAIgE,eAAJ,CAAoBC,iBAApB,EACA,CACD,CA7CD,EA8CA,CAhDD,EAiDA,CA5PqC,CAiQtCX,2BAA4B,qCAAY,yBACb,KAAKtF,0BAAL,EADa,CAEnCP,aAAe4F,oBAAoB/C,IAApB,CAAyB,iBAAzB,CAFoB,CAGvCxC,EAAE2C,IAAF,CAAOhD,YAAP,CAAqB,SAAUiD,GAAV,CAAepB,GAAf,CAAoB,CACxC,GAAIxB,EAAEwB,GAAF,EAAOP,EAAP,CAAU,UAAV,CAAJ,CAA2B,CAC1B,oBAAsBjB,EAAEwB,GAAF,EAAOD,OAAP,CAAe,IAAf,CAAtB,CACiE,CAA7D,aAAWgB,gBAAgBC,IAAhB,CAAqB,iBAArB,EAAwChB,GAAxC,EAAX,CAFsB,EAGzBe,gBAAgBC,IAAhB,CAAqB,gBAArB,EAAuC4D,OAAvC,CAA+C,OAA/C,EAED,CALD,OAMG5E,GAAF,EAAOD,OAAP,CAAe,IAAf,EAAqBiB,IAArB,CAA0B,iBAA1B,EAA6ChB,GAA7C,CAAiD,EAAjD,EAED,CATD,EAUA,CA9QqC,CAkRtC6E,0BAA2B,oCAAY,kBACnB,IADmB,CAElCvG,UAAY,KAAKC,YAAL,EAFsB,CAGtCD,UAAUc,EAAV,CAAa,QAAb,CAAuB,UAAY,CAClCC,aAAa2E,0BAAb,GACA,CAFD,EAGA,CAxRqC,CAyRtCc,2BAA4B,oCAAU1B,IAAV,CAAgB,CAC3C,iBAAmB,IAAnB,CACoB,WAAhB,aAFuC,GAG1CA,KAAO,KAAK3E,OAAL,EAHmC,EAM3C2E,KAAKhE,EAAL,CAAQlB,eAAe6G,aAAvB,CAAsC,SAAU/F,CAAV,CAAmB,0BAC7BR,EAAE,0BAAF,EAA8BwC,IAA9B,CAAmC,kBAAnC,CAD6B,CAEpD1C,UAAYe,aAAad,YAAb,EAFwC,CAGrB,CAA9B,sBAAqBgE,MAAtB,EAAyD,CAAnB,WAAUA,MAHI,EAIvDvD,EAAEgG,cAAF,EAJuD,CAKvD3F,aAAa2C,mBAAb,GAAmCU,IAAnC,CAAwC,UAAY,CACnDrD,aAAa4F,mBAAb,CAAiC7B,IAAjC,CADmD,CAEnDA,KAAK8B,MAAL,GACA,CAHD,CALuD,EASf,CAA9B,sBAAqB3C,MATwB,EAUvDlD,aAAa4F,mBAAb,CAAiC7B,IAAjC,EAED,CAZD,EAaA,CA5SqC,CAgTtC6B,oBAAqB,6BAAU7B,IAAV,CAAgB,CACpC,cAAgB,KAAK7E,YAAL,EAAhB,CACA,GAAuB,CAAnB,WAAUgE,MAAd,CAA0B,oBACJjE,UAAU0B,GAAV,EADI,CAErB5B,iBAAmBgF,KAAKpC,IAAL,CAAU,wBAAV,EAAoChB,GAApC,EAFE,CAGzBoD,KAAKpC,IAAL,CAAU,UAAY5C,gBAAZ,CAA+B,IAAzC,EAA+C4B,GAA/C,CAAmDmF,cAAnD,CAHyB,CAIzB/B,KAAKpC,IAAL,CAAU,oBAAV,EAAgCrB,IAAhC,CAAqC,MAArC,CAA6CvB,gBAA7C,EAA+D4B,GAA/D,CAAmEmF,cAAnE,EACA,CACD,CAxTqC,CAyTtCvB,eAAgB,yBAAY,iBAAA,CAETjC,MAFS,CACvBtC,aAAe,IADQ,CAGvB+D,KAAO5E,EAAE,oBAAF,CAHgB,CAIvB4G,aAAe/F,aAAaZ,OAAb,EAJQ,CAKvB4G,eAAiB7G,EAAE,IAAM8G,OAAOC,WAAf,CALM,CAMvBC,oBAAsBH,eAAerE,IAAf,CAAoB,iBAApB,EAAuCC,MAAvC,CAA8C,UAA9C,CANC,CAO3B,GAAiC,CAA7B,qBAAoBsB,MAAxB,CAQC,oBAPe7B,IAAIkB,UAAJ,CAAe,4CAAf,CAOf,CANAD,OAAS,CACRzB,KAAMuF,YADE,CAER,KAAQ,OAFA,CAMT,CAFAC,iBAAiBC,WAAjB,CAA6BhE,MAA7B,CAEA,WADKiE,UAAL,CAAgB,QAAhB,CACA,CAEDJ,oBAAoB7F,IAApB,CAAyB,SAAzB,CAAoC,SAApC,CAjB2B,CAkB3B0F,eAAerE,IAAf,CAAoB,iBAApB,EAAuCC,MAAvC,CAA8C,gBAA9C,EAAgEvB,UAAhE,CAA2E,SAA3E,CAlB2B,CAmB3B,yBAA2B2F,eAAerE,IAAf,CAAoB,eAApB,EAAqCC,MAArC,CAA4C,UAA5C,CAA3B,CACA,GAAkC,CAA9B,sBAAqBsB,MAAzB,CAQC,oBAPe7B,IAAIkB,UAAJ,CAAe,4CAAf,CAOf,CANAD,OAAS,CACRzB,KAAMuF,YADE,CAER,KAAQ,OAFA,CAMT,CAFAC,iBAAiBC,WAAjB,CAA6BhE,MAA7B,CAEA,WADKiE,UAAL,CAAgB,QAAhB,CACA,CAEDC,qBAAqBlG,IAArB,CAA0B,SAA1B,CAAqC,SAArC,CA9B2B,CA+B3B0F,eAAerE,IAAf,CAAoB,eAApB,EAAqCC,MAArC,CAA4C,gBAA5C,EAA8DvB,UAA9D,CAAyE,SAAzE,CA/B2B,gBAgCVmG,qBAAqB9F,OAArB,CAA6B,IAA7B,CAhCU,CAiCvBE,eAAiBzB,EAAE,iBAAF,CAAqBM,UAArB,EAAiCkB,GAAjC,EAjCM,CAkC3BX,aAAajB,gBAAb,CAAgCU,WAAWU,IAAX,CAAgB,YAAhB,CAlCL,CAmC3BH,aAAalB,YAAb,CAA4B8B,cAnCD,CAqC3BZ,aAAad,YAAb,GAA4ByB,GAA5B,CAAgCX,aAAalB,YAA7C,CArC2B,CAsC3BK,EAAE,6BAAF,CAAiC4G,YAAjC,EAA+CpF,GAA/C,CAAmDX,aAAajB,gBAAhE,CAtC2B,gCAwCMiH,eAAerE,IAAf,CAAoB,kBAApB,EAAwC2B,IAAxC,EAxCN,CAyCvBN,wBAA0B7D,EAAE,0BAAF,CAzCH,CA0C3B6D,wBAAwBrB,IAAxB,CAA6B,kBAA7B,EAAiD2B,IAAjD,CAAsDmD,0BAAtD,CA1C2B,CA2C3BT,eAAerE,IAAf,CAAoB,sBAApB,EAA4CG,IAA5C,CAAiD,SAAUiD,KAAV,CAAiB9C,OAAjB,CAA0B,eAC1D9C,EAAE8C,OAAF,EAAWtB,GAAX,EAD0D,CAEtEqE,OAAS7F,EAAE8C,OAAF,EAAW3B,IAAX,CAAgB,IAAhB,CAF6D,CAG1E0C,wBAAwBrB,IAAxB,CAA6B,kBAA7B,EAAiDA,IAAjD,CAAsD,IAAMqD,MAA5D,EAAoErE,GAApE,CAAwEsE,SAAxE,EACA,CAJD,CA3C2B,CAgD3B5D,IAAIqF,eAAJ,GACA,CA1WqC,CA2WtCC,0BAA2B,oCAAY,CACtC,KAAKC,cAAL,EADsC,CAEtCzH,EAAE,0BAAF,EAA8BY,EAA9B,CAAiC,QAAjC,CAA2C,KAAK6G,cAAhD,EACA,CA9WqC,CA+WtCA,eAAgB,yBAAY,qBACLzH,EAAE,0BAAF,CADK,CAEvB0H,gBAAkB1H,EAAE,4BAAF,CAFK,CAGvB2H,MAAQC,gBAAgBpG,GAAhB,EAHe,CAIb,MAAV,QAJuB,CAK1BkG,gBAAgBnE,IAAhB,CAAqB,UAArB,IAL0B,CAO1BmE,gBAAgBnE,IAAhB,CAAqB,UAArB,KAED,CAxXqC,CAyXtCsE,eAAgB,yBAAY,CAC3B,KAAKC,MAAL,EAD2B,CAE3B,KAAKnD,8BAAL,EAF2B,CAG3B,KAAKjE,qBAAL,EAH2B,CAI3B,KAAK2F,yBAAL,EAJ2B,CAK3B,KAAKC,0BAAL,EAL2B,CAM3B,KAAKkB,yBAAL,GACA,CAhYqC,CAAvC"}