{"version":3,"file":"Iframe.min.js","sources":["Iframe.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n\"use strict\";\n\nconst MailIntegration_Iframe = {\n\tmailId: 0,\n\tcontainer: {},\n\tiframe: {},\n\tiframeWindow: {},\n\tmoduleSelect: {},\n\taddRecordBtn: {},\n\tloaderParams: {\n\t\tblockInfo: { enabled: true },\n\t\tmessage: false\n\t},\n\t/**\n\t * AppConnector wrapper\n\t *\n\t * @param   {object}  request\n\t *\n\t * @return  {object}           AppConnector object with done method\n\t */\n\tconnector(request) {\n\t\treturn AppConnector.request(request).fail(error => {\n\t\t\tthis.hideIframeLoader();\n\t\t\tthis.showResponseMessage(false);\n\t\t});\n\t},\n\t/**\n\t * Show response message\n\t *\n\t * @param   {boolean}  success\n\t * @param   {string}  message\n\t */\n\tshowResponseMessage(success, message = \"\") {\n\t\tif (success) {\n\t\t\tthis.mailItem.notificationMessages.replaceAsync(\"information\", {\n\t\t\t\ttype: \"informationalMessage\",\n\t\t\t\tmessage: message,\n\t\t\t\ticon: \"iconid\",\n\t\t\t\tpersistent: false\n\t\t\t});\n\t\t} else {\n\t\t\tthis.mailItem.notificationMessages.replaceAsync(\"error\", {\n\t\t\t\ttype: \"errorMessage\",\n\t\t\t\tmessage: app.vtranslate(\"JS_ERROR\") + \" \" + message\n\t\t\t});\n\t\t}\n\t},\n\t/**\n\t * Register list item events\n\t */\n\tregisterListItemEvents() {\n\t\tthis.container.on(\"click\", \".js-list-item-click\", this.onClickListItem.bind(this));\n\t\t$(document).on(\"click\", \".popover a\", this.onClickLink.bind(this));\n\t\tthis.container.on(\"click\", \".js-add-related-record\", this.onClickQuickCreateBtn.bind(this));\n\t\tthis.container.on(\"click\", \".js-remove-record\", this.onClickDeleteRelation.bind(this));\n\t},\n\t/**\n\t * On ListItem click actions\n\t *\n\t * @param   {[type]}  event  [event description]\n\t *\n\t * @return  {[type]}         [return description]\n\t */\n\tonClickListItem(event) {\n\t\tlet currentTarget = $(event.currentTarget);\n\t\tthis.toggleActiveListItems(currentTarget);\n\t\tthis.onClickLink(event, currentTarget.find(\".js-record-link\").attr(\"href\"));\n\t},\n\t/**\n\t * On link click\n\t *\n\t * @param   {object}  event  click event object\n\t * @param   {string}  url\n\t */\n\tonClickLink(event, url) {\n\t\tevent.preventDefault();\n\t\tif (!url) {\n\t\t\turl = $(event.currentTarget).attr(\"href\");\n\t\t}\n\t\tthis.changeIframeSource(url);\n\t},\n\t/**\n\t * On delete relation click\n\t *\n\t * @param   {object}  event  click event\n\t */\n\tonClickDeleteRelation(event) {\n\t\tevent.stopPropagation();\n\t\tconst currentTarget = $(event.currentTarget);\n\t\tconst recordData = currentTarget.closest(\".js-list-item-click\").data();\n\t\tthis.connector({\n\t\t\tmodule: \"MailIntegration\",\n\t\t\taction: \"Mail\",\n\t\t\tmode: \"deleteRelation\",\n\t\t\tmailId: this.mailId,\n\t\t\trecord: recordData.id,\n\t\t\trecordModule: recordData.module\n\t\t}).done(response => {\n\t\t\tthis.showResponseMessage(response[\"success\"], app.vtranslate(\"JS_REMOVED_RELATION_SUCCESSFULLY\"));\n\t\t\tthis.reloadView(response[\"success\"]);\n\t\t});\n\t},\n\t/**\n\t * On quick create btn click\n\t *\n\t * @param   {object}  event  click event\n\t */\n\tonClickQuickCreateBtn(event) {\n\t\tevent.stopPropagation();\n\t\tconst currentTarget = $(event.currentTarget);\n\t\tconst recordData = currentTarget.closest(\".js-list-item-click\").data();\n\t\tconst callbackFunction = () => {\n\t\t\tthis.iframeWindow.location.reload();\n\t\t};\n\t\tlet newRecordData = {\n\t\t\tsourceModule: recordData.module,\n\t\t\tsourceRecord: recordData.id\n\t\t};\n\t\tthis.showQuickCreateForm(event.currentTarget.dataset.module, {\n\t\t\tdata: newRecordData,\n\t\t\tcallbackFunction\n\t\t});\n\t},\n\t/**\n\t * Fill new record data in quick create form\n\t *\n\t * @param   {string}  moduleName  [moduleName description]\n\t *\n\t * @return  {object}              call asyncGetMailBody which returns Promise\n\t */\n\tfillNewRecordData(moduleName) {\n\t\tconst data = {\n\t\t\temail: this.mailItem.from.emailAddress,\n\t\t\temail1: this.mailItem.from.emailAddress,\n\t\t\trelationOperation: true,\n\t\t\trelatedRecords: $.map(this.container.find(\".js-list-item-click\"), record => {\n\t\t\t\treturn { module: record.dataset.module, id: record.dataset.id };\n\t\t\t})\n\t\t};\n\t\tconst fillNameFields = () => {\n\t\t\tconst nameData = this.mailItem.from.displayName.split(\" \");\n\t\t\tconst firstName = nameData.shift();\n\t\t\tconst lastName = nameData.join(\" \");\n\t\t\tdata.firstname = firstName;\n\t\t\tdata.lastname = lastName;\n\t\t};\n\t\tswitch (moduleName) {\n\t\t\tcase \"Leads\":\n\t\t\t\tdata.company = this.mailItem.from.displayName;\n\t\t\t\tfillNameFields();\n\t\t\t\tbreak;\n\t\t\tcase \"Contacts\":\n\t\t\t\tfillNameFields();\n\t\t\t\tbreak;\n\t\t\tcase \"Project\":\n\t\t\t\tdata.projectname = this.mailItem.subject;\n\t\t\t\tbreak;\n\t\t\tcase \"HelpDesk\":\n\t\t\t\tdata.ticket_title = this.mailItem.subject;\n\t\t\t\tbreak;\n\t\t\tcase \"Products\":\n\t\t\t\tdata.productname = this.mailItem.subject;\n\t\t\t\tbreak;\n\t\t\tcase \"Services\":\n\t\t\t\tdata.servicename = this.mailItem.subject;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t\tconst mailBodyCallback = body => {\n\t\t\tdata.description = body;\n\t\t\treturn data;\n\t\t};\n\t\treturn this.asyncGetMailBody(mailBodyCallback);\n\t},\n\t/**\n\t * Toggle active list items\n\t *\n\t * @param   {object}  targetListItem  jQuery\n\t */\n\ttoggleActiveListItems(targetListItem) {\n\t\ttargetListItem.siblings().removeClass(\"active\");\n\t\ttargetListItem.addClass(\"active\");\n\t},\n\t/**\n\t * Change iframe source\n\t *\n\t * @param   {string}  url\n\t */\n\tchangeIframeSource(url) {\n\t\tthis.iframe.attr(\"src\", url);\n\t\tthis.showIframeLoader();\n\t},\n\t/**\n\t * Add relation\n\t *\n\t * @param   {number}  recordId\n\t * @param   {string}  moduleName\n\t */\n\taddRelation(recordId, moduleName) {\n\t\tthis.connector({\n\t\t\tmodule: \"MailIntegration\",\n\t\t\taction: \"Mail\",\n\t\t\tmode: \"addRelation\",\n\t\t\tmailId: this.mailId,\n\t\t\trecord: recordId,\n\t\t\trecordModule: moduleName\n\t\t}).done(response => {\n\t\t\tthis.showResponseMessage(response[\"success\"], app.vtranslate(\"JS_ADDED_RELATION_SUCCESSFULLY\"));\n\t\t\tthis.reloadView(response[\"success\"]);\n\t\t});\n\t},\n\t/**\n\t * Show quick create form\n\t *\n\t * @param   {string}  moduleName\n\t * @param   {object}  quickCreateParams\n\t */\n\tshowQuickCreateForm(moduleName, quickCreateParams = {}) {\n\t\tquickCreateParams = Object.assign({ noCache: true, data: {} }, quickCreateParams);\n\t\tthis.fillNewRecordData(moduleName).then(data => {\n\t\t\tquickCreateParams.data = Object.assign(data, quickCreateParams.data);\n\t\t\tApp.Components.QuickCreate.createRecord(moduleName, quickCreateParams);\n\t\t});\n\t},\n\t/**\n\t * Register iframe events\n\t */\n\tregisterIframeEvents() {\n\t\tconst link = this.container.find(\".js-list-item-click\").first();\n\t\tthis.initIframeLoader();\n\t\tif (link.length) {\n\t\t\tlink.addClass(\"active\");\n\t\t\tthis.iframe.attr(\"src\", link.find(\".js-record-link\").attr(\"href\"));\n\t\t\tthis.iframe.on(\"load\", () => {\n\t\t\t\tthis.hideIframeLoader();\n\t\t\t});\n\t\t} else {\n\t\t\tthis.hideIframeLoader();\n\t\t}\n\t},\n\t/**\n\t * Register import click\n\t */\n\tregisterImportClick() {\n\t\tthis.container.on(\"click\", \".js-import-mail\", e => {\n\t\t\tthis.showIframeLoader();\n\t\t\tthis.getMailDetails().then(mails => {\n\t\t\t\tthis.connector(\n\t\t\t\t\tObject.assign(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmodule: \"MailIntegration\",\n\t\t\t\t\t\t\taction: \"Import\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tmails,\n\t\t\t\t\t\twindow.PanelParams\n\t\t\t\t\t)\n\t\t\t\t).done(response => {\n\t\t\t\t\tthis.hideIframeLoader();\n\t\t\t\t\tthis.showResponseMessage(response[\"success\"], app.vtranslate(\"JS_IMPORT\"));\n\t\t\t\t\tthis.reloadView(response[\"success\"]);\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t},\n\t/**\n\t * Get mail details\n\t *\n\t * @return  {object}  Promise\n\t */\n\tgetMailDetails() {\n\t\tlet mailItem = this.mailItem;\n\t\tif (mailItem.attachments.length > 0) {\n\t\t\tlet outputString = \"\";\n\t\t\tfor (let i = 0; i < mailItem.attachments.length; i++) {\n\t\t\t\tlet attachment = mailItem.attachments[i];\n\t\t\t\toutputString += \"<BR>\" + i + \". Name: \";\n\t\t\t\toutputString += attachment.name;\n\t\t\t\toutputString += \"<BR>ID: \" + attachment.id;\n\t\t\t\toutputString += \"<BR>contentType: \" + attachment.contentType;\n\t\t\t\toutputString += \"<BR>size: \" + attachment.size;\n\t\t\t\toutputString += \"<BR>attachmentType: \" + attachment.attachmentType;\n\t\t\t\toutputString += \"<BR>isInline: \" + attachment.isInline;\n\t\t\t}\n\t\t}\n\t\tconst mailDetails = {\n\t\t\tmailFrom: this.parseEmailAddressDetails(mailItem.from),\n\t\t\tmailSender: mailItem.sender.emailAddress,\n\t\t\tmailTo: this.parseEmailAddressDetails(mailItem.to),\n\t\t\tmailCc: this.parseEmailAddressDetails(mailItem.cc),\n\t\t\tmailMessageId: mailItem.internetMessageId,\n\t\t\tmailSubject: mailItem.subject,\n\t\t\tmailNormalizedSubject: mailItem.normalizedSubject,\n\t\t\tmailDateTimeCreated: mailItem.dateTimeCreated.toISOString()\n\t\t};\n\t\tconst mailBodyCallback = body => {\n\t\t\tmailDetails.mailBody = body;\n\t\t\treturn mailDetails;\n\t\t};\n\t\treturn this.asyncGetMailBody(mailBodyCallback);\n\t},\n\t/**\n\t * Get mail body async function\n\t *\n\t * @param   {function}  callback\n\t *\n\t * @return  {object}            Promise\n\t */\n\tasyncGetMailBody(callback) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis.mailItem.body.getAsync(Office.CoercionType.Html, body => {\n\t\t\t\tif (body.status === \"succeeded\") {\n\t\t\t\t\tresolve(callback(body.value));\n\t\t\t\t} else {\n\t\t\t\t\treject(body);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\t/**\n\t * Parse email address details\n\t *\n\t * @param   {object}  data\n\t *\n\t * @return  {string}        e-mail address\n\t */\n\tparseEmailAddressDetails(data) {\n\t\tlet fn = function(row) {\n\t\t\treturn row.emailAddress;\n\t\t};\n\t\tif ($.isArray(data)) {\n\t\t\tlet rows = [];\n\t\t\t$.each(data, function(index, value) {\n\t\t\t\trows[index] = fn(value);\n\t\t\t});\n\t\t\treturn rows;\n\t\t} else {\n\t\t\treturn fn(data);\n\t\t}\n\t},\n\t/**\n\t * Set iframe height\n\t */\n\tsetIframeHeight() {\n\t\tthis.iframe.height($(window).height() - this.iframe.offset().top);\n\t},\n\t/**\n\t * Show iframe loader\n\t */\n\tshowIframeLoader() {\n\t\tthis.iframeLoader.progressIndicator(this.loaderParams);\n\t},\n\t/**\n\t * Hide iframe loader\n\t */\n\thideIframeLoader() {\n\t\tthis.iframeLoader.progressIndicator({ mode: \"hide\" });\n\t},\n\t/**\n\t * Init iframe loader\n\t */\n\tinitIframeLoader() {\n\t\tthis.iframeLoader = $.progressIndicator(this.loaderParams);\n\t},\n\t/**\n\t * Register modules select\n\t */\n\tregisterModulesSelect() {\n\t\tthis.moduleSelect = App.Fields.Picklist.showSelect2ElementView(this.container.find(\".js-modules\"));\n\t\tthis.moduleSelect.on(\"change\", this.registerModulesSelectChange.bind(this));\n\t\tthis.container.find(\".js-select-record\").on(\"click\", e => {\n\t\t\tconst params = {\n\t\t\t\tmodule: this.moduleSelect[0].value,\n\t\t\t\tsrc_module: \"OSSMailView\"\n\t\t\t};\n\t\t\tapp.showRecordsList(params, (modal, instance) => {\n\t\t\t\tinstance.setSelectEvent((responseData, e) => {\n\t\t\t\t\tthis.addRelation(responseData.id, params.module);\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t},\n\t/**\n\t * Register modules select change\n\t */\n\tregisterModulesSelectChange() {\n\t\tif (this.moduleSelect.select2(\"data\")[0].element.dataset.addRecord) {\n\t\t\tthis.addRecordBtn.removeClass(\"d-none\");\n\t\t} else {\n\t\t\tthis.addRecordBtn.addClass(\"d-none\");\n\t\t}\n\t},\n\t/**\n\t * Register add record\n\t */\n\tregisterAddRecord() {\n\t\tthis.addRecordBtn.on(\"click\", e => {\n\t\t\tconst moduleName = this.moduleSelect[0].value;\n\t\t\tconst callbackFunction = ({ result }) => {\n\t\t\t\tthis.addRelation(result._recordId, moduleName);\n\t\t\t};\n\t\t\tconst quickCreateParams = { callbackFunction };\n\t\t\tthis.showQuickCreateForm(moduleName, quickCreateParams);\n\t\t});\n\t},\n\t/**\n\t * Reload view\n\t */\n\treloadView(condition) {\n\t\tif (condition) {\n\t\t\twindow.location.reload();\n\t\t}\n\t},\n\t/**\n\t * Register events\n\t */\n\tregisterEvents() {\n\t\tthis.container = $(\"#page\");\n\t\tthis.iframe = $(\"#js-iframe\");\n\t\tthis.iframeWindow = this.iframe[0].contentWindow;\n\t\tthis.addRecordBtn = this.container.find(\".js-add-record\");\n\t\tthis.mailId = this.container.find(\".js-iframe-container\").data(\"mailId\");\n\t\tthis.mailItem = Office.context.mailbox.item;\n\t\tif (this.iframe.length) {\n\t\t\tthis.registerListItemEvents();\n\t\t\tthis.registerIframeEvents();\n\t\t\tthis.setIframeHeight();\n\t\t\tif (this.mailId) {\n\t\t\t\tthis.registerModulesSelect();\n\t\t\t\tthis.registerAddRecord();\n\t\t\t} else {\n\t\t\t\tthis.registerImportClick();\n\t\t\t}\n\t\t}\n\t}\n};\n\n(function($) {\n\tMailIntegration_Iframe.registerEvents();\n})($);\n"],"names":["MailIntegration_Iframe","enabled","request","AppConnector","fail","hideIframeLoader","showResponseMessage","success","message","mailItem","notificationMessages","replaceAsync","app","vtranslate","container","on","this","onClickListItem","bind","document","onClickLink","onClickQuickCreateBtn","onClickDeleteRelation","event","currentTarget","$","toggleActiveListItems","find","attr","url","preventDefault","changeIframeSource","stopPropagation","recordData","closest","data","connector","mailId","id","module","done","response","reloadView","newRecordData","showQuickCreateForm","dataset","iframeWindow","location","reload","moduleName","from","emailAddress","map","record","fillNameFields","nameData","_this4","displayName","split","firstName","shift","lastName","join","firstname","lastname","company","projectname","subject","ticket_title","productname","servicename","asyncGetMailBody","description","body","targetListItem","siblings","removeClass","addClass","iframe","showIframeLoader","recordId","quickCreateParams","Object","assign","noCache","fillNewRecordData","then","Components","QuickCreate","createRecord","link","first","initIframeLoader","length","getMailDetails","mails","window","PanelParams","attachments","i","attachment","name","contentType","size","attachmentType","isInline","mailDetails","parseEmailAddressDetails","sender","to","cc","internetMessageId","normalizedSubject","dateTimeCreated","toISOString","mailBody","callback","Promise","resolve","reject","getAsync","Office","CoercionType","Html","status","value","fn","row","isArray","rows","each","index","height","offset","top","iframeLoader","progressIndicator","loaderParams","mode","moduleSelect","App","Fields","Picklist","showSelect2ElementView","registerModulesSelectChange","params","_this9","showRecordsList","modal","instance","setSelectEvent","responseData","e","addRelation","select2","element","addRecord","addRecordBtn","_this10","callbackFunction","result","_recordId","condition","contentWindow","context","mailbox","item","registerListItemEvents","registerIframeEvents","setIframeHeight","registerModulesSelect","registerAddRecord","registerImportClick","registerEvents"],"mappings":"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"}