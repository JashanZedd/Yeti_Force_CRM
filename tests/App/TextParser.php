<?php
/**
 * TextParser test class.
 *
 * @copyright YetiForce Sp. z o.o
 * @license   YetiForce Public License 3.0 (licenses/LicenseEN.txt or yetiforce.com)
 * @author    Sławomir Kłos <s.klos@yetiforce.com>
 */

namespace Tests\Settings;

class TextParser extends \Tests\Base
{
	/**
	 * Test record id.
	 */
	private static $testRecordId;
	/**
	 * Test record module.
	 */
	private static $testRecordModule;

	private function populateTestRecords()
	{
		static::$testRecordModule = 'Leads';
		$recordModel = \Vtiger_Record_Model::getCleanInstance(static::$testRecordModule);
		$recordModel->set('description', 'autogenerated test lead for \App\TextParser tests');
		$recordModel->save();
		static::$testRecordId = $recordModel->getId();
	}

	/**
	 * Testing instances creation.
	 */
	public function testInstancesCreation()
	{
		if (!static::$testRecordId || !static::$testRecordModule) {
			$this->populateTestRecords();
		}
		$this->assertInstanceOf('\App\TextParser', \App\TextParser::getInstance(), 'Expected clean instance without module of \App\TextParser');
		$this->assertInstanceOf('\App\TextParser', \App\TextParser::getInstance('Leads'), 'Expected clean instance with module Leads of \App\TextParser');
		$this->assertInstanceOf('\App\TextParser', \App\TextParser::getInstanceById(static::$testRecordId, static::$testRecordModule), 'Expected instance from lead id and module string of \App\TextParser');
	}
}
